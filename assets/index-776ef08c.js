var Ppe=Object.defineProperty;var kpe=(n,e,t)=>e in n?Ppe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Lpe=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Cn=(n,e,t)=>(kpe(n,typeof e!="symbol"?e+"":e,t),t);var cxt=Lpe((ru,su)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function uB(n,e){const t=Object.create(null),i=n.split(",");for(let r=0;r<i.length;r++)t[i[r]]=!0;return e?r=>!!t[r.toLowerCase()]:r=>!!t[r]}const as={},A1=[],qi=()=>{},Ope=()=>!1,Npe=/^on[^a-z]/,xI=n=>Npe.test(n),cB=n=>n.startsWith("onUpdate:"),qs=Object.assign,dB=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},Bpe=Object.prototype.hasOwnProperty,Ai=(n,e)=>Bpe.call(n,e),Bt=Array.isArray,E1=n=>sT(n)==="[object Map]",wI=n=>sT(n)==="[object Set]",Xp=n=>sT(n)==="[object Date]",pn=n=>typeof n=="function",un=n=>typeof n=="string",O2=n=>typeof n=="symbol",Yn=n=>n!==null&&typeof n=="object",N2=n=>Yn(n)&&pn(n.then)&&pn(n.catch),HZ=Object.prototype.toString,sT=n=>HZ.call(n),Fpe=n=>sT(n).slice(8,-1),B2=n=>sT(n)==="[object Object]",fB=n=>un(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,dM=uB(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),TI=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},Upe=/-(\w)/g,fu=TI(n=>n.replace(Upe,(e,t)=>t?t.toUpperCase():"")),zpe=/\B([A-Z])/g,b0=TI(n=>n.replace(zpe,"-$1").toLowerCase()),aT=TI(n=>n.charAt(0).toUpperCase()+n.slice(1)),Hx=TI(n=>n?`on${aT(n)}`:""),F2=(n,e)=>!Object.is(n,e),fM=(n,e)=>{for(let t=0;t<n.length;t++)n[t](e)},p3=(n,e,t)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value:t})},FL=n=>{const e=parseFloat(n);return isNaN(e)?n:e},Hpe=n=>{const e=un(n)?Number(n):NaN;return isNaN(e)?n:e};let Hz;const UL=()=>Hz||(Hz=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Jt(n){if(Bt(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],r=un(i)?Wpe(i):Jt(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(un(n))return n;if(Yn(n))return n}}const Vpe=/;(?![^(]*\))/g,$pe=/:([^]+)/,Gpe=/\/\*[^]*?\*\//g;function Wpe(n){const e={};return n.replace(Gpe,"").split(Vpe).forEach(t=>{if(t){const i=t.split($pe);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function ee(n){let e="";if(un(n))e=n;else if(Bt(n))for(let t=0;t<n.length;t++){const i=ee(n[t]);i&&(e+=i+" ")}else if(Yn(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function Lc(n){if(!n)return null;let{class:e,style:t}=n;return e&&!un(e)&&(n.class=ee(e)),t&&(n.style=Jt(t)),n}const qpe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jpe=uB(qpe);function VZ(n){return!!n||n===""}function Kpe(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=n_(n[i],e[i]);return t}function n_(n,e){if(n===e)return!0;let t=Xp(n),i=Xp(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=O2(n),i=O2(e),t||i)return n===e;if(t=Bt(n),i=Bt(e),t||i)return t&&i?Kpe(n,e):!1;if(t=Yn(n),i=Yn(e),t||i){if(!t||!i)return!1;const r=Object.keys(n).length,s=Object.keys(e).length;if(r!==s)return!1;for(const a in n){const o=n.hasOwnProperty(a),l=e.hasOwnProperty(a);if(o&&!l||!o&&l||!n_(n[a],e[a]))return!1}}return String(n)===String(e)}function $Z(n,e){return n.findIndex(t=>n_(t,e))}const Lt=n=>un(n)?n:n==null?"":Bt(n)||Yn(n)&&(n.toString===HZ||!pn(n.toString))?JSON.stringify(n,GZ,2):String(n),GZ=(n,e)=>e&&e.__v_isRef?GZ(n,e.value):E1(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,r])=>(t[`${i} =>`]=r,t),{})}:wI(e)?{[`Set(${e.size})`]:[...e.values()]}:Yn(e)&&!Bt(e)&&!B2(e)?String(e):e;let Zl;class WZ{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Zl,!e&&Zl&&(this.index=(Zl.scopes||(Zl.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=Zl;try{return Zl=this,e()}finally{Zl=t}}}on(){Zl=this}off(){Zl=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function Xpe(n){return new WZ(n)}function Ype(n,e=Zl){e&&e.active&&e.effects.push(n)}function qZ(){return Zl}function jZ(n){Zl&&Zl.cleanups.push(n)}const hB=n=>{const e=new Set(n);return e.w=0,e.n=0,e},KZ=n=>(n.w&Yp)>0,XZ=n=>(n.n&Yp)>0,Qpe=({deps:n})=>{if(n.length)for(let e=0;e<n.length;e++)n[e].w|=Yp},Zpe=n=>{const{deps:e}=n;if(e.length){let t=0;for(let i=0;i<e.length;i++){const r=e[i];KZ(r)&&!XZ(r)?r.delete(n):e[t++]=r,r.w&=~Yp,r.n&=~Yp}e.length=t}},m3=new WeakMap;let bx=0,Yp=1;const zL=30;let Pc;const hg=Symbol(""),HL=Symbol("");class pB{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,Ype(this,i)}run(){if(!this.active)return this.fn();let e=Pc,t=Op;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Pc,Pc=this,Op=!0,Yp=1<<++bx,bx<=zL?Qpe(this):Vz(this),this.fn()}finally{bx<=zL&&Zpe(this),Yp=1<<--bx,Pc=this.parent,Op=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Pc===this?this.deferStop=!0:this.active&&(Vz(this),this.onStop&&this.onStop(),this.active=!1)}}function Vz(n){const{deps:e}=n;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(n);e.length=0}}let Op=!0;const YZ=[];function ib(){YZ.push(Op),Op=!1}function rb(){const n=YZ.pop();Op=n===void 0?!0:n}function Dl(n,e,t){if(Op&&Pc){let i=m3.get(n);i||m3.set(n,i=new Map);let r=i.get(t);r||i.set(t,r=hB()),QZ(r)}}function QZ(n,e){let t=!1;bx<=zL?XZ(n)||(n.n|=Yp,t=!KZ(n)):t=!n.has(Pc),t&&(n.add(Pc),Pc.deps.push(n))}function th(n,e,t,i,r,s){const a=m3.get(n);if(!a)return;let o=[];if(e==="clear")o=[...a.values()];else if(t==="length"&&Bt(n)){const l=Number(i);a.forEach((u,c)=>{(c==="length"||c>=l)&&o.push(u)})}else switch(t!==void 0&&o.push(a.get(t)),e){case"add":Bt(n)?fB(t)&&o.push(a.get("length")):(o.push(a.get(hg)),E1(n)&&o.push(a.get(HL)));break;case"delete":Bt(n)||(o.push(a.get(hg)),E1(n)&&o.push(a.get(HL)));break;case"set":E1(n)&&o.push(a.get(hg));break}if(o.length===1)o[0]&&VL(o[0]);else{const l=[];for(const u of o)u&&l.push(...u);VL(hB(l))}}function VL(n,e){const t=Bt(n)?n:[...n];for(const i of t)i.computed&&$z(i);for(const i of t)i.computed||$z(i)}function $z(n,e){(n!==Pc||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}function Jpe(n,e){var t;return(t=m3.get(n))==null?void 0:t.get(e)}const e0e=uB("__proto__,__v_isRef,__isVue"),ZZ=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(O2)),t0e=mB(),n0e=mB(!1,!0),i0e=mB(!0),Gz=r0e();function r0e(){const n={};return["includes","indexOf","lastIndexOf"].forEach(e=>{n[e]=function(...t){const i=ir(this);for(let s=0,a=this.length;s<a;s++)Dl(i,"get",s+"");const r=i[e](...t);return r===-1||r===!1?i[e](...t.map(ir)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{n[e]=function(...t){ib();const i=ir(this)[e].apply(this,t);return rb(),i}}),n}function s0e(n){const e=ir(this);return Dl(e,"has",n),e.hasOwnProperty(n)}function mB(n=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(n?e?S0e:iJ:e?nJ:tJ).get(i))return i;const a=Bt(i);if(!n){if(a&&Ai(Gz,r))return Reflect.get(Gz,r,s);if(r==="hasOwnProperty")return s0e}const o=Reflect.get(i,r,s);return(O2(r)?ZZ.has(r):e0e(r))||(n||Dl(i,"get",r),e)?o:br(o)?a&&fB(r)?o:o.value:Yn(o)?n?sb(o):Ui(o):o}}const a0e=JZ(),o0e=JZ(!0);function JZ(n=!1){return function(t,i,r,s){let a=t[i];if(i_(a)&&br(a)&&!br(r))return!1;if(!n&&(!g3(r)&&!i_(r)&&(a=ir(a),r=ir(r)),!Bt(t)&&br(a)&&!br(r)))return a.value=r,!0;const o=Bt(t)&&fB(i)?Number(i)<t.length:Ai(t,i),l=Reflect.set(t,i,r,s);return t===ir(s)&&(o?F2(r,a)&&th(t,"set",i,r):th(t,"add",i,r)),l}}function l0e(n,e){const t=Ai(n,e);n[e];const i=Reflect.deleteProperty(n,e);return i&&t&&th(n,"delete",e,void 0),i}function u0e(n,e){const t=Reflect.has(n,e);return(!O2(e)||!ZZ.has(e))&&Dl(n,"has",e),t}function c0e(n){return Dl(n,"iterate",Bt(n)?"length":hg),Reflect.ownKeys(n)}const eJ={get:t0e,set:a0e,deleteProperty:l0e,has:u0e,ownKeys:c0e},d0e={get:i0e,set(n,e){return!0},deleteProperty(n,e){return!0}},f0e=qs({},eJ,{get:n0e,set:o0e}),gB=n=>n,CI=n=>Reflect.getPrototypeOf(n);function kC(n,e,t=!1,i=!1){n=n.__v_raw;const r=ir(n),s=ir(e);t||(e!==s&&Dl(r,"get",e),Dl(r,"get",s));const{has:a}=CI(r),o=i?gB:t?_B:U2;if(a.call(r,e))return o(n.get(e));if(a.call(r,s))return o(n.get(s));n!==r&&n.get(e)}function LC(n,e=!1){const t=this.__v_raw,i=ir(t),r=ir(n);return e||(n!==r&&Dl(i,"has",n),Dl(i,"has",r)),n===r?t.has(n):t.has(n)||t.has(r)}function OC(n,e=!1){return n=n.__v_raw,!e&&Dl(ir(n),"iterate",hg),Reflect.get(n,"size",n)}function Wz(n){n=ir(n);const e=ir(this);return CI(e).has.call(e,n)||(e.add(n),th(e,"add",n,n)),this}function qz(n,e){e=ir(e);const t=ir(this),{has:i,get:r}=CI(t);let s=i.call(t,n);s||(n=ir(n),s=i.call(t,n));const a=r.call(t,n);return t.set(n,e),s?F2(e,a)&&th(t,"set",n,e):th(t,"add",n,e),this}function jz(n){const e=ir(this),{has:t,get:i}=CI(e);let r=t.call(e,n);r||(n=ir(n),r=t.call(e,n)),i&&i.call(e,n);const s=e.delete(n);return r&&th(e,"delete",n,void 0),s}function Kz(){const n=ir(this),e=n.size!==0,t=n.clear();return e&&th(n,"clear",void 0,void 0),t}function NC(n,e){return function(i,r){const s=this,a=s.__v_raw,o=ir(a),l=e?gB:n?_B:U2;return!n&&Dl(o,"iterate",hg),a.forEach((u,c)=>i.call(r,l(u),l(c),s))}}function BC(n,e,t){return function(...i){const r=this.__v_raw,s=ir(r),a=E1(s),o=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=r[n](...i),c=t?gB:e?_B:U2;return!e&&Dl(s,"iterate",l?HL:hg),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:o?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Nh(n){return function(...e){return n==="delete"?!1:this}}function h0e(){const n={get(s){return kC(this,s)},get size(){return OC(this)},has:LC,add:Wz,set:qz,delete:jz,clear:Kz,forEach:NC(!1,!1)},e={get(s){return kC(this,s,!1,!0)},get size(){return OC(this)},has:LC,add:Wz,set:qz,delete:jz,clear:Kz,forEach:NC(!1,!0)},t={get(s){return kC(this,s,!0)},get size(){return OC(this,!0)},has(s){return LC.call(this,s,!0)},add:Nh("add"),set:Nh("set"),delete:Nh("delete"),clear:Nh("clear"),forEach:NC(!0,!1)},i={get(s){return kC(this,s,!0,!0)},get size(){return OC(this,!0)},has(s){return LC.call(this,s,!0)},add:Nh("add"),set:Nh("set"),delete:Nh("delete"),clear:Nh("clear"),forEach:NC(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=BC(s,!1,!1),t[s]=BC(s,!0,!1),e[s]=BC(s,!1,!0),i[s]=BC(s,!0,!0)}),[n,t,e,i]}const[p0e,m0e,g0e,v0e]=h0e();function vB(n,e){const t=e?n?v0e:g0e:n?m0e:p0e;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(Ai(t,r)&&r in i?t:i,r,s)}const y0e={get:vB(!1,!1)},_0e={get:vB(!1,!0)},b0e={get:vB(!0,!1)},tJ=new WeakMap,nJ=new WeakMap,iJ=new WeakMap,S0e=new WeakMap;function x0e(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function w0e(n){return n.__v_skip||!Object.isExtensible(n)?0:x0e(Fpe(n))}function Ui(n){return i_(n)?n:yB(n,!1,eJ,y0e,tJ)}function rJ(n){return yB(n,!1,f0e,_0e,nJ)}function sb(n){return yB(n,!0,d0e,b0e,iJ)}function yB(n,e,t,i,r){if(!Yn(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const a=w0e(n);if(a===0)return n;const o=new Proxy(n,a===2?i:t);return r.set(n,o),o}function M1(n){return i_(n)?M1(n.__v_raw):!!(n&&n.__v_isReactive)}function i_(n){return!!(n&&n.__v_isReadonly)}function g3(n){return!!(n&&n.__v_isShallow)}function sJ(n){return M1(n)||i_(n)}function ir(n){const e=n&&n.__v_raw;return e?ir(e):n}function Kf(n){return p3(n,"__v_skip",!0),n}const U2=n=>Yn(n)?Ui(n):n,_B=n=>Yn(n)?sb(n):n;function bB(n){Op&&Pc&&(n=ir(n),QZ(n.dep||(n.dep=hB())))}function SB(n,e){n=ir(n);const t=n.dep;t&&VL(t)}function br(n){return!!(n&&n.__v_isRef===!0)}function ae(n){return aJ(n,!1)}function Ji(n){return aJ(n,!0)}function aJ(n,e){return br(n)?n:new T0e(n,e)}class T0e{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ir(e),this._value=t?e:U2(e)}get value(){return bB(this),this._value}set value(e){const t=this.__v_isShallow||g3(e)||i_(e);e=t?e:ir(e),F2(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:U2(e),SB(this))}}function S(n){return br(n)?n.value:n}const C0e={get:(n,e,t)=>S(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const r=n[e];return br(r)&&!br(t)?(r.value=t,!0):Reflect.set(n,e,t,i)}};function oJ(n){return M1(n)?n:new Proxy(n,C0e)}class A0e{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:i}=e(()=>bB(this),()=>SB(this));this._get=t,this._set=i}get value(){return this._get()}set value(e){this._set(e)}}function E0e(n){return new A0e(n)}function js(n){const e=Bt(n)?new Array(n.length):{};for(const t in n)e[t]=lJ(n,t);return e}class M0e{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return Jpe(ir(this._object),this._key)}}class I0e{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function $i(n,e,t){return br(n)?n:pn(n)?new I0e(n):Yn(n)&&arguments.length>1?lJ(n,e,t):ae(n)}function lJ(n,e,t){const i=n[e];return br(i)?i:new M0e(n,e,t)}class D0e{constructor(e,t,i,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new pB(e,()=>{this._dirty||(this._dirty=!0,SB(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=ir(this);return bB(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function R0e(n,e,t=!1){let i,r;const s=pn(n);return s?(i=n,r=qi):(i=n.get,r=n.set),new D0e(i,r,s||!r,t)}function P0e(n,...e){}function Np(n,e,t,i){let r;try{r=i?n(...i):n()}catch(s){AI(s,e,t)}return r}function Ku(n,e,t,i){if(pn(n)){const s=Np(n,e,t,i);return s&&N2(s)&&s.catch(a=>{AI(a,e,t)}),s}const r=[];for(let s=0;s<n.length;s++)r.push(Ku(n[s],e,t,i));return r}function AI(n,e,t,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const a=e.proxy,o=t;for(;s;){const u=s.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](n,a,o)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Np(l,null,10,[n,a,o]);return}}k0e(n,t,r,i)}function k0e(n,e,t,i=!0){console.error(n)}let z2=!1,$L=!1;const vo=[];let Sd=0;const I1=[];let Pf=null,Nm=0;const uJ=Promise.resolve();let xB=null;function cn(n){const e=xB||uJ;return n?e.then(this?n.bind(this):n):e}function L0e(n){let e=Sd+1,t=vo.length;for(;e<t;){const i=e+t>>>1;H2(vo[i])<n?e=i+1:t=i}return e}function wB(n){(!vo.length||!vo.includes(n,z2&&n.allowRecurse?Sd+1:Sd))&&(n.id==null?vo.push(n):vo.splice(L0e(n.id),0,n),cJ())}function cJ(){!z2&&!$L&&($L=!0,xB=uJ.then(fJ))}function O0e(n){const e=vo.indexOf(n);e>Sd&&vo.splice(e,1)}function N0e(n){Bt(n)?I1.push(...n):(!Pf||!Pf.includes(n,n.allowRecurse?Nm+1:Nm))&&I1.push(n),cJ()}function Xz(n,e=z2?Sd+1:0){for(;e<vo.length;e++){const t=vo[e];t&&t.pre&&(vo.splice(e,1),e--,t())}}function dJ(n){if(I1.length){const e=[...new Set(I1)];if(I1.length=0,Pf){Pf.push(...e);return}for(Pf=e,Pf.sort((t,i)=>H2(t)-H2(i)),Nm=0;Nm<Pf.length;Nm++)Pf[Nm]();Pf=null,Nm=0}}const H2=n=>n.id==null?1/0:n.id,B0e=(n,e)=>{const t=H2(n)-H2(e);if(t===0){if(n.pre&&!e.pre)return-1;if(e.pre&&!n.pre)return 1}return t};function fJ(n){$L=!1,z2=!0,vo.sort(B0e);const e=qi;try{for(Sd=0;Sd<vo.length;Sd++){const t=vo[Sd];t&&t.active!==!1&&Np(t,null,14)}}finally{Sd=0,vo.length=0,dJ(),z2=!1,xB=null,(vo.length||I1.length)&&fJ()}}function F0e(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||as;let r=t;const s=e.startsWith("update:"),a=s&&e.slice(7);if(a&&a in i){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:d,trim:f}=i[c]||as;f&&(r=t.map(h=>un(h)?h.trim():h)),d&&(r=t.map(FL))}let o,l=i[o=Hx(e)]||i[o=Hx(fu(e))];!l&&s&&(l=i[o=Hx(b0(e))]),l&&Ku(l,n,6,r);const u=i[o+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[o])return;n.emitted[o]=!0,Ku(u,n,6,r)}}function hJ(n,e,t=!1){const i=e.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let a={},o=!1;if(!pn(n)){const l=u=>{const c=hJ(u,e,!0);c&&(o=!0,qs(a,c))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!s&&!o?(Yn(n)&&i.set(n,null),null):(Bt(s)?s.forEach(l=>a[l]=null):qs(a,s),Yn(n)&&i.set(n,a),a)}function EI(n,e){return!n||!xI(e)?!1:(e=e.slice(2).replace(/Once$/,""),Ai(n,e[0].toLowerCase()+e.slice(1))||Ai(n,b0(e))||Ai(n,e))}let Ka=null,MI=null;function v3(n){const e=Ka;return Ka=n,MI=n&&n.type.__scopeId||null,e}function cc(n){MI=n}function dc(){MI=null}function Ae(n,e=Ka,t){if(!e||n._n)return n;const i=(...r)=>{i._d&&lH(-1);const s=v3(e);let a;try{a=n(...r)}finally{v3(s),i._d&&lH(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function UR(n){const{type:e,vnode:t,proxy:i,withProxy:r,props:s,propsOptions:[a],slots:o,attrs:l,emit:u,render:c,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:m}=n;let g,v;const _=v3(n);try{if(t.shapeFlag&4){const b=r||i;g=vd(c.call(b,b,d,s,h,f,p)),v=l}else{const b=e;g=vd(b.length>1?b(s,{attrs:l,slots:o,emit:u}):b(s,null)),v=e.props?l:U0e(l)}}catch(b){Wx.length=0,AI(b,n,1),g=he(wo)}let y=g;if(v&&m!==!1){const b=Object.keys(v),{shapeFlag:x}=y;b.length&&x&7&&(a&&b.some(cB)&&(v=z0e(v,a)),y=nh(y,v))}return t.dirs&&(y=nh(y),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&(y.transition=t.transition),g=y,v3(_),g}const U0e=n=>{let e;for(const t in n)(t==="class"||t==="style"||xI(t))&&((e||(e={}))[t]=n[t]);return e},z0e=(n,e)=>{const t={};for(const i in n)(!cB(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function H0e(n,e,t){const{props:i,children:r,component:s}=n,{props:a,children:o,patchFlag:l}=e,u=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Yz(i,a,u):!!a;if(l&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(a[f]!==i[f]&&!EI(u,f))return!0}}}else return(r||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?Yz(i,a,u):!0:!!a;return!1}function Yz(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==n[s]&&!EI(t,s))return!0}return!1}function V0e({vnode:n,parent:e},t){for(;e&&e.subTree===n;)(n=e.vnode).el=t,e=e.parent}const $0e=n=>n.__isSuspense;function G0e(n,e){e&&e.pendingBranch?Bt(n)?e.effects.push(...n):e.effects.push(n):N0e(n)}function ya(n,e){return TB(n,null,e)}const FC={};function St(n,e,t){return TB(n,e,t)}function TB(n,e,{immediate:t,deep:i,flush:r,onTrack:s,onTrigger:a}=as){var o;const l=qZ()===((o=Da)==null?void 0:o.scope)?Da:null;let u,c=!1,d=!1;if(br(n)?(u=()=>n.value,c=g3(n)):M1(n)?(u=()=>n,i=!0):Bt(n)?(d=!0,c=n.some(b=>M1(b)||g3(b)),u=()=>n.map(b=>{if(br(b))return b.value;if(M1(b))return Xm(b);if(pn(b))return Np(b,l,2)})):pn(n)?e?u=()=>Np(n,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),Ku(n,l,3,[h])}:u=qi,e&&i){const b=u;u=()=>Xm(b())}let f,h=b=>{f=_.onStop=()=>{Np(b,l,4)}},p;if(W2)if(h=qi,e?t&&Ku(e,l,3,[u(),d?[]:void 0,h]):u(),r==="sync"){const b=Pme();p=b.__watcherHandles||(b.__watcherHandles=[])}else return qi;let m=d?new Array(n.length).fill(FC):FC;const g=()=>{if(_.active)if(e){const b=_.run();(i||c||(d?b.some((x,w)=>F2(x,m[w])):F2(b,m)))&&(f&&f(),Ku(e,l,3,[b,m===FC?void 0:d&&m[0]===FC?[]:m,h]),m=b)}else _.run()};g.allowRecurse=!!e;let v;r==="sync"?v=g:r==="post"?v=()=>hl(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),v=()=>wB(g));const _=new pB(u,v);e?t?g():m=_.run():r==="post"?hl(_.run.bind(_),l&&l.suspense):_.run();const y=()=>{_.stop(),l&&l.scope&&dB(l.scope.effects,_)};return p&&p.push(y),y}function W0e(n,e,t){const i=this.proxy,r=un(n)?n.includes(".")?pJ(i,n):()=>i[n]:n.bind(i,i);let s;pn(e)?s=e:(s=e.handler,t=e);const a=Da;r_(this);const o=TB(r,s.bind(i),t);return a?r_(a):pg(),o}function pJ(n,e){const t=e.split(".");return()=>{let i=n;for(let r=0;r<t.length&&i;r++)i=i[t[r]];return i}}function Xm(n,e){if(!Yn(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),br(n))Xm(n.value,e);else if(Bt(n))for(let t=0;t<n.length;t++)Xm(n[t],e);else if(wI(n)||E1(n))n.forEach(t=>{Xm(t,e)});else if(B2(n))for(const t in n)Xm(n[t],e);return n}function Vn(n,e){const t=Ka;if(t===null)return n;const i=LI(t)||t.proxy,r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[a,o,l,u=as]=e[s];a&&(pn(a)&&(a={mounted:a,updated:a}),a.deep&&Xm(o),r.push({dir:a,instance:i,value:o,oldValue:void 0,arg:l,modifiers:u}))}return n}function j0(n,e,t,i){const r=n.dirs,s=e&&e.dirs;for(let a=0;a<r.length;a++){const o=r[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(ib(),Ku(l,t,8,[n.el,o,n,e]),rb())}}function mJ(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ln(()=>{n.isMounted=!0}),Vi(()=>{n.isUnmounting=!0}),n}const bu=[Function,Array],gJ={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bu,onEnter:bu,onAfterEnter:bu,onEnterCancelled:bu,onBeforeLeave:bu,onLeave:bu,onAfterLeave:bu,onLeaveCancelled:bu,onBeforeAppear:bu,onAppear:bu,onAfterAppear:bu,onAppearCancelled:bu},q0e={name:"BaseTransition",props:gJ,setup(n,{slots:e}){const t=Qn(),i=mJ();let r;return()=>{const s=e.default&&CB(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){for(const m of s)if(m.type!==wo){a=m;break}}const o=ir(n),{mode:l}=o;if(i.isLeaving)return zR(a);const u=Qz(a);if(!u)return zR(a);const c=V2(u,o,i,t);$2(u,c);const d=t.subTree,f=d&&Qz(d);let h=!1;const{getTransitionKey:p}=u.type;if(p){const m=p();r===void 0?r=m:m!==r&&(r=m,h=!0)}if(f&&f.type!==wo&&(!Bm(u,f)||h)){const m=V2(f,o,i,t);if($2(f,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},zR(a);l==="in-out"&&u.type!==wo&&(m.delayLeave=(g,v,_)=>{const y=vJ(i,f);y[String(f.key)]=f,g._leaveCb=()=>{v(),g._leaveCb=void 0,delete c.delayedLeave},c.delayedLeave=_})}return a}}},j0e=q0e;function vJ(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function V2(n,e,t,i){const{appear:r,mode:s,persisted:a=!1,onBeforeEnter:o,onEnter:l,onAfterEnter:u,onEnterCancelled:c,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:_}=e,y=String(n.key),b=vJ(t,n),x=(T,C)=>{T&&Ku(T,i,9,C)},w=(T,C)=>{const E=C[1];x(T,C),Bt(T)?T.every(I=>I.length<=1)&&E():T.length<=1&&E()},A={mode:s,persisted:a,beforeEnter(T){let C=o;if(!t.isMounted)if(r)C=m||o;else return;T._leaveCb&&T._leaveCb(!0);const E=b[y];E&&Bm(n,E)&&E.el._leaveCb&&E.el._leaveCb(),x(C,[T])},enter(T){let C=l,E=u,I=c;if(!t.isMounted)if(r)C=g||l,E=v||u,I=_||c;else return;let k=!1;const O=T._enterCb=U=>{k||(k=!0,U?x(I,[T]):x(E,[T]),A.delayedLeave&&A.delayedLeave(),T._enterCb=void 0)};C?w(C,[T,O]):O()},leave(T,C){const E=String(n.key);if(T._enterCb&&T._enterCb(!0),t.isUnmounting)return C();x(d,[T]);let I=!1;const k=T._leaveCb=O=>{I||(I=!0,C(),O?x(p,[T]):x(h,[T]),T._leaveCb=void 0,b[E]===n&&delete b[E])};b[E]=n,f?w(f,[T,k]):k()},clone(T){return V2(T,e,t,i)}};return A}function zR(n){if(II(n))return n=nh(n),n.children=null,n}function Qz(n){return II(n)?n.children?n.children[0]:void 0:n}function $2(n,e){n.shapeFlag&6&&n.component?$2(n.component.subTree,e):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function CB(n,e=!1,t){let i=[],r=0;for(let s=0;s<n.length;s++){let a=n[s];const o=t==null?a.key:String(t)+String(a.key!=null?a.key:s);a.type===an?(a.patchFlag&128&&r++,i=i.concat(CB(a.children,e,o))):(e||a.type!==wo)&&i.push(o!=null?nh(a,{key:o}):a)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function Ne(n,e){return pn(n)?(()=>qs({name:n.name},e,{setup:n}))():n}const Vx=n=>!!n.type.__asyncLoader,II=n=>n.type.__isKeepAlive;function AB(n,e){_J(n,"a",e)}function yJ(n,e){_J(n,"da",e)}function _J(n,e,t=Da){const i=n.__wdc||(n.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(DI(e,i,t),t){let r=t.parent;for(;r&&r.parent;)II(r.parent.vnode)&&K0e(i,e,t,r),r=r.parent}}function K0e(n,e,t,i){const r=DI(e,n,i,!0);yh(()=>{dB(i[e],r)},t)}function DI(n,e,t=Da,i=!1){if(t){const r=t[n]||(t[n]=[]),s=e.__weh||(e.__weh=(...a)=>{if(t.isUnmounted)return;ib(),r_(t);const o=Ku(e,t,n,a);return pg(),rb(),o});return i?r.unshift(s):r.push(s),s}}const vh=n=>(e,t=Da)=>(!W2||n==="sp")&&DI(n,(...i)=>e(...i),t),RI=vh("bm"),Ln=vh("m"),EB=vh("bu"),fc=vh("u"),Vi=vh("bum"),yh=vh("um"),X0e=vh("sp"),Y0e=vh("rtg"),Q0e=vh("rtc");function Z0e(n,e=Da){DI("ec",n,e)}const MB="components",J0e="directives";function Ht(n,e){return IB(MB,n,!0,e)||n}const bJ=Symbol.for("v-ndc");function ei(n){return un(n)?IB(MB,n,!1)||n:n||bJ}function PI(n){return IB(J0e,n)}function IB(n,e,t=!0,i=!1){const r=Ka||Da;if(r){const s=r.type;if(n===MB){const o=Ime(s,!1);if(o&&(o===e||o===fu(e)||o===aT(fu(e))))return s}const a=Zz(r[n]||s[n],e)||Zz(r.appContext[n],e);return!a&&i?s:a}}function Zz(n,e){return n&&(n[e]||n[fu(e)]||n[aT(fu(e))])}function ti(n,e,t,i){let r;const s=t&&t[i];if(Bt(n)||un(n)){r=new Array(n.length);for(let a=0,o=n.length;a<o;a++)r[a]=e(n[a],a,void 0,s&&s[a])}else if(typeof n=="number"){r=new Array(n);for(let a=0;a<n;a++)r[a]=e(a+1,a,void 0,s&&s[a])}else if(Yn(n))if(n[Symbol.iterator])r=Array.from(n,(a,o)=>e(a,o,void 0,s&&s[o]));else{const a=Object.keys(n);r=new Array(a.length);for(let o=0,l=a.length;o<l;o++){const u=a[o];r[o]=e(n[u],u,o,s&&s[o])}}else r=[];return t&&(t[i]=r),r}function tc(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(Bt(i))for(let r=0;r<i.length;r++)n[i[r].name]=i[r].fn;else i&&(n[i.name]=i.key?(...r)=>{const s=i.fn(...r);return s&&(s.key=i.key),s}:i.fn)}return n}function at(n,e,t={},i,r){if(Ka.isCE||Ka.parent&&Vx(Ka.parent)&&Ka.parent.isCE)return e!=="default"&&(t.name=e),he("slot",t,i&&i());let s=n[e];s&&s._c&&(s._d=!1),j();const a=s&&SJ(s(t)),o=gt(an,{key:t.key||a&&a.key||`_${e}`},a||(i?i():[]),a&&n._===1?64:-2);return!r&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),s&&s._c&&(s._d=!0),o}function SJ(n){return n.some(e=>Wr(e)?!(e.type===wo||e.type===an&&!SJ(e.children)):!0)?n:null}function eme(n,e){const t={};for(const i in n)t[e&&/[A-Z]/.test(i)?`on:${i}`:Hx(i)]=n[i];return t}const GL=n=>n?kJ(n)?LI(n)||n.proxy:GL(n.parent):null,$x=qs(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>GL(n.parent),$root:n=>GL(n.root),$emit:n=>n.emit,$options:n=>DB(n),$forceUpdate:n=>n.f||(n.f=()=>wB(n.update)),$nextTick:n=>n.n||(n.n=cn.bind(n.proxy)),$watch:n=>W0e.bind(n)}),HR=(n,e)=>n!==as&&!n.__isScriptSetup&&Ai(n,e),tme={get({_:n},e){const{ctx:t,setupState:i,data:r,props:s,accessCache:a,type:o,appContext:l}=n;let u;if(e[0]!=="$"){const h=a[e];if(h!==void 0)switch(h){case 1:return i[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(HR(i,e))return a[e]=1,i[e];if(r!==as&&Ai(r,e))return a[e]=2,r[e];if((u=n.propsOptions[0])&&Ai(u,e))return a[e]=3,s[e];if(t!==as&&Ai(t,e))return a[e]=4,t[e];WL&&(a[e]=0)}}const c=$x[e];let d,f;if(c)return e==="$attrs"&&Dl(n,"get",e),c(n);if((d=o.__cssModules)&&(d=d[e]))return d;if(t!==as&&Ai(t,e))return a[e]=4,t[e];if(f=l.config.globalProperties,Ai(f,e))return f[e]},set({_:n},e,t){const{data:i,setupState:r,ctx:s}=n;return HR(r,e)?(r[e]=t,!0):i!==as&&Ai(i,e)?(i[e]=t,!0):Ai(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(s[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:r,propsOptions:s}},a){let o;return!!t[a]||n!==as&&Ai(n,a)||HR(e,a)||(o=s[0])&&Ai(o,a)||Ai(i,a)||Ai($x,a)||Ai(r.config.globalProperties,a)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Ai(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function Ls(){return xJ().slots}function S0(){return xJ().attrs}function xJ(){const n=Qn();return n.setupContext||(n.setupContext=OJ(n))}function Jz(n){return Bt(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let WL=!0;function nme(n){const e=DB(n),t=n.proxy,i=n.ctx;WL=!1,e.beforeCreate&&eH(e.beforeCreate,n,"bc");const{data:r,computed:s,methods:a,watch:o,provide:l,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:_,destroyed:y,unmounted:b,render:x,renderTracked:w,renderTriggered:A,errorCaptured:T,serverPrefetch:C,expose:E,inheritAttrs:I,components:k,directives:O,filters:U}=e;if(u&&ime(u,i,null),a)for(const G in a){const H=a[G];pn(H)&&(i[G]=H.bind(t))}if(r){const G=r.call(t,t);Yn(G)&&(n.data=Ui(G))}if(WL=!0,s)for(const G in s){const H=s[G],F=pn(H)?H.bind(t,t):pn(H.get)?H.get.bind(t,t):qi,X=!pn(H)&&pn(H.set)?H.set.bind(t):qi,te=W({get:F,set:X});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>te.value,set:re=>te.value=re})}if(o)for(const G in o)wJ(o[G],i,t,G);if(l){const G=pn(l)?l.call(t):l;Reflect.ownKeys(G).forEach(H=>{ui(H,G[H])})}c&&eH(c,n,"c");function L(G,H){Bt(H)?H.forEach(F=>G(F.bind(t))):H&&G(H.bind(t))}if(L(RI,d),L(Ln,f),L(EB,h),L(fc,p),L(AB,m),L(yJ,g),L(Z0e,T),L(Q0e,w),L(Y0e,A),L(Vi,_),L(yh,b),L(X0e,C),Bt(E))if(E.length){const G=n.exposed||(n.exposed={});E.forEach(H=>{Object.defineProperty(G,H,{get:()=>t[H],set:F=>t[H]=F})})}else n.exposed||(n.exposed={});x&&n.render===qi&&(n.render=x),I!=null&&(n.inheritAttrs=I),k&&(n.components=k),O&&(n.directives=O)}function ime(n,e,t=qi){Bt(n)&&(n=qL(n));for(const i in n){const r=n[i];let s;Yn(r)?"default"in r?s=Zt(r.from||i,r.default,!0):s=Zt(r.from||i):s=Zt(r),br(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):e[i]=s}}function eH(n,e,t){Ku(Bt(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function wJ(n,e,t,i){const r=i.includes(".")?pJ(t,i):()=>t[i];if(un(n)){const s=e[n];pn(s)&&St(r,s)}else if(pn(n))St(r,n.bind(t));else if(Yn(n))if(Bt(n))n.forEach(s=>wJ(s,e,t,i));else{const s=pn(n.handler)?n.handler.bind(t):e[n.handler];pn(s)&&St(r,s,n)}}function DB(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:a}}=n.appContext,o=s.get(e);let l;return o?l=o:!r.length&&!t&&!i?l=e:(l={},r.length&&r.forEach(u=>y3(l,u,a,!0)),y3(l,e,a)),Yn(e)&&s.set(e,l),l}function y3(n,e,t,i=!1){const{mixins:r,extends:s}=e;s&&y3(n,s,t,!0),r&&r.forEach(a=>y3(n,a,t,!0));for(const a in e)if(!(i&&a==="expose")){const o=rme[a]||t&&t[a];n[a]=o?o(n[a],e[a]):e[a]}return n}const rme={data:tH,props:nH,emits:nH,methods:Sx,computed:Sx,beforeCreate:Fo,created:Fo,beforeMount:Fo,mounted:Fo,beforeUpdate:Fo,updated:Fo,beforeDestroy:Fo,beforeUnmount:Fo,destroyed:Fo,unmounted:Fo,activated:Fo,deactivated:Fo,errorCaptured:Fo,serverPrefetch:Fo,components:Sx,directives:Sx,watch:ame,provide:tH,inject:sme};function tH(n,e){return e?n?function(){return qs(pn(n)?n.call(this,this):n,pn(e)?e.call(this,this):e)}:e:n}function sme(n,e){return Sx(qL(n),qL(e))}function qL(n){if(Bt(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function Fo(n,e){return n?[...new Set([].concat(n,e))]:e}function Sx(n,e){return n?qs(Object.create(null),n,e):e}function nH(n,e){return n?Bt(n)&&Bt(e)?[...new Set([...n,...e])]:qs(Object.create(null),Jz(n),Jz(e??{})):e}function ame(n,e){if(!n)return e;if(!e)return n;const t=qs(Object.create(null),n);for(const i in e)t[i]=Fo(n[i],e[i]);return t}function TJ(){return{app:null,config:{isNativeTag:Ope,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ome=0;function lme(n,e){return function(i,r=null){pn(i)||(i=qs({},i)),r!=null&&!Yn(r)&&(r=null);const s=TJ(),a=new Set;let o=!1;const l=s.app={_uid:ome++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:kme,get config(){return s.config},set config(u){},use(u,...c){return a.has(u)||(u&&pn(u.install)?(a.add(u),u.install(l,...c)):pn(u)&&(a.add(u),u(l,...c))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,c){return c?(s.components[u]=c,l):s.components[u]},directive(u,c){return c?(s.directives[u]=c,l):s.directives[u]},mount(u,c,d){if(!o){const f=he(i,r);return f.appContext=s,c&&e?e(f,u):n(f,u,d),o=!0,l._container=u,u.__vue_app__=l,LI(f.component)||f.component.proxy}},unmount(){o&&(n(null,l._container),delete l._container.__vue_app__)},provide(u,c){return s.provides[u]=c,l},runWithContext(u){_3=l;try{return u()}finally{_3=null}}};return l}}let _3=null;function ui(n,e){if(Da){let t=Da.provides;const i=Da.parent&&Da.parent.provides;i===t&&(t=Da.provides=Object.create(i)),t[n]=e}}function Zt(n,e,t=!1){const i=Da||Ka;if(i||_3){const r=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:_3._context.provides;if(r&&n in r)return r[n];if(arguments.length>1)return t&&pn(e)?e.call(i&&i.proxy):e}}function ume(n,e,t,i=!1){const r={},s={};p3(s,kI,1),n.propsDefaults=Object.create(null),CJ(n,e,r,s);for(const a in n.propsOptions[0])a in r||(r[a]=void 0);t?n.props=i?r:rJ(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function cme(n,e,t,i){const{props:r,attrs:s,vnode:{patchFlag:a}}=n,o=ir(r),[l]=n.propsOptions;let u=!1;if((i||a>0)&&!(a&16)){if(a&8){const c=n.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(EI(n.emitsOptions,f))continue;const h=e[f];if(l)if(Ai(s,f))h!==s[f]&&(s[f]=h,u=!0);else{const p=fu(f);r[p]=jL(l,o,p,h,n,!1)}else h!==s[f]&&(s[f]=h,u=!0)}}}else{CJ(n,e,r,s)&&(u=!0);let c;for(const d in o)(!e||!Ai(e,d)&&((c=b0(d))===d||!Ai(e,c)))&&(l?t&&(t[d]!==void 0||t[c]!==void 0)&&(r[d]=jL(l,o,d,void 0,n,!0)):delete r[d]);if(s!==o)for(const d in s)(!e||!Ai(e,d))&&(delete s[d],u=!0)}u&&th(n,"set","$attrs")}function CJ(n,e,t,i){const[r,s]=n.propsOptions;let a=!1,o;if(e)for(let l in e){if(dM(l))continue;const u=e[l];let c;r&&Ai(r,c=fu(l))?!s||!s.includes(c)?t[c]=u:(o||(o={}))[c]=u:EI(n.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,a=!0)}if(s){const l=ir(t),u=o||as;for(let c=0;c<s.length;c++){const d=s[c];t[d]=jL(r,l,d,u[d],n,!Ai(u,d))}}return a}function jL(n,e,t,i,r,s){const a=n[t];if(a!=null){const o=Ai(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&pn(l)){const{propsDefaults:u}=r;t in u?i=u[t]:(r_(r),i=u[t]=l.call(null,e),pg())}else i=l}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===b0(t))&&(i=!0))}return i}function AJ(n,e,t=!1){const i=e.propsCache,r=i.get(n);if(r)return r;const s=n.props,a={},o=[];let l=!1;if(!pn(n)){const c=d=>{l=!0;const[f,h]=AJ(d,e,!0);qs(a,f),h&&o.push(...h)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!s&&!l)return Yn(n)&&i.set(n,A1),A1;if(Bt(s))for(let c=0;c<s.length;c++){const d=fu(s[c]);iH(d)&&(a[d]=as)}else if(s)for(const c in s){const d=fu(c);if(iH(d)){const f=s[c],h=a[d]=Bt(f)||pn(f)?{type:f}:qs({},f);if(h){const p=aH(Boolean,h.type),m=aH(String,h.type);h[0]=p>-1,h[1]=m<0||p<m,(p>-1||Ai(h,"default"))&&o.push(d)}}}const u=[a,o];return Yn(n)&&i.set(n,u),u}function iH(n){return n[0]!=="$"}function rH(n){const e=n&&n.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:n===null?"null":""}function sH(n,e){return rH(n)===rH(e)}function aH(n,e){return Bt(e)?e.findIndex(t=>sH(t,n)):pn(e)&&sH(e,n)?0:-1}const EJ=n=>n[0]==="_"||n==="$stable",RB=n=>Bt(n)?n.map(vd):[vd(n)],dme=(n,e,t)=>{if(e._n)return e;const i=Ae((...r)=>RB(e(...r)),t);return i._c=!1,i},MJ=(n,e,t)=>{const i=n._ctx;for(const r in n){if(EJ(r))continue;const s=n[r];if(pn(s))e[r]=dme(r,s,i);else if(s!=null){const a=RB(s);e[r]=()=>a}}},IJ=(n,e)=>{const t=RB(e);n.slots.default=()=>t},fme=(n,e)=>{if(n.vnode.shapeFlag&32){const t=e._;t?(n.slots=ir(e),p3(e,"_",t)):MJ(e,n.slots={})}else n.slots={},e&&IJ(n,e);p3(n.slots,kI,1)},hme=(n,e,t)=>{const{vnode:i,slots:r}=n;let s=!0,a=as;if(i.shapeFlag&32){const o=e._;o?t&&o===1?s=!1:(qs(r,e),!t&&o===1&&delete r._):(s=!e.$stable,MJ(e,r)),a=e}else e&&(IJ(n,e),a={default:1});if(s)for(const o in r)!EJ(o)&&!(o in a)&&delete r[o]};function KL(n,e,t,i,r=!1){if(Bt(n)){n.forEach((f,h)=>KL(f,e&&(Bt(e)?e[h]:e),t,i,r));return}if(Vx(i)&&!r)return;const s=i.shapeFlag&4?LI(i.component)||i.component.proxy:i.el,a=r?null:s,{i:o,r:l}=n,u=e&&e.r,c=o.refs===as?o.refs={}:o.refs,d=o.setupState;if(u!=null&&u!==l&&(un(u)?(c[u]=null,Ai(d,u)&&(d[u]=null)):br(u)&&(u.value=null)),pn(l))Np(l,o,12,[a,c]);else{const f=un(l),h=br(l);if(f||h){const p=()=>{if(n.f){const m=f?Ai(d,l)?d[l]:c[l]:l.value;r?Bt(m)&&dB(m,s):Bt(m)?m.includes(s)||m.push(s):f?(c[l]=[s],Ai(d,l)&&(d[l]=c[l])):(l.value=[s],n.k&&(c[n.k]=l.value))}else f?(c[l]=a,Ai(d,l)&&(d[l]=a)):h&&(l.value=a,n.k&&(c[n.k]=a))};a?(p.id=-1,hl(p,t)):p()}}}const hl=G0e;function pme(n){return mme(n)}function mme(n,e){const t=UL();t.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:a,createText:o,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:h=qi,insertStaticContent:p}=n,m=(Q,me,ce,je=null,Fe=null,nt=null,We=!1,Ke=null,it=!!me.dynamicChildren)=>{if(Q===me)return;Q&&!Bm(Q,me)&&(je=ye(Q),re(Q,Fe,nt,!0),Q=null),me.patchFlag===-2&&(it=!1,me.dynamicChildren=null);const{type:be,ref:K,shapeFlag:ne}=me;switch(be){case ab:g(Q,me,ce,je);break;case wo:v(Q,me,ce,je);break;case VR:Q==null&&_(me,ce,je,We);break;case an:k(Q,me,ce,je,Fe,nt,We,Ke,it);break;default:ne&1?x(Q,me,ce,je,Fe,nt,We,Ke,it):ne&6?O(Q,me,ce,je,Fe,nt,We,Ke,it):(ne&64||ne&128)&&be.process(Q,me,ce,je,Fe,nt,We,Ke,it,Be)}K!=null&&Fe&&KL(K,Q&&Q.ref,nt,me||Q,!me)},g=(Q,me,ce,je)=>{if(Q==null)i(me.el=o(me.children),ce,je);else{const Fe=me.el=Q.el;me.children!==Q.children&&u(Fe,me.children)}},v=(Q,me,ce,je)=>{Q==null?i(me.el=l(me.children||""),ce,je):me.el=Q.el},_=(Q,me,ce,je)=>{[Q.el,Q.anchor]=p(Q.children,me,ce,je,Q.el,Q.anchor)},y=({el:Q,anchor:me},ce,je)=>{let Fe;for(;Q&&Q!==me;)Fe=f(Q),i(Q,ce,je),Q=Fe;i(me,ce,je)},b=({el:Q,anchor:me})=>{let ce;for(;Q&&Q!==me;)ce=f(Q),r(Q),Q=ce;r(me)},x=(Q,me,ce,je,Fe,nt,We,Ke,it)=>{We=We||me.type==="svg",Q==null?w(me,ce,je,Fe,nt,We,Ke,it):C(Q,me,Fe,nt,We,Ke,it)},w=(Q,me,ce,je,Fe,nt,We,Ke)=>{let it,be;const{type:K,props:ne,shapeFlag:Se,transition:ze,dirs:Je}=Q;if(it=Q.el=a(Q.type,nt,ne&&ne.is,ne),Se&8?c(it,Q.children):Se&16&&T(Q.children,it,null,je,Fe,nt&&K!=="foreignObject",We,Ke),Je&&j0(Q,null,je,"created"),A(it,Q,Q.scopeId,We,je),ne){for(const At in ne)At!=="value"&&!dM(At)&&s(it,At,null,ne[At],nt,Q.children,je,Fe,pe);"value"in ne&&s(it,"value",null,ne.value),(be=ne.onVnodeBeforeMount)&&ld(be,je,Q)}Je&&j0(Q,null,je,"beforeMount");const Tt=(!Fe||Fe&&!Fe.pendingBranch)&&ze&&!ze.persisted;Tt&&ze.beforeEnter(it),i(it,me,ce),((be=ne&&ne.onVnodeMounted)||Tt||Je)&&hl(()=>{be&&ld(be,je,Q),Tt&&ze.enter(it),Je&&j0(Q,null,je,"mounted")},Fe)},A=(Q,me,ce,je,Fe)=>{if(ce&&h(Q,ce),je)for(let nt=0;nt<je.length;nt++)h(Q,je[nt]);if(Fe){let nt=Fe.subTree;if(me===nt){const We=Fe.vnode;A(Q,We,We.scopeId,We.slotScopeIds,Fe.parent)}}},T=(Q,me,ce,je,Fe,nt,We,Ke,it=0)=>{for(let be=it;be<Q.length;be++){const K=Q[be]=Ke?bp(Q[be]):vd(Q[be]);m(null,K,me,ce,je,Fe,nt,We,Ke)}},C=(Q,me,ce,je,Fe,nt,We)=>{const Ke=me.el=Q.el;let{patchFlag:it,dynamicChildren:be,dirs:K}=me;it|=Q.patchFlag&16;const ne=Q.props||as,Se=me.props||as;let ze;ce&&K0(ce,!1),(ze=Se.onVnodeBeforeUpdate)&&ld(ze,ce,me,Q),K&&j0(me,Q,ce,"beforeUpdate"),ce&&K0(ce,!0);const Je=Fe&&me.type!=="foreignObject";if(be?E(Q.dynamicChildren,be,Ke,ce,je,Je,nt):We||H(Q,me,Ke,null,ce,je,Je,nt,!1),it>0){if(it&16)I(Ke,me,ne,Se,ce,je,Fe);else if(it&2&&ne.class!==Se.class&&s(Ke,"class",null,Se.class,Fe),it&4&&s(Ke,"style",ne.style,Se.style,Fe),it&8){const Tt=me.dynamicProps;for(let At=0;At<Tt.length;At++){const Re=Tt[At],wt=ne[Re],vt=Se[Re];(vt!==wt||Re==="value")&&s(Ke,Re,wt,vt,Fe,Q.children,ce,je,pe)}}it&1&&Q.children!==me.children&&c(Ke,me.children)}else!We&&be==null&&I(Ke,me,ne,Se,ce,je,Fe);((ze=Se.onVnodeUpdated)||K)&&hl(()=>{ze&&ld(ze,ce,me,Q),K&&j0(me,Q,ce,"updated")},je)},E=(Q,me,ce,je,Fe,nt,We)=>{for(let Ke=0;Ke<me.length;Ke++){const it=Q[Ke],be=me[Ke],K=it.el&&(it.type===an||!Bm(it,be)||it.shapeFlag&70)?d(it.el):ce;m(it,be,K,null,je,Fe,nt,We,!0)}},I=(Q,me,ce,je,Fe,nt,We)=>{if(ce!==je){if(ce!==as)for(const Ke in ce)!dM(Ke)&&!(Ke in je)&&s(Q,Ke,ce[Ke],null,We,me.children,Fe,nt,pe);for(const Ke in je){if(dM(Ke))continue;const it=je[Ke],be=ce[Ke];it!==be&&Ke!=="value"&&s(Q,Ke,be,it,We,me.children,Fe,nt,pe)}"value"in je&&s(Q,"value",ce.value,je.value)}},k=(Q,me,ce,je,Fe,nt,We,Ke,it)=>{const be=me.el=Q?Q.el:o(""),K=me.anchor=Q?Q.anchor:o("");let{patchFlag:ne,dynamicChildren:Se,slotScopeIds:ze}=me;ze&&(Ke=Ke?Ke.concat(ze):ze),Q==null?(i(be,ce,je),i(K,ce,je),T(me.children,ce,K,Fe,nt,We,Ke,it)):ne>0&&ne&64&&Se&&Q.dynamicChildren?(E(Q.dynamicChildren,Se,ce,Fe,nt,We,Ke),(me.key!=null||Fe&&me===Fe.subTree)&&PB(Q,me,!0)):H(Q,me,ce,K,Fe,nt,We,Ke,it)},O=(Q,me,ce,je,Fe,nt,We,Ke,it)=>{me.slotScopeIds=Ke,Q==null?me.shapeFlag&512?Fe.ctx.activate(me,ce,je,We,it):U(me,ce,je,Fe,nt,We,it):z(Q,me,it)},U=(Q,me,ce,je,Fe,nt,We)=>{const Ke=Q.component=Cme(Q,je,Fe);if(II(Q)&&(Ke.ctx.renderer=Be),Ame(Ke),Ke.asyncDep){if(Fe&&Fe.registerDep(Ke,L),!Q.el){const it=Ke.subTree=he(wo);v(null,it,me,ce)}return}L(Ke,Q,me,ce,Fe,nt,We)},z=(Q,me,ce)=>{const je=me.component=Q.component;if(H0e(Q,me,ce))if(je.asyncDep&&!je.asyncResolved){G(je,me,ce);return}else je.next=me,O0e(je.update),je.update();else me.el=Q.el,je.vnode=me},L=(Q,me,ce,je,Fe,nt,We)=>{const Ke=()=>{if(Q.isMounted){let{next:K,bu:ne,u:Se,parent:ze,vnode:Je}=Q,Tt=K,At;K0(Q,!1),K?(K.el=Je.el,G(Q,K,We)):K=Je,ne&&fM(ne),(At=K.props&&K.props.onVnodeBeforeUpdate)&&ld(At,ze,K,Je),K0(Q,!0);const Re=UR(Q),wt=Q.subTree;Q.subTree=Re,m(wt,Re,d(wt.el),ye(wt),Q,Fe,nt),K.el=Re.el,Tt===null&&V0e(Q,Re.el),Se&&hl(Se,Fe),(At=K.props&&K.props.onVnodeUpdated)&&hl(()=>ld(At,ze,K,Je),Fe)}else{let K;const{el:ne,props:Se}=me,{bm:ze,m:Je,parent:Tt}=Q,At=Vx(me);if(K0(Q,!1),ze&&fM(ze),!At&&(K=Se&&Se.onVnodeBeforeMount)&&ld(K,Tt,me),K0(Q,!0),ne&&Ze){const Re=()=>{Q.subTree=UR(Q),Ze(ne,Q.subTree,Q,Fe,null)};At?me.type.__asyncLoader().then(()=>!Q.isUnmounted&&Re()):Re()}else{const Re=Q.subTree=UR(Q);m(null,Re,ce,je,Q,Fe,nt),me.el=Re.el}if(Je&&hl(Je,Fe),!At&&(K=Se&&Se.onVnodeMounted)){const Re=me;hl(()=>ld(K,Tt,Re),Fe)}(me.shapeFlag&256||Tt&&Vx(Tt.vnode)&&Tt.vnode.shapeFlag&256)&&Q.a&&hl(Q.a,Fe),Q.isMounted=!0,me=ce=je=null}},it=Q.effect=new pB(Ke,()=>wB(be),Q.scope),be=Q.update=()=>it.run();be.id=Q.uid,K0(Q,!0),be()},G=(Q,me,ce)=>{me.component=Q;const je=Q.vnode.props;Q.vnode=me,Q.next=null,cme(Q,me.props,je,ce),hme(Q,me.children,ce),ib(),Xz(),rb()},H=(Q,me,ce,je,Fe,nt,We,Ke,it=!1)=>{const be=Q&&Q.children,K=Q?Q.shapeFlag:0,ne=me.children,{patchFlag:Se,shapeFlag:ze}=me;if(Se>0){if(Se&128){X(be,ne,ce,je,Fe,nt,We,Ke,it);return}else if(Se&256){F(be,ne,ce,je,Fe,nt,We,Ke,it);return}}ze&8?(K&16&&pe(be,Fe,nt),ne!==be&&c(ce,ne)):K&16?ze&16?X(be,ne,ce,je,Fe,nt,We,Ke,it):pe(be,Fe,nt,!0):(K&8&&c(ce,""),ze&16&&T(ne,ce,je,Fe,nt,We,Ke,it))},F=(Q,me,ce,je,Fe,nt,We,Ke,it)=>{Q=Q||A1,me=me||A1;const be=Q.length,K=me.length,ne=Math.min(be,K);let Se;for(Se=0;Se<ne;Se++){const ze=me[Se]=it?bp(me[Se]):vd(me[Se]);m(Q[Se],ze,ce,null,Fe,nt,We,Ke,it)}be>K?pe(Q,Fe,nt,!0,!1,ne):T(me,ce,je,Fe,nt,We,Ke,it,ne)},X=(Q,me,ce,je,Fe,nt,We,Ke,it)=>{let be=0;const K=me.length;let ne=Q.length-1,Se=K-1;for(;be<=ne&&be<=Se;){const ze=Q[be],Je=me[be]=it?bp(me[be]):vd(me[be]);if(Bm(ze,Je))m(ze,Je,ce,null,Fe,nt,We,Ke,it);else break;be++}for(;be<=ne&&be<=Se;){const ze=Q[ne],Je=me[Se]=it?bp(me[Se]):vd(me[Se]);if(Bm(ze,Je))m(ze,Je,ce,null,Fe,nt,We,Ke,it);else break;ne--,Se--}if(be>ne){if(be<=Se){const ze=Se+1,Je=ze<K?me[ze].el:je;for(;be<=Se;)m(null,me[be]=it?bp(me[be]):vd(me[be]),ce,Je,Fe,nt,We,Ke,it),be++}}else if(be>Se)for(;be<=ne;)re(Q[be],Fe,nt,!0),be++;else{const ze=be,Je=be,Tt=new Map;for(be=Je;be<=Se;be++){const ke=me[be]=it?bp(me[be]):vd(me[be]);ke.key!=null&&Tt.set(ke.key,be)}let At,Re=0;const wt=Se-Je+1;let vt=!1,q=0;const xe=new Array(wt);for(be=0;be<wt;be++)xe[be]=0;for(be=ze;be<=ne;be++){const ke=Q[be];if(Re>=wt){re(ke,Fe,nt,!0);continue}let we;if(ke.key!=null)we=Tt.get(ke.key);else for(At=Je;At<=Se;At++)if(xe[At-Je]===0&&Bm(ke,me[At])){we=At;break}we===void 0?re(ke,Fe,nt,!0):(xe[we-Je]=be+1,we>=q?q=we:vt=!0,m(ke,me[we],ce,null,Fe,nt,We,Ke,it),Re++)}const ve=vt?gme(xe):A1;for(At=ve.length-1,be=wt-1;be>=0;be--){const ke=Je+be,we=me[ke],De=ke+1<K?me[ke+1].el:je;xe[be]===0?m(null,we,ce,De,Fe,nt,We,Ke,it):vt&&(At<0||be!==ve[At]?te(we,ce,De,2):At--)}}},te=(Q,me,ce,je,Fe=null)=>{const{el:nt,type:We,transition:Ke,children:it,shapeFlag:be}=Q;if(be&6){te(Q.component.subTree,me,ce,je);return}if(be&128){Q.suspense.move(me,ce,je);return}if(be&64){We.move(Q,me,ce,Be);return}if(We===an){i(nt,me,ce);for(let ne=0;ne<it.length;ne++)te(it[ne],me,ce,je);i(Q.anchor,me,ce);return}if(We===VR){y(Q,me,ce);return}if(je!==2&&be&1&&Ke)if(je===0)Ke.beforeEnter(nt),i(nt,me,ce),hl(()=>Ke.enter(nt),Fe);else{const{leave:ne,delayLeave:Se,afterLeave:ze}=Ke,Je=()=>i(nt,me,ce),Tt=()=>{ne(nt,()=>{Je(),ze&&ze()})};Se?Se(nt,Je,Tt):Tt()}else i(nt,me,ce)},re=(Q,me,ce,je=!1,Fe=!1)=>{const{type:nt,props:We,ref:Ke,children:it,dynamicChildren:be,shapeFlag:K,patchFlag:ne,dirs:Se}=Q;if(Ke!=null&&KL(Ke,null,ce,Q,!0),K&256){me.ctx.deactivate(Q);return}const ze=K&1&&Se,Je=!Vx(Q);let Tt;if(Je&&(Tt=We&&We.onVnodeBeforeUnmount)&&ld(Tt,me,Q),K&6)ge(Q.component,ce,je);else{if(K&128){Q.suspense.unmount(ce,je);return}ze&&j0(Q,null,me,"beforeUnmount"),K&64?Q.type.remove(Q,me,ce,Fe,Be,je):be&&(nt!==an||ne>0&&ne&64)?pe(be,me,ce,!1,!0):(nt===an&&ne&384||!Fe&&K&16)&&pe(it,me,ce),je&&ie(Q)}(Je&&(Tt=We&&We.onVnodeUnmounted)||ze)&&hl(()=>{Tt&&ld(Tt,me,Q),ze&&j0(Q,null,me,"unmounted")},ce)},ie=Q=>{const{type:me,el:ce,anchor:je,transition:Fe}=Q;if(me===an){le(ce,je);return}if(me===VR){b(Q);return}const nt=()=>{r(ce),Fe&&!Fe.persisted&&Fe.afterLeave&&Fe.afterLeave()};if(Q.shapeFlag&1&&Fe&&!Fe.persisted){const{leave:We,delayLeave:Ke}=Fe,it=()=>We(ce,nt);Ke?Ke(Q.el,nt,it):it()}else nt()},le=(Q,me)=>{let ce;for(;Q!==me;)ce=f(Q),r(Q),Q=ce;r(me)},ge=(Q,me,ce)=>{const{bum:je,scope:Fe,update:nt,subTree:We,um:Ke}=Q;je&&fM(je),Fe.stop(),nt&&(nt.active=!1,re(We,Q,me,ce)),Ke&&hl(Ke,me),hl(()=>{Q.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&Q.asyncDep&&!Q.asyncResolved&&Q.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},pe=(Q,me,ce,je=!1,Fe=!1,nt=0)=>{for(let We=nt;We<Q.length;We++)re(Q[We],me,ce,je,Fe)},ye=Q=>Q.shapeFlag&6?ye(Q.component.subTree):Q.shapeFlag&128?Q.suspense.next():f(Q.anchor||Q.el),Oe=(Q,me,ce)=>{Q==null?me._vnode&&re(me._vnode,null,null,!0):m(me._vnode||null,Q,me,null,null,null,ce),Xz(),dJ(),me._vnode=Q},Be={p:m,um:re,m:te,r:ie,mt:U,mc:T,pc:H,pbc:E,n:ye,o:n};let Ye,Ze;return e&&([Ye,Ze]=e(Be)),{render:Oe,hydrate:Ye,createApp:lme(Oe,Ye)}}function K0({effect:n,update:e},t){n.allowRecurse=e.allowRecurse=t}function PB(n,e,t=!1){const i=n.children,r=e.children;if(Bt(i)&&Bt(r))for(let s=0;s<i.length;s++){const a=i[s];let o=r[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=r[s]=bp(r[s]),o.el=a.el),t||PB(a,o)),o.type===ab&&(o.el=a.el)}}function gme(n){const e=n.slice(),t=[0];let i,r,s,a,o;const l=n.length;for(i=0;i<l;i++){const u=n[i];if(u!==0){if(r=t[t.length-1],n[r]<u){e[i]=r,t.push(i);continue}for(s=0,a=t.length-1;s<a;)o=s+a>>1,n[t[o]]<u?s=o+1:a=o;u<n[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,a=t[s-1];s-- >0;)t[s]=a,a=e[a];return t}const vme=n=>n.__isTeleport,Gx=n=>n&&(n.disabled||n.disabled===""),oH=n=>typeof SVGElement<"u"&&n instanceof SVGElement,XL=(n,e)=>{const t=n&&n.to;return un(t)?e?e(t):null:t},yme={__isTeleport:!0,process(n,e,t,i,r,s,a,o,l,u){const{mc:c,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:m,createComment:g}}=u,v=Gx(e.props);let{shapeFlag:_,children:y,dynamicChildren:b}=e;if(n==null){const x=e.el=m(""),w=e.anchor=m("");h(x,t,i),h(w,t,i);const A=e.target=XL(e.props,p),T=e.targetAnchor=m("");A&&(h(T,A),a=a||oH(A));const C=(E,I)=>{_&16&&c(y,E,I,r,s,a,o,l)};v?C(t,w):A&&C(A,T)}else{e.el=n.el;const x=e.anchor=n.anchor,w=e.target=n.target,A=e.targetAnchor=n.targetAnchor,T=Gx(n.props),C=T?t:w,E=T?x:A;if(a=a||oH(w),b?(f(n.dynamicChildren,b,C,r,s,a,o),PB(n,e,!0)):l||d(n,e,C,E,r,s,a,o,!1),v)T||UC(e,t,x,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const I=e.target=XL(e.props,p);I&&UC(e,I,null,u,0)}else T&&UC(e,w,A,u,1)}DJ(e)},remove(n,e,t,i,{um:r,o:{remove:s}},a){const{shapeFlag:o,children:l,anchor:u,targetAnchor:c,target:d,props:f}=n;if(d&&s(c),(a||!Gx(f))&&(s(u),o&16))for(let h=0;h<l.length;h++){const p=l[h];r(p,e,t,!0,!!p.dynamicChildren)}},move:UC,hydrate:_me};function UC(n,e,t,{o:{insert:i},m:r},s=2){s===0&&i(n.targetAnchor,e,t);const{el:a,anchor:o,shapeFlag:l,children:u,props:c}=n,d=s===2;if(d&&i(a,e,t),(!d||Gx(c))&&l&16)for(let f=0;f<u.length;f++)r(u[f],e,t,2);d&&i(o,e,t)}function _me(n,e,t,i,r,s,{o:{nextSibling:a,parentNode:o,querySelector:l}},u){const c=e.target=XL(e.props,l);if(c){const d=c._lpa||c.firstChild;if(e.shapeFlag&16)if(Gx(e.props))e.anchor=u(a(n),e,o(n),t,i,r,s),e.targetAnchor=d;else{e.anchor=a(n);let f=d;for(;f;)if(f=a(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,c._lpa=e.targetAnchor&&a(e.targetAnchor);break}u(d,e,c,t,i,r,s)}DJ(e)}return e.anchor&&a(e.anchor)}const bme=yme;function DJ(n){const e=n.ctx;if(e&&e.ut){let t=n.children[0].el;for(;t!==n.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const an=Symbol.for("v-fgt"),ab=Symbol.for("v-txt"),wo=Symbol.for("v-cmt"),VR=Symbol.for("v-stc"),Wx=[];let Oc=null;function j(n=!1){Wx.push(Oc=n?null:[])}function Sme(){Wx.pop(),Oc=Wx[Wx.length-1]||null}let G2=1;function lH(n){G2+=n}function RJ(n){return n.dynamicChildren=G2>0?Oc||A1:null,Sme(),G2>0&&Oc&&Oc.push(n),n}function _e(n,e,t,i,r,s){return RJ(Te(n,e,t,i,r,s,!0))}function gt(n,e,t,i,r){return RJ(he(n,e,t,i,r,!0))}function Wr(n){return n?n.__v_isVNode===!0:!1}function Bm(n,e){return n.type===e.type&&n.key===e.key}const kI="__vInternal",PJ=({key:n})=>n??null,hM=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?un(n)||br(n)||pn(n)?{i:Ka,r:n,k:e,f:!!t}:n:null);function Te(n,e=null,t=null,i=0,r=null,s=n===an?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&PJ(e),ref:e&&hM(e),scopeId:MI,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ka};return o?(kB(l,t),s&128&&n.normalize(l)):t&&(l.shapeFlag|=un(t)?8:16),G2>0&&!a&&Oc&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Oc.push(l),l}const he=xme;function xme(n,e=null,t=null,i=0,r=null,s=!1){if((!n||n===bJ)&&(n=wo),Wr(n)){const o=nh(n,e,!0);return t&&kB(o,t),G2>0&&!s&&Oc&&(o.shapeFlag&6?Oc[Oc.indexOf(n)]=o:Oc.push(o)),o.patchFlag|=-2,o}if(Dme(n)&&(n=n.__vccOpts),e){e=Qp(e);let{class:o,style:l}=e;o&&!un(o)&&(e.class=ee(o)),Yn(l)&&(sJ(l)&&!Bt(l)&&(l=qs({},l)),e.style=Jt(l))}const a=un(n)?1:$0e(n)?128:vme(n)?64:Yn(n)?4:pn(n)?2:0;return Te(n,e,t,i,r,a,s,!0)}function Qp(n){return n?sJ(n)||kI in n?qs({},n):n:null}function nh(n,e,t=!1){const{props:i,ref:r,patchFlag:s,children:a}=n,o=e?si(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:o,key:o&&PJ(o),ref:e&&e.ref?t&&r?Bt(r)?r.concat(hM(e)):[r,hM(e)]:hM(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==an?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&nh(n.ssContent),ssFallback:n.ssFallback&&nh(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce}}function An(n=" ",e=0){return he(ab,null,n,e)}function ot(n="",e=!1){return e?(j(),gt(wo,null,n)):he(wo,null,n)}function vd(n){return n==null||typeof n=="boolean"?he(wo):Bt(n)?he(an,null,n.slice()):typeof n=="object"?bp(n):he(ab,null,String(n))}function bp(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:nh(n)}function kB(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(Bt(e))t=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),kB(n,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(kI in e)?e._ctx=Ka:r===3&&Ka&&(Ka.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else pn(e)?(e={default:e,_ctx:Ka},t=32):(e=String(e),i&64?(t=16,e=[An(e)]):t=8);n.children=e,n.shapeFlag|=t}function si(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=ee([e.class,i.class]));else if(r==="style")e.style=Jt([e.style,i.style]);else if(xI(r)){const s=e[r],a=i[r];a&&s!==a&&!(Bt(s)&&s.includes(a))&&(e[r]=s?[].concat(s,a):a)}else r!==""&&(e[r]=i[r])}return e}function ld(n,e,t,i=null){Ku(n,e,7,[t,i])}const wme=TJ();let Tme=0;function Cme(n,e,t){const i=n.type,r=(e?e.appContext:n.appContext)||wme,s={uid:Tme++,vnode:n,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new WZ(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AJ(i,r),emitsOptions:hJ(i,r),emit:null,emitted:null,propsDefaults:as,inheritAttrs:i.inheritAttrs,ctx:as,data:as,props:as,attrs:as,slots:as,refs:as,setupState:as,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=F0e.bind(null,s),n.ce&&n.ce(s),s}let Da=null;const Qn=()=>Da||Ka;let LB,Lv,uH="__VUE_INSTANCE_SETTERS__";(Lv=UL()[uH])||(Lv=UL()[uH]=[]),Lv.push(n=>Da=n),LB=n=>{Lv.length>1?Lv.forEach(e=>e(n)):Lv[0](n)};const r_=n=>{LB(n),n.scope.on()},pg=()=>{Da&&Da.scope.off(),LB(null)};function kJ(n){return n.vnode.shapeFlag&4}let W2=!1;function Ame(n,e=!1){W2=e;const{props:t,children:i}=n.vnode,r=kJ(n);ume(n,t,r,e),fme(n,i);const s=r?Eme(n,e):void 0;return W2=!1,s}function Eme(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=Kf(new Proxy(n.ctx,tme));const{setup:i}=t;if(i){const r=n.setupContext=i.length>1?OJ(n):null;r_(n),ib();const s=Np(i,n,0,[n.props,r]);if(rb(),pg(),N2(s)){if(s.then(pg,pg),e)return s.then(a=>{cH(n,a,e)}).catch(a=>{AI(a,n,0)});n.asyncDep=s}else cH(n,s,e)}else LJ(n,e)}function cH(n,e,t){pn(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Yn(e)&&(n.setupState=oJ(e)),LJ(n,t)}let dH;function LJ(n,e,t){const i=n.type;if(!n.render){if(!e&&dH&&!i.render){const r=i.template||DB(n).template;if(r){const{isCustomElement:s,compilerOptions:a}=n.appContext.config,{delimiters:o,compilerOptions:l}=i,u=qs(qs({isCustomElement:s,delimiters:o},a),l);i.render=dH(r,u)}}n.render=i.render||qi}r_(n),ib(),nme(n),rb(),pg()}function Mme(n){return n.attrsProxy||(n.attrsProxy=new Proxy(n.attrs,{get(e,t){return Dl(n,"get","$attrs"),e[t]}}))}function OJ(n){const e=t=>{n.exposed=t||{}};return{get attrs(){return Mme(n)},slots:n.slots,emit:n.emit,expose:e}}function LI(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(oJ(Kf(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in $x)return $x[t](n)},has(e,t){return t in e||t in $x}}))}function Ime(n,e=!0){return pn(n)?n.displayName||n.name:n.name||e&&n.__name}function Dme(n){return pn(n)&&"__vccOpts"in n}const W=(n,e)=>R0e(n,e,W2);function ln(n,e,t){const i=arguments.length;return i===2?Yn(e)&&!Bt(e)?Wr(e)?he(n,null,[e]):he(n,e):he(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Wr(t)&&(t=[t]),he(n,e,t))}const Rme=Symbol.for("v-scx"),Pme=()=>Zt(Rme),kme="3.3.4",Lme="http://www.w3.org/2000/svg",Fm=typeof document<"u"?document:null,fH=Fm&&Fm.createElement("template"),Ome={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const r=e?Fm.createElementNS(Lme,n):Fm.createElement(n,t?{is:t}:void 0);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>Fm.createTextNode(n),createComment:n=>Fm.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Fm.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,r,s){const a=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{fH.innerHTML=i?`<svg>${n}</svg>`:n;const o=fH.content;if(i){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}e.insertBefore(o,t)}return[a?a.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function Nme(n,e,t){const i=n._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}function Bme(n,e,t){const i=n.style,r=un(t);if(t&&!r){if(e&&!un(e))for(const s in e)t[s]==null&&YL(i,s,"");for(const s in t)YL(i,s,t[s])}else{const s=i.display;r?e!==t&&(i.cssText=t):e&&n.removeAttribute("style"),"_vod"in n&&(i.display=s)}}const hH=/\s*!important$/;function YL(n,e,t){if(Bt(t))t.forEach(i=>YL(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=Fme(n,e);hH.test(t)?n.setProperty(b0(i),t.replace(hH,""),"important"):n[i]=t}}const pH=["Webkit","Moz","ms"],$R={};function Fme(n,e){const t=$R[e];if(t)return t;let i=fu(e);if(i!=="filter"&&i in n)return $R[e]=i;i=aT(i);for(let r=0;r<pH.length;r++){const s=pH[r]+i;if(s in n)return $R[e]=s}return e}const mH="http://www.w3.org/1999/xlink";function Ume(n,e,t,i,r){if(i&&e.startsWith("xlink:"))t==null?n.removeAttributeNS(mH,e.slice(6,e.length)):n.setAttributeNS(mH,e,t);else{const s=jpe(e);t==null||s&&!VZ(t)?n.removeAttribute(e):n.setAttribute(e,s?"":t)}}function zme(n,e,t,i,r,s,a){if(e==="innerHTML"||e==="textContent"){i&&a(i,r,s),n[e]=t??"";return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){n._value=t;const u=o==="OPTION"?n.getAttribute("value"):n.value,c=t??"";u!==c&&(n.value=c),t==null&&n.removeAttribute(e);return}let l=!1;if(t===""||t==null){const u=typeof n[e];u==="boolean"?t=VZ(t):t==null&&u==="string"?(t="",l=!0):u==="number"&&(t=0,l=!0)}try{n[e]=t}catch{}l&&n.removeAttribute(e)}function Cp(n,e,t,i){n.addEventListener(e,t,i)}function Hme(n,e,t,i){n.removeEventListener(e,t,i)}function Vme(n,e,t,i,r=null){const s=n._vei||(n._vei={}),a=s[e];if(i&&a)a.value=i;else{const[o,l]=$me(e);if(i){const u=s[e]=qme(i,r);Cp(n,o,u,l)}else a&&(Hme(n,o,a,l),s[e]=void 0)}}const gH=/(?:Once|Passive|Capture)$/;function $me(n){let e;if(gH.test(n)){e={};let i;for(;i=n.match(gH);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):b0(n.slice(2)),e]}let GR=0;const Gme=Promise.resolve(),Wme=()=>GR||(Gme.then(()=>GR=0),GR=Date.now());function qme(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Ku(jme(i,t.value),e,5,[i])};return t.value=n,t.attached=Wme(),t}function jme(n,e){if(Bt(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const vH=/^on[a-z]/,Kme=(n,e,t,i,r=!1,s,a,o,l)=>{e==="class"?Nme(n,i,r):e==="style"?Bme(n,t,i):xI(e)?cB(e)||Vme(n,e,t,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):Xme(n,e,i,r))?zme(n,e,i,s,a,o,l):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Ume(n,e,i,r))};function Xme(n,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in n&&vH.test(e)&&pn(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA"||vH.test(e)&&un(t)?!1:e in n}const Bh="transition",wS="animation",Ks=(n,{slots:e})=>ln(j0e,BJ(n),e);Ks.displayName="Transition";const NJ={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Yme=Ks.props=qs({},gJ,NJ),X0=(n,e=[])=>{Bt(n)?n.forEach(t=>t(...e)):n&&n(...e)},yH=n=>n?Bt(n)?n.some(e=>e.length>1):n.length>1:!1;function BJ(n){const e={};for(const k in n)k in NJ||(e[k]=n[k]);if(n.css===!1)return e;const{name:t="v",type:i,duration:r,enterFromClass:s=`${t}-enter-from`,enterActiveClass:a=`${t}-enter-active`,enterToClass:o=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:u=a,appearToClass:c=o,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:h=`${t}-leave-to`}=n,p=Qme(r),m=p&&p[0],g=p&&p[1],{onBeforeEnter:v,onEnter:_,onEnterCancelled:y,onLeave:b,onLeaveCancelled:x,onBeforeAppear:w=v,onAppear:A=_,onAppearCancelled:T=y}=e,C=(k,O,U)=>{pp(k,O?c:o),pp(k,O?u:a),U&&U()},E=(k,O)=>{k._isLeaving=!1,pp(k,d),pp(k,h),pp(k,f),O&&O()},I=k=>(O,U)=>{const z=k?A:_,L=()=>C(O,k,U);X0(z,[O,L]),_H(()=>{pp(O,k?l:s),If(O,k?c:o),yH(z)||bH(O,i,m,L)})};return qs(e,{onBeforeEnter(k){X0(v,[k]),If(k,s),If(k,a)},onBeforeAppear(k){X0(w,[k]),If(k,l),If(k,u)},onEnter:I(!1),onAppear:I(!0),onLeave(k,O){k._isLeaving=!0;const U=()=>E(k,O);If(k,d),UJ(),If(k,f),_H(()=>{k._isLeaving&&(pp(k,d),If(k,h),yH(b)||bH(k,i,g,U))}),X0(b,[k,U])},onEnterCancelled(k){C(k,!1),X0(y,[k])},onAppearCancelled(k){C(k,!0),X0(T,[k])},onLeaveCancelled(k){E(k),X0(x,[k])}})}function Qme(n){if(n==null)return null;if(Yn(n))return[WR(n.enter),WR(n.leave)];{const e=WR(n);return[e,e]}}function WR(n){return Hpe(n)}function If(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n._vtc||(n._vtc=new Set)).add(e)}function pp(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const{_vtc:t}=n;t&&(t.delete(e),t.size||(n._vtc=void 0))}function _H(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Zme=0;function bH(n,e,t,i){const r=n._endId=++Zme,s=()=>{r===n._endId&&i()};if(t)return setTimeout(s,t);const{type:a,timeout:o,propCount:l}=FJ(n,e);if(!a)return i();const u=a+"end";let c=0;const d=()=>{n.removeEventListener(u,f),s()},f=h=>{h.target===n&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},o+1),n.addEventListener(u,f)}function FJ(n,e){const t=window.getComputedStyle(n),i=p=>(t[p]||"").split(", "),r=i(`${Bh}Delay`),s=i(`${Bh}Duration`),a=SH(r,s),o=i(`${wS}Delay`),l=i(`${wS}Duration`),u=SH(o,l);let c=null,d=0,f=0;e===Bh?a>0&&(c=Bh,d=a,f=s.length):e===wS?u>0&&(c=wS,d=u,f=l.length):(d=Math.max(a,u),c=d>0?a>u?Bh:wS:null,f=c?c===Bh?s.length:l.length:0);const h=c===Bh&&/\b(transform|all)(,|$)/.test(i(`${Bh}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:h}}function SH(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>xH(t)+xH(n[i])))}function xH(n){return Number(n.slice(0,-1).replace(",","."))*1e3}function UJ(){return document.body.offsetHeight}const zJ=new WeakMap,HJ=new WeakMap,VJ={name:"TransitionGroup",props:qs({},Yme,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Qn(),i=mJ();let r,s;return fc(()=>{if(!r.length)return;const a=n.moveClass||`${n.name||"v"}-move`;if(!ige(r[0].el,t.vnode.el,a))return;r.forEach(ege),r.forEach(tge);const o=r.filter(nge);UJ(),o.forEach(l=>{const u=l.el,c=u.style;If(u,a),c.transform=c.webkitTransform=c.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,pp(u,a))};u.addEventListener("transitionend",d)})}),()=>{const a=ir(n),o=BJ(a);let l=a.tag||an;r=s,s=e.default?CB(e.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&$2(c,V2(c,o,i,t))}if(r)for(let u=0;u<r.length;u++){const c=r[u];$2(c,V2(c,o,i,t)),zJ.set(c,c.el.getBoundingClientRect())}return he(l,null,s)}}},Jme=n=>delete n.mode;VJ.props;const $J=VJ;function ege(n){const e=n.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function tge(n){HJ.set(n,n.el.getBoundingClientRect())}function nge(n){const e=zJ.get(n),t=HJ.get(n),i=e.left-t.left,r=e.top-t.top;if(i||r){const s=n.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",n}}function ige(n,e,t){const i=n.cloneNode();n._vtc&&n._vtc.forEach(a=>{a.split(/\s+/).forEach(o=>o&&i.classList.remove(o))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:s}=FJ(i);return r.removeChild(i),s}const s_=n=>{const e=n.props["onUpdate:modelValue"]||!1;return Bt(e)?t=>fM(e,t):e};function rge(n){n.target.composing=!0}function wH(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const OI={created(n,{modifiers:{lazy:e,trim:t,number:i}},r){n._assign=s_(r);const s=i||r.props&&r.props.type==="number";Cp(n,e?"change":"input",a=>{if(a.target.composing)return;let o=n.value;t&&(o=o.trim()),s&&(o=FL(o)),n._assign(o)}),t&&Cp(n,"change",()=>{n.value=n.value.trim()}),e||(Cp(n,"compositionstart",rge),Cp(n,"compositionend",wH),Cp(n,"change",wH))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,modifiers:{lazy:t,trim:i,number:r}},s){if(n._assign=s_(s),n.composing||document.activeElement===n&&n.type!=="range"&&(t||i&&n.value.trim()===e||(r||n.type==="number")&&FL(n.value)===e))return;const a=e??"";n.value!==a&&(n.value=a)}},b3={deep:!0,created(n,e,t){n._assign=s_(t),Cp(n,"change",()=>{const i=n._modelValue,r=WJ(n),s=n.checked,a=n._assign;if(Bt(i)){const o=$Z(i,r),l=o!==-1;if(s&&!l)a(i.concat(r));else if(!s&&l){const u=[...i];u.splice(o,1),a(u)}}else if(wI(i)){const o=new Set(i);s?o.add(r):o.delete(r),a(o)}else a(qJ(n,s))})},mounted:TH,beforeUpdate(n,e,t){n._assign=s_(t),TH(n,e,t)}};function TH(n,{value:e,oldValue:t},i){n._modelValue=e,Bt(e)?n.checked=$Z(e,i.props.value)>-1:wI(e)?n.checked=e.has(i.props.value):e!==t&&(n.checked=n_(e,qJ(n,!0)))}const GJ={created(n,{value:e},t){n.checked=n_(e,t.props.value),n._assign=s_(t),Cp(n,"change",()=>{n._assign(WJ(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n._assign=s_(i),e!==t&&(n.checked=n_(e,i.props.value))}};function WJ(n){return"_value"in n?n._value:n.value}function qJ(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const sge=["ctrl","shift","alt","meta"],age={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>sge.some(t=>n[`${t}Key`]&&!e.includes(t))},wn=(n,e)=>(t,...i)=>{for(let r=0;r<e.length;r++){const s=age[e[r]];if(s&&s(t,e))return}return n(t,...i)},oge={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ur=(n,e)=>t=>{if(!("key"in t))return;const i=b0(t.key);if(e.some(r=>r===i||oge[r]===i))return n(t)},Oi={beforeMount(n,{value:e},{transition:t}){n._vod=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):TS(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),TS(n,!0),i.enter(n)):i.leave(n,()=>{TS(n,!1)}):TS(n,e))},beforeUnmount(n,{value:e}){TS(n,e)}};function TS(n,e){n.style.display=e?n._vod:"none"}const lge=qs({patchProp:Kme},Ome);let CH;function jJ(){return CH||(CH=pme(lge))}const Zp=(...n)=>{jJ().render(...n)},KJ=(...n)=>{const e=jJ().createApp(...n),{mount:t}=e;return e.mount=i=>{const r=uge(i);if(!r)return;const s=e._component;!pn(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const a=t(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function uge(n){return un(n)?document.querySelector(n):n}const cge="2.9.1",AH=Symbol("INSTALLED_KEY"),XJ=Symbol(),qx="el",dge="is-",Y0=(n,e,t,i,r)=>{let s=`${n}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),r&&(s+=`--${r}`),s},YJ=Symbol("namespaceContextKey"),OB=n=>{const e=n||(Qn()?Zt(YJ,ae(qx)):ae(qx));return W(()=>S(e)||qx)},Rt=(n,e)=>{const t=OB(e);return{namespace:t,b:(m="")=>Y0(t.value,n,m,"",""),e:m=>m?Y0(t.value,n,"",m,""):"",m:m=>m?Y0(t.value,n,"","",m):"",be:(m,g)=>m&&g?Y0(t.value,n,m,g,""):"",em:(m,g)=>m&&g?Y0(t.value,n,"",m,g):"",bm:(m,g)=>m&&g?Y0(t.value,n,m,"",g):"",bem:(m,g,v)=>m&&g&&v?Y0(t.value,n,m,g,v):"",is:(m,...g)=>{const v=g.length>=1?g[0]:!0;return m&&v?`${dge}${m}`:""},cssVar:m=>{const g={};for(const v in m)m[v]&&(g[`--${t.value}-${v}`]=m[v]);return g},cssVarName:m=>`--${t.value}-${m}`,cssVarBlock:m=>{const g={};for(const v in m)m[v]&&(g[`--${t.value}-${n}-${v}`]=m[v]);return g},cssVarBlockName:m=>`--${t.value}-${n}-${m}`}};var fge=typeof global=="object"&&global&&global.Object===Object&&global;const QJ=fge;var hge=typeof self=="object"&&self&&self.Object===Object&&self,pge=QJ||hge||Function("return this")();const Kc=pge;var mge=Kc.Symbol;const nc=mge;var ZJ=Object.prototype,gge=ZJ.hasOwnProperty,vge=ZJ.toString,CS=nc?nc.toStringTag:void 0;function yge(n){var e=gge.call(n,CS),t=n[CS];try{n[CS]=void 0;var i=!0}catch{}var r=vge.call(n);return i&&(e?n[CS]=t:delete n[CS]),r}var _ge=Object.prototype,bge=_ge.toString;function Sge(n){return bge.call(n)}var xge="[object Null]",wge="[object Undefined]",EH=nc?nc.toStringTag:void 0;function ev(n){return n==null?n===void 0?wge:xge:EH&&EH in Object(n)?yge(n):Sge(n)}function Vd(n){return n!=null&&typeof n=="object"}var Tge="[object Symbol]";function NI(n){return typeof n=="symbol"||Vd(n)&&ev(n)==Tge}function NB(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var Cge=Array.isArray;const el=Cge;var Age=1/0,MH=nc?nc.prototype:void 0,IH=MH?MH.toString:void 0;function JJ(n){if(typeof n=="string")return n;if(el(n))return NB(n,JJ)+"";if(NI(n))return IH?IH.call(n):"";var e=n+"";return e=="0"&&1/n==-Age?"-0":e}var Ege=/\s/;function Mge(n){for(var e=n.length;e--&&Ege.test(n.charAt(e)););return e}var Ige=/^\s+/;function Dge(n){return n&&n.slice(0,Mge(n)+1).replace(Ige,"")}function tl(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var DH=0/0,Rge=/^[-+]0x[0-9a-f]+$/i,Pge=/^0b[01]+$/i,kge=/^0o[0-7]+$/i,Lge=parseInt;function QL(n){if(typeof n=="number")return n;if(NI(n))return DH;if(tl(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=tl(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=Dge(n);var t=Pge.test(n);return t||kge.test(n)?Lge(n.slice(2),t?2:8):Rge.test(n)?DH:+n}var RH=1/0,Oge=17976931348623157e292;function Nge(n){if(!n)return n===0?n:0;if(n=QL(n),n===RH||n===-RH){var e=n<0?-1:1;return e*Oge}return n===n?n:0}function Bge(n){var e=Nge(n),t=e%1;return e===e?t?e-t:e:0}function BB(n){return n}var Fge="[object AsyncFunction]",Uge="[object Function]",zge="[object GeneratorFunction]",Hge="[object Proxy]";function FB(n){if(!tl(n))return!1;var e=ev(n);return e==Uge||e==zge||e==Fge||e==Hge}var Vge=Kc["__core-js_shared__"];const qR=Vge;var PH=function(){var n=/[^.]+$/.exec(qR&&qR.keys&&qR.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function $ge(n){return!!PH&&PH in n}var Gge=Function.prototype,Wge=Gge.toString;function tv(n){if(n!=null){try{return Wge.call(n)}catch{}try{return n+""}catch{}}return""}var qge=/[\\^$.*+?()[\]{}|]/g,jge=/^\[object .+?Constructor\]$/,Kge=Function.prototype,Xge=Object.prototype,Yge=Kge.toString,Qge=Xge.hasOwnProperty,Zge=RegExp("^"+Yge.call(Qge).replace(qge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Jge(n){if(!tl(n)||$ge(n))return!1;var e=FB(n)?Zge:jge;return e.test(tv(n))}function eve(n,e){return n==null?void 0:n[e]}function nv(n,e){var t=eve(n,e);return Jge(t)?t:void 0}var tve=nv(Kc,"WeakMap");const ZL=tve;var kH=Object.create,nve=function(){function n(){}return function(e){if(!tl(e))return{};if(kH)return kH(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();const ive=nve;function rve(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function sve(){}function eee(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var ave=800,ove=16,lve=Date.now;function uve(n){var e=0,t=0;return function(){var i=lve(),r=ove-(i-t);if(t=i,r>0){if(++e>=ave)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function cve(n){return function(){return n}}var dve=function(){try{var n=nv(Object,"defineProperty");return n({},"",{}),n}catch{}}();const S3=dve;var fve=S3?function(n,e){return S3(n,"toString",{configurable:!0,enumerable:!1,value:cve(e),writable:!0})}:BB;const hve=fve;var pve=uve(hve);const tee=pve;function mve(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}function nee(n,e,t,i){for(var r=n.length,s=t+(i?1:-1);i?s--:++s<r;)if(e(n[s],s,n))return s;return-1}function gve(n){return n!==n}function vve(n,e,t){for(var i=t-1,r=n.length;++i<r;)if(n[i]===e)return i;return-1}function yve(n,e,t){return e===e?vve(n,e,t):nee(n,gve,t)}function _ve(n,e){var t=n==null?0:n.length;return!!t&&yve(n,e,0)>-1}var bve=9007199254740991,Sve=/^(?:0|[1-9]\d*)$/;function BI(n,e){var t=typeof n;return e=e??bve,!!e&&(t=="number"||t!="symbol"&&Sve.test(n))&&n>-1&&n%1==0&&n<e}function UB(n,e,t){e=="__proto__"&&S3?S3(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function oT(n,e){return n===e||n!==n&&e!==e}var xve=Object.prototype,wve=xve.hasOwnProperty;function zB(n,e,t){var i=n[e];(!(wve.call(n,e)&&oT(i,t))||t===void 0&&!(e in n))&&UB(n,e,t)}function ob(n,e,t,i){var r=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=i?i(t[o],n[o],o,t,n):void 0;l===void 0&&(l=n[o]),r?UB(t,o,l):zB(t,o,l)}return t}var LH=Math.max;function iee(n,e,t){return e=LH(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,s=LH(i.length-e,0),a=Array(s);++r<s;)a[r]=i[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=i[r];return o[e]=t(a),rve(n,this,o)}}function ree(n,e){return tee(iee(n,e,BB),n+"")}var Tve=9007199254740991;function HB(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Tve}function lb(n){return n!=null&&HB(n.length)&&!FB(n)}function Cve(n,e,t){if(!tl(t))return!1;var i=typeof e;return(i=="number"?lb(t)&&BI(e,t.length):i=="string"&&e in t)?oT(t[e],n):!1}function Ave(n){return ree(function(e,t){var i=-1,r=t.length,s=r>1?t[r-1]:void 0,a=r>2?t[2]:void 0;for(s=n.length>3&&typeof s=="function"?(r--,s):void 0,a&&Cve(t[0],t[1],a)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var o=t[i];o&&n(e,o,i,s)}return e})}var Eve=Object.prototype;function VB(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Eve;return n===t}function Mve(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var Ive="[object Arguments]";function OH(n){return Vd(n)&&ev(n)==Ive}var see=Object.prototype,Dve=see.hasOwnProperty,Rve=see.propertyIsEnumerable,Pve=OH(function(){return arguments}())?OH:function(n){return Vd(n)&&Dve.call(n,"callee")&&!Rve.call(n,"callee")};const q2=Pve;function kve(){return!1}var aee=typeof ru=="object"&&ru&&!ru.nodeType&&ru,NH=aee&&typeof su=="object"&&su&&!su.nodeType&&su,Lve=NH&&NH.exports===aee,BH=Lve?Kc.Buffer:void 0,Ove=BH?BH.isBuffer:void 0,Nve=Ove||kve;const j2=Nve;var Bve="[object Arguments]",Fve="[object Array]",Uve="[object Boolean]",zve="[object Date]",Hve="[object Error]",Vve="[object Function]",$ve="[object Map]",Gve="[object Number]",Wve="[object Object]",qve="[object RegExp]",jve="[object Set]",Kve="[object String]",Xve="[object WeakMap]",Yve="[object ArrayBuffer]",Qve="[object DataView]",Zve="[object Float32Array]",Jve="[object Float64Array]",eye="[object Int8Array]",tye="[object Int16Array]",nye="[object Int32Array]",iye="[object Uint8Array]",rye="[object Uint8ClampedArray]",sye="[object Uint16Array]",aye="[object Uint32Array]",ss={};ss[Zve]=ss[Jve]=ss[eye]=ss[tye]=ss[nye]=ss[iye]=ss[rye]=ss[sye]=ss[aye]=!0;ss[Bve]=ss[Fve]=ss[Yve]=ss[Uve]=ss[Qve]=ss[zve]=ss[Hve]=ss[Vve]=ss[$ve]=ss[Gve]=ss[Wve]=ss[qve]=ss[jve]=ss[Kve]=ss[Xve]=!1;function oye(n){return Vd(n)&&HB(n.length)&&!!ss[ev(n)]}function $B(n){return function(e){return n(e)}}var oee=typeof ru=="object"&&ru&&!ru.nodeType&&ru,jx=oee&&typeof su=="object"&&su&&!su.nodeType&&su,lye=jx&&jx.exports===oee,jR=lye&&QJ.process,uye=function(){try{var n=jx&&jx.require&&jx.require("util").types;return n||jR&&jR.binding&&jR.binding("util")}catch{}}();const a_=uye;var FH=a_&&a_.isTypedArray,cye=FH?$B(FH):oye;const GB=cye;var dye=Object.prototype,fye=dye.hasOwnProperty;function lee(n,e){var t=el(n),i=!t&&q2(n),r=!t&&!i&&j2(n),s=!t&&!i&&!r&&GB(n),a=t||i||r||s,o=a?Mve(n.length,String):[],l=o.length;for(var u in n)(e||fye.call(n,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||BI(u,l)))&&o.push(u);return o}function uee(n,e){return function(t){return n(e(t))}}var hye=uee(Object.keys,Object);const pye=hye;var mye=Object.prototype,gye=mye.hasOwnProperty;function vye(n){if(!VB(n))return pye(n);var e=[];for(var t in Object(n))gye.call(n,t)&&t!="constructor"&&e.push(t);return e}function lT(n){return lb(n)?lee(n):vye(n)}function yye(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var _ye=Object.prototype,bye=_ye.hasOwnProperty;function Sye(n){if(!tl(n))return yye(n);var e=VB(n),t=[];for(var i in n)i=="constructor"&&(e||!bye.call(n,i))||t.push(i);return t}function uT(n){return lb(n)?lee(n,!0):Sye(n)}var xye=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wye=/^\w*$/;function WB(n,e){if(el(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||NI(n)?!0:wye.test(n)||!xye.test(n)||e!=null&&n in Object(e)}var Tye=nv(Object,"create");const K2=Tye;function Cye(){this.__data__=K2?K2(null):{},this.size=0}function Aye(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Eye="__lodash_hash_undefined__",Mye=Object.prototype,Iye=Mye.hasOwnProperty;function Dye(n){var e=this.__data__;if(K2){var t=e[n];return t===Eye?void 0:t}return Iye.call(e,n)?e[n]:void 0}var Rye=Object.prototype,Pye=Rye.hasOwnProperty;function kye(n){var e=this.__data__;return K2?e[n]!==void 0:Pye.call(e,n)}var Lye="__lodash_hash_undefined__";function Oye(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=K2&&e===void 0?Lye:e,this}function Pg(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Pg.prototype.clear=Cye;Pg.prototype.delete=Aye;Pg.prototype.get=Dye;Pg.prototype.has=kye;Pg.prototype.set=Oye;function Nye(){this.__data__=[],this.size=0}function FI(n,e){for(var t=n.length;t--;)if(oT(n[t][0],e))return t;return-1}var Bye=Array.prototype,Fye=Bye.splice;function Uye(n){var e=this.__data__,t=FI(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():Fye.call(e,t,1),--this.size,!0}function zye(n){var e=this.__data__,t=FI(e,n);return t<0?void 0:e[t][1]}function Hye(n){return FI(this.__data__,n)>-1}function Vye(n,e){var t=this.__data__,i=FI(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}function _h(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}_h.prototype.clear=Nye;_h.prototype.delete=Uye;_h.prototype.get=zye;_h.prototype.has=Hye;_h.prototype.set=Vye;var $ye=nv(Kc,"Map");const X2=$ye;function Gye(){this.size=0,this.__data__={hash:new Pg,map:new(X2||_h),string:new Pg}}function Wye(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function UI(n,e){var t=n.__data__;return Wye(e)?t[typeof e=="string"?"string":"hash"]:t.map}function qye(n){var e=UI(this,n).delete(n);return this.size-=e?1:0,e}function jye(n){return UI(this,n).get(n)}function Kye(n){return UI(this,n).has(n)}function Xye(n,e){var t=UI(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}function bh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}bh.prototype.clear=Gye;bh.prototype.delete=qye;bh.prototype.get=jye;bh.prototype.has=Kye;bh.prototype.set=Xye;var Yye="Expected a function";function zI(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Yye);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=t.cache;if(s.has(r))return s.get(r);var a=n.apply(this,i);return t.cache=s.set(r,a)||s,a};return t.cache=new(zI.Cache||bh),t}zI.Cache=bh;var Qye=500;function Zye(n){var e=zI(n,function(i){return t.size===Qye&&t.clear(),i}),t=e.cache;return e}var Jye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e1e=/\\(\\)?/g,t1e=Zye(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Jye,function(t,i,r,s){e.push(r?s.replace(e1e,"$1"):i||t)}),e});const n1e=t1e;function i1e(n){return n==null?"":JJ(n)}function ub(n,e){return el(n)?n:WB(n,e)?[n]:n1e(i1e(n))}var r1e=1/0;function cb(n){if(typeof n=="string"||NI(n))return n;var e=n+"";return e=="0"&&1/n==-r1e?"-0":e}function HI(n,e){e=ub(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[cb(e[t++])];return t&&t==i?n:void 0}function vs(n,e,t){var i=n==null?void 0:HI(n,e);return i===void 0?t:i}function qB(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var UH=nc?nc.isConcatSpreadable:void 0;function s1e(n){return el(n)||q2(n)||!!(UH&&n&&n[UH])}function cT(n,e,t,i,r){var s=-1,a=n.length;for(t||(t=s1e),r||(r=[]);++s<a;){var o=n[s];e>0&&t(o)?e>1?cT(o,e-1,t,i,r):qB(r,o):i||(r[r.length]=o)}return r}function cee(n){var e=n==null?0:n.length;return e?cT(n,1):[]}function dee(n){return tee(iee(n,void 0,cee),n+"")}var a1e=uee(Object.getPrototypeOf,Object);const jB=a1e;var o1e="[object Object]",l1e=Function.prototype,u1e=Object.prototype,fee=l1e.toString,c1e=u1e.hasOwnProperty,d1e=fee.call(Object);function hee(n){if(!Vd(n)||ev(n)!=o1e)return!1;var e=jB(n);if(e===null)return!0;var t=c1e.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&fee.call(t)==d1e}function f1e(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=n[i+e];return s}function yo(){if(!arguments.length)return[];var n=arguments[0];return el(n)?n:[n]}function h1e(){this.__data__=new _h,this.size=0}function p1e(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function m1e(n){return this.__data__.get(n)}function g1e(n){return this.__data__.has(n)}var v1e=200;function y1e(n,e){var t=this.__data__;if(t instanceof _h){var i=t.__data__;if(!X2||i.length<v1e-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new bh(i)}return t.set(n,e),this.size=t.size,this}function Hc(n){var e=this.__data__=new _h(n);this.size=e.size}Hc.prototype.clear=h1e;Hc.prototype.delete=p1e;Hc.prototype.get=m1e;Hc.prototype.has=g1e;Hc.prototype.set=y1e;function _1e(n,e){return n&&ob(e,lT(e),n)}function b1e(n,e){return n&&ob(e,uT(e),n)}var pee=typeof ru=="object"&&ru&&!ru.nodeType&&ru,zH=pee&&typeof su=="object"&&su&&!su.nodeType&&su,S1e=zH&&zH.exports===pee,HH=S1e?Kc.Buffer:void 0,VH=HH?HH.allocUnsafe:void 0;function mee(n,e){if(e)return n.slice();var t=n.length,i=VH?VH(t):new n.constructor(t);return n.copy(i),i}function x1e(n,e){for(var t=-1,i=n==null?0:n.length,r=0,s=[];++t<i;){var a=n[t];e(a,t,n)&&(s[r++]=a)}return s}function gee(){return[]}var w1e=Object.prototype,T1e=w1e.propertyIsEnumerable,$H=Object.getOwnPropertySymbols,C1e=$H?function(n){return n==null?[]:(n=Object(n),x1e($H(n),function(e){return T1e.call(n,e)}))}:gee;const KB=C1e;function A1e(n,e){return ob(n,KB(n),e)}var E1e=Object.getOwnPropertySymbols,M1e=E1e?function(n){for(var e=[];n;)qB(e,KB(n)),n=jB(n);return e}:gee;const vee=M1e;function I1e(n,e){return ob(n,vee(n),e)}function yee(n,e,t){var i=e(n);return el(n)?i:qB(i,t(n))}function JL(n){return yee(n,lT,KB)}function _ee(n){return yee(n,uT,vee)}var D1e=nv(Kc,"DataView");const e6=D1e;var R1e=nv(Kc,"Promise");const t6=R1e;var P1e=nv(Kc,"Set");const D1=P1e;var GH="[object Map]",k1e="[object Object]",WH="[object Promise]",qH="[object Set]",jH="[object WeakMap]",KH="[object DataView]",L1e=tv(e6),O1e=tv(X2),N1e=tv(t6),B1e=tv(D1),F1e=tv(ZL),Im=ev;(e6&&Im(new e6(new ArrayBuffer(1)))!=KH||X2&&Im(new X2)!=GH||t6&&Im(t6.resolve())!=WH||D1&&Im(new D1)!=qH||ZL&&Im(new ZL)!=jH)&&(Im=function(n){var e=ev(n),t=e==k1e?n.constructor:void 0,i=t?tv(t):"";if(i)switch(i){case L1e:return KH;case O1e:return GH;case N1e:return WH;case B1e:return qH;case F1e:return jH}return e});const Y2=Im;var U1e=Object.prototype,z1e=U1e.hasOwnProperty;function H1e(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&z1e.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var V1e=Kc.Uint8Array;const x3=V1e;function XB(n){var e=new n.constructor(n.byteLength);return new x3(e).set(new x3(n)),e}function $1e(n,e){var t=e?XB(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var G1e=/\w*$/;function W1e(n){var e=new n.constructor(n.source,G1e.exec(n));return e.lastIndex=n.lastIndex,e}var XH=nc?nc.prototype:void 0,YH=XH?XH.valueOf:void 0;function q1e(n){return YH?Object(YH.call(n)):{}}function bee(n,e){var t=e?XB(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var j1e="[object Boolean]",K1e="[object Date]",X1e="[object Map]",Y1e="[object Number]",Q1e="[object RegExp]",Z1e="[object Set]",J1e="[object String]",e_e="[object Symbol]",t_e="[object ArrayBuffer]",n_e="[object DataView]",i_e="[object Float32Array]",r_e="[object Float64Array]",s_e="[object Int8Array]",a_e="[object Int16Array]",o_e="[object Int32Array]",l_e="[object Uint8Array]",u_e="[object Uint8ClampedArray]",c_e="[object Uint16Array]",d_e="[object Uint32Array]";function f_e(n,e,t){var i=n.constructor;switch(e){case t_e:return XB(n);case j1e:case K1e:return new i(+n);case n_e:return $1e(n,t);case i_e:case r_e:case s_e:case a_e:case o_e:case l_e:case u_e:case c_e:case d_e:return bee(n,t);case X1e:return new i;case Y1e:case J1e:return new i(n);case Q1e:return W1e(n);case Z1e:return new i;case e_e:return q1e(n)}}function See(n){return typeof n.constructor=="function"&&!VB(n)?ive(jB(n)):{}}var h_e="[object Map]";function p_e(n){return Vd(n)&&Y2(n)==h_e}var QH=a_&&a_.isMap,m_e=QH?$B(QH):p_e;const g_e=m_e;var v_e="[object Set]";function y_e(n){return Vd(n)&&Y2(n)==v_e}var ZH=a_&&a_.isSet,__e=ZH?$B(ZH):y_e;const b_e=__e;var S_e=1,x_e=2,w_e=4,xee="[object Arguments]",T_e="[object Array]",C_e="[object Boolean]",A_e="[object Date]",E_e="[object Error]",wee="[object Function]",M_e="[object GeneratorFunction]",I_e="[object Map]",D_e="[object Number]",Tee="[object Object]",R_e="[object RegExp]",P_e="[object Set]",k_e="[object String]",L_e="[object Symbol]",O_e="[object WeakMap]",N_e="[object ArrayBuffer]",B_e="[object DataView]",F_e="[object Float32Array]",U_e="[object Float64Array]",z_e="[object Int8Array]",H_e="[object Int16Array]",V_e="[object Int32Array]",$_e="[object Uint8Array]",G_e="[object Uint8ClampedArray]",W_e="[object Uint16Array]",q_e="[object Uint32Array]",Jr={};Jr[xee]=Jr[T_e]=Jr[N_e]=Jr[B_e]=Jr[C_e]=Jr[A_e]=Jr[F_e]=Jr[U_e]=Jr[z_e]=Jr[H_e]=Jr[V_e]=Jr[I_e]=Jr[D_e]=Jr[Tee]=Jr[R_e]=Jr[P_e]=Jr[k_e]=Jr[L_e]=Jr[$_e]=Jr[G_e]=Jr[W_e]=Jr[q_e]=!0;Jr[E_e]=Jr[wee]=Jr[O_e]=!1;function R1(n,e,t,i,r,s){var a,o=e&S_e,l=e&x_e,u=e&w_e;if(t&&(a=r?t(n,i,r,s):t(n)),a!==void 0)return a;if(!tl(n))return n;var c=el(n);if(c){if(a=H1e(n),!o)return eee(n,a)}else{var d=Y2(n),f=d==wee||d==M_e;if(j2(n))return mee(n,o);if(d==Tee||d==xee||f&&!r){if(a=l||f?{}:See(n),!o)return l?I1e(n,b1e(a,n)):A1e(n,_1e(a,n))}else{if(!Jr[d])return r?n:{};a=f_e(n,d,o)}}s||(s=new Hc);var h=s.get(n);if(h)return h;s.set(n,a),b_e(n)?n.forEach(function(g){a.add(R1(g,e,t,g,n,s))}):g_e(n)&&n.forEach(function(g,v){a.set(v,R1(g,e,t,v,n,s))});var p=u?l?_ee:JL:l?uT:lT,m=c?void 0:p(n);return mve(m||n,function(g,v){m&&(v=g,g=n[v]),zB(a,v,R1(g,e,t,v,n,s))}),a}var j_e=4;function JH(n){return R1(n,j_e)}var K_e=1,X_e=4;function w3(n){return R1(n,K_e|X_e)}var Y_e="__lodash_hash_undefined__";function Q_e(n){return this.__data__.set(n,Y_e),this}function Z_e(n){return this.__data__.has(n)}function Q2(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new bh;++e<t;)this.add(n[e])}Q2.prototype.add=Q2.prototype.push=Q_e;Q2.prototype.has=Z_e;function J_e(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}function Cee(n,e){return n.has(e)}var ebe=1,tbe=2;function Aee(n,e,t,i,r,s){var a=t&ebe,o=n.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(n),c=s.get(e);if(u&&c)return u==e&&c==n;var d=-1,f=!0,h=t&tbe?new Q2:void 0;for(s.set(n,e),s.set(e,n);++d<o;){var p=n[d],m=e[d];if(i)var g=a?i(m,p,d,e,n,s):i(p,m,d,n,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(h){if(!J_e(e,function(v,_){if(!Cee(h,_)&&(p===v||r(p,v,t,i,s)))return h.push(_)})){f=!1;break}}else if(!(p===m||r(p,m,t,i,s))){f=!1;break}}return s.delete(n),s.delete(e),f}function nbe(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}function YB(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var ibe=1,rbe=2,sbe="[object Boolean]",abe="[object Date]",obe="[object Error]",lbe="[object Map]",ube="[object Number]",cbe="[object RegExp]",dbe="[object Set]",fbe="[object String]",hbe="[object Symbol]",pbe="[object ArrayBuffer]",mbe="[object DataView]",eV=nc?nc.prototype:void 0,KR=eV?eV.valueOf:void 0;function gbe(n,e,t,i,r,s,a){switch(t){case mbe:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case pbe:return!(n.byteLength!=e.byteLength||!s(new x3(n),new x3(e)));case sbe:case abe:case ube:return oT(+n,+e);case obe:return n.name==e.name&&n.message==e.message;case cbe:case fbe:return n==e+"";case lbe:var o=nbe;case dbe:var l=i&ibe;if(o||(o=YB),n.size!=e.size&&!l)return!1;var u=a.get(n);if(u)return u==e;i|=rbe,a.set(n,e);var c=Aee(o(n),o(e),i,r,s,a);return a.delete(n),c;case hbe:if(KR)return KR.call(n)==KR.call(e)}return!1}var vbe=1,ybe=Object.prototype,_be=ybe.hasOwnProperty;function bbe(n,e,t,i,r,s){var a=t&vbe,o=JL(n),l=o.length,u=JL(e),c=u.length;if(l!=c&&!a)return!1;for(var d=l;d--;){var f=o[d];if(!(a?f in e:_be.call(e,f)))return!1}var h=s.get(n),p=s.get(e);if(h&&p)return h==e&&p==n;var m=!0;s.set(n,e),s.set(e,n);for(var g=a;++d<l;){f=o[d];var v=n[f],_=e[f];if(i)var y=a?i(_,v,f,e,n,s):i(v,_,f,n,e,s);if(!(y===void 0?v===_||r(v,_,t,i,s):y)){m=!1;break}g||(g=f=="constructor")}if(m&&!g){var b=n.constructor,x=e.constructor;b!=x&&"constructor"in n&&"constructor"in e&&!(typeof b=="function"&&b instanceof b&&typeof x=="function"&&x instanceof x)&&(m=!1)}return s.delete(n),s.delete(e),m}var Sbe=1,tV="[object Arguments]",nV="[object Array]",zC="[object Object]",xbe=Object.prototype,iV=xbe.hasOwnProperty;function wbe(n,e,t,i,r,s){var a=el(n),o=el(e),l=a?nV:Y2(n),u=o?nV:Y2(e);l=l==tV?zC:l,u=u==tV?zC:u;var c=l==zC,d=u==zC,f=l==u;if(f&&j2(n)){if(!j2(e))return!1;a=!0,c=!1}if(f&&!c)return s||(s=new Hc),a||GB(n)?Aee(n,e,t,i,r,s):gbe(n,e,l,t,i,r,s);if(!(t&Sbe)){var h=c&&iV.call(n,"__wrapped__"),p=d&&iV.call(e,"__wrapped__");if(h||p){var m=h?n.value():n,g=p?e.value():e;return s||(s=new Hc),r(m,g,t,i,s)}}return f?(s||(s=new Hc),bbe(n,e,t,i,r,s)):!1}function VI(n,e,t,i,r){return n===e?!0:n==null||e==null||!Vd(n)&&!Vd(e)?n!==n&&e!==e:wbe(n,e,t,i,VI,r)}var Tbe=1,Cbe=2;function Abe(n,e,t,i){var r=t.length,s=r,a=!i;if(n==null)return!s;for(n=Object(n);r--;){var o=t[r];if(a&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++r<s;){o=t[r];var l=o[0],u=n[l],c=o[1];if(a&&o[2]){if(u===void 0&&!(l in n))return!1}else{var d=new Hc;if(i)var f=i(u,c,l,n,e,d);if(!(f===void 0?VI(c,u,Tbe|Cbe,i,d):f))return!1}}return!0}function Eee(n){return n===n&&!tl(n)}function Ebe(n){for(var e=lT(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,Eee(r)]}return e}function Mee(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function Mbe(n){var e=Ebe(n);return e.length==1&&e[0][2]?Mee(e[0][0],e[0][1]):function(t){return t===n||Abe(t,n,e)}}function Ibe(n,e){return n!=null&&e in Object(n)}function Dbe(n,e,t){e=ub(e,n);for(var i=-1,r=e.length,s=!1;++i<r;){var a=cb(e[i]);if(!(s=n!=null&&t(n,a)))break;n=n[a]}return s||++i!=r?s:(r=n==null?0:n.length,!!r&&HB(r)&&BI(a,r)&&(el(n)||q2(n)))}function Iee(n,e){return n!=null&&Dbe(n,e,Ibe)}var Rbe=1,Pbe=2;function kbe(n,e){return WB(n)&&Eee(e)?Mee(cb(n),e):function(t){var i=vs(t,n);return i===void 0&&i===e?Iee(t,n):VI(e,i,Rbe|Pbe)}}function Lbe(n){return function(e){return e==null?void 0:e[n]}}function Obe(n){return function(e){return HI(e,n)}}function Nbe(n){return WB(n)?Lbe(cb(n)):Obe(n)}function Dee(n){return typeof n=="function"?n:n==null?BB:typeof n=="object"?el(n)?kbe(n[0],n[1]):Mbe(n):Nbe(n)}function Bbe(n){return function(e,t,i){for(var r=-1,s=Object(e),a=i(e),o=a.length;o--;){var l=a[n?o:++r];if(t(s[l],l,s)===!1)break}return e}}var Fbe=Bbe();const Ree=Fbe;function Ube(n,e){return n&&Ree(n,e,lT)}function zbe(n,e){return function(t,i){if(t==null)return t;if(!lb(t))return n(t,i);for(var r=t.length,s=e?r:-1,a=Object(t);(e?s--:++s<r)&&i(a[s],s,a)!==!1;);return t}}var Hbe=zbe(Ube);const Vbe=Hbe;var $be=function(){return Kc.Date.now()};const XR=$be;var Gbe="Expected a function",Wbe=Math.max,qbe=Math.min;function Rl(n,e,t){var i,r,s,a,o,l,u=0,c=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(Gbe);e=QL(e)||0,tl(t)&&(c=!!t.leading,d="maxWait"in t,s=d?Wbe(QL(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function h(w){var A=i,T=r;return i=r=void 0,u=w,a=n.apply(T,A),a}function p(w){return u=w,o=setTimeout(v,e),c?h(w):a}function m(w){var A=w-l,T=w-u,C=e-A;return d?qbe(C,s-T):C}function g(w){var A=w-l,T=w-u;return l===void 0||A>=e||A<0||d&&T>=s}function v(){var w=XR();if(g(w))return _(w);o=setTimeout(v,m(w))}function _(w){return o=void 0,f&&i?h(w):(i=r=void 0,a)}function y(){o!==void 0&&clearTimeout(o),u=0,i=l=r=o=void 0}function b(){return o===void 0?a:_(XR())}function x(){var w=XR(),A=g(w);if(i=arguments,r=this,l=w,A){if(o===void 0)return p(l);if(d)return clearTimeout(o),o=setTimeout(v,e),h(l)}return o===void 0&&(o=setTimeout(v,e)),a}return x.cancel=y,x.flush=b,x}function n6(n,e,t){(t!==void 0&&!oT(n[e],t)||t===void 0&&!(e in n))&&UB(n,e,t)}function Pee(n){return Vd(n)&&lb(n)}function i6(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function jbe(n){return ob(n,uT(n))}function Kbe(n,e,t,i,r,s,a){var o=i6(n,t),l=i6(e,t),u=a.get(l);if(u){n6(n,t,u);return}var c=s?s(o,l,t+"",n,e,a):void 0,d=c===void 0;if(d){var f=el(l),h=!f&&j2(l),p=!f&&!h&&GB(l);c=l,f||h||p?el(o)?c=o:Pee(o)?c=eee(o):h?(d=!1,c=mee(l,!0)):p?(d=!1,c=bee(l,!0)):c=[]:hee(l)||q2(l)?(c=o,q2(o)?c=jbe(o):(!tl(o)||FB(o))&&(c=See(l))):d=!1}d&&(a.set(l,c),r(c,l,i,s,a),a.delete(l)),n6(n,t,c)}function kee(n,e,t,i,r){n!==e&&Ree(e,function(s,a){if(r||(r=new Hc),tl(s))Kbe(n,e,a,t,kee,i,r);else{var o=i?i(i6(n,a),s,a+"",n,e,r):void 0;o===void 0&&(o=s),n6(n,a,o)}},uT)}function Xbe(n,e,t){for(var i=-1,r=n==null?0:n.length;++i<r;)if(t(e,n[i]))return!0;return!1}function Ybe(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var Qbe=Math.max,Zbe=Math.min;function Lee(n,e,t){var i=n==null?0:n.length;if(!i)return-1;var r=i-1;return t!==void 0&&(r=Bge(t),r=t<0?Qbe(i+r,0):Zbe(r,i-1)),nee(n,Dee(e),r,!0)}function Jbe(n,e){var t=-1,i=lb(n)?Array(n.length):[];return Vbe(n,function(r,s,a){i[++t]=e(r,s,a)}),i}function eSe(n,e){var t=el(n)?NB:Jbe;return t(n,Dee(e))}function tSe(n,e){return cT(eSe(n,e),1)}var nSe=1/0;function iSe(n){var e=n==null?0:n.length;return e?cT(n,nSe):[]}function Z2(n){for(var e=-1,t=n==null?0:n.length,i={};++e<t;){var r=n[e];i[r[0]]=r[1]}return i}function rSe(n,e){return e.length<2?n:HI(n,f1e(e,0,-1))}function La(n,e){return VI(n,e)}function na(n){return n==null}function Oee(n){return n===void 0}var sSe=Ave(function(n,e,t){kee(n,e,t)});const Nee=sSe;function aSe(n,e){return e=ub(e,n),n=rSe(n,e),n==null||delete n[cb(Ybe(e))]}function oSe(n){return hee(n)?void 0:n}var lSe=1,uSe=2,cSe=4,dSe=dee(function(n,e){var t={};if(n==null)return t;var i=!1;e=NB(e,function(s){return s=ub(s,n),i||(i=s.length>1),s}),ob(n,_ee(n),t),i&&(t=R1(t,lSe|uSe|cSe,oSe));for(var r=e.length;r--;)aSe(t,e[r]);return t});const fSe=dSe;function Bee(n,e,t,i){if(!tl(n))return n;e=ub(e,n);for(var r=-1,s=e.length,a=s-1,o=n;o!=null&&++r<s;){var l=cb(e[r]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=a){var c=o[l];u=i?i(c,l,o):void 0,u===void 0&&(u=tl(c)?c:BI(e[r+1])?[]:{})}zB(o,l,u),o=o[l]}return n}function hSe(n,e,t){for(var i=-1,r=e.length,s={};++i<r;){var a=e[i],o=HI(n,a);t(o,a)&&Bee(s,ub(a,n),o)}return s}function pSe(n,e){return hSe(n,e,function(t,i){return Iee(n,i)})}var mSe=dee(function(n,e){return n==null?{}:pSe(n,e)});const Nc=mSe;function gSe(n,e,t){return n==null?n:Bee(n,e,t)}var vSe="Expected a function";function mg(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(vSe);return tl(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),Rl(n,e,{leading:i,maxWait:e,trailing:r})}var ySe=1/0,_Se=D1&&1/YB(new D1([,-0]))[1]==ySe?function(n){return new D1(n)}:sve;const bSe=_Se;var SSe=200;function xSe(n,e,t){var i=-1,r=_ve,s=n.length,a=!0,o=[],l=o;if(t)a=!1,r=Xbe;else if(s>=SSe){var u=e?null:bSe(n);if(u)return YB(u);a=!1,r=Cee,l=new Q2}else l=e?[]:o;e:for(;++i<s;){var c=n[i],d=e?e(c):c;if(c=t||c!==0?c:0,a&&d===d){for(var f=l.length;f--;)if(l[f]===d)continue e;e&&l.push(d),o.push(c)}else r(l,d,t)||(l!==o&&l.push(d),o.push(c))}return o}var wSe=ree(function(n){return xSe(cT(n,1,Pee,!0))});const YR=wSe,Xi=n=>n===void 0,fr=n=>typeof n=="boolean",yn=n=>typeof n=="number",eu=n=>!n&&n!==0||Bt(n)&&n.length===0||Yn(n)&&!Object.keys(n).length,au=n=>typeof Element>"u"?!1:n instanceof Element,kg=n=>na(n),TSe=n=>un(n)?!Number.isNaN(Number(n)):!1,$I=n=>n===window;var CSe=Object.defineProperty,ASe=Object.defineProperties,ESe=Object.getOwnPropertyDescriptors,rV=Object.getOwnPropertySymbols,MSe=Object.prototype.hasOwnProperty,ISe=Object.prototype.propertyIsEnumerable,sV=(n,e,t)=>e in n?CSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,DSe=(n,e)=>{for(var t in e||(e={}))MSe.call(e,t)&&sV(n,t,e[t]);if(rV)for(var t of rV(e))ISe.call(e,t)&&sV(n,t,e[t]);return n},RSe=(n,e)=>ASe(n,ESe(e));function r6(n,e){var t;const i=Ji();return ya(()=>{i.value=n()},RSe(DSe({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),sb(i)}var aV;const xi=typeof window<"u",PSe=n=>typeof n<"u",s6=n=>typeof n=="function",kSe=n=>typeof n=="string",o_=()=>{},a6=xi&&((aV=window==null?void 0:window.navigator)==null?void 0:aV.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Jp(n){return typeof n=="function"?n():S(n)}function Fee(n,e){function t(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(r).catch(s)})}return t}function LSe(n,e={}){let t,i,r=o_;const s=o=>{clearTimeout(o),r(),r=o_};return o=>{const l=Jp(n),u=Jp(e.maxWait);return t&&s(t),l<=0||u!==void 0&&u<=0?(i&&(s(i),i=null),Promise.resolve(o())):new Promise((c,d)=>{r=e.rejectOnCancel?d:c,u&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,c(o())},u)),t=setTimeout(()=>{i&&s(i),i=null,c(o())},l)})}}function OSe(n,e=!0,t=!0,i=!1){let r=0,s,a=!0,o=o_,l;const u=()=>{s&&(clearTimeout(s),s=void 0,o(),o=o_)};return d=>{const f=Jp(n),h=Date.now()-r,p=()=>l=d();return u(),f<=0?(r=Date.now(),p()):(h>f&&(t||!a)?(r=Date.now(),p()):e&&(l=new Promise((m,g)=>{o=i?g:m,s=setTimeout(()=>{r=Date.now(),a=!0,m(p()),u()},Math.max(0,f-h))})),!t&&!s&&(s=setTimeout(()=>a=!0,f)),a=!1,l)}}function NSe(n){return n}function BSe(n,e){let t,i,r;const s=ae(!0),a=()=>{s.value=!0,r()};St(n,a,{flush:"sync"});const o=s6(e)?e:e.get,l=s6(e)?void 0:e.set,u=E0e((c,d)=>(i=c,r=d,{get(){return s.value&&(t=o(),s.value=!1),i(),t},set(f){l==null||l(f)}}));return Object.isExtensible(u)&&(u.trigger=a),u}function dT(n){return qZ()?(jZ(n),!0):!1}function FSe(n,e=200,t={}){return Fee(LSe(e,t),n)}function USe(n,e=200,t={}){const i=ae(n.value),r=FSe(()=>{i.value=n.value},e,t);return St(n,()=>r()),i}function Uee(n,e=200,t=!1,i=!0,r=!1){return Fee(OSe(e,t,i,r),n)}function QB(n,e=!0){Qn()?Ln(n):e?n():cn(n)}function Lg(n,e,t={}){const{immediate:i=!0}=t,r=ae(!1);let s=null;function a(){s&&(clearTimeout(s),s=null)}function o(){r.value=!1,a()}function l(...u){a(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...u)},Jp(e))}return i&&(r.value=!0,xi&&l()),dT(o),{isPending:sb(r),start:l,stop:o}}function Xo(n){var e;const t=Jp(n);return(e=t==null?void 0:t.$el)!=null?e:t}const x0=xi?window:void 0,zSe=xi?window.document:void 0;function Yi(...n){let e,t,i,r;if(kSe(n[0])||Array.isArray(n[0])?([t,i,r]=n,e=x0):[e,t,i,r]=n,!e)return o_;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],a=()=>{s.forEach(c=>c()),s.length=0},o=(c,d,f,h)=>(c.addEventListener(d,f,h),()=>c.removeEventListener(d,f,h)),l=St(()=>[Xo(e),Jp(r)],([c,d])=>{a(),c&&s.push(...t.flatMap(f=>i.map(h=>o(c,f,h,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),a()};return dT(u),u}let oV=!1;function ZB(n,e,t={}){const{window:i=x0,ignore:r=[],capture:s=!0,detectIframe:a=!1}=t;if(!i)return;a6&&!oV&&(oV=!0,Array.from(i.document.body.children).forEach(f=>f.addEventListener("click",o_)));let o=!0;const l=f=>r.some(h=>{if(typeof h=="string")return Array.from(i.document.querySelectorAll(h)).some(p=>p===f.target||f.composedPath().includes(p));{const p=Xo(h);return p&&(f.target===p||f.composedPath().includes(p))}}),c=[Yi(i,"click",f=>{const h=Xo(n);if(!(!h||h===f.target||f.composedPath().includes(h))){if(f.detail===0&&(o=!l(f)),!o){o=!0;return}e(f)}},{passive:!0,capture:s}),Yi(i,"pointerdown",f=>{const h=Xo(n);h&&(o=!f.composedPath().includes(h)&&!l(f))},{passive:!0}),a&&Yi(i,"blur",f=>{var h;const p=Xo(n);((h=i.document.activeElement)==null?void 0:h.tagName)==="IFRAME"&&!(p!=null&&p.contains(i.document.activeElement))&&e(f)})].filter(Boolean);return()=>c.forEach(f=>f())}function HSe(n={}){var e;const{window:t=x0}=n,i=(e=n.document)!=null?e:t==null?void 0:t.document,r=BSe(()=>null,()=>i==null?void 0:i.activeElement);return t&&(Yi(t,"blur",s=>{s.relatedTarget===null&&r.trigger()},!0),Yi(t,"focus",r.trigger,!0)),r}function zee(n,e=!1){const t=ae(),i=()=>t.value=!!n();return i(),QB(i,e),t}function VSe(n){return JSON.parse(JSON.stringify(n))}const lV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uV="__vueuse_ssr_handlers__";lV[uV]=lV[uV]||{};function $Se(n,e,{window:t=x0,initialValue:i=""}={}){const r=ae(i),s=W(()=>{var a;return Xo(e)||((a=t==null?void 0:t.document)==null?void 0:a.documentElement)});return St([s,()=>Jp(n)],([a,o])=>{var l;if(a&&t){const u=(l=t.getComputedStyle(a).getPropertyValue(o))==null?void 0:l.trim();r.value=u||i}},{immediate:!0}),St(r,a=>{var o;(o=s.value)!=null&&o.style&&s.value.style.setProperty(Jp(n),a)}),r}function GSe({document:n=zSe}={}){if(!n)return ae("visible");const e=ae(n.visibilityState);return Yi(n,"visibilitychange",()=>{e.value=n.visibilityState}),e}var cV=Object.getOwnPropertySymbols,WSe=Object.prototype.hasOwnProperty,qSe=Object.prototype.propertyIsEnumerable,jSe=(n,e)=>{var t={};for(var i in n)WSe.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&cV)for(var i of cV(n))e.indexOf(i)<0&&qSe.call(n,i)&&(t[i]=n[i]);return t};function Br(n,e,t={}){const i=t,{window:r=x0}=i,s=jSe(i,["window"]);let a;const o=zee(()=>r&&"ResizeObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},u=St(()=>Xo(n),d=>{l(),o.value&&r&&d&&(a=new ResizeObserver(e),a.observe(d,s))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return dT(c),{isSupported:o,stop:c}}function dV(n,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:r=!0,immediate:s=!0}=e,a=ae(0),o=ae(0),l=ae(0),u=ae(0),c=ae(0),d=ae(0),f=ae(0),h=ae(0);function p(){const m=Xo(n);if(!m){t&&(a.value=0,o.value=0,l.value=0,u.value=0,c.value=0,d.value=0,f.value=0,h.value=0);return}const g=m.getBoundingClientRect();a.value=g.height,o.value=g.bottom,l.value=g.left,u.value=g.right,c.value=g.top,d.value=g.width,f.value=g.x,h.value=g.y}return Br(n,p),St(()=>Xo(n),m=>!m&&p()),r&&Yi("scroll",p,{capture:!0,passive:!0}),i&&Yi("resize",p,{passive:!0}),QB(()=>{s&&p()}),{height:a,bottom:o,left:l,right:u,top:c,width:d,x:f,y:h,update:p}}var fV=Object.getOwnPropertySymbols,KSe=Object.prototype.hasOwnProperty,XSe=Object.prototype.propertyIsEnumerable,YSe=(n,e)=>{var t={};for(var i in n)KSe.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&fV)for(var i of fV(n))e.indexOf(i)<0&&XSe.call(n,i)&&(t[i]=n[i]);return t};function Hee(n,e,t={}){const i=t,{window:r=x0}=i,s=YSe(i,["window"]);let a;const o=zee(()=>r&&"MutationObserver"in r),l=()=>{a&&(a.disconnect(),a=void 0)},u=St(()=>Xo(n),d=>{l(),o.value&&r&&d&&(a=new MutationObserver(e),a.observe(d,s))},{immediate:!0}),c=()=>{l(),u()};return dT(c),{isSupported:o,stop:c}}var hV;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(hV||(hV={}));var QSe=Object.defineProperty,pV=Object.getOwnPropertySymbols,ZSe=Object.prototype.hasOwnProperty,JSe=Object.prototype.propertyIsEnumerable,mV=(n,e,t)=>e in n?QSe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,exe=(n,e)=>{for(var t in e||(e={}))ZSe.call(e,t)&&mV(n,t,e[t]);if(pV)for(var t of pV(e))JSe.call(e,t)&&mV(n,t,e[t]);return n};const txe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};exe({linear:NSe},txe);function Vee(n,e,t,i={}){var r,s,a;const{clone:o=!1,passive:l=!1,eventName:u,deep:c=!1,defaultValue:d}=i,f=Qn(),h=t||(f==null?void 0:f.emit)||((r=f==null?void 0:f.$emit)==null?void 0:r.bind(f))||((a=(s=f==null?void 0:f.proxy)==null?void 0:s.$emit)==null?void 0:a.bind(f==null?void 0:f.proxy));let p=u;e||(e="modelValue"),p=u||p||`update:${e.toString()}`;const m=v=>o?s6(o)?o(v):VSe(v):v,g=()=>PSe(n[e])?m(n[e]):d;if(l){const v=g(),_=ae(v);return St(()=>n[e],y=>_.value=m(y)),St(_,y=>{(y!==n[e]||c)&&h(p,y)},{deep:c}),_}else return W({get(){return g()},set(v){h(p,v)}})}function nxe({window:n=x0}={}){if(!n)return ae(!1);const e=ae(n.document.hasFocus());return Yi(n,"blur",()=>{e.value=!1}),Yi(n,"focus",()=>{e.value=!0}),e}function ixe(n={}){const{window:e=x0,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:r=!0,includeScrollbar:s=!0}=n,a=ae(t),o=ae(i),l=()=>{e&&(s?(a.value=e.innerWidth,o.value=e.innerHeight):(a.value=e.document.documentElement.clientWidth,o.value=e.document.documentElement.clientHeight))};return l(),QB(l),Yi("resize",l,{passive:!0}),r&&Yi("orientationchange",l,{passive:!0}),{width:a,height:o}}class rxe extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Xs(n,e){throw new rxe(`[${n}] ${e}`)}const gV={current:0},vV=ae(0),$ee=2e3,yV=Symbol("elZIndexContextKey"),Gee=Symbol("zIndexContextKey"),db=n=>{const e=Qn()?Zt(yV,gV):gV,t=n||(Qn()?Zt(Gee,void 0):void 0),i=W(()=>{const a=S(t);return yn(a)?a:$ee}),r=W(()=>i.value+vV.value),s=()=>(e.current++,vV.value=e.current,r.value);return!xi&&Zt(yV),{initialZIndex:i,currentZIndex:r,nextZIndex:s}};var sxe={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const axe=n=>(e,t)=>oxe(e,t,S(n)),oxe=(n,e,t)=>vs(t,n,n).replace(/\{(\w+)\}/g,(i,r)=>{var s;return`${(s=e==null?void 0:e[r])!=null?s:`{${r}}`}`}),lxe=n=>{const e=W(()=>S(n).name),t=br(n)?n:ae(n);return{lang:e,locale:t,t:axe(n)}},Wee=Symbol("localeContextKey"),wi=n=>{const e=n||Zt(Wee,ae());return lxe(W(()=>e.value||sxe))},qee="__epPropKey",et=n=>n,uxe=n=>Yn(n)&&!!n[qee],Xc=(n,e)=>{if(!Yn(n)||uxe(n))return n;const{values:t,required:i,default:r,type:s,validator:a}=n,l={type:s,required:!!i,validator:t||a?u=>{let c=!1,d=[];if(t&&(d=Array.from(t),Ai(n,"default")&&d.push(r),c||(c=d.includes(u))),a&&(c||(c=a(u))),!c&&d.length>0){const f=[...new Set(d)].map(h=>JSON.stringify(h)).join(", ");P0e(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${f}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[qee]:!0};return Ai(n,"default")&&(l.default=r),l},zt=n=>Z2(Object.entries(n).map(([e,t])=>[e,Xc(t,e)])),tf=["","default","small","large"],ks=Xc({type:String,values:tf,required:!1}),jee=Symbol("size"),Kee=()=>{const n=Zt(jee,{});return W(()=>S(n.size)||"")},Xee=Symbol("emptyValuesContextKey"),cxe=["",void 0,null],dxe=void 0,fb=zt({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:n=>pn(n)?!n():!n}}),GI=(n,e)=>{const t=Qn()?Zt(Xee,ae({})):ae({}),i=W(()=>n.emptyValues||t.value.emptyValues||cxe),r=W(()=>pn(n.valueOnClear)?n.valueOnClear():n.valueOnClear!==void 0?n.valueOnClear:pn(t.value.valueOnClear)?t.value.valueOnClear():t.value.valueOnClear!==void 0?t.value.valueOnClear:e!==void 0?e:dxe),s=a=>i.value.includes(a);return i.value.includes(r.value),{emptyValues:i,valueOnClear:r,isEmptyValue:s}},l_=n=>Object.keys(n),Yee=n=>Object.entries(n),pM=(n,e,t)=>({get value(){return vs(n,e,t)},set value(i){gSe(n,e,i)}}),T3=ae();function WI(n,e=void 0){const t=Qn()?Zt(XJ,T3):T3;return n?W(()=>{var i,r;return(r=(i=t.value)==null?void 0:i[n])!=null?r:e}):t}function qI(n,e){const t=WI(),i=Rt(n,W(()=>{var o;return((o=t.value)==null?void 0:o.namespace)||qx})),r=wi(W(()=>{var o;return(o=t.value)==null?void 0:o.locale})),s=db(W(()=>{var o;return((o=t.value)==null?void 0:o.zIndex)||$ee})),a=W(()=>{var o;return S(e)||((o=t.value)==null?void 0:o.size)||""});return JB(W(()=>S(t)||{})),{ns:i,locale:r,zIndex:s,size:a}}const JB=(n,e,t=!1)=>{var i;const r=!!Qn(),s=r?WI():void 0,a=(i=e==null?void 0:e.provide)!=null?i:r?ui:void 0;if(!a)return;const o=W(()=>{const l=S(n);return s!=null&&s.value?fxe(s.value,l):l});return a(XJ,o),a(Wee,W(()=>o.value.locale)),a(YJ,W(()=>o.value.namespace)),a(Gee,W(()=>o.value.zIndex)),a(jee,{size:W(()=>o.value.size||"")}),a(Xee,W(()=>({emptyValues:o.value.emptyValues,valueOnClear:o.value.valueOnClear}))),(t||!T3.value)&&(T3.value=o.value),o},fxe=(n,e)=>{const t=[...new Set([...l_(n),...l_(e)])],i={};for(const r of t)i[r]=e[r]!==void 0?e[r]:n[r];return i},hxe=(n=[])=>({version:cge,install:(t,i)=>{t[AH]||(t[AH]=!0,n.forEach(r=>t.use(r)),i&&JB(i,t,!0))}}),$n="update:modelValue",er="change",Qa="input",pxe=zt({zIndex:{type:et([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),mxe={scroll:({scrollTop:n,fixed:e})=>yn(n)&&fr(e),[er]:n=>fr(n)};var Vt=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};function gxe(n,e,t,i){const r=t-e;return n/=i/2,n<1?r/2*n*n*n+e:r/2*((n-=2)*n*n+2)+e}const e0=n=>xi?window.requestAnimationFrame(n):setTimeout(n,16),Og=n=>xi?window.cancelAnimationFrame(n):clearTimeout(n),Qee=(n="")=>n.split(" ").filter(e=>!!e.trim()),bl=(n,e)=>{if(!n||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return n.classList.contains(e)},$u=(n,e)=>{!n||!e.trim()||n.classList.add(...Qee(e))},To=(n,e)=>{!n||!e.trim()||n.classList.remove(...Qee(e))},Uf=(n,e)=>{var t;if(!xi||!n||!e)return"";let i=fu(e);i==="float"&&(i="cssFloat");try{const r=n.style[i];if(r)return r;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(n,"");return s?s[i]:""}catch{return n.style[i]}},Zee=(n,e,t)=>{if(!(!n||!e))if(Yn(e))Yee(e).forEach(([i,r])=>Zee(n,i,r));else{const i=fu(e);n.style[i]=t}};function ns(n,e="px"){if(!n)return"";if(yn(n)||TSe(n))return`${n}${e}`;if(un(n))return n}const vxe=(n,e)=>{if(!xi)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Uf(n,t);return["scroll","auto","overlay"].some(r=>i.includes(r))},eF=(n,e)=>{if(!xi)return;let t=n;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(vxe(t,e))return t;t=t.parentNode}return t};let HC;const Jee=n=>{var e;if(!xi)return 0;if(HC!==void 0)return HC;const t=document.createElement("div");t.className=`${n}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const s=r.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),HC=i-s,HC};function tF(n,e){if(!xi)return;if(!e){n.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&n!==i&&n.contains(i);)t.push(i),i=i.offsetParent;const r=e.offsetTop+t.reduce((l,u)=>l+u.offsetTop,0),s=r+e.offsetHeight,a=n.scrollTop,o=a+n.clientHeight;r<a?n.scrollTop=r:s>o&&(n.scrollTop=s-n.clientHeight)}function yxe(n,e,t,i,r){const s=Date.now();let a;const o=()=>{const u=Date.now()-s,c=gxe(u>i?i:u,e,t,i);$I(n)?n.scrollTo(window.pageXOffset,c):n.scrollTop=c,u<i?a=e0(o):pn(r)&&r()};return o(),()=>{a&&Og(a)}}const _V=(n,e)=>$I(e)?n.ownerDocument.documentElement:e,bV=n=>$I(n)?window.scrollY:n.scrollTop,ete="ElAffix",_xe=Ne({name:ete}),bxe=Ne({..._xe,props:pxe,emits:mxe,setup(n,{expose:e,emit:t}){const i=n,r=Rt("affix"),s=Ji(),a=Ji(),o=Ji(),{height:l}=ixe(),{height:u,width:c,top:d,bottom:f,update:h}=dV(a,{windowScroll:!1}),p=dV(s),m=ae(!1),g=ae(0),v=ae(0),_=W(()=>({height:m.value?`${u.value}px`:"",width:m.value?`${c.value}px`:""})),y=W(()=>{if(!m.value)return{};const w=i.offset?ns(i.offset):0;return{height:`${u.value}px`,width:`${c.value}px`,top:i.position==="top"?w:"",bottom:i.position==="bottom"?w:"",transform:v.value?`translateY(${v.value}px)`:"",zIndex:i.zIndex}}),b=()=>{if(!o.value)return;g.value=o.value instanceof Window?document.documentElement.scrollTop:o.value.scrollTop||0;const{position:w,target:A,offset:T}=i,C=T+u.value;if(w==="top")if(A){const E=p.bottom.value-C;m.value=T>d.value&&p.bottom.value>0,v.value=E<0?E:0}else m.value=T>d.value;else if(A){const E=l.value-p.top.value-C;m.value=l.value-T<f.value&&l.value>p.top.value,v.value=E<0?-E:0}else m.value=l.value-T<f.value},x=()=>{h(),t("scroll",{scrollTop:g.value,fixed:m.value})};return St(m,w=>t("change",w)),Ln(()=>{var w;i.target?(s.value=(w=document.querySelector(i.target))!=null?w:void 0,s.value||Xs(ete,`Target does not exist: ${i.target}`)):s.value=document.documentElement,o.value=eF(a.value,!0),h()}),Yi(o,"scroll",x),ya(b),e({update:b,updateRoot:h}),(w,A)=>(j(),_e("div",{ref_key:"root",ref:a,class:ee(S(r).b()),style:Jt(S(_))},[Te("div",{class:ee({[S(r).m("fixed")]:m.value}),style:Jt(S(y))},[at(w.$slots,"default")],6)],6))}});var Sxe=Vt(bxe,[["__file","affix.vue"]]);const Nn=(n,e)=>{if(n.install=t=>{for(const i of[n,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))n[t]=i;return n},tte=(n,e)=>(n.install=t=>{n._context=t._context,t.config.globalProperties[e]=n},n),xxe=(n,e)=>(n.install=t=>{t.directive(e,n)},n),Xr=n=>(n.install=qi,n),wxe=Nn(Sxe),Txe=zt({size:{type:et([Number,String])},color:{type:String}}),Cxe=Ne({name:"ElIcon",inheritAttrs:!1}),Axe=Ne({...Cxe,props:Txe,setup(n){const e=n,t=Rt("icon"),i=W(()=>{const{size:r,color:s}=e;return!r&&!s?{}:{fontSize:Xi(r)?void 0:ns(r),"--color":s}});return(r,s)=>(j(),_e("i",si({class:S(t).b(),style:S(i)},r.$attrs),[at(r.$slots,"default")],16))}});var Exe=Vt(Axe,[["__file","icon.vue"]]);const rn=Nn(Exe);/*! Element Plus Icons Vue v2.3.1 */var Mxe=Ne({name:"ArrowDown",__name:"arrow-down",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"})]))}}),Sh=Mxe,Ixe=Ne({name:"ArrowLeft",__name:"arrow-left",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"})]))}}),t0=Ixe,Dxe=Ne({name:"ArrowRight",__name:"arrow-right",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),Qo=Dxe,Rxe=Ne({name:"ArrowUp",__name:"arrow-up",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),nF=Rxe,Pxe=Ne({name:"Back",__name:"back",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64"}),Te("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312z"})]))}}),kxe=Pxe,Lxe=Ne({name:"Calendar",__name:"calendar",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),Oxe=Lxe,Nxe=Ne({name:"CaretRight",__name:"caret-right",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"})]))}}),nte=Nxe,Bxe=Ne({name:"CaretTop",__name:"caret-top",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"})]))}}),Fxe=Bxe,Uxe=Ne({name:"Check",__name:"check",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),fT=Uxe,zxe=Ne({name:"CircleCheckFilled",__name:"circle-check-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),Hxe=zxe,Vxe=Ne({name:"CircleCheck",__name:"circle-check",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),Te("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"})]))}}),iF=Vxe,$xe=Ne({name:"CircleCloseFilled",__name:"circle-close-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),rF=$xe,Gxe=Ne({name:"CircleClose",__name:"circle-close",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),Te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),xh=Gxe,Wxe=Ne({name:"Clock",__name:"clock",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),Te("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),Te("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),ite=Wxe,qxe=Ne({name:"Close",__name:"close",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),qc=qxe,jxe=Ne({name:"DArrowLeft",__name:"d-arrow-left",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"})]))}}),n0=jxe,Kxe=Ne({name:"DArrowRight",__name:"d-arrow-right",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"})]))}}),i0=Kxe,Xxe=Ne({name:"DataAnalysis",__name:"data-analysis",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m665.216 768 110.848 192h-73.856L591.36 768H433.024L322.176 960H248.32l110.848-192H160a32 32 0 0 1-32-32V192H64a32 32 0 0 1 0-64h896a32 32 0 1 1 0 64h-64v544a32 32 0 0 1-32 32zM832 192H192v512h640zM352 448a32 32 0 0 1 32 32v64a32 32 0 0 1-64 0v-64a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v128a32 32 0 0 1-64 0V416a32 32 0 0 1 32-32m160-64a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V352a32 32 0 0 1 32-32"})]))}}),Yxe=Xxe,Qxe=Ne({name:"Delete",__name:"delete",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32zm448-64v-64H416v64zM224 896h576V256H224zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32m192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32"})]))}}),Zxe=Qxe,Jxe=Ne({name:"Document",__name:"document",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640zm-26.496-64L640 154.496V320zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32m160 448h384v64H320zm0-192h160v64H320zm0 384h384v64H320z"})]))}}),o6=Jxe,e2e=Ne({name:"Files",__name:"files",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M128 384v448h768V384zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32m64-128h704v64H160zm96-128h512v64H256z"})]))}}),t2e=e2e,n2e=Ne({name:"Film",__name:"film",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),Te("path",{fill:"currentColor",d:"M320 288V128h64v352h256V128h64v160h160v64H704v128h160v64H704v128h160v64H704v160h-64V544H384v352h-64V736H128v-64h192V544H128v-64h192V352H128v-64z"})]))}}),SV=n2e,i2e=Ne({name:"FullScreen",__name:"full-screen",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64z"})]))}}),r2e=i2e,s2e=Ne({name:"Hide",__name:"hide",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"}),Te("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"})]))}}),a2e=s2e,o2e=Ne({name:"HomeFilled",__name:"home-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 128 128 447.936V896h255.936V640H640v256h255.936V447.936z"})]))}}),l2e=o2e,u2e=Ne({name:"InfoFilled",__name:"info-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),sF=u2e,c2e=Ne({name:"Loading",__name:"loading",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"})]))}}),$d=c2e,d2e=Ne({name:"MagicStick",__name:"magic-stick",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64h64v192h-64zm0 576h64v192h-64zM160 480v-64h192v64zm576 0v-64h192v64zM249.856 199.04l45.248-45.184L430.848 289.6 385.6 334.848 249.856 199.104zM657.152 606.4l45.248-45.248 135.744 135.744-45.248 45.248zM114.048 923.2 68.8 877.952l316.8-316.8 45.248 45.248zM702.4 334.848 657.152 289.6l135.744-135.744 45.248 45.248z"})]))}}),f2e=d2e,h2e=Ne({name:"Minus",__name:"minus",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),p2e=h2e,m2e=Ne({name:"MoreFilled",__name:"more-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224m336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224"})]))}}),xV=m2e,g2e=Ne({name:"More",__name:"more",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96m336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224m0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96"})]))}}),v2e=g2e,y2e=Ne({name:"PictureFilled",__name:"picture-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112M256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384"})]))}}),_2e=y2e,b2e=Ne({name:"Picture",__name:"picture",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M160 160v704h704V160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32"}),Te("path",{fill:"currentColor",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64M185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952z"})]))}}),S2e=b2e,x2e=Ne({name:"Plus",__name:"plus",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),rte=x2e,w2e=Ne({name:"QuestionFilled",__name:"question-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"})]))}}),T2e=w2e,C2e=Ne({name:"RefreshLeft",__name:"refresh-left",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"})]))}}),A2e=C2e,E2e=Ne({name:"RefreshRight",__name:"refresh-right",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})]))}}),M2e=E2e,I2e=Ne({name:"ScaleToOriginal",__name:"scale-to-original",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118M512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412M512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512"})]))}}),D2e=I2e,R2e=Ne({name:"Search",__name:"search",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),P2e=R2e,k2e=Ne({name:"SortDown",__name:"sort-down",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0"})]))}}),L2e=k2e,O2e=Ne({name:"SortUp",__name:"sort-up",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248"})]))}}),N2e=O2e,B2e=Ne({name:"StarFilled",__name:"star-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"})]))}}),VC=B2e,F2e=Ne({name:"Star",__name:"star",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"})]))}}),U2e=F2e,z2e=Ne({name:"SuccessFilled",__name:"success-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),aF=z2e,H2e=Ne({name:"View",__name:"view",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),V2e=H2e,$2e=Ne({name:"WarningFilled",__name:"warning-filled",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),jI=$2e,G2e=Ne({name:"ZoomIn",__name:"zoom-in",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704m-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64z"})]))}}),ste=G2e,W2e=Ne({name:"ZoomOut",__name:"zoom-out",setup(n){return(e,t)=>(j(),_e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[Te("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704M352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64"})]))}}),q2e=W2e;const nr=et([String,Object,Function]),oF={Close:qc},lF={Close:qc,SuccessFilled:aF,InfoFilled:sF,WarningFilled:jI,CircleCloseFilled:rF},r0={success:aF,warning:jI,error:rF,info:sF},KI={validating:$d,success:iF,error:xh},j2e=["light","dark"],K2e=zt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:l_(r0),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:j2e,default:"light"}}),X2e={close:n=>n instanceof MouseEvent},Y2e=Ne({name:"ElAlert"}),Q2e=Ne({...Y2e,props:K2e,emits:X2e,setup(n,{emit:e}){const t=n,{Close:i}=lF,r=Ls(),s=Rt("alert"),a=ae(!0),o=W(()=>r0[t.type]),l=W(()=>!!(t.description||r.default)),u=c=>{a.value=!1,e("close",c)};return(c,d)=>(j(),gt(Ks,{name:S(s).b("fade"),persisted:""},{default:Ae(()=>[Vn(Te("div",{class:ee([S(s).b(),S(s).m(c.type),S(s).is("center",c.center),S(s).is(c.effect)]),role:"alert"},[c.showIcon&&S(o)?(j(),gt(S(rn),{key:0,class:ee([S(s).e("icon"),{[S(s).is("big")]:S(l)}])},{default:Ae(()=>[(j(),gt(ei(S(o))))]),_:1},8,["class"])):ot("v-if",!0),Te("div",{class:ee(S(s).e("content"))},[c.title||c.$slots.title?(j(),_e("span",{key:0,class:ee([S(s).e("title"),{"with-description":S(l)}])},[at(c.$slots,"title",{},()=>[An(Lt(c.title),1)])],2)):ot("v-if",!0),S(l)?(j(),_e("p",{key:1,class:ee(S(s).e("description"))},[at(c.$slots,"default",{},()=>[An(Lt(c.description),1)])],2)):ot("v-if",!0),c.closable?(j(),_e(an,{key:2},[c.closeText?(j(),_e("div",{key:0,class:ee([S(s).e("close-btn"),S(s).is("customed")]),onClick:u},Lt(c.closeText),3)):(j(),gt(S(rn),{key:1,class:ee(S(s).e("close-btn")),onClick:u},{default:Ae(()=>[he(S(i))]),_:1},8,["class"]))],64)):ot("v-if",!0)],2)],2),[[Oi,a.value]])]),_:3},8,["name"]))}});var Z2e=Vt(Q2e,[["__file","alert.vue"]]);const J2e=Nn(Z2e),XI=()=>xi&&/firefox/i.test(window.navigator.userAgent);let yc;const ewe=`
  height:0 !important;
  visibility:hidden !important;
  ${XI()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,twe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function nwe(n){const e=window.getComputedStyle(n),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),r=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:twe.map(a=>`${a}:${e.getPropertyValue(a)}`).join(";"),paddingSize:i,borderSize:r,boxSizing:t}}function wV(n,e=1,t){var i;yc||(yc=document.createElement("textarea"),document.body.appendChild(yc));const{paddingSize:r,borderSize:s,boxSizing:a,contextStyle:o}=nwe(n);yc.setAttribute("style",`${o};${ewe}`),yc.value=n.value||n.placeholder||"";let l=yc.scrollHeight;const u={};a==="border-box"?l=l+s:a==="content-box"&&(l=l-r),yc.value="";const c=yc.scrollHeight-r;if(yn(e)){let d=c*e;a==="border-box"&&(d=d+r+s),l=Math.max(d,l),u.minHeight=`${d}px`}if(yn(t)){let d=c*t;a==="border-box"&&(d=d+r+s),l=Math.min(d,l)}return u.height=`${l}px`,(i=yc.parentNode)==null||i.removeChild(yc),yc=void 0,u}const Kr=n=>n,iwe=zt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Ba=n=>Nc(iwe,n),uF=zt({id:{type:String,default:void 0},size:ks,disabled:Boolean,modelValue:{type:et([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:et([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:nr},prefixIcon:{type:nr},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:et([Object,Array,String]),default:()=>Kr({})},autofocus:Boolean,rows:{type:Number,default:2},...Ba(["ariaLabel"])}),rwe={[$n]:n=>un(n),input:n=>un(n),change:n=>un(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,mouseleave:n=>n instanceof MouseEvent,mouseenter:n=>n instanceof MouseEvent,keydown:n=>n instanceof Event,compositionstart:n=>n instanceof CompositionEvent,compositionupdate:n=>n instanceof CompositionEvent,compositionend:n=>n instanceof CompositionEvent},swe=["class","style"],awe=/^on[A-Z]/,hT=(n={})=>{const{excludeListeners:e=!1,excludeKeys:t}=n,i=W(()=>((t==null?void 0:t.value)||[]).concat(swe)),r=Qn();return W(r?()=>{var s;return Z2(Object.entries((s=r.proxy)==null?void 0:s.$attrs).filter(([a])=>!i.value.includes(a)&&!(e&&awe.test(a))))}:()=>({}))},iv=Symbol("formContextKey"),Gd=Symbol("formItemContextKey"),TV={prefix:Math.floor(Math.random()*1e4),current:0},owe=Symbol("elIdInjection"),cF=()=>Qn()?Zt(owe,TV):TV,Oa=n=>{const e=cF(),t=OB();return r6(()=>S(n)||`${t.value}-id-${e.prefix}-${e.current++}`)},to=()=>{const n=Zt(iv,void 0),e=Zt(Gd,void 0);return{form:n,formItem:e}},hc=(n,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=ae(!1)),i||(i=ae(!1));const r=ae();let s;const a=W(()=>{var o;return!!(!(n.label||n.ariaLabel)&&e&&e.inputIds&&((o=e.inputIds)==null?void 0:o.length)<=1)});return Ln(()=>{s=St([$i(n,"id"),t],([o,l])=>{const u=o??(l?void 0:Oa().value);u!==r.value&&(e!=null&&e.removeInputId&&(r.value&&e.removeInputId(r.value),!(i!=null&&i.value)&&!l&&u&&e.addInputId(u)),r.value=u)},{immediate:!0})}),yh(()=>{s&&s(),e!=null&&e.removeInputId&&r.value&&e.removeInputId(r.value)}),{isLabeledByFormItem:a,inputId:r}},ate=n=>{const e=Qn();return W(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[n]})},ws=(n,e={})=>{const t=ae(void 0),i=e.prop?t:ate("size"),r=e.global?t:Kee(),s=e.form?{size:void 0}:Zt(iv,void 0),a=e.formItem?{size:void 0}:Zt(Gd,void 0);return W(()=>i.value||S(n)||(a==null?void 0:a.size)||(s==null?void 0:s.size)||r.value||"")},no=n=>{const e=ate("disabled"),t=Zt(iv,void 0);return W(()=>e.value||S(n)||(t==null?void 0:t.disabled)||!1)};function w0(n,{beforeFocus:e,afterFocus:t,beforeBlur:i,afterBlur:r}={}){const s=Qn(),{emit:a}=s,o=Ji(),l=ae(!1),u=f=>{pn(e)&&e(f)||l.value||(l.value=!0,a("focus",f),t==null||t())},c=f=>{var h;pn(i)&&i(f)||f.relatedTarget&&((h=o.value)!=null&&h.contains(f.relatedTarget))||(l.value=!1,a("blur",f),r==null||r())},d=()=>{var f,h;(f=o.value)!=null&&f.contains(document.activeElement)&&o.value!==document.activeElement||(h=n.value)==null||h.focus()};return St(o,f=>{f&&f.setAttribute("tabindex","-1")}),Yi(o,"focus",u,!0),Yi(o,"blur",c,!0),Yi(o,"click",d,!0),{isFocused:l,wrapperRef:o,handleFocus:u,handleBlur:c}}const lwe=n=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(n);function pT({afterComposition:n,emit:e}){const t=ae(!1),i=o=>{e==null||e("compositionstart",o),t.value=!0},r=o=>{var l;e==null||e("compositionupdate",o);const u=(l=o.target)==null?void 0:l.value,c=u[u.length-1]||"";t.value=!lwe(c)},s=o=>{e==null||e("compositionend",o),t.value&&(t.value=!1,cn(()=>n(o)))};return{isComposing:t,handleComposition:o=>{o.type==="compositionend"?s(o):r(o)},handleCompositionStart:i,handleCompositionUpdate:r,handleCompositionEnd:s}}function uwe(n){let e;function t(){if(n.value==null)return;const{selectionStart:r,selectionEnd:s,value:a}=n.value;if(r==null||s==null)return;const o=a.slice(0,Math.max(0,r)),l=a.slice(Math.max(0,s));e={selectionStart:r,selectionEnd:s,value:a,beforeTxt:o,afterTxt:l}}function i(){if(n.value==null||e==null)return;const{value:r}=n.value,{beforeTxt:s,afterTxt:a,selectionStart:o}=e;if(s==null||a==null||o==null)return;let l=r.length;if(r.endsWith(a))l=r.length-a.length;else if(r.startsWith(s))l=s.length;else{const u=s[o-1],c=r.indexOf(u,o-1);c!==-1&&(l=c+1)}n.value.setSelectionRange(l,l)}return[t,i]}const cwe=Ne({name:"ElInput",inheritAttrs:!1}),dwe=Ne({...cwe,props:uF,emits:rwe,setup(n,{expose:e,emit:t}){const i=n,r=S0(),s=hT(),a=Ls(),o=W(()=>[i.type==="textarea"?m.b():p.b(),p.m(f.value),p.is("disabled",h.value),p.is("exceed",re.value),{[p.b("group")]:a.prepend||a.append,[p.m("prefix")]:a.prefix||i.prefixIcon,[p.m("suffix")]:a.suffix||i.suffixIcon||i.clearable||i.showPassword,[p.bm("suffix","password-clear")]:H.value&&F.value,[p.b("hidden")]:i.type==="hidden"},r.class]),l=W(()=>[p.e("wrapper"),p.is("focus",T.value)]),{form:u,formItem:c}=to(),{inputId:d}=hc(i,{formItemContext:c}),f=ws(),h=no(),p=Rt("input"),m=Rt("textarea"),g=Ji(),v=Ji(),_=ae(!1),y=ae(!1),b=ae(),x=Ji(i.inputStyle),w=W(()=>g.value||v.value),{wrapperRef:A,isFocused:T,handleFocus:C,handleBlur:E}=w0(w,{beforeFocus(){return h.value},afterBlur(){var Se;i.validateEvent&&((Se=c==null?void 0:c.validate)==null||Se.call(c,"blur").catch(ze=>void 0))}}),I=W(()=>{var Se;return(Se=u==null?void 0:u.statusIcon)!=null?Se:!1}),k=W(()=>(c==null?void 0:c.validateState)||""),O=W(()=>k.value&&KI[k.value]),U=W(()=>y.value?V2e:a2e),z=W(()=>[r.style]),L=W(()=>[i.inputStyle,x.value,{resize:i.resize}]),G=W(()=>na(i.modelValue)?"":String(i.modelValue)),H=W(()=>i.clearable&&!h.value&&!i.readonly&&!!G.value&&(T.value||_.value)),F=W(()=>i.showPassword&&!h.value&&!!G.value&&(!!G.value||T.value)),X=W(()=>i.showWordLimit&&!!i.maxlength&&(i.type==="text"||i.type==="textarea")&&!h.value&&!i.readonly&&!i.showPassword),te=W(()=>G.value.length),re=W(()=>!!X.value&&te.value>Number(i.maxlength)),ie=W(()=>!!a.suffix||!!i.suffixIcon||H.value||i.showPassword||X.value||!!k.value&&I.value),[le,ge]=uwe(g);Br(v,Se=>{if(Oe(),!X.value||i.resize!=="both")return;const ze=Se[0],{width:Je}=ze.contentRect;b.value={right:`calc(100% - ${Je+15+6}px)`}});const pe=()=>{const{type:Se,autosize:ze}=i;if(!(!xi||Se!=="textarea"||!v.value))if(ze){const Je=Yn(ze)?ze.minRows:void 0,Tt=Yn(ze)?ze.maxRows:void 0,At=wV(v.value,Je,Tt);x.value={overflowY:"hidden",...At},cn(()=>{v.value.offsetHeight,x.value=At})}else x.value={minHeight:wV(v.value).minHeight}},Oe=(Se=>{let ze=!1;return()=>{var Je;if(ze||!i.autosize)return;((Je=v.value)==null?void 0:Je.offsetParent)===null||(Se(),ze=!0)}})(pe),Be=()=>{const Se=w.value,ze=i.formatter?i.formatter(G.value):G.value;!Se||Se.value===ze||(Se.value=ze)},Ye=async Se=>{le();let{value:ze}=Se.target;if(i.formatter&&(ze=i.parser?i.parser(ze):ze),!Q.value){if(ze===G.value){Be();return}t($n,ze),t("input",ze),await cn(),Be(),ge()}},Ze=Se=>{t("change",Se.target.value)},{isComposing:Q,handleCompositionStart:me,handleCompositionUpdate:ce,handleCompositionEnd:je}=pT({emit:t,afterComposition:Ye}),Fe=()=>{le(),y.value=!y.value,setTimeout(ge)},nt=()=>{var Se;return(Se=w.value)==null?void 0:Se.focus()},We=()=>{var Se;return(Se=w.value)==null?void 0:Se.blur()},Ke=Se=>{_.value=!1,t("mouseleave",Se)},it=Se=>{_.value=!0,t("mouseenter",Se)},be=Se=>{t("keydown",Se)},K=()=>{var Se;(Se=w.value)==null||Se.select()},ne=()=>{t($n,""),t("change",""),t("clear"),t("input","")};return St(()=>i.modelValue,()=>{var Se;cn(()=>pe()),i.validateEvent&&((Se=c==null?void 0:c.validate)==null||Se.call(c,"change").catch(ze=>void 0))}),St(G,()=>Be()),St(()=>i.type,async()=>{await cn(),Be(),pe()}),Ln(()=>{!i.formatter&&i.parser,Be(),cn(pe)}),e({input:g,textarea:v,ref:w,textareaStyle:L,autosize:$i(i,"autosize"),isComposing:Q,focus:nt,blur:We,select:K,clear:ne,resizeTextarea:pe}),(Se,ze)=>(j(),_e("div",{class:ee([S(o),{[S(p).bm("group","append")]:Se.$slots.append,[S(p).bm("group","prepend")]:Se.$slots.prepend}]),style:Jt(S(z)),onMouseenter:it,onMouseleave:Ke},[ot(" input "),Se.type!=="textarea"?(j(),_e(an,{key:0},[ot(" prepend slot "),Se.$slots.prepend?(j(),_e("div",{key:0,class:ee(S(p).be("group","prepend"))},[at(Se.$slots,"prepend")],2)):ot("v-if",!0),Te("div",{ref_key:"wrapperRef",ref:A,class:ee(S(l))},[ot(" prefix slot "),Se.$slots.prefix||Se.prefixIcon?(j(),_e("span",{key:0,class:ee(S(p).e("prefix"))},[Te("span",{class:ee(S(p).e("prefix-inner"))},[at(Se.$slots,"prefix"),Se.prefixIcon?(j(),gt(S(rn),{key:0,class:ee(S(p).e("icon"))},{default:Ae(()=>[(j(),gt(ei(Se.prefixIcon)))]),_:1},8,["class"])):ot("v-if",!0)],2)],2)):ot("v-if",!0),Te("input",si({id:S(d),ref_key:"input",ref:g,class:S(p).e("inner")},S(s),{minlength:Se.minlength,maxlength:Se.maxlength,type:Se.showPassword?y.value?"text":"password":Se.type,disabled:S(h),readonly:Se.readonly,autocomplete:Se.autocomplete,tabindex:Se.tabindex,"aria-label":Se.ariaLabel,placeholder:Se.placeholder,style:Se.inputStyle,form:Se.form,autofocus:Se.autofocus,role:Se.containerRole,onCompositionstart:S(me),onCompositionupdate:S(ce),onCompositionend:S(je),onInput:Ye,onChange:Ze,onKeydown:be}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),ot(" suffix slot "),S(ie)?(j(),_e("span",{key:1,class:ee(S(p).e("suffix"))},[Te("span",{class:ee(S(p).e("suffix-inner"))},[!S(H)||!S(F)||!S(X)?(j(),_e(an,{key:0},[at(Se.$slots,"suffix"),Se.suffixIcon?(j(),gt(S(rn),{key:0,class:ee(S(p).e("icon"))},{default:Ae(()=>[(j(),gt(ei(Se.suffixIcon)))]),_:1},8,["class"])):ot("v-if",!0)],64)):ot("v-if",!0),S(H)?(j(),gt(S(rn),{key:1,class:ee([S(p).e("icon"),S(p).e("clear")]),onMousedown:wn(S(qi),["prevent"]),onClick:ne},{default:Ae(()=>[he(S(xh))]),_:1},8,["class","onMousedown"])):ot("v-if",!0),S(F)?(j(),gt(S(rn),{key:2,class:ee([S(p).e("icon"),S(p).e("password")]),onClick:Fe},{default:Ae(()=>[(j(),gt(ei(S(U))))]),_:1},8,["class"])):ot("v-if",!0),S(X)?(j(),_e("span",{key:3,class:ee(S(p).e("count"))},[Te("span",{class:ee(S(p).e("count-inner"))},Lt(S(te))+" / "+Lt(Se.maxlength),3)],2)):ot("v-if",!0),S(k)&&S(O)&&S(I)?(j(),gt(S(rn),{key:4,class:ee([S(p).e("icon"),S(p).e("validateIcon"),S(p).is("loading",S(k)==="validating")])},{default:Ae(()=>[(j(),gt(ei(S(O))))]),_:1},8,["class"])):ot("v-if",!0)],2)],2)):ot("v-if",!0)],2),ot(" append slot "),Se.$slots.append?(j(),_e("div",{key:1,class:ee(S(p).be("group","append"))},[at(Se.$slots,"append")],2)):ot("v-if",!0)],64)):(j(),_e(an,{key:1},[ot(" textarea "),Te("textarea",si({id:S(d),ref_key:"textarea",ref:v,class:[S(m).e("inner"),S(p).is("focus",S(T))]},S(s),{minlength:Se.minlength,maxlength:Se.maxlength,tabindex:Se.tabindex,disabled:S(h),readonly:Se.readonly,autocomplete:Se.autocomplete,style:S(L),"aria-label":Se.ariaLabel,placeholder:Se.placeholder,form:Se.form,autofocus:Se.autofocus,rows:Se.rows,role:Se.containerRole,onCompositionstart:S(me),onCompositionupdate:S(ce),onCompositionend:S(je),onInput:Ye,onFocus:S(C),onBlur:S(E),onChange:Ze,onKeydown:be}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),S(X)?(j(),_e("span",{key:0,style:Jt(b.value),class:ee(S(p).e("count"))},Lt(S(te))+" / "+Lt(Se.maxlength),7)):ot("v-if",!0)],64))],38))}});var fwe=Vt(dwe,[["__file","input.vue"]]);const So=Nn(fwe),Ov=4,ote={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},hwe=({move:n,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${n}%)`}),dF=Symbol("scrollbarContextKey"),pwe=zt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),mwe="Thumb",gwe=Ne({__name:"thumb",props:pwe,setup(n){const e=n,t=Zt(dF),i=Rt("scrollbar");t||Xs(mwe,"can not inject scrollbar context");const r=ae(),s=ae(),a=ae({}),o=ae(!1);let l=!1,u=!1,c=xi?document.onselectstart:null;const d=W(()=>ote[e.vertical?"vertical":"horizontal"]),f=W(()=>hwe({size:e.size,move:e.move,bar:d.value})),h=W(()=>r.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/s.value[d.value.offset]),p=w=>{var A;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(A=window.getSelection())==null||A.removeAllRanges(),g(w);const T=w.currentTarget;T&&(a.value[d.value.axis]=T[d.value.offset]-(w[d.value.client]-T.getBoundingClientRect()[d.value.direction]))},m=w=>{if(!s.value||!r.value||!t.wrapElement)return;const A=Math.abs(w.target.getBoundingClientRect()[d.value.direction]-w[d.value.client]),T=s.value[d.value.offset]/2,C=(A-T)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=C*t.wrapElement[d.value.scrollSize]/100},g=w=>{w.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",_),c=document.onselectstart,document.onselectstart=()=>!1},v=w=>{if(!r.value||!s.value||l===!1)return;const A=a.value[d.value.axis];if(!A)return;const T=(r.value.getBoundingClientRect()[d.value.direction]-w[d.value.client])*-1,C=s.value[d.value.offset]-A,E=(T-C)*100*h.value/r.value[d.value.offset];t.wrapElement[d.value.scroll]=E*t.wrapElement[d.value.scrollSize]/100},_=()=>{l=!1,a.value[d.value.axis]=0,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",_),x(),u&&(o.value=!1)},y=()=>{u=!1,o.value=!!e.size},b=()=>{u=!0,o.value=l};Vi(()=>{x(),document.removeEventListener("mouseup",_)});const x=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return Yi($i(t,"scrollbarElement"),"mousemove",y),Yi($i(t,"scrollbarElement"),"mouseleave",b),(w,A)=>(j(),gt(Ks,{name:S(i).b("fade"),persisted:""},{default:Ae(()=>[Vn(Te("div",{ref_key:"instance",ref:r,class:ee([S(i).e("bar"),S(i).is(S(d).key)]),onMousedown:m},[Te("div",{ref_key:"thumb",ref:s,class:ee(S(i).e("thumb")),style:Jt(S(f)),onMousedown:p},null,38)],34),[[Oi,w.always||o.value]])]),_:1},8,["name"]))}});var CV=Vt(gwe,[["__file","thumb.vue"]]);const vwe=zt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}}),ywe=Ne({__name:"bar",props:vwe,setup(n,{expose:e}){const t=n,i=Zt(dF),r=ae(0),s=ae(0),a=ae(""),o=ae(""),l=ae(1),u=ae(1);return e({handleScroll:f=>{if(f){const h=f.offsetHeight-Ov,p=f.offsetWidth-Ov;s.value=f.scrollTop*100/h*l.value,r.value=f.scrollLeft*100/p*u.value}},update:()=>{const f=i==null?void 0:i.wrapElement;if(!f)return;const h=f.offsetHeight-Ov,p=f.offsetWidth-Ov,m=h**2/f.scrollHeight,g=p**2/f.scrollWidth,v=Math.max(m,t.minSize),_=Math.max(g,t.minSize);l.value=m/(h-m)/(v/(h-v)),u.value=g/(p-g)/(_/(p-_)),o.value=v+Ov<h?`${v}px`:"",a.value=_+Ov<p?`${_}px`:""}}),(f,h)=>(j(),_e(an,null,[he(CV,{move:r.value,ratio:u.value,size:a.value,always:f.always},null,8,["move","ratio","size","always"]),he(CV,{move:s.value,ratio:l.value,size:o.value,vertical:"",always:f.always},null,8,["move","ratio","size","always"])],64))}});var _we=Vt(ywe,[["__file","bar.vue"]]);const bwe=zt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:et([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Ba(["ariaLabel","ariaOrientation"])}),Swe={scroll:({scrollTop:n,scrollLeft:e})=>[n,e].every(yn)},xwe="ElScrollbar",wwe=Ne({name:xwe}),Twe=Ne({...wwe,props:bwe,emits:Swe,setup(n,{expose:e,emit:t}){const i=n,r=Rt("scrollbar");let s,a,o=0,l=0;const u=ae(),c=ae(),d=ae(),f=ae(),h=W(()=>{const x={};return i.height&&(x.height=ns(i.height)),i.maxHeight&&(x.maxHeight=ns(i.maxHeight)),[i.wrapStyle,x]}),p=W(()=>[i.wrapClass,r.e("wrap"),{[r.em("wrap","hidden-default")]:!i.native}]),m=W(()=>[r.e("view"),i.viewClass]),g=()=>{var x;c.value&&((x=f.value)==null||x.handleScroll(c.value),o=c.value.scrollTop,l=c.value.scrollLeft,t("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function v(x,w){Yn(x)?c.value.scrollTo(x):yn(x)&&yn(w)&&c.value.scrollTo(x,w)}const _=x=>{yn(x)&&(c.value.scrollTop=x)},y=x=>{yn(x)&&(c.value.scrollLeft=x)},b=()=>{var x;(x=f.value)==null||x.update()};return St(()=>i.noresize,x=>{x?(s==null||s(),a==null||a()):({stop:s}=Br(d,b),a=Yi("resize",b))},{immediate:!0}),St(()=>[i.maxHeight,i.height],()=>{i.native||cn(()=>{var x;b(),c.value&&((x=f.value)==null||x.handleScroll(c.value))})}),ui(dF,Ui({scrollbarElement:u,wrapElement:c})),AB(()=>{c.value&&(c.value.scrollTop=o,c.value.scrollLeft=l)}),Ln(()=>{i.native||cn(()=>{b()})}),fc(()=>b()),e({wrapRef:c,update:b,scrollTo:v,setScrollTop:_,setScrollLeft:y,handleScroll:g}),(x,w)=>(j(),_e("div",{ref_key:"scrollbarRef",ref:u,class:ee(S(r).b())},[Te("div",{ref_key:"wrapRef",ref:c,class:ee(S(p)),style:Jt(S(h)),tabindex:x.tabindex,onScroll:g},[(j(),gt(ei(x.tag),{id:x.id,ref_key:"resizeRef",ref:d,class:ee(S(m)),style:Jt(x.viewStyle),role:x.role,"aria-label":x.ariaLabel,"aria-orientation":x.ariaOrientation},{default:Ae(()=>[at(x.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),x.native?ot("v-if",!0):(j(),gt(_we,{key:0,ref_key:"barRef",ref:f,always:x.always,"min-size":x.minSize},null,8,["always","min-size"]))],2))}});var Cwe=Vt(Twe,[["__file","scrollbar.vue"]]);const nf=Nn(Cwe),fF=Symbol("popper"),lte=Symbol("popperContent"),Awe=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],ute=zt({role:{type:String,values:Awe,default:"tooltip"}}),Ewe=Ne({name:"ElPopper",inheritAttrs:!1}),Mwe=Ne({...Ewe,props:ute,setup(n,{expose:e}){const t=n,i=ae(),r=ae(),s=ae(),a=ae(),o=W(()=>t.role),l={triggerRef:i,popperInstanceRef:r,contentRef:s,referenceRef:a,role:o};return e(l),ui(fF,l),(u,c)=>at(u.$slots,"default")}});var Iwe=Vt(Mwe,[["__file","popper.vue"]]);const cte=zt({arrowOffset:{type:Number,default:5}}),Dwe=Ne({name:"ElPopperArrow",inheritAttrs:!1}),Rwe=Ne({...Dwe,props:cte,setup(n,{expose:e}){const t=n,i=Rt("popper"),{arrowOffset:r,arrowRef:s,arrowStyle:a}=Zt(lte,void 0);return St(()=>t.arrowOffset,o=>{r.value=o}),Vi(()=>{s.value=void 0}),e({arrowRef:s}),(o,l)=>(j(),_e("span",{ref_key:"arrowRef",ref:s,class:ee(S(i).e("arrow")),style:Jt(S(a)),"data-popper-arrow":""},null,6))}});var Pwe=Vt(Rwe,[["__file","arrow.vue"]]);const dte=zt({virtualRef:{type:et(Object)},virtualTriggering:Boolean,onMouseenter:{type:et(Function)},onMouseleave:{type:et(Function)},onClick:{type:et(Function)},onKeydown:{type:et(Function)},onFocus:{type:et(Function)},onBlur:{type:et(Function)},onContextmenu:{type:et(Function)},id:String,open:Boolean}),fte=Symbol("elForwardRef"),kwe=n=>{ui(fte,{setForwardRef:t=>{n.value=t}})},Lwe=n=>({mounted(e){n(e)},updated(e){n(e)},unmounted(){n(null)}}),Owe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',Nwe=n=>getComputedStyle(n).position==="fixed"?!1:n.offsetParent!==null,AV=n=>Array.from(n.querySelectorAll(Owe)).filter(e=>l6(e)&&Nwe(e)),l6=n=>{if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.tabIndex<0||n.hasAttribute("disabled")||n.getAttribute("aria-disabled")==="true")return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return!(n.type==="hidden"||n.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},mM=function(n,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const r=document.createEvent(i);return r.initEvent(e,...t),n.dispatchEvent(r),n},hte=n=>!n.getAttribute("aria-owns"),pte=(n,e,t)=>{const{parentNode:i}=n;if(!i)return null;const r=i.querySelectorAll(t),s=Array.prototype.indexOf.call(r,n);return r[s+e]||null},gM=n=>{n&&(n.focus(),!hte(n)&&n.click())},Bwe="ElOnlyChild",mte=Ne({name:Bwe,setup(n,{slots:e,attrs:t}){var i;const r=Zt(fte),s=Lwe((i=r==null?void 0:r.setForwardRef)!=null?i:qi);return()=>{var a;const o=(a=e.default)==null?void 0:a.call(e,t);if(!o||o.length>1)return null;const l=gte(o);return l?Vn(nh(l,t),[[s]]):null}}});function gte(n){if(!n)return null;const e=n;for(const t of e){if(Yn(t))switch(t.type){case wo:continue;case ab:case"svg":return EV(t);case an:return gte(t.children);default:return t}return EV(t)}return null}function EV(n){const e=Rt("only-child");return he("span",{class:e.e("content")},[n])}const Fwe=Ne({name:"ElPopperTrigger",inheritAttrs:!1}),Uwe=Ne({...Fwe,props:dte,setup(n,{expose:e}){const t=n,{role:i,triggerRef:r}=Zt(fF,void 0);kwe(r);const s=W(()=>o.value?t.id:void 0),a=W(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),o=W(()=>{if(i&&i.value!=="tooltip")return i.value}),l=W(()=>o.value?`${t.open}`:void 0);let u;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Ln(()=>{St(()=>t.virtualRef,d=>{d&&(r.value=Xo(d))},{immediate:!0}),St(r,(d,f)=>{u==null||u(),u=void 0,au(d)&&(c.forEach(h=>{var p;const m=t[h];m&&(d.addEventListener(h.slice(2).toLowerCase(),m),(p=f==null?void 0:f.removeEventListener)==null||p.call(f,h.slice(2).toLowerCase(),m))}),l6(d)&&(u=St([s,a,o,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{na(h[m])?d.removeAttribute(p):d.setAttribute(p,h[m])})},{immediate:!0}))),au(f)&&l6(f)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>f.removeAttribute(h))},{immediate:!0})}),Vi(()=>{if(u==null||u(),u=void 0,r.value&&au(r.value)){const d=r.value;c.forEach(f=>{const h=t[f];h&&d.removeEventListener(f.slice(2).toLowerCase(),h)}),r.value=void 0}}),e({triggerRef:r}),(d,f)=>d.virtualTriggering?ot("v-if",!0):(j(),gt(S(mte),si({key:0},d.$attrs,{"aria-controls":S(s),"aria-describedby":S(a),"aria-expanded":S(l),"aria-haspopup":S(o)}),{default:Ae(()=>[at(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var zwe=Vt(Uwe,[["__file","trigger.vue"]]);const QR="focus-trap.focus-after-trapped",ZR="focus-trap.focus-after-released",Hwe="focus-trap.focusout-prevented",MV={cancelable:!0,bubbles:!1},Vwe={cancelable:!0,bubbles:!1},IV="focusAfterTrapped",DV="focusAfterReleased",hF=Symbol("elFocusTrap"),pF=ae(),YI=ae(0),mF=ae(0);let $C=0;const vte=n=>{const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},RV=(n,e)=>{for(const t of n)if(!$we(t,e))return t},$we=(n,e)=>{if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1},Gwe=n=>{const e=vte(n),t=RV(e,n),i=RV(e.reverse(),n);return[t,i]},Wwe=n=>n instanceof HTMLInputElement&&"select"in n,mp=(n,e)=>{if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),mF.value=window.performance.now(),n!==t&&Wwe(n)&&e&&n.select()}};function PV(n,e){const t=[...n],i=n.indexOf(e);return i!==-1&&t.splice(i,1),t}const qwe=()=>{let n=[];return{push:i=>{const r=n[0];r&&i!==r&&r.pause(),n=PV(n,i),n.unshift(i)},remove:i=>{var r,s;n=PV(n,i),(s=(r=n[0])==null?void 0:r.resume)==null||s.call(r)}}},jwe=(n,e=!1)=>{const t=document.activeElement;for(const i of n)if(mp(i,e),document.activeElement!==t)return},kV=qwe(),Kwe=()=>YI.value>mF.value,GC=()=>{pF.value="pointer",YI.value=window.performance.now()},LV=()=>{pF.value="keyboard",YI.value=window.performance.now()},Xwe=()=>(Ln(()=>{$C===0&&(document.addEventListener("mousedown",GC),document.addEventListener("touchstart",GC),document.addEventListener("keydown",LV)),$C++}),Vi(()=>{$C--,$C<=0&&(document.removeEventListener("mousedown",GC),document.removeEventListener("touchstart",GC),document.removeEventListener("keydown",LV))}),{focusReason:pF,lastUserFocusTimestamp:YI,lastAutomatedFocusTimestamp:mF}),WC=n=>new CustomEvent(Hwe,{...Vwe,detail:n}),Kt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let Ky=[];const OV=n=>{n.code===Kt.esc&&Ky.forEach(e=>e(n))},Ywe=n=>{Ln(()=>{Ky.length===0&&document.addEventListener("keydown",OV),xi&&Ky.push(n)}),Vi(()=>{Ky=Ky.filter(e=>e!==n),Ky.length===0&&xi&&document.removeEventListener("keydown",OV)})},Qwe=Ne({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[IV,DV,"focusin","focusout","focusout-prevented","release-requested"],setup(n,{emit:e}){const t=ae();let i,r;const{focusReason:s}=Xwe();Ywe(p=>{n.trapped&&!a.paused&&e("release-requested",p)});const a={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},o=p=>{if(!n.loop&&!n.trapped||a.paused)return;const{code:m,altKey:g,ctrlKey:v,metaKey:_,currentTarget:y,shiftKey:b}=p,{loop:x}=n,w=m===Kt.tab&&!g&&!v&&!_,A=document.activeElement;if(w&&A){const T=y,[C,E]=Gwe(T);if(C&&E){if(!b&&A===E){const k=WC({focusReason:s.value});e("focusout-prevented",k),k.defaultPrevented||(p.preventDefault(),x&&mp(C,!0))}else if(b&&[C,T].includes(A)){const k=WC({focusReason:s.value});e("focusout-prevented",k),k.defaultPrevented||(p.preventDefault(),x&&mp(E,!0))}}else if(A===T){const k=WC({focusReason:s.value});e("focusout-prevented",k),k.defaultPrevented||p.preventDefault()}}};ui(hF,{focusTrapRef:t,onKeydown:o}),St(()=>n.focusTrapEl,p=>{p&&(t.value=p)},{immediate:!0}),St([t],([p],[m])=>{p&&(p.addEventListener("keydown",o),p.addEventListener("focusin",c),p.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",o),m.removeEventListener("focusin",c),m.removeEventListener("focusout",d))});const l=p=>{e(IV,p)},u=p=>e(DV,p),c=p=>{const m=S(t);if(!m)return;const g=p.target,v=p.relatedTarget,_=g&&m.contains(g);n.trapped||v&&m.contains(v)||(i=v),_&&e("focusin",p),!a.paused&&n.trapped&&(_?r=g:mp(r,!0))},d=p=>{const m=S(t);if(!(a.paused||!m))if(n.trapped){const g=p.relatedTarget;!na(g)&&!m.contains(g)&&setTimeout(()=>{if(!a.paused&&n.trapped){const v=WC({focusReason:s.value});e("focusout-prevented",v),v.defaultPrevented||mp(r,!0)}},0)}else{const g=p.target;g&&m.contains(g)||e("focusout",p)}};async function f(){await cn();const p=S(t);if(p){kV.push(a);const m=p.contains(document.activeElement)?i:document.activeElement;if(i=m,!p.contains(m)){const v=new Event(QR,MV);p.addEventListener(QR,l),p.dispatchEvent(v),v.defaultPrevented||cn(()=>{let _=n.focusStartEl;un(_)||(mp(_),document.activeElement!==_&&(_="first")),_==="first"&&jwe(vte(p),!0),(document.activeElement===m||_==="container")&&mp(p)})}}}function h(){const p=S(t);if(p){p.removeEventListener(QR,l);const m=new CustomEvent(ZR,{...MV,detail:{focusReason:s.value}});p.addEventListener(ZR,u),p.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!Kwe()||p.contains(document.activeElement))&&mp(i??document.body),p.removeEventListener(ZR,u),kV.remove(a)}}return Ln(()=>{n.trapped&&f(),St(()=>n.trapped,p=>{p?f():h()})}),Vi(()=>{n.trapped&&h(),t.value&&(t.value.removeEventListener("keydown",o),t.value.removeEventListener("focusin",c),t.value.removeEventListener("focusout",d),t.value=void 0)}),{onKeydown:o}}});function Zwe(n,e,t,i,r,s){return at(n.$slots,"default",{handleKeydown:n.onKeydown})}var hb=Vt(Qwe,[["render",Zwe],["__file","focus-trap.vue"]]),wl="top",ic="bottom",rc="right",Tl="left",gF="auto",mT=[wl,ic,rc,Tl],u_="start",J2="end",Jwe="clippingParents",yte="viewport",AS="popper",eTe="reference",NV=mT.reduce(function(n,e){return n.concat([e+"-"+u_,e+"-"+J2])},[]),wh=[].concat(mT,[gF]).reduce(function(n,e){return n.concat([e,e+"-"+u_,e+"-"+J2])},[]),tTe="beforeRead",nTe="read",iTe="afterRead",rTe="beforeMain",sTe="main",aTe="afterMain",oTe="beforeWrite",lTe="write",uTe="afterWrite",cTe=[tTe,nTe,iTe,rTe,sTe,aTe,oTe,lTe,uTe];function Wd(n){return n?(n.nodeName||"").toLowerCase():null}function Yc(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function c_(n){var e=Yc(n).Element;return n instanceof e||n instanceof Element}function Xu(n){var e=Yc(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function vF(n){if(typeof ShadowRoot>"u")return!1;var e=Yc(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}function dTe(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!Xu(s)||!Wd(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(a){var o=r[a];o===!1?s.removeAttribute(a):s.setAttribute(a,o===!0?"":o)}))})}function fTe(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),o=a.reduce(function(l,u){return l[u]="",l},{});!Xu(r)||!Wd(r)||(Object.assign(r.style,o),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var _te={name:"applyStyles",enabled:!0,phase:"write",fn:dTe,effect:fTe,requires:["computeStyles"]};function Nd(n){return n.split("-")[0]}var gg=Math.max,C3=Math.min,d_=Math.round;function f_(n,e){e===void 0&&(e=!1);var t=n.getBoundingClientRect(),i=1,r=1;if(Xu(n)&&e){var s=n.offsetHeight,a=n.offsetWidth;a>0&&(i=d_(t.width)/a||1),s>0&&(r=d_(t.height)/s||1)}return{width:t.width/i,height:t.height/r,top:t.top/r,right:t.right/i,bottom:t.bottom/r,left:t.left/i,x:t.left/i,y:t.top/r}}function yF(n){var e=f_(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}function bte(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&vF(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ih(n){return Yc(n).getComputedStyle(n)}function hTe(n){return["table","td","th"].indexOf(Wd(n))>=0}function T0(n){return((c_(n)?n.ownerDocument:n.document)||window.document).documentElement}function QI(n){return Wd(n)==="html"?n:n.assignedSlot||n.parentNode||(vF(n)?n.host:null)||T0(n)}function BV(n){return!Xu(n)||ih(n).position==="fixed"?null:n.offsetParent}function pTe(n){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&Xu(n)){var i=ih(n);if(i.position==="fixed")return null}var r=QI(n);for(vF(r)&&(r=r.host);Xu(r)&&["html","body"].indexOf(Wd(r))<0;){var s=ih(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function gT(n){for(var e=Yc(n),t=BV(n);t&&hTe(t)&&ih(t).position==="static";)t=BV(t);return t&&(Wd(t)==="html"||Wd(t)==="body"&&ih(t).position==="static")?e:t||pTe(n)||e}function _F(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function Kx(n,e,t){return gg(n,C3(e,t))}function mTe(n,e,t){var i=Kx(n,e,t);return i>t?t:i}function Ste(){return{top:0,right:0,bottom:0,left:0}}function xte(n){return Object.assign({},Ste(),n)}function wte(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}var gTe=function(n,e){return n=typeof n=="function"?n(Object.assign({},e.rects,{placement:e.placement})):n,xte(typeof n!="number"?n:wte(n,mT))};function vTe(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,a=t.modifiersData.popperOffsets,o=Nd(t.placement),l=_F(o),u=[Tl,rc].indexOf(o)>=0,c=u?"height":"width";if(!(!s||!a)){var d=gTe(r.padding,t),f=yF(s),h=l==="y"?wl:Tl,p=l==="y"?ic:rc,m=t.rects.reference[c]+t.rects.reference[l]-a[l]-t.rects.popper[c],g=a[l]-t.rects.reference[l],v=gT(s),_=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,y=m/2-g/2,b=d[h],x=_-f[c]-d[p],w=_/2-f[c]/2+y,A=Kx(b,w,x),T=l;t.modifiersData[i]=(e={},e[T]=A,e.centerOffset=A-w,e)}}function yTe(n){var e=n.state,t=n.options,i=t.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!bte(e.elements.popper,r)||(e.elements.arrow=r))}var _Te={name:"arrow",enabled:!0,phase:"main",fn:vTe,effect:yTe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function h_(n){return n.split("-")[1]}var bTe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function STe(n){var e=n.x,t=n.y,i=window,r=i.devicePixelRatio||1;return{x:d_(e*r)/r||0,y:d_(t*r)/r||0}}function FV(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,a=n.offsets,o=n.position,l=n.gpuAcceleration,u=n.adaptive,c=n.roundOffsets,d=n.isFixed,f=a.x,h=f===void 0?0:f,p=a.y,m=p===void 0?0:p,g=typeof c=="function"?c({x:h,y:m}):{x:h,y:m};h=g.x,m=g.y;var v=a.hasOwnProperty("x"),_=a.hasOwnProperty("y"),y=Tl,b=wl,x=window;if(u){var w=gT(t),A="clientHeight",T="clientWidth";if(w===Yc(t)&&(w=T0(t),ih(w).position!=="static"&&o==="absolute"&&(A="scrollHeight",T="scrollWidth")),w=w,r===wl||(r===Tl||r===rc)&&s===J2){b=ic;var C=d&&w===x&&x.visualViewport?x.visualViewport.height:w[A];m-=C-i.height,m*=l?1:-1}if(r===Tl||(r===wl||r===ic)&&s===J2){y=rc;var E=d&&w===x&&x.visualViewport?x.visualViewport.width:w[T];h-=E-i.width,h*=l?1:-1}}var I=Object.assign({position:o},u&&bTe),k=c===!0?STe({x:h,y:m}):{x:h,y:m};if(h=k.x,m=k.y,l){var O;return Object.assign({},I,(O={},O[b]=_?"0":"",O[y]=v?"0":"",O.transform=(x.devicePixelRatio||1)<=1?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",O))}return Object.assign({},I,(e={},e[b]=_?m+"px":"",e[y]=v?h+"px":"",e.transform="",e))}function xTe(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=i===void 0?!0:i,s=t.adaptive,a=s===void 0?!0:s,o=t.roundOffsets,l=o===void 0?!0:o,u={placement:Nd(e.placement),variation:h_(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,FV(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,FV(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Tte={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xTe,data:{}},qC={passive:!0};function wTe(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=r===void 0?!0:r,a=i.resize,o=a===void 0?!0:a,l=Yc(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",t.update,qC)}),o&&l.addEventListener("resize",t.update,qC),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",t.update,qC)}),o&&l.removeEventListener("resize",t.update,qC)}}var Cte={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wTe,data:{}},TTe={left:"right",right:"left",bottom:"top",top:"bottom"};function vM(n){return n.replace(/left|right|bottom|top/g,function(e){return TTe[e]})}var CTe={start:"end",end:"start"};function UV(n){return n.replace(/start|end/g,function(e){return CTe[e]})}function bF(n){var e=Yc(n),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function SF(n){return f_(T0(n)).left+bF(n).scrollLeft}function ATe(n){var e=Yc(n),t=T0(n),i=e.visualViewport,r=t.clientWidth,s=t.clientHeight,a=0,o=0;return i&&(r=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(a=i.offsetLeft,o=i.offsetTop)),{width:r,height:s,x:a+SF(n),y:o}}function ETe(n){var e,t=T0(n),i=bF(n),r=(e=n.ownerDocument)==null?void 0:e.body,s=gg(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=gg(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),o=-i.scrollLeft+SF(n),l=-i.scrollTop;return ih(r||t).direction==="rtl"&&(o+=gg(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:a,x:o,y:l}}function xF(n){var e=ih(n),t=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+i)}function Ate(n){return["html","body","#document"].indexOf(Wd(n))>=0?n.ownerDocument.body:Xu(n)&&xF(n)?n:Ate(QI(n))}function Xx(n,e){var t;e===void 0&&(e=[]);var i=Ate(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=Yc(i),a=r?[s].concat(s.visualViewport||[],xF(i)?i:[]):i,o=e.concat(a);return r?o:o.concat(Xx(QI(a)))}function u6(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function MTe(n){var e=f_(n);return e.top=e.top+n.clientTop,e.left=e.left+n.clientLeft,e.bottom=e.top+n.clientHeight,e.right=e.left+n.clientWidth,e.width=n.clientWidth,e.height=n.clientHeight,e.x=e.left,e.y=e.top,e}function zV(n,e){return e===yte?u6(ATe(n)):c_(e)?MTe(e):u6(ETe(T0(n)))}function ITe(n){var e=Xx(QI(n)),t=["absolute","fixed"].indexOf(ih(n).position)>=0,i=t&&Xu(n)?gT(n):n;return c_(i)?e.filter(function(r){return c_(r)&&bte(r,i)&&Wd(r)!=="body"}):[]}function DTe(n,e,t){var i=e==="clippingParents"?ITe(n):[].concat(e),r=[].concat(i,[t]),s=r[0],a=r.reduce(function(o,l){var u=zV(n,l);return o.top=gg(u.top,o.top),o.right=C3(u.right,o.right),o.bottom=C3(u.bottom,o.bottom),o.left=gg(u.left,o.left),o},zV(n,s));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ete(n){var e=n.reference,t=n.element,i=n.placement,r=i?Nd(i):null,s=i?h_(i):null,a=e.x+e.width/2-t.width/2,o=e.y+e.height/2-t.height/2,l;switch(r){case wl:l={x:a,y:e.y-t.height};break;case ic:l={x:a,y:e.y+e.height};break;case rc:l={x:e.x+e.width,y:o};break;case Tl:l={x:e.x-t.width,y:o};break;default:l={x:e.x,y:e.y}}var u=r?_F(r):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case u_:l[u]=l[u]-(e[c]/2-t[c]/2);break;case J2:l[u]=l[u]+(e[c]/2-t[c]/2);break}}return l}function ew(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=i===void 0?n.placement:i,s=t.boundary,a=s===void 0?Jwe:s,o=t.rootBoundary,l=o===void 0?yte:o,u=t.elementContext,c=u===void 0?AS:u,d=t.altBoundary,f=d===void 0?!1:d,h=t.padding,p=h===void 0?0:h,m=xte(typeof p!="number"?p:wte(p,mT)),g=c===AS?eTe:AS,v=n.rects.popper,_=n.elements[f?g:c],y=DTe(c_(_)?_:_.contextElement||T0(n.elements.popper),a,l),b=f_(n.elements.reference),x=Ete({reference:b,element:v,strategy:"absolute",placement:r}),w=u6(Object.assign({},v,x)),A=c===AS?w:b,T={top:y.top-A.top+m.top,bottom:A.bottom-y.bottom+m.bottom,left:y.left-A.left+m.left,right:A.right-y.right+m.right},C=n.modifiersData.offset;if(c===AS&&C){var E=C[r];Object.keys(T).forEach(function(I){var k=[rc,ic].indexOf(I)>=0?1:-1,O=[wl,ic].indexOf(I)>=0?"y":"x";T[I]+=E[O]*k})}return T}function RTe(n,e){e===void 0&&(e={});var t=e,i=t.placement,r=t.boundary,s=t.rootBoundary,a=t.padding,o=t.flipVariations,l=t.allowedAutoPlacements,u=l===void 0?wh:l,c=h_(i),d=c?o?NV:NV.filter(function(p){return h_(p)===c}):mT,f=d.filter(function(p){return u.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,m){return p[m]=ew(n,{placement:m,boundary:r,rootBoundary:s,padding:a})[Nd(m)],p},{});return Object.keys(h).sort(function(p,m){return h[p]-h[m]})}function PTe(n){if(Nd(n)===gF)return[];var e=vM(n);return[UV(n),e,UV(e)]}function kTe(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!0:a,l=t.fallbackPlacements,u=t.padding,c=t.boundary,d=t.rootBoundary,f=t.altBoundary,h=t.flipVariations,p=h===void 0?!0:h,m=t.allowedAutoPlacements,g=e.options.placement,v=Nd(g),_=v===g,y=l||(_||!p?[vM(g)]:PTe(g)),b=[g].concat(y).reduce(function(le,ge){return le.concat(Nd(ge)===gF?RTe(e,{placement:ge,boundary:c,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):ge)},[]),x=e.rects.reference,w=e.rects.popper,A=new Map,T=!0,C=b[0],E=0;E<b.length;E++){var I=b[E],k=Nd(I),O=h_(I)===u_,U=[wl,ic].indexOf(k)>=0,z=U?"width":"height",L=ew(e,{placement:I,boundary:c,rootBoundary:d,altBoundary:f,padding:u}),G=U?O?rc:Tl:O?ic:wl;x[z]>w[z]&&(G=vM(G));var H=vM(G),F=[];if(s&&F.push(L[k]<=0),o&&F.push(L[G]<=0,L[H]<=0),F.every(function(le){return le})){C=I,T=!1;break}A.set(I,F)}if(T)for(var X=p?3:1,te=function(le){var ge=b.find(function(pe){var ye=A.get(pe);if(ye)return ye.slice(0,le).every(function(Oe){return Oe})});if(ge)return C=ge,"break"},re=X;re>0;re--){var ie=te(re);if(ie==="break")break}e.placement!==C&&(e.modifiersData[i]._skip=!0,e.placement=C,e.reset=!0)}}var LTe={name:"flip",enabled:!0,phase:"main",fn:kTe,requiresIfExists:["offset"],data:{_skip:!1}};function HV(n,e,t){return t===void 0&&(t={x:0,y:0}),{top:n.top-e.height-t.y,right:n.right-e.width+t.x,bottom:n.bottom-e.height+t.y,left:n.left-e.width-t.x}}function VV(n){return[wl,rc,ic,Tl].some(function(e){return n[e]>=0})}function OTe(n){var e=n.state,t=n.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,a=ew(e,{elementContext:"reference"}),o=ew(e,{altBoundary:!0}),l=HV(a,i),u=HV(o,r,s),c=VV(l),d=VV(u);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var NTe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:OTe};function BTe(n,e,t){var i=Nd(n),r=[Tl,wl].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:n})):t,a=s[0],o=s[1];return a=a||0,o=(o||0)*r,[Tl,rc].indexOf(i)>=0?{x:o,y:a}:{x:a,y:o}}function FTe(n){var e=n.state,t=n.options,i=n.name,r=t.offset,s=r===void 0?[0,0]:r,a=wh.reduce(function(c,d){return c[d]=BTe(d,e.rects,s),c},{}),o=a[e.placement],l=o.x,u=o.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=a}var UTe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:FTe};function zTe(n){var e=n.state,t=n.name;e.modifiersData[t]=Ete({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Mte={name:"popperOffsets",enabled:!0,phase:"read",fn:zTe,data:{}};function HTe(n){return n==="x"?"y":"x"}function VTe(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=r===void 0?!0:r,a=t.altAxis,o=a===void 0?!1:a,l=t.boundary,u=t.rootBoundary,c=t.altBoundary,d=t.padding,f=t.tether,h=f===void 0?!0:f,p=t.tetherOffset,m=p===void 0?0:p,g=ew(e,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),v=Nd(e.placement),_=h_(e.placement),y=!_,b=_F(v),x=HTe(b),w=e.modifiersData.popperOffsets,A=e.rects.reference,T=e.rects.popper,C=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,E=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,k={x:0,y:0};if(w){if(s){var O,U=b==="y"?wl:Tl,z=b==="y"?ic:rc,L=b==="y"?"height":"width",G=w[b],H=G+g[U],F=G-g[z],X=h?-T[L]/2:0,te=_===u_?A[L]:T[L],re=_===u_?-T[L]:-A[L],ie=e.elements.arrow,le=h&&ie?yF(ie):{width:0,height:0},ge=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ste(),pe=ge[U],ye=ge[z],Oe=Kx(0,A[L],le[L]),Be=y?A[L]/2-X-Oe-pe-E.mainAxis:te-Oe-pe-E.mainAxis,Ye=y?-A[L]/2+X+Oe+ye+E.mainAxis:re+Oe+ye+E.mainAxis,Ze=e.elements.arrow&&gT(e.elements.arrow),Q=Ze?b==="y"?Ze.clientTop||0:Ze.clientLeft||0:0,me=(O=I==null?void 0:I[b])!=null?O:0,ce=G+Be-me-Q,je=G+Ye-me,Fe=Kx(h?C3(H,ce):H,G,h?gg(F,je):F);w[b]=Fe,k[b]=Fe-G}if(o){var nt,We=b==="x"?wl:Tl,Ke=b==="x"?ic:rc,it=w[x],be=x==="y"?"height":"width",K=it+g[We],ne=it-g[Ke],Se=[wl,Tl].indexOf(v)!==-1,ze=(nt=I==null?void 0:I[x])!=null?nt:0,Je=Se?K:it-A[be]-T[be]-ze+E.altAxis,Tt=Se?it+A[be]+T[be]-ze-E.altAxis:ne,At=h&&Se?mTe(Je,it,Tt):Kx(h?Je:K,it,h?Tt:ne);w[x]=At,k[x]=At-it}e.modifiersData[i]=k}}var $Te={name:"preventOverflow",enabled:!0,phase:"main",fn:VTe,requiresIfExists:["offset"]};function GTe(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function WTe(n){return n===Yc(n)||!Xu(n)?bF(n):GTe(n)}function qTe(n){var e=n.getBoundingClientRect(),t=d_(e.width)/n.offsetWidth||1,i=d_(e.height)/n.offsetHeight||1;return t!==1||i!==1}function jTe(n,e,t){t===void 0&&(t=!1);var i=Xu(e),r=Xu(e)&&qTe(e),s=T0(e),a=f_(n,r),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((Wd(e)!=="body"||xF(s))&&(o=WTe(e)),Xu(e)?(l=f_(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=SF(s))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function KTe(n){var e=new Map,t=new Set,i=[];n.forEach(function(s){e.set(s.name,s)});function r(s){t.add(s.name);var a=[].concat(s.requires||[],s.requiresIfExists||[]);a.forEach(function(o){if(!t.has(o)){var l=e.get(o);l&&r(l)}}),i.push(s)}return n.forEach(function(s){t.has(s.name)||r(s)}),i}function XTe(n){var e=KTe(n);return cTe.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}function YTe(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function QTe(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var $V={placement:"bottom",modifiers:[],strategy:"absolute"};function GV(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function wF(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,i=t===void 0?[]:t,r=e.defaultOptions,s=r===void 0?$V:r;return function(a,o,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},$V,s),modifiersData:{},elements:{reference:a,popper:o},attributes:{},styles:{}},c=[],d=!1,f={state:u,setOptions:function(m){var g=typeof m=="function"?m(u.options):m;p(),u.options=Object.assign({},s,u.options,g),u.scrollParents={reference:c_(a)?Xx(a):a.contextElement?Xx(a.contextElement):[],popper:Xx(o)};var v=XTe(QTe([].concat(i,u.options.modifiers)));return u.orderedModifiers=v.filter(function(_){return _.enabled}),h(),f.update()},forceUpdate:function(){if(!d){var m=u.elements,g=m.reference,v=m.popper;if(GV(g,v)){u.rects={reference:jTe(g,gT(v),u.options.strategy==="fixed"),popper:yF(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var _=0;_<u.orderedModifiers.length;_++){if(u.reset===!0){u.reset=!1,_=-1;continue}var y=u.orderedModifiers[_],b=y.fn,x=y.options,w=x===void 0?{}:x,A=y.name;typeof b=="function"&&(u=b({state:u,options:w,name:A,instance:f})||u)}}}},update:YTe(function(){return new Promise(function(m){f.forceUpdate(),m(u)})}),destroy:function(){p(),d=!0}};if(!GV(a,o))return f;f.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function h(){u.orderedModifiers.forEach(function(m){var g=m.name,v=m.options,_=v===void 0?{}:v,y=m.effect;if(typeof y=="function"){var b=y({state:u,name:g,instance:f,options:_}),x=function(){};c.push(b||x)}})}function p(){c.forEach(function(m){return m()}),c=[]}return f}}wF();var ZTe=[Cte,Mte,Tte,_te];wF({defaultModifiers:ZTe});var JTe=[Cte,Mte,Tte,_te,UTe,LTe,$Te,_Te,NTe],eCe=wF({defaultModifiers:JTe});const tCe=["fixed","absolute"],nCe=zt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:et(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:wh,default:"bottom"},popperOptions:{type:et(Object),default:()=>({})},strategy:{type:String,values:tCe,default:"absolute"}}),Ite=zt({...nCe,id:String,style:{type:et([String,Array,Object])},className:{type:et([String,Array,Object])},effect:{type:et(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:et([String,Array,Object])},popperStyle:{type:et([String,Array,Object])},referenceEl:{type:et(Object)},triggerTargetEl:{type:et(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Ba(["ariaLabel"])}),iCe={mouseenter:n=>n instanceof MouseEvent,mouseleave:n=>n instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},rCe=(n,e)=>{const t=ae(!1),i=ae();return{focusStartRef:i,trapped:t,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:u=>{n.visible&&!t.value&&(u.target&&(i.value=u.target),t.value=!0)},onFocusoutPrevented:u=>{n.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},sCe=(n,e=[])=>{const{placement:t,strategy:i,popperOptions:r}=n,s={placement:t,strategy:i,...r,modifiers:[...oCe(n),...e]};return lCe(s,r==null?void 0:r.modifiers),s},aCe=n=>{if(xi)return Xo(n)};function oCe(n){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=n;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function lCe(n,e){e&&(n.modifiers=[...n.modifiers,...e??[]])}const uCe=(n,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=cCe(l);Object.assign(a.value,u)},requires:["computeStyles"]},r=W(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:d}=S(t);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),s=Ji(),a=ae({styles:{popper:{position:S(r).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),o=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return St(r,l=>{const u=S(s);u&&u.setOptions(l)},{deep:!0}),St([n,e],([l,u])=>{o(),!(!l||!u)&&(s.value=eCe(l,u,S(r)))}),Vi(()=>{o()}),{state:W(()=>{var l;return{...((l=S(s))==null?void 0:l.state)||{}}}),styles:W(()=>S(a).styles),attributes:W(()=>S(a).attributes),update:()=>{var l;return(l=S(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=S(s))==null?void 0:l.forceUpdate()},instanceRef:W(()=>S(s))}};function cCe(n){const e=Object.keys(n.elements),t=Z2(e.map(r=>[r,n.styles[r]||{}])),i=Z2(e.map(r=>[r,n.attributes[r]]));return{styles:t,attributes:i}}const dCe=0,fCe=n=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:r}=Zt(fF,void 0),s=ae(),a=ae(),o=W(()=>({name:"eventListeners",enabled:!!n.visible})),l=W(()=>{var v;const _=S(s),y=(v=S(a))!=null?v:dCe;return{name:"arrow",enabled:!Oee(_),options:{element:_,padding:y}}}),u=W(()=>({onFirstUpdate:()=>{p()},...sCe(n,[S(l),S(o)])})),c=W(()=>aCe(n.referenceEl)||S(i)),{attributes:d,state:f,styles:h,update:p,forceUpdate:m,instanceRef:g}=uCe(c,t,u);return St(g,v=>e.value=v),Ln(()=>{St(()=>{var v;return(v=S(c))==null?void 0:v.getBoundingClientRect()},()=>{p()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:g,state:f,styles:h,role:r,forceUpdate:m,update:p}},hCe=(n,{attributes:e,styles:t,role:i})=>{const{nextZIndex:r}=db(),s=Rt("popper"),a=W(()=>S(e).popper),o=ae(yn(n.zIndex)?n.zIndex:r()),l=W(()=>[s.b(),s.is("pure",n.pure),s.is(n.effect),n.popperClass]),u=W(()=>[{zIndex:S(o)},S(t).popper,n.popperStyle||{}]),c=W(()=>i.value==="dialog"?"false":void 0),d=W(()=>S(t).arrow||{});return{ariaModal:c,arrowStyle:d,contentAttrs:a,contentClass:l,contentStyle:u,contentZIndex:o,updateZIndex:()=>{o.value=yn(n.zIndex)?n.zIndex:r()}}},pCe=Ne({name:"ElPopperContent"}),mCe=Ne({...pCe,props:Ite,emits:iCe,setup(n,{expose:e,emit:t}){const i=n,{focusStartRef:r,trapped:s,onFocusAfterReleased:a,onFocusAfterTrapped:o,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=rCe(i,t),{attributes:d,arrowRef:f,contentRef:h,styles:p,instanceRef:m,role:g,update:v}=fCe(i),{ariaModal:_,arrowStyle:y,contentAttrs:b,contentClass:x,contentStyle:w,updateZIndex:A}=hCe(i,{styles:p,attributes:d,role:g}),T=Zt(Gd,void 0),C=ae();ui(lte,{arrowStyle:y,arrowRef:f,arrowOffset:C}),T&&ui(Gd,{...T,addInputId:qi,removeInputId:qi});let E;const I=(O=!0)=>{v(),O&&A()},k=()=>{I(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Ln(()=>{St(()=>i.triggerTargetEl,(O,U)=>{E==null||E(),E=void 0;const z=S(O||h.value),L=S(U||h.value);au(z)&&(E=St([g,()=>i.ariaLabel,_,()=>i.id],G=>{["role","aria-label","aria-modal","id"].forEach((H,F)=>{na(G[F])?z.removeAttribute(H):z.setAttribute(H,G[F])})},{immediate:!0})),L!==z&&au(L)&&["role","aria-label","aria-modal","id"].forEach(G=>{L.removeAttribute(G)})},{immediate:!0}),St(()=>i.visible,k,{immediate:!0})}),Vi(()=>{E==null||E(),E=void 0}),e({popperContentRef:h,popperInstanceRef:m,updatePopper:I,contentStyle:w}),(O,U)=>(j(),_e("div",si({ref_key:"contentRef",ref:h},S(b),{style:S(w),class:S(x),tabindex:"-1",onMouseenter:z=>O.$emit("mouseenter",z),onMouseleave:z=>O.$emit("mouseleave",z)}),[he(S(hb),{trapped:S(s),"trap-on-focus-in":!0,"focus-trap-el":S(h),"focus-start-el":S(r),onFocusAfterTrapped:S(o),onFocusAfterReleased:S(a),onFocusin:S(l),onFocusoutPrevented:S(u),onReleaseRequested:S(c)},{default:Ae(()=>[at(O.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var gCe=Vt(mCe,[["__file","content.vue"]]);const Dte=Nn(Iwe),ZI=Symbol("elTooltip");function WV(){let n;const e=(i,r)=>{t(),n=window.setTimeout(i,r)},t=()=>window.clearTimeout(n);return dT(()=>t()),{registerTimeout:e,cancelTimeout:t}}const vCe=zt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),yCe=({showAfter:n,hideAfter:e,autoClose:t,open:i,close:r})=>{const{registerTimeout:s}=WV(),{registerTimeout:a,cancelTimeout:o}=WV();return{onOpen:c=>{s(()=>{i(c);const d=S(t);yn(d)&&d>0&&a(()=>{r(c)},d)},S(n))},onClose:c=>{o(),s(()=>{r(c)},S(e))}}},ua=zt({...vCe,...Ite,appendTo:{type:et([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:et(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Ba(["ariaLabel"])}),tw=zt({...dte,disabled:Boolean,trigger:{type:et([String,Array]),default:"hover"},triggerKeys:{type:et(Array),default:()=>[Kt.enter,Kt.numpadEnter,Kt.space]}}),_Ce=Xc({type:et(Boolean),default:null}),bCe=Xc({type:et(Function)}),Rte=n=>{const e=`update:${n}`,t=`onUpdate:${n}`,i=[e],r={[n]:_Ce,[t]:bCe};return{useModelToggle:({indicator:a,toggleReason:o,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:d})=>{const f=Qn(),{emit:h}=f,p=f.props,m=W(()=>pn(p[t])),g=W(()=>p[n]===null),v=A=>{a.value!==!0&&(a.value=!0,o&&(o.value=A),pn(c)&&c(A))},_=A=>{a.value!==!1&&(a.value=!1,o&&(o.value=A),pn(d)&&d(A))},y=A=>{if(p.disabled===!0||pn(u)&&!u())return;const T=m.value&&xi;T&&h(e,!0),(g.value||!T)&&v(A)},b=A=>{if(p.disabled===!0||!xi)return;const T=m.value&&xi;T&&h(e,!1),(g.value||!T)&&_(A)},x=A=>{fr(A)&&(p.disabled&&A?m.value&&h(e,!1):a.value!==A&&(A?v():_()))},w=()=>{a.value?b():y()};return St(()=>p[n],x),l&&f.appContext.config.globalProperties.$route!==void 0&&St(()=>({...f.proxy.$route}),()=>{l.value&&a.value&&b()}),Ln(()=>{x(p[n])}),{hide:b,show:y,toggle:w,hasUpdateHandler:m}},useModelToggleProps:r,useModelToggleEmits:i}};Rte("modelValue");const{useModelToggleProps:SCe,useModelToggleEmits:xCe,useModelToggle:wCe}=Rte("visible"),TCe=zt({...ute,...SCe,...ua,...tw,...cte,showArrow:{type:Boolean,default:!0}}),CCe=[...xCe,"before-show","before-hide","show","hide","open","close"],ACe=(n,e)=>Bt(n)?n.includes(e):n===e,Nv=(n,e,t)=>i=>{ACe(S(n),e)&&t(i)},es=(n,e,{checkForDefaultPrevented:t=!0}={})=>r=>{const s=n==null?void 0:n(r);if(t===!1||!s)return e==null?void 0:e(r)},qV=n=>e=>e.pointerType==="mouse"?n(e):void 0,ECe=Ne({name:"ElTooltipTrigger"}),MCe=Ne({...ECe,props:tw,setup(n,{expose:e}){const t=n,i=Rt("tooltip"),{controlled:r,id:s,open:a,onOpen:o,onClose:l,onToggle:u}=Zt(ZI,void 0),c=ae(null),d=()=>{if(S(r)||t.disabled)return!0},f=$i(t,"trigger"),h=es(d,Nv(f,"hover",o)),p=es(d,Nv(f,"hover",l)),m=es(d,Nv(f,"click",b=>{b.button===0&&u(b)})),g=es(d,Nv(f,"focus",o)),v=es(d,Nv(f,"focus",l)),_=es(d,Nv(f,"contextmenu",b=>{b.preventDefault(),u(b)})),y=es(d,b=>{const{code:x}=b;t.triggerKeys.includes(x)&&(b.preventDefault(),u(b))});return e({triggerRef:c}),(b,x)=>(j(),gt(S(zwe),{id:S(s),"virtual-ref":b.virtualRef,open:S(a),"virtual-triggering":b.virtualTriggering,class:ee(S(i).e("trigger")),onBlur:S(v),onClick:S(m),onContextmenu:S(_),onFocus:S(g),onMouseenter:S(h),onMouseleave:S(p),onKeydown:S(y)},{default:Ae(()=>[at(b.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var ICe=Vt(MCe,[["__file","trigger.vue"]]);const DCe=zt({to:{type:et([String,Object]),required:!0},disabled:Boolean}),RCe=Ne({__name:"teleport",props:DCe,setup(n){return(e,t)=>e.disabled?at(e.$slots,"default",{key:0}):(j(),gt(bme,{key:1,to:e.to},[at(e.$slots,"default")],8,["to"]))}});var PCe=Vt(RCe,[["__file","teleport.vue"]]);const pb=Nn(PCe),Pte=()=>{const n=OB(),e=cF(),t=W(()=>`${n.value}-popper-container-${e.prefix}`),i=W(()=>`#${t.value}`);return{id:t,selector:i}},kCe=n=>{const e=document.createElement("div");return e.id=n,document.body.appendChild(e),e},LCe=()=>{const{id:n,selector:e}=Pte();return RI(()=>{xi&&(document.body.querySelector(e.value)||kCe(n.value))}),{id:n,selector:e}},OCe=Ne({name:"ElTooltipContent",inheritAttrs:!1}),NCe=Ne({...OCe,props:ua,setup(n,{expose:e}){const t=n,{selector:i}=Pte(),r=Rt("tooltip"),s=ae();let a;const{controlled:o,id:l,open:u,trigger:c,onClose:d,onOpen:f,onShow:h,onHide:p,onBeforeShow:m,onBeforeHide:g}=Zt(ZI,void 0),v=W(()=>t.transition||`${r.namespace.value}-fade-in-linear`),_=W(()=>t.persistent);Vi(()=>{a==null||a()});const y=W(()=>S(_)?!0:S(u)),b=W(()=>t.disabled?!1:S(u)),x=W(()=>t.appendTo||i.value),w=W(()=>{var L;return(L=t.style)!=null?L:{}}),A=ae(!0),T=()=>{p(),A.value=!0},C=()=>{if(S(o))return!0},E=es(C,()=>{t.enterable&&S(c)==="hover"&&f()}),I=es(C,()=>{S(c)==="hover"&&d()}),k=()=>{var L,G;(G=(L=s.value)==null?void 0:L.updatePopper)==null||G.call(L),m==null||m()},O=()=>{g==null||g()},U=()=>{h(),a=ZB(W(()=>{var L;return(L=s.value)==null?void 0:L.popperContentRef}),()=>{if(S(o))return;S(c)!=="hover"&&d()})},z=()=>{t.virtualTriggering||d()};return St(()=>S(u),L=>{L?A.value=!1:a==null||a()},{flush:"post"}),St(()=>t.content,()=>{var L,G;(G=(L=s.value)==null?void 0:L.updatePopper)==null||G.call(L)}),e({contentRef:s}),(L,G)=>(j(),gt(S(pb),{disabled:!L.teleported,to:S(x)},{default:Ae(()=>[he(Ks,{name:S(v),onAfterLeave:T,onBeforeEnter:k,onAfterEnter:U,onBeforeLeave:O},{default:Ae(()=>[S(y)?Vn((j(),gt(S(gCe),si({key:0,id:S(l),ref_key:"contentRef",ref:s},L.$attrs,{"aria-label":L.ariaLabel,"aria-hidden":A.value,"boundaries-padding":L.boundariesPadding,"fallback-placements":L.fallbackPlacements,"gpu-acceleration":L.gpuAcceleration,offset:L.offset,placement:L.placement,"popper-options":L.popperOptions,strategy:L.strategy,effect:L.effect,enterable:L.enterable,pure:L.pure,"popper-class":L.popperClass,"popper-style":[L.popperStyle,S(w)],"reference-el":L.referenceEl,"trigger-target-el":L.triggerTargetEl,visible:S(b),"z-index":L.zIndex,onMouseenter:S(E),onMouseleave:S(I),onBlur:z,onClose:S(d)}),{default:Ae(()=>[at(L.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Oi,S(b)]]):ot("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var BCe=Vt(NCe,[["__file","content.vue"]]);const FCe=Ne({name:"ElTooltip"}),UCe=Ne({...FCe,props:TCe,emits:CCe,setup(n,{expose:e,emit:t}){const i=n;LCe();const r=Oa(),s=ae(),a=ae(),o=()=>{var v;const _=S(s);_&&((v=_.popperInstanceRef)==null||v.update())},l=ae(!1),u=ae(),{show:c,hide:d,hasUpdateHandler:f}=wCe({indicator:l,toggleReason:u}),{onOpen:h,onClose:p}=yCe({showAfter:$i(i,"showAfter"),hideAfter:$i(i,"hideAfter"),autoClose:$i(i,"autoClose"),open:c,close:d}),m=W(()=>fr(i.visible)&&!f.value);ui(ZI,{controlled:m,id:r,open:sb(l),trigger:$i(i,"trigger"),onOpen:v=>{h(v)},onClose:v=>{p(v)},onToggle:v=>{S(l)?p(v):h(v)},onShow:()=>{t("show",u.value)},onHide:()=>{t("hide",u.value)},onBeforeShow:()=>{t("before-show",u.value)},onBeforeHide:()=>{t("before-hide",u.value)},updatePopper:o}),St(()=>i.disabled,v=>{v&&l.value&&(l.value=!1)});const g=v=>{var _,y;const b=(y=(_=a.value)==null?void 0:_.contentRef)==null?void 0:y.popperContentRef,x=(v==null?void 0:v.relatedTarget)||document.activeElement;return b&&b.contains(x)};return yJ(()=>l.value&&d()),e({popperRef:s,contentRef:a,isFocusInsideContent:g,updatePopper:o,onOpen:h,onClose:p,hide:d}),(v,_)=>(j(),gt(S(Dte),{ref_key:"popperRef",ref:s,role:v.role},{default:Ae(()=>[he(ICe,{disabled:v.disabled,trigger:v.trigger,"trigger-keys":v.triggerKeys,"virtual-ref":v.virtualRef,"virtual-triggering":v.virtualTriggering},{default:Ae(()=>[v.$slots.default?at(v.$slots,"default",{key:0}):ot("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),he(BCe,{ref_key:"contentRef",ref:a,"aria-label":v.ariaLabel,"boundaries-padding":v.boundariesPadding,content:v.content,disabled:v.disabled,effect:v.effect,enterable:v.enterable,"fallback-placements":v.fallbackPlacements,"hide-after":v.hideAfter,"gpu-acceleration":v.gpuAcceleration,offset:v.offset,persistent:v.persistent,"popper-class":v.popperClass,"popper-style":v.popperStyle,placement:v.placement,"popper-options":v.popperOptions,pure:v.pure,"raw-content":v.rawContent,"reference-el":v.referenceEl,"trigger-target-el":v.triggerTargetEl,"show-after":v.showAfter,strategy:v.strategy,teleported:v.teleported,transition:v.transition,"virtual-triggering":v.virtualTriggering,"z-index":v.zIndex,"append-to":v.appendTo},{default:Ae(()=>[at(v.$slots,"content",{},()=>[v.rawContent?(j(),_e("span",{key:0,innerHTML:v.content},null,8,["innerHTML"])):(j(),_e("span",{key:1},Lt(v.content),1))]),v.showArrow?(j(),gt(S(Pwe),{key:0,"arrow-offset":v.arrowOffset},null,8,["arrow-offset"])):ot("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var zCe=Vt(UCe,[["__file","tooltip.vue"]]);const Ja=Nn(zCe),HCe=zt({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:et(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:et([Function,Array]),default:qi},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},teleported:ua.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String,...Ba(["ariaLabel"])}),VCe={[$n]:n=>un(n),[Qa]:n=>un(n),[er]:n=>un(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,select:n=>Yn(n)},kte="ElAutocomplete",$Ce=Ne({name:kte,inheritAttrs:!1}),GCe=Ne({...$Ce,props:HCe,emits:VCe,setup(n,{expose:e,emit:t}){const i=n,r=hT(),s=S0(),a=no(),o=Rt("autocomplete"),l=ae(),u=ae(),c=ae(),d=ae();let f=!1,h=!1;const p=ae([]),m=ae(-1),g=ae(""),v=ae(!1),_=ae(!1),y=ae(!1),b=Oa(),x=W(()=>s.style),w=W(()=>(p.value.length>0||y.value)&&v.value),A=W(()=>!i.hideLoading&&y.value),T=W(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),C=()=>{w.value&&(g.value=`${l.value.$el.offsetWidth}px`)},E=()=>{m.value=-1},I=async ye=>{if(_.value)return;const Oe=Be=>{y.value=!1,!_.value&&(Bt(Be)?(p.value=Be,m.value=i.highlightFirstItem?0:-1):Xs(kte,"autocomplete suggestions must be an array"))};if(y.value=!0,Bt(i.fetchSuggestions))Oe(i.fetchSuggestions);else{const Be=await i.fetchSuggestions(ye,Oe);Bt(Be)&&Oe(Be)}},k=Rl(I,i.debounce),O=ye=>{const Oe=!!ye;if(t(Qa,ye),t($n,ye),_.value=!1,v.value||(v.value=Oe),!i.triggerOnFocus&&!ye){_.value=!0,p.value=[];return}k(ye)},U=ye=>{var Oe;a.value||(((Oe=ye.target)==null?void 0:Oe.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(v.value=!0)},z=ye=>{t(er,ye)},L=ye=>{h?h=!1:(v.value=!0,t("focus",ye),i.triggerOnFocus&&!f&&k(String(i.modelValue)))},G=ye=>{setTimeout(()=>{var Oe;if((Oe=c.value)!=null&&Oe.isFocusInsideContent()){h=!0;return}v.value&&te(),t("blur",ye)})},H=()=>{v.value=!1,t($n,""),t("clear")},F=async()=>{w.value&&m.value>=0&&m.value<p.value.length?le(p.value[m.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),p.value=[],m.value=-1)},X=ye=>{w.value&&(ye.preventDefault(),ye.stopPropagation(),te())},te=()=>{v.value=!1},re=()=>{var ye;(ye=l.value)==null||ye.focus()},ie=()=>{var ye;(ye=l.value)==null||ye.blur()},le=async ye=>{t(Qa,ye[i.valueKey]),t($n,ye[i.valueKey]),t("select",ye),p.value=[],m.value=-1},ge=ye=>{if(!w.value||y.value)return;if(ye<0){m.value=-1;return}ye>=p.value.length&&(ye=p.value.length-1);const Oe=u.value.querySelector(`.${o.be("suggestion","wrap")}`),Ye=Oe.querySelectorAll(`.${o.be("suggestion","list")} li`)[ye],Ze=Oe.scrollTop,{offsetTop:Q,scrollHeight:me}=Ye;Q+me>Ze+Oe.clientHeight&&(Oe.scrollTop+=me),Q<Ze&&(Oe.scrollTop-=me),m.value=ye,l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`)},pe=ZB(d,()=>{w.value&&te()});return Vi(()=>{pe==null||pe()}),Ln(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${b.value}-item-${m.value}`),f=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:v,loading:y,inputRef:l,popperRef:c,suggestions:p,handleSelect:le,handleKeyEnter:F,focus:re,blur:ie,close:te,highlight:ge,getData:I}),(ye,Oe)=>(j(),gt(S(Ja),{ref_key:"popperRef",ref:c,visible:S(w),placement:ye.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[S(o).e("popper"),ye.popperClass],teleported:ye.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${S(o).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:C,onHide:E},{content:Ae(()=>[Te("div",{ref_key:"regionRef",ref:u,class:ee([S(o).b("suggestion"),S(o).is("loading",S(A))]),style:Jt({[ye.fitInputWidth?"width":"minWidth"]:g.value,outline:"none"}),role:"region"},[he(S(nf),{id:S(b),tag:"ul","wrap-class":S(o).be("suggestion","wrap"),"view-class":S(o).be("suggestion","list"),role:"listbox"},{default:Ae(()=>[S(A)?(j(),_e("li",{key:0},[at(ye.$slots,"loading",{},()=>[he(S(rn),{class:ee(S(o).is("loading"))},{default:Ae(()=>[he(S($d))]),_:1},8,["class"])])])):(j(!0),_e(an,{key:1},ti(p.value,(Be,Ye)=>(j(),_e("li",{id:`${S(b)}-item-${Ye}`,key:Ye,class:ee({highlighted:m.value===Ye}),role:"option","aria-selected":m.value===Ye,onClick:Ze=>le(Be)},[at(ye.$slots,"default",{item:Be},()=>[An(Lt(Be[ye.valueKey]),1)])],10,["id","aria-selected","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:Ae(()=>[Te("div",{ref_key:"listboxRef",ref:d,class:ee([S(o).b(),ye.$attrs.class]),style:Jt(S(x)),role:"combobox","aria-haspopup":"listbox","aria-expanded":S(w),"aria-owns":S(b)},[he(S(So),si({ref_key:"inputRef",ref:l},S(r),{clearable:ye.clearable,disabled:S(a),name:ye.name,"model-value":ye.modelValue,"aria-label":ye.ariaLabel,onInput:O,onChange:z,onFocus:L,onBlur:G,onClear:H,onKeydown:[ur(wn(Be=>ge(m.value-1),["prevent"]),["up"]),ur(wn(Be=>ge(m.value+1),["prevent"]),["down"]),ur(F,["enter"]),ur(te,["tab"]),ur(X,["esc"])],onMousedown:U}),tc({_:2},[ye.$slots.prepend?{name:"prepend",fn:Ae(()=>[at(ye.$slots,"prepend")])}:void 0,ye.$slots.append?{name:"append",fn:Ae(()=>[at(ye.$slots,"append")])}:void 0,ye.$slots.prefix?{name:"prefix",fn:Ae(()=>[at(ye.$slots,"prefix")])}:void 0,ye.$slots.suffix?{name:"suffix",fn:Ae(()=>[at(ye.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","aria-label","onKeydown"])],14,["aria-expanded","aria-owns"])]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var WCe=Vt(GCe,[["__file","autocomplete.vue"]]);const qCe=Nn(WCe),jCe=zt({size:{type:[Number,String],values:tf,default:"",validator:n=>yn(n)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:nr},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:et(String),default:"cover"}}),KCe={error:n=>n instanceof Event},XCe=Ne({name:"ElAvatar"}),YCe=Ne({...XCe,props:jCe,emits:KCe,setup(n,{emit:e}){const t=n,i=Rt("avatar"),r=ae(!1),s=W(()=>{const{size:u,icon:c,shape:d}=t,f=[i.b()];return un(u)&&f.push(i.m(u)),c&&f.push(i.m("icon")),d&&f.push(i.m(d)),f}),a=W(()=>{const{size:u}=t;return yn(u)?i.cssVarBlock({size:ns(u)||""}):void 0}),o=W(()=>({objectFit:t.fit}));St(()=>t.src,()=>r.value=!1);function l(u){r.value=!0,e("error",u)}return(u,c)=>(j(),_e("span",{class:ee(S(s)),style:Jt(S(a))},[(u.src||u.srcSet)&&!r.value?(j(),_e("img",{key:0,src:u.src,alt:u.alt,srcset:u.srcSet,style:Jt(S(o)),onError:l},null,44,["src","alt","srcset"])):u.icon?(j(),gt(S(rn),{key:1},{default:Ae(()=>[(j(),gt(ei(u.icon)))]),_:1})):at(u.$slots,"default",{key:2})],6))}});var QCe=Vt(YCe,[["__file","avatar.vue"]]);const ZCe=Nn(QCe),JCe={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},eAe={click:n=>n instanceof MouseEvent},tAe=(n,e,t)=>{const i=Ji(),r=Ji(),s=ae(!1),a=()=>{i.value&&(s.value=i.value.scrollTop>=n.visibilityHeight)},o=u=>{var c;(c=i.value)==null||c.scrollTo({top:0,behavior:"smooth"}),e("click",u)},l=Uee(a,300,!0);return Yi(r,"scroll",l),Ln(()=>{var u;r.value=document,i.value=document.documentElement,n.target&&(i.value=(u=document.querySelector(n.target))!=null?u:void 0,i.value||Xs(t,`target does not exist: ${n.target}`),r.value=i.value),a()}),{visible:s,handleClick:o}},Lte="ElBacktop",nAe=Ne({name:Lte}),iAe=Ne({...nAe,props:JCe,emits:eAe,setup(n,{emit:e}){const t=n,i=Rt("backtop"),{handleClick:r,visible:s}=tAe(t,e,Lte),a=W(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(o,l)=>(j(),gt(Ks,{name:`${S(i).namespace.value}-fade-in`},{default:Ae(()=>[S(s)?(j(),_e("div",{key:0,style:Jt(S(a)),class:ee(S(i).b()),onClick:wn(S(r),["stop"])},[at(o.$slots,"default",{},()=>[he(S(rn),{class:ee(S(i).e("icon"))},{default:Ae(()=>[he(S(Fxe))]),_:1},8,["class"])])],14,["onClick"])):ot("v-if",!0)]),_:3},8,["name"]))}});var rAe=Vt(iAe,[["__file","backtop.vue"]]);const sAe=Nn(rAe),aAe=zt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:et([String,Object,Array])},offset:{type:et(Array),default:[0,0]},badgeClass:{type:String}}),oAe=Ne({name:"ElBadge"}),lAe=Ne({...oAe,props:aAe,setup(n,{expose:e}){const t=n,i=Rt("badge"),r=W(()=>t.isDot?"":yn(t.value)&&yn(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`),s=W(()=>{var a,o,l,u,c;return[{backgroundColor:t.color,marginRight:ns(-((o=(a=t.offset)==null?void 0:a[0])!=null?o:0)),marginTop:ns((u=(l=t.offset)==null?void 0:l[1])!=null?u:0)},(c=t.badgeStyle)!=null?c:{}]});return e({content:r}),(a,o)=>(j(),_e("div",{class:ee(S(i).b())},[at(a.$slots,"default"),he(Ks,{name:`${S(i).namespace.value}-zoom-in-center`,persisted:""},{default:Ae(()=>[Vn(Te("sup",{class:ee([S(i).e("content"),S(i).em("content",a.type),S(i).is("fixed",!!a.$slots.default),S(i).is("dot",a.isDot),S(i).is("hide-zero",!a.showZero&&t.value===0),a.badgeClass]),style:Jt(S(s))},[at(a.$slots,"content",{value:S(r)},()=>[An(Lt(S(r)),1)])],6),[[Oi,!a.hidden&&(S(r)||a.isDot||a.$slots.content)]])]),_:3},8,["name"])],2))}});var uAe=Vt(lAe,[["__file","badge.vue"]]);const Ote=Nn(uAe),Nte=Symbol("breadcrumbKey"),cAe=zt({separator:{type:String,default:"/"},separatorIcon:{type:nr}}),dAe=Ne({name:"ElBreadcrumb"}),fAe=Ne({...dAe,props:cAe,setup(n){const e=n,{t}=wi(),i=Rt("breadcrumb"),r=ae();return ui(Nte,e),Ln(()=>{const s=r.value.querySelectorAll(`.${i.e("item")}`);s.length&&s[s.length-1].setAttribute("aria-current","page")}),(s,a)=>(j(),_e("div",{ref_key:"breadcrumb",ref:r,class:ee(S(i).b()),"aria-label":S(t)("el.breadcrumb.label"),role:"navigation"},[at(s.$slots,"default")],10,["aria-label"]))}});var hAe=Vt(fAe,[["__file","breadcrumb.vue"]]);const pAe=zt({to:{type:et([String,Object]),default:""},replace:Boolean}),mAe=Ne({name:"ElBreadcrumbItem"}),gAe=Ne({...mAe,props:pAe,setup(n){const e=n,t=Qn(),i=Zt(Nte,void 0),r=Rt("breadcrumb"),s=t.appContext.config.globalProperties.$router,a=ae(),o=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,u)=>{var c,d;return j(),_e("span",{class:ee(S(r).e("item"))},[Te("span",{ref_key:"link",ref:a,class:ee([S(r).e("inner"),S(r).is("link",!!l.to)]),role:"link",onClick:o},[at(l.$slots,"default")],2),(c=S(i))!=null&&c.separatorIcon?(j(),gt(S(rn),{key:0,class:ee(S(r).e("separator"))},{default:Ae(()=>[(j(),gt(ei(S(i).separatorIcon)))]),_:1},8,["class"])):(j(),_e("span",{key:1,class:ee(S(r).e("separator")),role:"presentation"},Lt((d=S(i))==null?void 0:d.separator),3))],2)}}});var Bte=Vt(gAe,[["__file","breadcrumb-item.vue"]]);const vAe=Nn(hAe,{BreadcrumbItem:Bte}),yAe=Xr(Bte),Fte=Symbol("buttonGroupContextKey"),Bp=({from:n,replacement:e,scope:t,version:i,ref:r,type:s="API"},a)=>{St(()=>S(a),o=>{},{immediate:!0})},_Ae=(n,e)=>{Bp({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},W(()=>n.type==="text"));const t=Zt(Fte,void 0),i=WI("button"),{form:r}=to(),s=ws(W(()=>t==null?void 0:t.size)),a=no(),o=ae(),l=Ls(),u=W(()=>n.type||(t==null?void 0:t.type)||""),c=W(()=>{var p,m,g;return(g=(m=n.autoInsertSpace)!=null?m:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?g:!1}),d=W(()=>n.tag==="button"?{ariaDisabled:a.value||n.loading,disabled:a.value||n.loading,autofocus:n.autofocus,type:n.nativeType}:{}),f=W(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(c.value&&(m==null?void 0:m.length)===1){const g=m[0];if((g==null?void 0:g.type)===ab){const v=g.children;return/^\p{Unified_Ideograph}{2}$/u.test(v.trim())}}return!1});return{_disabled:a,_size:s,_type:u,_ref:o,_props:d,shouldAddSpace:f,handleClick:p=>{if(a.value||n.loading){p.stopPropagation();return}n.nativeType==="reset"&&(r==null||r.resetFields()),e("click",p)}}},c6=["default","primary","success","warning","info","danger","text",""],bAe=["button","submit","reset"],d6=zt({size:ks,disabled:Boolean,type:{type:String,values:c6,default:""},icon:{type:nr},nativeType:{type:String,values:bAe,default:"button"},loading:Boolean,loadingIcon:{type:nr,default:()=>$d},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:et([String,Object]),default:"button"}}),SAe={click:n=>n instanceof MouseEvent};function Za(n,e){xAe(n)&&(n="100%");var t=wAe(n);return n=e===360?n:Math.min(e,Math.max(0,parseFloat(n))),t&&(n=parseInt(String(n*e),10)/100),Math.abs(n-e)<1e-6?1:(e===360?n=(n<0?n%e+e:n%e)/parseFloat(String(e)):n=n%e/parseFloat(String(e)),n)}function jC(n){return Math.min(1,Math.max(0,n))}function xAe(n){return typeof n=="string"&&n.indexOf(".")!==-1&&parseFloat(n)===1}function wAe(n){return typeof n=="string"&&n.indexOf("%")!==-1}function Ute(n){return n=parseFloat(n),(isNaN(n)||n<0||n>1)&&(n=1),n}function KC(n){return n<=1?"".concat(Number(n)*100,"%"):n}function Ym(n){return n.length===1?"0"+n:String(n)}function TAe(n,e,t){return{r:Za(n,255)*255,g:Za(e,255)*255,b:Za(t,255)*255}}function jV(n,e,t){n=Za(n,255),e=Za(e,255),t=Za(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=0,o=(i+r)/2;if(i===r)a=0,s=0;else{var l=i-r;switch(a=o>.5?l/(2-i-r):l/(i+r),i){case n:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-n)/l+2;break;case t:s=(n-e)/l+4;break}s/=6}return{h:s,s:a,l:o}}function JR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*(6*t):t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function CAe(n,e,t){var i,r,s;if(n=Za(n,360),e=Za(e,100),t=Za(t,100),e===0)r=t,s=t,i=t;else{var a=t<.5?t*(1+e):t+e-t*e,o=2*t-a;i=JR(o,a,n+1/3),r=JR(o,a,n),s=JR(o,a,n-1/3)}return{r:i*255,g:r*255,b:s*255}}function KV(n,e,t){n=Za(n,255),e=Za(e,255),t=Za(t,255);var i=Math.max(n,e,t),r=Math.min(n,e,t),s=0,a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:s=(e-t)/o+(e<t?6:0);break;case e:s=(t-n)/o+2;break;case t:s=(n-e)/o+4;break}s/=6}return{h:s,s:l,v:a}}function AAe(n,e,t){n=Za(n,360)*6,e=Za(e,100),t=Za(t,100);var i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,u=[t,a,s,s,o,t][l],c=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:u*255,g:c*255,b:d*255}}function XV(n,e,t,i){var r=[Ym(Math.round(n).toString(16)),Ym(Math.round(e).toString(16)),Ym(Math.round(t).toString(16))];return i&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function EAe(n,e,t,i,r){var s=[Ym(Math.round(n).toString(16)),Ym(Math.round(e).toString(16)),Ym(Math.round(t).toString(16)),Ym(MAe(i))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function MAe(n){return Math.round(parseFloat(n)*255).toString(16)}function YV(n){return Yl(n)/255}function Yl(n){return parseInt(n,16)}function IAe(n){return{r:n>>16,g:(n&65280)>>8,b:n&255}}var f6={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function DAe(n){var e={r:0,g:0,b:0},t=1,i=null,r=null,s=null,a=!1,o=!1;return typeof n=="string"&&(n=kAe(n)),typeof n=="object"&&(pf(n.r)&&pf(n.g)&&pf(n.b)?(e=TAe(n.r,n.g,n.b),a=!0,o=String(n.r).substr(-1)==="%"?"prgb":"rgb"):pf(n.h)&&pf(n.s)&&pf(n.v)?(i=KC(n.s),r=KC(n.v),e=AAe(n.h,i,r),a=!0,o="hsv"):pf(n.h)&&pf(n.s)&&pf(n.l)&&(i=KC(n.s),s=KC(n.l),e=CAe(n.h,i,s),a=!0,o="hsl"),Object.prototype.hasOwnProperty.call(n,"a")&&(t=n.a)),t=Ute(t),{ok:a,format:n.format||o,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var RAe="[-\\+]?\\d+%?",PAe="[-\\+]?\\d*\\.\\d+%?",Ep="(?:".concat(PAe,")|(?:").concat(RAe,")"),eP="[\\s|\\(]+(".concat(Ep,")[,|\\s]+(").concat(Ep,")[,|\\s]+(").concat(Ep,")\\s*\\)?"),tP="[\\s|\\(]+(".concat(Ep,")[,|\\s]+(").concat(Ep,")[,|\\s]+(").concat(Ep,")[,|\\s]+(").concat(Ep,")\\s*\\)?"),Ec={CSS_UNIT:new RegExp(Ep),rgb:new RegExp("rgb"+eP),rgba:new RegExp("rgba"+tP),hsl:new RegExp("hsl"+eP),hsla:new RegExp("hsla"+tP),hsv:new RegExp("hsv"+eP),hsva:new RegExp("hsva"+tP),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function kAe(n){if(n=n.trim().toLowerCase(),n.length===0)return!1;var e=!1;if(f6[n])n=f6[n],e=!0;else if(n==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Ec.rgb.exec(n);return t?{r:t[1],g:t[2],b:t[3]}:(t=Ec.rgba.exec(n),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Ec.hsl.exec(n),t?{h:t[1],s:t[2],l:t[3]}:(t=Ec.hsla.exec(n),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Ec.hsv.exec(n),t?{h:t[1],s:t[2],v:t[3]}:(t=Ec.hsva.exec(n),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Ec.hex8.exec(n),t?{r:Yl(t[1]),g:Yl(t[2]),b:Yl(t[3]),a:YV(t[4]),format:e?"name":"hex8"}:(t=Ec.hex6.exec(n),t?{r:Yl(t[1]),g:Yl(t[2]),b:Yl(t[3]),format:e?"name":"hex"}:(t=Ec.hex4.exec(n),t?{r:Yl(t[1]+t[1]),g:Yl(t[2]+t[2]),b:Yl(t[3]+t[3]),a:YV(t[4]+t[4]),format:e?"name":"hex8"}:(t=Ec.hex3.exec(n),t?{r:Yl(t[1]+t[1]),g:Yl(t[2]+t[2]),b:Yl(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function pf(n){return!!Ec.CSS_UNIT.exec(String(n))}var zte=function(){function n(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof n)return e;typeof e=="number"&&(e=IAe(e)),this.originalInput=e;var r=DAe(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return n.prototype.isDark=function(){return this.getBrightness()<128},n.prototype.isLight=function(){return!this.isDark()},n.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},n.prototype.getLuminance=function(){var e=this.toRgb(),t,i,r,s=e.r/255,a=e.g/255,o=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),a<=.03928?i=a/12.92:i=Math.pow((a+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),.2126*t+.7152*i+.0722*r},n.prototype.getAlpha=function(){return this.a},n.prototype.setAlpha=function(e){return this.a=Ute(e),this.roundA=Math.round(100*this.a)/100,this},n.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},n.prototype.toHsv=function(){var e=KV(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},n.prototype.toHsvString=function(){var e=KV(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHsl=function(){var e=jV(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},n.prototype.toHslString=function(){var e=jV(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(r,"%, ").concat(this.roundA,")")},n.prototype.toHex=function(e){return e===void 0&&(e=!1),XV(this.r,this.g,this.b,e)},n.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},n.prototype.toHex8=function(e){return e===void 0&&(e=!1),EAe(this.r,this.g,this.b,this.a,e)},n.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},n.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},n.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},n.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},n.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Za(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},n.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Za(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},n.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+XV(this.r,this.g,this.b,!1),t=0,i=Object.entries(f6);t<i.length;t++){var r=i[t],s=r[0],a=r[1];if(e===a)return s}return!1},n.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,r=this.a<1&&this.a>=0,s=!t&&r&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},n.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},n.prototype.clone=function(){return new n(this.toString())},n.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=jC(t.l),new n(t)},n.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new n(t)},n.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=jC(t.l),new n(t)},n.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},n.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},n.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=jC(t.s),new n(t)},n.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=jC(t.s),new n(t)},n.prototype.greyscale=function(){return this.desaturate(100)},n.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new n(t)},n.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),r=new n(e).toRgb(),s=t/100,a={r:(r.r-i.r)*s+i.r,g:(r.g-i.g)*s+i.g,b:(r.b-i.b)*s+i.b,a:(r.a-i.a)*s+i.a};return new n(a)},n.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),r=360/t,s=[this];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,s.push(new n(i));return s},n.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new n(e)},n.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,r=t.s,s=t.v,a=[],o=1/e;e--;)a.push(new n({h:i,s:r,v:s})),s=(s+o)%1;return a},n.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new n({h:(t+72)%360,s:e.s,l:e.l}),new n({h:(t+216)%360,s:e.s,l:e.l})]},n.prototype.onBackground=function(e){var t=this.toRgb(),i=new n(e).toRgb(),r=t.a+i.a*(1-t.a);return new n({r:(t.r*t.a+i.r*i.a*(1-t.a))/r,g:(t.g*t.a+i.g*i.a*(1-t.a))/r,b:(t.b*t.a+i.b*i.a*(1-t.a))/r,a:r})},n.prototype.triad=function(){return this.polyad(3)},n.prototype.tetrad=function(){return this.polyad(4)},n.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,r=[this],s=360/e,a=1;a<e;a++)r.push(new n({h:(i+a*s)%360,s:t.s,l:t.l}));return r},n.prototype.equals=function(e){return this.toRgbString()===new n(e).toRgbString()},n}();function Fh(n,e=20){return n.mix("#141414",e).toString()}function LAe(n){const e=no(),t=Rt("button");return W(()=>{let i={},r=n.color;if(r){const s=r.match(/var\((.*?)\)/);s&&(r=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const a=new zte(r),o=n.dark?a.tint(20).toString():Fh(a,20);if(n.plain)i=t.cssVarBlock({"bg-color":n.dark?Fh(a,90):a.tint(90).toString(),"text-color":r,"border-color":n.dark?Fh(a,50):a.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":r,"hover-border-color":r,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=n.dark?Fh(a,90):a.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=n.dark?Fh(a,50):a.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=n.dark?Fh(a,80):a.tint(80).toString());else{const l=n.dark?Fh(a,30):a.tint(30).toString(),u=a.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":r,"text-color":u,"border-color":r,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":o,"active-border-color":o}),e.value){const c=n.dark?Fh(a,50):a.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=c,i[t.cssVarBlockName("disabled-text-color")]=n.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=c}}}return i})}const OAe=Ne({name:"ElButton"}),NAe=Ne({...OAe,props:d6,emits:SAe,setup(n,{expose:e,emit:t}){const i=n,r=LAe(i),s=Rt("button"),{_ref:a,_size:o,_type:l,_disabled:u,_props:c,shouldAddSpace:d,handleClick:f}=_Ae(i,t),h=W(()=>[s.b(),s.m(l.value),s.m(o.value),s.is("disabled",u.value),s.is("loading",i.loading),s.is("plain",i.plain),s.is("round",i.round),s.is("circle",i.circle),s.is("text",i.text),s.is("link",i.link),s.is("has-bg",i.bg)]);return e({ref:a,size:o,type:l,disabled:u,shouldAddSpace:d}),(p,m)=>(j(),gt(ei(p.tag),si({ref_key:"_ref",ref:a},S(c),{class:S(h),style:S(r),onClick:S(f)}),{default:Ae(()=>[p.loading?(j(),_e(an,{key:0},[p.$slots.loading?at(p.$slots,"loading",{key:0}):(j(),gt(S(rn),{key:1,class:ee(S(s).is("loading"))},{default:Ae(()=>[(j(),gt(ei(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(j(),gt(S(rn),{key:1},{default:Ae(()=>[p.icon?(j(),gt(ei(p.icon),{key:0})):at(p.$slots,"icon",{key:1})]),_:3})):ot("v-if",!0),p.$slots.default?(j(),_e("span",{key:2,class:ee({[S(s).em("text","expand")]:S(d)})},[at(p.$slots,"default")],2)):ot("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var BAe=Vt(NAe,[["__file","button.vue"]]);const FAe={size:d6.size,type:d6.type},UAe=Ne({name:"ElButtonGroup"}),zAe=Ne({...UAe,props:FAe,setup(n){const e=n;ui(Fte,Ui({size:$i(e,"size"),type:$i(e,"type")}));const t=Rt("button");return(i,r)=>(j(),_e("div",{class:ee(S(t).b("group"))},[at(i.$slots,"default")],2))}});var Hte=Vt(zAe,[["__file","button-group.vue"]]);const _a=Nn(BAe,{ButtonGroup:Hte}),Vte=Xr(Hte);var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function $te(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var Gte={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){var t=1e3,i=6e4,r=36e5,s="millisecond",a="second",o="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(U){var z=["th","st","nd","rd"],L=U%100;return"["+U+(z[(L-20)%10]||z[L]||z[0])+"]"}},y=function(U,z,L){var G=String(U);return!G||G.length>=z?U:""+Array(z+1-G.length).join(L)+U},b={s:y,z:function(U){var z=-U.utcOffset(),L=Math.abs(z),G=Math.floor(L/60),H=L%60;return(z<=0?"+":"-")+y(G,2,"0")+":"+y(H,2,"0")},m:function U(z,L){if(z.date()<L.date())return-U(L,z);var G=12*(L.year()-z.year())+(L.month()-z.month()),H=z.clone().add(G,d),F=L-H<0,X=z.clone().add(G+(F?-1:1),d);return+(-(G+(L-H)/(F?H-X:X-H))||0)},a:function(U){return U<0?Math.ceil(U)||0:Math.floor(U)},p:function(U){return{M:d,y:h,w:c,d:u,D:p,h:l,m:o,s:a,ms:s,Q:f}[U]||String(U||"").toLowerCase().replace(/s$/,"")},u:function(U){return U===void 0}},x="en",w={};w[x]=_;var A="$isDayjsObject",T=function(U){return U instanceof k||!(!U||!U[A])},C=function U(z,L,G){var H;if(!z)return x;if(typeof z=="string"){var F=z.toLowerCase();w[F]&&(H=F),L&&(w[F]=L,H=F);var X=z.split("-");if(!H&&X.length>1)return U(X[0])}else{var te=z.name;w[te]=z,H=te}return!G&&H&&(x=H),H||!G&&x},E=function(U,z){if(T(U))return U.clone();var L=typeof z=="object"?z:{};return L.date=U,L.args=arguments,new k(L)},I=b;I.l=C,I.i=T,I.w=function(U,z){return E(U,{locale:z.$L,utc:z.$u,x:z.$x,$offset:z.$offset})};var k=function(){function U(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[A]=!0}var z=U.prototype;return z.parse=function(L){this.$d=function(G){var H=G.date,F=G.utc;if(H===null)return new Date(NaN);if(I.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var X=H.match(g);if(X){var te=X[2]-1||0,re=(X[7]||"0").substring(0,3);return F?new Date(Date.UTC(X[1],te,X[3]||1,X[4]||0,X[5]||0,X[6]||0,re)):new Date(X[1],te,X[3]||1,X[4]||0,X[5]||0,X[6]||0,re)}}return new Date(H)}(L),this.init()},z.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},z.$utils=function(){return I},z.isValid=function(){return this.$d.toString()!==m},z.isSame=function(L,G){var H=E(L);return this.startOf(G)<=H&&H<=this.endOf(G)},z.isAfter=function(L,G){return E(L)<this.startOf(G)},z.isBefore=function(L,G){return this.endOf(G)<E(L)},z.$g=function(L,G,H){return I.u(L)?this[G]:this.set(H,L)},z.unix=function(){return Math.floor(this.valueOf()/1e3)},z.valueOf=function(){return this.$d.getTime()},z.startOf=function(L,G){var H=this,F=!!I.u(G)||G,X=I.p(L),te=function(Be,Ye){var Ze=I.w(H.$u?Date.UTC(H.$y,Ye,Be):new Date(H.$y,Ye,Be),H);return F?Ze:Ze.endOf(u)},re=function(Be,Ye){return I.w(H.toDate()[Be].apply(H.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(Ye)),H)},ie=this.$W,le=this.$M,ge=this.$D,pe="set"+(this.$u?"UTC":"");switch(X){case h:return F?te(1,0):te(31,11);case d:return F?te(1,le):te(0,le+1);case c:var ye=this.$locale().weekStart||0,Oe=(ie<ye?ie+7:ie)-ye;return te(F?ge-Oe:ge+(6-Oe),le);case u:case p:return re(pe+"Hours",0);case l:return re(pe+"Minutes",1);case o:return re(pe+"Seconds",2);case a:return re(pe+"Milliseconds",3);default:return this.clone()}},z.endOf=function(L){return this.startOf(L,!1)},z.$set=function(L,G){var H,F=I.p(L),X="set"+(this.$u?"UTC":""),te=(H={},H[u]=X+"Date",H[p]=X+"Date",H[d]=X+"Month",H[h]=X+"FullYear",H[l]=X+"Hours",H[o]=X+"Minutes",H[a]=X+"Seconds",H[s]=X+"Milliseconds",H)[F],re=F===u?this.$D+(G-this.$W):G;if(F===d||F===h){var ie=this.clone().set(p,1);ie.$d[te](re),ie.init(),this.$d=ie.set(p,Math.min(this.$D,ie.daysInMonth())).$d}else te&&this.$d[te](re);return this.init(),this},z.set=function(L,G){return this.clone().$set(L,G)},z.get=function(L){return this[I.p(L)]()},z.add=function(L,G){var H,F=this;L=Number(L);var X=I.p(G),te=function(le){var ge=E(F);return I.w(ge.date(ge.date()+Math.round(le*L)),F)};if(X===d)return this.set(d,this.$M+L);if(X===h)return this.set(h,this.$y+L);if(X===u)return te(1);if(X===c)return te(7);var re=(H={},H[o]=i,H[l]=r,H[a]=t,H)[X]||1,ie=this.$d.getTime()+L*re;return I.w(ie,this)},z.subtract=function(L,G){return this.add(-1*L,G)},z.format=function(L){var G=this,H=this.$locale();if(!this.isValid())return H.invalidDate||m;var F=L||"YYYY-MM-DDTHH:mm:ssZ",X=I.z(this),te=this.$H,re=this.$m,ie=this.$M,le=H.weekdays,ge=H.months,pe=H.meridiem,ye=function(Ye,Ze,Q,me){return Ye&&(Ye[Ze]||Ye(G,F))||Q[Ze].slice(0,me)},Oe=function(Ye){return I.s(te%12||12,Ye,"0")},Be=pe||function(Ye,Ze,Q){var me=Ye<12?"AM":"PM";return Q?me.toLowerCase():me};return F.replace(v,function(Ye,Ze){return Ze||function(Q){switch(Q){case"YY":return String(G.$y).slice(-2);case"YYYY":return I.s(G.$y,4,"0");case"M":return ie+1;case"MM":return I.s(ie+1,2,"0");case"MMM":return ye(H.monthsShort,ie,ge,3);case"MMMM":return ye(ge,ie);case"D":return G.$D;case"DD":return I.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return ye(H.weekdaysMin,G.$W,le,2);case"ddd":return ye(H.weekdaysShort,G.$W,le,3);case"dddd":return le[G.$W];case"H":return String(te);case"HH":return I.s(te,2,"0");case"h":return Oe(1);case"hh":return Oe(2);case"a":return Be(te,re,!0);case"A":return Be(te,re,!1);case"m":return String(re);case"mm":return I.s(re,2,"0");case"s":return String(G.$s);case"ss":return I.s(G.$s,2,"0");case"SSS":return I.s(G.$ms,3,"0");case"Z":return X}return null}(Ye)||X.replace(":","")})},z.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},z.diff=function(L,G,H){var F,X=this,te=I.p(G),re=E(L),ie=(re.utcOffset()-this.utcOffset())*i,le=this-re,ge=function(){return I.m(X,re)};switch(te){case h:F=ge()/12;break;case d:F=ge();break;case f:F=ge()/3;break;case c:F=(le-ie)/6048e5;break;case u:F=(le-ie)/864e5;break;case l:F=le/r;break;case o:F=le/i;break;case a:F=le/t;break;default:F=le}return H?F:I.a(F)},z.daysInMonth=function(){return this.endOf(d).$D},z.$locale=function(){return w[this.$L]},z.locale=function(L,G){if(!L)return this.$L;var H=this.clone(),F=C(L,G,!0);return F&&(H.$L=F),H},z.clone=function(){return I.w(this.$d,this)},z.toDate=function(){return new Date(this.valueOf())},z.toJSON=function(){return this.isValid()?this.toISOString():null},z.toISOString=function(){return this.$d.toISOString()},z.toString=function(){return this.$d.toUTCString()},U}(),O=k.prototype;return E.prototype=O,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function(U){O[U[1]]=function(z){return this.$g(z,U[0],U[1])}}),E.extend=function(U,z){return U.$i||(U(z,k,E),U.$i=!0),E},E.locale=C,E.isDayjs=T,E.unix=function(U){return E(1e3*U)},E.en=w[x],E.Ls=w,E.p={},E})})(Gte);var HAe=Gte.exports;const Dn=sl(HAe),nP=(n,e)=>[n>0?n-1:void 0,n,n<e?n+1:void 0],Fp=n=>Array.from(Array.from({length:n}).keys()),Wte=n=>n.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),qte=n=>n.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),QV=function(n,e){const t=Xp(n),i=Xp(e);return t&&i?n.getTime()===e.getTime():!t&&!i?n===e:!1},ZV=function(n,e){const t=Bt(n),i=Bt(e);return t&&i?n.length!==e.length?!1:n.every((r,s)=>QV(r,e[s])):!t&&!i?QV(n,e):!1},JV=function(n,e,t){const i=eu(e)||e==="x"?Dn(n).locale(t):Dn(n,e).locale(t);return i.isValid()?i:void 0},e$=function(n,e,t){return eu(e)?n:e==="x"?+n:Dn(n).locale(t).format(e)},iP=(n,e)=>{var t;const i=[],r=e==null?void 0:e();for(let s=0;s<n;s++)i.push((t=r==null?void 0:r.includes(s))!=null?t:!1);return i},XC=n=>Bt(n)?n.map(e=>e.toDate()):n.toDate(),VAe=(n,e)=>{const t=n.subtract(1,"month").endOf("month").date();return Fp(e).map((i,r)=>t-(e-r-1))},$Ae=n=>{const e=n.daysInMonth();return Fp(e).map((t,i)=>i+1)},GAe=n=>Fp(n.length/7).map(e=>{const t=e*7;return n.slice(t,t+7)}),WAe=zt({selectedDay:{type:et(Object)},range:{type:et(Array)},date:{type:et(Object),required:!0},hideHeader:{type:Boolean}}),qAe={pick:n=>Yn(n)};var jte={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i,r){var s=i.prototype,a=function(d){return d&&(d.indexOf?d:d.s)},o=function(d,f,h,p,m){var g=d.name?d:d.$locale(),v=a(g[f]),_=a(g[h]),y=v||_.map(function(x){return x.slice(0,p)});if(!m)return y;var b=g.weekStart;return y.map(function(x,w){return y[(w+(b||0))%7]})},l=function(){return r.Ls[r.locale()]},u=function(d,f){return d.formats[f]||function(h){return h.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,g){return m||g.slice(1)})}(d.formats[f.toUpperCase()])},c=function(){var d=this;return{months:function(f){return f?f.format("MMMM"):o(d,"months")},monthsShort:function(f){return f?f.format("MMM"):o(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):o(d,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):o(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):o(d,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return u(d.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return c.bind(this)()},r.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(f){return u(d,f)},meridiem:d.meridiem,ordinal:d.ordinal}},r.months=function(){return o(l(),"months")},r.monthsShort=function(){return o(l(),"monthsShort","months",3)},r.weekdays=function(d){return o(l(),"weekdays",null,null,d)},r.weekdaysShort=function(d){return o(l(),"weekdaysShort","weekdays",3,d)},r.weekdaysMin=function(d){return o(l(),"weekdaysMin","weekdays",2,d)}}})})(jte);var jAe=jte.exports;const Kte=sl(jAe),KAe=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"],rP=["sun","mon","tue","wed","thu","fri","sat"],XAe=(n,e)=>{Dn.extend(Kte);const t=Dn.localeData().firstDayOfWeek(),{t:i,lang:r}=wi(),s=Dn().locale(r.value),a=W(()=>!!n.range&&!!n.range.length),o=W(()=>{let f=[];if(a.value){const[h,p]=n.range,m=Fp(p.date()-h.date()+1).map(_=>({text:h.date()+_,type:"current"}));let g=m.length%7;g=g===0?0:7-g;const v=Fp(g).map((_,y)=>({text:y+1,type:"next"}));f=m.concat(v)}else{const h=n.date.startOf("month").day(),p=VAe(n.date,(h-t+7)%7).map(_=>({text:_,type:"prev"})),m=$Ae(n.date).map(_=>({text:_,type:"current"}));f=[...p,...m];const g=7-(f.length%7||7),v=Fp(g).map((_,y)=>({text:y+1,type:"next"}));f=f.concat(v)}return GAe(f)}),l=W(()=>{const f=t;return f===0?rP.map(h=>i(`el.datepicker.weeks.${h}`)):rP.slice(f).concat(rP.slice(0,f)).map(h=>i(`el.datepicker.weeks.${h}`))}),u=(f,h)=>{switch(h){case"prev":return n.date.startOf("month").subtract(1,"month").date(f);case"next":return n.date.startOf("month").add(1,"month").date(f);case"current":return n.date.date(f)}};return{now:s,isInRange:a,rows:o,weekDays:l,getFormattedDate:u,handlePickDay:({text:f,type:h})=>{const p=u(f,h);e("pick",p)},getSlotData:({text:f,type:h})=>{const p=u(f,h);return{isSelected:p.isSame(n.selectedDay),type:`${h}-month`,day:p.format("YYYY-MM-DD"),date:p.toDate()}}}},YAe=Ne({name:"DateTable"}),QAe=Ne({...YAe,props:WAe,emits:qAe,setup(n,{expose:e,emit:t}){const i=n,{isInRange:r,now:s,rows:a,weekDays:o,getFormattedDate:l,handlePickDay:u,getSlotData:c}=XAe(i,t),d=Rt("calendar-table"),f=Rt("calendar-day"),h=({text:p,type:m})=>{const g=[m];if(m==="current"){const v=l(p,m);v.isSame(i.selectedDay,"day")&&g.push(f.is("selected")),v.isSame(s,"day")&&g.push(f.is("today"))}return g};return e({getFormattedDate:l}),(p,m)=>(j(),_e("table",{class:ee([S(d).b(),S(d).is("range",S(r))]),cellspacing:"0",cellpadding:"0"},[p.hideHeader?ot("v-if",!0):(j(),_e("thead",{key:0},[Te("tr",null,[(j(!0),_e(an,null,ti(S(o),g=>(j(),_e("th",{key:g,scope:"col"},Lt(g),1))),128))])])),Te("tbody",null,[(j(!0),_e(an,null,ti(S(a),(g,v)=>(j(),_e("tr",{key:v,class:ee({[S(d).e("row")]:!0,[S(d).em("row","hide-border")]:v===0&&p.hideHeader})},[(j(!0),_e(an,null,ti(g,(_,y)=>(j(),_e("td",{key:y,class:ee(h(_)),onClick:b=>S(u)(_)},[Te("div",{class:ee(S(f).b())},[at(p.$slots,"date-cell",{data:S(c)(_)},()=>[Te("span",null,Lt(_.text),1)])],2)],10,["onClick"]))),128))],2))),128))])],2))}});var t$=Vt(QAe,[["__file","date-table.vue"]]);const ZAe=(n,e)=>{const t=n.endOf("month"),i=e.startOf("month"),s=t.isSame(i,"week")?i.add(1,"week"):i;return[[n,t],[s.startOf("week"),e]]},JAe=(n,e)=>{const t=n.endOf("month"),i=n.add(1,"month").startOf("month"),r=t.isSame(i,"week")?i.add(1,"week"):i,s=r.endOf("month"),a=e.startOf("month"),o=s.isSame(a,"week")?a.add(1,"week"):a;return[[n,t],[r.startOf("week"),s],[o.startOf("week"),e]]},eEe=(n,e,t)=>{const{lang:i}=wi(),r=ae(),s=Dn().locale(i.value),a=W({get(){return n.modelValue?l.value:r.value},set(g){if(!g)return;r.value=g;const v=g.toDate();e(Qa,v),e($n,v)}}),o=W(()=>{if(!n.range||!Bt(n.range)||n.range.length!==2||n.range.some(y=>!Xp(y)))return[];const g=n.range.map(y=>Dn(y).locale(i.value)),[v,_]=g;return v.isAfter(_)?[]:v.isSame(_,"month")?h(v,_):v.add(1,"month").month()!==_.month()?[]:h(v,_)}),l=W(()=>n.modelValue?Dn(n.modelValue).locale(i.value):a.value||(o.value.length?o.value[0][0]:s)),u=W(()=>l.value.subtract(1,"month").date(1)),c=W(()=>l.value.add(1,"month").date(1)),d=W(()=>l.value.subtract(1,"year").date(1)),f=W(()=>l.value.add(1,"year").date(1)),h=(g,v)=>{const _=g.startOf("week"),y=v.endOf("week"),b=_.get("month"),x=y.get("month");return b===x?[[_,y]]:(b+1)%12===x?ZAe(_,y):b+2===x||(b+1)%11===x?JAe(_,y):[]},p=g=>{a.value=g};return{calculateValidatedDateRange:h,date:l,realSelectedDay:a,pickDay:p,selectDate:g=>{const _={"prev-month":u.value,"next-month":c.value,"prev-year":d.value,"next-year":f.value,today:s}[g];_.isSame(l.value,"day")||p(_)},validatedRange:o}},tEe=n=>Bt(n)&&n.length===2&&n.every(e=>Xp(e)),nEe=zt({modelValue:{type:Date},range:{type:et(Array),validator:tEe}}),iEe={[$n]:n=>Xp(n),[Qa]:n=>Xp(n)},rEe="ElCalendar",sEe=Ne({name:rEe}),aEe=Ne({...sEe,props:nEe,emits:iEe,setup(n,{expose:e,emit:t}){const i=n,r=Rt("calendar"),{calculateValidatedDateRange:s,date:a,pickDay:o,realSelectedDay:l,selectDate:u,validatedRange:c}=eEe(i,t),{t:d}=wi(),f=W(()=>{const h=`el.datepicker.month${a.value.format("M")}`;return`${a.value.year()} ${d("el.datepicker.year")} ${d(h)}`});return e({selectedDay:l,pickDay:o,selectDate:u,calculateValidatedDateRange:s}),(h,p)=>(j(),_e("div",{class:ee(S(r).b())},[Te("div",{class:ee(S(r).e("header"))},[at(h.$slots,"header",{date:S(f)},()=>[Te("div",{class:ee(S(r).e("title"))},Lt(S(f)),3),S(c).length===0?(j(),_e("div",{key:0,class:ee(S(r).e("button-group"))},[he(S(Vte),null,{default:Ae(()=>[he(S(_a),{size:"small",onClick:m=>S(u)("prev-month")},{default:Ae(()=>[An(Lt(S(d)("el.datepicker.prevMonth")),1)]),_:1},8,["onClick"]),he(S(_a),{size:"small",onClick:m=>S(u)("today")},{default:Ae(()=>[An(Lt(S(d)("el.datepicker.today")),1)]),_:1},8,["onClick"]),he(S(_a),{size:"small",onClick:m=>S(u)("next-month")},{default:Ae(()=>[An(Lt(S(d)("el.datepicker.nextMonth")),1)]),_:1},8,["onClick"])]),_:1})],2)):ot("v-if",!0)])],2),S(c).length===0?(j(),_e("div",{key:0,class:ee(S(r).e("body"))},[he(t$,{date:S(a),"selected-day":S(l),onPick:S(o)},tc({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Ae(m=>[at(h.$slots,"date-cell",Lc(Qp(m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(j(),_e("div",{key:1,class:ee(S(r).e("body"))},[(j(!0),_e(an,null,ti(S(c),(m,g)=>(j(),gt(t$,{key:g,date:m[0],"selected-day":S(l),range:m,"hide-header":g!==0,onPick:S(o)},tc({_:2},[h.$slots["date-cell"]?{name:"date-cell",fn:Ae(v=>[at(h.$slots,"date-cell",Lc(Qp(v)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var oEe=Vt(aEe,[["__file","calendar.vue"]]);const lEe=Nn(oEe),uEe=zt({header:{type:String,default:""},footer:{type:String,default:""},bodyStyle:{type:et([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),cEe=Ne({name:"ElCard"}),dEe=Ne({...cEe,props:uEe,setup(n){const e=Rt("card");return(t,i)=>(j(),_e("div",{class:ee([S(e).b(),S(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(j(),_e("div",{key:0,class:ee(S(e).e("header"))},[at(t.$slots,"header",{},()=>[An(Lt(t.header),1)])],2)):ot("v-if",!0),Te("div",{class:ee([S(e).e("body"),t.bodyClass]),style:Jt(t.bodyStyle)},[at(t.$slots,"default")],6),t.$slots.footer||t.footer?(j(),_e("div",{key:1,class:ee(S(e).e("footer"))},[at(t.$slots,"footer",{},()=>[An(Lt(t.footer),1)])],2)):ot("v-if",!0)],2))}});var fEe=Vt(dEe,[["__file","card.vue"]]);const hEe=Nn(fEe),pEe=zt({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},cardScale:{type:Number,default:.83},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0},motionBlur:Boolean}),mEe={change:(n,e)=>[n,e].every(yn)},Xte=Symbol("carouselContextKey"),h6="ElCarouselItem";var Pu=(n=>(n[n.TEXT=1]="TEXT",n[n.CLASS=2]="CLASS",n[n.STYLE=4]="STYLE",n[n.PROPS=8]="PROPS",n[n.FULL_PROPS=16]="FULL_PROPS",n[n.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",n[n.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",n[n.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",n[n.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",n[n.NEED_PATCH=512]="NEED_PATCH",n[n.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",n[n.HOISTED=-1]="HOISTED",n[n.BAIL=-2]="BAIL",n))(Pu||{});function p6(n){return Wr(n)&&n.type===an}function gEe(n){return Wr(n)&&n.type===wo}function vEe(n){return Wr(n)&&!p6(n)&&!gEe(n)}const yEe=n=>{if(!Wr(n))return{};const e=n.props||{},t=(Wr(n.type)?n.type.props:void 0)||{},i={};return Object.keys(t).forEach(r=>{Ai(t[r],"default")&&(i[r]=t[r].default)}),Object.keys(e).forEach(r=>{i[fu(r)]=e[r]}),i},_Ee=n=>{if(!Bt(n)||n.length>1)throw new Error("expect to receive a single Vue element child");return n[0]},Up=n=>{const e=Bt(n)?n:[n],t=[];return e.forEach(i=>{var r;Bt(i)?t.push(...Up(i)):Wr(i)&&((r=i.component)!=null&&r.subTree)?t.push(i,...Up(i.component.subTree)):Wr(i)&&Bt(i.children)?t.push(...Up(i.children)):t.push(i)}),t},bEe=(n,e,t)=>Up(n.subTree).filter(s=>{var a;return Wr(s)&&((a=s.type)==null?void 0:a.name)===e&&!!s.component}).map(s=>s.component.uid).map(s=>t[s]).filter(s=>!!s),TF=(n,e)=>{const t={},i=Ji([]);return{children:i,addChild:a=>{t[a.uid]=a,i.value=bEe(n,e,t)},removeChild:a=>{delete t[a],i.value=i.value.filter(o=>o.uid!==a)}}},n$=300,SEe=(n,e,t)=>{const{children:i,addChild:r,removeChild:s}=TF(Qn(),h6),a=Ls(),o=ae(-1),l=ae(null),u=ae(!1),c=ae(),d=ae(0),f=ae(!0),h=ae(!0),p=ae(!1),m=W(()=>n.arrow!=="never"&&!S(_)),g=W(()=>i.value.some(pe=>pe.props.label.toString().length>0)),v=W(()=>n.type==="card"),_=W(()=>n.direction==="vertical"),y=W(()=>n.height!=="auto"?{height:n.height}:{height:`${d.value}px`,overflow:"hidden"}),b=mg(pe=>{E(pe)},n$,{trailing:!0}),x=mg(pe=>{F(pe)},n$),w=pe=>f.value?o.value<=1?pe<=1:pe>1:!0;function A(){l.value&&(clearInterval(l.value),l.value=null)}function T(){n.interval<=0||!n.autoplay||l.value||(l.value=setInterval(()=>C(),n.interval))}const C=()=>{h.value||(p.value=!0),h.value=!1,o.value<i.value.length-1?o.value=o.value+1:n.loop?o.value=0:p.value=!1};function E(pe){if(h.value||(p.value=!0),h.value=!1,un(pe)){const Be=i.value.filter(Ye=>Ye.props.name===pe);Be.length>0&&(pe=i.value.indexOf(Be[0]))}if(pe=Number(pe),Number.isNaN(pe)||pe!==Math.floor(pe))return;const ye=i.value.length,Oe=o.value;pe<0?o.value=n.loop?ye-1:0:pe>=ye?o.value=n.loop?0:ye-1:o.value=pe,Oe===o.value&&I(Oe),re()}function I(pe){i.value.forEach((ye,Oe)=>{ye.translateItem(Oe,o.value,pe)})}function k(pe,ye){var Oe,Be,Ye,Ze;const Q=S(i),me=Q.length;if(me===0||!pe.states.inStage)return!1;const ce=ye+1,je=ye-1,Fe=me-1,nt=Q[Fe].states.active,We=Q[0].states.active,Ke=(Be=(Oe=Q[ce])==null?void 0:Oe.states)==null?void 0:Be.active,it=(Ze=(Ye=Q[je])==null?void 0:Ye.states)==null?void 0:Ze.active;return ye===Fe&&We||Ke?"left":ye===0&&nt||it?"right":!1}function O(){u.value=!0,n.pauseOnHover&&A()}function U(){u.value=!1,T()}function z(){p.value=!1}function L(pe){S(_)||i.value.forEach((ye,Oe)=>{pe===k(ye,Oe)&&(ye.states.hover=!0)})}function G(){S(_)||i.value.forEach(pe=>{pe.states.hover=!1})}function H(pe){pe!==o.value&&(h.value||(p.value=!0)),o.value=pe}function F(pe){n.trigger==="hover"&&pe!==o.value&&(o.value=pe,h.value||(p.value=!0))}function X(){E(o.value-1)}function te(){E(o.value+1)}function re(){A(),n.pauseOnHover||T()}function ie(pe){n.height==="auto"&&(d.value=pe)}function le(){var pe;const ye=(pe=a.default)==null?void 0:pe.call(a);if(!ye)return null;const Be=Up(ye).filter(Ye=>Wr(Ye)&&Ye.type.name===h6);return(Be==null?void 0:Be.length)===2&&n.loop&&!v.value?(f.value=!0,Be):(f.value=!1,null)}St(()=>o.value,(pe,ye)=>{I(ye),f.value&&(pe=pe%2,ye=ye%2),ye>-1&&e("change",pe,ye)}),St(()=>n.autoplay,pe=>{pe?T():A()}),St(()=>n.loop,()=>{E(o.value)}),St(()=>n.interval,()=>{re()});const ge=Ji();return Ln(()=>{St(()=>i.value,()=>{i.value.length>0&&E(n.initialIndex)},{immediate:!0}),ge.value=Br(c.value,()=>{I()}),T()}),Vi(()=>{A(),c.value&&ge.value&&ge.value.stop()}),ui(Xte,{root:c,isCardType:v,isVertical:_,items:i,loop:n.loop,cardScale:n.cardScale,addItem:r,removeItem:s,setActiveItem:E,setContainerHeight:ie}),{root:c,activeIndex:o,arrowDisplay:m,hasLabel:g,hover:u,isCardType:v,isTransitioning:p,items:i,isVertical:_,containerStyle:y,isItemsTwoLength:f,handleButtonEnter:L,handleTransitionEnd:z,handleButtonLeave:G,handleIndicatorClick:H,handleMouseEnter:O,handleMouseLeave:U,setActiveItem:E,prev:X,next:te,PlaceholderItem:le,isTwoLengthShow:w,throttledArrowClick:b,throttledIndicatorHover:x}},xEe="ElCarousel",wEe=Ne({name:xEe}),TEe=Ne({...wEe,props:pEe,emits:mEe,setup(n,{expose:e,emit:t}){const i=n,{root:r,activeIndex:s,arrowDisplay:a,hasLabel:o,hover:l,isCardType:u,items:c,isVertical:d,containerStyle:f,handleButtonEnter:h,handleButtonLeave:p,isTransitioning:m,handleIndicatorClick:g,handleMouseEnter:v,handleMouseLeave:_,handleTransitionEnd:y,setActiveItem:b,prev:x,next:w,PlaceholderItem:A,isTwoLengthShow:T,throttledArrowClick:C,throttledIndicatorHover:E}=SEe(i,t),I=Rt("carousel"),{t:k}=wi(),O=W(()=>{const L=[I.b(),I.m(i.direction)];return S(u)&&L.push(I.m("card")),L}),U=W(()=>{const L=[I.e("container")];return i.motionBlur&&S(m)&&c.value.length>1&&L.push(S(d)?`${I.namespace.value}-transitioning-vertical`:`${I.namespace.value}-transitioning`),L}),z=W(()=>{const L=[I.e("indicators"),I.em("indicators",i.direction)];return S(o)&&L.push(I.em("indicators","labels")),i.indicatorPosition==="outside"&&L.push(I.em("indicators","outside")),S(d)&&L.push(I.em("indicators","right")),L});return e({activeIndex:s,setActiveItem:b,prev:x,next:w}),(L,G)=>(j(),_e("div",{ref_key:"root",ref:r,class:ee(S(O)),onMouseenter:wn(S(v),["stop"]),onMouseleave:wn(S(_),["stop"])},[S(a)?(j(),gt(Ks,{key:0,name:"carousel-arrow-left",persisted:""},{default:Ae(()=>[Vn(Te("button",{type:"button",class:ee([S(I).e("arrow"),S(I).em("arrow","left")]),"aria-label":S(k)("el.carousel.leftArrow"),onMouseenter:H=>S(h)("left"),onMouseleave:S(p),onClick:wn(H=>S(C)(S(s)-1),["stop"])},[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Oi,(L.arrow==="always"||S(l))&&(i.loop||S(s)>0)]])]),_:1})):ot("v-if",!0),S(a)?(j(),gt(Ks,{key:1,name:"carousel-arrow-right",persisted:""},{default:Ae(()=>[Vn(Te("button",{type:"button",class:ee([S(I).e("arrow"),S(I).em("arrow","right")]),"aria-label":S(k)("el.carousel.rightArrow"),onMouseenter:H=>S(h)("right"),onMouseleave:S(p),onClick:wn(H=>S(C)(S(s)+1),["stop"])},[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})],42,["aria-label","onMouseenter","onMouseleave","onClick"]),[[Oi,(L.arrow==="always"||S(l))&&(i.loop||S(s)<S(c).length-1)]])]),_:1})):ot("v-if",!0),Te("div",{class:ee(S(U)),style:Jt(S(f)),onTransitionend:S(y)},[he(S(A)),at(L.$slots,"default")],46,["onTransitionend"]),L.indicatorPosition!=="none"?(j(),_e("ul",{key:2,class:ee(S(z))},[(j(!0),_e(an,null,ti(S(c),(H,F)=>Vn((j(),_e("li",{key:F,class:ee([S(I).e("indicator"),S(I).em("indicator",L.direction),S(I).is("active",F===S(s))]),onMouseenter:X=>S(E)(F),onClick:wn(X=>S(g)(F),["stop"])},[Te("button",{class:ee(S(I).e("button")),"aria-label":S(k)("el.carousel.indicator",{index:F+1})},[S(o)?(j(),_e("span",{key:0},Lt(H.props.label),1)):ot("v-if",!0)],10,["aria-label"])],42,["onMouseenter","onClick"])),[[Oi,S(T)(F)]])),128))],2)):ot("v-if",!0),i.motionBlur?(j(),_e("svg",{key:3,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{display:"none"}},[Te("defs",null,[Te("filter",{id:"elCarouselHorizontal"},[Te("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12,0"})]),Te("filter",{id:"elCarouselVertical"},[Te("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0,10"})])])])):ot("v-if",!0)],42,["onMouseenter","onMouseleave"]))}});var CEe=Vt(TEe,[["__file","carousel.vue"]]);const AEe=zt({name:{type:String,default:""},label:{type:[String,Number],default:""}}),EEe=n=>{const e=Zt(Xte),t=Qn(),i=ae(),r=ae(!1),s=ae(0),a=ae(1),o=ae(!1),l=ae(!1),u=ae(!1),c=ae(!1),{isCardType:d,isVertical:f,cardScale:h}=e;function p(y,b,x){const w=x-1,A=b-1,T=b+1,C=x/2;return b===0&&y===w?-1:b===w&&y===0?x:y<A&&b-y>=C?x+1:y>T&&y-b>=C?-2:y}function m(y,b){var x,w;const A=S(f)?((x=e.root.value)==null?void 0:x.offsetHeight)||0:((w=e.root.value)==null?void 0:w.offsetWidth)||0;return u.value?A*((2-h)*(y-b)+1)/4:y<b?-(1+h)*A/4:(3+h)*A/4}function g(y,b,x){const w=e.root.value;return w?((x?w.offsetHeight:w.offsetWidth)||0)*(y-b):0}const v=(y,b,x)=>{var w;const A=S(d),T=(w=e.items.value.length)!=null?w:Number.NaN,C=y===b;!A&&!Xi(x)&&(c.value=C||y===x),!C&&T>2&&e.loop&&(y=p(y,b,T));const E=S(f);o.value=C,A?(u.value=Math.round(Math.abs(y-b))<=1,s.value=m(y,b),a.value=S(o)?1:h):s.value=g(y,b,E),l.value=!0,C&&i.value&&e.setContainerHeight(i.value.offsetHeight)};function _(){if(e&&S(d)){const y=e.items.value.findIndex(({uid:b})=>b===t.uid);e.setActiveItem(y)}}return Ln(()=>{e.addItem({props:n,states:Ui({hover:r,translate:s,scale:a,active:o,ready:l,inStage:u,animating:c}),uid:t.uid,translateItem:v})}),yh(()=>{e.removeItem(t.uid)}),{carouselItemRef:i,active:o,animating:c,hover:r,inStage:u,isVertical:f,translate:s,isCardType:d,scale:a,ready:l,handleItemClick:_}},MEe=Ne({name:h6}),IEe=Ne({...MEe,props:AEe,setup(n){const e=n,t=Rt("carousel"),{carouselItemRef:i,active:r,animating:s,hover:a,inStage:o,isVertical:l,translate:u,isCardType:c,scale:d,ready:f,handleItemClick:h}=EEe(e),p=W(()=>[t.e("item"),t.is("active",r.value),t.is("in-stage",o.value),t.is("hover",a.value),t.is("animating",s.value),{[t.em("item","card")]:c.value,[t.em("item","card-vertical")]:c.value&&l.value}]),m=W(()=>{const v=`${`translate${S(l)?"Y":"X"}`}(${S(u)}px)`,_=`scale(${S(d)})`;return{transform:[v,_].join(" ")}});return(g,v)=>Vn((j(),_e("div",{ref_key:"carouselItemRef",ref:i,class:ee(S(p)),style:Jt(S(m)),onClick:S(h)},[S(c)?Vn((j(),_e("div",{key:0,class:ee(S(t).e("mask"))},null,2)),[[Oi,!S(r)]]):ot("v-if",!0),at(g.$slots,"default")],14,["onClick"])),[[Oi,S(f)]])}});var Yte=Vt(IEe,[["__file","carousel-item.vue"]]);const DEe=Nn(CEe,{CarouselItem:Yte}),REe=Xr(Yte),Qte={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:ks,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Ba(["ariaControls"])},Zte={[$n]:n=>un(n)||yn(n)||fr(n),change:n=>un(n)||yn(n)||fr(n)},mb=Symbol("checkboxGroupContextKey"),PEe=({model:n,isChecked:e})=>{const t=Zt(mb,void 0),i=W(()=>{var s,a;const o=(s=t==null?void 0:t.max)==null?void 0:s.value,l=(a=t==null?void 0:t.min)==null?void 0:a.value;return!Xi(o)&&n.value.length>=o&&!e.value||!Xi(l)&&n.value.length<=l&&e.value});return{isDisabled:no(W(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},kEe=(n,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:r,isLabeledByFormItem:s})=>{const a=Zt(mb,void 0),{formItem:o}=to(),{emit:l}=Qn();function u(p){var m,g,v,_;return[!0,n.trueValue,n.trueLabel].includes(p)?(g=(m=n.trueValue)!=null?m:n.trueLabel)!=null?g:!0:(_=(v=n.falseValue)!=null?v:n.falseLabel)!=null?_:!1}function c(p,m){l("change",u(p),m)}function d(p){if(t.value)return;const m=p.target;l("change",u(m.checked),p)}async function f(p){t.value||!i.value&&!r.value&&s.value&&(p.composedPath().some(v=>v.tagName==="LABEL")||(e.value=u([!1,n.falseValue,n.falseLabel].includes(e.value)),await cn(),c(e.value,p)))}const h=W(()=>(a==null?void 0:a.validateEvent)||n.validateEvent);return St(()=>n.modelValue,()=>{h.value&&(o==null||o.validate("change").catch(p=>void 0))}),{handleChange:d,onClickRoot:f}},LEe=n=>{const e=ae(!1),{emit:t}=Qn(),i=Zt(mb,void 0),r=W(()=>Xi(i)===!1),s=ae(!1),a=W({get(){var o,l;return r.value?(o=i==null?void 0:i.modelValue)==null?void 0:o.value:(l=n.modelValue)!=null?l:e.value},set(o){var l,u;r.value&&Bt(o)?(s.value=((l=i==null?void 0:i.max)==null?void 0:l.value)!==void 0&&o.length>(i==null?void 0:i.max.value)&&o.length>a.value.length,s.value===!1&&((u=i==null?void 0:i.changeEvent)==null||u.call(i,o))):(t($n,o),e.value=o)}});return{model:a,isGroup:r,isLimitExceeded:s}},OEe=(n,e,{model:t})=>{const i=Zt(mb,void 0),r=ae(!1),s=W(()=>kg(n.value)?n.label:n.value),a=W(()=>{const c=t.value;return fr(c)?c:Bt(c)?Yn(s.value)?c.map(ir).some(d=>La(d,s.value)):c.map(ir).includes(s.value):c!=null?c===n.trueValue||c===n.trueLabel:!!c}),o=ws(W(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value}),{prop:!0}),l=ws(W(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value})),u=W(()=>!!e.default||!kg(s.value));return{checkboxButtonSize:o,isChecked:a,isFocused:r,checkboxSize:l,hasOwnLabel:u,actualValue:s}},Jte=(n,e)=>{const{formItem:t}=to(),{model:i,isGroup:r,isLimitExceeded:s}=LEe(n),{isFocused:a,isChecked:o,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,actualValue:d}=OEe(n,e,{model:i}),{isDisabled:f}=PEe({model:i,isChecked:o}),{inputId:h,isLabeledByFormItem:p}=hc(n,{formItemContext:t,disableIdGeneration:c,disableIdManagement:r}),{handleChange:m,onClickRoot:g}=kEe(n,{model:i,isLimitExceeded:s,hasOwnLabel:c,isDisabled:f,isLabeledByFormItem:p});return(()=>{function _(){var y,b;Bt(i.value)&&!i.value.includes(d.value)?i.value.push(d.value):i.value=(b=(y=n.trueValue)!=null?y:n.trueLabel)!=null?b:!0}n.checked&&_()})(),Bp({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>r.value&&kg(n.value))),Bp({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>!!n.trueLabel)),Bp({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>!!n.falseLabel)),{inputId:h,isLabeledByFormItem:p,isChecked:o,isDisabled:f,isFocused:a,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,model:i,actualValue:d,handleChange:m,onClickRoot:g}},NEe=Ne({name:"ElCheckbox"}),BEe=Ne({...NEe,props:Qte,emits:Zte,setup(n){const e=n,t=Ls(),{inputId:i,isLabeledByFormItem:r,isChecked:s,isDisabled:a,isFocused:o,checkboxSize:l,hasOwnLabel:u,model:c,actualValue:d,handleChange:f,onClickRoot:h}=Jte(e,t),p=Rt("checkbox"),m=W(()=>[p.b(),p.m(l.value),p.is("disabled",a.value),p.is("bordered",e.border),p.is("checked",s.value)]),g=W(()=>[p.e("input"),p.is("disabled",a.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",o.value)]);return(v,_)=>(j(),gt(ei(!S(u)&&S(r)?"span":"label"),{class:ee(S(m)),"aria-controls":v.indeterminate?v.ariaControls:null,onClick:S(h)},{default:Ae(()=>{var y,b,x,w;return[Te("span",{class:ee(S(g))},[v.trueValue||v.falseValue||v.trueLabel||v.falseLabel?Vn((j(),_e("input",{key:0,id:S(i),"onUpdate:modelValue":A=>br(c)?c.value=A:null,class:ee(S(p).e("original")),type:"checkbox",indeterminate:v.indeterminate,name:v.name,tabindex:v.tabindex,disabled:S(a),"true-value":(b=(y=v.trueValue)!=null?y:v.trueLabel)!=null?b:!0,"false-value":(w=(x=v.falseValue)!=null?x:v.falseLabel)!=null?w:!1,onChange:S(f),onFocus:A=>o.value=!0,onBlur:A=>o.value=!1,onClick:wn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[b3,S(c)]]):Vn((j(),_e("input",{key:1,id:S(i),"onUpdate:modelValue":A=>br(c)?c.value=A:null,class:ee(S(p).e("original")),type:"checkbox",indeterminate:v.indeterminate,disabled:S(a),value:S(d),name:v.name,tabindex:v.tabindex,onChange:S(f),onFocus:A=>o.value=!0,onBlur:A=>o.value=!1,onClick:wn(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[b3,S(c)]]),Te("span",{class:ee(S(p).e("inner"))},null,2)],2),S(u)?(j(),_e("span",{key:0,class:ee(S(p).e("label"))},[at(v.$slots,"default"),v.$slots.default?ot("v-if",!0):(j(),_e(an,{key:0},[An(Lt(v.label),1)],64))],2)):ot("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var FEe=Vt(BEe,[["__file","checkbox.vue"]]);const UEe=Ne({name:"ElCheckboxButton"}),zEe=Ne({...UEe,props:Qte,emits:Zte,setup(n){const e=n,t=Ls(),{isFocused:i,isChecked:r,isDisabled:s,checkboxButtonSize:a,model:o,actualValue:l,handleChange:u}=Jte(e,t),c=Zt(mb,void 0),d=Rt("checkbox"),f=W(()=>{var p,m,g,v;const _=(m=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:_,borderColor:_,color:(v=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?v:"",boxShadow:_?`-1px 0 0 0 ${_}`:void 0}}),h=W(()=>[d.b("button"),d.bm("button",a.value),d.is("disabled",s.value),d.is("checked",r.value),d.is("focus",i.value)]);return(p,m)=>{var g,v,_,y;return j(),_e("label",{class:ee(S(h))},[p.trueValue||p.falseValue||p.trueLabel||p.falseLabel?Vn((j(),_e("input",{key:0,"onUpdate:modelValue":b=>br(o)?o.value=b:null,class:ee(S(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:S(s),"true-value":(v=(g=p.trueValue)!=null?g:p.trueLabel)!=null?v:!0,"false-value":(y=(_=p.falseValue)!=null?_:p.falseLabel)!=null?y:!1,onChange:S(u),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:wn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[b3,S(o)]]):Vn((j(),_e("input",{key:1,"onUpdate:modelValue":b=>br(o)?o.value=b:null,class:ee(S(d).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:S(s),value:S(l),onChange:S(u),onFocus:b=>i.value=!0,onBlur:b=>i.value=!1,onClick:wn(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[b3,S(o)]]),p.$slots.default||p.label?(j(),_e("span",{key:2,class:ee(S(d).be("button","inner")),style:Jt(S(r)?S(f):void 0)},[at(p.$slots,"default",{},()=>[An(Lt(p.label),1)])],6)):ot("v-if",!0)],2)}}});var ene=Vt(zEe,[["__file","checkbox-button.vue"]]);const HEe=zt({modelValue:{type:et(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:ks,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Ba(["ariaLabel"])}),VEe={[$n]:n=>Bt(n),change:n=>Bt(n)},$Ee=Ne({name:"ElCheckboxGroup"}),GEe=Ne({...$Ee,props:HEe,emits:VEe,setup(n,{emit:e}){const t=n,i=Rt("checkbox"),{formItem:r}=to(),{inputId:s,isLabeledByFormItem:a}=hc(t,{formItemContext:r}),o=async u=>{e($n,u),await cn(),e("change",u)},l=W({get(){return t.modelValue},set(u){o(u)}});return ui(mb,{...Nc(js(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:o}),St(()=>t.modelValue,()=>{t.validateEvent&&(r==null||r.validate("change").catch(u=>void 0))}),(u,c)=>{var d;return j(),gt(ei(u.tag),{id:S(s),class:ee(S(i).b("group")),role:"group","aria-label":S(a)?void 0:u.ariaLabel||"checkbox-group","aria-labelledby":S(a)?(d=S(r))==null?void 0:d.labelId:void 0},{default:Ae(()=>[at(u.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var tne=Vt(GEe,[["__file","checkbox-group.vue"]]);const sc=Nn(FEe,{CheckboxButton:ene,CheckboxGroup:tne}),WEe=Xr(ene),nne=Xr(tne),ine=zt({modelValue:{type:[String,Number,Boolean],default:void 0},size:ks,disabled:Boolean,label:{type:[String,Number,Boolean],default:void 0},value:{type:[String,Number,Boolean],default:void 0},name:{type:String,default:void 0}}),qEe=zt({...ine,border:Boolean}),rne={[$n]:n=>un(n)||yn(n)||fr(n),[er]:n=>un(n)||yn(n)||fr(n)},sne=Symbol("radioGroupKey"),ane=(n,e)=>{const t=ae(),i=Zt(sne,void 0),r=W(()=>!!i),s=W(()=>kg(n.value)?n.label:n.value),a=W({get(){return r.value?i.modelValue:n.modelValue},set(d){r.value?i.changeEvent(d):e&&e($n,d),t.value.checked=n.modelValue===s.value}}),o=ws(W(()=>i==null?void 0:i.size)),l=no(W(()=>i==null?void 0:i.disabled)),u=ae(!1),c=W(()=>l.value||r.value&&a.value!==s.value?-1:0);return Bp({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-radio",ref:"https://element-plus.org/en-US/component/radio.html"},W(()=>r.value&&kg(n.value))),{radioRef:t,isGroup:r,radioGroup:i,focus:u,size:o,disabled:l,tabIndex:c,modelValue:a,actualValue:s}},jEe=Ne({name:"ElRadio"}),KEe=Ne({...jEe,props:qEe,emits:rne,setup(n,{emit:e}){const t=n,i=Rt("radio"),{radioRef:r,radioGroup:s,focus:a,size:o,disabled:l,modelValue:u,actualValue:c}=ane(t,e);function d(){cn(()=>e("change",u.value))}return(f,h)=>{var p;return j(),_e("label",{class:ee([S(i).b(),S(i).is("disabled",S(l)),S(i).is("focus",S(a)),S(i).is("bordered",f.border),S(i).is("checked",S(u)===S(c)),S(i).m(S(o))])},[Te("span",{class:ee([S(i).e("input"),S(i).is("disabled",S(l)),S(i).is("checked",S(u)===S(c))])},[Vn(Te("input",{ref_key:"radioRef",ref:r,"onUpdate:modelValue":m=>br(u)?u.value=m:null,class:ee(S(i).e("original")),value:S(c),name:f.name||((p=S(s))==null?void 0:p.name),disabled:S(l),checked:S(u)===S(c),type:"radio",onFocus:m=>a.value=!0,onBlur:m=>a.value=!1,onChange:d,onClick:wn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","checked","onFocus","onBlur","onClick"]),[[GJ,S(u)]]),Te("span",{class:ee(S(i).e("inner"))},null,2)],2),Te("span",{class:ee(S(i).e("label")),onKeydown:wn(()=>{},["stop"])},[at(f.$slots,"default",{},()=>[An(Lt(f.label),1)])],42,["onKeydown"])],2)}}});var XEe=Vt(KEe,[["__file","radio.vue"]]);const YEe=zt({...ine}),QEe=Ne({name:"ElRadioButton"}),ZEe=Ne({...QEe,props:YEe,setup(n){const e=n,t=Rt("radio"),{radioRef:i,focus:r,size:s,disabled:a,modelValue:o,radioGroup:l,actualValue:u}=ane(e),c=W(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(d,f)=>{var h;return j(),_e("label",{class:ee([S(t).b("button"),S(t).is("active",S(o)===S(u)),S(t).is("disabled",S(a)),S(t).is("focus",S(r)),S(t).bm("button",S(s))])},[Vn(Te("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":p=>br(o)?o.value=p:null,class:ee(S(t).be("button","original-radio")),value:S(u),type:"radio",name:d.name||((h=S(l))==null?void 0:h.name),disabled:S(a),onFocus:p=>r.value=!0,onBlur:p=>r.value=!1,onClick:wn(()=>{},["stop"])},null,42,["onUpdate:modelValue","value","name","disabled","onFocus","onBlur","onClick"]),[[GJ,S(o)]]),Te("span",{class:ee(S(t).be("button","inner")),style:Jt(S(o)===S(u)?S(c):{}),onKeydown:wn(()=>{},["stop"])},[at(d.$slots,"default",{},()=>[An(Lt(d.label),1)])],46,["onKeydown"])],2)}}});var one=Vt(ZEe,[["__file","radio-button.vue"]]);const JEe=zt({id:{type:String,default:void 0},size:ks,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:void 0},fill:{type:String,default:""},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0},...Ba(["ariaLabel"])}),eMe=rne,tMe=Ne({name:"ElRadioGroup"}),nMe=Ne({...tMe,props:JEe,emits:eMe,setup(n,{emit:e}){const t=n,i=Rt("radio"),r=Oa(),s=ae(),{formItem:a}=to(),{inputId:o,isLabeledByFormItem:l}=hc(t,{formItemContext:a}),u=d=>{e($n,d),cn(()=>e("change",d))};Ln(()=>{const d=s.value.querySelectorAll("[type=radio]"),f=d[0];!Array.from(d).some(h=>h.checked)&&f&&(f.tabIndex=0)});const c=W(()=>t.name||r.value);return ui(sne,Ui({...js(t),changeEvent:u,name:c})),St(()=>t.modelValue,()=>{t.validateEvent&&(a==null||a.validate("change").catch(d=>void 0))}),(d,f)=>(j(),_e("div",{id:S(o),ref_key:"radioGroupRef",ref:s,class:ee(S(i).b("group")),role:"radiogroup","aria-label":S(l)?void 0:d.ariaLabel||"radio-group","aria-labelledby":S(l)?S(a).labelId:void 0},[at(d.$slots,"default")],10,["id","aria-label","aria-labelledby"]))}});var lne=Vt(nMe,[["__file","radio-group.vue"]]);const une=Nn(XEe,{RadioButton:one,RadioGroup:lne}),iMe=Xr(lne),rMe=Xr(one);var sMe=Ne({name:"NodeContent",setup(){return{ns:Rt("cascader-node")}},render(){const{ns:n}=this,{node:e,panel:t}=this.$parent,{data:i,label:r}=e,{renderLabelFn:s}=t;return ln("span",{class:n.e("label")},s?s({node:e,data:i}):r)}});const CF=Symbol(),aMe=Ne({name:"ElCascaderNode",components:{ElCheckbox:sc,ElRadio:une,NodeContent:sMe,ElIcon:rn,Check:fT,Loading:$d,ArrowRight:Qo},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(n,{emit:e}){const t=Zt(CF),i=Rt("cascader-node"),r=W(()=>t.isHoverMenu),s=W(()=>t.config.multiple),a=W(()=>t.config.checkStrictly),o=W(()=>{var w;return(w=t.checkedNodes[0])==null?void 0:w.uid}),l=W(()=>n.node.isDisabled),u=W(()=>n.node.isLeaf),c=W(()=>a.value&&!u.value||!l.value),d=W(()=>h(t.expandingNode)),f=W(()=>a.value&&t.checkedNodes.some(h)),h=w=>{var A;const{level:T,uid:C}=n.node;return((A=w==null?void 0:w.pathNodes[T-1])==null?void 0:A.uid)===C},p=()=>{d.value||t.expandNode(n.node)},m=w=>{const{node:A}=n;w!==A.checked&&t.handleCheckChange(A,w)},g=()=>{t.lazyLoad(n.node,()=>{u.value||p()})},v=w=>{r.value&&(_(),!u.value&&e("expand",w))},_=()=>{const{node:w}=n;!c.value||w.loading||(w.loaded?p():g())},y=()=>{r.value&&!u.value||(u.value&&!l.value&&!a.value&&!s.value?x(!0):_())},b=w=>{a.value?(m(w),n.node.loaded&&p()):x(w)},x=w=>{n.node.loaded?(m(w),!a.value&&p()):g()};return{panel:t,isHoverMenu:r,multiple:s,checkStrictly:a,checkedNodeId:o,isDisabled:l,isLeaf:u,expandable:c,inExpandingPath:d,inCheckedPath:f,ns:i,handleHoverExpand:v,handleExpand:_,handleClick:y,handleCheck:x,handleSelectCheck:b}}});function oMe(n,e,t,i,r,s){const a=Ht("el-checkbox"),o=Ht("el-radio"),l=Ht("check"),u=Ht("el-icon"),c=Ht("node-content"),d=Ht("loading"),f=Ht("arrow-right");return j(),_e("li",{id:`${n.menuId}-${n.node.uid}`,role:"menuitem","aria-haspopup":!n.isLeaf,"aria-owns":n.isLeaf?null:n.menuId,"aria-expanded":n.inExpandingPath,tabindex:n.expandable?-1:void 0,class:ee([n.ns.b(),n.ns.is("selectable",n.checkStrictly),n.ns.is("active",n.node.checked),n.ns.is("disabled",!n.expandable),n.inExpandingPath&&"in-active-path",n.inCheckedPath&&"in-checked-path"]),onMouseenter:n.handleHoverExpand,onFocus:n.handleHoverExpand,onClick:n.handleClick},[ot(" prefix "),n.multiple?(j(),gt(a,{key:0,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:n.isDisabled,onClick:wn(()=>{},["stop"]),"onUpdate:modelValue":n.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onClick","onUpdate:modelValue"])):n.checkStrictly?(j(),gt(o,{key:1,"model-value":n.checkedNodeId,label:n.node.uid,disabled:n.isDisabled,"onUpdate:modelValue":n.handleSelectCheck,onClick:wn(()=>{},["stop"])},{default:Ae(()=>[ot(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Te("span")]),_:1},8,["model-value","label","disabled","onUpdate:modelValue","onClick"])):n.isLeaf&&n.node.checked?(j(),gt(u,{key:2,class:ee(n.ns.e("prefix"))},{default:Ae(()=>[he(l)]),_:1},8,["class"])):ot("v-if",!0),ot(" content "),he(c),ot(" postfix "),n.isLeaf?ot("v-if",!0):(j(),_e(an,{key:3},[n.node.loading?(j(),gt(u,{key:0,class:ee([n.ns.is("loading"),n.ns.e("postfix")])},{default:Ae(()=>[he(d)]),_:1},8,["class"])):(j(),gt(u,{key:1,class:ee(["arrow-right",n.ns.e("postfix")])},{default:Ae(()=>[he(f)]),_:1},8,["class"]))],64))],42,["id","aria-haspopup","aria-owns","aria-expanded","tabindex","onMouseenter","onFocus","onClick"])}var lMe=Vt(aMe,[["render",oMe],["__file","node.vue"]]);const uMe=Ne({name:"ElCascaderMenu",components:{Loading:$d,ElIcon:rn,ElScrollbar:nf,ElCascaderNode:lMe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(n){const e=Qn(),t=Rt("cascader-menu"),{t:i}=wi(),r=Oa();let s=null,a=null;const o=Zt(CF),l=ae(null),u=W(()=>!n.nodes.length),c=W(()=>!o.initialLoaded),d=W(()=>`${r.value}-${n.index}`),f=g=>{s=g.target},h=g=>{if(!(!o.isHoverMenu||!s||!l.value))if(s.contains(g.target)){p();const v=e.vnode.el,{left:_}=v.getBoundingClientRect(),{offsetWidth:y,offsetHeight:b}=v,x=g.clientX-_,w=s.offsetTop,A=w+s.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${w} L${y} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${x} ${A} L${y} ${b} V${A} Z" />
        `}else a||(a=window.setTimeout(m,o.config.hoverThreshold))},p=()=>{a&&(clearTimeout(a),a=null)},m=()=>{l.value&&(l.value.innerHTML="",p())};return{ns:t,panel:o,hoverZone:l,isEmpty:u,isLoading:c,menuId:d,t:i,handleExpand:f,handleMouseMove:h,clearHoverZone:m}}});function cMe(n,e,t,i,r,s){const a=Ht("el-cascader-node"),o=Ht("loading"),l=Ht("el-icon"),u=Ht("el-scrollbar");return j(),gt(u,{key:n.menuId,tag:"ul",role:"menu",class:ee(n.ns.b()),"wrap-class":n.ns.e("wrap"),"view-class":[n.ns.e("list"),n.ns.is("empty",n.isEmpty)],onMousemove:n.handleMouseMove,onMouseleave:n.clearHoverZone},{default:Ae(()=>{var c;return[(j(!0),_e(an,null,ti(n.nodes,d=>(j(),gt(a,{key:d.uid,node:d,"menu-id":n.menuId,onExpand:n.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),n.isLoading?(j(),_e("div",{key:0,class:ee(n.ns.e("empty-text"))},[he(l,{size:"14",class:ee(n.ns.is("loading"))},{default:Ae(()=>[he(o)]),_:1},8,["class"]),An(" "+Lt(n.t("el.cascader.loading")),1)],2)):n.isEmpty?(j(),_e("div",{key:1,class:ee(n.ns.e("empty-text"))},[at(n.$slots,"empty",{},()=>[An(Lt(n.t("el.cascader.noData")),1)])],2)):(c=n.panel)!=null&&c.isHoverMenu?(j(),_e("svg",{key:2,ref:"hoverZone",class:ee(n.ns.e("hover-zone"))},null,2)):ot("v-if",!0)]}),_:3},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var dMe=Vt(uMe,[["render",cMe],["__file","menu.vue"]]);const AF=(n="")=>n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),xd=n=>aT(n);let fMe=0;const hMe=n=>{const e=[n];let{parent:t}=n;for(;t;)e.unshift(t),t=t.parent;return e};let m6=class g6{constructor(e,t,i,r=!1){this.data=e,this.config=t,this.parent=i,this.root=r,this.uid=fMe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:a,children:o}=t,l=e[o],u=hMe(this);this.level=r?0:i?i.level+1:1,this.value=e[s],this.label=e[a],this.pathNodes=u,this.pathValues=u.map(c=>c.value),this.pathLabels=u.map(c=>c.label),this.childrenData=l,this.children=(l||[]).map(c=>new g6(c,t,this)),this.loaded=!t.lazy||this.isLeaf||!eu(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:r,checkStrictly:s}=i;return(pn(r)?r(e,this):!!e[r])||!s&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:r}=this,{lazy:s,leaf:a}=t,o=pn(a)?a(e,this):e[a];return Xi(o)?s&&!r?!1:!(Bt(i)&&i.length):!!o}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,r=new g6(e,this.config,this);return Bt(t)?t.push(e):this.childrenData=[e],i.push(r),r}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${xd(e)}`;this.children.forEach(r=>{r&&(r.broadcast(e,...t),r[i]&&r[i](...t))})}emit(e,...t){const{parent:i}=this,r=`onChild${xd(e)}`;i&&(i[r]&&i[r](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(r=>!r.isDisabled),i=t.length?t.every(r=>r.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((r,s)=>{const a=s.checked?1:s.indeterminate?.5:0;return r+a},0);this.checked=this.loaded&&this.children.filter(r=>!r.isDisabled).every(r=>r.loaded&&r.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const v6=(n,e)=>n.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(v6(i.children,e))),t),[]);class i${constructor(e,t){this.config=t;const i=(e||[]).map(r=>new m6(r,this.config));this.nodes=i,this.allNodes=v6(i,!1),this.leafNodes=v6(i,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,t){const i=t?t.appendChild(e):new m6(e,this.config);t||this.nodes.push(i),this.allNodes.push(i),i.isLeaf&&this.leafNodes.push(i)}appendNodes(e,t){e.forEach(i=>this.appendNode(i,t))}getNodeByValue(e,t=!1){return!e&&e!==0?null:this.getFlattedNodes(t).find(r=>La(r.value,e)||La(r.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:i,level:r})=>La(e.value,i)&&e.level===r)||null}}const cne=zt({modelValue:{type:et([Number,String,Array])},options:{type:et(Array),default:()=>[]},props:{type:et(Object),default:()=>({})}}),pMe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:qi,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},mMe=n=>W(()=>({...pMe,...n.props})),r$=n=>{if(!n)return 0;const e=n.id.split("-");return Number(e[e.length-2])},gMe=n=>{if(!n)return;const e=n.querySelector("input");e?e.click():hte(n)&&n.click()},vMe=(n,e)=>{const t=e.slice(0),i=t.map(s=>s.uid),r=n.reduce((s,a)=>{const o=i.indexOf(a.uid);return o>-1&&(s.push(a),t.splice(o,1),i.splice(o,1)),s},[]);return r.push(...t),r},s$=n=>[...new Set(n)],Wo=n=>!n&&n!==0?[]:Bt(n)?n:[n],yMe=Ne({name:"ElCascaderPanel",components:{ElCascaderMenu:dMe},props:{...cne,border:{type:Boolean,default:!0},renderLabel:Function},emits:[$n,er,"close","expand-change"],setup(n,{emit:e,slots:t}){let i=!1;const r=Rt("cascader"),s=mMe(n);let a=null;const o=ae(!0),l=ae([]),u=ae(null),c=ae([]),d=ae(null),f=ae([]),h=W(()=>s.value.expandTrigger==="hover"),p=W(()=>n.renderLabel||t.default),m=()=>{const{options:k}=n,O=s.value;i=!1,a=new i$(k,O),c.value=[a.getNodes()],O.lazy&&eu(n.options)?(o.value=!1,g(void 0,U=>{U&&(a=new i$(U,O),c.value=[a.getNodes()]),o.value=!0,T(!1,!0)})):T(!1,!0)},g=(k,O)=>{const U=s.value;k=k||new m6({},U,void 0,!0),k.loading=!0;const z=L=>{const G=k,H=G.root?null:G;L&&(a==null||a.appendNodes(L,H)),G.loading=!1,G.loaded=!0,G.childrenData=G.childrenData||[],O&&O(L)};U.lazyLoad(k,z)},v=(k,O)=>{var U;const{level:z}=k,L=c.value.slice(0,z);let G;k.isLeaf?G=k.pathNodes[z-2]:(G=k,L.push(k.children)),((U=d.value)==null?void 0:U.uid)!==(G==null?void 0:G.uid)&&(d.value=k,c.value=L,!O&&e("expand-change",(k==null?void 0:k.pathValues)||[]))},_=(k,O,U=!0)=>{const{checkStrictly:z,multiple:L}=s.value,G=f.value[0];i=!0,!L&&(G==null||G.doCheck(!1)),k.doCheck(O),A(),U&&!L&&!z&&e("close"),!U&&!L&&!z&&y(k)},y=k=>{k&&(k=k.parent,y(k),k&&v(k))},b=k=>a==null?void 0:a.getFlattedNodes(k),x=k=>{var O;return(O=b(k))==null?void 0:O.filter(U=>U.checked!==!1)},w=()=>{f.value.forEach(k=>k.doCheck(!1)),A(),c.value=c.value.slice(0,1),d.value=null,e("expand-change",[])},A=()=>{var k;const{checkStrictly:O,multiple:U}=s.value,z=f.value,L=x(!O),G=vMe(z,L),H=G.map(F=>F.valueByOption);f.value=G,u.value=U?H:(k=H[0])!=null?k:null},T=(k=!1,O=!1)=>{const{modelValue:U}=n,{lazy:z,multiple:L,checkStrictly:G}=s.value,H=!G;if(!(!o.value||i||!O&&La(U,u.value)))if(z&&!k){const X=s$(iSe(Wo(U))).map(te=>a==null?void 0:a.getNodeByValue(te)).filter(te=>!!te&&!te.loaded&&!te.loading);X.length?X.forEach(te=>{g(te,()=>T(!1,O))}):T(!0,O)}else{const F=L?Wo(U):[U],X=s$(F.map(te=>a==null?void 0:a.getNodeByValue(te,H)));C(X,O),u.value=w3(U)}},C=(k,O=!0)=>{const{checkStrictly:U}=s.value,z=f.value,L=k.filter(F=>!!F&&(U||F.isLeaf)),G=a==null?void 0:a.getSameNode(d.value),H=O&&G||L[0];H?H.pathNodes.forEach(F=>v(F,!0)):d.value=null,z.forEach(F=>F.doCheck(!1)),Ui(L).forEach(F=>F.doCheck(!0)),f.value=L,cn(E)},E=()=>{xi&&l.value.forEach(k=>{const O=k==null?void 0:k.$el;if(O){const U=O.querySelector(`.${r.namespace.value}-scrollbar__wrap`),z=O.querySelector(`.${r.b("node")}.${r.is("active")}`)||O.querySelector(`.${r.b("node")}.in-active-path`);tF(U,z)}})},I=k=>{const O=k.target,{code:U}=k;switch(U){case Kt.up:case Kt.down:{k.preventDefault();const z=U===Kt.up?-1:1;gM(pte(O,z,`.${r.b("node")}[tabindex="-1"]`));break}case Kt.left:{k.preventDefault();const z=l.value[r$(O)-1],L=z==null?void 0:z.$el.querySelector(`.${r.b("node")}[aria-expanded="true"]`);gM(L);break}case Kt.right:{k.preventDefault();const z=l.value[r$(O)+1],L=z==null?void 0:z.$el.querySelector(`.${r.b("node")}[tabindex="-1"]`);gM(L);break}case Kt.enter:case Kt.numpadEnter:gMe(O);break}};return ui(CF,Ui({config:s,expandingNode:d,checkedNodes:f,isHoverMenu:h,initialLoaded:o,renderLabelFn:p,lazyLoad:g,expandNode:v,handleCheckChange:_})),St([s,()=>n.options],m,{deep:!0,immediate:!0}),St(()=>n.modelValue,()=>{i=!1,T()},{deep:!0}),St(()=>u.value,k=>{La(k,n.modelValue)||(e($n,k),e(er,k))}),EB(()=>l.value=[]),Ln(()=>!eu(n.modelValue)&&T()),{ns:r,menuList:l,menus:c,checkedNodes:f,handleKeyDown:I,handleCheckChange:_,getFlattedNodes:b,getCheckedNodes:x,clearCheckedNodes:w,calculateCheckedValue:A,scrollToExpandingNode:E}}});function _Me(n,e,t,i,r,s){const a=Ht("el-cascader-menu");return j(),_e("div",{class:ee([n.ns.b("panel"),n.ns.is("bordered",n.border)]),onKeydown:n.handleKeyDown},[(j(!0),_e(an,null,ti(n.menus,(o,l)=>(j(),gt(a,{key:l,ref_for:!0,ref:u=>n.menuList[l]=u,index:l,nodes:[...o]},{empty:Ae(()=>[at(n.$slots,"empty")]),_:2},1032,["index","nodes"]))),128))],42,["onKeydown"])}var bMe=Vt(yMe,[["render",_Me],["__file","index.vue"]]);const dne=Nn(bMe),rh=zt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:tf},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),SMe={close:n=>n instanceof MouseEvent,click:n=>n instanceof MouseEvent},xMe=Ne({name:"ElTag"}),wMe=Ne({...xMe,props:rh,emits:SMe,setup(n,{emit:e}){const t=n,i=ws(),r=Rt("tag"),s=W(()=>{const{type:u,hit:c,effect:d,closable:f,round:h}=t;return[r.b(),r.is("closable",f),r.m(u||"primary"),r.m(i.value),r.m(d),r.is("hit",c),r.is("round",h)]}),a=u=>{e("close",u)},o=u=>{e("click",u)},l=u=>{var c,d,f;(f=(d=(c=u==null?void 0:u.component)==null?void 0:c.subTree)==null?void 0:d.component)!=null&&f.bum&&(u.component.subTree.component.bum=null)};return(u,c)=>u.disableTransitions?(j(),_e("span",{key:0,class:ee(S(s)),style:Jt({backgroundColor:u.color}),onClick:o},[Te("span",{class:ee(S(r).e("content"))},[at(u.$slots,"default")],2),u.closable?(j(),gt(S(rn),{key:0,class:ee(S(r).e("close")),onClick:wn(a,["stop"])},{default:Ae(()=>[he(S(qc))]),_:1},8,["class","onClick"])):ot("v-if",!0)],6)):(j(),gt(Ks,{key:1,name:`${S(r).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:Ae(()=>[Te("span",{class:ee(S(s)),style:Jt({backgroundColor:u.color}),onClick:o},[Te("span",{class:ee(S(r).e("content"))},[at(u.$slots,"default")],2),u.closable?(j(),gt(S(rn),{key:0,class:ee(S(r).e("close")),onClick:wn(a,["stop"])},{default:Ae(()=>[he(S(qc))]),_:1},8,["class","onClick"])):ot("v-if",!0)],6)]),_:3},8,["name"]))}});var TMe=Vt(wMe,[["__file","tag.vue"]]);const p_=Nn(TMe),CMe=zt({...cne,size:ks,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:et(Function),default:(n,e)=>n.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:et(Function),default:()=>!0},placement:{type:et(String),values:wh,default:"bottom-start"},fallbackPlacements:{type:et(Array),default:["bottom-start","bottom","top-start","top","right","left"]},popperClass:{type:String,default:""},teleported:ua.teleported,tagType:{...rh.type,default:"info"},tagEffect:{...rh.effect,default:"light"},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...fb}),AMe={[$n]:n=>!0,[er]:n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0,visibleChange:n=>fr(n),expandChange:n=>!!n,removeTag:n=>!!n},gp=new Map;if(xi){let n;document.addEventListener("mousedown",e=>n=e),document.addEventListener("mouseup",e=>{if(n){for(const t of gp.values())for(const{documentHandler:i}of t)i(e,n);n=void 0}})}function a$(n,e){let t=[];return Bt(e.arg)?t=e.arg:au(e.arg)&&t.push(e.arg),function(i,r){const s=e.instance.popperRef,a=i.target,o=r==null?void 0:r.target,l=!e||!e.instance,u=!a||!o,c=n.contains(a)||n.contains(o),d=n===a,f=t.length&&t.some(p=>p==null?void 0:p.contains(a))||t.length&&t.includes(o),h=s&&(s.contains(a)||s.contains(o));l||u||c||d||f||h||e.value(i,r)}}const sh={beforeMount(n,e){gp.has(n)||gp.set(n,[]),gp.get(n).push({documentHandler:a$(n,e),bindingFn:e.value})},updated(n,e){gp.has(n)||gp.set(n,[]);const t=gp.get(n),i=t.findIndex(s=>s.bindingFn===e.oldValue),r={documentHandler:a$(n,e),bindingFn:e.value};i>=0?t.splice(i,1,r):t.push(r)},unmounted(n){gp.delete(n)}},EMe="ElCascader",MMe=Ne({name:EMe}),IMe=Ne({...MMe,props:CMe,emits:AMe,setup(n,{expose:e,emit:t}){const i=n,r={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:ve})=>{const{modifiersData:ke,placement:we}=ve;["right","left","bottom","top"].includes(we)||(ke.arrow.x=35)},requires:["arrow"]}]},s=S0();let a=0,o=0;const l=Rt("cascader"),u=Rt("input"),{t:c}=wi(),{form:d,formItem:f}=to(),{valueOnClear:h}=GI(i),{isComposing:p,handleComposition:m}=pT({afterComposition(ve){var ke;const we=(ke=ve.target)==null?void 0:ke.value;q(we)}}),g=ae(null),v=ae(null),_=ae(null),y=ae(null),b=ae(null),x=ae(!1),w=ae(!1),A=ae(!1),T=ae(!1),C=ae(""),E=ae(""),I=ae([]),k=ae([]),O=ae([]),U=W(()=>s.style),z=W(()=>i.disabled||(d==null?void 0:d.disabled)),L=W(()=>i.placeholder||c("el.cascader.placeholder")),G=W(()=>E.value||I.value.length>0||p.value?"":L.value),H=ws(),F=W(()=>H.value==="small"?"small":"default"),X=W(()=>!!i.props.multiple),te=W(()=>!i.filterable||X.value),re=W(()=>X.value?E.value:C.value),ie=W(()=>{var ve;return((ve=y.value)==null?void 0:ve.checkedNodes)||[]}),le=W(()=>!i.clearable||z.value||A.value||!w.value?!1:!!ie.value.length),ge=W(()=>{const{showAllLevels:ve,separator:ke}=i,we=ie.value;return we.length?X.value?"":we[0].calcText(ve,ke):""}),pe=W(()=>(f==null?void 0:f.validateState)||""),ye=W({get(){return w3(i.modelValue)},set(ve){const ke=ve??h.value;t($n,ke),t(er,ke),i.validateEvent&&(f==null||f.validate("change").catch(we=>void 0))}}),Oe=W(()=>[l.b(),l.m(H.value),l.is("disabled",z.value),s.class]),Be=W(()=>[u.e("icon"),"icon-arrow-down",l.is("reverse",x.value)]),Ye=W(()=>l.is("focus",x.value||T.value)),Ze=W(()=>{var ve,ke;return(ke=(ve=g.value)==null?void 0:ve.popperRef)==null?void 0:ke.contentRef}),Q=ve=>{var ke,we,De;z.value||(ve=ve??!x.value,ve!==x.value&&(x.value=ve,(we=(ke=v.value)==null?void 0:ke.input)==null||we.setAttribute("aria-expanded",`${ve}`),ve?(me(),cn((De=y.value)==null?void 0:De.scrollToExpandingNode)):i.filterable&&ze(),t("visibleChange",ve)))},me=()=>{cn(()=>{var ve;(ve=g.value)==null||ve.updatePopper()})},ce=()=>{A.value=!1},je=ve=>{const{showAllLevels:ke,separator:we}=i;return{node:ve,key:ve.uid,text:ve.calcText(ke,we),hitState:!1,closable:!z.value&&!ve.isDisabled,isCollapseTag:!1}},Fe=ve=>{var ke;const we=ve.node;we.doCheck(!1),(ke=y.value)==null||ke.calculateCheckedValue(),t("removeTag",we.valueByOption)},nt=()=>{if(!X.value)return;const ve=ie.value,ke=[],we=[];if(ve.forEach(De=>we.push(je(De))),k.value=we,ve.length){ve.slice(0,i.maxCollapseTags).forEach(Pe=>ke.push(je(Pe)));const De=ve.slice(i.maxCollapseTags),xt=De.length;xt&&(i.collapseTags?ke.push({key:-1,text:`+ ${xt}`,closable:!1,isCollapseTag:!0}):De.forEach(Pe=>ke.push(je(Pe))))}I.value=ke},We=()=>{var ve,ke;const{filterMethod:we,showAllLevels:De,separator:xt}=i,Pe=(ke=(ve=y.value)==null?void 0:ve.getFlattedNodes(!i.props.checkStrictly))==null?void 0:ke.filter(Dt=>Dt.isDisabled?!1:(Dt.calcText(De,xt),we(Dt,re.value)));X.value&&(I.value.forEach(Dt=>{Dt.hitState=!1}),k.value.forEach(Dt=>{Dt.hitState=!1})),A.value=!0,O.value=Pe,me()},Ke=()=>{var ve;let ke;A.value&&b.value?ke=b.value.$el.querySelector(`.${l.e("suggestion-item")}`):ke=(ve=y.value)==null?void 0:ve.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),ke&&(ke.focus(),!A.value&&ke.click())},it=()=>{var ve,ke;const we=(ve=v.value)==null?void 0:ve.input,De=_.value,xt=(ke=b.value)==null?void 0:ke.$el;if(!(!xi||!we)){if(xt){const Pe=xt.querySelector(`.${l.e("suggestion-list")}`);Pe.style.minWidth=`${we.offsetWidth}px`}if(De){const{offsetHeight:Pe}=De,Dt=I.value.length>0?`${Math.max(Pe,a)-2}px`:`${a}px`;we.style.height=Dt,me()}}},be=ve=>{var ke;return(ke=y.value)==null?void 0:ke.getCheckedNodes(ve)},K=ve=>{me(),t("expandChange",ve)},ne=ve=>{if(!p.value)switch(ve.code){case Kt.enter:case Kt.numpadEnter:Q();break;case Kt.down:Q(!0),cn(Ke),ve.preventDefault();break;case Kt.esc:x.value===!0&&(ve.preventDefault(),ve.stopPropagation(),Q(!1));break;case Kt.tab:Q(!1);break}},Se=()=>{var ve;(ve=y.value)==null||ve.clearCheckedNodes(),!x.value&&i.filterable&&ze(),Q(!1),t("clear")},ze=()=>{const{value:ve}=ge;C.value=ve,E.value=ve},Je=ve=>{var ke,we;const{checked:De}=ve;X.value?(ke=y.value)==null||ke.handleCheckChange(ve,!De,!1):(!De&&((we=y.value)==null||we.handleCheckChange(ve,!0,!1)),Q(!1))},Tt=ve=>{const ke=ve.target,{code:we}=ve;switch(we){case Kt.up:case Kt.down:{const De=we===Kt.up?-1:1;gM(pte(ke,De,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case Kt.enter:case Kt.numpadEnter:ke.click();break}},At=()=>{const ve=I.value,ke=ve[ve.length-1];o=E.value?0:o+1,!(!ke||!o||i.collapseTags&&ve.length>1)&&(ke.hitState?Fe(ke):ke.hitState=!0)},Re=ve=>{const ke=ve.target,we=l.e("search-input");ke.className===we&&(T.value=!0),t("focus",ve)},wt=ve=>{T.value=!1,t("blur",ve)},vt=Rl(()=>{const{value:ve}=re;if(!ve)return;const ke=i.beforeFilter(ve);N2(ke)?ke.then(We).catch(()=>{}):ke!==!1?We():ce()},i.debounce),q=(ve,ke)=>{!x.value&&Q(!0),!(ke!=null&&ke.isComposing)&&(ve?vt():ce())},xe=ve=>Number.parseFloat($Se(u.cssVarName("input-height"),ve).value)-2;return St(A,me),St([ie,z,()=>i.collapseTags],nt),St(I,()=>{cn(()=>it())}),St(H,async()=>{await cn();const ve=v.value.input;a=xe(ve)||a,it()}),St(ge,ze,{immediate:!0}),Ln(()=>{const ve=v.value.input,ke=xe(ve);a=ve.offsetHeight||ke,Br(ve,it)}),e({getCheckedNodes:be,cascaderPanelRef:y,togglePopperVisible:Q,contentRef:Ze,presentText:ge}),(ve,ke)=>(j(),gt(S(Ja),{ref_key:"tooltipRef",ref:g,visible:x.value,teleported:ve.teleported,"popper-class":[S(l).e("dropdown"),ve.popperClass],"popper-options":r,"fallback-placements":ve.fallbackPlacements,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:ve.placement,transition:`${S(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:ve.persistent,onHide:ce},{default:Ae(()=>[Vn((j(),_e("div",{class:ee(S(Oe)),style:Jt(S(U)),onClick:()=>Q(S(te)?void 0:!0),onKeydown:ne,onMouseenter:we=>w.value=!0,onMouseleave:we=>w.value=!1},[he(S(So),{ref_key:"input",ref:v,modelValue:C.value,"onUpdate:modelValue":we=>C.value=we,placeholder:S(G),readonly:S(te),disabled:S(z),"validate-event":!1,size:S(H),class:ee(S(Ye)),tabindex:S(X)&&ve.filterable&&!S(z)?-1:void 0,onCompositionstart:S(m),onCompositionupdate:S(m),onCompositionend:S(m),onFocus:Re,onBlur:wt,onInput:q},{suffix:Ae(()=>[S(le)?(j(),gt(S(rn),{key:"clear",class:ee([S(u).e("icon"),"icon-circle-close"]),onClick:wn(Se,["stop"])},{default:Ae(()=>[he(S(xh))]),_:1},8,["class","onClick"])):(j(),gt(S(rn),{key:"arrow-down",class:ee(S(Be)),onClick:wn(we=>Q(),["stop"])},{default:Ae(()=>[he(S(Sh))]),_:1},8,["class","onClick"]))]),_:1},8,["modelValue","onUpdate:modelValue","placeholder","readonly","disabled","size","class","tabindex","onCompositionstart","onCompositionupdate","onCompositionend"]),S(X)?(j(),_e("div",{key:0,ref_key:"tagWrapper",ref:_,class:ee([S(l).e("tags"),S(l).is("validate",!!S(pe))])},[(j(!0),_e(an,null,ti(I.value,we=>(j(),gt(S(p_),{key:we.key,type:ve.tagType,size:S(F),effect:ve.tagEffect,hit:we.hitState,closable:we.closable,"disable-transitions":"",onClose:De=>Fe(we)},{default:Ae(()=>[we.isCollapseTag===!1?(j(),_e("span",{key:0},Lt(we.text),1)):(j(),gt(S(Ja),{key:1,disabled:x.value||!ve.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:Ae(()=>[Te("span",null,Lt(we.text),1)]),content:Ae(()=>[Te("div",{class:ee(S(l).e("collapse-tags"))},[(j(!0),_e(an,null,ti(k.value.slice(ve.maxCollapseTags),(De,xt)=>(j(),_e("div",{key:xt,class:ee(S(l).e("collapse-tag"))},[(j(),gt(S(p_),{key:De.key,class:"in-tooltip",type:ve.tagType,size:S(F),effect:ve.tagEffect,hit:De.hitState,closable:De.closable,"disable-transitions":"",onClose:Pe=>Fe(De)},{default:Ae(()=>[Te("span",null,Lt(De.text),1)]),_:2},1032,["type","size","effect","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","effect","hit","closable","onClose"]))),128)),ve.filterable&&!S(z)?Vn((j(),_e("input",{key:0,"onUpdate:modelValue":we=>E.value=we,type:"text",class:ee(S(l).e("search-input")),placeholder:S(ge)?"":S(L),onInput:we=>q(E.value,we),onClick:wn(we=>Q(!0),["stop"]),onKeydown:ur(At,["delete"]),onCompositionstart:S(m),onCompositionupdate:S(m),onCompositionend:S(m),onFocus:Re,onBlur:wt},null,42,["onUpdate:modelValue","placeholder","onInput","onClick","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend"])),[[OI,E.value]]):ot("v-if",!0)],2)):ot("v-if",!0)],46,["onClick","onMouseenter","onMouseleave"])),[[S(sh),()=>Q(!1),S(Ze)]])]),content:Ae(()=>[Vn(he(S(dne),{ref_key:"cascaderPanelRef",ref:y,modelValue:S(ye),"onUpdate:modelValue":we=>br(ye)?ye.value=we:null,options:ve.options,props:i.props,border:!1,"render-label":ve.$slots.default,onExpandChange:K,onClose:we=>ve.$nextTick(()=>Q(!1))},{empty:Ae(()=>[at(ve.$slots,"empty")]),_:3},8,["modelValue","onUpdate:modelValue","options","props","render-label","onClose"]),[[Oi,!A.value]]),ve.filterable?Vn((j(),gt(S(nf),{key:0,ref_key:"suggestionPanel",ref:b,tag:"ul",class:ee(S(l).e("suggestion-panel")),"view-class":S(l).e("suggestion-list"),onKeydown:Tt},{default:Ae(()=>[O.value.length?(j(!0),_e(an,{key:0},ti(O.value,we=>(j(),_e("li",{key:we.uid,class:ee([S(l).e("suggestion-item"),S(l).is("checked",we.checked)]),tabindex:-1,onClick:De=>Je(we)},[Te("span",null,Lt(we.text),1),we.checked?(j(),gt(S(rn),{key:0},{default:Ae(()=>[he(S(fT))]),_:1})):ot("v-if",!0)],10,["onClick"]))),128)):at(ve.$slots,"empty",{key:1},()=>[Te("li",{class:ee(S(l).e("empty-text"))},Lt(S(c)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[Oi,A.value]]):ot("v-if",!0)]),_:3},8,["visible","teleported","popper-class","fallback-placements","placement","transition","persistent"]))}});var DMe=Vt(IMe,[["__file","cascader.vue"]]);const RMe=Nn(DMe),PMe=zt({checked:Boolean,disabled:Boolean,type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"}}),kMe={"update:checked":n=>fr(n),[er]:n=>fr(n)},LMe=Ne({name:"ElCheckTag"}),OMe=Ne({...LMe,props:PMe,emits:kMe,setup(n,{emit:e}){const t=n,i=Rt("check-tag"),r=W(()=>t.disabled),s=W(()=>[i.b(),i.is("checked",t.checked),i.is("disabled",r.value),i.m(t.type||"primary")]),a=()=>{if(r.value)return;const o=!t.checked;e(er,o),e("update:checked",o)};return(o,l)=>(j(),_e("span",{class:ee(S(s)),onClick:a},[at(o.$slots,"default")],2))}});var NMe=Vt(OMe,[["__file","check-tag.vue"]]);const BMe=Nn(NMe),FMe=zt({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:et([Number,Object]),default:()=>Kr({})},sm:{type:et([Number,Object]),default:()=>Kr({})},md:{type:et([Number,Object]),default:()=>Kr({})},lg:{type:et([Number,Object]),default:()=>Kr({})},xl:{type:et([Number,Object]),default:()=>Kr({})}}),fne=Symbol("rowContextKey"),UMe=Ne({name:"ElCol"}),zMe=Ne({...UMe,props:FMe,setup(n){const e=n,{gutter:t}=Zt(fne,{gutter:W(()=>0)}),i=Rt("col"),r=W(()=>{const a={};return t.value&&(a.paddingLeft=a.paddingRight=`${t.value/2}px`),a}),s=W(()=>{const a=[];return["span","offset","pull","push"].forEach(u=>{const c=e[u];yn(c)&&(u==="span"?a.push(i.b(`${e[u]}`)):c>0&&a.push(i.b(`${u}-${e[u]}`)))}),["xs","sm","md","lg","xl"].forEach(u=>{yn(e[u])?a.push(i.b(`${u}-${e[u]}`)):Yn(e[u])&&Object.entries(e[u]).forEach(([c,d])=>{a.push(c!=="span"?i.b(`${u}-${c}-${d}`):i.b(`${u}-${d}`))})}),t.value&&a.push(i.is("guttered")),[i.b(),a]});return(a,o)=>(j(),gt(ei(a.tag),{class:ee(S(s)),style:Jt(S(r))},{default:Ae(()=>[at(a.$slots,"default")]),_:3},8,["class","style"]))}});var HMe=Vt(zMe,[["__file","col.vue"]]);const VMe=Nn(HMe),o$=n=>yn(n)||un(n)||Bt(n),$Me=zt({accordion:Boolean,modelValue:{type:et([Array,String,Number]),default:()=>Kr([])}}),GMe={[$n]:o$,[er]:o$},hne=Symbol("collapseContextKey"),WMe=(n,e)=>{const t=ae(yo(n.modelValue)),i=s=>{t.value=s;const a=n.accordion?t.value[0]:t.value;e($n,a),e(er,a)},r=s=>{if(n.accordion)i([t.value[0]===s?"":s]);else{const a=[...t.value],o=a.indexOf(s);o>-1?a.splice(o,1):a.push(s),i(a)}};return St(()=>n.modelValue,()=>t.value=yo(n.modelValue),{deep:!0}),ui(hne,{activeNames:t,handleItemClick:r}),{activeNames:t,setActiveNames:i}},qMe=()=>{const n=Rt("collapse");return{rootKls:W(()=>n.b())}},jMe=Ne({name:"ElCollapse"}),KMe=Ne({...jMe,props:$Me,emits:GMe,setup(n,{expose:e,emit:t}){const i=n,{activeNames:r,setActiveNames:s}=WMe(i,t),{rootKls:a}=qMe();return e({activeNames:r,setActiveNames:s}),(o,l)=>(j(),_e("div",{class:ee(S(a))},[at(o.$slots,"default")],2))}});var XMe=Vt(KMe,[["__file","collapse.vue"]]);const YMe=Ne({name:"ElCollapseTransition"}),QMe=Ne({...YMe,setup(n){const e=Rt("collapse-transition"),t=r=>{r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom},i={beforeEnter(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.style.height&&(r.dataset.elExistsHeight=r.style.height),r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0},enter(r){requestAnimationFrame(()=>{r.dataset.oldOverflow=r.style.overflow,r.dataset.elExistsHeight?r.style.maxHeight=r.dataset.elExistsHeight:r.scrollHeight!==0?r.style.maxHeight=`${r.scrollHeight}px`:r.style.maxHeight=0,r.style.paddingTop=r.dataset.oldPaddingTop,r.style.paddingBottom=r.dataset.oldPaddingBottom,r.style.overflow="hidden"})},afterEnter(r){r.style.maxHeight="",r.style.overflow=r.dataset.oldOverflow},enterCancelled(r){t(r)},beforeLeave(r){r.dataset||(r.dataset={}),r.dataset.oldPaddingTop=r.style.paddingTop,r.dataset.oldPaddingBottom=r.style.paddingBottom,r.dataset.oldOverflow=r.style.overflow,r.style.maxHeight=`${r.scrollHeight}px`,r.style.overflow="hidden"},leave(r){r.scrollHeight!==0&&(r.style.maxHeight=0,r.style.paddingTop=0,r.style.paddingBottom=0)},afterLeave(r){t(r)},leaveCancelled(r){t(r)}};return(r,s)=>(j(),gt(Ks,si({name:S(e).b()},eme(i)),{default:Ae(()=>[at(r.$slots,"default")]),_:3},16,["name"]))}});var ZMe=Vt(QMe,[["__file","collapse-transition.vue"]]);const JI=Nn(ZMe),JMe=zt({title:{type:String,default:""},name:{type:et([String,Number]),default:void 0},icon:{type:nr,default:Qo},disabled:Boolean}),e3e=n=>{const e=Zt(hne),{namespace:t}=Rt("collapse"),i=ae(!1),r=ae(!1),s=cF(),a=W(()=>s.current++),o=W(()=>{var f;return(f=n.name)!=null?f:`${t.value}-id-${s.prefix}-${S(a)}`}),l=W(()=>e==null?void 0:e.activeNames.value.includes(S(o)));return{focusing:i,id:a,isActive:l,handleFocus:()=>{setTimeout(()=>{r.value?r.value=!1:i.value=!0},50)},handleHeaderClick:()=>{n.disabled||(e==null||e.handleItemClick(S(o)),i.value=!1,r.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(S(o))}}},t3e=(n,{focusing:e,isActive:t,id:i})=>{const r=Rt("collapse"),s=W(()=>[r.b("item"),r.is("active",S(t)),r.is("disabled",n.disabled)]),a=W(()=>[r.be("item","header"),r.is("active",S(t)),{focusing:S(e)&&!n.disabled}]),o=W(()=>[r.be("item","arrow"),r.is("active",S(t))]),l=W(()=>r.be("item","wrap")),u=W(()=>r.be("item","content")),c=W(()=>r.b(`content-${S(i)}`)),d=W(()=>r.b(`head-${S(i)}`));return{arrowKls:o,headKls:a,rootKls:s,itemWrapperKls:l,itemContentKls:u,scopedContentId:c,scopedHeadId:d}},n3e=Ne({name:"ElCollapseItem"}),i3e=Ne({...n3e,props:JMe,setup(n,{expose:e}){const t=n,{focusing:i,id:r,isActive:s,handleFocus:a,handleHeaderClick:o,handleEnterClick:l}=e3e(t),{arrowKls:u,headKls:c,rootKls:d,itemWrapperKls:f,itemContentKls:h,scopedContentId:p,scopedHeadId:m}=t3e(t,{focusing:i,isActive:s,id:r});return e({isActive:s}),(g,v)=>(j(),_e("div",{class:ee(S(d))},[Te("button",{id:S(m),class:ee(S(c)),"aria-expanded":S(s),"aria-controls":S(p),"aria-describedby":S(p),tabindex:g.disabled?-1:0,type:"button",onClick:S(o),onKeydown:ur(wn(S(l),["stop","prevent"]),["space","enter"]),onFocus:S(a),onBlur:_=>i.value=!1},[at(g.$slots,"title",{},()=>[An(Lt(g.title),1)]),at(g.$slots,"icon",{isActive:S(s)},()=>[he(S(rn),{class:ee(S(u))},{default:Ae(()=>[(j(),gt(ei(g.icon)))]),_:1},8,["class"])])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),he(S(JI),null,{default:Ae(()=>[Vn(Te("div",{id:S(p),role:"region",class:ee(S(f)),"aria-hidden":!S(s),"aria-labelledby":S(m)},[Te("div",{class:ee(S(h))},[at(g.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[Oi,S(s)]])]),_:3})],2))}});var pne=Vt(i3e,[["__file","collapse-item.vue"]]);const r3e=Nn(XMe,{CollapseItem:pne}),s3e=Xr(pne),a3e=zt({color:{type:et(Object),required:!0},vertical:{type:Boolean,default:!1}});let sP=!1;function nw(n,e){if(!xi)return;const t=function(s){var a;(a=e.drag)==null||a.call(e,s)},i=function(s){var a;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,sP=!1,(a=e.end)==null||a.call(e,s)},r=function(s){var a;sP||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),sP=!0,(a=e.start)==null||a.call(e,s))};n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!1})}const o3e=(n,e)=>{if(!xi||!n||!e)return!1;const t=n.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},l$=n=>{let e=0,t=n;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},y6=(n,e)=>Math.abs(l$(n)-l$(e)),EF=n=>{let e,t;return n.type==="touchend"?(t=n.changedTouches[0].clientY,e=n.changedTouches[0].clientX):n.type.startsWith("touch")?(t=n.touches[0].clientY,e=n.touches[0].clientX):(t=n.clientY,e=n.clientX),{clientX:e,clientY:t}},l3e=n=>{const e=Qn(),{t}=wi(),i=Ji(),r=Ji(),s=W(()=>n.color.get("alpha")),a=W(()=>t("el.colorpicker.alphaLabel"));function o(d){var f;d.target!==i.value&&l(d),(f=i.value)==null||f.focus()}function l(d){if(!r.value||!i.value)return;const h=e.vnode.el.getBoundingClientRect(),{clientX:p,clientY:m}=EF(d);if(n.vertical){let g=m-h.top;g=Math.max(i.value.offsetHeight/2,g),g=Math.min(g,h.height-i.value.offsetHeight/2),n.color.set("alpha",Math.round((g-i.value.offsetHeight/2)/(h.height-i.value.offsetHeight)*100))}else{let g=p-h.left;g=Math.max(i.value.offsetWidth/2,g),g=Math.min(g,h.width-i.value.offsetWidth/2),n.color.set("alpha",Math.round((g-i.value.offsetWidth/2)/(h.width-i.value.offsetWidth)*100))}}function u(d){const{code:f,shiftKey:h}=d,p=h?10:1;switch(f){case Kt.left:case Kt.down:d.preventDefault(),d.stopPropagation(),c(-p);break;case Kt.right:case Kt.up:d.preventDefault(),d.stopPropagation(),c(p);break}}function c(d){let f=s.value+d;f=f<0?0:f>100?100:f,n.color.set("alpha",f)}return{thumb:i,bar:r,alpha:s,alphaLabel:a,handleDrag:l,handleClick:o,handleKeydown:u}},u3e=(n,{bar:e,thumb:t,handleDrag:i})=>{const r=Qn(),s=Rt("color-alpha-slider"),a=ae(0),o=ae(0),l=ae();function u(){if(!t.value||n.vertical)return 0;const _=r.vnode.el,y=n.color.get("alpha");return _?Math.round(y*(_.offsetWidth-t.value.offsetWidth/2)/100):0}function c(){if(!t.value)return 0;const _=r.vnode.el;if(!n.vertical)return 0;const y=n.color.get("alpha");return _?Math.round(y*(_.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(n.color&&n.color.value){const{r:_,g:y,b}=n.color.toRgb();return`linear-gradient(to right, rgba(${_}, ${y}, ${b}, 0) 0%, rgba(${_}, ${y}, ${b}, 1) 100%)`}return""}function f(){a.value=u(),o.value=c(),l.value=d()}Ln(()=>{if(!e.value||!t.value)return;const _={drag:y=>{i(y)},end:y=>{i(y)}};nw(e.value,_),nw(t.value,_),f()}),St(()=>n.color.get("alpha"),()=>f()),St(()=>n.color.value,()=>f());const h=W(()=>[s.b(),s.is("vertical",n.vertical)]),p=W(()=>s.e("bar")),m=W(()=>s.e("thumb")),g=W(()=>({background:l.value})),v=W(()=>({left:ns(a.value),top:ns(o.value)}));return{rootKls:h,barKls:p,barStyle:g,thumbKls:m,thumbStyle:v,update:f}},c3e="ElColorAlphaSlider",d3e=Ne({name:c3e}),f3e=Ne({...d3e,props:a3e,setup(n,{expose:e}){const t=n,{alpha:i,alphaLabel:r,bar:s,thumb:a,handleDrag:o,handleClick:l,handleKeydown:u}=l3e(t),{rootKls:c,barKls:d,barStyle:f,thumbKls:h,thumbStyle:p,update:m}=u3e(t,{bar:s,thumb:a,handleDrag:o});return e({update:m,bar:s,thumb:a}),(g,v)=>(j(),_e("div",{class:ee(S(c))},[Te("div",{ref_key:"bar",ref:s,class:ee(S(d)),style:Jt(S(f)),onClick:S(l)},null,14,["onClick"]),Te("div",{ref_key:"thumb",ref:a,class:ee(S(h)),style:Jt(S(p)),"aria-label":S(r),"aria-valuenow":S(i),"aria-orientation":g.vertical?"vertical":"horizontal","aria-valuemin":"0","aria-valuemax":"100",role:"slider",tabindex:"0",onKeydown:S(u)},null,46,["aria-label","aria-valuenow","aria-orientation","onKeydown"])],2))}});var h3e=Vt(f3e,[["__file","alpha-slider.vue"]]);const p3e=Ne({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(n){const e=Rt("color-hue-slider"),t=Qn(),i=ae(),r=ae(),s=ae(0),a=ae(0),o=W(()=>n.color.get("hue"));St(()=>o.value,()=>{f()});function l(h){h.target!==i.value&&u(h)}function u(h){if(!r.value||!i.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:v}=EF(h);let _;if(n.vertical){let y=v-m.top;y=Math.min(y,m.height-i.value.offsetHeight/2),y=Math.max(i.value.offsetHeight/2,y),_=Math.round((y-i.value.offsetHeight/2)/(m.height-i.value.offsetHeight)*360)}else{let y=g-m.left;y=Math.min(y,m.width-i.value.offsetWidth/2),y=Math.max(i.value.offsetWidth/2,y),_=Math.round((y-i.value.offsetWidth/2)/(m.width-i.value.offsetWidth)*360)}n.color.set("hue",_)}function c(){if(!i.value)return 0;const h=t.vnode.el;if(n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const h=t.vnode.el;if(!n.vertical)return 0;const p=n.color.get("hue");return h?Math.round(p*(h.offsetHeight-i.value.offsetHeight/2)/360):0}function f(){s.value=c(),a.value=d()}return Ln(()=>{if(!r.value||!i.value)return;const h={drag:p=>{u(p)},end:p=>{u(p)}};nw(r.value,h),nw(i.value,h),f()}),{bar:r,thumb:i,thumbLeft:s,thumbTop:a,hueValue:o,handleClick:l,update:f,ns:e}}});function m3e(n,e,t,i,r,s){return j(),_e("div",{class:ee([n.ns.b(),n.ns.is("vertical",n.vertical)])},[Te("div",{ref:"bar",class:ee(n.ns.e("bar")),onClick:n.handleClick},null,10,["onClick"]),Te("div",{ref:"thumb",class:ee(n.ns.e("thumb")),style:Jt({left:n.thumbLeft+"px",top:n.thumbTop+"px"})},null,6)],2)}var g3e=Vt(p3e,[["render",m3e],["__file","hue-slider.vue"]]);const v3e=zt({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:ks,popperClass:{type:String,default:""},tabindex:{type:[String,Number],default:0},teleported:ua.teleported,predefine:{type:et(Array)},validateEvent:{type:Boolean,default:!0},...Ba(["ariaLabel"])}),y3e={[$n]:n=>un(n)||na(n),[er]:n=>un(n)||na(n),activeChange:n=>un(n)||na(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},mne=Symbol("colorPickerContextKey"),u$=function(n,e,t){return[n,e*t/((n=(2-e)*t)<1?n:2-n)||0,n/2]},_3e=function(n){return un(n)&&n.includes(".")&&Number.parseFloat(n)===1},b3e=function(n){return un(n)&&n.includes("%")},P1=function(n,e){_3e(n)&&(n="100%");const t=b3e(n);return n=Math.min(e,Math.max(0,Number.parseFloat(`${n}`))),t&&(n=Number.parseInt(`${n*e}`,10)/100),Math.abs(n-e)<1e-6?1:n%e/Number.parseFloat(e)},c$={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},yM=n=>{n=Math.min(Math.round(n),255);const e=Math.floor(n/16),t=n%16;return`${c$[e]||e}${c$[t]||t}`},d$=function({r:n,g:e,b:t}){return Number.isNaN(+n)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${yM(n)}${yM(e)}${yM(t)}`},aP={A:10,B:11,C:12,D:13,E:14,F:15},Q0=function(n){return n.length===2?(aP[n[0].toUpperCase()]||+n[0])*16+(aP[n[1].toUpperCase()]||+n[1]):aP[n[1].toUpperCase()]||+n[1]},S3e=function(n,e,t){e=e/100,t=t/100;let i=e;const r=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=r<=1?r:2-r;const s=(t+e)/2,a=t===0?2*i/(r+i):2*e/(t+e);return{h:n,s:a*100,v:s*100}},f$=(n,e,t)=>{n=P1(n,255),e=P1(e,255),t=P1(t,255);const i=Math.max(n,e,t),r=Math.min(n,e,t);let s;const a=i,o=i-r,l=i===0?0:o/i;if(i===r)s=0;else{switch(i){case n:{s=(e-t)/o+(e<t?6:0);break}case e:{s=(t-n)/o+2;break}case t:{s=(n-e)/o+4;break}}s/=6}return{h:s*360,s:l*100,v:a*100}},ES=function(n,e,t){n=P1(n,360)*6,e=P1(e,100),t=P1(t,100);const i=Math.floor(n),r=n-i,s=t*(1-e),a=t*(1-r*e),o=t*(1-(1-r)*e),l=i%6,u=[t,a,s,s,o,t][l],c=[o,t,t,a,s,s][l],d=[s,s,o,t,t,a][l];return{r:Math.round(u*255),g:Math.round(c*255),b:Math.round(d*255)}};let Yx=class{constructor(e={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const t in e)Ai(e,t)&&(this[t]=e[t]);e.value?this.fromString(e.value):this.doOnChange()}set(e,t){if(arguments.length===1&&typeof e=="object"){for(const i in e)Ai(e,i)&&this.set(i,e[i]);return}this[`_${e}`]=t,this.doOnChange()}get(e){return e==="alpha"?Math.floor(this[`_${e}`]):this[`_${e}`]}toRgb(){return ES(this._hue,this._saturation,this._value)}fromString(e){if(!e){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const t=(i,r,s)=>{this._hue=Math.max(0,Math.min(360,i)),this._saturation=Math.max(0,Math.min(100,r)),this._value=Math.max(0,Math.min(100,s)),this.doOnChange()};if(e.includes("hsl")){const i=e.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=S3e(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("hsv")){const i=e.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3&&t(i[0],i[1],i[2])}else if(e.includes("rgb")){const i=e.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(r=>r!=="").map((r,s)=>s>2?Number.parseFloat(r):Number.parseInt(r,10));if(i.length===4?this._alpha=Number.parseFloat(i[3])*100:i.length===3&&(this._alpha=100),i.length>=3){const{h:r,s,v:a}=f$(i[0],i[1],i[2]);t(r,s,a)}}else if(e.includes("#")){const i=e.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(i))return;let r,s,a;i.length===3?(r=Q0(i[0]+i[0]),s=Q0(i[1]+i[1]),a=Q0(i[2]+i[2])):(i.length===6||i.length===8)&&(r=Q0(i.slice(0,2)),s=Q0(i.slice(2,4)),a=Q0(i.slice(4,6))),i.length===8?this._alpha=Q0(i.slice(6))/255*100:(i.length===3||i.length===6)&&(this._alpha=100);const{h:o,s:l,v:u}=f$(r,s,a);t(o,l,u)}}compare(e){return Math.abs(e._hue-this._hue)<2&&Math.abs(e._saturation-this._saturation)<1&&Math.abs(e._value-this._value)<1&&Math.abs(e._alpha-this._alpha)<1}doOnChange(){const{_hue:e,_saturation:t,_value:i,_alpha:r,format:s}=this;if(this.enableAlpha)switch(s){case"hsl":{const a=u$(e,t/100,i/100);this.value=`hsla(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${e}, ${Math.round(t)}%, ${Math.round(i)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${d$(ES(e,t,i))}${yM(r*255/100)}`;break}default:{const{r:a,g:o,b:l}=ES(e,t,i);this.value=`rgba(${a}, ${o}, ${l}, ${this.get("alpha")/100})`}}else switch(s){case"hsl":{const a=u$(e,t/100,i/100);this.value=`hsl(${e}, ${Math.round(a[1]*100)}%, ${Math.round(a[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${e}, ${Math.round(t)}%, ${Math.round(i)}%)`;break}case"rgb":{const{r:a,g:o,b:l}=ES(e,t,i);this.value=`rgb(${a}, ${o}, ${l})`;break}default:this.value=d$(ES(e,t,i))}}};const x3e=Ne({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0},enableAlpha:{type:Boolean,required:!0}},setup(n){const e=Rt("color-predefine"),{currentColor:t}=Zt(mne),i=ae(s(n.colors,n.color));St(()=>t.value,a=>{const o=new Yx;o.fromString(a),i.value.forEach(l=>{l.selected=o.compare(l)})}),ya(()=>{i.value=s(n.colors,n.color)});function r(a){n.color.fromString(n.colors[a])}function s(a,o){return a.map(l=>{const u=new Yx;return u.enableAlpha=n.enableAlpha,u.format="rgba",u.fromString(l),u.selected=u.value===o.value,u})}return{rgbaColors:i,handleSelect:r,ns:e}}});function w3e(n,e,t,i,r,s){return j(),_e("div",{class:ee(n.ns.b())},[Te("div",{class:ee(n.ns.e("colors"))},[(j(!0),_e(an,null,ti(n.rgbaColors,(a,o)=>(j(),_e("div",{key:n.colors[o],class:ee([n.ns.e("color-selector"),n.ns.is("alpha",a._alpha<100),{selected:a.selected}]),onClick:l=>n.handleSelect(o)},[Te("div",{style:Jt({backgroundColor:a.value})},null,4)],10,["onClick"]))),128))],2)],2)}var T3e=Vt(x3e,[["render",w3e],["__file","predefine.vue"]]);const C3e=Ne({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(n){const e=Rt("color-svpanel"),t=Qn(),i=ae(0),r=ae(0),s=ae("hsl(0, 100%, 50%)"),a=W(()=>{const u=n.color.get("hue"),c=n.color.get("value");return{hue:u,value:c}});function o(){const u=n.color.get("saturation"),c=n.color.get("value"),d=t.vnode.el,{clientWidth:f,clientHeight:h}=d;r.value=u*f/100,i.value=(100-c)*h/100,s.value=`hsl(${n.color.get("hue")}, 100%, 50%)`}function l(u){const d=t.vnode.el.getBoundingClientRect(),{clientX:f,clientY:h}=EF(u);let p=f-d.left,m=h-d.top;p=Math.max(0,p),p=Math.min(p,d.width),m=Math.max(0,m),m=Math.min(m,d.height),r.value=p,i.value=m,n.color.set({saturation:p/d.width*100,value:100-m/d.height*100})}return St(()=>a.value,()=>{o()}),Ln(()=>{nw(t.vnode.el,{drag:u=>{l(u)},end:u=>{l(u)}}),o()}),{cursorTop:i,cursorLeft:r,background:s,colorValue:a,handleDrag:l,update:o,ns:e}}});function A3e(n,e,t,i,r,s){return j(),_e("div",{class:ee(n.ns.b()),style:Jt({backgroundColor:n.background})},[Te("div",{class:ee(n.ns.e("white"))},null,2),Te("div",{class:ee(n.ns.e("black"))},null,2),Te("div",{class:ee(n.ns.e("cursor")),style:Jt({top:n.cursorTop+"px",left:n.cursorLeft+"px"})},[Te("div")],6)],6)}var E3e=Vt(C3e,[["render",A3e],["__file","sv-panel.vue"]]);const M3e=Ne({name:"ElColorPicker"}),I3e=Ne({...M3e,props:v3e,emits:y3e,setup(n,{expose:e,emit:t}){const i=n,{t:r}=wi(),s=Rt("color"),{formItem:a}=to(),o=ws(),l=no(),{inputId:u,isLabeledByFormItem:c}=hc(i,{formItemContext:a}),d=ae(),f=ae(),h=ae(),p=ae(),m=ae(),g=ae(),{isFocused:v,handleFocus:_,handleBlur:y}=w0(m,{beforeFocus(){return l.value},beforeBlur(Be){var Ye;return(Ye=p.value)==null?void 0:Ye.isFocusInsideContent(Be)},afterBlur(){z(!1),F()}});let b=!0;const x=Ui(new Yx({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),w=ae(!1),A=ae(!1),T=ae(""),C=W(()=>!i.modelValue&&!A.value?"transparent":U(x,i.showAlpha)),E=W(()=>!i.modelValue&&!A.value?"":x.value),I=W(()=>c.value?void 0:i.ariaLabel||r("el.colorpicker.defaultLabel")),k=W(()=>c.value?a==null?void 0:a.labelId:void 0),O=W(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",o.value),s.is("focused",v.value)]);function U(Be,Ye){if(!(Be instanceof Yx))throw new TypeError("color should be instance of _color Class");const{r:Ze,g:Q,b:me}=Be.toRgb();return Ye?`rgba(${Ze}, ${Q}, ${me}, ${Be.get("alpha")/100})`:`rgb(${Ze}, ${Q}, ${me})`}function z(Be){w.value=Be}const L=Rl(z,100,{leading:!0});function G(){l.value||z(!0)}function H(){L(!1),F()}function F(){cn(()=>{i.modelValue?x.fromString(i.modelValue):(x.value="",cn(()=>{A.value=!1}))})}function X(){l.value||L(!w.value)}function te(){x.fromString(T.value)}function re(){const Be=x.value;t($n,Be),t("change",Be),i.validateEvent&&(a==null||a.validate("change").catch(Ye=>void 0)),L(!1),cn(()=>{const Ye=new Yx({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});x.compare(Ye)||F()})}function ie(){L(!1),t($n,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(a==null||a.validate("change").catch(Be=>void 0)),F()}function le(){w.value&&(H(),v.value&&ye())}function ge(Be){Be.preventDefault(),Be.stopPropagation(),z(!1),F()}function pe(Be){switch(Be.code){case Kt.enter:case Kt.numpadEnter:case Kt.space:Be.preventDefault(),Be.stopPropagation(),G(),g.value.focus();break;case Kt.esc:ge(Be);break}}function ye(){m.value.focus()}function Oe(){m.value.blur()}return Ln(()=>{i.modelValue&&(T.value=E.value)}),St(()=>i.modelValue,Be=>{Be?Be&&Be!==x.value&&(b=!1,x.fromString(Be)):A.value=!1}),St(()=>[i.colorFormat,i.showAlpha],()=>{x.enableAlpha=i.showAlpha,x.format=i.colorFormat||x.format,x.doOnChange(),t($n,x.value)}),St(()=>E.value,Be=>{T.value=Be,b&&t("activeChange",Be),b=!0}),St(()=>x.value,()=>{!i.modelValue&&!A.value&&(A.value=!0)}),St(()=>w.value,()=>{cn(()=>{var Be,Ye,Ze;(Be=d.value)==null||Be.update(),(Ye=f.value)==null||Ye.update(),(Ze=h.value)==null||Ze.update()})}),ui(mne,{currentColor:E}),e({color:x,show:G,hide:H,focus:ye,blur:Oe}),(Be,Ye)=>(j(),gt(S(Ja),{ref_key:"popper",ref:p,visible:w.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[S(s).be("picker","panel"),S(s).b("dropdown"),Be.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",teleported:Be.teleported,transition:`${S(s).namespace.value}-zoom-in-top`,persistent:"",onHide:Ze=>z(!1)},{content:Ae(()=>[Vn((j(),_e("div",{onKeydown:ur(ge,["esc"])},[Te("div",{class:ee(S(s).be("dropdown","main-wrapper"))},[he(g3e,{ref_key:"hue",ref:d,class:"hue-slider",color:S(x),vertical:""},null,8,["color"]),he(E3e,{ref_key:"sv",ref:f,color:S(x)},null,8,["color"])],2),Be.showAlpha?(j(),gt(h3e,{key:0,ref_key:"alpha",ref:h,color:S(x)},null,8,["color"])):ot("v-if",!0),Be.predefine?(j(),gt(T3e,{key:1,ref:"predefine","enable-alpha":Be.showAlpha,color:S(x),colors:Be.predefine},null,8,["enable-alpha","color","colors"])):ot("v-if",!0),Te("div",{class:ee(S(s).be("dropdown","btns"))},[Te("span",{class:ee(S(s).be("dropdown","value"))},[he(S(So),{ref_key:"inputRef",ref:g,modelValue:T.value,"onUpdate:modelValue":Ze=>T.value=Ze,"validate-event":!1,size:"small",onKeyup:ur(te,["enter"]),onBlur:te},null,8,["modelValue","onUpdate:modelValue","onKeyup"])],2),he(S(_a),{class:ee(S(s).be("dropdown","link-btn")),text:"",size:"small",onClick:ie},{default:Ae(()=>[An(Lt(S(r)("el.colorpicker.clear")),1)]),_:1},8,["class"]),he(S(_a),{plain:"",size:"small",class:ee(S(s).be("dropdown","btn")),onClick:re},{default:Ae(()=>[An(Lt(S(r)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)],40,["onKeydown"])),[[S(sh),le]])]),default:Ae(()=>[Te("div",si({id:S(u),ref_key:"triggerRef",ref:m},Be.$attrs,{class:S(O),role:"button","aria-label":S(I),"aria-labelledby":S(k),"aria-description":S(r)("el.colorpicker.description",{color:Be.modelValue||""}),"aria-disabled":S(l),tabindex:S(l)?-1:Be.tabindex,onKeydown:pe,onFocus:S(_),onBlur:S(y)}),[S(l)?(j(),_e("div",{key:0,class:ee(S(s).be("picker","mask"))},null,2)):ot("v-if",!0),Te("div",{class:ee(S(s).be("picker","trigger")),onClick:X},[Te("span",{class:ee([S(s).be("picker","color"),S(s).is("alpha",Be.showAlpha)])},[Te("span",{class:ee(S(s).be("picker","color-inner")),style:Jt({backgroundColor:S(C)})},[Vn(he(S(rn),{class:ee([S(s).be("picker","icon"),S(s).is("icon-arrow-down")])},{default:Ae(()=>[he(S(Sh))]),_:1},8,["class"]),[[Oi,Be.modelValue||A.value]]),Vn(he(S(rn),{class:ee([S(s).be("picker","empty"),S(s).is("icon-close")])},{default:Ae(()=>[he(S(qc))]),_:1},8,["class"]),[[Oi,!Be.modelValue&&!A.value]])],6)],2)],2)],16,["id","aria-label","aria-labelledby","aria-description","aria-disabled","tabindex","onFocus","onBlur"])]),_:1},8,["visible","popper-class","teleported","transition","onHide"]))}});var D3e=Vt(I3e,[["__file","color-picker.vue"]]);const R3e=Nn(D3e),P3e=zt({a11y:{type:Boolean,default:!0},locale:{type:et(Object)},size:ks,button:{type:et(Object)},experimentalFeatures:{type:et(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:et(Object)},zIndex:Number,namespace:{type:String,default:"el"},...fb}),Rc={},k3e=Ne({name:"ElConfigProvider",props:P3e,setup(n,{slots:e}){St(()=>n.message,i=>{Object.assign(Rc,i??{})},{immediate:!0,deep:!0});const t=JB(n);return()=>at(e,"default",{config:t==null?void 0:t.value})}}),L3e=Nn(k3e),O3e=Ne({name:"ElContainer"}),N3e=Ne({...O3e,props:{direction:{type:String}},setup(n){const e=n,t=Ls(),i=Rt("container"),r=W(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(a=>{const o=a.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(s,a)=>(j(),_e("section",{class:ee([S(i).b(),S(i).is("vertical",S(r))])},[at(s.$slots,"default")],2))}});var B3e=Vt(N3e,[["__file","container.vue"]]);const F3e=Ne({name:"ElAside"}),U3e=Ne({...F3e,props:{width:{type:String,default:null}},setup(n){const e=n,t=Rt("aside"),i=W(()=>e.width?t.cssVarBlock({width:e.width}):{});return(r,s)=>(j(),_e("aside",{class:ee(S(t).b()),style:Jt(S(i))},[at(r.$slots,"default")],6))}});var gne=Vt(U3e,[["__file","aside.vue"]]);const z3e=Ne({name:"ElFooter"}),H3e=Ne({...z3e,props:{height:{type:String,default:null}},setup(n){const e=n,t=Rt("footer"),i=W(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(j(),_e("footer",{class:ee(S(t).b()),style:Jt(S(i))},[at(r.$slots,"default")],6))}});var vne=Vt(H3e,[["__file","footer.vue"]]);const V3e=Ne({name:"ElHeader"}),$3e=Ne({...V3e,props:{height:{type:String,default:null}},setup(n){const e=n,t=Rt("header"),i=W(()=>e.height?t.cssVarBlock({height:e.height}):{});return(r,s)=>(j(),_e("header",{class:ee(S(t).b()),style:Jt(S(i))},[at(r.$slots,"default")],6))}});var yne=Vt($3e,[["__file","header.vue"]]);const G3e=Ne({name:"ElMain"}),W3e=Ne({...G3e,setup(n){const e=Rt("main");return(t,i)=>(j(),_e("main",{class:ee(S(e).b())},[at(t.$slots,"default")],2))}});var _ne=Vt(W3e,[["__file","main.vue"]]);const q3e=Nn(B3e,{Aside:gne,Footer:vne,Header:yne,Main:_ne}),j3e=Xr(gne),K3e=Xr(vne),X3e=Xr(yne),Y3e=Xr(_ne);var bne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d/,s=/\d\d/,a=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,l={},u=function(g){return(g=+g)+(g>68?1900:2e3)},c=function(g){return function(v){this[g]=+v}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var _=v.match(/([+-]|\d\d)/g),y=60*_[1]+(+_[2]||0);return y===0?0:_[0]==="+"?-y:y}(g)}],f=function(g){var v=l[g];return v&&(v.indexOf?v:v.s.concat(v.f))},h=function(g,v){var _,y=l.meridiem;if(y){for(var b=1;b<=24;b+=1)if(g.indexOf(y(b,0,v))>-1){_=b>12;break}}else _=g===(v?"pm":"PM");return _},p={A:[o,function(g){this.afternoon=h(g,!1)}],a:[o,function(g){this.afternoon=h(g,!0)}],Q:[r,function(g){this.month=3*(g-1)+1}],S:[r,function(g){this.milliseconds=100*+g}],SS:[s,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[a,c("seconds")],ss:[a,c("seconds")],m:[a,c("minutes")],mm:[a,c("minutes")],H:[a,c("hours")],h:[a,c("hours")],HH:[a,c("hours")],hh:[a,c("hours")],D:[a,c("day")],DD:[s,c("day")],Do:[o,function(g){var v=l.ordinal,_=g.match(/\d+/);if(this.day=_[0],v)for(var y=1;y<=31;y+=1)v(y).replace(/\[|\]/g,"")===g&&(this.day=y)}],w:[a,c("week")],ww:[s,c("week")],M:[a,c("month")],MM:[s,c("month")],MMM:[o,function(g){var v=f("months"),_=(f("monthsShort")||v.map(function(y){return y.slice(0,3)})).indexOf(g)+1;if(_<1)throw new Error;this.month=_%12||_}],MMMM:[o,function(g){var v=f("months").indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(g){this.year=u(g)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function m(g){var v,_;v=g,_=l&&l.formats;for(var y=(g=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,I,k){var O=k&&k.toUpperCase();return I||_[k]||t[k]||_[O].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(U,z,L){return z||L.slice(1)})})).match(i),b=y.length,x=0;x<b;x+=1){var w=y[x],A=p[w],T=A&&A[0],C=A&&A[1];y[x]=C?{regex:T,parser:C}:w.replace(/^\[|\]$/g,"")}return function(E){for(var I={},k=0,O=0;k<b;k+=1){var U=y[k];if(typeof U=="string")O+=U.length;else{var z=U.regex,L=U.parser,G=E.slice(O),H=z.exec(G)[0];L.call(I,H),E=E.replace(H,"")}}return function(F){var X=F.afternoon;if(X!==void 0){var te=F.hours;X?te<12&&(F.hours+=12):te===12&&(F.hours=0),delete F.afternoon}}(I),I}}return function(g,v,_){_.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(u=g.parseTwoDigitYear);var y=v.prototype,b=y.parse;y.parse=function(x){var w=x.date,A=x.utc,T=x.args;this.$u=A;var C=T[1];if(typeof C=="string"){var E=T[2]===!0,I=T[3]===!0,k=E||I,O=T[2];I&&(O=T[2]),l=this.$locale(),!E&&O&&(l=_.Ls[O]),this.$d=function(G,H,F,X){try{if(["x","X"].indexOf(H)>-1)return new Date((H==="X"?1e3:1)*G);var te=m(H)(G),re=te.year,ie=te.month,le=te.day,ge=te.hours,pe=te.minutes,ye=te.seconds,Oe=te.milliseconds,Be=te.zone,Ye=te.week,Ze=new Date,Q=le||(re||ie?1:Ze.getDate()),me=re||Ze.getFullYear(),ce=0;re&&!ie||(ce=ie>0?ie-1:Ze.getMonth());var je,Fe=ge||0,nt=pe||0,We=ye||0,Ke=Oe||0;return Be?new Date(Date.UTC(me,ce,Q,Fe,nt,We,Ke+60*Be.offset*1e3)):F?new Date(Date.UTC(me,ce,Q,Fe,nt,We,Ke)):(je=new Date(me,ce,Q,Fe,nt,We,Ke),Ye&&(je=X(je).week(Ye).toDate()),je)}catch{return new Date("")}}(w,C,A,_),this.init(),O&&O!==!0&&(this.$L=this.locale(O).$L),k&&w!=this.format(C)&&(this.$d=new Date("")),l={}}else if(C instanceof Array)for(var U=C.length,z=1;z<=U;z+=1){T[1]=C[z-1];var L=_.apply(this,T);if(L.isValid()){this.$d=L.$d,this.$L=L.$L,this.init();break}z===U&&(this.$d=new Date(""))}else b.call(this,x)}}})})(bne);var Q3e=bne.exports;const MF=sl(Q3e);var Sne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i){var r=i.prototype,s=r.format;r.format=function(a){var o=this,l=this.$locale();if(!this.isValid())return s.bind(this)(a);var u=this.$utils(),c=(a||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((o.$M+1)/3);case"Do":return l.ordinal(o.$D);case"gggg":return o.weekYear();case"GGGG":return o.isoWeekYear();case"wo":return l.ordinal(o.week(),"W");case"w":case"ww":return u.s(o.week(),d==="w"?1:2,"0");case"W":case"WW":return u.s(o.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return u.s(String(o.$H===0?24:o.$H),d==="k"?1:2,"0");case"X":return Math.floor(o.$d.getTime()/1e3);case"x":return o.$d.getTime();case"z":return"["+o.offsetName()+"]";case"zzz":return"["+o.offsetName("long")+"]";default:return d}});return s.bind(this)(c)}}})})(Sne);var Z3e=Sne.exports;const J3e=sl(Z3e);var xne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){var t="week",i="year";return function(r,s,a){var o=s.prototype;o.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=a(this).startOf(i).add(1,i).date(u),d=a(this).endOf(t);if(c.isBefore(d))return 1}var f=a(this).startOf(i).date(u).startOf(t).subtract(1,"millisecond"),h=this.diff(f,t,!0);return h<0?a(this).startOf("week").week():Math.ceil(h)},o.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(xne);var e4e=xne.exports;const t4e=sl(e4e);var wne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i){i.prototype.weekYear=function(){var r=this.month(),s=this.week(),a=this.year();return s===1&&r===11?a+1:r===0&&s>=52?a-1:a}}})})(wne);var n4e=wne.exports;const i4e=sl(n4e);var Tne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i,r){i.prototype.dayOfYear=function(s){var a=Math.round((r(this).startOf("day")-r(this).startOf("year"))/864e5)+1;return s==null?a:this.add(s-a,"day")}}})})(Tne);var r4e=Tne.exports;const s4e=sl(r4e);var Cne={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i){i.prototype.isSameOrAfter=function(r,s){return this.isSame(r,s)||this.isAfter(r,s)}}})})(Cne);var a4e=Cne.exports;const o4e=sl(a4e);var Ane={exports:{}};(function(n,e){(function(t,i){n.exports=i()})(Pl,function(){return function(t,i){i.prototype.isSameOrBefore=function(r,s){return this.isSame(r,s)||this.isBefore(r,s)}}})})(Ane);var l4e=Ane.exports;const u4e=sl(l4e),h$=["hours","minutes","seconds"],_6="HH:mm:ss",Xy="YYYY-MM-DD",c4e={date:Xy,dates:Xy,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${Xy} ${_6}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:Xy,datetimerange:`${Xy} ${_6}`},Ene=zt({disabledHours:{type:et(Function)},disabledMinutes:{type:et(Function)},disabledSeconds:{type:et(Function)}}),Mne=zt({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),IF=zt({id:{type:et([Array,String])},name:{type:et([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:et([String,Object]),default:xh},editable:{type:Boolean,default:!0},prefixIcon:{type:et([String,Object]),default:""},size:ks,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:et(Object),default:()=>({})},modelValue:{type:et([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:et([Date,Array])},defaultTime:{type:et([Date,Array])},isRange:Boolean,...Ene,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:et([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:et(String),values:wh,default:"bottom"},fallbackPlacements:{type:et(Array),default:["bottom","top","right","left"]},...fb,...Ba(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),d4e=zt({id:{type:et(Array)},name:{type:et(Array)},modelValue:{type:et([Array,String])},startPlaceholder:String,endPlaceholder:String}),f4e=Ne({name:"PickerRangeTrigger",inheritAttrs:!1}),h4e=Ne({...f4e,props:d4e,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(n,{expose:e,emit:t}){const i=hT(),r=Rt("date"),s=Rt("range"),a=ae(),o=ae(),{wrapperRef:l,isFocused:u}=w0(a),c=b=>{t("click",b)},d=b=>{t("mouseenter",b)},f=b=>{t("mouseleave",b)},h=b=>{t("mouseenter",b)},p=b=>{t("startInput",b)},m=b=>{t("endInput",b)},g=b=>{t("startChange",b)},v=b=>{t("endChange",b)};return e({focus:()=>{var b;(b=a.value)==null||b.focus()},blur:()=>{var b,x;(b=a.value)==null||b.blur(),(x=o.value)==null||x.blur()}}),(b,x)=>(j(),_e("div",{ref_key:"wrapperRef",ref:l,class:ee([S(r).is("active",S(u)),b.$attrs.class]),style:Jt(b.$attrs.style),onClick:c,onMouseenter:d,onMouseleave:f,onTouchstartPassive:h},[at(b.$slots,"prefix"),Te("input",si(S(i),{id:b.id&&b.id[0],ref_key:"inputRef",ref:a,name:b.name&&b.name[0],placeholder:b.startPlaceholder,value:b.modelValue&&b.modelValue[0],class:S(s).b("input"),onInput:p,onChange:g}),null,16,["id","name","placeholder","value"]),at(b.$slots,"range-separator"),Te("input",si(S(i),{id:b.id&&b.id[1],ref_key:"endInputRef",ref:o,name:b.name&&b.name[1],placeholder:b.endPlaceholder,value:b.modelValue&&b.modelValue[1],class:S(s).b("input"),onInput:m,onChange:v}),null,16,["id","name","placeholder","value"]),at(b.$slots,"suffix")],38))}});var p4e=Vt(h4e,[["__file","picker-range-trigger.vue"]]);const m4e=Ne({name:"Picker"}),g4e=Ne({...m4e,props:IF,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(n,{expose:e,emit:t}){const i=n,r=S0(),{lang:s}=wi(),a=Rt("date"),o=Rt("input"),l=Rt("range"),{form:u,formItem:c}=to(),d=Zt("ElPopperOptions",{}),{valueOnClear:f}=GI(i,null),h=ae(),p=ae(),m=ae(!1),g=ae(!1),v=ae(null);let _=!1;const{isFocused:y,handleFocus:b,handleBlur:x}=w0(p,{beforeFocus(){return i.readonly||F.value},afterFocus(){m.value=!0},beforeBlur(we){var De;return!_&&((De=h.value)==null?void 0:De.isFocusInsideContent(we))},afterBlur(){it(),m.value=!1,_=!1,i.validateEvent&&(c==null||c.validate("blur").catch(we=>void 0))}}),w=W(()=>[a.b("editor"),a.bm("editor",i.type),o.e("wrapper"),a.is("disabled",F.value),a.is("active",m.value),l.b("editor"),Fe?l.bm("editor",Fe.value):"",r.class]),A=W(()=>[o.e("icon"),l.e("close-icon"),Oe.value?"":l.e("close-icon--hidden")]);St(m,we=>{we?cn(()=>{we&&(v.value=i.modelValue)}):(Ke.value=null,cn(()=>{T(i.modelValue)}))});const T=(we,De)=>{(De||!ZV(we,v.value))&&(t("change",we),i.validateEvent&&(c==null||c.validate("change").catch(xt=>void 0)))},C=we=>{if(!ZV(i.modelValue,we)){let De;Bt(we)?De=we.map(xt=>e$(xt,i.valueFormat,s.value)):we&&(De=e$(we,i.valueFormat,s.value)),t("update:modelValue",we&&De,s.value)}},E=we=>{t("keydown",we)},I=W(()=>p.value?Array.from(p.value.$el.querySelectorAll("input")):[]),k=(we,De,xt)=>{const Pe=I.value;Pe.length&&(!xt||xt==="min"?(Pe[0].setSelectionRange(we,De),Pe[0].focus()):xt==="max"&&(Pe[1].setSelectionRange(we,De),Pe[1].focus()))},O=(we="",De=!1)=>{m.value=De;let xt;Bt(we)?xt=we.map(Pe=>Pe.toDate()):xt=we&&we.toDate(),Ke.value=null,C(xt)},U=()=>{g.value=!0},z=()=>{t("visible-change",!0)},L=()=>{g.value=!1,m.value=!1,t("visible-change",!1)},G=()=>{m.value=!0},H=()=>{m.value=!1},F=W(()=>i.disabled||(u==null?void 0:u.disabled)),X=W(()=>{let we;if(Ye.value?wt.value.getDefaultValue&&(we=wt.value.getDefaultValue()):Bt(i.modelValue)?we=i.modelValue.map(De=>JV(De,i.valueFormat,s.value)):we=JV(i.modelValue,i.valueFormat,s.value),wt.value.getRangeAvailableTime){const De=wt.value.getRangeAvailableTime(we);La(De,we)||(we=De,Ye.value||C(XC(we)))}return Bt(we)&&we.some(De=>!De)&&(we=[]),we}),te=W(()=>{if(!wt.value.panelReady)return"";const we=K(X.value);return Bt(Ke.value)?[Ke.value[0]||we&&we[0]||"",Ke.value[1]||we&&we[1]||""]:Ke.value!==null?Ke.value:!ie.value&&Ye.value||!m.value&&Ye.value?"":we?le.value||ge.value||pe.value?we.join(", "):we:""}),re=W(()=>i.type.includes("time")),ie=W(()=>i.type.startsWith("time")),le=W(()=>i.type==="dates"),ge=W(()=>i.type==="months"),pe=W(()=>i.type==="years"),ye=W(()=>i.prefixIcon||(re.value?ite:Oxe)),Oe=ae(!1),Be=we=>{i.readonly||F.value||(Oe.value&&(we.stopPropagation(),wt.value.handleClear?wt.value.handleClear():C(f.value),T(f.value,!0),Oe.value=!1,L()),t("clear"))},Ye=W(()=>{const{modelValue:we}=i;return!we||Bt(we)&&!we.filter(Boolean).length}),Ze=async we=>{var De;i.readonly||F.value||(((De=we.target)==null?void 0:De.tagName)!=="INPUT"||y.value)&&(m.value=!0)},Q=()=>{i.readonly||F.value||!Ye.value&&i.clearable&&(Oe.value=!0)},me=()=>{Oe.value=!1},ce=we=>{var De;i.readonly||F.value||(((De=we.touches[0].target)==null?void 0:De.tagName)!=="INPUT"||y.value)&&(m.value=!0)},je=W(()=>i.type.includes("range")),Fe=ws(),nt=W(()=>{var we,De;return(De=(we=S(h))==null?void 0:we.popperRef)==null?void 0:De.contentRef}),We=ZB(p,we=>{const De=S(nt),xt=Xo(p);De&&(we.target===De||we.composedPath().includes(De))||we.target===xt||xt&&we.composedPath().includes(xt)||(m.value=!1)});Vi(()=>{We==null||We()});const Ke=ae(null),it=()=>{if(Ke.value){const we=be(te.value);we&&ne(we)&&(C(XC(we)),Ke.value=null)}Ke.value===""&&(C(f.value),T(f.value),Ke.value=null)},be=we=>we?wt.value.parseUserInput(we):null,K=we=>we?wt.value.formatToString(we):null,ne=we=>wt.value.isValidValue(we),Se=async we=>{if(i.readonly||F.value)return;const{code:De}=we;if(E(we),De===Kt.esc){m.value===!0&&(m.value=!1,we.preventDefault(),we.stopPropagation());return}if(De===Kt.down&&(wt.value.handleFocusPicker&&(we.preventDefault(),we.stopPropagation()),m.value===!1&&(m.value=!0,await cn()),wt.value.handleFocusPicker)){wt.value.handleFocusPicker();return}if(De===Kt.tab){_=!0;return}if(De===Kt.enter||De===Kt.numpadEnter){(Ke.value===null||Ke.value===""||ne(be(te.value)))&&(it(),m.value=!1),we.stopPropagation();return}if(Ke.value){we.stopPropagation();return}wt.value.handleKeydownInput&&wt.value.handleKeydownInput(we)},ze=we=>{Ke.value=we,m.value||(m.value=!0)},Je=we=>{const De=we.target;Ke.value?Ke.value=[De.value,Ke.value[1]]:Ke.value=[De.value,null]},Tt=we=>{const De=we.target;Ke.value?Ke.value=[Ke.value[0],De.value]:Ke.value=[null,De.value]},At=()=>{var we;const De=Ke.value,xt=be(De&&De[0]),Pe=S(X);if(xt&&xt.isValid()){Ke.value=[K(xt),((we=te.value)==null?void 0:we[1])||null];const Dt=[xt,Pe&&(Pe[1]||null)];ne(Dt)&&(C(XC(Dt)),Ke.value=null)}},Re=()=>{var we;const De=S(Ke),xt=be(De&&De[1]),Pe=S(X);if(xt&&xt.isValid()){Ke.value=[((we=S(te))==null?void 0:we[0])||null,K(xt)];const Dt=[Pe&&Pe[0],xt];ne(Dt)&&(C(XC(Dt)),Ke.value=null)}},wt=ae({}),vt=we=>{wt.value[we[0]]=we[1],wt.value.panelReady=!0},q=we=>{t("calendar-change",we)},xe=(we,De,xt)=>{t("panel-change",we,De,xt)},ve=()=>{var we;(we=p.value)==null||we.focus()},ke=()=>{var we;(we=p.value)==null||we.blur()};return ui("EP_PICKER_BASE",{props:i}),e({focus:ve,blur:ke,handleOpen:G,handleClose:H,onPick:O}),(we,De)=>(j(),gt(S(Ja),si({ref_key:"refPopper",ref:h,visible:m.value,effect:"light",pure:"",trigger:"click"},we.$attrs,{role:"dialog",teleported:"",transition:`${S(a).namespace.value}-zoom-in-top`,"popper-class":[`${S(a).namespace.value}-picker__popper`,we.popperClass],"popper-options":S(d),"fallback-placements":we.fallbackPlacements,"gpu-acceleration":!1,placement:we.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:U,onShow:z,onHide:L}),{default:Ae(()=>[S(je)?(j(),gt(p4e,{key:1,id:we.id,ref_key:"inputRef",ref:p,"model-value":S(te),name:we.name,disabled:S(F),readonly:!we.editable||we.readonly,"start-placeholder":we.startPlaceholder,"end-placeholder":we.endPlaceholder,class:ee(S(w)),style:Jt(we.$attrs.style),"aria-label":we.ariaLabel,tabindex:we.tabindex,autocomplete:"off",role:"combobox",onClick:Ze,onFocus:S(b),onBlur:S(x),onStartInput:Je,onStartChange:At,onEndInput:Tt,onEndChange:Re,onMousedown:Ze,onMouseenter:Q,onMouseleave:me,onTouchstartPassive:ce,onKeydown:Se},{prefix:Ae(()=>[S(ye)?(j(),gt(S(rn),{key:0,class:ee([S(o).e("icon"),S(l).e("icon")])},{default:Ae(()=>[(j(),gt(ei(S(ye))))]),_:1},8,["class"])):ot("v-if",!0)]),"range-separator":Ae(()=>[at(we.$slots,"range-separator",{},()=>[Te("span",{class:ee(S(l).b("separator"))},Lt(we.rangeSeparator),3)])]),suffix:Ae(()=>[we.clearIcon?(j(),gt(S(rn),{key:0,class:ee(S(A)),onMousedown:wn(S(qi),["prevent"]),onClick:Be},{default:Ae(()=>[(j(),gt(ei(we.clearIcon)))]),_:1},8,["class","onMousedown"])):ot("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(j(),gt(S(So),{key:0,id:we.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":S(te),name:we.name,size:S(Fe),disabled:S(F),placeholder:we.placeholder,class:ee([S(a).b("editor"),S(a).bm("editor",we.type),we.$attrs.class]),style:Jt(we.$attrs.style),readonly:!we.editable||we.readonly||S(le)||S(ge)||S(pe)||we.type==="week","aria-label":we.ariaLabel,tabindex:we.tabindex,"validate-event":!1,onInput:ze,onFocus:S(b),onBlur:S(x),onKeydown:Se,onChange:it,onMousedown:Ze,onMouseenter:Q,onMouseleave:me,onTouchstartPassive:ce,onClick:wn(()=>{},["stop"])},{prefix:Ae(()=>[S(ye)?(j(),gt(S(rn),{key:0,class:ee(S(o).e("icon")),onMousedown:wn(Ze,["prevent"]),onTouchstartPassive:ce},{default:Ae(()=>[(j(),gt(ei(S(ye))))]),_:1},8,["class","onMousedown"])):ot("v-if",!0)]),suffix:Ae(()=>[Oe.value&&we.clearIcon?(j(),gt(S(rn),{key:0,class:ee(`${S(o).e("icon")} clear-icon`),onMousedown:wn(S(qi),["prevent"]),onClick:Be},{default:Ae(()=>[(j(),gt(ei(we.clearIcon)))]),_:1},8,["class","onMousedown"])):ot("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:Ae(()=>[at(we.$slots,"default",{visible:m.value,actualVisible:g.value,parsedValue:S(X),format:we.format,dateFormat:we.dateFormat,timeFormat:we.timeFormat,unlinkPanels:we.unlinkPanels,type:we.type,defaultValue:we.defaultValue,showNow:we.showNow,onPick:O,onSelectRange:k,onSetPickerOption:vt,onCalendarChange:q,onPanelChange:xe,onMousedown:wn(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var Ine=Vt(g4e,[["__file","picker.vue"]]);const v4e=zt({...Mne,datetimeRole:String,parsedValue:{type:et(Object)}}),Dne=({getAvailableHours:n,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(a,o,l,u)=>{const c={hour:n,minute:e,second:t};let d=a;return["hour","minute","second"].forEach(f=>{if(c[f]){let h;const p=c[f];switch(f){case"minute":{h=p(d.hour(),o,u);break}case"second":{h=p(d.hour(),d.minute(),o,u);break}default:{h=p(o,u);break}}if(h!=null&&h.length&&!h.includes(d[f]())){const m=l?0:h.length-1;d=d[f](h[m])}}}),d},r={};return{timePickerOptions:r,getAvailableTime:i,onSetOption:([a,o])=>{r[a]=o}}},oP=n=>{const e=(i,r)=>i||r,t=i=>i!==!0;return n.map(e).filter(t)},Rne=(n,e,t)=>({getHoursList:(a,o)=>iP(24,n&&(()=>n==null?void 0:n(a,o))),getMinutesList:(a,o,l)=>iP(60,e&&(()=>e==null?void 0:e(a,o,l))),getSecondsList:(a,o,l,u)=>iP(60,t&&(()=>t==null?void 0:t(a,o,l,u)))}),Pne=(n,e,t)=>{const{getHoursList:i,getMinutesList:r,getSecondsList:s}=Rne(n,e,t);return{getAvailableHours:(u,c)=>oP(i(u,c)),getAvailableMinutes:(u,c,d)=>oP(r(u,c,d)),getAvailableSeconds:(u,c,d,f)=>oP(s(u,c,d,f))}},kne=n=>{const e=ae(n.parsedValue);return St(()=>n.visible,t=>{t||(e.value=n.parsedValue)}),e},y4e=zt({role:{type:String,required:!0},spinnerDate:{type:et(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:et(String),default:""},...Ene}),_4e=100,b4e=600,A3={beforeMount(n,e){const t=e.value,{interval:i=_4e,delay:r=b4e}=pn(t)?{}:t;let s,a;const o=()=>pn(t)?t():t.handler(),l=()=>{a&&(clearTimeout(a),a=void 0),s&&(clearInterval(s),s=void 0)};n.addEventListener("mousedown",u=>{u.button===0&&(l(),o(),document.addEventListener("mouseup",()=>l(),{once:!0}),a=setTimeout(()=>{s=setInterval(()=>{o()},i)},r))})}},S4e=Ne({__name:"basic-time-spinner",props:y4e,emits:["change","select-range","set-option"],setup(n,{emit:e}){const t=n,i=Zt("EP_PICKER_BASE"),{isRange:r}=i.props,s=Rt("time"),{getHoursList:a,getMinutesList:o,getSecondsList:l}=Rne(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let u=!1;const c=ae(),d=ae(),f=ae(),h=ae(),p={hours:d,minutes:f,seconds:h},m=W(()=>t.showSeconds?h$:h$.slice(0,2)),g=W(()=>{const{spinnerDate:te}=t,re=te.hour(),ie=te.minute(),le=te.second();return{hours:re,minutes:ie,seconds:le}}),v=W(()=>{const{hours:te,minutes:re}=S(g),{role:ie,spinnerDate:le}=t,ge=r?void 0:le;return{hours:a(ie,ge),minutes:o(te,ie,ge),seconds:l(te,re,ie,ge)}}),_=W(()=>{const{hours:te,minutes:re,seconds:ie}=S(g);return{hours:nP(te,23),minutes:nP(re,59),seconds:nP(ie,59)}}),y=Rl(te=>{u=!1,w(te)},200),b=te=>{if(!!!t.amPmMode)return"";const ie=t.amPmMode==="A";let le=te<12?" am":" pm";return ie&&(le=le.toUpperCase()),le},x=te=>{let re;switch(te){case"hours":re=[0,2];break;case"minutes":re=[3,5];break;case"seconds":re=[6,8];break}const[ie,le]=re;e("select-range",ie,le),c.value=te},w=te=>{C(te,S(g)[te])},A=()=>{w("hours"),w("minutes"),w("seconds")},T=te=>te.querySelector(`.${s.namespace.value}-scrollbar__wrap`),C=(te,re)=>{if(t.arrowControl)return;const ie=S(p[te]);ie&&ie.$el&&(T(ie.$el).scrollTop=Math.max(0,re*E(te)))},E=te=>{const re=S(p[te]),ie=re==null?void 0:re.$el.querySelector("li");return ie&&Number.parseFloat(Uf(ie,"height"))||0},I=()=>{O(1)},k=()=>{O(-1)},O=te=>{c.value||x("hours");const re=c.value,ie=S(g)[re],le=c.value==="hours"?24:60,ge=U(re,ie,te,le);z(re,ge),C(re,ge),cn(()=>x(re))},U=(te,re,ie,le)=>{let ge=(re+ie+le)%le;const pe=S(v)[te];for(;pe[ge]&&ge!==re;)ge=(ge+ie+le)%le;return ge},z=(te,re)=>{if(S(v)[te][re])return;const{hours:ge,minutes:pe,seconds:ye}=S(g);let Oe;switch(te){case"hours":Oe=t.spinnerDate.hour(re).minute(pe).second(ye);break;case"minutes":Oe=t.spinnerDate.hour(ge).minute(re).second(ye);break;case"seconds":Oe=t.spinnerDate.hour(ge).minute(pe).second(re);break}e("change",Oe)},L=(te,{value:re,disabled:ie})=>{ie||(z(te,re),x(te),C(te,re))},G=te=>{const re=S(p[te]);if(!re)return;u=!0,y(te);const ie=Math.min(Math.round((T(re.$el).scrollTop-(H(te)*.5-10)/E(te)+3)/E(te)),te==="hours"?23:59);z(te,ie)},H=te=>S(p[te]).$el.offsetHeight,F=()=>{const te=re=>{const ie=S(p[re]);ie&&ie.$el&&(T(ie.$el).onscroll=()=>{G(re)})};te("hours"),te("minutes"),te("seconds")};Ln(()=>{cn(()=>{!t.arrowControl&&F(),A(),t.role==="start"&&x("hours")})});const X=(te,re)=>{p[re].value=te??void 0};return e("set-option",[`${t.role}_scrollDown`,O]),e("set-option",[`${t.role}_emitSelectRange`,x]),St(()=>t.spinnerDate,()=>{u||A()}),(te,re)=>(j(),_e("div",{class:ee([S(s).b("spinner"),{"has-seconds":te.showSeconds}])},[te.arrowControl?ot("v-if",!0):(j(!0),_e(an,{key:0},ti(S(m),ie=>(j(),gt(S(nf),{key:ie,ref_for:!0,ref:le=>X(le,ie),class:ee(S(s).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":S(s).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:le=>x(ie),onMousemove:le=>w(ie)},{default:Ae(()=>[(j(!0),_e(an,null,ti(S(v)[ie],(le,ge)=>(j(),_e("li",{key:ge,class:ee([S(s).be("spinner","item"),S(s).is("active",ge===S(g)[ie]),S(s).is("disabled",le)]),onClick:pe=>L(ie,{value:ge,disabled:le})},[ie==="hours"?(j(),_e(an,{key:0},[An(Lt(("0"+(te.amPmMode?ge%12||12:ge)).slice(-2))+Lt(b(ge)),1)],64)):(j(),_e(an,{key:1},[An(Lt(("0"+ge).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),te.arrowControl?(j(!0),_e(an,{key:1},ti(S(m),ie=>(j(),_e("div",{key:ie,class:ee([S(s).be("spinner","wrapper"),S(s).is("arrow")]),onMouseenter:le=>x(ie)},[Vn((j(),gt(S(rn),{class:ee(["arrow-up",S(s).be("spinner","arrow")])},{default:Ae(()=>[he(S(nF))]),_:1},8,["class"])),[[S(A3),k]]),Vn((j(),gt(S(rn),{class:ee(["arrow-down",S(s).be("spinner","arrow")])},{default:Ae(()=>[he(S(Sh))]),_:1},8,["class"])),[[S(A3),I]]),Te("ul",{class:ee(S(s).be("spinner","list"))},[(j(!0),_e(an,null,ti(S(_)[ie],(le,ge)=>(j(),_e("li",{key:ge,class:ee([S(s).be("spinner","item"),S(s).is("active",le===S(g)[ie]),S(s).is("disabled",S(v)[ie][le])])},[S(yn)(le)?(j(),_e(an,{key:0},[ie==="hours"?(j(),_e(an,{key:0},[An(Lt(("0"+(te.amPmMode?le%12||12:le)).slice(-2))+Lt(b(le)),1)],64)):(j(),_e(an,{key:1},[An(Lt(("0"+le).slice(-2)),1)],64))],64)):ot("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):ot("v-if",!0)],2))}});var b6=Vt(S4e,[["__file","basic-time-spinner.vue"]]);const x4e=Ne({__name:"panel-time-pick",props:v4e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=Zt("EP_PICKER_BASE"),{arrowControl:r,disabledHours:s,disabledMinutes:a,disabledSeconds:o,defaultValue:l}=i.props,{getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}=Pne(s,a,o),f=Rt("time"),{t:h,lang:p}=wi(),m=ae([0,2]),g=kne(t),v=W(()=>Xi(t.actualVisible)?`${f.namespace.value}-zoom-in-top`:""),_=W(()=>t.format.includes("ss")),y=W(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),b=H=>{const F=Dn(H).locale(p.value),X=U(F);return F.isSame(X)},x=()=>{e("pick",g.value,!1)},w=(H=!1,F=!1)=>{F||e("pick",t.parsedValue,H)},A=H=>{if(!t.visible)return;const F=U(H).millisecond(0);e("pick",F,!0)},T=(H,F)=>{e("select-range",H,F),m.value=[H,F]},C=H=>{const F=[0,3].concat(_.value?[6]:[]),X=["hours","minutes"].concat(_.value?["seconds"]:[]),re=(F.indexOf(m.value[0])+H+F.length)%F.length;I.start_emitSelectRange(X[re])},E=H=>{const F=H.code,{left:X,right:te,up:re,down:ie}=Kt;if([X,te].includes(F)){C(F===X?-1:1),H.preventDefault();return}if([re,ie].includes(F)){const le=F===re?-1:1;I.start_scrollDown(le),H.preventDefault();return}},{timePickerOptions:I,onSetOption:k,getAvailableTime:O}=Dne({getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}),U=H=>O(H,t.datetimeRole||"",!0),z=H=>H?Dn(H,t.format).locale(p.value):null,L=H=>H?H.format(t.format):null,G=()=>Dn(l).locale(p.value);return e("set-picker-option",["isValidValue",b]),e("set-picker-option",["formatToString",L]),e("set-picker-option",["parseUserInput",z]),e("set-picker-option",["handleKeydownInput",E]),e("set-picker-option",["getRangeAvailableTime",U]),e("set-picker-option",["getDefaultValue",G]),(H,F)=>(j(),gt(Ks,{name:S(v)},{default:Ae(()=>[H.actualVisible||H.visible?(j(),_e("div",{key:0,class:ee(S(f).b("panel"))},[Te("div",{class:ee([S(f).be("panel","content"),{"has-seconds":S(_)}])},[he(b6,{ref:"spinner",role:H.datetimeRole||"start","arrow-control":S(r),"show-seconds":S(_),"am-pm-mode":S(y),"spinner-date":H.parsedValue,"disabled-hours":S(s),"disabled-minutes":S(a),"disabled-seconds":S(o),onChange:A,onSetOption:S(k),onSelectRange:T},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),Te("div",{class:ee(S(f).be("panel","footer"))},[Te("button",{type:"button",class:ee([S(f).be("panel","btn"),"cancel"]),onClick:x},Lt(S(h)("el.datepicker.cancel")),3),Te("button",{type:"button",class:ee([S(f).be("panel","btn"),"confirm"]),onClick:X=>w()},Lt(S(h)("el.datepicker.confirm")),11,["onClick"])],2)],2)):ot("v-if",!0)]),_:1},8,["name"]))}});var E3=Vt(x4e,[["__file","panel-time-pick.vue"]]);const w4e=zt({...Mne,parsedValue:{type:et(Array)}}),T4e=Ne({__name:"panel-time-range",props:w4e,emits:["pick","select-range","set-picker-option"],setup(n,{emit:e}){const t=n,i=(Ze,Q)=>{const me=[];for(let ce=Ze;ce<=Q;ce++)me.push(ce);return me},{t:r,lang:s}=wi(),a=Rt("time"),o=Rt("picker"),l=Zt("EP_PICKER_BASE"),{arrowControl:u,disabledHours:c,disabledMinutes:d,disabledSeconds:f,defaultValue:h}=l.props,p=W(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",u),b.value?"has-seconds":""]),m=W(()=>[a.be("range-picker","body"),a.be("panel","content"),a.is("arrow",u),b.value?"has-seconds":""]),g=W(()=>t.parsedValue[0]),v=W(()=>t.parsedValue[1]),_=kne(t),y=()=>{e("pick",_.value,!1)},b=W(()=>t.format.includes("ss")),x=W(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=(Ze=!1)=>{e("pick",[g.value,v.value],Ze)},A=Ze=>{E(Ze.millisecond(0),v.value)},T=Ze=>{E(g.value,Ze.millisecond(0))},C=Ze=>{const Q=Ze.map(ce=>Dn(ce).locale(s.value)),me=te(Q);return Q[0].isSame(me[0])&&Q[1].isSame(me[1])},E=(Ze,Q)=>{t.visible&&e("pick",[Ze,Q],!0)},I=W(()=>g.value>v.value),k=ae([0,2]),O=(Ze,Q)=>{e("select-range",Ze,Q,"min"),k.value=[Ze,Q]},U=W(()=>b.value?11:8),z=(Ze,Q)=>{e("select-range",Ze,Q,"max");const me=S(U);k.value=[Ze+me,Q+me]},L=Ze=>{const Q=b.value?[0,3,6,11,14,17]:[0,3,8,11],me=["hours","minutes"].concat(b.value?["seconds"]:[]),je=(Q.indexOf(k.value[0])+Ze+Q.length)%Q.length,Fe=Q.length/2;je<Fe?ge.start_emitSelectRange(me[je]):ge.end_emitSelectRange(me[je-Fe])},G=Ze=>{const Q=Ze.code,{left:me,right:ce,up:je,down:Fe}=Kt;if([me,ce].includes(Q)){L(Q===me?-1:1),Ze.preventDefault();return}if([je,Fe].includes(Q)){const nt=Q===je?-1:1,We=k.value[0]<U.value?"start":"end";ge[`${We}_scrollDown`](nt),Ze.preventDefault();return}},H=(Ze,Q)=>{const me=c?c(Ze):[],ce=Ze==="start",Fe=(Q||(ce?v.value:g.value)).hour(),nt=ce?i(Fe+1,23):i(0,Fe-1);return YR(me,nt)},F=(Ze,Q,me)=>{const ce=d?d(Ze,Q):[],je=Q==="start",Fe=me||(je?v.value:g.value),nt=Fe.hour();if(Ze!==nt)return ce;const We=Fe.minute(),Ke=je?i(We+1,59):i(0,We-1);return YR(ce,Ke)},X=(Ze,Q,me,ce)=>{const je=f?f(Ze,Q,me):[],Fe=me==="start",nt=ce||(Fe?v.value:g.value),We=nt.hour(),Ke=nt.minute();if(Ze!==We||Q!==Ke)return je;const it=nt.second(),be=Fe?i(it+1,59):i(0,it-1);return YR(je,be)},te=([Ze,Q])=>[pe(Ze,"start",!0,Q),pe(Q,"end",!1,Ze)],{getAvailableHours:re,getAvailableMinutes:ie,getAvailableSeconds:le}=Pne(H,F,X),{timePickerOptions:ge,getAvailableTime:pe,onSetOption:ye}=Dne({getAvailableHours:re,getAvailableMinutes:ie,getAvailableSeconds:le}),Oe=Ze=>Ze?Bt(Ze)?Ze.map(Q=>Dn(Q,t.format).locale(s.value)):Dn(Ze,t.format).locale(s.value):null,Be=Ze=>Ze?Bt(Ze)?Ze.map(Q=>Q.format(t.format)):Ze.format(t.format):null,Ye=()=>{if(Bt(h))return h.map(Q=>Dn(Q).locale(s.value));const Ze=Dn(h).locale(s.value);return[Ze,Ze.add(60,"m")]};return e("set-picker-option",["formatToString",Be]),e("set-picker-option",["parseUserInput",Oe]),e("set-picker-option",["isValidValue",C]),e("set-picker-option",["handleKeydownInput",G]),e("set-picker-option",["getDefaultValue",Ye]),e("set-picker-option",["getRangeAvailableTime",te]),(Ze,Q)=>Ze.actualVisible?(j(),_e("div",{key:0,class:ee([S(a).b("range-picker"),S(o).b("panel")])},[Te("div",{class:ee(S(a).be("range-picker","content"))},[Te("div",{class:ee(S(a).be("range-picker","cell"))},[Te("div",{class:ee(S(a).be("range-picker","header"))},Lt(S(r)("el.datepicker.startTime")),3),Te("div",{class:ee(S(p))},[he(b6,{ref:"minSpinner",role:"start","show-seconds":S(b),"am-pm-mode":S(x),"arrow-control":S(u),"spinner-date":S(g),"disabled-hours":H,"disabled-minutes":F,"disabled-seconds":X,onChange:A,onSetOption:S(ye),onSelectRange:O},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),Te("div",{class:ee(S(a).be("range-picker","cell"))},[Te("div",{class:ee(S(a).be("range-picker","header"))},Lt(S(r)("el.datepicker.endTime")),3),Te("div",{class:ee(S(m))},[he(b6,{ref:"maxSpinner",role:"end","show-seconds":S(b),"am-pm-mode":S(x),"arrow-control":S(u),"spinner-date":S(v),"disabled-hours":H,"disabled-minutes":F,"disabled-seconds":X,onChange:T,onSetOption:S(ye),onSelectRange:z},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),Te("div",{class:ee(S(a).be("panel","footer"))},[Te("button",{type:"button",class:ee([S(a).be("panel","btn"),"cancel"]),onClick:me=>y()},Lt(S(r)("el.datepicker.cancel")),11,["onClick"]),Te("button",{type:"button",class:ee([S(a).be("panel","btn"),"confirm"]),disabled:S(I),onClick:me=>w()},Lt(S(r)("el.datepicker.confirm")),11,["disabled","onClick"])],2)],2)):ot("v-if",!0)}});var C4e=Vt(T4e,[["__file","panel-time-range.vue"]]);Dn.extend(MF);var A4e=Ne({name:"ElTimePicker",install:null,props:{...IF,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,e){const t=ae(),[i,r]=n.isRange?["timerange",C4e]:["time",E3],s=a=>e.emit("update:modelValue",a);return ui("ElPopperOptions",n.popperOptions),e.expose({focus:()=>{var a;(a=t.value)==null||a.focus()},blur:()=>{var a;(a=t.value)==null||a.blur()},handleOpen:()=>{var a;(a=t.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=t.value)==null||a.handleClose()}}),()=>{var a;const o=(a=n.format)!=null?a:_6;return he(Ine,si(n,{ref:t,type:i,format:o,"onUpdate:modelValue":s}),{default:l=>he(r,l,null)})}}});const E4e=Nn(A4e),eD=Symbol(),M4e=zt({...IF,type:{type:et(String),default:"date"}}),I4e=["date","dates","year","years","month","months","week","range"],DF=zt({disabledDate:{type:et(Function)},date:{type:et(Object),required:!0},minDate:{type:et(Object)},maxDate:{type:et(Object)},parsedValue:{type:et([Object,Array])},rangeState:{type:et(Object),default:()=>({endDate:null,selecting:!1})}}),Lne=zt({type:{type:et(String),required:!0,values:KAe},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),RF=zt({unlinkPanels:Boolean,parsedValue:{type:et(Array)}}),PF=n=>({type:String,values:I4e,default:n}),D4e=zt({...Lne,parsedValue:{type:et([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),m_=n=>{if(!Bt(n))return!1;const[e,t]=n;return Dn.isDayjs(e)&&Dn.isDayjs(t)&&e.isSameOrBefore(t)},kF=(n,{lang:e,unit:t,unlinkPanels:i})=>{let r;if(Bt(n)){let[s,a]=n.map(o=>Dn(o).locale(e));return i||(a=s.add(1,t)),[s,a]}else n?r=Dn(n):r=Dn();return r=r.locale(e),[r,r.add(1,t)]},R4e=(n,e,{columnIndexOffset:t,startDate:i,nextEndDate:r,now:s,unit:a,relativeDateGetter:o,setCellMetadata:l,setRowMetadata:u})=>{for(let c=0;c<n.row;c++){const d=e[c];for(let f=0;f<n.column;f++){let h=d[f+t];h||(h={row:c,column:f,type:"normal",inRange:!1,start:!1,end:!1});const p=c*n.column+f,m=o(p);h.dayjs=m,h.date=m.toDate(),h.timestamp=m.valueOf(),h.type="normal",h.inRange=!!(i&&m.isSameOrAfter(i,a)&&r&&m.isSameOrBefore(r,a))||!!(i&&m.isSameOrBefore(i,a)&&r&&m.isSameOrAfter(r,a)),i!=null&&i.isSameOrAfter(r)?(h.start=!!r&&m.isSame(r,a),h.end=i&&m.isSame(i,a)):(h.start=!!i&&m.isSame(i,a),h.end=!!r&&m.isSame(r,a)),m.isSame(s,a)&&(h.type="today"),l==null||l(h,{rowIndex:c,columnIndex:f}),d[f+t]=h}u==null||u(d)}},M3=(n,e,t)=>{const i=Dn().locale(t).startOf("month").month(e).year(n),r=i.daysInMonth();return Fp(r).map(s=>i.add(s,"day").toDate())},iw=(n,e,t,i)=>{const r=Dn().year(n).month(e).startOf("month"),s=M3(n,e,t).find(a=>!(i!=null&&i(a)));return s?Dn(s).locale(t):r.locale(t)},S6=(n,e,t)=>{const i=n.year();if(!(t!=null&&t(n.toDate())))return n.locale(e);const r=n.month();if(!M3(i,r,e).every(t))return iw(i,r,e,t);for(let s=0;s<12;s++)if(!M3(i,s,e).every(t))return iw(i,s,e,t);return n},P4e=zt({...DF,cellClassName:{type:et(Function)},showWeekNumber:Boolean,selectionMode:PF("date")}),k4e=["changerange","pick","select"],x6=(n="")=>["normal","today"].includes(n),L4e=(n,e)=>{const{lang:t}=wi(),i=ae(),r=ae(),s=ae(),a=ae(),o=ae([[],[],[],[],[],[]]);let l=!1;const u=n.date.$locale().weekStart||7,c=n.date.locale("en").localeData().weekdaysShort().map(F=>F.toLowerCase()),d=W(()=>u>3?7-u:-u),f=W(()=>{const F=n.date.startOf("month");return F.subtract(F.day()||7,"day")}),h=W(()=>c.concat(c).slice(u,u+7)),p=W(()=>cee(S(b)).some(F=>F.isCurrent)),m=W(()=>{const F=n.date.startOf("month"),X=F.day()||7,te=F.daysInMonth(),re=F.subtract(1,"month").daysInMonth();return{startOfMonthDay:X,dateCountOfMonth:te,dateCountOfLastMonth:re}}),g=W(()=>n.selectionMode==="dates"?Wo(n.parsedValue):[]),v=(F,{count:X,rowIndex:te,columnIndex:re})=>{const{startOfMonthDay:ie,dateCountOfMonth:le,dateCountOfLastMonth:ge}=S(m),pe=S(d);if(te>=0&&te<=1){const ye=ie+pe<0?7+ie+pe:ie+pe;if(re+te*7>=ye)return F.text=X,!0;F.text=ge-(ye-re%7)+1+te*7,F.type="prev-month"}else return X<=le?F.text=X:(F.text=X-le,F.type="next-month"),!0;return!1},_=(F,{columnIndex:X,rowIndex:te},re)=>{const{disabledDate:ie,cellClassName:le}=n,ge=S(g),pe=v(F,{count:re,rowIndex:te,columnIndex:X}),ye=F.dayjs.toDate();return F.selected=ge.find(Oe=>Oe.isSame(F.dayjs,"day")),F.isSelected=!!F.selected,F.isCurrent=w(F),F.disabled=ie==null?void 0:ie(ye),F.customClass=le==null?void 0:le(ye),pe},y=F=>{if(n.selectionMode==="week"){const[X,te]=n.showWeekNumber?[1,7]:[0,6],re=H(F[X+1]);F[X].inRange=re,F[X].start=re,F[te].inRange=re,F[te].end=re}},b=W(()=>{const{minDate:F,maxDate:X,rangeState:te,showWeekNumber:re}=n,ie=S(d),le=S(o),ge="day";let pe=1;if(re)for(let ye=0;ye<6;ye++)le[ye][0]||(le[ye][0]={type:"week",text:S(f).add(ye*7+1,ge).week()});return R4e({row:6,column:7},le,{startDate:F,columnIndexOffset:re?1:0,nextEndDate:te.endDate||X||te.selecting&&F||null,now:Dn().locale(S(t)).startOf(ge),unit:ge,relativeDateGetter:ye=>S(f).add(ye-ie,ge),setCellMetadata:(...ye)=>{_(...ye,pe)&&(pe+=1)},setRowMetadata:y}),le});St(()=>n.date,async()=>{var F;(F=S(i))!=null&&F.contains(document.activeElement)&&(await cn(),await x())});const x=async()=>{var F;return(F=S(r))==null?void 0:F.focus()},w=F=>n.selectionMode==="date"&&x6(F.type)&&A(F,n.parsedValue),A=(F,X)=>X?Dn(X).locale(S(t)).isSame(n.date.date(Number(F.text)),"day"):!1,T=(F,X)=>{const te=F*7+(X-(n.showWeekNumber?1:0))-S(d);return S(f).add(te,"day")},C=F=>{var X;if(!n.rangeState.selecting)return;let te=F.target;if(te.tagName==="SPAN"&&(te=(X=te.parentNode)==null?void 0:X.parentNode),te.tagName==="DIV"&&(te=te.parentNode),te.tagName!=="TD")return;const re=te.parentNode.rowIndex-1,ie=te.cellIndex;S(b)[re][ie].disabled||(re!==S(s)||ie!==S(a))&&(s.value=re,a.value=ie,e("changerange",{selecting:!0,endDate:T(re,ie)}))},E=F=>!S(p)&&(F==null?void 0:F.text)===1&&F.type==="normal"||F.isCurrent,I=F=>{l||S(p)||n.selectionMode!=="date"||G(F,!0)},k=F=>{F.target.closest("td")&&(l=!0)},O=F=>{F.target.closest("td")&&(l=!1)},U=F=>{!n.rangeState.selecting||!n.minDate?(e("pick",{minDate:F,maxDate:null}),e("select",!0)):(F>=n.minDate?e("pick",{minDate:n.minDate,maxDate:F}):e("pick",{minDate:F,maxDate:n.minDate}),e("select",!1))},z=F=>{const X=F.week(),te=`${F.year()}w${X}`;e("pick",{year:F.year(),week:X,value:te,date:F.startOf("week")})},L=(F,X)=>{const te=X?Wo(n.parsedValue).filter(re=>(re==null?void 0:re.valueOf())!==F.valueOf()):Wo(n.parsedValue).concat([F]);e("pick",te)},G=(F,X=!1)=>{const te=F.target.closest("td");if(!te)return;const re=te.parentNode.rowIndex-1,ie=te.cellIndex,le=S(b)[re][ie];if(le.disabled||le.type==="week")return;const ge=T(re,ie);switch(n.selectionMode){case"range":{U(ge);break}case"date":{e("pick",ge,X);break}case"week":{z(ge);break}case"dates":{L(ge,!!le.selected);break}}},H=F=>{if(n.selectionMode!=="week")return!1;let X=n.date.startOf("day");if(F.type==="prev-month"&&(X=X.subtract(1,"month")),F.type==="next-month"&&(X=X.add(1,"month")),X=X.date(Number.parseInt(F.text,10)),n.parsedValue&&!Bt(n.parsedValue)){const te=(n.parsedValue.day()-u+7)%7-1;return n.parsedValue.subtract(te,"day").isSame(X,"day")}return!1};return{WEEKS:h,rows:b,tbodyRef:i,currentCellRef:r,focus:x,isCurrent:w,isWeekActive:H,isSelectedCell:E,handlePickDate:G,handleMouseUp:O,handleMouseDown:k,handleMouseMove:C,handleFocus:I}},O4e=(n,{isCurrent:e,isWeekActive:t})=>{const i=Rt("date-table"),{t:r}=wi(),s=W(()=>[i.b(),{"is-week-mode":n.selectionMode==="week"}]),a=W(()=>r("el.datepicker.dateTablePrompt")),o=W(()=>r("el.datepicker.week"));return{tableKls:s,tableLabel:a,weekLabel:o,getCellClasses:c=>{const d=[];return x6(c.type)&&!c.disabled?(d.push("available"),c.type==="today"&&d.push("today")):d.push(c.type),e(c)&&d.push("current"),c.inRange&&(x6(c.type)||n.selectionMode==="week")&&(d.push("in-range"),c.start&&d.push("start-date"),c.end&&d.push("end-date")),c.disabled&&d.push("disabled"),c.selected&&d.push("selected"),c.customClass&&d.push(c.customClass),d.join(" ")},getRowKls:c=>[i.e("row"),{current:t(c)}],t:r}},N4e=zt({cell:{type:et(Object)}});var LF=Ne({name:"ElDatePickerCell",props:N4e,setup(n){const e=Rt("date-table-cell"),{slots:t}=Zt(eD);return()=>{const{cell:i}=n;return at(t,"default",{...i},()=>{var r;return[he("div",{class:e.b()},[he("span",{class:e.e("text")},[(r=i==null?void 0:i.renderText)!=null?r:i==null?void 0:i.text])])]})}}});const B4e=Ne({__name:"basic-date-table",props:P4e,emits:k4e,setup(n,{expose:e,emit:t}){const i=n,{WEEKS:r,rows:s,tbodyRef:a,currentCellRef:o,focus:l,isCurrent:u,isWeekActive:c,isSelectedCell:d,handlePickDate:f,handleMouseUp:h,handleMouseDown:p,handleMouseMove:m,handleFocus:g}=L4e(i,t),{tableLabel:v,tableKls:_,weekLabel:y,getCellClasses:b,getRowKls:x,t:w}=O4e(i,{isCurrent:u,isWeekActive:c});return e({focus:l}),(A,T)=>(j(),_e("table",{"aria-label":S(v),class:ee(S(_)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:S(f),onMousemove:S(m),onMousedown:wn(S(p),["prevent"]),onMouseup:S(h)},[Te("tbody",{ref_key:"tbodyRef",ref:a},[Te("tr",null,[A.showWeekNumber?(j(),_e("th",{key:0,scope:"col"},Lt(S(y)),1)):ot("v-if",!0),(j(!0),_e(an,null,ti(S(r),(C,E)=>(j(),_e("th",{key:E,"aria-label":S(w)("el.datepicker.weeksFull."+C),scope:"col"},Lt(S(w)("el.datepicker.weeks."+C)),9,["aria-label"]))),128))]),(j(!0),_e(an,null,ti(S(s),(C,E)=>(j(),_e("tr",{key:E,class:ee(S(x)(C[1]))},[(j(!0),_e(an,null,ti(C,(I,k)=>(j(),_e("td",{key:`${E}.${k}`,ref_for:!0,ref:O=>S(d)(I)&&(o.value=O),class:ee(S(b)(I)),"aria-current":I.isCurrent?"date":void 0,"aria-selected":I.isCurrent,tabindex:S(d)(I)?0:-1,onFocus:S(g)},[he(S(LF),{cell:I},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}});var w6=Vt(B4e,[["__file","basic-date-table.vue"]]);const F4e=zt({...DF,selectionMode:PF("month")}),U4e=Ne({__name:"basic-month-table",props:F4e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=Rt("month-table"),{t:s,lang:a}=wi(),o=ae(),l=ae(),u=ae(i.date.locale("en").localeData().monthsShort().map(y=>y.toLowerCase())),c=ae([[],[],[]]),d=ae(),f=ae(),h=W(()=>{var y,b;const x=c.value,w=Dn().locale(a.value).startOf("month");for(let A=0;A<3;A++){const T=x[A];for(let C=0;C<4;C++){const E=T[C]||(T[C]={row:A,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});E.type="normal";const I=A*4+C,k=i.date.startOf("year").month(I),O=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;E.inRange=!!(i.minDate&&k.isSameOrAfter(i.minDate,"month")&&O&&k.isSameOrBefore(O,"month"))||!!(i.minDate&&k.isSameOrBefore(i.minDate,"month")&&O&&k.isSameOrAfter(O,"month")),(y=i.minDate)!=null&&y.isSameOrAfter(O)?(E.start=!!(O&&k.isSame(O,"month")),E.end=i.minDate&&k.isSame(i.minDate,"month")):(E.start=!!(i.minDate&&k.isSame(i.minDate,"month")),E.end=!!(O&&k.isSame(O,"month"))),w.isSame(k)&&(E.type="today"),E.text=I,E.disabled=((b=i.disabledDate)==null?void 0:b.call(i,k.toDate()))||!1}}return x}),p=()=>{var y;(y=l.value)==null||y.focus()},m=y=>{const b={},x=i.date.year(),w=new Date,A=y.text;return b.disabled=i.disabledDate?M3(x,A,a.value).every(i.disabledDate):!1,b.current=Wo(i.parsedValue).findIndex(T=>Dn.isDayjs(T)&&T.year()===x&&T.month()===A)>=0,b.today=w.getFullYear()===x&&w.getMonth()===A,y.inRange&&(b["in-range"]=!0,y.start&&(b["start-date"]=!0),y.end&&(b["end-date"]=!0)),b},g=y=>{const b=i.date.year(),x=y.text;return Wo(i.date).findIndex(w=>w.year()===b&&w.month()===x)>=0},v=y=>{var b;if(!i.rangeState.selecting)return;let x=y.target;if(x.tagName==="SPAN"&&(x=(b=x.parentNode)==null?void 0:b.parentNode),x.tagName==="DIV"&&(x=x.parentNode),x.tagName!=="TD")return;const w=x.parentNode.rowIndex,A=x.cellIndex;h.value[w][A].disabled||(w!==d.value||A!==f.value)&&(d.value=w,f.value=A,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(w*4+A)}))},_=y=>{var b;const x=(b=y.target)==null?void 0:b.closest("td");if((x==null?void 0:x.tagName)!=="TD"||bl(x,"disabled"))return;const w=x.cellIndex,T=x.parentNode.rowIndex*4+w,C=i.date.startOf("year").month(T);if(i.selectionMode==="months"){if(y.type==="keydown"){t("pick",Wo(i.parsedValue),!1);return}const E=iw(i.date.year(),T,a.value,i.disabledDate),I=bl(x,"current")?Wo(i.parsedValue).filter(k=>(k==null?void 0:k.month())!==E.month()):Wo(i.parsedValue).concat([Dn(E)]);t("pick",I)}else i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&C>=i.minDate?t("pick",{minDate:i.minDate,maxDate:C}):t("pick",{minDate:C,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:C,maxDate:null}),t("select",!0)):t("pick",T)};return St(()=>i.date,async()=>{var y,b;(y=o.value)!=null&&y.contains(document.activeElement)&&(await cn(),(b=l.value)==null||b.focus())}),e({focus:p}),(y,b)=>(j(),_e("table",{role:"grid","aria-label":S(s)("el.datepicker.monthTablePrompt"),class:ee(S(r).b()),onClick:_,onMousemove:v},[Te("tbody",{ref_key:"tbodyRef",ref:o},[(j(!0),_e(an,null,ti(S(h),(x,w)=>(j(),_e("tr",{key:w},[(j(!0),_e(an,null,ti(x,(A,T)=>(j(),_e("td",{key:T,ref_for:!0,ref:C=>g(A)&&(l.value=C),class:ee(m(A)),"aria-selected":`${g(A)}`,"aria-label":S(s)(`el.datepicker.month${+A.text+1}`),tabindex:g(A)?0:-1,onKeydown:[ur(wn(_,["prevent","stop"]),["space"]),ur(wn(_,["prevent","stop"]),["enter"])]},[he(S(LF),{cell:{...A,renderText:S(s)("el.datepicker.months."+u.value[A.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var T6=Vt(U4e,[["__file","basic-month-table.vue"]]);const z4e=zt({...DF,selectionMode:PF("year")}),H4e=Ne({__name:"basic-year-table",props:z4e,emits:["changerange","pick","select"],setup(n,{expose:e,emit:t}){const i=n,r=(b,x)=>{const w=Dn(String(b)).locale(x).startOf("year"),T=w.endOf("year").dayOfYear();return Fp(T).map(C=>w.add(C,"day").toDate())},s=Rt("year-table"),{t:a,lang:o}=wi(),l=ae(),u=ae(),c=W(()=>Math.floor(i.date.year()/10)*10),d=ae([[],[],[]]),f=ae(),h=ae(),p=W(()=>{var b;const x=d.value,w=Dn().locale(o.value).startOf("year");for(let A=0;A<3;A++){const T=x[A];for(let C=0;C<4&&!(A*4+C>=10);C++){let E=T[C];E||(E={row:A,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),E.type="normal";const I=A*4+C+c.value,k=Dn().year(I),O=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;E.inRange=!!(i.minDate&&k.isSameOrAfter(i.minDate,"year")&&O&&k.isSameOrBefore(O,"year"))||!!(i.minDate&&k.isSameOrBefore(i.minDate,"year")&&O&&k.isSameOrAfter(O,"year")),(b=i.minDate)!=null&&b.isSameOrAfter(O)?(E.start=!!(O&&k.isSame(O,"year")),E.end=!!(i.minDate&&k.isSame(i.minDate,"year"))):(E.start=!!(i.minDate&&k.isSame(i.minDate,"year")),E.end=!!(O&&k.isSame(O,"year"))),w.isSame(k)&&(E.type="today"),E.text=I;const z=k.toDate();E.disabled=i.disabledDate&&i.disabledDate(z)||!1,T[C]=E}}return x}),m=()=>{var b;(b=u.value)==null||b.focus()},g=b=>{const x={},w=Dn().locale(o.value),A=b.text;return x.disabled=i.disabledDate?r(A,o.value).every(i.disabledDate):!1,x.today=w.year()===A,x.current=Wo(i.parsedValue).findIndex(T=>T.year()===A)>=0,b.inRange&&(x["in-range"]=!0,b.start&&(x["start-date"]=!0),b.end&&(x["end-date"]=!0)),x},v=b=>{const x=b.text;return Wo(i.date).findIndex(w=>w.year()===x)>=0},_=b=>{var x;const w=(x=b.target)==null?void 0:x.closest("td");if(!w||!w.textContent||bl(w,"disabled"))return;const A=w.cellIndex,C=w.parentNode.rowIndex*4+A+c.value,E=Dn().year(C);if(i.selectionMode==="range")i.rangeState.selecting?(i.minDate&&E>=i.minDate?t("pick",{minDate:i.minDate,maxDate:E}):t("pick",{minDate:E,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:E,maxDate:null}),t("select",!0));else if(i.selectionMode==="years"){if(b.type==="keydown"){t("pick",Wo(i.parsedValue),!1);return}const I=S6(E.startOf("year"),o.value,i.disabledDate),k=bl(w,"current")?Wo(i.parsedValue).filter(O=>(O==null?void 0:O.year())!==C):Wo(i.parsedValue).concat([I]);t("pick",k)}else t("pick",C)},y=b=>{var x;if(!i.rangeState.selecting)return;const w=(x=b.target)==null?void 0:x.closest("td");if(!w)return;const A=w.parentNode.rowIndex,T=w.cellIndex;p.value[A][T].disabled||(A!==f.value||T!==h.value)&&(f.value=A,h.value=T,t("changerange",{selecting:!0,endDate:Dn().year(c.value).add(A*4+T,"year")}))};return St(()=>i.date,async()=>{var b,x;(b=l.value)!=null&&b.contains(document.activeElement)&&(await cn(),(x=u.value)==null||x.focus())}),e({focus:m}),(b,x)=>(j(),_e("table",{role:"grid","aria-label":S(a)("el.datepicker.yearTablePrompt"),class:ee(S(s).b()),onClick:_,onMousemove:y},[Te("tbody",{ref_key:"tbodyRef",ref:l},[(j(!0),_e(an,null,ti(S(p),(w,A)=>(j(),_e("tr",{key:A},[(j(!0),_e(an,null,ti(w,(T,C)=>(j(),_e("td",{key:`${A}_${C}`,ref_for:!0,ref:E=>v(T)&&(u.value=E),class:ee(["available",g(T)]),"aria-selected":v(T),"aria-label":String(T.text),tabindex:v(T)?0:-1,onKeydown:[ur(wn(_,["prevent","stop"]),["space"]),ur(wn(_,["prevent","stop"]),["enter"])]},[he(S(LF),{cell:T},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}});var C6=Vt(H4e,[["__file","basic-year-table.vue"]]);const V4e=Ne({__name:"panel-date-pick",props:D4e,emits:["pick","set-picker-option","panel-change"],setup(n,{emit:e}){const t=n,i=(q,xe,ve)=>!0,r=Rt("picker-panel"),s=Rt("date-picker"),a=S0(),o=Ls(),{t:l,lang:u}=wi(),c=Zt("EP_PICKER_BASE"),d=Zt(ZI),{shortcuts:f,disabledDate:h,cellClassName:p,defaultTime:m}=c.props,g=$i(c.props,"defaultValue"),v=ae(),_=ae(Dn().locale(u.value)),y=ae(!1);let b=!1;const x=W(()=>Dn(m).locale(u.value)),w=W(()=>_.value.month()),A=W(()=>_.value.year()),T=ae([]),C=ae(null),E=ae(null),I=q=>T.value.length>0?i(q,T.value,t.format||"HH:mm:ss"):!0,k=q=>m&&!je.value&&!y.value&&!b?x.value.year(q.year()).month(q.month()).date(q.date()):ye.value?q.millisecond(0):q.startOf("day"),O=(q,...xe)=>{if(!q)e("pick",q,...xe);else if(Bt(q)){const ve=q.map(k);e("pick",ve,...xe)}else e("pick",k(q),...xe);C.value=null,E.value=null,y.value=!1,b=!1},U=async(q,xe)=>{if(X.value==="date"){q=q;let ve=t.parsedValue?t.parsedValue.year(q.year()).month(q.month()).date(q.date()):q;I(ve)||(ve=T.value[0][0].year(q.year()).month(q.month()).date(q.date())),_.value=ve,O(ve,ye.value||xe),t.type==="datetime"&&(await cn(),At())}else X.value==="week"?O(q.date):X.value==="dates"&&O(q,!0)},z=q=>{const xe=q?"add":"subtract";_.value=_.value[xe](1,"month"),vt("month")},L=q=>{const xe=_.value,ve=q?"add":"subtract";_.value=G.value==="year"?xe[ve](10,"year"):xe[ve](1,"year"),vt("year")},G=ae("date"),H=W(()=>{const q=l("el.datepicker.year");if(G.value==="year"){const xe=Math.floor(A.value/10)*10;return q?`${xe} ${q} - ${xe+9} ${q}`:`${xe} - ${xe+9}`}return`${A.value} ${q}`}),F=q=>{const xe=pn(q.value)?q.value():q.value;if(xe){b=!0,O(Dn(xe).locale(u.value));return}q.onClick&&q.onClick({attrs:a,slots:o,emit:e})},X=W(()=>{const{type:q}=t;return["week","month","months","year","years","dates"].includes(q)?q:"date"}),te=W(()=>X.value==="dates"||X.value==="months"||X.value==="years"),re=W(()=>X.value==="date"?G.value:X.value),ie=W(()=>!!f.length),le=async(q,xe)=>{X.value==="month"?(_.value=iw(_.value.year(),q,u.value,h),O(_.value,!1)):X.value==="months"?O(q,xe??!0):(_.value=iw(_.value.year(),q,u.value,h),G.value="date",["month","year","date","week"].includes(X.value)&&(O(_.value,!0),await cn(),At())),vt("month")},ge=async(q,xe)=>{if(X.value==="year"){const ve=_.value.startOf("year").year(q);_.value=S6(ve,u.value,h),O(_.value,!1)}else if(X.value==="years")O(q,xe??!0);else{const ve=_.value.year(q);_.value=S6(ve,u.value,h),G.value="month",["month","year","date","week"].includes(X.value)&&(O(_.value,!0),await cn(),At())}vt("year")},pe=async q=>{G.value=q,await cn(),At()},ye=W(()=>t.type==="datetime"||t.type==="datetimerange"),Oe=W(()=>{const q=ye.value||X.value==="dates",xe=X.value==="years",ve=X.value==="months",ke=G.value==="date",we=G.value==="year",De=G.value==="month";return q&&ke||xe&&we||ve&&De}),Be=W(()=>h?t.parsedValue?Bt(t.parsedValue)?h(t.parsedValue[0].toDate()):h(t.parsedValue.toDate()):!0:!1),Ye=()=>{if(te.value)O(t.parsedValue);else{let q=t.parsedValue;if(!q){const xe=Dn(m).locale(u.value),ve=Tt();q=xe.year(ve.year()).month(ve.month()).date(ve.date())}_.value=q,O(q)}},Ze=W(()=>h?h(Dn().locale(u.value).toDate()):!1),Q=()=>{const xe=Dn().locale(u.value).toDate();y.value=!0,(!h||!h(xe))&&I(xe)&&(_.value=Dn().locale(u.value),O(_.value))},me=W(()=>t.timeFormat||qte(t.format)),ce=W(()=>t.dateFormat||Wte(t.format)),je=W(()=>{if(E.value)return E.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||_.value).format(me.value)}),Fe=W(()=>{if(C.value)return C.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||_.value).format(ce.value)}),nt=ae(!1),We=()=>{nt.value=!0},Ke=()=>{nt.value=!1},it=q=>({hour:q.hour(),minute:q.minute(),second:q.second(),year:q.year(),month:q.month(),date:q.date()}),be=(q,xe,ve)=>{const{hour:ke,minute:we,second:De}=it(q),xt=t.parsedValue?t.parsedValue.hour(ke).minute(we).second(De):q;_.value=xt,O(_.value,!0),ve||(nt.value=xe)},K=q=>{const xe=Dn(q,me.value).locale(u.value);if(xe.isValid()&&I(xe)){const{year:ve,month:ke,date:we}=it(_.value);_.value=xe.year(ve).month(ke).date(we),E.value=null,nt.value=!1,O(_.value,!0)}},ne=q=>{const xe=Dn(q,ce.value).locale(u.value);if(xe.isValid()){if(h&&h(xe.toDate()))return;const{hour:ve,minute:ke,second:we}=it(_.value);_.value=xe.hour(ve).minute(ke).second(we),C.value=null,O(_.value,!0)}},Se=q=>Dn.isDayjs(q)&&q.isValid()&&(h?!h(q.toDate()):!0),ze=q=>Bt(q)?q.map(xe=>xe.format(t.format)):q.format(t.format),Je=q=>Dn(q,t.format).locale(u.value),Tt=()=>{const q=Dn(g.value).locale(u.value);if(!g.value){const xe=x.value;return Dn().hour(xe.hour()).minute(xe.minute()).second(xe.second()).locale(u.value)}return q},At=async()=>{var q;["week","month","year","date"].includes(X.value)&&((q=v.value)==null||q.focus(),X.value==="week"&&wt(Kt.down))},Re=q=>{const{code:xe}=q;[Kt.up,Kt.down,Kt.left,Kt.right,Kt.home,Kt.end,Kt.pageUp,Kt.pageDown].includes(xe)&&(wt(xe),q.stopPropagation(),q.preventDefault()),[Kt.enter,Kt.space,Kt.numpadEnter].includes(xe)&&C.value===null&&E.value===null&&(q.preventDefault(),O(_.value,!1))},wt=q=>{var xe;const{up:ve,down:ke,left:we,right:De,home:xt,end:Pe,pageUp:Dt,pageDown:dt}=Kt,Mt={year:{[ve]:-4,[ke]:4,[we]:-1,[De]:1,offset:(Ft,Sn)=>Ft.setFullYear(Ft.getFullYear()+Sn)},month:{[ve]:-4,[ke]:4,[we]:-1,[De]:1,offset:(Ft,Sn)=>Ft.setMonth(Ft.getMonth()+Sn)},week:{[ve]:-1,[ke]:1,[we]:-1,[De]:1,offset:(Ft,Sn)=>Ft.setDate(Ft.getDate()+Sn*7)},date:{[ve]:-7,[ke]:7,[we]:-1,[De]:1,[xt]:Ft=>-Ft.getDay(),[Pe]:Ft=>-Ft.getDay()+6,[Dt]:Ft=>-new Date(Ft.getFullYear(),Ft.getMonth(),0).getDate(),[dt]:Ft=>new Date(Ft.getFullYear(),Ft.getMonth()+1,0).getDate(),offset:(Ft,Sn)=>Ft.setDate(Ft.getDate()+Sn)}},jt=_.value.toDate();for(;Math.abs(_.value.diff(jt,"year",!0))<1;){const Ft=Mt[re.value];if(!Ft)return;if(Ft.offset(jt,pn(Ft[q])?Ft[q](jt):(xe=Ft[q])!=null?xe:0),h&&h(jt))break;const Sn=Dn(jt).locale(u.value);_.value=Sn,e("pick",Sn,!0);break}},vt=q=>{e("panel-change",_.value.toDate(),q,G.value)};return St(()=>X.value,q=>{if(["month","year"].includes(q)){G.value=q;return}else if(q==="years"){G.value="year";return}else if(q==="months"){G.value="month";return}G.value="date"},{immediate:!0}),St(()=>G.value,()=>{d==null||d.updatePopper()}),St(()=>g.value,q=>{q&&(_.value=Tt())},{immediate:!0}),St(()=>t.parsedValue,q=>{if(q){if(te.value||Bt(q))return;_.value=q}else _.value=Tt()},{immediate:!0}),e("set-picker-option",["isValidValue",Se]),e("set-picker-option",["formatToString",ze]),e("set-picker-option",["parseUserInput",Je]),e("set-picker-option",["handleFocusPicker",At]),(q,xe)=>(j(),_e("div",{class:ee([S(r).b(),S(s).b(),{"has-sidebar":q.$slots.sidebar||S(ie),"has-time":S(ye)}])},[Te("div",{class:ee(S(r).e("body-wrapper"))},[at(q.$slots,"sidebar",{class:ee(S(r).e("sidebar"))}),S(ie)?(j(),_e("div",{key:0,class:ee(S(r).e("sidebar"))},[(j(!0),_e(an,null,ti(S(f),(ve,ke)=>(j(),_e("button",{key:ke,type:"button",class:ee(S(r).e("shortcut")),onClick:we=>F(ve)},Lt(ve.text),11,["onClick"]))),128))],2)):ot("v-if",!0),Te("div",{class:ee(S(r).e("body"))},[S(ye)?(j(),_e("div",{key:0,class:ee(S(s).e("time-header"))},[Te("span",{class:ee(S(s).e("editor-wrap"))},[he(S(So),{placeholder:S(l)("el.datepicker.selectDate"),"model-value":S(Fe),size:"small","validate-event":!1,onInput:ve=>C.value=ve,onChange:ne},null,8,["placeholder","model-value","onInput"])],2),Vn((j(),_e("span",{class:ee(S(s).e("editor-wrap"))},[he(S(So),{placeholder:S(l)("el.datepicker.selectTime"),"model-value":S(je),size:"small","validate-event":!1,onFocus:We,onInput:ve=>E.value=ve,onChange:K},null,8,["placeholder","model-value","onInput"]),he(S(E3),{visible:nt.value,format:S(me),"parsed-value":_.value,onPick:be},null,8,["visible","format","parsed-value"])],2)),[[S(sh),Ke]])],2)):ot("v-if",!0),Vn(Te("div",{class:ee([S(s).e("header"),(G.value==="year"||G.value==="month")&&S(s).e("header--bordered")])},[Te("span",{class:ee(S(s).e("prev-btn"))},[Te("button",{type:"button","aria-label":S(l)("el.datepicker.prevYear"),class:ee(["d-arrow-left",S(r).e("icon-btn")]),onClick:ve=>L(!1)},[at(q.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["aria-label","onClick"]),Vn(Te("button",{type:"button","aria-label":S(l)("el.datepicker.prevMonth"),class:ee([S(r).e("icon-btn"),"arrow-left"]),onClick:ve=>z(!1)},[at(q.$slots,"prev-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1})])],10,["aria-label","onClick"]),[[Oi,G.value==="date"]])],2),Te("span",{role:"button",class:ee(S(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:ur(ve=>pe("year"),["enter"]),onClick:ve=>pe("year")},Lt(S(H)),43,["onKeydown","onClick"]),Vn(Te("span",{role:"button","aria-live":"polite",tabindex:"0",class:ee([S(s).e("header-label"),{active:G.value==="month"}]),onKeydown:ur(ve=>pe("month"),["enter"]),onClick:ve=>pe("month")},Lt(S(l)(`el.datepicker.month${S(w)+1}`)),43,["onKeydown","onClick"]),[[Oi,G.value==="date"]]),Te("span",{class:ee(S(s).e("next-btn"))},[Vn(Te("button",{type:"button","aria-label":S(l)("el.datepicker.nextMonth"),class:ee([S(r).e("icon-btn"),"arrow-right"]),onClick:ve=>z(!0)},[at(q.$slots,"next-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})])],10,["aria-label","onClick"]),[[Oi,G.value==="date"]]),Te("button",{type:"button","aria-label":S(l)("el.datepicker.nextYear"),class:ee([S(r).e("icon-btn"),"d-arrow-right"]),onClick:ve=>L(!0)},[at(q.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Oi,G.value!=="time"]]),Te("div",{class:ee(S(r).e("content")),onKeydown:Re},[G.value==="date"?(j(),gt(w6,{key:0,ref_key:"currentViewRef",ref:v,"selection-mode":S(X),date:_.value,"parsed-value":q.parsedValue,"disabled-date":S(h),"cell-class-name":S(p),onPick:U},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):ot("v-if",!0),G.value==="year"?(j(),gt(C6,{key:1,ref_key:"currentViewRef",ref:v,"selection-mode":S(X),date:_.value,"disabled-date":S(h),"parsed-value":q.parsedValue,onPick:ge},null,8,["selection-mode","date","disabled-date","parsed-value"])):ot("v-if",!0),G.value==="month"?(j(),gt(T6,{key:2,ref_key:"currentViewRef",ref:v,"selection-mode":S(X),date:_.value,"parsed-value":q.parsedValue,"disabled-date":S(h),onPick:le},null,8,["selection-mode","date","parsed-value","disabled-date"])):ot("v-if",!0)],34)],2)],2),Vn(Te("div",{class:ee(S(r).e("footer"))},[Vn(he(S(_a),{text:"",size:"small",class:ee(S(r).e("link-btn")),disabled:S(Ze),onClick:Q},{default:Ae(()=>[An(Lt(S(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Oi,!S(te)&&q.showNow]]),he(S(_a),{plain:"",size:"small",class:ee(S(r).e("link-btn")),disabled:S(Be),onClick:Ye},{default:Ae(()=>[An(Lt(S(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Oi,S(Oe)]])],2))}});var $4e=Vt(V4e,[["__file","panel-date-pick.vue"]]);const G4e=zt({...Lne,...RF,visible:Boolean}),One=n=>{const{emit:e}=Qn(),t=S0(),i=Ls();return s=>{const a=pn(s.value)?s.value():s.value;if(a){e("pick",[Dn(a[0]).locale(n.value),Dn(a[1]).locale(n.value)]);return}s.onClick&&s.onClick({attrs:t,slots:i,emit:e})}},Nne=(n,{defaultValue:e,leftDate:t,rightDate:i,unit:r,onParsedValueChanged:s})=>{const{emit:a}=Qn(),{pickerNs:o}=Zt(eD),l=Rt("date-range-picker"),{t:u,lang:c}=wi(),d=One(c),f=ae(),h=ae(),p=ae({endDate:null,selecting:!1}),m=b=>{p.value=b},g=(b=!1)=>{const x=S(f),w=S(h);m_([x,w])&&a("pick",[x,w],b)},v=b=>{p.value.selecting=b,b||(p.value.endDate=null)},_=b=>{if(Bt(b)&&b.length===2){const[x,w]=b;f.value=x,t.value=x,h.value=w,s(S(f),S(h))}else y()},y=()=>{const[b,x]=kF(S(e),{lang:S(c),unit:r,unlinkPanels:n.unlinkPanels});f.value=void 0,h.value=void 0,t.value=b,i.value=x};return St(e,b=>{b&&y()},{immediate:!0}),St(()=>n.parsedValue,_,{immediate:!0}),{minDate:f,maxDate:h,rangeState:p,lang:c,ppNs:o,drpNs:l,handleChangeRange:m,handleRangeConfirm:g,handleShortcutClick:d,onSelect:v,onReset:_,t:u}},YC="month",W4e=Ne({__name:"panel-date-range",props:G4e,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(n,{emit:e}){const t=n,i=Zt("EP_PICKER_BASE"),{disabledDate:r,cellClassName:s,defaultTime:a,clearable:o}=i.props,l=$i(i.props,"format"),u=$i(i.props,"shortcuts"),c=$i(i.props,"defaultValue"),{lang:d}=wi(),f=ae(Dn().locale(d.value)),h=ae(Dn().locale(d.value).add(1,YC)),{minDate:p,maxDate:m,rangeState:g,ppNs:v,drpNs:_,handleChangeRange:y,handleRangeConfirm:b,handleShortcutClick:x,onSelect:w,onReset:A,t:T}=Nne(t,{defaultValue:c,leftDate:f,rightDate:h,unit:YC,onParsedValueChanged:xe});St(()=>t.visible,ve=>{!ve&&g.value.selecting&&(A(t.parsedValue),w(!1))});const C=ae({min:null,max:null}),E=ae({min:null,max:null}),I=W(()=>`${f.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${f.value.month()+1}`)}`),k=W(()=>`${h.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${h.value.month()+1}`)}`),O=W(()=>f.value.year()),U=W(()=>f.value.month()),z=W(()=>h.value.year()),L=W(()=>h.value.month()),G=W(()=>!!u.value.length),H=W(()=>C.value.min!==null?C.value.min:p.value?p.value.format(ie.value):""),F=W(()=>C.value.max!==null?C.value.max:m.value||p.value?(m.value||p.value).format(ie.value):""),X=W(()=>E.value.min!==null?E.value.min:p.value?p.value.format(re.value):""),te=W(()=>E.value.max!==null?E.value.max:m.value||p.value?(m.value||p.value).format(re.value):""),re=W(()=>t.timeFormat||qte(l.value)),ie=W(()=>t.dateFormat||Wte(l.value)),le=ve=>m_(ve)&&(r?!r(ve[0].toDate())&&!r(ve[1].toDate()):!0),ge=()=>{f.value=f.value.subtract(1,"year"),t.unlinkPanels||(h.value=f.value.add(1,"month")),me("year")},pe=()=>{f.value=f.value.subtract(1,"month"),t.unlinkPanels||(h.value=f.value.add(1,"month")),me("month")},ye=()=>{t.unlinkPanels?h.value=h.value.add(1,"year"):(f.value=f.value.add(1,"year"),h.value=f.value.add(1,"month")),me("year")},Oe=()=>{t.unlinkPanels?h.value=h.value.add(1,"month"):(f.value=f.value.add(1,"month"),h.value=f.value.add(1,"month")),me("month")},Be=()=>{f.value=f.value.add(1,"year"),me("year")},Ye=()=>{f.value=f.value.add(1,"month"),me("month")},Ze=()=>{h.value=h.value.subtract(1,"year"),me("year")},Q=()=>{h.value=h.value.subtract(1,"month"),me("month")},me=ve=>{e("panel-change",[f.value.toDate(),h.value.toDate()],ve)},ce=W(()=>{const ve=(U.value+1)%12,ke=U.value+1>=12?1:0;return t.unlinkPanels&&new Date(O.value+ke,ve)<new Date(z.value,L.value)}),je=W(()=>t.unlinkPanels&&z.value*12+L.value-(O.value*12+U.value+1)>=12),Fe=W(()=>!(p.value&&m.value&&!g.value.selecting&&m_([p.value,m.value]))),nt=W(()=>t.type==="datetime"||t.type==="datetimerange"),We=(ve,ke)=>{if(ve)return a?Dn(a[ke]||a).locale(d.value).year(ve.year()).month(ve.month()).date(ve.date()):ve},Ke=(ve,ke=!0)=>{const we=ve.minDate,De=ve.maxDate,xt=We(we,0),Pe=We(De,1);m.value===Pe&&p.value===xt||(e("calendar-change",[we.toDate(),De&&De.toDate()]),m.value=Pe,p.value=xt,!(!ke||nt.value)&&b())},it=ae(!1),be=ae(!1),K=()=>{it.value=!1},ne=()=>{be.value=!1},Se=(ve,ke)=>{C.value[ke]=ve;const we=Dn(ve,ie.value).locale(d.value);if(we.isValid()){if(r&&r(we.toDate()))return;ke==="min"?(f.value=we,p.value=(p.value||f.value).year(we.year()).month(we.month()).date(we.date()),!t.unlinkPanels&&(!m.value||m.value.isBefore(p.value))&&(h.value=we.add(1,"month"),m.value=p.value.add(1,"month"))):(h.value=we,m.value=(m.value||h.value).year(we.year()).month(we.month()).date(we.date()),!t.unlinkPanels&&(!p.value||p.value.isAfter(m.value))&&(f.value=we.subtract(1,"month"),p.value=m.value.subtract(1,"month")))}},ze=(ve,ke)=>{C.value[ke]=null},Je=(ve,ke)=>{E.value[ke]=ve;const we=Dn(ve,re.value).locale(d.value);we.isValid()&&(ke==="min"?(it.value=!0,p.value=(p.value||f.value).hour(we.hour()).minute(we.minute()).second(we.second())):(be.value=!0,m.value=(m.value||h.value).hour(we.hour()).minute(we.minute()).second(we.second()),h.value=m.value))},Tt=(ve,ke)=>{E.value[ke]=null,ke==="min"?(f.value=p.value,it.value=!1,(!m.value||m.value.isBefore(p.value))&&(m.value=p.value)):(h.value=m.value,be.value=!1,m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},At=(ve,ke,we)=>{E.value.min||(ve&&(f.value=ve,p.value=(p.value||f.value).hour(ve.hour()).minute(ve.minute()).second(ve.second())),we||(it.value=ke),(!m.value||m.value.isBefore(p.value))&&(m.value=p.value,h.value=ve))},Re=(ve,ke,we)=>{E.value.max||(ve&&(h.value=ve,m.value=(m.value||h.value).hour(ve.hour()).minute(ve.minute()).second(ve.second())),we||(be.value=ke),m.value&&m.value.isBefore(p.value)&&(p.value=m.value))},wt=()=>{f.value=kF(S(c),{lang:S(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],h.value=f.value.add(1,"month"),m.value=void 0,p.value=void 0,e("pick",null)},vt=ve=>Bt(ve)?ve.map(ke=>ke.format(l.value)):ve.format(l.value),q=ve=>Bt(ve)?ve.map(ke=>Dn(ke,l.value).locale(d.value)):Dn(ve,l.value).locale(d.value);function xe(ve,ke){if(t.unlinkPanels&&ke){const we=(ve==null?void 0:ve.year())||0,De=(ve==null?void 0:ve.month())||0,xt=ke.year(),Pe=ke.month();h.value=we===xt&&De===Pe?ke.add(1,YC):ke}else h.value=f.value.add(1,YC),ke&&(h.value=h.value.hour(ke.hour()).minute(ke.minute()).second(ke.second()))}return e("set-picker-option",["isValidValue",le]),e("set-picker-option",["parseUserInput",q]),e("set-picker-option",["formatToString",vt]),e("set-picker-option",["handleClear",wt]),(ve,ke)=>(j(),_e("div",{class:ee([S(v).b(),S(_).b(),{"has-sidebar":ve.$slots.sidebar||S(G),"has-time":S(nt)}])},[Te("div",{class:ee(S(v).e("body-wrapper"))},[at(ve.$slots,"sidebar",{class:ee(S(v).e("sidebar"))}),S(G)?(j(),_e("div",{key:0,class:ee(S(v).e("sidebar"))},[(j(!0),_e(an,null,ti(S(u),(we,De)=>(j(),_e("button",{key:De,type:"button",class:ee(S(v).e("shortcut")),onClick:xt=>S(x)(we)},Lt(we.text),11,["onClick"]))),128))],2)):ot("v-if",!0),Te("div",{class:ee(S(v).e("body"))},[S(nt)?(j(),_e("div",{key:0,class:ee(S(_).e("time-header"))},[Te("span",{class:ee(S(_).e("editors-wrap"))},[Te("span",{class:ee(S(_).e("time-picker-wrap"))},[he(S(So),{size:"small",disabled:S(g).selecting,placeholder:S(T)("el.datepicker.startDate"),class:ee(S(_).e("editor")),"model-value":S(H),"validate-event":!1,onInput:we=>Se(we,"min"),onChange:we=>ze(we,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),Vn((j(),_e("span",{class:ee(S(_).e("time-picker-wrap"))},[he(S(So),{size:"small",class:ee(S(_).e("editor")),disabled:S(g).selecting,placeholder:S(T)("el.datepicker.startTime"),"model-value":S(X),"validate-event":!1,onFocus:we=>it.value=!0,onInput:we=>Je(we,"min"),onChange:we=>Tt(we,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),he(S(E3),{visible:it.value,format:S(re),"datetime-role":"start","parsed-value":f.value,onPick:At},null,8,["visible","format","parsed-value"])],2)),[[S(sh),K]])],2),Te("span",null,[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})]),Te("span",{class:ee([S(_).e("editors-wrap"),"is-right"])},[Te("span",{class:ee(S(_).e("time-picker-wrap"))},[he(S(So),{size:"small",class:ee(S(_).e("editor")),disabled:S(g).selecting,placeholder:S(T)("el.datepicker.endDate"),"model-value":S(F),readonly:!S(p),"validate-event":!1,onInput:we=>Se(we,"max"),onChange:we=>ze(we,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),Vn((j(),_e("span",{class:ee(S(_).e("time-picker-wrap"))},[he(S(So),{size:"small",class:ee(S(_).e("editor")),disabled:S(g).selecting,placeholder:S(T)("el.datepicker.endTime"),"model-value":S(te),readonly:!S(p),"validate-event":!1,onFocus:we=>S(p)&&(be.value=!0),onInput:we=>Je(we,"max"),onChange:we=>Tt(we,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),he(S(E3),{"datetime-role":"end",visible:be.value,format:S(re),"parsed-value":h.value,onPick:Re},null,8,["visible","format","parsed-value"])],2)),[[S(sh),ne]])],2)],2)):ot("v-if",!0),Te("div",{class:ee([[S(v).e("content"),S(_).e("content")],"is-left"])},[Te("div",{class:ee(S(_).e("header"))},[Te("button",{type:"button",class:ee([S(v).e("icon-btn"),"d-arrow-left"]),"aria-label":S(T)("el.datepicker.prevYear"),onClick:ge},[at(ve.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["aria-label"]),Te("button",{type:"button",class:ee([S(v).e("icon-btn"),"arrow-left"]),"aria-label":S(T)("el.datepicker.prevMonth"),onClick:pe},[at(ve.$slots,"prev-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1})])],10,["aria-label"]),ve.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(je),class:ee([[S(v).e("icon-btn"),{"is-disabled":!S(je)}],"d-arrow-right"]),"aria-label":S(T)("el.datepicker.nextYear"),onClick:Be},[at(ve.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["disabled","aria-label"])):ot("v-if",!0),ve.unlinkPanels?(j(),_e("button",{key:1,type:"button",disabled:!S(ce),class:ee([[S(v).e("icon-btn"),{"is-disabled":!S(ce)}],"arrow-right"]),"aria-label":S(T)("el.datepicker.nextMonth"),onClick:Ye},[at(ve.$slots,"next-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})])],10,["disabled","aria-label"])):ot("v-if",!0),Te("div",null,Lt(S(I)),1)],2),he(w6,{"selection-mode":"range",date:f.value,"min-date":S(p),"max-date":S(m),"range-state":S(g),"disabled-date":S(r),"cell-class-name":S(s),onChangerange:S(y),onPick:Ke,onSelect:S(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),Te("div",{class:ee([[S(v).e("content"),S(_).e("content")],"is-right"])},[Te("div",{class:ee(S(_).e("header"))},[ve.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(je),class:ee([[S(v).e("icon-btn"),{"is-disabled":!S(je)}],"d-arrow-left"]),"aria-label":S(T)("el.datepicker.prevYear"),onClick:Ze},[at(ve.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["disabled","aria-label"])):ot("v-if",!0),ve.unlinkPanels?(j(),_e("button",{key:1,type:"button",disabled:!S(ce),class:ee([[S(v).e("icon-btn"),{"is-disabled":!S(ce)}],"arrow-left"]),"aria-label":S(T)("el.datepicker.prevMonth"),onClick:Q},[at(ve.$slots,"prev-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1})])],10,["disabled","aria-label"])):ot("v-if",!0),Te("button",{type:"button","aria-label":S(T)("el.datepicker.nextYear"),class:ee([S(v).e("icon-btn"),"d-arrow-right"]),onClick:ye},[at(ve.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["aria-label"]),Te("button",{type:"button",class:ee([S(v).e("icon-btn"),"arrow-right"]),"aria-label":S(T)("el.datepicker.nextMonth"),onClick:Oe},[at(ve.$slots,"next-month",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})])],10,["aria-label"]),Te("div",null,Lt(S(k)),1)],2),he(w6,{"selection-mode":"range",date:h.value,"min-date":S(p),"max-date":S(m),"range-state":S(g),"disabled-date":S(r),"cell-class-name":S(s),onChangerange:S(y),onPick:Ke,onSelect:S(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),S(nt)?(j(),_e("div",{key:0,class:ee(S(v).e("footer"))},[S(o)?(j(),gt(S(_a),{key:0,text:"",size:"small",class:ee(S(v).e("link-btn")),onClick:wt},{default:Ae(()=>[An(Lt(S(T)("el.datepicker.clear")),1)]),_:1},8,["class"])):ot("v-if",!0),he(S(_a),{plain:"",size:"small",class:ee(S(v).e("link-btn")),disabled:S(Fe),onClick:we=>S(b)(!1)},{default:Ae(()=>[An(Lt(S(T)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):ot("v-if",!0)],2))}});var q4e=Vt(W4e,[["__file","panel-date-range.vue"]]);const j4e=zt({...RF}),K4e=["pick","set-picker-option","calendar-change"],X4e=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const{t:i}=wi(),r=()=>{e.value=e.value.subtract(1,"year"),n.value||(t.value=t.value.subtract(1,"year"))},s=()=>{n.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},a=()=>{e.value=e.value.add(1,"year")},o=()=>{t.value=t.value.subtract(1,"year")},l=W(()=>`${e.value.year()} ${i("el.datepicker.year")}`),u=W(()=>`${t.value.year()} ${i("el.datepicker.year")}`),c=W(()=>e.value.year()),d=W(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:r,rightNextYear:s,leftNextYear:a,rightPrevYear:o,leftLabel:l,rightLabel:u,leftYear:c,rightYear:d}},QC="year",Y4e=Ne({name:"DatePickerMonthRange"}),Q4e=Ne({...Y4e,props:j4e,emits:K4e,setup(n,{emit:e}){const t=n,{lang:i}=wi(),r=Zt("EP_PICKER_BASE"),{shortcuts:s,disabledDate:a}=r.props,o=$i(r.props,"format"),l=$i(r.props,"defaultValue"),u=ae(Dn().locale(i.value)),c=ae(Dn().locale(i.value).add(1,QC)),{minDate:d,maxDate:f,rangeState:h,ppNs:p,drpNs:m,handleChangeRange:g,handleRangeConfirm:v,handleShortcutClick:_,onSelect:y}=Nne(t,{defaultValue:l,leftDate:u,rightDate:c,unit:QC,onParsedValueChanged:H}),b=W(()=>!!s.length),{leftPrevYear:x,rightNextYear:w,leftNextYear:A,rightPrevYear:T,leftLabel:C,rightLabel:E,leftYear:I,rightYear:k}=X4e({unlinkPanels:$i(t,"unlinkPanels"),leftDate:u,rightDate:c}),O=W(()=>t.unlinkPanels&&k.value>I.value+1),U=(F,X=!0)=>{const te=F.minDate,re=F.maxDate;f.value===re&&d.value===te||(e("calendar-change",[te.toDate(),re&&re.toDate()]),f.value=re,d.value=te,X&&v())},z=()=>{u.value=kF(S(l),{lang:S(i),unit:"year",unlinkPanels:t.unlinkPanels})[0],c.value=u.value.add(1,"year"),e("pick",null)},L=F=>Bt(F)?F.map(X=>X.format(o.value)):F.format(o.value),G=F=>Bt(F)?F.map(X=>Dn(X,o.value).locale(i.value)):Dn(F,o.value).locale(i.value);function H(F,X){if(t.unlinkPanels&&X){const te=(F==null?void 0:F.year())||0,re=X.year();c.value=te===re?X.add(1,QC):X}else c.value=u.value.add(1,QC)}return e("set-picker-option",["isValidValue",m_]),e("set-picker-option",["formatToString",L]),e("set-picker-option",["parseUserInput",G]),e("set-picker-option",["handleClear",z]),(F,X)=>(j(),_e("div",{class:ee([S(p).b(),S(m).b(),{"has-sidebar":!!F.$slots.sidebar||S(b)}])},[Te("div",{class:ee(S(p).e("body-wrapper"))},[at(F.$slots,"sidebar",{class:ee(S(p).e("sidebar"))}),S(b)?(j(),_e("div",{key:0,class:ee(S(p).e("sidebar"))},[(j(!0),_e(an,null,ti(S(s),(te,re)=>(j(),_e("button",{key:re,type:"button",class:ee(S(p).e("shortcut")),onClick:ie=>S(_)(te)},Lt(te.text),11,["onClick"]))),128))],2)):ot("v-if",!0),Te("div",{class:ee(S(p).e("body"))},[Te("div",{class:ee([[S(p).e("content"),S(m).e("content")],"is-left"])},[Te("div",{class:ee(S(m).e("header"))},[Te("button",{type:"button",class:ee([S(p).e("icon-btn"),"d-arrow-left"]),onClick:S(x)},[at(F.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["onClick"]),F.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(O),class:ee([[S(p).e("icon-btn"),{[S(p).is("disabled")]:!S(O)}],"d-arrow-right"]),onClick:S(A)},[at(F.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["disabled","onClick"])):ot("v-if",!0),Te("div",null,Lt(S(C)),1)],2),he(T6,{"selection-mode":"range",date:u.value,"min-date":S(d),"max-date":S(f),"range-state":S(h),"disabled-date":S(a),onChangerange:S(g),onPick:U,onSelect:S(y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),Te("div",{class:ee([[S(p).e("content"),S(m).e("content")],"is-right"])},[Te("div",{class:ee(S(m).e("header"))},[F.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(O),class:ee([[S(p).e("icon-btn"),{"is-disabled":!S(O)}],"d-arrow-left"]),onClick:S(T)},[at(F.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["disabled","onClick"])):ot("v-if",!0),Te("button",{type:"button",class:ee([S(p).e("icon-btn"),"d-arrow-right"]),onClick:S(w)},[at(F.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["onClick"]),Te("div",null,Lt(S(E)),1)],2),he(T6,{"selection-mode":"range",date:c.value,"min-date":S(d),"max-date":S(f),"range-state":S(h),"disabled-date":S(a),onChangerange:S(g),onPick:U,onSelect:S(y)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var Z4e=Vt(Q4e,[["__file","panel-month-range.vue"]]);const J4e=zt({...RF}),eIe=["pick","set-picker-option","calendar-change"],tIe=({unlinkPanels:n,leftDate:e,rightDate:t})=>{const i=()=>{e.value=e.value.subtract(10,"year"),n.value||(t.value=t.value.subtract(10,"year"))},r=()=>{n.value||(e.value=e.value.add(10,"year")),t.value=t.value.add(10,"year")},s=()=>{e.value=e.value.add(10,"year")},a=()=>{t.value=t.value.subtract(10,"year")},o=W(()=>{const d=Math.floor(e.value.year()/10)*10;return`${d}-${d+9}`}),l=W(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),u=W(()=>Math.floor(e.value.year()/10)*10+9),c=W(()=>Math.floor(t.value.year()/10)*10);return{leftPrevYear:i,rightNextYear:r,leftNextYear:s,rightPrevYear:a,leftLabel:o,rightLabel:l,leftYear:u,rightYear:c}},p$="year",nIe=Ne({name:"DatePickerYearRange"}),iIe=Ne({...nIe,props:J4e,emits:eIe,setup(n,{emit:e}){const t=n,{lang:i}=wi(),r=ae(Dn().locale(i.value)),s=ae(r.value.add(10,"year")),{pickerNs:a}=Zt(eD),o=Rt("date-range-picker"),l=W(()=>!!U.length),u=W(()=>[a.b(),o.b(),{"has-sidebar":!!Ls().sidebar||l.value}]),c=W(()=>({content:[a.e("content"),o.e("content"),"is-left"],arrowLeftBtn:[a.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),{[a.is("disabled")]:!x.value},"d-arrow-right"]})),d=W(()=>({content:[a.e("content"),o.e("content"),"is-right"],arrowLeftBtn:[a.e("icon-btn"),{"is-disabled":!x.value},"d-arrow-left"],arrowRightBtn:[a.e("icon-btn"),"d-arrow-right"]})),f=One(i),{leftPrevYear:h,rightNextYear:p,leftNextYear:m,rightPrevYear:g,leftLabel:v,rightLabel:_,leftYear:y,rightYear:b}=tIe({unlinkPanels:$i(t,"unlinkPanels"),leftDate:r,rightDate:s}),x=W(()=>t.unlinkPanels&&b.value>y.value+1),w=ae(),A=ae(),T=ae({endDate:null,selecting:!1}),C=ie=>{T.value=ie},E=(ie,le=!0)=>{const ge=ie.minDate,pe=ie.maxDate;A.value===pe&&w.value===ge||(e("calendar-change",[ge.toDate(),pe&&pe.toDate()]),A.value=pe,w.value=ge,le&&I())},I=(ie=!1)=>{m_([w.value,A.value])&&e("pick",[w.value,A.value],ie)},k=ie=>{T.value.selecting=ie,ie||(T.value.endDate=null)},O=Zt("EP_PICKER_BASE"),{shortcuts:U,disabledDate:z}=O.props,L=$i(O.props,"format"),G=$i(O.props,"defaultValue"),H=()=>{let ie;if(Bt(G.value)){const le=Dn(G.value[0]);let ge=Dn(G.value[1]);return t.unlinkPanels||(ge=le.add(10,p$)),[le,ge]}else G.value?ie=Dn(G.value):ie=Dn();return ie=ie.locale(i.value),[ie,ie.add(10,p$)]};St(()=>G.value,ie=>{if(ie){const le=H();r.value=le[0],s.value=le[1]}},{immediate:!0}),St(()=>t.parsedValue,ie=>{if(ie&&ie.length===2)if(w.value=ie[0],A.value=ie[1],r.value=w.value,t.unlinkPanels&&A.value){const le=w.value.year(),ge=A.value.year();s.value=le===ge?A.value.add(10,"year"):A.value}else s.value=r.value.add(10,"year");else{const le=H();w.value=void 0,A.value=void 0,r.value=le[0],s.value=le[1]}},{immediate:!0});const F=ie=>Bt(ie)?ie.map(le=>Dn(le,L.value).locale(i.value)):Dn(ie,L.value).locale(i.value),X=ie=>Bt(ie)?ie.map(le=>le.format(L.value)):ie.format(L.value),te=ie=>m_(ie)&&(z?!z(ie[0].toDate())&&!z(ie[1].toDate()):!0),re=()=>{const ie=H();r.value=ie[0],s.value=ie[1],A.value=void 0,w.value=void 0,e("pick",null)};return e("set-picker-option",["isValidValue",te]),e("set-picker-option",["parseUserInput",F]),e("set-picker-option",["formatToString",X]),e("set-picker-option",["handleClear",re]),(ie,le)=>(j(),_e("div",{class:ee(S(u))},[Te("div",{class:ee(S(a).e("body-wrapper"))},[at(ie.$slots,"sidebar",{class:ee(S(a).e("sidebar"))}),S(l)?(j(),_e("div",{key:0,class:ee(S(a).e("sidebar"))},[(j(!0),_e(an,null,ti(S(U),(ge,pe)=>(j(),_e("button",{key:pe,type:"button",class:ee(S(a).e("shortcut")),onClick:ye=>S(f)(ge)},Lt(ge.text),11,["onClick"]))),128))],2)):ot("v-if",!0),Te("div",{class:ee(S(a).e("body"))},[Te("div",{class:ee(S(c).content)},[Te("div",{class:ee(S(o).e("header"))},[Te("button",{type:"button",class:ee(S(c).arrowLeftBtn),onClick:S(h)},[at(ie.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["onClick"]),ie.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(x),class:ee(S(c).arrowRightBtn),onClick:S(m)},[at(ie.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["disabled","onClick"])):ot("v-if",!0),Te("div",null,Lt(S(v)),1)],2),he(C6,{"selection-mode":"range",date:r.value,"min-date":w.value,"max-date":A.value,"range-state":T.value,"disabled-date":S(z),onChangerange:C,onPick:E,onSelect:k},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),Te("div",{class:ee(S(d).content)},[Te("div",{class:ee(S(o).e("header"))},[ie.unlinkPanels?(j(),_e("button",{key:0,type:"button",disabled:!S(x),class:ee(S(d).arrowLeftBtn),onClick:S(g)},[at(ie.$slots,"prev-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(n0))]),_:1})])],10,["disabled","onClick"])):ot("v-if",!0),Te("button",{type:"button",class:ee(S(d).arrowRightBtn),onClick:S(p)},[at(ie.$slots,"next-year",{},()=>[he(S(rn),null,{default:Ae(()=>[he(S(i0))]),_:1})])],10,["onClick"]),Te("div",null,Lt(S(_)),1)],2),he(C6,{"selection-mode":"range",date:s.value,"min-date":w.value,"max-date":A.value,"range-state":T.value,"disabled-date":S(z),onChangerange:C,onPick:E,onSelect:k},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var rIe=Vt(iIe,[["__file","panel-year-range.vue"]]);const sIe=function(n){switch(n){case"daterange":case"datetimerange":return q4e;case"monthrange":return Z4e;case"yearrange":return rIe;default:return $4e}};Dn.extend(Kte);Dn.extend(J3e);Dn.extend(MF);Dn.extend(t4e);Dn.extend(i4e);Dn.extend(s4e);Dn.extend(o4e);Dn.extend(u4e);var aIe=Ne({name:"ElDatePicker",install:null,props:M4e,emits:["update:modelValue"],setup(n,{expose:e,emit:t,slots:i}){const r=Rt("picker-panel");ui("ElPopperOptions",Ui($i(n,"popperOptions"))),ui(eD,{slots:i,pickerNs:r});const s=ae();e({focus:()=>{var l;(l=s.value)==null||l.focus()},blur:()=>{var l;(l=s.value)==null||l.blur()},handleOpen:()=>{var l;(l=s.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=s.value)==null||l.handleClose()}});const o=l=>{t("update:modelValue",l)};return()=>{var l;const u=(l=n.format)!=null?l:c4e[n.type]||Xy,c=sIe(n.type);return he(Ine,si(n,{format:u,type:n.type,ref:s,"onUpdate:modelValue":o}),{default:d=>he(c,d,{"prev-month":i["prev-month"],"next-month":i["next-month"],"prev-year":i["prev-year"],"next-year":i["next-year"]}),"range-separator":i["range-separator"]})}}});const oIe=Nn(aIe),OF=Symbol("elDescriptions");var MS=Ne({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:Zt(OF,{})}},render(){var n;const e=yEe(this.cell),t=(((n=this.cell)==null?void 0:n.dirs)||[]).map(v=>{const{dir:_,arg:y,modifiers:b,value:x}=v;return[_,x,y,b]}),{border:i,direction:r}=this.descriptions,s=r==="vertical",a=()=>{var v,_,y;return((y=(_=(v=this.cell)==null?void 0:v.children)==null?void 0:_.label)==null?void 0:y.call(_))||e.label},o=()=>{var v,_,y;return(y=(_=(v=this.cell)==null?void 0:v.children)==null?void 0:_.default)==null?void 0:y.call(_)},l=e.span,u=e.rowspan,c=e.align?`is-${e.align}`:"",d=e.labelAlign?`is-${e.labelAlign}`:c,f=e.className,h=e.labelClassName,p=this.type==="label"&&(e.labelWidth||this.descriptions.labelWidth)||e.width,m={width:ns(p),minWidth:ns(e.minWidth)},g=Rt("descriptions");switch(this.type){case"label":return Vn(ln(this.tag,{style:m,class:[g.e("cell"),g.e("label"),g.is("bordered-label",i),g.is("vertical-label",s),d,h],colSpan:s?l:1,rowspan:s?1:u},a()),t);case"content":return Vn(ln(this.tag,{style:m,class:[g.e("cell"),g.e("content"),g.is("bordered-content",i),g.is("vertical-content",s),c,f],colSpan:s?l:l*2-1,rowspan:s?u*2-1:u},o()),t);default:{const v=a();return Vn(ln("td",{style:m,class:[g.e("cell"),c],colSpan:l,rowspan:u},[na(v)?void 0:ln("span",{class:[g.e("label"),h]},v),ln("span",{class:[g.e("content"),f]},o())]),t)}}}});const lIe=zt({row:{type:et(Array),default:()=>[]}}),uIe=Ne({name:"ElDescriptionsRow"}),cIe=Ne({...uIe,props:lIe,setup(n){const e=Zt(OF,{});return(t,i)=>S(e).direction==="vertical"?(j(),_e(an,{key:0},[Te("tr",null,[(j(!0),_e(an,null,ti(t.row,(r,s)=>(j(),gt(S(MS),{key:`tr1-${s}`,cell:r,tag:"th",type:"label"},null,8,["cell"]))),128))]),Te("tr",null,[(j(!0),_e(an,null,ti(t.row,(r,s)=>(j(),gt(S(MS),{key:`tr2-${s}`,cell:r,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(j(),_e("tr",{key:1},[(j(!0),_e(an,null,ti(t.row,(r,s)=>(j(),_e(an,{key:`tr3-${s}`},[S(e).border?(j(),_e(an,{key:0},[he(S(MS),{cell:r,tag:"td",type:"label"},null,8,["cell"]),he(S(MS),{cell:r,tag:"td",type:"content"},null,8,["cell"])],64)):(j(),gt(S(MS),{key:1,cell:r,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var dIe=Vt(cIe,[["__file","descriptions-row.vue"]]);const fIe=zt({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:ks,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number],default:""}}),hIe=Ne({name:"ElDescriptions"}),pIe=Ne({...hIe,props:fIe,setup(n){const e=n,t=Rt("descriptions"),i=ws(),r=Ls();ui(OF,e);const s=W(()=>[t.b(),t.m(i.value)]),a=(l,u,c,d=!1)=>(l.props||(l.props={}),u>c&&(l.props.span=c),d&&(l.props.span=u),l),o=()=>{if(!r.default)return[];const l=Up(r.default()).filter(p=>{var m;return((m=p==null?void 0:p.type)==null?void 0:m.name)==="ElDescriptionsItem"}),u=[];let c=[],d=e.column,f=0;const h=[];return l.forEach((p,m)=>{var g,v,_;const y=((g=p.props)==null?void 0:g.span)||1,b=((v=p.props)==null?void 0:v.rowspan)||1,x=u.length;if(h[x]||(h[x]=0),b>1)for(let w=1;w<b;w++)h[_=x+w]||(h[_]=0),h[x+w]++,f++;if(h[x]>0&&(d-=h[x],h[x]=0),m<l.length-1&&(f+=y>d?d:y),m===l.length-1){const w=e.column-f%e.column;c.push(a(p,w,d,!0)),u.push(c);return}y<d?(d-=y,c.push(p)):(c.push(a(p,y,d)),u.push(c),d=e.column,c=[])}),u};return(l,u)=>(j(),_e("div",{class:ee(S(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(j(),_e("div",{key:0,class:ee(S(t).e("header"))},[Te("div",{class:ee(S(t).e("title"))},[at(l.$slots,"title",{},()=>[An(Lt(l.title),1)])],2),Te("div",{class:ee(S(t).e("extra"))},[at(l.$slots,"extra",{},()=>[An(Lt(l.extra),1)])],2)],2)):ot("v-if",!0),Te("div",{class:ee(S(t).e("body"))},[Te("table",{class:ee([S(t).e("table"),S(t).is("bordered",l.border)])},[Te("tbody",null,[(j(!0),_e(an,null,ti(o(),(c,d)=>(j(),gt(dIe,{key:d,row:c},null,8,["row"]))),128))])],2)],2)],2))}});var mIe=Vt(pIe,[["__file","description.vue"]]);const gIe=zt({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}),Bne=Ne({name:"ElDescriptionsItem",props:gIe}),vIe=Nn(mIe,{DescriptionsItem:Bne}),yIe=Xr(Bne),NF=n=>{if(!n)return{onClick:qi,onMousedown:qi,onMouseup:qi};let e=!1,t=!1;return{onClick:a=>{e&&t&&n(a),e=t=!1},onMousedown:a=>{e=a.target===a.currentTarget},onMouseup:a=>{t=a.target===a.currentTarget}}},_Ie=zt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:et([String,Array,Object])},zIndex:{type:et([String,Number])}}),bIe={click:n=>n instanceof MouseEvent},SIe="overlay";var xIe=Ne({name:"ElOverlay",props:_Ie,emits:bIe,setup(n,{slots:e,emit:t}){const i=Rt(SIe),r=l=>{t("click",l)},{onClick:s,onMousedown:a,onMouseup:o}=NF(n.customMaskEvent?void 0:r);return()=>n.mask?he("div",{class:[i.b(),n.overlayClass],style:{zIndex:n.zIndex},onClick:s,onMousedown:a,onMouseup:o},[at(e,"default")],Pu.STYLE|Pu.CLASS|Pu.PROPS,["onClick","onMouseup","onMousedown"]):ln("div",{class:n.overlayClass,style:{zIndex:n.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[at(e,"default")])}});const BF=xIe,Fne=Symbol("dialogInjectionKey"),Une=zt({center:Boolean,alignCenter:Boolean,closeIcon:{type:nr},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),wIe={close:()=>!0},zne=(n,e,t,i)=>{let r={offsetX:0,offsetY:0};const s=u=>{const c=u.clientX,d=u.clientY,{offsetX:f,offsetY:h}=r,p=n.value.getBoundingClientRect(),m=p.left,g=p.top,v=p.width,_=p.height,y=document.documentElement.clientWidth,b=document.documentElement.clientHeight,x=-m+f,w=-g+h,A=y-m-v+f,T=b-g-_+h,C=I=>{let k=f+I.clientX-c,O=h+I.clientY-d;i!=null&&i.value||(k=Math.min(Math.max(k,x),A),O=Math.min(Math.max(O,w),T)),r={offsetX:k,offsetY:O},n.value&&(n.value.style.transform=`translate(${ns(k)}, ${ns(O)})`)},E=()=>{document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",E)};document.addEventListener("mousemove",C),document.addEventListener("mouseup",E)},a=()=>{e.value&&n.value&&e.value.addEventListener("mousedown",s)},o=()=>{e.value&&n.value&&e.value.removeEventListener("mousedown",s)},l=()=>{r={offsetX:0,offsetY:0},n.value&&(n.value.style.transform="none")};return Ln(()=>{ya(()=>{t.value?a():o()})}),Vi(()=>{o()}),{resetPosition:l}},tD=(...n)=>e=>{n.forEach(t=>{pn(t)?t(e):t.value=e})},TIe=Ne({name:"ElDialogContent"}),CIe=Ne({...TIe,props:Une,emits:wIe,setup(n,{expose:e}){const t=n,{t:i}=wi(),{Close:r}=oF,{dialogRef:s,headerRef:a,bodyId:o,ns:l,style:u}=Zt(Fne),{focusTrapRef:c}=Zt(hF),d=W(()=>[l.b(),l.is("fullscreen",t.fullscreen),l.is("draggable",t.draggable),l.is("align-center",t.alignCenter),{[l.m("center")]:t.center}]),f=tD(c,s),h=W(()=>t.draggable),p=W(()=>t.overflow),{resetPosition:m}=zne(s,a,h,p);return e({resetPosition:m}),(g,v)=>(j(),_e("div",{ref:S(f),class:ee(S(d)),style:Jt(S(u)),tabindex:"-1"},[Te("header",{ref_key:"headerRef",ref:a,class:ee([S(l).e("header"),{"show-close":g.showClose}])},[at(g.$slots,"header",{},()=>[Te("span",{role:"heading","aria-level":g.ariaLevel,class:ee(S(l).e("title"))},Lt(g.title),11,["aria-level"])]),g.showClose?(j(),_e("button",{key:0,"aria-label":S(i)("el.dialog.close"),class:ee(S(l).e("headerbtn")),type:"button",onClick:_=>g.$emit("close")},[he(S(rn),{class:ee(S(l).e("close"))},{default:Ae(()=>[(j(),gt(ei(g.closeIcon||S(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):ot("v-if",!0)],2),Te("div",{id:S(o),class:ee(S(l).e("body"))},[at(g.$slots,"default")],10,["id"]),g.$slots.footer?(j(),_e("footer",{key:0,class:ee(S(l).e("footer"))},[at(g.$slots,"footer")],2)):ot("v-if",!0)],6))}});var AIe=Vt(CIe,[["__file","dialog-content.vue"]]);const Hne=zt({...Une,appendToBody:Boolean,appendTo:{type:et([String,Object]),default:"body"},beforeClose:{type:et(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Vne={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[$n]:n=>fr(n),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},FF=(n,e={})=>{br(n)||Xs("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Rt("popup"),i=W(()=>t.bm("parent","hidden"));if(!xi||bl(document.body,i.value))return;let r=0,s=!1,a="0";const o=()=>{setTimeout(()=>{typeof document>"u"||(To(document==null?void 0:document.body,i.value),s&&document&&(document.body.style.width=a))},200)};St(n,l=>{if(!l){o();return}s=!bl(document.body,i.value),s&&(a=document.body.style.width),r=Jee(t.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,c=Uf(document.body,"overflowY");r>0&&(u||c==="scroll")&&s&&(document.body.style.width=`calc(100% - ${r}px)`),$u(document.body,i.value)}),jZ(()=>o())},$ne=(n,e)=>{var t;const r=Qn().emit,{nextZIndex:s}=db();let a="";const o=Oa(),l=Oa(),u=ae(!1),c=ae(!1),d=ae(!1),f=ae((t=n.zIndex)!=null?t:s());let h,p;const m=WI("namespace",qx),g=W(()=>{const z={},L=`--${m.value}-dialog`;return n.fullscreen||(n.top&&(z[`${L}-margin-top`]=n.top),n.width&&(z[`${L}-width`]=ns(n.width))),z}),v=W(()=>n.alignCenter?{display:"flex"}:{});function _(){r("opened")}function y(){r("closed"),r($n,!1),n.destroyOnClose&&(d.value=!1)}function b(){r("close")}function x(){p==null||p(),h==null||h(),n.openDelay&&n.openDelay>0?{stop:h}=Lg(()=>C(),n.openDelay):C()}function w(){h==null||h(),p==null||p(),n.closeDelay&&n.closeDelay>0?{stop:p}=Lg(()=>E(),n.closeDelay):E()}function A(){function z(L){L||(c.value=!0,u.value=!1)}n.beforeClose?n.beforeClose(z):w()}function T(){n.closeOnClickModal&&A()}function C(){xi&&(u.value=!0)}function E(){u.value=!1}function I(){r("openAutoFocus")}function k(){r("closeAutoFocus")}function O(z){var L;((L=z.detail)==null?void 0:L.focusReason)==="pointer"&&z.preventDefault()}n.lockScroll&&FF(u);function U(){n.closeOnPressEscape&&A()}return St(()=>n.modelValue,z=>{z?(c.value=!1,x(),d.value=!0,f.value=Oee(n.zIndex)?s():f.value++,cn(()=>{r("open"),e.value&&(e.value.scrollTop=0)})):u.value&&w()}),St(()=>n.fullscreen,z=>{e.value&&(z?(a=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=a)}),Ln(()=>{n.modelValue&&(u.value=!0,d.value=!0,x())}),{afterEnter:_,afterLeave:y,beforeLeave:b,handleClose:A,onModalClick:T,close:w,doClose:E,onOpenAutoFocus:I,onCloseAutoFocus:k,onCloseRequested:U,onFocusoutPrevented:O,titleId:o,bodyId:l,closed:c,style:g,overlayDialogStyle:v,rendered:d,visible:u,zIndex:f}},EIe=Ne({name:"ElDialog",inheritAttrs:!1}),MIe=Ne({...EIe,props:Hne,emits:Vne,setup(n,{expose:e}){const t=n,i=Ls();Bp({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},W(()=>!!i.title));const r=Rt("dialog"),s=ae(),a=ae(),o=ae(),{visible:l,titleId:u,bodyId:c,style:d,overlayDialogStyle:f,rendered:h,zIndex:p,afterEnter:m,afterLeave:g,beforeLeave:v,handleClose:_,onModalClick:y,onOpenAutoFocus:b,onCloseAutoFocus:x,onCloseRequested:w,onFocusoutPrevented:A}=$ne(t,s);ui(Fne,{dialogRef:s,headerRef:a,bodyId:c,ns:r,rendered:h,style:d});const T=NF(y),C=W(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:o,resetPosition:()=>{var I;(I=o.value)==null||I.resetPosition()}}),(I,k)=>(j(),gt(S(pb),{to:I.appendTo,disabled:I.appendTo!=="body"?!1:!I.appendToBody},{default:Ae(()=>[he(Ks,{name:"dialog-fade",onAfterEnter:S(m),onAfterLeave:S(g),onBeforeLeave:S(v),persisted:""},{default:Ae(()=>[Vn(he(S(BF),{"custom-mask-event":"",mask:I.modal,"overlay-class":I.modalClass,"z-index":S(p)},{default:Ae(()=>[Te("div",{role:"dialog","aria-modal":"true","aria-label":I.title||void 0,"aria-labelledby":I.title?void 0:S(u),"aria-describedby":S(c),class:ee(`${S(r).namespace.value}-overlay-dialog`),style:Jt(S(f)),onClick:S(T).onClick,onMousedown:S(T).onMousedown,onMouseup:S(T).onMouseup},[he(S(hb),{loop:"",trapped:S(l),"focus-start-el":"container",onFocusAfterTrapped:S(b),onFocusAfterReleased:S(x),onFocusoutPrevented:S(A),onReleaseRequested:S(w)},{default:Ae(()=>[S(h)?(j(),gt(AIe,si({key:0,ref_key:"dialogContentRef",ref:o},I.$attrs,{center:I.center,"align-center":I.alignCenter,"close-icon":I.closeIcon,draggable:S(C),overflow:I.overflow,fullscreen:I.fullscreen,"show-close":I.showClose,title:I.title,"aria-level":I.headerAriaLevel,onClose:S(_)}),tc({header:Ae(()=>[I.$slots.title?at(I.$slots,"title",{key:1}):at(I.$slots,"header",{key:0,close:S(_),titleId:S(u),titleClass:S(r).e("title")})]),default:Ae(()=>[at(I.$slots,"default")]),_:2},[I.$slots.footer?{name:"footer",fn:Ae(()=>[at(I.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):ot("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Oi,S(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var IIe=Vt(MIe,[["__file","dialog.vue"]]);const DIe=Nn(IIe),RIe=zt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:et(String),default:"solid"}}),PIe=Ne({name:"ElDivider"}),kIe=Ne({...PIe,props:RIe,setup(n){const e=n,t=Rt("divider"),i=W(()=>t.cssVar({"border-style":e.borderStyle}));return(r,s)=>(j(),_e("div",{class:ee([S(t).b(),S(t).m(r.direction)]),style:Jt(S(i)),role:"separator"},[r.$slots.default&&r.direction!=="vertical"?(j(),_e("div",{key:0,class:ee([S(t).e("text"),S(t).is(r.contentPosition)])},[at(r.$slots,"default")],2)):ot("v-if",!0)],6))}});var LIe=Vt(kIe,[["__file","divider.vue"]]);const Gne=Nn(LIe),OIe=zt({...Hne,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),NIe=Vne,BIe=Ne({name:"ElDrawer",inheritAttrs:!1}),FIe=Ne({...BIe,props:OIe,emits:NIe,setup(n,{expose:e}){const t=n,i=Ls();Bp({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},W(()=>!!i.title));const r=ae(),s=ae(),a=Rt("drawer"),{t:o}=wi(),{afterEnter:l,afterLeave:u,beforeLeave:c,visible:d,rendered:f,titleId:h,bodyId:p,zIndex:m,onModalClick:g,onOpenAutoFocus:v,onCloseAutoFocus:_,onFocusoutPrevented:y,onCloseRequested:b,handleClose:x}=$ne(t,r),w=W(()=>t.direction==="rtl"||t.direction==="ltr"),A=W(()=>ns(t.size));return e({handleClose:x,afterEnter:l,afterLeave:u}),(T,C)=>(j(),gt(S(pb),{to:T.appendTo,disabled:T.appendTo!=="body"?!1:!T.appendToBody},{default:Ae(()=>[he(Ks,{name:S(a).b("fade"),onAfterEnter:S(l),onAfterLeave:S(u),onBeforeLeave:S(c),persisted:""},{default:Ae(()=>[Vn(he(S(BF),{mask:T.modal,"overlay-class":T.modalClass,"z-index":S(m),onClick:S(g)},{default:Ae(()=>[he(S(hb),{loop:"",trapped:S(d),"focus-trap-el":r.value,"focus-start-el":s.value,onFocusAfterTrapped:S(v),onFocusAfterReleased:S(_),onFocusoutPrevented:S(y),onReleaseRequested:S(b)},{default:Ae(()=>[Te("div",si({ref_key:"drawerRef",ref:r,"aria-modal":"true","aria-label":T.title||void 0,"aria-labelledby":T.title?void 0:S(h),"aria-describedby":S(p)},T.$attrs,{class:[S(a).b(),T.direction,S(d)&&"open"],style:S(w)?"width: "+S(A):"height: "+S(A),role:"dialog",onClick:wn(()=>{},["stop"])}),[Te("span",{ref_key:"focusStartRef",ref:s,class:ee(S(a).e("sr-focus")),tabindex:"-1"},null,2),T.withHeader?(j(),_e("header",{key:0,class:ee(S(a).e("header"))},[T.$slots.title?at(T.$slots,"title",{key:1},()=>[ot(" DEPRECATED SLOT ")]):at(T.$slots,"header",{key:0,close:S(x),titleId:S(h),titleClass:S(a).e("title")},()=>[T.$slots.title?ot("v-if",!0):(j(),_e("span",{key:0,id:S(h),role:"heading","aria-level":T.headerAriaLevel,class:ee(S(a).e("title"))},Lt(T.title),11,["id","aria-level"]))]),T.showClose?(j(),_e("button",{key:2,"aria-label":S(o)("el.drawer.close"),class:ee(S(a).e("close-btn")),type:"button",onClick:S(x)},[he(S(rn),{class:ee(S(a).e("close"))},{default:Ae(()=>[he(S(qc))]),_:1},8,["class"])],10,["aria-label","onClick"])):ot("v-if",!0)],2)):ot("v-if",!0),S(f)?(j(),_e("div",{key:1,id:S(p),class:ee(S(a).e("body"))},[at(T.$slots,"default")],10,["id"])):ot("v-if",!0),T.$slots.footer?(j(),_e("div",{key:2,class:ee(S(a).e("footer"))},[at(T.$slots,"footer")],2)):ot("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Oi,S(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var UIe=Vt(FIe,[["__file","drawer.vue"]]);const zIe=Nn(UIe),HIe=Ne({inheritAttrs:!1});function VIe(n,e,t,i,r,s){return at(n.$slots,"default")}var $Ie=Vt(HIe,[["render",VIe],["__file","collection.vue"]]);const GIe=Ne({name:"ElCollectionItem",inheritAttrs:!1});function WIe(n,e,t,i,r,s){return at(n.$slots,"default")}var qIe=Vt(GIe,[["render",WIe],["__file","collection-item.vue"]]);const Wne="data-el-collection-item",qne=n=>{const e=`El${n}Collection`,t=`${e}Item`,i=Symbol(e),r=Symbol(t),s={...$Ie,name:e,setup(){const o=ae(null),l=new Map;ui(i,{itemMap:l,getItems:()=>{const c=S(o);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${Wne}]`));return[...l.values()].sort((h,p)=>d.indexOf(h.ref)-d.indexOf(p.ref))},collectionRef:o})}},a={...qIe,name:t,setup(o,{attrs:l}){const u=ae(null),c=Zt(i,void 0);ui(r,{collectionItemRef:u}),Ln(()=>{const d=S(u);d&&c.itemMap.set(d,{ref:d,...l})}),Vi(()=>{const d=S(u);c.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:r,ElCollection:s,ElCollectionItem:a}},jIe=zt({style:{type:et([String,Array,Object])},currentTabId:{type:et(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:et(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:KIe,ElCollectionItem:XIe,COLLECTION_INJECTION_KEY:UF,COLLECTION_ITEM_INJECTION_KEY:YIe}=qne("RovingFocusGroup"),zF=Symbol("elRovingFocusGroup"),jne=Symbol("elRovingFocusGroupItem"),QIe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ZIe=(n,e)=>{if(e!=="rtl")return n;switch(n){case Kt.right:return Kt.left;case Kt.left:return Kt.right;default:return n}},JIe=(n,e,t)=>{const i=ZIe(n.code,t);if(!(e==="vertical"&&[Kt.left,Kt.right].includes(i))&&!(e==="horizontal"&&[Kt.up,Kt.down].includes(i)))return QIe[i]},eDe=(n,e)=>n.map((t,i)=>n[(i+e)%n.length]),HF=n=>{const{activeElement:e}=document;for(const t of n)if(t===e||(t.focus(),e!==document.activeElement))return},m$="currentTabIdChange",g$="rovingFocusGroup.entryFocus",tDe={bubbles:!1,cancelable:!0},nDe=Ne({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:jIe,emits:[m$,"entryFocus"],setup(n,{emit:e}){var t;const i=ae((t=n.currentTabId||n.defaultCurrentTabId)!=null?t:null),r=ae(!1),s=ae(!1),a=ae(null),{getItems:o}=Zt(UF,void 0),l=W(()=>[{outline:"none"},n.style]),u=m=>{e(m$,m)},c=()=>{r.value=!0},d=es(m=>{var g;(g=n.onMousedown)==null||g.call(n,m)},()=>{s.value=!0}),f=es(m=>{var g;(g=n.onFocus)==null||g.call(n,m)},m=>{const g=!S(s),{target:v,currentTarget:_}=m;if(v===_&&g&&!S(r)){const y=new Event(g$,tDe);if(_==null||_.dispatchEvent(y),!y.defaultPrevented){const b=o().filter(C=>C.focusable),x=b.find(C=>C.active),w=b.find(C=>C.id===S(i)),T=[x,w,...b].filter(Boolean).map(C=>C.ref);HF(T)}}s.value=!1}),h=es(m=>{var g;(g=n.onBlur)==null||g.call(n,m)},()=>{r.value=!1}),p=(...m)=>{e("entryFocus",...m)};ui(zF,{currentTabbedId:sb(i),loop:$i(n,"loop"),tabIndex:W(()=>S(r)?-1:0),rovingFocusGroupRef:a,rovingFocusGroupRootStyle:l,orientation:$i(n,"orientation"),dir:$i(n,"dir"),onItemFocus:u,onItemShiftTab:c,onBlur:h,onFocus:f,onMousedown:d}),St(()=>n.currentTabId,m=>{i.value=m??null}),Yi(a,g$,p)}});function iDe(n,e,t,i,r,s){return at(n.$slots,"default")}var rDe=Vt(nDe,[["render",iDe],["__file","roving-focus-group-impl.vue"]]);const sDe=Ne({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:KIe,ElRovingFocusGroupImpl:rDe}});function aDe(n,e,t,i,r,s){const a=Ht("el-roving-focus-group-impl"),o=Ht("el-focus-group-collection");return j(),gt(o,null,{default:Ae(()=>[he(a,Lc(Qp(n.$attrs)),{default:Ae(()=>[at(n.$slots,"default")]),_:3},16)]),_:3})}var oDe=Vt(sDe,[["render",aDe],["__file","roving-focus-group.vue"]]);const _M=zt({trigger:tw.trigger,triggerKeys:{type:et(Array),default:()=>[Kt.enter,Kt.numpadEnter,Kt.space,Kt.down]},effect:{...ua.effect,default:"light"},type:{type:et(String)},placement:{type:et(String),default:"bottom"},popperOptions:{type:et(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:et([Number,String]),default:0},maxHeight:{type:et([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:et(Object)},teleported:ua.teleported}),Kne=zt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:nr}}),lDe=zt({onKeydown:{type:et(Function)}}),uDe=[Kt.down,Kt.pageDown,Kt.home],Xne=[Kt.up,Kt.pageUp,Kt.end],cDe=[...uDe,...Xne],{ElCollection:dDe,ElCollectionItem:fDe,COLLECTION_INJECTION_KEY:hDe,COLLECTION_ITEM_INJECTION_KEY:pDe}=qne("Dropdown"),nD=Symbol("elDropdown"),{ButtonGroup:mDe}=_a,gDe=Ne({name:"ElDropdown",components:{ElButton:_a,ElButtonGroup:mDe,ElScrollbar:nf,ElDropdownCollection:dDe,ElTooltip:Ja,ElRovingFocusGroup:oDe,ElOnlyChild:mte,ElIcon:rn,ArrowDown:Sh},props:_M,emits:["visible-change","click","command"],setup(n,{emit:e}){const t=Qn(),i=Rt("dropdown"),{t:r}=wi(),s=ae(),a=ae(),o=ae(null),l=ae(null),u=ae(null),c=ae(null),d=ae(!1),f=W(()=>({maxHeight:ns(n.maxHeight)})),h=W(()=>[i.m(b.value)]),p=W(()=>yo(n.trigger)),m=Oa().value,g=W(()=>n.id||m);St([s,p],([L,G],[H])=>{var F,X,te;(F=H==null?void 0:H.$el)!=null&&F.removeEventListener&&H.$el.removeEventListener("pointerenter",w),(X=L==null?void 0:L.$el)!=null&&X.removeEventListener&&L.$el.removeEventListener("pointerenter",w),(te=L==null?void 0:L.$el)!=null&&te.addEventListener&&G.includes("hover")&&L.$el.addEventListener("pointerenter",w)},{immediate:!0}),Vi(()=>{var L,G;(G=(L=s.value)==null?void 0:L.$el)!=null&&G.removeEventListener&&s.value.$el.removeEventListener("pointerenter",w)});function v(){_()}function _(){var L;(L=o.value)==null||L.onClose()}function y(){var L;(L=o.value)==null||L.onOpen()}const b=ws();function x(...L){e("command",...L)}function w(){var L,G;(G=(L=s.value)==null?void 0:L.$el)==null||G.focus()}function A(){}function T(){const L=S(l);p.value.includes("hover")&&(L==null||L.focus()),c.value=null}function C(L){c.value=L}function E(L){d.value||(L.preventDefault(),L.stopImmediatePropagation())}function I(){e("visible-change",!0)}function k(L){(L==null?void 0:L.type)==="keydown"&&l.value.focus()}function O(){e("visible-change",!1)}return ui(nD,{contentRef:l,role:W(()=>n.role),triggerId:g,isUsingKeyboard:d,onItemEnter:A,onItemLeave:T}),ui("elDropdown",{instance:t,dropdownSize:b,handleClick:v,commandHandler:x,trigger:$i(n,"trigger"),hideOnClick:$i(n,"hideOnClick")}),{t:r,ns:i,scrollbar:u,wrapStyle:f,dropdownTriggerKls:h,dropdownSize:b,triggerId:g,currentTabId:c,handleCurrentTabIdChange:C,handlerMainButtonClick:L=>{e("click",L)},handleEntryFocus:E,handleClose:_,handleOpen:y,handleBeforeShowTooltip:I,handleShowTooltip:k,handleBeforeHideTooltip:O,onFocusAfterTrapped:L=>{var G,H;L.preventDefault(),(H=(G=l.value)==null?void 0:G.focus)==null||H.call(G,{preventScroll:!0})},popperRef:o,contentRef:l,triggeringElementRef:s,referenceElementRef:a}}});function vDe(n,e,t,i,r,s){var a;const o=Ht("el-dropdown-collection"),l=Ht("el-roving-focus-group"),u=Ht("el-scrollbar"),c=Ht("el-only-child"),d=Ht("el-tooltip"),f=Ht("el-button"),h=Ht("arrow-down"),p=Ht("el-icon"),m=Ht("el-button-group");return j(),_e("div",{class:ee([n.ns.b(),n.ns.is("disabled",n.disabled)])},[he(d,{ref:"popperRef",role:n.role,effect:n.effect,"fallback-placements":["bottom","top"],"popper-options":n.popperOptions,"gpu-acceleration":!1,"hide-after":n.trigger==="hover"?n.hideTimeout:0,"manual-mode":!0,placement:n.placement,"popper-class":[n.ns.e("popper"),n.popperClass],"reference-element":(a=n.referenceElementRef)==null?void 0:a.$el,trigger:n.trigger,"trigger-keys":n.triggerKeys,"trigger-target-el":n.contentRef,"show-after":n.trigger==="hover"?n.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":n.triggeringElementRef,"virtual-triggering":n.splitButton,disabled:n.disabled,transition:`${n.ns.namespace.value}-zoom-in-top`,teleported:n.teleported,pure:"",persistent:"",onBeforeShow:n.handleBeforeShowTooltip,onShow:n.handleShowTooltip,onBeforeHide:n.handleBeforeHideTooltip},tc({content:Ae(()=>[he(u,{ref:"scrollbar","wrap-style":n.wrapStyle,tag:"div","view-class":n.ns.e("list")},{default:Ae(()=>[he(l,{loop:n.loop,"current-tab-id":n.currentTabId,orientation:"horizontal",onCurrentTabIdChange:n.handleCurrentTabIdChange,onEntryFocus:n.handleEntryFocus},{default:Ae(()=>[he(o,null,{default:Ae(()=>[at(n.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[n.splitButton?void 0:{name:"default",fn:Ae(()=>[he(c,{id:n.triggerId,ref:"triggeringElementRef",role:"button",tabindex:n.tabindex},{default:Ae(()=>[at(n.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),n.splitButton?(j(),gt(m,{key:0},{default:Ae(()=>[he(f,si({ref:"referenceElementRef"},n.buttonProps,{size:n.dropdownSize,type:n.type,disabled:n.disabled,tabindex:n.tabindex,onClick:n.handlerMainButtonClick}),{default:Ae(()=>[at(n.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),he(f,si({id:n.triggerId,ref:"triggeringElementRef"},n.buttonProps,{role:"button",size:n.dropdownSize,type:n.type,class:n.ns.e("caret-button"),disabled:n.disabled,tabindex:n.tabindex,"aria-label":n.t("el.dropdown.toggleDropdown")}),{default:Ae(()=>[he(p,{class:ee(n.ns.e("icon"))},{default:Ae(()=>[he(h)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):ot("v-if",!0)],2)}var yDe=Vt(gDe,[["render",vDe],["__file","dropdown.vue"]]);const _De=Ne({components:{ElRovingFocusCollectionItem:XIe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(n,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:r,onItemShiftTab:s}=Zt(zF,void 0),{getItems:a}=Zt(UF,void 0),o=Oa(),l=ae(null),u=es(h=>{e("mousedown",h)},h=>{n.focusable?r(S(o)):h.preventDefault()}),c=es(h=>{e("focus",h)},()=>{r(S(o))}),d=es(h=>{e("keydown",h)},h=>{const{code:p,shiftKey:m,target:g,currentTarget:v}=h;if(p===Kt.tab&&m){s();return}if(g!==v)return;const _=JIe(h);if(_){h.preventDefault();let b=a().filter(x=>x.focusable).map(x=>x.ref);switch(_){case"last":{b.reverse();break}case"prev":case"next":{_==="prev"&&b.reverse();const x=b.indexOf(v);b=i.value?eDe(b,x+1):b.slice(x+1);break}}cn(()=>{HF(b)})}}),f=W(()=>t.value===S(o));return ui(jne,{rovingFocusGroupItemRef:l,tabIndex:W(()=>S(f)?0:-1),handleMousedown:u,handleFocus:c,handleKeydown:d}),{id:o,handleKeydown:d,handleFocus:c,handleMousedown:u}}});function bDe(n,e,t,i,r,s){const a=Ht("el-roving-focus-collection-item");return j(),gt(a,{id:n.id,focusable:n.focusable,active:n.active},{default:Ae(()=>[at(n.$slots,"default")]),_:3},8,["id","focusable","active"])}var SDe=Vt(_De,[["render",bDe],["__file","roving-focus-item.vue"]]);const xDe=Ne({name:"DropdownItemImpl",components:{ElIcon:rn},props:Kne,emits:["pointermove","pointerleave","click","clickimpl"],setup(n,{emit:e}){const t=Rt("dropdown"),{role:i}=Zt(nD,void 0),{collectionItemRef:r}=Zt(pDe,void 0),{collectionItemRef:s}=Zt(YIe,void 0),{rovingFocusGroupItemRef:a,tabIndex:o,handleFocus:l,handleKeydown:u,handleMousedown:c}=Zt(jne,void 0),d=tD(r,s,a),f=W(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),h=es(p=>{if([Kt.enter,Kt.numpadEnter,Kt.space].includes(p.code))return p.preventDefault(),p.stopImmediatePropagation(),e("clickimpl",p),!0},u);return{ns:t,itemRef:d,dataset:{[Wne]:""},role:f,tabIndex:o,handleFocus:l,handleKeydown:h,handleMousedown:c}}});function wDe(n,e,t,i,r,s){const a=Ht("el-icon");return j(),_e(an,null,[n.divided?(j(),_e("li",{key:0,role:"separator",class:ee(n.ns.bem("menu","item","divided"))},null,2)):ot("v-if",!0),Te("li",si({ref:n.itemRef},{...n.dataset,...n.$attrs},{"aria-disabled":n.disabled,class:[n.ns.be("menu","item"),n.ns.is("disabled",n.disabled)],tabindex:n.tabIndex,role:n.role,onClick:o=>n.$emit("clickimpl",o),onFocus:n.handleFocus,onKeydown:wn(n.handleKeydown,["self"]),onMousedown:n.handleMousedown,onPointermove:o=>n.$emit("pointermove",o),onPointerleave:o=>n.$emit("pointerleave",o)}),[n.icon?(j(),gt(a,{key:0},{default:Ae(()=>[(j(),gt(ei(n.icon)))]),_:1})):ot("v-if",!0),at(n.$slots,"default")],16,["aria-disabled","tabindex","role","onClick","onFocus","onKeydown","onMousedown","onPointermove","onPointerleave"])],64)}var TDe=Vt(xDe,[["render",wDe],["__file","dropdown-item-impl.vue"]]);const Yne=()=>{const n=Zt("elDropdown",{}),e=W(()=>n==null?void 0:n.dropdownSize);return{elDropdown:n,_elDropdownSize:e}},CDe=Ne({name:"ElDropdownItem",components:{ElDropdownCollectionItem:fDe,ElRovingFocusItem:SDe,ElDropdownItemImpl:TDe},inheritAttrs:!1,props:Kne,emits:["pointermove","pointerleave","click"],setup(n,{emit:e,attrs:t}){const{elDropdown:i}=Yne(),r=Qn(),s=ae(null),a=W(()=>{var h,p;return(p=(h=S(s))==null?void 0:h.textContent)!=null?p:""}),{onItemEnter:o,onItemLeave:l}=Zt(nD,void 0),u=es(h=>(e("pointermove",h),h.defaultPrevented),qV(h=>{if(n.disabled){l(h);return}const p=h.currentTarget;p===document.activeElement||p.contains(document.activeElement)||(o(h),h.defaultPrevented||p==null||p.focus())})),c=es(h=>(e("pointerleave",h),h.defaultPrevented),qV(l)),d=es(h=>{if(!n.disabled)return e("click",h),h.type!=="keydown"&&h.defaultPrevented},h=>{var p,m,g;if(n.disabled){h.stopImmediatePropagation();return}(p=i==null?void 0:i.hideOnClick)!=null&&p.value&&((m=i.handleClick)==null||m.call(i)),(g=i.commandHandler)==null||g.call(i,n.command,r,h)}),f=W(()=>({...n,...t}));return{handleClick:d,handlePointerMove:u,handlePointerLeave:c,textContent:a,propsAndAttrs:f}}});function ADe(n,e,t,i,r,s){var a;const o=Ht("el-dropdown-item-impl"),l=Ht("el-roving-focus-item"),u=Ht("el-dropdown-collection-item");return j(),gt(u,{disabled:n.disabled,"text-value":(a=n.textValue)!=null?a:n.textContent},{default:Ae(()=>[he(l,{focusable:!n.disabled},{default:Ae(()=>[he(o,si(n.propsAndAttrs,{onPointerleave:n.handlePointerLeave,onPointermove:n.handlePointerMove,onClickimpl:n.handleClick}),{default:Ae(()=>[at(n.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Qne=Vt(CDe,[["render",ADe],["__file","dropdown-item.vue"]]);const EDe=Ne({name:"ElDropdownMenu",props:lDe,setup(n){const e=Rt("dropdown"),{_elDropdownSize:t}=Yne(),i=t.value,{focusTrapRef:r,onKeydown:s}=Zt(hF,void 0),{contentRef:a,role:o,triggerId:l}=Zt(nD,void 0),{collectionRef:u,getItems:c}=Zt(hDe,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:f,tabIndex:h,onBlur:p,onFocus:m,onMousedown:g}=Zt(zF,void 0),{collectionRef:v}=Zt(UF,void 0),_=W(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),y=tD(a,u,r,d,v),b=es(w=>{var A;(A=n.onKeydown)==null||A.call(n,w)},w=>{const{currentTarget:A,code:T,target:C}=w;if(A.contains(C),Kt.tab===T&&w.stopImmediatePropagation(),w.preventDefault(),C!==S(a)||!cDe.includes(T))return;const I=c().filter(k=>!k.disabled).map(k=>k.ref);Xne.includes(T)&&I.reverse(),HF(I)});return{size:i,rovingFocusGroupRootStyle:f,tabIndex:h,dropdownKls:_,role:o,triggerId:l,dropdownListWrapperRef:y,handleKeydown:w=>{b(w),s(w)},onBlur:p,onFocus:m,onMousedown:g}}});function MDe(n,e,t,i,r,s){return j(),_e("ul",{ref:n.dropdownListWrapperRef,class:ee(n.dropdownKls),style:Jt(n.rovingFocusGroupRootStyle),tabindex:-1,role:n.role,"aria-labelledby":n.triggerId,onBlur:n.onBlur,onFocus:n.onFocus,onKeydown:wn(n.handleKeydown,["self"]),onMousedown:wn(n.onMousedown,["self"])},[at(n.$slots,"default")],46,["role","aria-labelledby","onBlur","onFocus","onKeydown","onMousedown"])}var Zne=Vt(EDe,[["render",MDe],["__file","dropdown-menu.vue"]]);const IDe=Nn(yDe,{DropdownItem:Qne,DropdownMenu:Zne}),DDe=Xr(Qne),RDe=Xr(Zne),PDe=Ne({name:"ImgEmpty"}),kDe=Ne({...PDe,setup(n){const e=Rt("empty"),t=Oa();return(i,r)=>(j(),_e("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[Te("defs",null,[Te("linearGradient",{id:`linearGradient-1-${S(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[Te("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),Te("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),Te("linearGradient",{id:`linearGradient-2-${S(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[Te("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),Te("stop",{"stop-color":`var(${S(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),Te("rect",{id:`path-3-${S(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),Te("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[Te("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[Te("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[Te("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${S(e).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),Te("polygon",{id:"Rectangle-Copy-14",fill:`var(${S(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),Te("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[Te("polygon",{id:"Rectangle-Copy-10",fill:`var(${S(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),Te("polygon",{id:"Rectangle-Copy-11",fill:`var(${S(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),Te("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${S(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),Te("polygon",{id:"Rectangle-Copy-13",fill:`var(${S(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),Te("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${S(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),Te("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[Te("use",{id:"Mask",fill:`var(${S(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${S(t)}`},null,8,["fill","xlink:href"]),Te("polygon",{id:"Rectangle-Copy",fill:`var(${S(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${S(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),Te("polygon",{id:"Rectangle-Copy-18",fill:`var(${S(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var LDe=Vt(kDe,[["__file","img-empty.vue"]]);const ODe=zt({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),NDe=Ne({name:"ElEmpty"}),BDe=Ne({...NDe,props:ODe,setup(n){const e=n,{t}=wi(),i=Rt("empty"),r=W(()=>e.description||t("el.table.emptyText")),s=W(()=>({width:ns(e.imageSize)}));return(a,o)=>(j(),_e("div",{class:ee(S(i).b())},[Te("div",{class:ee(S(i).e("image")),style:Jt(S(s))},[a.image?(j(),_e("img",{key:0,src:a.image,ondragstart:"return false"},null,8,["src"])):at(a.$slots,"image",{key:1},()=>[he(LDe)])],6),Te("div",{class:ee(S(i).e("description"))},[a.$slots.description?at(a.$slots,"description",{key:0}):(j(),_e("p",{key:1},Lt(S(r)),1))],2),a.$slots.default?(j(),_e("div",{key:0,class:ee(S(i).e("bottom"))},[at(a.$slots,"default")],2)):ot("v-if",!0)],2))}});var FDe=Vt(BDe,[["__file","empty.vue"]]);const Jne=Nn(FDe),UDe=zt({size:{type:String,values:tf},disabled:Boolean}),zDe=zt({...UDe,model:Object,rules:{type:et(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),HDe={validate:(n,e,t)=>(Bt(n)||un(n))&&fr(e)&&un(t)};function VDe(){const n=ae([]),e=W(()=>{if(!n.value.length)return"0";const s=Math.max(...n.value);return s?`${s}px`:""});function t(s){const a=n.value.indexOf(s);return a===-1&&e.value,a}function i(s,a){if(s&&a){const o=t(a);n.value.splice(o,1,s)}else s&&n.value.push(s)}function r(s){const a=t(s);a>-1&&n.value.splice(a,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:r}}const ZC=(n,e)=>{const t=yo(e);return t.length>0?n.filter(i=>i.prop&&t.includes(i.prop)):n},$De="ElForm",GDe=Ne({name:$De}),WDe=Ne({...GDe,props:zDe,emits:HDe,setup(n,{expose:e,emit:t}){const i=n,r=[],s=ws(),a=Rt("form"),o=W(()=>{const{labelPosition:y,inline:b}=i;return[a.b(),a.m(s.value||"default"),{[a.m(`label-${y}`)]:y,[a.m("inline")]:b}]}),l=y=>r.find(b=>b.prop===y),u=y=>{r.push(y)},c=y=>{y.prop&&r.splice(r.indexOf(y),1)},d=(y=[])=>{i.model&&ZC(r,y).forEach(b=>b.resetField())},f=(y=[])=>{ZC(r,y).forEach(b=>b.clearValidate())},h=W(()=>!!i.model),p=y=>{if(r.length===0)return[];const b=ZC(r,y);return b.length?b:[]},m=async y=>v(void 0,y),g=async(y=[])=>{if(!h.value)return!1;const b=p(y);if(b.length===0)return!0;let x={};for(const w of b)try{await w.validate("")}catch(A){x={...x,...A}}return Object.keys(x).length===0?!0:Promise.reject(x)},v=async(y=[],b)=>{const x=!pn(b);try{const w=await g(y);return w===!0&&await(b==null?void 0:b(w)),w}catch(w){if(w instanceof Error)throw w;const A=w;return i.scrollToError&&_(Object.keys(A)[0]),await(b==null?void 0:b(!1,A)),x&&Promise.reject(A)}},_=y=>{var b;const x=ZC(r,y)[0];x&&((b=x.$el)==null||b.scrollIntoView(i.scrollIntoViewOptions))};return St(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(y=>void 0)},{deep:!0}),ui(iv,Ui({...js(i),emit:t,resetFields:d,clearValidate:f,validateField:v,getField:l,addField:u,removeField:c,...VDe()})),e({validate:m,validateField:v,resetFields:d,clearValidate:f,scrollToField:_,fields:r}),(y,b)=>(j(),_e("form",{class:ee(S(o))},[at(y.$slots,"default")],2))}});var qDe=Vt(WDe,[["__file","form.vue"]]);function Qm(){return Qm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qm.apply(this,arguments)}function jDe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,rw(n,e)}function A6(n){return A6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A6(n)}function rw(n,e){return rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},rw(n,e)}function KDe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bM(n,e,t){return KDe()?bM=Reflect.construct.bind():bM=function(r,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(r,o),u=new l;return a&&rw(u,a.prototype),u},bM.apply(null,arguments)}function XDe(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function E6(n){var e=typeof Map=="function"?new Map:void 0;return E6=function(i){if(i===null||!XDe(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return bM(i,arguments,A6(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rw(r,i)},E6(n)}var YDe=/%[sdj%]/g,QDe=function(){};typeof process<"u"&&process.env;function M6(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function iu(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var r=0,s=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var a=n.replace(YDe,function(o){if(o==="%%")return"%";if(r>=s)return o;switch(o){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch{return"[Circular]"}break;default:return o}});return a}return n}function ZDe(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function ba(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||ZDe(e)&&typeof n=="string"&&!n)}function JDe(n,e,t){var i=[],r=0,s=n.length;function a(o){i.push.apply(i,o||[]),r++,r===s&&t(i)}n.forEach(function(o){e(o,a)})}function v$(n,e,t){var i=0,r=n.length;function s(a){if(a&&a.length){t(a);return}var o=i;i=i+1,o<r?e(n[o],s):t([])}s([])}function eRe(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var y$=function(n){jDe(e,n);function e(t,i){var r;return r=n.call(this,"Async Validation Error")||this,r.errors=t,r.fields=i,r}return e}(E6(Error));function tRe(n,e,t,i,r){if(e.first){var s=new Promise(function(f,h){var p=function(v){return i(v),v.length?h(new y$(v,M6(v))):f(r)},m=eRe(n);v$(m,t,p)});return s.catch(function(f){return f}),s}var a=e.firstFields===!0?Object.keys(n):e.firstFields||[],o=Object.keys(n),l=o.length,u=0,c=[],d=new Promise(function(f,h){var p=function(g){if(c.push.apply(c,g),u++,u===l)return i(c),c.length?h(new y$(c,M6(c))):f(r)};o.length||(i(c),f(r)),o.forEach(function(m){var g=n[m];a.indexOf(m)!==-1?v$(g,t,p):JDe(g,t,p)})});return d.catch(function(f){return f}),d}function nRe(n){return!!(n&&n.message!==void 0)}function iRe(n,e){for(var t=n,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function _$(n,e){return function(t){var i;return n.fullFields?i=iRe(e,n.fullFields):i=e[t.field||n.fullField],nRe(t)?(t.field=t.field||n.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||n.fullField}}}function b$(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof n[t]=="object"?n[t]=Qm({},n[t],i):n[t]=i}}return n}var eie=function(e,t,i,r,s,a){e.required&&(!i.hasOwnProperty(e.field)||ba(t,a||e.type))&&r.push(iu(s.messages.required,e.fullField))},rRe=function(e,t,i,r,s){(/^\s+$/.test(t)||t==="")&&r.push(iu(s.messages.whitespace,e.fullField))},JC,sRe=function(){if(JC)return JC;var n="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",r=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+r+"$)"),a=new RegExp("^"+t+"$"),o=new RegExp("^"+r+"$"),l=function(b){return b&&b.exact?s:new RegExp("(?:"+e(b)+t+e(b)+")|(?:"+e(b)+r+e(b)+")","g")};l.v4=function(y){return y&&y.exact?a:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?o:new RegExp(""+e(y)+r+e(y),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',_="(?:"+u+"|www\\.)"+c+"(?:localhost|"+d+"|"+f+"|"+h+p+m+")"+g+v;return JC=new RegExp("(?:^"+_+"$)","i"),JC},S$={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},xx={integer:function(e){return xx.number(e)&&parseInt(e,10)===e},float:function(e){return xx.number(e)&&!xx.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!xx.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(S$.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(sRe())},hex:function(e){return typeof e=="string"&&!!e.match(S$.hex)}},aRe=function(e,t,i,r,s){if(e.required&&t===void 0){eie(e,t,i,r,s);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=e.type;a.indexOf(o)>-1?xx[o](t)||r.push(iu(s.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(iu(s.messages.types[o],e.fullField,e.type))},oRe=function(e,t,i,r,s){var a=typeof e.len=="number",o=typeof e.min=="number",l=typeof e.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,d=null,f=typeof t=="number",h=typeof t=="string",p=Array.isArray(t);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(c=t.length),h&&(c=t.replace(u,"_").length),a?c!==e.len&&r.push(iu(s.messages[d].len,e.fullField,e.len)):o&&!l&&c<e.min?r.push(iu(s.messages[d].min,e.fullField,e.min)):l&&!o&&c>e.max?r.push(iu(s.messages[d].max,e.fullField,e.max)):o&&l&&(c<e.min||c>e.max)&&r.push(iu(s.messages[d].range,e.fullField,e.min,e.max))},Bv="enum",lRe=function(e,t,i,r,s){e[Bv]=Array.isArray(e[Bv])?e[Bv]:[],e[Bv].indexOf(t)===-1&&r.push(iu(s.messages[Bv],e.fullField,e[Bv].join(", ")))},uRe=function(e,t,i,r,s){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(iu(s.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var a=new RegExp(e.pattern);a.test(t)||r.push(iu(s.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},hr={required:eie,whitespace:rRe,type:aRe,range:oRe,enum:lRe,pattern:uRe},cRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t,"string")&&!e.required)return i();hr.required(e,t,r,a,s,"string"),ba(t,"string")||(hr.type(e,t,r,a,s),hr.range(e,t,r,a,s),hr.pattern(e,t,r,a,s),e.whitespace===!0&&hr.whitespace(e,t,r,a,s))}i(a)},dRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&hr.type(e,t,r,a,s)}i(a)},fRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t===""&&(t=void 0),ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&(hr.type(e,t,r,a,s),hr.range(e,t,r,a,s))}i(a)},hRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&hr.type(e,t,r,a,s)}i(a)},pRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),ba(t)||hr.type(e,t,r,a,s)}i(a)},mRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&(hr.type(e,t,r,a,s),hr.range(e,t,r,a,s))}i(a)},gRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&(hr.type(e,t,r,a,s),hr.range(e,t,r,a,s))}i(a)},vRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(t==null&&!e.required)return i();hr.required(e,t,r,a,s,"array"),t!=null&&(hr.type(e,t,r,a,s),hr.range(e,t,r,a,s))}i(a)},yRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&hr.type(e,t,r,a,s)}i(a)},_Re="enum",bRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s),t!==void 0&&hr[_Re](e,t,r,a,s)}i(a)},SRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t,"string")&&!e.required)return i();hr.required(e,t,r,a,s),ba(t,"string")||hr.pattern(e,t,r,a,s)}i(a)},xRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t,"date")&&!e.required)return i();if(hr.required(e,t,r,a,s),!ba(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),hr.type(e,l,r,a,s),l&&hr.range(e,l.getTime(),r,a,s)}}i(a)},wRe=function(e,t,i,r,s){var a=[],o=Array.isArray(t)?"array":typeof t;hr.required(e,t,r,a,s,o),i(a)},lP=function(e,t,i,r,s){var a=e.type,o=[],l=e.required||!e.required&&r.hasOwnProperty(e.field);if(l){if(ba(t,a)&&!e.required)return i();hr.required(e,t,r,o,s,a),ba(t,a)||hr.type(e,t,r,o,s)}i(o)},TRe=function(e,t,i,r,s){var a=[],o=e.required||!e.required&&r.hasOwnProperty(e.field);if(o){if(ba(t)&&!e.required)return i();hr.required(e,t,r,a,s)}i(a)},Qx={string:cRe,method:dRe,number:fRe,boolean:hRe,regexp:pRe,integer:mRe,float:gRe,array:vRe,object:yRe,enum:bRe,pattern:SRe,date:xRe,url:lP,hex:lP,email:lP,required:wRe,any:TRe};function I6(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var D6=I6(),vT=function(){function n(t){this.rules=null,this._messages=D6,this.define(t)}var e=n.prototype;return e.define=function(i){var r=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(typeof i!="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(s){var a=i[s];r.rules[s]=Array.isArray(a)?a:[a]})},e.messages=function(i){return i&&(this._messages=b$(I6(),i)),this._messages},e.validate=function(i,r,s){var a=this;r===void 0&&(r={}),s===void 0&&(s=function(){});var o=i,l=r,u=s;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,o),Promise.resolve(o);function c(m){var g=[],v={};function _(b){if(Array.isArray(b)){var x;g=(x=g).concat.apply(x,b)}else g.push(b)}for(var y=0;y<m.length;y++)_(m[y]);g.length?(v=M6(g),u(g,v)):u(null,o)}if(l.messages){var d=this.messages();d===D6&&(d=I6()),b$(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(m){var g=a.rules[m],v=o[m];g.forEach(function(_){var y=_;typeof y.transform=="function"&&(o===i&&(o=Qm({},o)),v=o[m]=y.transform(v)),typeof y=="function"?y={validator:y}:y=Qm({},y),y.validator=a.getValidationMethod(y),y.validator&&(y.field=m,y.fullField=y.fullField||m,y.type=a.getType(y),f[m]=f[m]||[],f[m].push({rule:y,value:v,source:o,field:m}))})});var p={};return tRe(f,l,function(m,g){var v=m.rule,_=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");_=_&&(v.required||!v.required&&m.value),v.field=m.field;function y(w,A){return Qm({},A,{fullField:v.fullField+"."+w,fullFields:v.fullFields?[].concat(v.fullFields,[w]):[w]})}function b(w){w===void 0&&(w=[]);var A=Array.isArray(w)?w:[w];!l.suppressWarning&&A.length&&n.warning("async-validator:",A),A.length&&v.message!==void 0&&(A=[].concat(v.message));var T=A.map(_$(v,o));if(l.first&&T.length)return p[v.field]=1,g(T);if(!_)g(T);else{if(v.required&&!m.value)return v.message!==void 0?T=[].concat(v.message).map(_$(v,o)):l.error&&(T=[l.error(v,iu(l.messages.required,v.field))]),g(T);var C={};v.defaultField&&Object.keys(m.value).map(function(k){C[k]=v.defaultField}),C=Qm({},C,m.rule.fields);var E={};Object.keys(C).forEach(function(k){var O=C[k],U=Array.isArray(O)?O:[O];E[k]=U.map(y.bind(null,k))});var I=new n(E);I.messages(l.messages),m.rule.options&&(m.rule.options.messages=l.messages,m.rule.options.error=l.error),I.validate(m.value,m.rule.options||l,function(k){var O=[];T&&T.length&&O.push.apply(O,T),k&&k.length&&O.push.apply(O,k),g(O.length?O:null)})}}var x;if(v.asyncValidator)x=v.asyncValidator(v,m.value,b,m.source,l);else if(v.validator){try{x=v.validator(v,m.value,b,m.source,l)}catch(w){console.error==null||console.error(w),l.suppressValidatorError||setTimeout(function(){throw w},0),b(w.message)}x===!0?b():x===!1?b(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):x instanceof Array?b(x):x instanceof Error&&b(x.message)}x&&x.then&&x.then(function(){return b()},function(w){return b(w)})},function(m){c(m)},o)},e.getType=function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!Qx.hasOwnProperty(i.type))throw new Error(iu("Unknown rule type %s",i.type));return i.type||"string"},e.getValidationMethod=function(i){if(typeof i.validator=="function")return i.validator;var r=Object.keys(i),s=r.indexOf("message");return s!==-1&&r.splice(s,1),r.length===1&&r[0]==="required"?Qx.required:Qx[this.getType(i)]||void 0},n}();vT.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Qx[e]=t};vT.warning=QDe;vT.messages=D6;vT.validators=Qx;const CRe=["","error","validating","success"],ARe=zt({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:et([String,Array])},required:{type:Boolean,default:void 0},rules:{type:et([Object,Array])},error:String,validateStatus:{type:String,values:CRe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:tf}}),x$="ElLabelWrap";var ERe=Ne({name:x$,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(n,{slots:e}){const t=Zt(iv,void 0),i=Zt(Gd);i||Xs(x$,"usage: <el-form-item><label-wrap /></el-form-item>");const r=Rt("form"),s=ae(),a=ae(0),o=()=>{var c;if((c=s.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(c="update")=>{cn(()=>{e.default&&n.isAutoWidth&&(c==="update"?a.value=o():c==="remove"&&(t==null||t.deregisterLabelWidth(a.value)))})},u=()=>l("update");return Ln(()=>{u()}),Vi(()=>{l("remove")}),fc(()=>u()),St(a,(c,d)=>{n.updateAll&&(t==null||t.registerLabelWidth(c,d))}),Br(W(()=>{var c,d;return(d=(c=s.value)==null?void 0:c.firstElementChild)!=null?d:null}),u),()=>{var c,d;if(!e)return null;const{isAutoWidth:f}=n;if(f){const h=t==null?void 0:t.autoLabelWidth,p=i==null?void 0:i.hasLabel,m={};if(p&&h&&h!=="auto"){const g=Math.max(0,Number.parseInt(h,10)-a.value),_=(i.labelPosition||t.labelPosition)==="left"?"marginRight":"marginLeft";g&&(m[_]=`${g}px`)}return he("div",{ref:s,class:[r.be("item","label-wrap")],style:m},[(c=e.default)==null?void 0:c.call(e)])}else return he(an,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const MRe=Ne({name:"ElFormItem"}),IRe=Ne({...MRe,props:ARe,setup(n,{expose:e}){const t=n,i=Ls(),r=Zt(iv,void 0),s=Zt(Gd,void 0),a=ws(void 0,{formItem:!1}),o=Rt("form-item"),l=Oa().value,u=ae([]),c=ae(""),d=USe(c,100),f=ae(""),h=ae();let p,m=!1;const g=W(()=>t.labelPosition||(r==null?void 0:r.labelPosition)),v=W(()=>{if(g.value==="top")return{};const Oe=ns(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return Oe?{width:Oe}:{}}),_=W(()=>{if(g.value==="top"||r!=null&&r.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const Oe=ns(t.labelWidth||(r==null?void 0:r.labelWidth)||"");return!t.label&&!i.label?{marginLeft:Oe}:{}}),y=W(()=>[o.b(),o.m(a.value),o.is("error",c.value==="error"),o.is("validating",c.value==="validating"),o.is("success",c.value==="success"),o.is("required",z.value||t.required),o.is("no-asterisk",r==null?void 0:r.hideRequiredAsterisk),(r==null?void 0:r.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[o.m("feedback")]:r==null?void 0:r.statusIcon,[o.m(`label-${g.value}`)]:g.value}]),b=W(()=>fr(t.inlineMessage)?t.inlineMessage:(r==null?void 0:r.inlineMessage)||!1),x=W(()=>[o.e("error"),{[o.em("error","inline")]:b.value}]),w=W(()=>t.prop?un(t.prop)?t.prop:t.prop.join("."):""),A=W(()=>!!(t.label||i.label)),T=W(()=>t.for||(u.value.length===1?u.value[0]:void 0)),C=W(()=>!T.value&&A.value),E=!!s,I=W(()=>{const Oe=r==null?void 0:r.model;if(!(!Oe||!t.prop))return pM(Oe,t.prop).value}),k=W(()=>{const{required:Oe}=t,Be=[];t.rules&&Be.push(...yo(t.rules));const Ye=r==null?void 0:r.rules;if(Ye&&t.prop){const Ze=pM(Ye,t.prop).value;Ze&&Be.push(...yo(Ze))}if(Oe!==void 0){const Ze=Be.map((Q,me)=>[Q,me]).filter(([Q])=>Object.keys(Q).includes("required"));if(Ze.length>0)for(const[Q,me]of Ze)Q.required!==Oe&&(Be[me]={...Q,required:Oe});else Be.push({required:Oe})}return Be}),O=W(()=>k.value.length>0),U=Oe=>k.value.filter(Ye=>!Ye.trigger||!Oe?!0:Bt(Ye.trigger)?Ye.trigger.includes(Oe):Ye.trigger===Oe).map(({trigger:Ye,...Ze})=>Ze),z=W(()=>k.value.some(Oe=>Oe.required)),L=W(()=>{var Oe;return d.value==="error"&&t.showMessage&&((Oe=r==null?void 0:r.showMessage)!=null?Oe:!0)}),G=W(()=>`${t.label||""}${(r==null?void 0:r.labelSuffix)||""}`),H=Oe=>{c.value=Oe},F=Oe=>{var Be,Ye;const{errors:Ze,fields:Q}=Oe;(!Ze||!Q)&&console.error(Oe),H("error"),f.value=Ze?(Ye=(Be=Ze==null?void 0:Ze[0])==null?void 0:Be.message)!=null?Ye:`${t.prop} is required`:"",r==null||r.emit("validate",t.prop,!1,f.value)},X=()=>{H("success"),r==null||r.emit("validate",t.prop,!0,"")},te=async Oe=>{const Be=w.value;return new vT({[Be]:Oe}).validate({[Be]:I.value},{firstFields:!0}).then(()=>(X(),!0)).catch(Ze=>(F(Ze),Promise.reject(Ze)))},re=async(Oe,Be)=>{if(m||!t.prop)return!1;const Ye=pn(Be);if(!O.value)return Be==null||Be(!1),!1;const Ze=U(Oe);return Ze.length===0?(Be==null||Be(!0),!0):(H("validating"),te(Ze).then(()=>(Be==null||Be(!0),!0)).catch(Q=>{const{fields:me}=Q;return Be==null||Be(!1,me),Ye?!1:Promise.reject(me)}))},ie=()=>{H(""),f.value="",m=!1},le=async()=>{const Oe=r==null?void 0:r.model;if(!Oe||!t.prop)return;const Be=pM(Oe,t.prop);m=!0,Be.value=JH(p),await cn(),ie(),m=!1},ge=Oe=>{u.value.includes(Oe)||u.value.push(Oe)},pe=Oe=>{u.value=u.value.filter(Be=>Be!==Oe)};St(()=>t.error,Oe=>{f.value=Oe||"",H(Oe?"error":"")},{immediate:!0}),St(()=>t.validateStatus,Oe=>H(Oe||""));const ye=Ui({...js(t),$el:h,size:a,validateState:c,labelId:l,inputIds:u,isGroup:C,hasLabel:A,fieldValue:I,addInputId:ge,removeInputId:pe,resetField:le,clearValidate:ie,validate:re});return ui(Gd,ye),Ln(()=>{t.prop&&(r==null||r.addField(ye),p=JH(I.value))}),Vi(()=>{r==null||r.removeField(ye)}),e({size:a,validateMessage:f,validateState:c,validate:re,clearValidate:ie,resetField:le}),(Oe,Be)=>{var Ye;return j(),_e("div",{ref_key:"formItemRef",ref:h,class:ee(S(y)),role:S(C)?"group":void 0,"aria-labelledby":S(C)?S(l):void 0},[he(S(ERe),{"is-auto-width":S(v).width==="auto","update-all":((Ye=S(r))==null?void 0:Ye.labelWidth)==="auto"},{default:Ae(()=>[S(A)?(j(),gt(ei(S(T)?"label":"div"),{key:0,id:S(l),for:S(T),class:ee(S(o).e("label")),style:Jt(S(v))},{default:Ae(()=>[at(Oe.$slots,"label",{label:S(G)},()=>[An(Lt(S(G)),1)])]),_:3},8,["id","for","class","style"])):ot("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),Te("div",{class:ee(S(o).e("content")),style:Jt(S(_))},[at(Oe.$slots,"default"),he($J,{name:`${S(o).namespace.value}-zoom-in-top`},{default:Ae(()=>[S(L)?at(Oe.$slots,"error",{key:0,error:f.value},()=>[Te("div",{class:ee(S(x))},Lt(f.value),3)]):ot("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var tie=Vt(IRe,[["__file","form-item.vue"]]);const DRe=Nn(qDe,{FormItem:tie}),RRe=Xr(tie),PRe=zt({urlList:{type:et(Array),default:()=>Kr([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:et(String)}}),kRe={close:()=>!0,switch:n=>yn(n),rotate:n=>yn(n)},LRe=Ne({name:"ElImageViewer"}),ORe=Ne({...LRe,props:PRe,emits:kRe,setup(n,{expose:e,emit:t}){var i;const r=n,s={CONTAIN:{name:"contain",icon:Kf(r2e)},ORIGINAL:{name:"original",icon:Kf(D2e)}},{t:a}=wi(),o=Rt("image-viewer"),{nextZIndex:l}=db(),u=ae(),c=ae([]),d=Xpe(),f=ae(!0),h=ae(r.initialIndex),p=Ji(s.CONTAIN),m=ae({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),g=ae((i=r.zIndex)!=null?i:l()),v=W(()=>{const{urlList:re}=r;return re.length<=1}),_=W(()=>h.value===0),y=W(()=>h.value===r.urlList.length-1),b=W(()=>r.urlList[h.value]),x=W(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!r.infinite&&_.value)]),w=W(()=>[o.e("btn"),o.e("next"),o.is("disabled",!r.infinite&&y.value)]),A=W(()=>{const{scale:re,deg:ie,offsetX:le,offsetY:ge,enableTransition:pe}=m.value;let ye=le/re,Oe=ge/re;const Be=ie*Math.PI/180,Ye=Math.cos(Be),Ze=Math.sin(Be);ye=ye*Ye+Oe*Ze,Oe=Oe*Ye-le/re*Ze;const Q={transform:`scale(${re}) rotate(${ie}deg) translate(${ye}px, ${Oe}px)`,transition:pe?"transform .3s":""};return p.value.name===s.CONTAIN.name&&(Q.maxWidth=Q.maxHeight="100%"),Q});function T(){E(),t("close")}function C(){const re=mg(le=>{switch(le.code){case Kt.esc:r.closeOnPressEscape&&T();break;case Kt.space:z();break;case Kt.left:G();break;case Kt.up:F("zoomIn");break;case Kt.right:H();break;case Kt.down:F("zoomOut");break}}),ie=mg(le=>{const ge=le.deltaY||le.deltaX;F(ge<0?"zoomIn":"zoomOut",{zoomRate:r.zoomRate,enableTransition:!1})});d.run(()=>{Yi(document,"keydown",re),Yi(document,"wheel",ie)})}function E(){d.stop()}function I(){f.value=!1}function k(re){f.value=!1,re.target.alt=a("el.image.error")}function O(re){if(f.value||re.button!==0||!u.value)return;m.value.enableTransition=!1;const{offsetX:ie,offsetY:le}=m.value,ge=re.pageX,pe=re.pageY,ye=mg(Be=>{m.value={...m.value,offsetX:ie+Be.pageX-ge,offsetY:le+Be.pageY-pe}}),Oe=Yi(document,"mousemove",ye);Yi(document,"mouseup",()=>{Oe()}),re.preventDefault()}function U(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function z(){if(f.value)return;const re=l_(s),ie=Object.values(s),le=p.value.name,pe=(ie.findIndex(ye=>ye.name===le)+1)%re.length;p.value=s[re[pe]],U()}function L(re){const ie=r.urlList.length;h.value=(re+ie)%ie}function G(){_.value&&!r.infinite||L(h.value-1)}function H(){y.value&&!r.infinite||L(h.value+1)}function F(re,ie={}){if(f.value)return;const{minScale:le,maxScale:ge}=r,{zoomRate:pe,rotateDeg:ye,enableTransition:Oe}={zoomRate:r.zoomRate,rotateDeg:90,enableTransition:!0,...ie};switch(re){case"zoomOut":m.value.scale>le&&(m.value.scale=Number.parseFloat((m.value.scale/pe).toFixed(3)));break;case"zoomIn":m.value.scale<ge&&(m.value.scale=Number.parseFloat((m.value.scale*pe).toFixed(3)));break;case"clockwise":m.value.deg+=ye,t("rotate",m.value.deg);break;case"anticlockwise":m.value.deg-=ye,t("rotate",m.value.deg);break}m.value.enableTransition=Oe}function X(re){var ie;((ie=re.detail)==null?void 0:ie.focusReason)==="pointer"&&re.preventDefault()}function te(){r.closeOnPressEscape&&T()}return St(b,()=>{cn(()=>{const re=c.value[0];re!=null&&re.complete||(f.value=!0)})}),St(h,re=>{U(),t("switch",re)}),Ln(()=>{C()}),e({setActiveItem:L}),(re,ie)=>(j(),gt(S(pb),{to:"body",disabled:!re.teleported},{default:Ae(()=>[he(Ks,{name:"viewer-fade",appear:""},{default:Ae(()=>[Te("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:ee(S(o).e("wrapper")),style:Jt({zIndex:g.value})},[he(S(hb),{loop:"",trapped:"","focus-trap-el":u.value,"focus-start-el":"container",onFocusoutPrevented:X,onReleaseRequested:te},{default:Ae(()=>[Te("div",{class:ee(S(o).e("mask")),onClick:wn(le=>re.hideOnClickModal&&T(),["self"])},null,10,["onClick"]),ot(" CLOSE "),Te("span",{class:ee([S(o).e("btn"),S(o).e("close")]),onClick:T},[he(S(rn),null,{default:Ae(()=>[he(S(qc))]),_:1})],2),ot(" ARROW "),S(v)?ot("v-if",!0):(j(),_e(an,{key:0},[Te("span",{class:ee(S(x)),onClick:G},[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1})],2),Te("span",{class:ee(S(w)),onClick:H},[he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})],2)],64)),ot(" ACTIONS "),Te("div",{class:ee([S(o).e("btn"),S(o).e("actions")])},[Te("div",{class:ee(S(o).e("actions__inner"))},[he(S(rn),{onClick:le=>F("zoomOut")},{default:Ae(()=>[he(S(q2e))]),_:1},8,["onClick"]),he(S(rn),{onClick:le=>F("zoomIn")},{default:Ae(()=>[he(S(ste))]),_:1},8,["onClick"]),Te("i",{class:ee(S(o).e("actions__divider"))},null,2),he(S(rn),{onClick:z},{default:Ae(()=>[(j(),gt(ei(S(p).icon)))]),_:1}),Te("i",{class:ee(S(o).e("actions__divider"))},null,2),he(S(rn),{onClick:le=>F("anticlockwise")},{default:Ae(()=>[he(S(A2e))]),_:1},8,["onClick"]),he(S(rn),{onClick:le=>F("clockwise")},{default:Ae(()=>[he(S(M2e))]),_:1},8,["onClick"])],2)],2),ot(" CANVAS "),Te("div",{class:ee(S(o).e("canvas"))},[(j(!0),_e(an,null,ti(re.urlList,(le,ge)=>Vn((j(),_e("img",{ref_for:!0,ref:pe=>c.value[ge]=pe,key:le,src:le,style:Jt(S(A)),class:ee(S(o).e("img")),crossorigin:re.crossorigin,onLoad:I,onError:k,onMousedown:O},null,46,["src","crossorigin"])),[[Oi,ge===h.value]])),128))],2),at(re.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var NRe=Vt(ORe,[["__file","image-viewer.vue"]]);const nie=Nn(NRe),BRe=zt({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:et([String,Object])},previewSrcList:{type:et(Array),default:()=>Kr([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},crossorigin:{type:et(String)}}),FRe={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>yn(n),close:()=>!0,show:()=>!0},URe=Ne({name:"ElImage",inheritAttrs:!1}),zRe=Ne({...URe,props:BRe,emits:FRe,setup(n,{emit:e}){const t=n;let i="";const{t:r}=wi(),s=Rt("image"),a=S0(),o=W(()=>Z2(Object.entries(a).filter(([H])=>/^(data-|on[A-Z])/i.test(H)||["id","style"].includes(H)))),l=hT({excludeListeners:!0,excludeKeys:W(()=>Object.keys(o.value))}),u=ae(),c=ae(!1),d=ae(!0),f=ae(!1),h=ae(),p=ae(),m=xi&&"loading"in HTMLImageElement.prototype;let g,v;const _=W(()=>[s.e("inner"),b.value&&s.e("preview"),d.value&&s.is("loading")]),y=W(()=>{const{fit:H}=t;return xi&&H?{objectFit:H}:{}}),b=W(()=>{const{previewSrcList:H}=t;return Bt(H)&&H.length>0}),x=W(()=>{const{previewSrcList:H,initialIndex:F}=t;let X=F;return F>H.length-1&&(X=0),X}),w=W(()=>t.loading==="eager"?!1:!m&&t.loading==="lazy"||t.lazy),A=()=>{xi&&(d.value=!0,c.value=!1,u.value=t.src)};function T(H){d.value=!1,c.value=!1,e("load",H)}function C(H){d.value=!1,c.value=!0,e("error",H)}function E(){o3e(h.value,p.value)&&(A(),O())}const I=Uee(E,200,!0);async function k(){var H;if(!xi)return;await cn();const{scrollContainer:F}=t;au(F)?p.value=F:un(F)&&F!==""?p.value=(H=document.querySelector(F))!=null?H:void 0:h.value&&(p.value=eF(h.value)),p.value&&(g=Yi(p,"scroll",I),setTimeout(()=>E(),100))}function O(){!xi||!p.value||!I||(g==null||g(),p.value=void 0)}function U(H){if(H.ctrlKey){if(H.deltaY<0)return H.preventDefault(),!1;if(H.deltaY>0)return H.preventDefault(),!1}}function z(){b.value&&(v=Yi("wheel",U,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",f.value=!0,e("show"))}function L(){v==null||v(),document.body.style.overflow=i,f.value=!1,e("close")}function G(H){e("switch",H)}return St(()=>t.src,()=>{w.value?(d.value=!0,c.value=!1,O(),k()):A()}),Ln(()=>{w.value?k():A()}),(H,F)=>(j(),_e("div",si({ref_key:"container",ref:h},S(o),{class:[S(s).b(),H.$attrs.class]}),[c.value?at(H.$slots,"error",{key:0},()=>[Te("div",{class:ee(S(s).e("error"))},Lt(S(r)("el.image.error")),3)]):(j(),_e(an,{key:1},[u.value!==void 0?(j(),_e("img",si({key:0},S(l),{src:u.value,loading:H.loading,style:S(y),class:S(_),crossorigin:H.crossorigin,onClick:z,onLoad:T,onError:C}),null,16,["src","loading","crossorigin"])):ot("v-if",!0),d.value?(j(),_e("div",{key:1,class:ee(S(s).e("wrapper"))},[at(H.$slots,"placeholder",{},()=>[Te("div",{class:ee(S(s).e("placeholder"))},null,2)])],2)):ot("v-if",!0)],64)),S(b)?(j(),_e(an,{key:2},[f.value?(j(),gt(S(nie),{key:0,"z-index":H.zIndex,"initial-index":S(x),infinite:H.infinite,"zoom-rate":H.zoomRate,"min-scale":H.minScale,"max-scale":H.maxScale,"url-list":H.previewSrcList,crossorigin:H.crossorigin,"hide-on-click-modal":H.hideOnClickModal,teleported:H.previewTeleported,"close-on-press-escape":H.closeOnPressEscape,onClose:L,onSwitch:G},{default:Ae(()=>[H.$slots.viewer?(j(),_e("div",{key:0},[at(H.$slots,"viewer")])):ot("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):ot("v-if",!0)],64)):ot("v-if",!0)],16))}});var HRe=Vt(zRe,[["__file","image.vue"]]);const VRe=Nn(HRe),$Re=zt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ks,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:n=>n===null||yn(n)||["min","max"].includes(n),default:null},name:String,placeholder:String,precision:{type:Number,validator:n=>n>=0&&n===Number.parseInt(`${n}`,10)},validateEvent:{type:Boolean,default:!0},...Ba(["ariaLabel"])}),GRe={[er]:(n,e)=>e!==n,blur:n=>n instanceof FocusEvent,focus:n=>n instanceof FocusEvent,[Qa]:n=>yn(n)||na(n),[$n]:n=>yn(n)||na(n)},WRe=Ne({name:"ElInputNumber"}),qRe=Ne({...WRe,props:$Re,emits:GRe,setup(n,{expose:e,emit:t}){const i=n,{t:r}=wi(),s=Rt("input-number"),a=ae(),o=Ui({currentValue:i.modelValue,userInput:null}),{formItem:l}=to(),u=W(()=>yn(i.modelValue)&&i.modelValue<=i.min),c=W(()=>yn(i.modelValue)&&i.modelValue>=i.max),d=W(()=>{const z=v(i.step);return Xi(i.precision)?Math.max(v(i.modelValue),z):(z>i.precision,i.precision)}),f=W(()=>i.controls&&i.controlsPosition==="right"),h=ws(),p=no(),m=W(()=>{if(o.userInput!==null)return o.userInput;let z=o.currentValue;if(na(z))return"";if(yn(z)){if(Number.isNaN(z))return"";Xi(i.precision)||(z=z.toFixed(i.precision))}return z}),g=(z,L)=>{if(Xi(L)&&(L=d.value),L===0)return Math.round(z);let G=String(z);const H=G.indexOf(".");if(H===-1||!G.replace(".","").split("")[H+L])return z;const te=G.length;return G.charAt(te-1)==="5"&&(G=`${G.slice(0,Math.max(0,te-1))}6`),Number.parseFloat(Number(G).toFixed(L))},v=z=>{if(na(z))return 0;const L=z.toString(),G=L.indexOf(".");let H=0;return G!==-1&&(H=L.length-G-1),H},_=(z,L=1)=>yn(z)?g(z+i.step*L):o.currentValue,y=()=>{if(i.readonly||p.value||c.value)return;const z=Number(m.value)||0,L=_(z);w(L),t(Qa,o.currentValue),O()},b=()=>{if(i.readonly||p.value||u.value)return;const z=Number(m.value)||0,L=_(z,-1);w(L),t(Qa,o.currentValue),O()},x=(z,L)=>{const{max:G,min:H,step:F,precision:X,stepStrictly:te,valueOnClear:re}=i;G<H&&Xs("InputNumber","min should not be greater than max.");let ie=Number(z);if(na(z)||Number.isNaN(ie))return null;if(z===""){if(re===null)return null;ie=un(re)?{min:H,max:G}[re]:re}return te&&(ie=g(Math.round(ie/F)*F,X),ie!==z&&L&&t($n,ie)),Xi(X)||(ie=g(ie,X)),(ie>G||ie<H)&&(ie=ie>G?G:H,L&&t($n,ie)),ie},w=(z,L=!0)=>{var G;const H=o.currentValue,F=x(z);if(!L){t($n,F);return}H===F&&z||(o.userInput=null,t($n,F),H!==F&&t(er,F,H),i.validateEvent&&((G=l==null?void 0:l.validate)==null||G.call(l,"change").catch(X=>void 0)),o.currentValue=F)},A=z=>{o.userInput=z;const L=z===""?null:Number(z);t(Qa,L),w(L,!1)},T=z=>{const L=z!==""?Number(z):"";(yn(L)&&!Number.isNaN(L)||z==="")&&w(L),O(),o.userInput=null},C=()=>{var z,L;(L=(z=a.value)==null?void 0:z.focus)==null||L.call(z)},E=()=>{var z,L;(L=(z=a.value)==null?void 0:z.blur)==null||L.call(z)},I=z=>{t("focus",z)},k=z=>{var L,G;o.userInput=null,XI()&&o.currentValue===null&&((L=a.value)!=null&&L.input)&&(a.value.input.value=""),t("blur",z),i.validateEvent&&((G=l==null?void 0:l.validate)==null||G.call(l,"blur").catch(H=>void 0))},O=()=>{o.currentValue!==i.modelValue&&(o.currentValue=i.modelValue)},U=z=>{document.activeElement===z.target&&z.preventDefault()};return St(()=>i.modelValue,(z,L)=>{const G=x(z,!0);o.userInput===null&&G!==L&&(o.currentValue=G)},{immediate:!0}),Ln(()=>{var z;const{min:L,max:G,modelValue:H}=i,F=(z=a.value)==null?void 0:z.input;if(F.setAttribute("role","spinbutton"),Number.isFinite(G)?F.setAttribute("aria-valuemax",String(G)):F.removeAttribute("aria-valuemax"),Number.isFinite(L)?F.setAttribute("aria-valuemin",String(L)):F.removeAttribute("aria-valuemin"),F.setAttribute("aria-valuenow",o.currentValue||o.currentValue===0?String(o.currentValue):""),F.setAttribute("aria-disabled",String(p.value)),!yn(H)&&H!=null){let X=Number(H);Number.isNaN(X)&&(X=null),t($n,X)}F.addEventListener("wheel",U,{passive:!1})}),fc(()=>{var z,L;const G=(z=a.value)==null?void 0:z.input;G==null||G.setAttribute("aria-valuenow",`${(L=o.currentValue)!=null?L:""}`)}),e({focus:C,blur:E}),(z,L)=>(j(),_e("div",{class:ee([S(s).b(),S(s).m(S(h)),S(s).is("disabled",S(p)),S(s).is("without-controls",!z.controls),S(s).is("controls-right",S(f))]),onDragstart:wn(()=>{},["prevent"])},[z.controls?Vn((j(),_e("span",{key:0,role:"button","aria-label":S(r)("el.inputNumber.decrease"),class:ee([S(s).e("decrease"),S(s).is("disabled",S(u))]),onKeydown:ur(b,["enter"])},[at(z.$slots,"decrease-icon",{},()=>[he(S(rn),null,{default:Ae(()=>[S(f)?(j(),gt(S(Sh),{key:0})):(j(),gt(S(p2e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[S(A3),b]]):ot("v-if",!0),z.controls?Vn((j(),_e("span",{key:1,role:"button","aria-label":S(r)("el.inputNumber.increase"),class:ee([S(s).e("increase"),S(s).is("disabled",S(c))]),onKeydown:ur(y,["enter"])},[at(z.$slots,"increase-icon",{},()=>[he(S(rn),null,{default:Ae(()=>[S(f)?(j(),gt(S(nF),{key:0})):(j(),gt(S(rte),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[S(A3),y]]):ot("v-if",!0),he(S(So),{id:z.id,ref_key:"input",ref:a,type:"number",step:z.step,"model-value":S(m),placeholder:z.placeholder,readonly:z.readonly,disabled:S(p),size:S(h),max:z.max,min:z.min,name:z.name,"aria-label":z.ariaLabel,"validate-event":!1,onKeydown:[ur(wn(y,["prevent"]),["up"]),ur(wn(b,["prevent"]),["down"])],onBlur:k,onFocus:I,onInput:A,onChange:T},tc({_:2},[z.$slots.prefix?{name:"prefix",fn:Ae(()=>[at(z.$slots,"prefix")])}:void 0,z.$slots.suffix?{name:"suffix",fn:Ae(()=>[at(z.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var jRe=Vt(qRe,[["__file","input-number.vue"]]);const iie=Nn(jRe),KRe=zt({modelValue:{type:et(Array)},max:Number,tagType:{...rh.type,default:"info"},tagEffect:rh.effect,trigger:{type:et(String),default:Kt.enter},draggable:{type:Boolean,default:!1},size:ks,clearable:Boolean,disabled:{type:Boolean,default:void 0},validateEvent:{type:Boolean,default:!0},readonly:Boolean,autofocus:Boolean,id:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},placeholder:String,autocomplete:{type:String,default:"off"},ariaLabel:String}),XRe={[$n]:n=>Bt(n)||Xi(n),[er]:n=>Bt(n)||Xi(n),[Qa]:n=>un(n),"add-tag":n=>un(n),"remove-tag":n=>un(n),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0};function YRe({props:n,emit:e,formItem:t}){const i=no(),r=ws(),s=Ji(),a=ae(),o=W(()=>["small"].includes(r.value)?"small":"default"),l=W(()=>{var C;return(C=n.modelValue)!=null&&C.length?void 0:n.placeholder}),u=W(()=>!(n.readonly||i.value)),c=W(()=>{var C,E;return Xi(n.max)?!1:((E=(C=n.modelValue)==null?void 0:C.length)!=null?E:0)>=n.max}),d=C=>{if(c.value){a.value=void 0;return}x.value||e(Qa,C.target.value)},f=C=>{var E;if(!x.value)switch(C.code){case n.trigger:C.preventDefault(),C.stopPropagation(),h();break;case Kt.numpadEnter:n.trigger===Kt.enter&&(C.preventDefault(),C.stopPropagation(),h());break;case Kt.backspace:!a.value&&((E=n.modelValue)!=null&&E.length)&&(C.preventDefault(),C.stopPropagation(),p(n.modelValue.length-1));break}},h=()=>{var C,E;const I=(C=a.value)==null?void 0:C.trim();if(!I||c.value)return;const k=[...(E=n.modelValue)!=null?E:[],I];e($n,k),e(er,k),e("add-tag",I),a.value=void 0},p=C=>{var E;const I=((E=n.modelValue)!=null?E:[]).slice(),[k]=I.splice(C,1);e($n,I),e(er,I),e("remove-tag",k)},m=()=>{a.value=void 0,e($n,void 0),e(er,void 0),e("clear")},g=(C,E,I)=>{var k;const O=((k=n.modelValue)!=null?k:[]).slice(),[U]=O.splice(C,1),z=E>C&&I==="before"?-1:E<C&&I==="after"?1:0;O.splice(E+z,0,U),e($n,O),e(er,O)},v=()=>{var C;(C=s.value)==null||C.focus()},_=()=>{var C;(C=s.value)==null||C.blur()},{wrapperRef:y,isFocused:b}=w0(s,{beforeFocus(){return i.value},afterBlur(){var C;h(),n.validateEvent&&((C=t==null?void 0:t.validate)==null||C.call(t,"blur").catch(E=>void 0))}}),{isComposing:x,handleCompositionStart:w,handleCompositionUpdate:A,handleCompositionEnd:T}=pT({afterComposition:d});return St(()=>n.modelValue,()=>{var C;n.validateEvent&&((C=t==null?void 0:t.validate)==null||C.call(t,er).catch(E=>void 0))}),{inputRef:s,wrapperRef:y,isFocused:b,isComposing:x,inputValue:a,size:r,tagSize:o,placeholder:l,closable:u,disabled:i,inputLimit:c,handleDragged:g,handleInput:d,handleKeydown:f,handleAddTag:h,handleRemoveTag:p,handleClear:m,handleCompositionStart:w,handleCompositionUpdate:A,handleCompositionEnd:T,focus:v,blur:_}}function QRe(){const n=ae(!1);return{hovering:n,handleMouseEnter:()=>{n.value=!0},handleMouseLeave:()=>{n.value=!1}}}function ZRe(){const n=Ji(),e=ae(0),t=11,i=W(()=>({minWidth:`${Math.max(e.value,t)}px`}));return Br(n,()=>{var s,a;e.value=(a=(s=n.value)==null?void 0:s.getBoundingClientRect().width)!=null?a:0}),{calculatorRef:n,calculatorWidth:e,inputStyle:i}}function JRe({wrapperRef:n,handleDragged:e,afterDragged:t}){const i=Rt("input-tag"),r=Ji(),s=ae(!1);let a,o,l,u;function c(p){return`.${i.e("inner")} .${i.namespace.value}-tag:nth-child(${p+1})`}function d(p,m){a=m,o=n.value.querySelector(c(m)),o&&(o.style.opacity="0.5"),p.dataTransfer.effectAllowed="move"}function f(p,m){if(l=m,p.preventDefault(),p.dataTransfer.dropEffect="move",Xi(a)||a===m){s.value=!1;return}const g=n.value.querySelector(c(m)).getBoundingClientRect(),v=a+1!==m,_=a-1!==m,y=p.clientX-g.left,b=v?_?.5:1:-1,x=_?v?.5:0:1;y<=g.width*b?u="before":y>g.width*x?u="after":u=void 0;const w=n.value.querySelector(`.${i.e("inner")}`),A=w.getBoundingClientRect(),T=Number.parseFloat(Uf(w,"gap"))/2,C=g.top-A.top;let E=-9999;if(u==="before")E=Math.max(g.left-A.left-T,Math.floor(-T/2));else if(u==="after"){const I=g.right-A.left;E=I+(A.width===I?Math.floor(T/2):T)}Zee(r.value,{top:`${C}px`,left:`${E}px`}),s.value=!!u}function h(p){p.preventDefault(),o&&(o.style.opacity=""),u&&!Xi(a)&&!Xi(l)&&a!==l&&e(a,l,u),s.value=!1,a=void 0,o=null,l=void 0,u=void 0,t==null||t()}return{dropIndicatorRef:r,showDropIndicator:s,handleDragStart:d,handleDragOver:f,handleDragEnd:h}}function ePe({props:n,isFocused:e,hovering:t,disabled:i,inputValue:r,size:s,validateState:a,validateIcon:o,needStatusIcon:l}){const u=S0(),c=Ls(),d=Rt("input-tag"),f=Rt("input"),h=W(()=>[d.b(),d.is("focused",e.value),d.is("hovering",t.value),d.is("disabled",i.value),d.m(s.value),d.e("wrapper"),u.class]),p=W(()=>[u.style]),m=W(()=>{var _,y;return[d.e("inner"),d.is("draggable",n.draggable),d.is("left-space",!((_=n.modelValue)!=null&&_.length)&&!c.prefix),d.is("right-space",!((y=n.modelValue)!=null&&y.length)&&!v.value)]}),g=W(()=>{var _;return n.clearable&&!i.value&&!n.readonly&&(((_=n.modelValue)==null?void 0:_.length)||r.value)&&(e.value||t.value)}),v=W(()=>c.suffix||g.value||a.value&&o.value&&l.value);return{ns:d,nsInput:f,containerKls:h,containerStyle:p,innerKls:m,showClear:g,showSuffix:v}}const tPe=Ne({name:"ElInputTag",inheritAttrs:!1}),nPe=Ne({...tPe,props:KRe,emits:XRe,setup(n,{expose:e,emit:t}){const i=n,r=hT(),s=Ls(),{form:a,formItem:o}=to(),{inputId:l}=hc(i,{formItemContext:o}),u=W(()=>{var Q;return(Q=a==null?void 0:a.statusIcon)!=null?Q:!1}),c=W(()=>(o==null?void 0:o.validateState)||""),d=W(()=>c.value&&KI[c.value]),{inputRef:f,wrapperRef:h,isFocused:p,inputValue:m,size:g,tagSize:v,placeholder:_,closable:y,disabled:b,handleDragged:x,handleInput:w,handleKeydown:A,handleRemoveTag:T,handleClear:C,handleCompositionStart:E,handleCompositionUpdate:I,handleCompositionEnd:k,focus:O,blur:U}=YRe({props:i,emit:t,formItem:o}),{hovering:z,handleMouseEnter:L,handleMouseLeave:G}=QRe(),{calculatorRef:H,inputStyle:F}=ZRe(),{dropIndicatorRef:X,showDropIndicator:te,handleDragStart:re,handleDragOver:ie,handleDragEnd:le}=JRe({wrapperRef:h,handleDragged:x,afterDragged:O}),{ns:ge,nsInput:pe,containerKls:ye,containerStyle:Oe,innerKls:Be,showClear:Ye,showSuffix:Ze}=ePe({props:i,hovering:z,isFocused:p,inputValue:m,disabled:b,size:g,validateState:c,validateIcon:d,needStatusIcon:u});return e({focus:O,blur:U}),(Q,me)=>(j(),_e("div",{ref_key:"wrapperRef",ref:h,class:ee(S(ye)),style:Jt(S(Oe)),onMouseenter:S(L),onMouseleave:S(G)},[S(s).prefix?(j(),_e("div",{key:0,class:ee(S(ge).e("prefix"))},[at(Q.$slots,"prefix")],2)):ot("v-if",!0),Te("div",{class:ee(S(Be))},[(j(!0),_e(an,null,ti(Q.modelValue,(ce,je)=>(j(),gt(S(p_),{key:je,size:S(v),closable:S(y),type:Q.tagType,effect:Q.tagEffect,draggable:S(y)&&Q.draggable,"disable-transitions":"",onClose:Fe=>S(T)(je),onDragstart:Fe=>S(re)(Fe,je),onDragover:Fe=>S(ie)(Fe,je),onDragend:S(le),onDrop:wn(()=>{},["stop"])},{default:Ae(()=>[at(Q.$slots,"tag",{value:ce,index:je},()=>[An(Lt(ce),1)])]),_:2},1032,["size","closable","type","effect","draggable","onClose","onDragstart","onDragover","onDragend","onDrop"]))),128)),Te("div",{class:ee(S(ge).e("input-wrapper"))},[Vn(Te("input",si({id:S(l),ref_key:"inputRef",ref:f,"onUpdate:modelValue":ce=>br(m)?m.value=ce:null},S(r),{type:"text",minlength:Q.minlength,maxlength:Q.maxlength,disabled:S(b),readonly:Q.readonly,autocomplete:Q.autocomplete,tabindex:Q.tabindex,placeholder:S(_),autofocus:Q.autofocus,ariaLabel:Q.ariaLabel,class:S(ge).e("input"),style:S(F),onCompositionstart:S(E),onCompositionupdate:S(I),onCompositionend:S(k),onInput:S(w),onKeydown:S(A)}),null,16,["id","onUpdate:modelValue","minlength","maxlength","disabled","readonly","autocomplete","tabindex","placeholder","autofocus","ariaLabel","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onKeydown"]),[[OI,S(m)]]),Te("span",{ref_key:"calculatorRef",ref:H,"aria-hidden":"true",class:ee(S(ge).e("input-calculator")),textContent:Lt(S(m))},null,10,["textContent"])],2),Vn(Te("div",{ref_key:"dropIndicatorRef",ref:X,class:ee(S(ge).e("drop-indicator"))},null,2),[[Oi,S(te)]])],2),S(Ze)?(j(),_e("div",{key:1,class:ee(S(ge).e("suffix"))},[at(Q.$slots,"suffix"),S(Ye)?(j(),gt(S(rn),{key:0,class:ee([S(ge).e("icon"),S(ge).e("clear")]),onMousedown:wn(S(qi),["prevent"]),onClick:S(C)},{default:Ae(()=>[he(S(xh))]),_:1},8,["class","onMousedown","onClick"])):ot("v-if",!0),S(c)&&S(d)&&S(u)?(j(),gt(S(rn),{key:1,class:ee([S(pe).e("icon"),S(pe).e("validateIcon"),S(pe).is("loading",S(c)==="validating")])},{default:Ae(()=>[(j(),gt(ei(S(d))))]),_:1},8,["class"])):ot("v-if",!0)],2)):ot("v-if",!0)],46,["onMouseenter","onMouseleave"]))}});var iPe=Vt(nPe,[["__file","input-tag.vue"]]);const rPe=Nn(iPe),sPe=zt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:nr}}),aPe={click:n=>n instanceof MouseEvent},oPe=Ne({name:"ElLink"}),lPe=Ne({...oPe,props:sPe,emits:aPe,setup(n,{emit:e}){const t=n,i=Rt("link"),r=W(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function s(a){t.disabled||e("click",a)}return(a,o)=>(j(),_e("a",{class:ee(S(r)),href:a.disabled||!a.href?void 0:a.href,target:a.disabled||!a.href?void 0:a.target,onClick:s},[a.icon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(a.icon)))]),_:1})):ot("v-if",!0),a.$slots.default?(j(),_e("span",{key:1,class:ee(S(i).e("inner"))},[at(a.$slots,"default")],2)):ot("v-if",!0),a.$slots.icon?at(a.$slots,"icon",{key:2}):ot("v-if",!0)],10,["href","target"]))}});var uPe=Vt(lPe,[["__file","link.vue"]]);const cPe=Nn(uPe);let dPe=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){const e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,t=>{t.addEventListener("keydown",i=>{let r=!1;switch(i.code){case Kt.down:{this.gotoSubIndex(this.subIndex+1),r=!0;break}case Kt.up:{this.gotoSubIndex(this.subIndex-1),r=!0;break}case Kt.tab:{mM(e,"mouseleave");break}case Kt.enter:case Kt.numpadEnter:case Kt.space:{r=!0,i.currentTarget.click();break}}return r&&(i.preventDefault(),i.stopPropagation()),!1})})}},fPe=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute("tabindex","0");const t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new dPe(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",e=>{let t=!1;switch(e.code){case Kt.down:{mM(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),t=!0;break}case Kt.up:{mM(e.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),t=!0;break}case Kt.tab:{mM(e.currentTarget,"mouseleave");break}case Kt.enter:case Kt.numpadEnter:case Kt.space:{t=!0,e.currentTarget.click();break}}t&&e.preventDefault()})}},hPe=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){const t=this.domNode.childNodes;Array.from(t).forEach(i=>{i.nodeType===1&&new fPe(i,e)})}};const pPe=Ne({name:"ElMenuCollapseTransition",setup(){const n=Rt("menu");return{listeners:{onBeforeEnter:t=>t.style.opacity="0.2",onEnter(t,i){$u(t,`${n.namespace.value}-opacity-transition`),t.style.opacity="1",i()},onAfterEnter(t){To(t,`${n.namespace.value}-opacity-transition`),t.style.opacity=""},onBeforeLeave(t){t.dataset||(t.dataset={}),bl(t,n.m("collapse"))?(To(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),$u(t,n.m("collapse"))):($u(t,n.m("collapse")),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth.toString(),To(t,n.m("collapse"))),t.style.width=`${t.scrollWidth}px`,t.style.overflow="hidden"},onLeave(t){$u(t,"horizontal-collapse-transition"),t.style.width=`${t.dataset.scrollWidth}px`}}}}});function mPe(n,e,t,i,r,s){return j(),gt(Ks,si({mode:"out-in"},n.listeners),{default:Ae(()=>[at(n.$slots,"default")]),_:3},16)}var gPe=Vt(pPe,[["render",mPe],["__file","menu-collapse-transition.vue"]]);function rie(n,e){const t=W(()=>{let r=n.parent;const s=[e.value];for(;r.type.name!=="ElMenu";)r.props.index&&s.unshift(r.props.index),r=r.parent;return s});return{parentMenu:W(()=>{let r=n.parent;for(;r&&!["ElMenu","ElSubMenu"].includes(r.type.name);)r=r.parent;return r}),indexPath:t}}function vPe(n){return W(()=>{const t=n.backgroundColor;return t?new zte(t).shade(20).toString():""})}const sie=(n,e)=>{const t=Rt("menu");return W(()=>t.cssVarBlock({"text-color":n.textColor||"","hover-text-color":n.textColor||"","bg-color":n.backgroundColor||"","hover-bg-color":vPe(n).value||"","active-color":n.activeTextColor||"",level:`${e}`}))},yPe=zt({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:nr},expandOpenIcon:{type:nr},collapseCloseIcon:{type:nr},collapseOpenIcon:{type:nr}}),uP="ElSubMenu";var VF=Ne({name:uP,props:yPe,setup(n,{slots:e,expose:t}){const i=Qn(),{indexPath:r,parentMenu:s}=rie(i,W(()=>n.index)),a=Rt("menu"),o=Rt("sub-menu"),l=Zt("rootMenu");l||Xs(uP,"can not inject root menu");const u=Zt(`subMenu:${s.value.uid}`);u||Xs(uP,"can not inject sub menu");const c=ae({}),d=ae({});let f;const h=ae(!1),p=ae(),m=ae(null),g=W(()=>T.value==="horizontal"&&_.value?"bottom-start":"right-start"),v=W(()=>T.value==="horizontal"&&_.value||T.value==="vertical"&&!l.props.collapse?n.expandCloseIcon&&n.expandOpenIcon?w.value?n.expandOpenIcon:n.expandCloseIcon:Sh:n.collapseCloseIcon&&n.collapseOpenIcon?w.value?n.collapseOpenIcon:n.collapseCloseIcon:Qo),_=W(()=>u.level===0),y=W(()=>{const X=n.teleported;return X===void 0?_.value:X}),b=W(()=>l.props.collapse?`${a.namespace.value}-zoom-in-left`:`${a.namespace.value}-zoom-in-top`),x=W(()=>T.value==="horizontal"&&_.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=W(()=>l.openedMenus.includes(n.index)),A=W(()=>{let X=!1;return Object.values(c.value).forEach(te=>{te.active&&(X=!0)}),Object.values(d.value).forEach(te=>{te.active&&(X=!0)}),X}),T=W(()=>l.props.mode),C=Ui({index:n.index,indexPath:r,active:A}),E=sie(l.props,u.level+1),I=W(()=>{var X;return(X=n.popperOffset)!=null?X:l.props.popperOffset}),k=W(()=>{var X;return(X=n.popperClass)!=null?X:l.props.popperClass}),O=W(()=>{var X;return(X=n.showTimeout)!=null?X:l.props.showTimeout}),U=W(()=>{var X;return(X=n.hideTimeout)!=null?X:l.props.hideTimeout}),z=()=>{var X,te,re;return(re=(te=(X=m.value)==null?void 0:X.popperRef)==null?void 0:te.popperInstanceRef)==null?void 0:re.destroy()},L=X=>{X||z()},G=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||n.disabled||l.handleSubMenuClick({index:n.index,indexPath:r.value,active:A.value})},H=(X,te=O.value)=>{var re;if(X.type!=="focus"){if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||n.disabled){u.mouseInChild.value=!0;return}u.mouseInChild.value=!0,f==null||f(),{stop:f}=Lg(()=>{l.openMenu(n.index,r.value)},te),y.value&&((re=s.value.vnode.el)==null||re.dispatchEvent(new MouseEvent("mouseenter")))}},F=(X=!1)=>{var te;if(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"){u.mouseInChild.value=!1;return}f==null||f(),u.mouseInChild.value=!1,{stop:f}=Lg(()=>!h.value&&l.closeMenu(n.index,r.value),U.value),y.value&&X&&((te=u.handleMouseleave)==null||te.call(u,!0))};St(()=>l.props.collapse,X=>L(!!X));{const X=re=>{d.value[re.index]=re},te=re=>{delete d.value[re.index]};ui(`subMenu:${i.uid}`,{addSubMenu:X,removeSubMenu:te,handleMouseleave:F,mouseInChild:h,level:u.level+1})}return t({opened:w}),Ln(()=>{l.addSubMenu(C),u.addSubMenu(C)}),Vi(()=>{u.removeSubMenu(C),l.removeSubMenu(C)}),()=>{var X;const te=[(X=e.title)==null?void 0:X.call(e),ln(rn,{class:o.e("icon-arrow"),style:{transform:w.value?n.expandCloseIcon&&n.expandOpenIcon||n.collapseCloseIcon&&n.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>un(v.value)?ln(i.appContext.components[v.value]):ln(v.value)})],re=l.isMenuPopup?ln(Ja,{ref:m,visible:w.value,effect:"light",pure:!0,offset:I.value,showArrow:!1,persistent:!0,popperClass:k.value,placement:g.value,teleported:y.value,fallbackPlacements:x.value,transition:b.value,gpuAcceleration:!1},{content:()=>{var ie;return ln("div",{class:[a.m(T.value),a.m("popup-container"),k.value],onMouseenter:le=>H(le,100),onMouseleave:()=>F(!0),onFocus:le=>H(le,100)},[ln("ul",{class:[a.b(),a.m("popup"),a.m(`popup-${g.value}`)],style:E.value},[(ie=e.default)==null?void 0:ie.call(e)])])},default:()=>ln("div",{class:o.e("title"),onClick:G},te)}):ln(an,{},[ln("div",{class:o.e("title"),ref:p,onClick:G},te),ln(JI,{},{default:()=>{var ie;return Vn(ln("ul",{role:"menu",class:[a.b(),a.m("inline")],style:E.value},[(ie=e.default)==null?void 0:ie.call(e)]),[[Oi,w.value]])}})]);return ln("li",{class:[o.b(),o.is("active",A.value),o.is("opened",w.value),o.is("disabled",n.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:H,onMouseleave:()=>F(),onFocus:H},[re])}}});const _Pe=zt({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:et(Array),default:()=>Kr([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:nr,default:()=>v2e},popperEffect:{type:et(String),default:"dark"},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300}}),cP=n=>Bt(n)&&n.every(e=>un(e)),bPe={close:(n,e)=>un(n)&&cP(e),open:(n,e)=>un(n)&&cP(e),select:(n,e,t,i)=>un(n)&&cP(e)&&Yn(t)&&(i===void 0||i instanceof Promise)};var SPe=Ne({name:"ElMenu",props:_Pe,emits:bPe,setup(n,{emit:e,slots:t,expose:i}){const r=Qn(),s=r.appContext.config.globalProperties.$router,a=ae(),o=Rt("menu"),l=Rt("sub-menu"),u=ae(-1),c=ae(n.defaultOpeneds&&!n.collapse?n.defaultOpeneds.slice(0):[]),d=ae(n.defaultActive),f=ae({}),h=ae({}),p=W(()=>n.mode==="horizontal"||n.mode==="vertical"&&n.collapse),m=()=>{const z=d.value&&f.value[d.value];if(!z||n.mode==="horizontal"||n.collapse)return;z.indexPath.forEach(G=>{const H=h.value[G];H&&g(G,H.indexPath)})},g=(z,L)=>{c.value.includes(z)||(n.uniqueOpened&&(c.value=c.value.filter(G=>L.includes(G))),c.value.push(z),e("open",z,L))},v=z=>{const L=c.value.indexOf(z);L!==-1&&c.value.splice(L,1)},_=(z,L)=>{v(z),e("close",z,L)},y=({index:z,indexPath:L})=>{c.value.includes(z)?_(z,L):g(z,L)},b=z=>{(n.mode==="horizontal"||n.collapse)&&(c.value=[]);const{index:L,indexPath:G}=z;if(!(na(L)||na(G)))if(n.router&&s){const H=z.route||L,F=s.push(H).then(X=>(X||(d.value=L),X));e("select",L,G,{index:L,indexPath:G,route:H},F)}else d.value=L,e("select",L,G,{index:L,indexPath:G})},x=z=>{const L=f.value,G=L[z]||d.value&&L[d.value]||L[n.defaultActive];G?d.value=G.index:d.value=z},w=z=>{const L=getComputedStyle(z),G=Number.parseInt(L.marginLeft,10),H=Number.parseInt(L.marginRight,10);return z.offsetWidth+G+H||0},A=()=>{var z,L;if(!a.value)return-1;const G=Array.from((L=(z=a.value)==null?void 0:z.childNodes)!=null?L:[]).filter(ge=>ge.nodeName!=="#comment"&&(ge.nodeName!=="#text"||ge.nodeValue)),H=64,F=getComputedStyle(a.value),X=Number.parseInt(F.paddingLeft,10),te=Number.parseInt(F.paddingRight,10),re=a.value.clientWidth-X-te;let ie=0,le=0;return G.forEach((ge,pe)=>{ie+=w(ge),ie<=re-H&&(le=pe+1)}),le===G.length?-1:le},T=z=>h.value[z].indexPath,C=(z,L=33.34)=>{let G;return()=>{G&&clearTimeout(G),G=setTimeout(()=>{z()},L)}};let E=!0;const I=()=>{if(u.value===A())return;const z=()=>{u.value=-1,cn(()=>{u.value=A()})};E?z():C(z)(),E=!1};St(()=>n.defaultActive,z=>{f.value[z]||(d.value=""),x(z)}),St(()=>n.collapse,z=>{z&&(c.value=[])}),St(f.value,m);let k;ya(()=>{n.mode==="horizontal"&&n.ellipsis?k=Br(a,I).stop:k==null||k()});const O=ae(!1);{const z=F=>{h.value[F.index]=F},L=F=>{delete h.value[F.index]};ui("rootMenu",Ui({props:n,openedMenus:c,items:f,subMenus:h,activeIndex:d,isMenuPopup:p,addMenuItem:F=>{f.value[F.index]=F},removeMenuItem:F=>{delete f.value[F.index]},addSubMenu:z,removeSubMenu:L,openMenu:g,closeMenu:_,handleMenuItemClick:b,handleSubMenuClick:y})),ui(`subMenu:${r.uid}`,{addSubMenu:z,removeSubMenu:L,mouseInChild:O,level:0})}Ln(()=>{n.mode==="horizontal"&&new hPe(r.vnode.el,o.namespace.value)}),i({open:L=>{const{indexPath:G}=h.value[L];G.forEach(H=>g(H,G))},close:v,handleResize:I});const U=sie(n,0);return()=>{var z,L;let G=(L=(z=t.default)==null?void 0:z.call(t))!=null?L:[];const H=[];if(n.mode==="horizontal"&&a.value){const te=Up(G),re=u.value===-1?te:te.slice(0,u.value),ie=u.value===-1?[]:te.slice(u.value);ie!=null&&ie.length&&n.ellipsis&&(G=re,H.push(ln(VF,{index:"sub-menu-more",class:l.e("hide-arrow"),popperOffset:n.popperOffset},{title:()=>ln(rn,{class:l.e("icon-more")},{default:()=>ln(n.ellipsisIcon)}),default:()=>ie})))}const F=n.closeOnClickOutside?[[sh,()=>{c.value.length&&(O.value||(c.value.forEach(te=>e("close",te,T(te))),c.value=[]))}]]:[],X=Vn(ln("ul",{key:String(n.collapse),role:"menubar",ref:a,style:U.value,class:{[o.b()]:!0,[o.m(n.mode)]:!0,[o.m("collapse")]:n.collapse}},[...G,...H]),F);return n.collapseTransition&&n.mode==="vertical"?ln(gPe,()=>X):X}}});const xPe=zt({index:{type:et([String,null]),default:null},route:{type:et([String,Object])},disabled:Boolean}),wPe={click:n=>un(n.index)&&Bt(n.indexPath)},dP="ElMenuItem",TPe=Ne({name:dP,components:{ElTooltip:Ja},props:xPe,emits:wPe,setup(n,{emit:e}){const t=Qn(),i=Zt("rootMenu"),r=Rt("menu"),s=Rt("menu-item");i||Xs(dP,"can not inject root menu");const{parentMenu:a,indexPath:o}=rie(t,$i(n,"index")),l=Zt(`subMenu:${a.value.uid}`);l||Xs(dP,"can not inject sub menu");const u=W(()=>n.index===i.activeIndex),c=Ui({index:n.index,indexPath:o,active:u}),d=()=>{n.disabled||(i.handleMenuItemClick({index:n.index,indexPath:o.value,route:n.route}),e("click",c))};return Ln(()=>{l.addSubMenu(c),i.addMenuItem(c)}),Vi(()=>{l.removeSubMenu(c),i.removeMenuItem(c)}),{parentMenu:a,rootMenu:i,active:u,nsMenu:r,nsMenuItem:s,handleClick:d}}});function CPe(n,e,t,i,r,s){const a=Ht("el-tooltip");return j(),_e("li",{class:ee([n.nsMenuItem.b(),n.nsMenuItem.is("active",n.active),n.nsMenuItem.is("disabled",n.disabled)]),role:"menuitem",tabindex:"-1",onClick:n.handleClick},[n.parentMenu.type.name==="ElMenu"&&n.rootMenu.props.collapse&&n.$slots.title?(j(),gt(a,{key:0,effect:n.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:Ae(()=>[at(n.$slots,"title")]),default:Ae(()=>[Te("div",{class:ee(n.nsMenu.be("tooltip","trigger"))},[at(n.$slots,"default")],2)]),_:3},8,["effect"])):(j(),_e(an,{key:1},[at(n.$slots,"default"),at(n.$slots,"title")],64))],10,["onClick"])}var aie=Vt(TPe,[["render",CPe],["__file","menu-item.vue"]]);const APe={title:String},EPe="ElMenuItemGroup",MPe=Ne({name:EPe,props:APe,setup(){return{ns:Rt("menu-item-group")}}});function IPe(n,e,t,i,r,s){return j(),_e("li",{class:ee(n.ns.b())},[Te("div",{class:ee(n.ns.e("title"))},[n.$slots.title?at(n.$slots,"title",{key:1}):(j(),_e(an,{key:0},[An(Lt(n.title),1)],64))],2),Te("ul",null,[at(n.$slots,"default")])],2)}var oie=Vt(MPe,[["render",IPe],["__file","menu-item-group.vue"]]);const DPe=Nn(SPe,{MenuItem:aie,MenuItemGroup:oie,SubMenu:VF}),RPe=Xr(aie),PPe=Xr(oie),kPe=Xr(VF),LPe=zt({icon:{type:nr,default:()=>kxe},title:String,content:{type:String,default:""}}),OPe={back:()=>!0},NPe=Ne({name:"ElPageHeader"}),BPe=Ne({...NPe,props:LPe,emits:OPe,setup(n,{emit:e}){const t=Ls(),{t:i}=wi(),r=Rt("page-header"),s=W(()=>[r.b(),{[r.m("has-breadcrumb")]:!!t.breadcrumb,[r.m("has-extra")]:!!t.extra,[r.is("contentful")]:!!t.default}]);function a(){e("back")}return(o,l)=>(j(),_e("div",{class:ee(S(s))},[o.$slots.breadcrumb?(j(),_e("div",{key:0,class:ee(S(r).e("breadcrumb"))},[at(o.$slots,"breadcrumb")],2)):ot("v-if",!0),Te("div",{class:ee(S(r).e("header"))},[Te("div",{class:ee(S(r).e("left"))},[Te("div",{class:ee(S(r).e("back")),role:"button",tabindex:"0",onClick:a},[o.icon||o.$slots.icon?(j(),_e("div",{key:0,"aria-label":o.title||S(i)("el.pageHeader.title"),class:ee(S(r).e("icon"))},[at(o.$slots,"icon",{},()=>[o.icon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(o.icon)))]),_:1})):ot("v-if",!0)])],10,["aria-label"])):ot("v-if",!0),Te("div",{class:ee(S(r).e("title"))},[at(o.$slots,"title",{},()=>[An(Lt(o.title||S(i)("el.pageHeader.title")),1)])],2)],2),he(S(Gne),{direction:"vertical"}),Te("div",{class:ee(S(r).e("content"))},[at(o.$slots,"content",{},()=>[An(Lt(o.content),1)])],2)],2),o.$slots.extra?(j(),_e("div",{key:0,class:ee(S(r).e("extra"))},[at(o.$slots,"extra")],2)):ot("v-if",!0)],2),o.$slots.default?(j(),_e("div",{key:1,class:ee(S(r).e("main"))},[at(o.$slots,"default")],2)):ot("v-if",!0)],2))}});var FPe=Vt(BPe,[["__file","page-header.vue"]]);const UPe=Nn(FPe),lie=Symbol("elPaginationKey"),zPe=zt({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:nr}}),HPe={click:n=>n instanceof MouseEvent},VPe=Ne({name:"ElPaginationPrev"}),$Pe=Ne({...VPe,props:zPe,emits:HPe,setup(n){const e=n,{t}=wi(),i=W(()=>e.disabled||e.currentPage<=1);return(r,s)=>(j(),_e("button",{type:"button",class:"btn-prev",disabled:S(i),"aria-label":r.prevText||S(t)("el.pagination.prev"),"aria-disabled":S(i),onClick:a=>r.$emit("click",a)},[r.prevText?(j(),_e("span",{key:0},Lt(r.prevText),1)):(j(),gt(S(rn),{key:1},{default:Ae(()=>[(j(),gt(ei(r.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var GPe=Vt($Pe,[["__file","prev.vue"]]);const WPe=zt({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:nr}}),qPe=Ne({name:"ElPaginationNext"}),jPe=Ne({...qPe,props:WPe,emits:["click"],setup(n){const e=n,{t}=wi(),i=W(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(r,s)=>(j(),_e("button",{type:"button",class:"btn-next",disabled:S(i),"aria-label":r.nextText||S(t)("el.pagination.next"),"aria-disabled":S(i),onClick:a=>r.$emit("click",a)},[r.nextText?(j(),_e("span",{key:0},Lt(r.nextText),1)):(j(),gt(S(rn),{key:1},{default:Ae(()=>[(j(),gt(ei(r.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var KPe=Vt(jPe,[["__file","next.vue"]]);const uie=Symbol("ElSelectGroup"),gb=Symbol("ElSelect");function XPe(n,e){const t=Zt(gb),i=Zt(uie,{disabled:!1}),r=W(()=>c(yo(t.props.modelValue),n.value)),s=W(()=>{var h;if(t.props.multiple){const p=yo((h=t.props.modelValue)!=null?h:[]);return!r.value&&p.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=W(()=>n.label||(Yn(n.value)?"":n.value)),o=W(()=>n.value||n.label||""),l=W(()=>n.disabled||e.groupDisabled||s.value),u=Qn(),c=(h=[],p)=>{if(Yn(n.value)){const m=t.props.valueKey;return h&&h.some(g=>ir(vs(g,m))===vs(p,m))}else return h&&h.includes(p)},d=()=>{!n.disabled&&!i.disabled&&(t.states.hoveringIndex=t.optionsArray.indexOf(u.proxy))},f=h=>{const p=new RegExp(AF(h),"i");e.visible=p.test(a.value)||n.created};return St(()=>a.value,()=>{!n.created&&!t.props.remote&&t.setSelected()}),St(()=>n.value,(h,p)=>{const{remote:m,valueKey:g}=t.props;if(h!==p&&(t.onOptionDestroy(p,u.proxy),t.onOptionCreate(u.proxy)),!n.created&&!m){if(g&&Yn(h)&&Yn(p)&&h[g]===p[g])return;t.setSelected()}}),St(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0}),{select:t,currentLabel:a,currentValue:o,itemSelected:r,isDisabled:l,hoverItem:d,updateOption:f}}const YPe=Ne({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(n){const e=Rt("select"),t=Oa(),i=W(()=>[e.be("dropdown","item"),e.is("disabled",S(o)),e.is("selected",S(a)),e.is("hovering",S(f))]),r=Ui({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:u,updateOption:c}=XPe(n,r),{visible:d,hover:f}=js(r),h=Qn().proxy;l.onOptionCreate(h),Vi(()=>{const m=h.value,{selected:g}=l.states,v=g.some(_=>_.value===h.value);cn(()=>{l.states.cachedOptions.get(m)===h&&!v&&l.states.cachedOptions.delete(m)}),l.onOptionDestroy(m,h)});function p(){o.value||l.handleOptionSelect(h)}return{ns:e,id:t,containerKls:i,currentLabel:s,itemSelected:a,isDisabled:o,select:l,hoverItem:u,updateOption:c,visible:d,hover:f,selectOptionClick:p,states:r}}});function QPe(n,e,t,i,r,s){return Vn((j(),_e("li",{id:n.id,class:ee(n.containerKls),role:"option","aria-disabled":n.isDisabled||void 0,"aria-selected":n.itemSelected,onMousemove:n.hoverItem,onClick:wn(n.selectOptionClick,["stop"])},[at(n.$slots,"default",{},()=>[Te("span",null,Lt(n.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Oi,n.visible]])}var $F=Vt(YPe,[["render",QPe],["__file","option.vue"]]);const ZPe=Ne({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const n=Zt(gb),e=Rt("select"),t=W(()=>n.props.popperClass),i=W(()=>n.props.multiple),r=W(()=>n.props.fitInputWidth),s=ae("");function a(){var o;s.value=`${(o=n.selectRef)==null?void 0:o.offsetWidth}px`}return Ln(()=>{a(),Br(n.selectRef,a)}),{ns:e,minWidth:s,popperClass:t,isMultiple:i,isFitInputWidth:r}}});function JPe(n,e,t,i,r,s){return j(),_e("div",{class:ee([n.ns.b("dropdown"),n.ns.is("multiple",n.isMultiple),n.popperClass]),style:Jt({[n.isFitInputWidth?"width":"minWidth"]:n.minWidth})},[n.$slots.header?(j(),_e("div",{key:0,class:ee(n.ns.be("dropdown","header"))},[at(n.$slots,"header")],2)):ot("v-if",!0),at(n.$slots,"default"),n.$slots.footer?(j(),_e("div",{key:1,class:ee(n.ns.be("dropdown","footer"))},[at(n.$slots,"footer")],2)):ot("v-if",!0)],6)}var e5e=Vt(ZPe,[["render",JPe],["__file","select-dropdown.vue"]]);const t5e=11,n5e=(n,e)=>{const{t}=wi(),i=Oa(),r=Rt("select"),s=Rt("input"),a=Ui({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),o=ae(null),l=ae(null),u=ae(null),c=ae(null),d=ae(null),f=ae(null),h=ae(null),p=ae(null),m=ae(null),g=ae(null),v=ae(null),_=ae(null),{isComposing:y,handleCompositionStart:b,handleCompositionUpdate:x,handleCompositionEnd:w}=pT({afterComposition:ut=>Re(ut)}),{wrapperRef:A,isFocused:T,handleBlur:C}=w0(d,{beforeFocus(){return G.value},afterFocus(){n.automaticDropdown&&!E.value&&(E.value=!0,a.menuVisibleOnFocus=!0)},beforeBlur(ut){var Pt,Xt;return((Pt=u.value)==null?void 0:Pt.isFocusInsideContent(ut))||((Xt=c.value)==null?void 0:Xt.isFocusInsideContent(ut))},afterBlur(){E.value=!1,a.menuVisibleOnFocus=!1}}),E=ae(!1),I=ae(),{form:k,formItem:O}=to(),{inputId:U}=hc(n,{formItemContext:O}),{valueOnClear:z,isEmptyValue:L}=GI(n),G=W(()=>n.disabled||(k==null?void 0:k.disabled)),H=W(()=>Bt(n.modelValue)?n.modelValue.length>0:!L(n.modelValue)),F=W(()=>{var ut;return(ut=k==null?void 0:k.statusIcon)!=null?ut:!1}),X=W(()=>n.clearable&&!G.value&&a.inputHovering&&H.value),te=W(()=>n.remote&&n.filterable&&!n.remoteShowSuffix?"":n.suffixIcon),re=W(()=>r.is("reverse",te.value&&E.value)),ie=W(()=>(O==null?void 0:O.validateState)||""),le=W(()=>KI[ie.value]),ge=W(()=>n.remote?300:0),pe=W(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!a.inputValue&&a.options.size===0?!1:n.filterable&&a.inputValue&&a.options.size>0&&ye.value===0?n.noMatchText||t("el.select.noMatch"):a.options.size===0?n.noDataText||t("el.select.noData"):null),ye=W(()=>Oe.value.filter(ut=>ut.visible).length),Oe=W(()=>{const ut=Array.from(a.options.values()),Pt=[];return a.optionValues.forEach(Xt=>{const kn=ut.findIndex(Kn=>Kn.value===Xt);kn>-1&&Pt.push(ut[kn])}),Pt.length>=ut.length?Pt:ut}),Be=W(()=>Array.from(a.cachedOptions.values())),Ye=W(()=>{const ut=Oe.value.filter(Pt=>!Pt.created).some(Pt=>Pt.currentLabel===a.inputValue);return n.filterable&&n.allowCreate&&a.inputValue!==""&&!ut}),Ze=()=>{n.filterable&&pn(n.filterMethod)||n.filterable&&n.remote&&pn(n.remoteMethod)||Oe.value.forEach(ut=>{var Pt;(Pt=ut.updateOption)==null||Pt.call(ut,a.inputValue)})},Q=ws(),me=W(()=>["small"].includes(Q.value)?"small":"default"),ce=W({get(){return E.value&&pe.value!==!1},set(ut){E.value=ut}}),je=W(()=>{if(n.multiple&&!Xi(n.modelValue))return yo(n.modelValue).length===0&&!a.inputValue;const ut=Bt(n.modelValue)?n.modelValue[0]:n.modelValue;return n.filterable||Xi(ut)?!a.inputValue:!0}),Fe=W(()=>{var ut;const Pt=(ut=n.placeholder)!=null?ut:t("el.select.placeholder");return n.multiple||!H.value?Pt:a.selectedLabel}),nt=W(()=>a6?null:"mouseenter");St(()=>n.modelValue,(ut,Pt)=>{n.multiple&&n.filterable&&!n.reserveKeyword&&(a.inputValue="",We("")),it(),!La(ut,Pt)&&n.validateEvent&&(O==null||O.validate("change").catch(Xt=>void 0))},{flush:"post",deep:!0}),St(()=>E.value,ut=>{ut?We(a.inputValue):(a.inputValue="",a.previousQuery=null,a.isBeforeHide=!0),e("visible-change",ut)}),St(()=>a.options.entries(),()=>{xi&&(it(),n.defaultFirstOption&&(n.filterable||n.remote)&&ye.value&&Ke())},{flush:"post"}),St(()=>a.hoveringIndex,ut=>{yn(ut)&&ut>-1?I.value=Oe.value[ut]||{}:I.value={},Oe.value.forEach(Pt=>{Pt.hover=I.value===Pt})}),ya(()=>{a.isBeforeHide||Ze()});const We=ut=>{a.previousQuery===ut||y.value||(a.previousQuery=ut,n.filterable&&pn(n.filterMethod)?n.filterMethod(ut):n.filterable&&n.remote&&pn(n.remoteMethod)&&n.remoteMethod(ut),n.defaultFirstOption&&(n.filterable||n.remote)&&ye.value?cn(Ke):cn(K))},Ke=()=>{const ut=Oe.value.filter(Kn=>Kn.visible&&!Kn.disabled&&!Kn.states.groupDisabled),Pt=ut.find(Kn=>Kn.created),Xt=ut[0],kn=Oe.value.map(Kn=>Kn.value);a.hoveringIndex=De(kn,Pt||Xt)},it=()=>{if(n.multiple)a.selectedLabel="";else{const Pt=Bt(n.modelValue)?n.modelValue[0]:n.modelValue,Xt=be(Pt);a.selectedLabel=Xt.currentLabel,a.selected=[Xt];return}const ut=[];Xi(n.modelValue)||yo(n.modelValue).forEach(Pt=>{ut.push(be(Pt))}),a.selected=ut},be=ut=>{let Pt;const Xt=B2(ut);for(let rt=a.cachedOptions.size-1;rt>=0;rt--){const ci=Be.value[rt];if(Xt?vs(ci.value,n.valueKey)===vs(ut,n.valueKey):ci.value===ut){Pt={value:ut,currentLabel:ci.currentLabel,get isDisabled(){return ci.isDisabled}};break}}if(Pt)return Pt;const kn=Xt?ut.label:ut??"";return{value:ut,currentLabel:kn}},K=()=>{a.hoveringIndex=Oe.value.findIndex(ut=>a.selected.some(Pt=>fi(Pt)===fi(ut)))},ne=()=>{a.selectionWidth=l.value.getBoundingClientRect().width},Se=()=>{a.calculatorWidth=f.value.getBoundingClientRect().width},ze=()=>{a.collapseItemWidth=v.value.getBoundingClientRect().width},Je=()=>{var ut,Pt;(Pt=(ut=u.value)==null?void 0:ut.updatePopper)==null||Pt.call(ut)},Tt=()=>{var ut,Pt;(Pt=(ut=c.value)==null?void 0:ut.updatePopper)==null||Pt.call(ut)},At=()=>{a.inputValue.length>0&&!E.value&&(E.value=!0),We(a.inputValue)},Re=ut=>{if(a.inputValue=ut.target.value,n.remote)wt();else return At()},wt=Rl(()=>{At()},ge.value),vt=ut=>{La(n.modelValue,ut)||e(er,ut)},q=ut=>Lee(ut,Pt=>{const Xt=a.cachedOptions.get(Pt);return Xt&&!Xt.disabled&&!Xt.states.groupDisabled}),xe=ut=>{if(n.multiple&&ut.code!==Kt.delete&&ut.target.value.length<=0){const Pt=yo(n.modelValue).slice(),Xt=q(Pt);if(Xt<0)return;const kn=Pt[Xt];Pt.splice(Xt,1),e($n,Pt),vt(Pt),e("remove-tag",kn)}},ve=(ut,Pt)=>{const Xt=a.selected.indexOf(Pt);if(Xt>-1&&!G.value){const kn=yo(n.modelValue).slice();kn.splice(Xt,1),e($n,kn),vt(kn),e("remove-tag",Pt.value)}ut.stopPropagation(),jt()},ke=ut=>{ut.stopPropagation();const Pt=n.multiple?[]:z.value;if(n.multiple)for(const Xt of a.selected)Xt.isDisabled&&Pt.push(Xt.value);e($n,Pt),vt(Pt),a.hoveringIndex=-1,E.value=!1,e("clear"),jt()},we=ut=>{var Pt;if(n.multiple){const Xt=yo((Pt=n.modelValue)!=null?Pt:[]).slice(),kn=De(Xt,ut);kn>-1?Xt.splice(kn,1):(n.multipleLimit<=0||Xt.length<n.multipleLimit)&&Xt.push(ut.value),e($n,Xt),vt(Xt),ut.created&&We(""),n.filterable&&!n.reserveKeyword&&(a.inputValue="")}else e($n,ut.value),vt(ut.value),E.value=!1;jt(),!E.value&&cn(()=>{xt(ut)})},De=(ut=[],Pt)=>Xi(Pt)?-1:Yn(Pt.value)?ut.findIndex(Xt=>La(vs(Xt,n.valueKey),fi(Pt))):ut.indexOf(Pt.value),xt=ut=>{var Pt,Xt,kn,Kn,rt;const ci=Bt(ut)?ut[0]:ut;let pt=null;if(ci!=null&&ci.value){const Le=Oe.value.filter(Et=>Et.value===ci.value);Le.length>0&&(pt=Le[0].$el)}if(u.value&&pt){const Le=(Kn=(kn=(Xt=(Pt=u.value)==null?void 0:Pt.popperRef)==null?void 0:Xt.contentRef)==null?void 0:kn.querySelector)==null?void 0:Kn.call(kn,`.${r.be("dropdown","wrap")}`);Le&&tF(Le,pt)}(rt=_.value)==null||rt.handleScroll()},Pe=ut=>{a.options.set(ut.value,ut),a.cachedOptions.set(ut.value,ut)},Dt=(ut,Pt)=>{a.options.get(ut)===Pt&&a.options.delete(ut)},dt=W(()=>{var ut,Pt;return(Pt=(ut=u.value)==null?void 0:ut.popperRef)==null?void 0:Pt.contentRef}),Mt=()=>{a.isBeforeHide=!1,cn(()=>xt(a.selected))},jt=()=>{var ut;(ut=d.value)==null||ut.focus()},Ft=()=>{var ut;if(E.value){E.value=!1,cn(()=>{var Pt;return(Pt=d.value)==null?void 0:Pt.blur()});return}(ut=d.value)==null||ut.blur()},Sn=ut=>{ke(ut)},Pn=ut=>{if(E.value=!1,T.value){const Pt=new FocusEvent("focus",ut);cn(()=>C(Pt))}},Ti=()=>{a.inputValue.length>0?a.inputValue="":E.value=!1},jn=()=>{G.value||(a6&&(a.inputHovering=!0),a.menuVisibleOnFocus?a.menuVisibleOnFocus=!1:E.value=!E.value)},dr=()=>{if(!E.value)jn();else{const ut=Oe.value[a.hoveringIndex];ut&&!ut.isDisabled&&we(ut)}},fi=ut=>Yn(ut.value)?vs(ut.value,n.valueKey):ut.value,J=W(()=>Oe.value.filter(ut=>ut.visible).every(ut=>ut.isDisabled)),ue=W(()=>n.multiple?n.collapseTags?a.selected.slice(0,n.maxCollapseTags):a.selected:[]),en=W(()=>n.multiple?n.collapseTags?a.selected.slice(n.maxCollapseTags):[]:[]),Ie=ut=>{if(!E.value){E.value=!0;return}if(!(a.options.size===0||ye.value===0||y.value)&&!J.value){ut==="next"?(a.hoveringIndex++,a.hoveringIndex===a.options.size&&(a.hoveringIndex=0)):ut==="prev"&&(a.hoveringIndex--,a.hoveringIndex<0&&(a.hoveringIndex=a.options.size-1));const Pt=Oe.value[a.hoveringIndex];(Pt.isDisabled||!Pt.visible)&&Ie(ut),cn(()=>xt(I.value))}},de=()=>{if(!l.value)return 0;const ut=window.getComputedStyle(l.value);return Number.parseFloat(ut.gap||"6px")},kt=W(()=>{const ut=de();return{maxWidth:`${v.value&&n.maxCollapseTags===1?a.selectionWidth-a.collapseItemWidth-ut:a.selectionWidth}px`}}),Ct=W(()=>({maxWidth:`${a.selectionWidth}px`})),Ut=W(()=>({width:`${Math.max(a.calculatorWidth,t5e)}px`}));return Br(l,ne),Br(f,Se),Br(m,Je),Br(A,Je),Br(g,Tt),Br(v,ze),Ln(()=>{it()}),{inputId:U,contentId:i,nsSelect:r,nsInput:s,states:a,isFocused:T,expanded:E,optionsArray:Oe,hoverOption:I,selectSize:Q,filteredOptionsCount:ye,resetCalculatorWidth:Se,updateTooltip:Je,updateTagTooltip:Tt,debouncedOnInputChange:wt,onInput:Re,deletePrevTag:xe,deleteTag:ve,deleteSelected:ke,handleOptionSelect:we,scrollToOption:xt,hasModelValue:H,shouldShowPlaceholder:je,currentPlaceholder:Fe,mouseEnterEventName:nt,needStatusIcon:F,showClose:X,iconComponent:te,iconReverse:re,validateState:ie,validateIcon:le,showNewOption:Ye,updateOptions:Ze,collapseTagSize:me,setSelected:it,selectDisabled:G,emptyText:pe,handleCompositionStart:b,handleCompositionUpdate:x,handleCompositionEnd:w,onOptionCreate:Pe,onOptionDestroy:Dt,handleMenuEnter:Mt,focus:jt,blur:Ft,handleClearClick:Sn,handleClickOutside:Pn,handleEsc:Ti,toggleMenu:jn,selectOption:dr,getValueKey:fi,navigateOptions:Ie,dropdownMenuVisible:ce,showTagList:ue,collapseTagList:en,tagStyle:kt,collapseTagStyle:Ct,inputStyle:Ut,popperRef:dt,inputRef:d,tooltipRef:u,tagTooltipRef:c,calculatorRef:f,prefixRef:h,suffixRef:p,selectRef:o,wrapperRef:A,selectionRef:l,scrollbarRef:_,menuRef:m,tagMenuRef:g,collapseItemRef:v}};var i5e=Ne({name:"ElOptions",setup(n,{slots:e}){const t=Zt(gb);let i=[];return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];function l(u){Bt(u)&&u.forEach(c=>{var d,f,h,p;const m=(d=(c==null?void 0:c.type)||{})==null?void 0:d.name;m==="ElOptionGroup"?l(!un(c.children)&&!Bt(c.children)&&pn((f=c.children)==null?void 0:f.default)?(h=c.children)==null?void 0:h.default():c.children):m==="ElOption"?o.push((p=c.props)==null?void 0:p.value):Bt(c.children)&&l(c.children)})}return a.length&&l((s=a[0])==null?void 0:s.children),La(o,i)||(i=o,t&&(t.states.optionValues=o)),a}}});const r5e=zt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:ks,effect:{type:et(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:et(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ua.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:nr,default:xh},fitInputWidth:Boolean,suffixIcon:{type:nr,default:Sh},tagType:{...rh.type,default:"info"},tagEffect:{...rh.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:et(String),values:wh,default:"bottom-start"},fallbackPlacements:{type:et(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...fb,...Ba(["ariaLabel"])}),w$="ElSelect",s5e=Ne({name:w$,componentName:w$,components:{ElSelectMenu:e5e,ElOption:$F,ElOptions:i5e,ElTag:p_,ElScrollbar:nf,ElTooltip:Ja,ElIcon:rn},directives:{ClickOutside:sh},props:r5e,emits:[$n,er,"remove-tag","clear","visible-change","focus","blur"],setup(n,{emit:e}){const t=W(()=>{const{modelValue:a,multiple:o}=n,l=o?[]:void 0;return Bt(a)?o?a:l:o?l:a}),i=Ui({...js(n),modelValue:t}),r=n5e(i,e);ui(gb,Ui({props:i,states:r.states,optionsArray:r.optionsArray,handleOptionSelect:r.handleOptionSelect,onOptionCreate:r.onOptionCreate,onOptionDestroy:r.onOptionDestroy,selectRef:r.selectRef,setSelected:r.setSelected}));const s=W(()=>n.multiple?r.states.selected.map(a=>a.currentLabel):r.states.selectedLabel);return{...r,modelValue:t,selectedLabel:s}}});function a5e(n,e,t,i,r,s){const a=Ht("el-tag"),o=Ht("el-tooltip"),l=Ht("el-icon"),u=Ht("el-option"),c=Ht("el-options"),d=Ht("el-scrollbar"),f=Ht("el-select-menu"),h=PI("click-outside");return Vn((j(),_e("div",{ref:"selectRef",class:ee([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),[Hx(n.mouseEnterEventName)]:p=>n.states.inputHovering=!0,onMouseleave:p=>n.states.inputHovering=!1},[he(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,placement:n.placement,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,pure:"",trigger:"click",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:p=>n.states.isBeforeHide=!1},{default:Ae(()=>{var p;return[Te("div",{ref:"wrapperRef",class:ee([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:wn(n.toggleMenu,["prevent"])},[n.$slots.prefix?(j(),_e("div",{key:0,ref:"prefixRef",class:ee(n.nsSelect.e("prefix"))},[at(n.$slots,"prefix")],2)):ot("v-if",!0),Te("div",{ref:"selectionRef",class:ee([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.states.selected.length)])},[n.multiple?at(n.$slots,"tag",{key:0},()=>[(j(!0),_e(an,null,ti(n.showTagList,m=>(j(),_e("div",{key:n.getValueKey(m),class:ee(n.nsSelect.e("selected-item"))},[he(a,{closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.tagStyle),onClose:g=>n.deleteTag(g,m)},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[An(Lt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.states.selected.length>n.maxCollapseTags?(j(),gt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Ae(()=>[Te("div",{ref:"collapseItemRef",class:ee(n.nsSelect.e("selected-item"))},[he(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.collapseTagStyle)},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))}," + "+Lt(n.states.selected.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Ae(()=>[Te("div",{ref:"tagMenuRef",class:ee(n.nsSelect.e("selection"))},[(j(!0),_e(an,null,ti(n.collapseTagList,m=>(j(),_e("div",{key:n.getValueKey(m),class:ee(n.nsSelect.e("selected-item"))},[he(a,{class:"in-tooltip",closable:!n.selectDisabled&&!m.isDisabled,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:g=>n.deleteTag(g,m)},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:m.currentLabel,value:m.value},()=>[An(Lt(m.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):ot("v-if",!0)]):ot("v-if",!0),Te("div",{class:ee([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Vn(Te("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":m=>n.states.inputValue=m,type:"text",name:n.name,class:ee([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,autocomplete:n.autocomplete,style:Jt(n.inputStyle),tabindex:n.tabindex,role:"combobox",readonly:!n.filterable,spellcheck:"false","aria-activedescendant":((p=n.hoverOption)==null?void 0:p.id)||"","aria-controls":n.contentId,"aria-expanded":n.dropdownMenuVisible,"aria-label":n.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[ur(wn(m=>n.navigateOptions("next"),["stop","prevent"]),["down"]),ur(wn(m=>n.navigateOptions("prev"),["stop","prevent"]),["up"]),ur(wn(n.handleEsc,["stop","prevent"]),["esc"]),ur(wn(n.selectOption,["stop","prevent"]),["enter"]),ur(wn(n.deletePrevTag,["stop"]),["delete"])],onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onInput:n.onInput,onClick:wn(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[OI,n.states.inputValue]]),n.filterable?(j(),_e("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:ee(n.nsSelect.e("input-calculator")),textContent:Lt(n.states.inputValue)},null,10,["textContent"])):ot("v-if",!0)],2),n.shouldShowPlaceholder?(j(),_e("div",{key:1,class:ee([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?at(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[Te("span",null,Lt(n.currentPlaceholder),1)]):(j(),_e("span",{key:1},Lt(n.currentPlaceholder),1))],2)):ot("v-if",!0)],2),Te("div",{ref:"suffixRef",class:ee(n.nsSelect.e("suffix"))},[n.iconComponent&&!n.showClose?(j(),gt(l,{key:0,class:ee([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.iconReverse])},{default:Ae(()=>[(j(),gt(ei(n.iconComponent)))]),_:1},8,["class"])):ot("v-if",!0),n.showClose&&n.clearIcon?(j(),gt(l,{key:1,class:ee([n.nsSelect.e("caret"),n.nsSelect.e("icon"),n.nsSelect.e("clear")]),onClick:n.handleClearClick},{default:Ae(()=>[(j(),gt(ei(n.clearIcon)))]),_:1},8,["class","onClick"])):ot("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(j(),gt(l,{key:2,class:ee([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:Ae(()=>[(j(),gt(ei(n.validateIcon)))]),_:1},8,["class"])):ot("v-if",!0)],2)],10,["onClick"])]}),content:Ae(()=>[he(f,{ref:"menuRef"},{default:Ae(()=>[n.$slots.header?(j(),_e("div",{key:0,class:ee(n.nsSelect.be("dropdown","header")),onClick:wn(()=>{},["stop"])},[at(n.$slots,"header")],10,["onClick"])):ot("v-if",!0),Vn(he(d,{id:n.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":n.nsSelect.be("dropdown","wrap"),"view-class":n.nsSelect.be("dropdown","list"),class:ee([n.nsSelect.is("empty",n.filteredOptionsCount===0)]),role:"listbox","aria-label":n.ariaLabel,"aria-orientation":"vertical"},{default:Ae(()=>[n.showNewOption?(j(),gt(u,{key:0,value:n.states.inputValue,created:!0},null,8,["value"])):ot("v-if",!0),he(c,null,{default:Ae(()=>[at(n.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Oi,n.states.options.size>0&&!n.loading]]),n.$slots.loading&&n.loading?(j(),_e("div",{key:1,class:ee(n.nsSelect.be("dropdown","loading"))},[at(n.$slots,"loading")],2)):n.loading||n.filteredOptionsCount===0?(j(),_e("div",{key:2,class:ee(n.nsSelect.be("dropdown","empty"))},[at(n.$slots,"empty",{},()=>[Te("span",null,Lt(n.emptyText),1)])],2)):ot("v-if",!0),n.$slots.footer?(j(),_e("div",{key:3,class:ee(n.nsSelect.be("dropdown","footer")),onClick:wn(()=>{},["stop"])},[at(n.$slots,"footer")],10,["onClick"])):ot("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[h,n.handleClickOutside,n.popperRef]])}var o5e=Vt(s5e,[["render",a5e],["__file","select.vue"]]);const l5e=Ne({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(n){const e=Rt("select"),t=ae(null),i=Qn(),r=ae([]);ui(uie,Ui({...js(n)}));const s=W(()=>r.value.some(u=>u.visible===!0)),a=u=>{var c,d;return((c=u.type)==null?void 0:c.name)==="ElOption"&&!!((d=u.component)!=null&&d.proxy)},o=u=>{const c=yo(u),d=[];return c.forEach(f=>{var h,p;a(f)?d.push(f.component.proxy):(h=f.children)!=null&&h.length?d.push(...o(f.children)):(p=f.component)!=null&&p.subTree&&d.push(...o(f.component.subTree))}),d},l=()=>{r.value=o(i.subTree)};return Ln(()=>{l()}),Hee(t,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:t,visible:s,ns:e}}});function u5e(n,e,t,i,r,s){return Vn((j(),_e("ul",{ref:"groupRef",class:ee(n.ns.be("group","wrap"))},[Te("li",{class:ee(n.ns.be("group","title"))},Lt(n.label),3),Te("li",null,[Te("ul",{class:ee(n.ns.b("group"))},[at(n.$slots,"default")],2)])],2)),[[Oi,n.visible]])}var cie=Vt(l5e,[["render",u5e],["__file","option-group.vue"]]);const Ng=Nn(o5e,{Option:$F,OptionGroup:cie}),I3=Xr($F),c5e=Xr(cie),GF=()=>Zt(lie,{}),d5e=zt({pageSize:{type:Number,required:!0},pageSizes:{type:et(Array),default:()=>Kr([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:tf},appendSizeTo:String}),f5e=Ne({name:"ElPaginationSizes"}),h5e=Ne({...f5e,props:d5e,emits:["page-size-change"],setup(n,{emit:e}){const t=n,{t:i}=wi(),r=Rt("pagination"),s=GF(),a=ae(t.pageSize);St(()=>t.pageSizes,(u,c)=>{if(!La(u,c)&&Bt(u)){const d=u.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),St(()=>t.pageSize,u=>{a.value=u});const o=W(()=>t.pageSizes);function l(u){var c;u!==a.value&&(a.value=u,(c=s.handleSizeChange)==null||c.call(s,Number(u)))}return(u,c)=>(j(),_e("span",{class:ee(S(r).e("sizes"))},[he(S(Ng),{"model-value":a.value,disabled:u.disabled,"popper-class":u.popperClass,size:u.size,teleported:u.teleported,"validate-event":!1,"append-to":u.appendSizeTo,onChange:l},{default:Ae(()=>[(j(!0),_e(an,null,ti(S(o),d=>(j(),gt(S(I3),{key:d,value:d,label:d+S(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var p5e=Vt(h5e,[["__file","sizes.vue"]]);const m5e=zt({size:{type:String,values:tf}}),g5e=Ne({name:"ElPaginationJumper"}),v5e=Ne({...g5e,props:m5e,setup(n){const{t:e}=wi(),t=Rt("pagination"),{pageCount:i,disabled:r,currentPage:s,changeEvent:a}=GF(),o=ae(),l=W(()=>{var d;return(d=o.value)!=null?d:s==null?void 0:s.value});function u(d){o.value=d?+d:""}function c(d){d=Math.trunc(+d),a==null||a(d),o.value=void 0}return(d,f)=>(j(),_e("span",{class:ee(S(t).e("jump")),disabled:S(r)},[Te("span",{class:ee([S(t).e("goto")])},Lt(S(e)("el.pagination.goto")),3),he(S(So),{size:d.size,class:ee([S(t).e("editor"),S(t).is("in-pagination")]),min:1,max:S(i),disabled:S(r),"model-value":S(l),"validate-event":!1,"aria-label":S(e)("el.pagination.page"),type:"number","onUpdate:modelValue":u,onChange:c},null,8,["size","class","max","disabled","model-value","aria-label"]),Te("span",{class:ee([S(t).e("classifier")])},Lt(S(e)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var y5e=Vt(v5e,[["__file","jumper.vue"]]);const _5e=zt({total:{type:Number,default:1e3}}),b5e=Ne({name:"ElPaginationTotal"}),S5e=Ne({...b5e,props:_5e,setup(n){const{t:e}=wi(),t=Rt("pagination"),{disabled:i}=GF();return(r,s)=>(j(),_e("span",{class:ee(S(t).e("total")),disabled:S(i)},Lt(S(e)("el.pagination.total",{total:r.total})),11,["disabled"]))}});var x5e=Vt(S5e,[["__file","total.vue"]]);const w5e=zt({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),T5e=Ne({name:"ElPaginationPager"}),C5e=Ne({...T5e,props:w5e,emits:["change"],setup(n,{emit:e}){const t=n,i=Rt("pager"),r=Rt("icon"),{t:s}=wi(),a=ae(!1),o=ae(!1),l=ae(!1),u=ae(!1),c=ae(!1),d=ae(!1),f=W(()=>{const b=t.pagerCount,x=(b-1)/2,w=Number(t.currentPage),A=Number(t.pageCount);let T=!1,C=!1;A>b&&(w>b-x&&(T=!0),w<A-x&&(C=!0));const E=[];if(T&&!C){const I=A-(b-2);for(let k=I;k<A;k++)E.push(k)}else if(!T&&C)for(let I=2;I<b;I++)E.push(I);else if(T&&C){const I=Math.floor(b/2)-1;for(let k=w-I;k<=w+I;k++)E.push(k)}else for(let I=2;I<A;I++)E.push(I);return E}),h=W(()=>["more","btn-quickprev",r.b(),i.is("disabled",t.disabled)]),p=W(()=>["more","btn-quicknext",r.b(),i.is("disabled",t.disabled)]),m=W(()=>t.disabled?-1:0);ya(()=>{const b=(t.pagerCount-1)/2;a.value=!1,o.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-b&&(a.value=!0),t.currentPage<t.pageCount-b&&(o.value=!0))});function g(b=!1){t.disabled||(b?l.value=!0:u.value=!0)}function v(b=!1){b?c.value=!0:d.value=!0}function _(b){const x=b.target;if(x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("number")){const w=Number(x.textContent);w!==t.currentPage&&e("change",w)}else x.tagName.toLowerCase()==="li"&&Array.from(x.classList).includes("more")&&y(b)}function y(b){const x=b.target;if(x.tagName.toLowerCase()==="ul"||t.disabled)return;let w=Number(x.textContent);const A=t.pageCount,T=t.currentPage,C=t.pagerCount-2;x.className.includes("more")&&(x.className.includes("quickprev")?w=T-C:x.className.includes("quicknext")&&(w=T+C)),Number.isNaN(+w)||(w<1&&(w=1),w>A&&(w=A)),w!==T&&e("change",w)}return(b,x)=>(j(),_e("ul",{class:ee(S(i).b()),onClick:y,onKeyup:ur(_,["enter"])},[b.pageCount>0?(j(),_e("li",{key:0,class:ee([[S(i).is("active",b.currentPage===1),S(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===1,"aria-label":S(s)("el.pagination.currentPage",{pager:1}),tabindex:S(m)}," 1 ",10,["aria-current","aria-label","tabindex"])):ot("v-if",!0),a.value?(j(),_e("li",{key:1,class:ee(S(h)),tabindex:S(m),"aria-label":S(s)("el.pagination.prevPages",{pager:b.pagerCount-2}),onMouseenter:w=>g(!0),onMouseleave:w=>l.value=!1,onFocus:w=>v(!0),onBlur:w=>c.value=!1},[(l.value||c.value)&&!b.disabled?(j(),gt(S(n0),{key:0})):(j(),gt(S(xV),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):ot("v-if",!0),(j(!0),_e(an,null,ti(S(f),w=>(j(),_e("li",{key:w,class:ee([[S(i).is("active",b.currentPage===w),S(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===w,"aria-label":S(s)("el.pagination.currentPage",{pager:w}),tabindex:S(m)},Lt(w),11,["aria-current","aria-label","tabindex"]))),128)),o.value?(j(),_e("li",{key:2,class:ee(S(p)),tabindex:S(m),"aria-label":S(s)("el.pagination.nextPages",{pager:b.pagerCount-2}),onMouseenter:w=>g(),onMouseleave:w=>u.value=!1,onFocus:w=>v(),onBlur:w=>d.value=!1},[(u.value||d.value)&&!b.disabled?(j(),gt(S(i0),{key:0})):(j(),gt(S(xV),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):ot("v-if",!0),b.pageCount>1?(j(),_e("li",{key:3,class:ee([[S(i).is("active",b.currentPage===b.pageCount),S(i).is("disabled",b.disabled)],"number"]),"aria-current":b.currentPage===b.pageCount,"aria-label":S(s)("el.pagination.currentPage",{pager:b.pageCount}),tabindex:S(m)},Lt(b.pageCount),11,["aria-current","aria-label","tabindex"])):ot("v-if",!0)],42,["onKeyup"]))}});var A5e=Vt(C5e,[["__file","pager.vue"]]);const Lo=n=>typeof n!="number",E5e=zt({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:n=>yn(n)&&Math.trunc(n)===n&&n>4&&n<22&&n%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:et(Array),default:()=>Kr([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:nr,default:()=>t0},nextText:{type:String,default:""},nextIcon:{type:nr,default:()=>Qo},teleported:{type:Boolean,default:!0},small:Boolean,size:ks,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),M5e={"update:current-page":n=>yn(n),"update:page-size":n=>yn(n),"size-change":n=>yn(n),change:(n,e)=>yn(n)&&yn(e),"current-change":n=>yn(n),"prev-click":n=>yn(n),"next-click":n=>yn(n)},T$="ElPagination";var I5e=Ne({name:T$,props:E5e,emits:M5e,setup(n,{emit:e,slots:t}){const{t:i}=wi(),r=Rt("pagination"),s=Qn().vnode.props||{},a=Kee(),o=W(()=>{var x;return n.small?"small":(x=n.size)!=null?x:a.value});Bp({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},W(()=>!!n.small));const l="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,u="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,c=W(()=>{if(Lo(n.total)&&Lo(n.pageCount)||!Lo(n.currentPage)&&!l)return!1;if(n.layout.includes("sizes")){if(Lo(n.pageCount)){if(!Lo(n.total)&&!Lo(n.pageSize)&&!u)return!1}else if(!u)return!1}return!0}),d=ae(Lo(n.defaultPageSize)?10:n.defaultPageSize),f=ae(Lo(n.defaultCurrentPage)?1:n.defaultCurrentPage),h=W({get(){return Lo(n.pageSize)?d.value:n.pageSize},set(x){Lo(n.pageSize)&&(d.value=x),u&&(e("update:page-size",x),e("size-change",x))}}),p=W(()=>{let x=0;return Lo(n.pageCount)?Lo(n.total)||(x=Math.max(1,Math.ceil(n.total/h.value))):x=n.pageCount,x}),m=W({get(){return Lo(n.currentPage)?f.value:n.currentPage},set(x){let w=x;x<1?w=1:x>p.value&&(w=p.value),Lo(n.currentPage)&&(f.value=w),l&&(e("update:current-page",w),e("current-change",w))}});St(p,x=>{m.value>x&&(m.value=x)}),St([m,h],x=>{e("change",...x)},{flush:"post"});function g(x){m.value=x}function v(x){h.value=x;const w=p.value;m.value>w&&(m.value=w)}function _(){n.disabled||(m.value-=1,e("prev-click",m.value))}function y(){n.disabled||(m.value+=1,e("next-click",m.value))}function b(x,w){x&&(x.props||(x.props={}),x.props.class=[x.props.class,w].join(" "))}return ui(lie,{pageCount:p,disabled:W(()=>n.disabled),currentPage:m,changeEvent:g,handleSizeChange:v}),()=>{var x,w;if(!c.value)return i("el.pagination.deprecationWarning"),null;if(!n.layout||n.hideOnSinglePage&&p.value<=1)return null;const A=[],T=[],C=ln("div",{class:r.e("rightwrapper")},T),E={prev:ln(GPe,{disabled:n.disabled,currentPage:m.value,prevText:n.prevText,prevIcon:n.prevIcon,onClick:_}),jumper:ln(y5e,{size:o.value}),pager:ln(A5e,{currentPage:m.value,pageCount:p.value,pagerCount:n.pagerCount,onChange:g,disabled:n.disabled}),next:ln(KPe,{disabled:n.disabled,currentPage:m.value,pageCount:p.value,nextText:n.nextText,nextIcon:n.nextIcon,onClick:y}),sizes:ln(p5e,{pageSize:h.value,pageSizes:n.pageSizes,popperClass:n.popperClass,disabled:n.disabled,teleported:n.teleported,size:o.value,appendSizeTo:n.appendSizeTo}),slot:(w=(x=t==null?void 0:t.default)==null?void 0:x.call(t))!=null?w:null,total:ln(x5e,{total:Lo(n.total)?0:n.total})},I=n.layout.split(",").map(O=>O.trim());let k=!1;return I.forEach(O=>{if(O==="->"){k=!0;return}k?T.push(E[O]):A.push(E[O])}),b(A[0],r.is("first")),b(A[A.length-1],r.is("last")),k&&T.length>0&&(b(T[0],r.is("first")),b(T[T.length-1],r.is("last")),A.push(C)),ln("div",{class:[r.b(),r.is("background",n.background),r.m(o.value)]},A)}}});const D5e=Nn(I5e),R5e=zt({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:c6,default:"primary"},cancelButtonType:{type:String,values:c6,default:"text"},icon:{type:nr,default:()=>T2e},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:ua.teleported,persistent:ua.persistent,width:{type:[String,Number],default:150}}),P5e={confirm:n=>n instanceof MouseEvent,cancel:n=>n instanceof MouseEvent},k5e=Ne({name:"ElPopconfirm"}),L5e=Ne({...k5e,props:R5e,emits:P5e,setup(n,{emit:e}){const t=n,{t:i}=wi(),r=Rt("popconfirm"),s=ae(),a=()=>{var f,h;(h=(f=s.value)==null?void 0:f.onClose)==null||h.call(f)},o=W(()=>({width:ns(t.width)})),l=f=>{e("confirm",f),a()},u=f=>{e("cancel",f),a()},c=W(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=W(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(f,h)=>(j(),gt(S(Ja),si({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},f.$attrs,{"popper-class":`${S(r).namespace.value}-popover`,"popper-style":S(o),teleported:f.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":f.hideAfter,persistent:f.persistent}),{content:Ae(()=>[Te("div",{class:ee(S(r).b())},[Te("div",{class:ee(S(r).e("main"))},[!f.hideIcon&&f.icon?(j(),gt(S(rn),{key:0,class:ee(S(r).e("icon")),style:Jt({color:f.iconColor})},{default:Ae(()=>[(j(),gt(ei(f.icon)))]),_:1},8,["class","style"])):ot("v-if",!0),An(" "+Lt(f.title),1)],2),Te("div",{class:ee(S(r).e("action"))},[at(f.$slots,"actions",{confirm:l,cancel:u},()=>[he(S(_a),{size:"small",type:f.cancelButtonType==="text"?"":f.cancelButtonType,text:f.cancelButtonType==="text",onClick:u},{default:Ae(()=>[An(Lt(S(d)),1)]),_:1},8,["type","text"]),he(S(_a),{size:"small",type:f.confirmButtonType==="text"?"":f.confirmButtonType,text:f.confirmButtonType==="text",onClick:l},{default:Ae(()=>[An(Lt(S(c)),1)]),_:1},8,["type","text"])])],2)],2)]),default:Ae(()=>[f.$slots.reference?at(f.$slots,"reference",{key:0}):ot("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var O5e=Vt(L5e,[["__file","popconfirm.vue"]]);const N5e=Nn(O5e),B5e=zt({trigger:tw.trigger,placement:_M.placement,disabled:tw.disabled,visible:ua.visible,transition:ua.transition,popperOptions:_M.popperOptions,tabindex:_M.tabindex,content:ua.content,popperStyle:ua.popperStyle,popperClass:ua.popperClass,enterable:{...ua.enterable,default:!0},effect:{...ua.effect,default:"light"},teleported:ua.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),F5e={"update:visible":n=>fr(n),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},U5e="onUpdate:visible",z5e=Ne({name:"ElPopover"}),H5e=Ne({...z5e,props:B5e,emits:F5e,setup(n,{expose:e,emit:t}){const i=n,r=W(()=>i[U5e]),s=Rt("popover"),a=ae(),o=W(()=>{var g;return(g=S(a))==null?void 0:g.popperRef}),l=W(()=>[{width:ns(i.width)},i.popperStyle]),u=W(()=>[s.b(),i.popperClass,{[s.m("plain")]:!!i.content}]),c=W(()=>i.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var g;(g=a.value)==null||g.hide()},f=()=>{t("before-enter")},h=()=>{t("before-leave")},p=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:o,hide:d}),(g,v)=>(j(),gt(S(Ja),si({ref_key:"tooltipRef",ref:a},g.$attrs,{trigger:g.trigger,placement:g.placement,disabled:g.disabled,visible:g.visible,transition:g.transition,"popper-options":g.popperOptions,tabindex:g.tabindex,content:g.content,offset:g.offset,"show-after":g.showAfter,"hide-after":g.hideAfter,"auto-close":g.autoClose,"show-arrow":g.showArrow,"aria-label":g.title,effect:g.effect,enterable:g.enterable,"popper-class":S(u),"popper-style":S(l),teleported:g.teleported,persistent:g.persistent,"gpu-acceleration":S(c),"onUpdate:visible":S(r),onBeforeShow:f,onBeforeHide:h,onShow:p,onHide:m}),{content:Ae(()=>[g.title?(j(),_e("div",{key:0,class:ee(S(s).e("title")),role:"title"},Lt(g.title),3)):ot("v-if",!0),at(g.$slots,"default",{},()=>[An(Lt(g.content),1)])]),default:Ae(()=>[g.$slots.reference?at(g.$slots,"reference",{key:0}):ot("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var V5e=Vt(H5e,[["__file","popover.vue"]]);const C$=(n,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=n)};var $5e={mounted(n,e){C$(n,e)},updated(n,e){C$(n,e)}};const G5e="popover",die=xxe($5e,G5e),W5e=Nn(V5e,{directive:die}),q5e=zt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:n=>n>=0&&n<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:et(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:et([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:et(Function),default:n=>`${n}%`}}),j5e=Ne({name:"ElProgress"}),K5e=Ne({...j5e,props:q5e,setup(n){const e=n,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Rt("progress"),r=W(()=>{const y={width:`${e.percentage}%`,animationDuration:`${e.duration}s`},b=_(e.percentage);return b.includes("gradient")?y.background=b:y.backgroundColor=b,y}),s=W(()=>(e.strokeWidth/e.width*100).toFixed(1)),a=W(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),o=W(()=>{const y=a.value,b=e.type==="dashboard";return`
          M 50 50
          m 0 ${b?"":"-"}${y}
          a ${y} ${y} 0 1 1 0 ${b?"-":""}${y*2}
          a ${y} ${y} 0 1 1 0 ${b?"":"-"}${y*2}
          `}),l=W(()=>2*Math.PI*a.value),u=W(()=>e.type==="dashboard"?.75:1),c=W(()=>`${-1*l.value*(1-u.value)/2}px`),d=W(()=>({strokeDasharray:`${l.value*u.value}px, ${l.value}px`,strokeDashoffset:c.value})),f=W(()=>({strokeDasharray:`${l.value*u.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),h=W(()=>{let y;return e.color?y=_(e.percentage):y=t[e.status]||t.default,y}),p=W(()=>e.status==="warning"?jI:e.type==="line"?e.status==="success"?iF:xh:e.status==="success"?fT:qc),m=W(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),g=W(()=>e.format(e.percentage));function v(y){const b=100/y.length;return y.map((w,A)=>un(w)?{color:w,percentage:(A+1)*b}:w).sort((w,A)=>w.percentage-A.percentage)}const _=y=>{var b;const{color:x}=e;if(pn(x))return x(y);if(un(x))return x;{const w=v(x);for(const A of w)if(A.percentage>y)return A.color;return(b=w[w.length-1])==null?void 0:b.color}};return(y,b)=>(j(),_e("div",{class:ee([S(i).b(),S(i).m(y.type),S(i).is(y.status),{[S(i).m("without-text")]:!y.showText,[S(i).m("text-inside")]:y.textInside}]),role:"progressbar","aria-valuenow":y.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[y.type==="line"?(j(),_e("div",{key:0,class:ee(S(i).b("bar"))},[Te("div",{class:ee(S(i).be("bar","outer")),style:Jt({height:`${y.strokeWidth}px`})},[Te("div",{class:ee([S(i).be("bar","inner"),{[S(i).bem("bar","inner","indeterminate")]:y.indeterminate},{[S(i).bem("bar","inner","striped")]:y.striped},{[S(i).bem("bar","inner","striped-flow")]:y.stripedFlow}]),style:Jt(S(r))},[(y.showText||y.$slots.default)&&y.textInside?(j(),_e("div",{key:0,class:ee(S(i).be("bar","innerText"))},[at(y.$slots,"default",{percentage:y.percentage},()=>[Te("span",null,Lt(S(g)),1)])],2)):ot("v-if",!0)],6)],6)],2)):(j(),_e("div",{key:1,class:ee(S(i).b("circle")),style:Jt({height:`${y.width}px`,width:`${y.width}px`})},[(j(),_e("svg",{viewBox:"0 0 100 100"},[Te("path",{class:ee(S(i).be("circle","track")),d:S(o),stroke:`var(${S(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":y.strokeLinecap,"stroke-width":S(s),fill:"none",style:Jt(S(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),Te("path",{class:ee(S(i).be("circle","path")),d:S(o),stroke:S(h),fill:"none",opacity:y.percentage?1:0,"stroke-linecap":y.strokeLinecap,"stroke-width":S(s),style:Jt(S(f))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(y.showText||y.$slots.default)&&!y.textInside?(j(),_e("div",{key:2,class:ee(S(i).e("text")),style:Jt({fontSize:`${S(m)}px`})},[at(y.$slots,"default",{percentage:y.percentage},()=>[y.status?(j(),gt(S(rn),{key:1},{default:Ae(()=>[(j(),gt(ei(S(p))))]),_:1})):(j(),_e("span",{key:0},Lt(S(g)),1))])],6)):ot("v-if",!0)],10,["aria-valuenow"]))}});var X5e=Vt(K5e,[["__file","progress.vue"]]);const fie=Nn(X5e),Y5e=zt({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:et([Array,Object]),default:()=>Kr(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:et([Array,Object]),default:()=>[VC,VC,VC]},voidIcon:{type:nr,default:()=>U2e},disabledVoidIcon:{type:nr,default:()=>VC},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:et(Array),default:()=>Kr(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:ks,clearable:Boolean,...Ba(["ariaLabel"])}),Q5e={[er]:n=>yn(n),[$n]:n=>yn(n)},Z5e=Ne({name:"ElRate"}),J5e=Ne({...Z5e,props:Y5e,emits:Q5e,setup(n,{expose:e,emit:t}){const i=n;function r(L,G){const H=te=>Yn(te),F=Object.keys(G).map(te=>+te).filter(te=>{const re=G[te];return(H(re)?re.excluded:!1)?L<te:L<=te}).sort((te,re)=>te-re),X=G[F[0]];return H(X)&&X.value||X}const s=Zt(iv,void 0),a=Zt(Gd,void 0),o=ws(),l=Rt("rate"),{inputId:u,isLabeledByFormItem:c}=hc(i,{formItemContext:a}),d=ae(i.modelValue),f=ae(-1),h=ae(!0),p=W(()=>[l.b(),l.m(o.value)]),m=W(()=>i.disabled||(s==null?void 0:s.disabled)),g=W(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":b.value})),v=W(()=>{let L="";return i.showScore?L=i.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${i.modelValue}`:`${d.value}`):i.showText&&(L=i.texts[Math.ceil(d.value)-1]),L}),_=W(()=>i.modelValue*100-Math.floor(i.modelValue)*100),y=W(()=>Bt(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),b=W(()=>{const L=r(d.value,y.value);return Yn(L)?"":L}),x=W(()=>{let L="";return m.value?L=`${_.value}%`:i.allowHalf&&(L="50%"),{color:b.value,width:L}}),w=W(()=>{let L=Bt(i.icons)?[...i.icons]:{...i.icons};return L=Kf(L),Bt(L)?{[i.lowThreshold]:L[0],[i.highThreshold]:{value:L[1],excluded:!0},[i.max]:L[2]}:L}),A=W(()=>r(i.modelValue,w.value)),T=W(()=>m.value?un(i.disabledVoidIcon)?i.disabledVoidIcon:Kf(i.disabledVoidIcon):un(i.voidIcon)?i.voidIcon:Kf(i.voidIcon)),C=W(()=>r(d.value,w.value));function E(L){const G=m.value&&_.value>0&&L-1<i.modelValue&&L>i.modelValue,H=i.allowHalf&&h.value&&L-.5<=d.value&&L>d.value;return G||H}function I(L){i.clearable&&L===i.modelValue&&(L=0),t($n,L),i.modelValue!==L&&t("change",L)}function k(L){m.value||(i.allowHalf&&h.value?I(d.value):I(L))}function O(L){if(m.value)return;let G=d.value;const H=L.code;return H===Kt.up||H===Kt.right?(i.allowHalf?G+=.5:G+=1,L.stopPropagation(),L.preventDefault()):(H===Kt.left||H===Kt.down)&&(i.allowHalf?G-=.5:G-=1,L.stopPropagation(),L.preventDefault()),G=G<0?0:G,G=G>i.max?i.max:G,t($n,G),t("change",G),G}function U(L,G){if(!m.value){if(i.allowHalf&&G){let H=G.target;bl(H,l.e("item"))&&(H=H.querySelector(`.${l.e("icon")}`)),(H.clientWidth===0||bl(H,l.e("decimal")))&&(H=H.parentNode),h.value=G.offsetX*2<=H.clientWidth,d.value=h.value?L-.5:L}else d.value=L;f.value=L}}function z(){m.value||(i.allowHalf&&(h.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,f.value=-1)}return St(()=>i.modelValue,L=>{d.value=L,h.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t($n,0),e({setCurrentValue:U,resetCurrentValue:z}),(L,G)=>{var H;return j(),_e("div",{id:S(u),class:ee([S(p),S(l).is("disabled",S(m))]),role:"slider","aria-label":S(c)?void 0:L.ariaLabel||"rating","aria-labelledby":S(c)?(H=S(a))==null?void 0:H.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":S(v)||void 0,"aria-valuemin":"0","aria-valuemax":L.max,tabindex:"0",style:Jt(S(g)),onKeydown:O},[(j(!0),_e(an,null,ti(L.max,(F,X)=>(j(),_e("span",{key:X,class:ee(S(l).e("item")),onMousemove:te=>U(F,te),onMouseleave:z,onClick:te=>k(F)},[he(S(rn),{class:ee([S(l).e("icon"),{hover:f.value===F},S(l).is("active",F<=d.value)])},{default:Ae(()=>[E(F)?ot("v-if",!0):(j(),_e(an,{key:0},[Vn((j(),gt(ei(S(C)),null,null,512)),[[Oi,F<=d.value]]),Vn((j(),gt(ei(S(T)),null,null,512)),[[Oi,!(F<=d.value)]])],64)),E(F)?(j(),_e(an,{key:1},[(j(),gt(ei(S(T)),{class:ee([S(l).em("decimal","box")])},null,8,["class"])),he(S(rn),{style:Jt(S(x)),class:ee([S(l).e("icon"),S(l).e("decimal")])},{default:Ae(()=>[(j(),gt(ei(S(A))))]),_:1},8,["style","class"])],64)):ot("v-if",!0)]),_:2},1032,["class"])],42,["onMousemove","onClick"]))),128)),L.showText||L.showScore?(j(),_e("span",{key:0,class:ee(S(l).e("text")),style:Jt({color:L.textColor})},Lt(S(v)),7)):ot("v-if",!0)],46,["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"])}}});var eke=Vt(J5e,[["__file","rate.vue"]]);const tke=Nn(eke),o1={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},A$={[o1.success]:Hxe,[o1.warning]:jI,[o1.error]:rF,[o1.info]:sF},nke=zt({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),ike=Ne({name:"ElResult"}),rke=Ne({...ike,props:nke,setup(n){const e=n,t=Rt("result"),i=W(()=>{const r=e.icon,s=r&&o1[r]?o1[r]:"icon-info",a=A$[s]||A$["icon-info"];return{class:s,component:a}});return(r,s)=>(j(),_e("div",{class:ee(S(t).b())},[Te("div",{class:ee(S(t).e("icon"))},[at(r.$slots,"icon",{},()=>[S(i).component?(j(),gt(ei(S(i).component),{key:0,class:ee(S(i).class)},null,8,["class"])):ot("v-if",!0)])],2),r.title||r.$slots.title?(j(),_e("div",{key:0,class:ee(S(t).e("title"))},[at(r.$slots,"title",{},()=>[Te("p",null,Lt(r.title),1)])],2)):ot("v-if",!0),r.subTitle||r.$slots["sub-title"]?(j(),_e("div",{key:1,class:ee(S(t).e("subtitle"))},[at(r.$slots,"sub-title",{},()=>[Te("p",null,Lt(r.subTitle),1)])],2)):ot("v-if",!0),r.$slots.extra?(j(),_e("div",{key:2,class:ee(S(t).e("extra"))},[at(r.$slots,"extra")],2)):ot("v-if",!0)],2))}});var ske=Vt(rke,[["__file","result.vue"]]);const ake=Nn(ske),oke=["start","center","end","space-around","space-between","space-evenly"],lke=["top","middle","bottom"],uke=zt({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:oke,default:"start"},align:{type:String,values:lke}}),cke=Ne({name:"ElRow"}),dke=Ne({...cke,props:uke,setup(n){const e=n,t=Rt("row"),i=W(()=>e.gutter);ui(fne,{gutter:i});const r=W(()=>{const a={};return e.gutter&&(a.marginRight=a.marginLeft=`-${e.gutter/2}px`),a}),s=W(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(a,o)=>(j(),gt(ei(a.tag),{class:ee(S(s)),style:Jt(S(r))},{default:Ae(()=>[at(a.$slots,"default")]),_:3},8,["class","style"]))}});var fke=Vt(dke,[["__file","row.vue"]]);const hke=Nn(fke),pke=Ne({props:{item:{type:Object,required:!0},style:{type:Object},height:Number},setup(){return{ns:Rt("select")}}});function mke(n,e,t,i,r,s){return j(),_e("div",{class:ee(n.ns.be("group","title")),style:Jt({...n.style,lineHeight:`${n.height}px`})},Lt(n.item.label),7)}var gke=Vt(pke,[["render",mke],["__file","group-item.vue"]]);function vke(n,{emit:e}){return{hoverItem:()=>{n.disabled||e("hover",n.index)},selectOptionClick:()=>{n.disabled||e("select",n.item,n.index)}}}const hie={label:"label",value:"value",disabled:"disabled",options:"options"};function iD(n){const e=W(()=>({...hie,...n.props}));return{aliasProps:e,getLabel:a=>vs(a,e.value.label),getValue:a=>vs(a,e.value.value),getDisabled:a=>vs(a,e.value.disabled),getOptions:a=>vs(a,e.value.options)}}const yke=zt({allowCreate:Boolean,autocomplete:{type:et(String),default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:nr,default:xh},effect:{type:et(String),default:"light"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:274},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,modelValue:{type:et([Array,String,Number,Boolean,Object])},multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:et(Array),required:!0},placeholder:{type:String},teleported:ua.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:et(Object),default:()=>({})},remote:Boolean,size:ks,props:{type:et(Object),default:()=>hie},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:Boolean,validateEvent:{type:Boolean,default:!0},offset:{type:Number,default:12},showArrow:{type:Boolean,default:!0},placement:{type:et(String),values:wh,default:"bottom-start"},fallbackPlacements:{type:et(Array),default:["bottom-start","top-start","right","left"]},tagType:{...rh.type,default:"info"},tagEffect:{...rh.effect,default:"light"},tabindex:{type:[String,Number],default:0},appendTo:String,...fb,...Ba(["ariaLabel"])}),_ke=zt({data:Array,disabled:Boolean,hovering:Boolean,item:{type:et(Object),required:!0},index:Number,style:Object,selected:Boolean,created:Boolean}),bke={[$n]:n=>!0,[er]:n=>!0,"remove-tag":n=>!0,"visible-change":n=>!0,focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent,clear:()=>!0},Ske={hover:n=>yn(n),select:(n,e)=>!0},WF=Symbol("ElSelectV2Injection"),xke=Ne({props:_ke,emits:Ske,setup(n,{emit:e}){const t=Zt(WF),i=Rt("select"),{hoverItem:r,selectOptionClick:s}=vke(n,{emit:e}),{getLabel:a}=iD(t.props);return{ns:i,hoverItem:r,selectOptionClick:s,getLabel:a}}});function wke(n,e,t,i,r,s){return j(),_e("li",{"aria-selected":n.selected,style:Jt(n.style),class:ee([n.ns.be("dropdown","item"),n.ns.is("selected",n.selected),n.ns.is("disabled",n.disabled),n.ns.is("created",n.created),n.ns.is("hovering",n.hovering)]),onMousemove:n.hoverItem,onClick:wn(n.selectOptionClick,["stop"])},[at(n.$slots,"default",{item:n.item,index:n.index,disabled:n.disabled},()=>[Te("span",null,Lt(n.getLabel(n.item)),1)])],46,["aria-selected","onMousemove","onClick"])}var Tke=Vt(xke,[["render",wke],["__file","option-item.vue"]]),E$=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Cke(n,e){return!!(n===e||E$(n)&&E$(e))}function Ake(n,e){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(!Cke(n[t],e[t]))return!1;return!0}function Eke(n,e){e===void 0&&(e=Ake);var t=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(t&&t.lastThis===this&&e(r,t.lastArgs))return t.lastResult;var a=n.apply(this,r);return t={lastResult:a,lastArgs:r,lastThis:this},a}return i.clear=function(){t=null},i}const pie=()=>{const e=Qn().proxy.$props;return W(()=>{const t=(i,r,s)=>({});return e.perfMode?zI(t):Eke(t)})},R6=50,D3="itemRendered",R3="scroll",l1="forward",P3="backward",Gu="auto",rD="smart",sw="start",Cd="center",aw="end",g_="horizontal",qF="vertical",Mke="ltr",k1="rtl",ow="negative",jF="positive-ascending",KF="positive-descending",Ike={[g_]:"left",[qF]:"top"},Dke=20,Rke={[g_]:"deltaX",[qF]:"deltaY"},Pke=({atEndEdge:n,atStartEdge:e,layout:t},i)=>{let r,s=0;const a=l=>l<0&&e.value||l>0&&n.value;return{hasReachedEdge:a,onWheel:l=>{Og(r);const u=l[Rke[t.value]];a(s)&&a(s+u)||(s+=u,XI()||l.preventDefault(),r=e0(()=>{i(s),s=0}))}}},P6=Xc({type:et([Number,Function]),required:!0}),k6=Xc({type:Number}),L6=Xc({type:Number,default:2}),kke=Xc({type:String,values:["ltr","rtl"],default:"ltr"}),O6=Xc({type:Number,default:0}),k3=Xc({type:Number,required:!0}),mie=Xc({type:String,values:["horizontal","vertical"],default:qF}),gie=zt({className:{type:String,default:""},containerElement:{type:et([String,Object]),default:"div"},data:{type:et(Array),default:()=>Kr([])},direction:kke,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:et([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),vie=zt({cache:L6,estimatedItemSize:k6,layout:mie,initScrollOffset:O6,total:k3,itemSize:P6,...gie}),N6={type:Number,default:6},yie={type:Number,default:0},_ie={type:Number,default:2},vg=zt({columnCache:L6,columnWidth:P6,estimatedColumnWidth:k6,estimatedRowHeight:k6,initScrollLeft:O6,initScrollTop:O6,itemKey:{type:et(Function),default:({columnIndex:n,rowIndex:e})=>`${e}:${n}`},rowCache:L6,rowHeight:P6,totalColumn:k3,totalRow:k3,hScrollbarSize:N6,vScrollbarSize:N6,scrollbarStartGap:yie,scrollbarEndGap:_ie,role:String,...gie}),bie=zt({alwaysOn:Boolean,class:String,layout:mie,total:k3,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:N6,startGap:yie,endGap:_ie,visible:Boolean}),Zm=(n,e)=>n<e?l1:P3,lw=n=>n===Mke||n===k1||n===g_,M$=n=>n===k1;let Fv=null;function L3(n=!1){if(Fv===null||n){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),r=i.style;return r.width="100px",r.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?Fv=KF:(e.scrollLeft=1,e.scrollLeft===0?Fv=ow:Fv=jF),document.body.removeChild(e),Fv}return Fv}function Lke({move:n,size:e,bar:t},i){const r={},s=`translate${t.axis}(${n}px)`;return r[t.size]=e,r.transform=s,r.msTransform=s,r.webkitTransform=s,i==="horizontal"?r.height="100%":r.width="100%",r}const B6=Ne({name:"ElVirtualScrollBar",props:bie,emits:["scroll","start-move","stop-move"],setup(n,{emit:e}){const t=W(()=>n.startGap+n.endGap),i=Rt("virtual-scrollbar"),r=Rt("scrollbar"),s=ae(),a=ae();let o=null,l=null;const u=Ui({isDragging:!1,traveled:0}),c=W(()=>ote[n.layout]),d=W(()=>n.clientSize-S(t)),f=W(()=>({position:"absolute",width:`${g_===n.layout?d.value:n.scrollbarSize}px`,height:`${g_===n.layout?n.scrollbarSize:d.value}px`,[Ike[n.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),h=W(()=>{const w=n.ratio,A=n.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*A/100;const T=A/3;return Math.floor(Math.min(Math.max(w*A,Dke),T))}),p=W(()=>{if(!Number.isFinite(h.value))return{display:"none"};const w=`${h.value}px`;return Lke({bar:c.value,size:w,move:u.traveled},n.layout)}),m=W(()=>Math.floor(n.clientSize-h.value-S(t))),g=()=>{window.addEventListener("mousemove",b),window.addEventListener("mouseup",y);const w=S(a);w&&(l=document.onselectstart,document.onselectstart=()=>!1,w.addEventListener("touchmove",b,{passive:!0}),w.addEventListener("touchend",y))},v=()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",y),document.onselectstart=l,l=null;const w=S(a);w&&(w.removeEventListener("touchmove",b),w.removeEventListener("touchend",y))},_=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(u.isDragging=!0,u[c.value.axis]=w.currentTarget[c.value.offset]-(w[c.value.client]-w.currentTarget.getBoundingClientRect()[c.value.direction]),e("start-move"),g())},y=()=>{u.isDragging=!1,u[c.value.axis]=0,e("stop-move"),v()},b=w=>{const{isDragging:A}=u;if(!A||!a.value||!s.value)return;const T=u[c.value.axis];if(!T)return;Og(o);const C=(s.value.getBoundingClientRect()[c.value.direction]-w[c.value.client])*-1,E=a.value[c.value.offset]-T,I=C-E;o=e0(()=>{u.traveled=Math.max(n.startGap,Math.min(I,m.value)),e("scroll",I,m.value)})},x=w=>{const A=Math.abs(w.target.getBoundingClientRect()[c.value.direction]-w[c.value.client]),T=a.value[c.value.offset]/2,C=A-T;u.traveled=Math.max(0,Math.min(C,m.value)),e("scroll",C,m.value)};return St(()=>n.scrollFrom,w=>{u.isDragging||(u.traveled=Math.ceil(w*m.value))}),Vi(()=>{v()}),()=>ln("div",{role:"presentation",ref:s,class:[i.b(),n.class,(n.alwaysOn||u.isDragging)&&"always-on"],style:f.value,onMousedown:wn(x,["stop","prevent"]),onTouchstartPrevent:_},ln("div",{ref:a,class:r.e("thumb"),style:p.value,onMousedown:_},[]))}}),Sie=({name:n,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:r,getStartIndexForOffset:s,getStopIndexForStartIndex:a,initCache:o,clearCache:l,validateProps:u})=>Ne({name:n??"ElVirtualList",props:vie,emits:[D3,R3],setup(c,{emit:d,expose:f}){u(c);const h=Qn(),p=Rt("vl"),m=ae(o(c,h)),g=pie(),v=ae(),_=ae(),y=ae(),b=ae({isScrolling:!1,scrollDir:"forward",scrollOffset:yn(c.initScrollOffset)?c.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:c.scrollbarAlwaysOn}),x=W(()=>{const{total:ie,cache:le}=c,{isScrolling:ge,scrollDir:pe,scrollOffset:ye}=S(b);if(ie===0)return[0,0,0,0];const Oe=s(c,ye,S(m)),Be=a(c,Oe,ye,S(m)),Ye=!ge||pe===P3?Math.max(1,le):1,Ze=!ge||pe===l1?Math.max(1,le):1;return[Math.max(0,Oe-Ye),Math.max(0,Math.min(ie-1,Be+Ze)),Oe,Be]}),w=W(()=>r(c,S(m))),A=W(()=>lw(c.layout)),T=W(()=>[{position:"relative",[`overflow-${A.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:c.direction,height:yn(c.height)?`${c.height}px`:c.height,width:yn(c.width)?`${c.width}px`:c.width},c.style]),C=W(()=>{const ie=S(w),le=S(A);return{height:le?"100%":`${ie}px`,pointerEvents:S(b).isScrolling?"none":void 0,width:le?`${ie}px`:"100%"}}),E=W(()=>A.value?c.width:c.height),{onWheel:I}=Pke({atStartEdge:W(()=>b.value.scrollOffset<=0),atEndEdge:W(()=>b.value.scrollOffset>=w.value),layout:W(()=>c.layout)},ie=>{var le,ge;(ge=(le=y.value).onMouseUp)==null||ge.call(le),G(Math.min(b.value.scrollOffset+ie,w.value-E.value))});Yi(v,"wheel",I,{passive:!1});const k=()=>{const{total:ie}=c;if(ie>0){const[ye,Oe,Be,Ye]=S(x);d(D3,ye,Oe,Be,Ye)}const{scrollDir:le,scrollOffset:ge,updateRequested:pe}=S(b);d(R3,le,ge,pe)},O=ie=>{const{clientHeight:le,scrollHeight:ge,scrollTop:pe}=ie.currentTarget,ye=S(b);if(ye.scrollOffset===pe)return;const Oe=Math.max(0,Math.min(pe,ge-le));b.value={...ye,isScrolling:!0,scrollDir:Zm(ye.scrollOffset,Oe),scrollOffset:Oe,updateRequested:!1},cn(X)},U=ie=>{const{clientWidth:le,scrollLeft:ge,scrollWidth:pe}=ie.currentTarget,ye=S(b);if(ye.scrollOffset===ge)return;const{direction:Oe}=c;let Be=ge;if(Oe===k1)switch(L3()){case ow:{Be=-ge;break}case KF:{Be=pe-le-ge;break}}Be=Math.max(0,Math.min(Be,pe-le)),b.value={...ye,isScrolling:!0,scrollDir:Zm(ye.scrollOffset,Be),scrollOffset:Be,updateRequested:!1},cn(X)},z=ie=>{S(A)?U(ie):O(ie),k()},L=(ie,le)=>{const ge=(w.value-E.value)/le*ie;G(Math.min(w.value-E.value,ge))},G=ie=>{ie=Math.max(ie,0),ie!==S(b).scrollOffset&&(b.value={...S(b),scrollOffset:ie,scrollDir:Zm(S(b).scrollOffset,ie),updateRequested:!0},cn(X))},H=(ie,le=Gu)=>{const{scrollOffset:ge}=S(b);ie=Math.max(0,Math.min(ie,c.total-1)),G(e(c,ie,le,ge,S(m)))},F=ie=>{const{direction:le,itemSize:ge,layout:pe}=c,ye=g.value(l&&ge,l&&pe,l&&le);let Oe;if(Ai(ye,String(ie)))Oe=ye[ie];else{const Be=i(c,ie,S(m)),Ye=t(c,ie,S(m)),Ze=S(A),Q=le===k1,me=Ze?Be:0;ye[ie]=Oe={position:"absolute",left:Q?void 0:`${me}px`,right:Q?`${me}px`:void 0,top:Ze?0:`${Be}px`,height:Ze?"100%":`${Ye}px`,width:Ze?`${Ye}px`:"100%"}}return Oe},X=()=>{b.value.isScrolling=!1,cn(()=>{g.value(-1,null,null)})},te=()=>{const ie=v.value;ie&&(ie.scrollTop=0)};Ln(()=>{if(!xi)return;const{initScrollOffset:ie}=c,le=S(v);yn(ie)&&le&&(S(A)?le.scrollLeft=ie:le.scrollTop=ie),k()}),fc(()=>{const{direction:ie,layout:le}=c,{scrollOffset:ge,updateRequested:pe}=S(b),ye=S(v);if(pe&&ye)if(le===g_)if(ie===k1)switch(L3()){case ow:{ye.scrollLeft=-ge;break}case jF:{ye.scrollLeft=ge;break}default:{const{clientWidth:Oe,scrollWidth:Be}=ye;ye.scrollLeft=Be-Oe-ge;break}}else ye.scrollLeft=ge;else ye.scrollTop=ge}),AB(()=>{S(v).scrollTop=S(b).scrollOffset});const re={ns:p,clientSize:E,estimatedTotalSize:w,windowStyle:T,windowRef:v,innerRef:_,innerStyle:C,itemsToRender:x,scrollbarRef:y,states:b,getItemStyle:F,onScroll:z,onScrollbarScroll:L,onWheel:I,scrollTo:G,scrollToItem:H,resetScrollTop:te};return f({windowRef:v,innerRef:_,getItemStyleCache:g,scrollTo:G,scrollToItem:H,resetScrollTop:te,states:b}),re},render(c){var d;const{$slots:f,className:h,clientSize:p,containerElement:m,data:g,getItemStyle:v,innerElement:_,itemsToRender:y,innerStyle:b,layout:x,total:w,onScroll:A,onScrollbarScroll:T,states:C,useIsScrolling:E,windowStyle:I,ns:k}=c,[O,U]=y,z=ei(m),L=ei(_),G=[];if(w>0)for(let te=O;te<=U;te++)G.push(ln(an,{key:te},(d=f.default)==null?void 0:d.call(f,{data:g,index:te,isScrolling:E?C.isScrolling:void 0,style:v(te)})));const H=[ln(L,{style:b,ref:"innerRef"},un(L)?G:{default:()=>G})],F=ln(B6,{ref:"scrollbarRef",clientSize:p,layout:x,onScroll:T,ratio:p*100/this.estimatedTotalSize,scrollFrom:C.scrollOffset/(this.estimatedTotalSize-p),total:w}),X=ln(z,{class:[k.e("window"),h],style:I,onScroll:A,ref:"windowRef",key:0},un(z)?[H]:{default:()=>[H]});return ln("div",{key:0,class:[k.e("wrapper"),C.scrollbarAlwaysOn?"always-on":""]},[X,F])}}),xie=Sie({name:"ElFixedSizeList",getItemOffset:({itemSize:n},e)=>e*n,getItemSize:({itemSize:n})=>n,getEstimatedTotalSize:({total:n,itemSize:e})=>e*n,getOffset:({height:n,total:e,itemSize:t,layout:i,width:r},s,a,o)=>{const l=lw(i)?r:n,u=Math.max(0,e*t-l),c=Math.min(u,s*t),d=Math.max(0,(s+1)*t-l);switch(a===rD&&(o>=d-l&&o<=c+l?a=Gu:a=Cd),a){case sw:return c;case aw:return d;case Cd:{const f=Math.round(d+(c-d)/2);return f<Math.ceil(l/2)?0:f>u+Math.floor(l/2)?u:f}case Gu:default:return o>=d&&o<=c?o:o<d?d:c}},getStartIndexForOffset:({total:n,itemSize:e},t)=>Math.max(0,Math.min(n-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:n,total:e,itemSize:t,layout:i,width:r},s,a)=>{const o=s*t,l=lw(i)?r:n,u=Math.ceil((l+a-o)/t);return Math.max(0,Math.min(e-1,s+u-1))},initCache(){},clearCache:!0,validateProps(){}}),u1=(n,e,t)=>{const{itemSize:i}=n,{items:r,lastVisitedIndex:s}=t;if(e>s){let a=0;if(s>=0){const o=r[s];a=o.offset+o.size}for(let o=s+1;o<=e;o++){const l=i(o);r[o]={offset:a,size:l},a+=l}t.lastVisitedIndex=e}return r[e]},Oke=(n,e,t)=>{const{items:i,lastVisitedIndex:r}=e;return(r>0?i[r].offset:0)>=t?wie(n,e,0,r,t):Nke(n,e,Math.max(0,r),t)},wie=(n,e,t,i,r)=>{for(;t<=i;){const s=t+Math.floor((i-t)/2),a=u1(n,s,e).offset;if(a===r)return s;a<r?t=s+1:a>r&&(i=s-1)}return Math.max(0,t-1)},Nke=(n,e,t,i)=>{const{total:r}=n;let s=1;for(;t<r&&u1(n,t,e).offset<i;)t+=s,s*=2;return wie(n,e,Math.floor(t/2),Math.min(t,r-1),i)},I$=({total:n},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let r=0;if(i>=n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},Bke=Sie({name:"ElDynamicSizeList",getItemOffset:(n,e,t)=>u1(n,e,t).offset,getItemSize:(n,e,{items:t})=>t[e].size,getEstimatedTotalSize:I$,getOffset:(n,e,t,i,r)=>{const{height:s,layout:a,width:o}=n,l=lw(a)?o:s,u=u1(n,e,r),c=I$(n,r),d=Math.max(0,Math.min(c-l,u.offset)),f=Math.max(0,u.offset-l+u.size);switch(t===rD&&(i>=f-l&&i<=d+l?t=Gu:t=Cd),t){case sw:return d;case aw:return f;case Cd:return Math.round(f+(d-f)/2);case Gu:default:return i>=f&&i<=d?i:i<f?f:d}},getStartIndexForOffset:(n,e,t)=>Oke(n,t,e),getStopIndexForStartIndex:(n,e,t,i)=>{const{height:r,total:s,layout:a,width:o}=n,l=lw(a)?o:r,u=u1(n,e,i),c=t+l;let d=u.offset+u.size,f=e;for(;f<s-1&&d<c;)f++,d+=u1(n,f,i).size;return f},initCache({estimatedItemSize:n=R6},e){const t={items:{},estimatedItemSize:n,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,r=!0)=>{var s,a;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(s=e.exposed)==null||s.getItemStyleCache(-1),r&&((a=e.proxy)==null||a.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:n})=>{}}),Fke={loading:Boolean,data:{type:Array,required:!0},hoveringIndex:Number,width:Number};var Uke=Ne({name:"ElSelectDropdown",props:Fke,setup(n,{slots:e,expose:t}){const i=Zt(WF),r=Rt("select"),{getLabel:s,getValue:a,getDisabled:o}=iD(i.props),l=ae([]),u=ae(),c=W(()=>n.data.length);St(()=>c.value,()=>{var I,k;(k=(I=i.tooltipRef.value).updatePopper)==null||k.call(I)});const d=W(()=>Xi(i.props.estimatedOptionHeight)),f=W(()=>d.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:I=>l.value[I]}),h=(I=[],k)=>{const{props:{valueKey:O}}=i;return Yn(k)?I&&I.some(U=>ir(vs(U,O))===vs(k,O)):I.includes(k)},p=(I,k)=>{if(Yn(k)){const{valueKey:O}=i.props;return vs(I,O)===vs(k,O)}else return I===k},m=(I,k)=>i.props.multiple?h(I,a(k)):p(I,a(k)),g=(I,k)=>{const{disabled:O,multiple:U,multipleLimit:z}=i.props;return O||!k&&(U?z>0&&I.length>=z:!1)},v=I=>n.hoveringIndex===I;t({listRef:u,isSized:d,isItemDisabled:g,isItemHovering:v,isItemSelected:m,scrollToItem:I=>{const k=u.value;k&&k.scrollToItem(I)},resetScrollTop:()=>{const I=u.value;I&&I.resetScrollTop()}});const x=I=>{const{index:k,data:O,style:U}=I,z=S(d),{itemSize:L,estimatedSize:G}=S(f),{modelValue:H}=i.props,{onSelect:F,onHover:X}=i,te=O[k];if(te.type==="Group")return he(gke,{item:te,style:U,height:z?L:G},null);const re=m(H,te),ie=g(H,re),le=v(k);return he(Tke,si(I,{selected:re,disabled:o(te)||ie,created:!!te.created,hovering:le,item:te,onSelect:F,onHover:X}),{default:ge=>{var pe;return((pe=e.default)==null?void 0:pe.call(e,ge))||he("span",null,[s(te)])}})},{onKeyboardNavigate:w,onKeyboardSelect:A}=i,T=()=>{w("forward")},C=()=>{w("backward")},E=I=>{const{code:k}=I,{tab:O,esc:U,down:z,up:L,enter:G,numpadEnter:H}=Kt;switch(k!==O&&(I.preventDefault(),I.stopPropagation()),k){case O:case U:break;case z:T();break;case L:C();break;case G:case H:A();break}};return()=>{var I,k,O,U;const{data:z,width:L}=n,{height:G,multiple:H,scrollbarAlwaysOn:F}=i.props,X=S(d)?xie:Bke;return he("div",{class:[r.b("dropdown"),r.is("multiple",H)],style:{width:`${L}px`}},[(I=e.header)==null?void 0:I.call(e),((k=e.loading)==null?void 0:k.call(e))||((O=e.empty)==null?void 0:O.call(e))||he(X,si({ref:u},S(f),{className:r.be("dropdown","list"),scrollbarAlwaysOn:F,data:z,height:G,width:L,total:z.length,onKeydown:E}),{default:te=>he(x,te,null)}),(U=e.footer)==null?void 0:U.call(e)])}}});function zke(n,e){const{aliasProps:t,getLabel:i,getValue:r}=iD(n),s=ae(0),a=ae(),o=W(()=>n.allowCreate&&n.filterable);function l(h){const p=m=>i(m)===h;return n.options&&n.options.some(p)||e.createdOptions.some(p)}function u(h){o.value&&(n.multiple&&h.created?s.value++:a.value=h)}function c(h){if(o.value)if(h&&h.length>0){if(l(h))return;const p={[t.value.value]:h,[t.value.label]:h,created:!0,[t.value.disabled]:!1};e.createdOptions.length>=s.value?e.createdOptions[s.value]=p:e.createdOptions.push(p)}else if(n.multiple)e.createdOptions.length=s.value;else{const p=a.value;e.createdOptions.length=0,p&&p.created&&e.createdOptions.push(p)}}function d(h){if(!o.value||!h||!h.created||h.created&&n.reserveKeyword&&e.inputValue===i(h))return;const p=e.createdOptions.findIndex(m=>r(m)===r(h));~p&&(e.createdOptions.splice(p,1),s.value--)}function f(){o.value&&(e.createdOptions.length=0,s.value=0)}return{createNewOption:c,removeNewOption:d,selectNewOption:u,clearAllNewOption:f}}const Hke=11,Vke=(n,e)=>{const{t}=wi(),i=Rt("select"),r=Rt("input"),{form:s,formItem:a}=to(),{inputId:o}=hc(n,{formItemContext:a}),{aliasProps:l,getLabel:u,getValue:c,getDisabled:d,getOptions:f}=iD(n),{valueOnClear:h,isEmptyValue:p}=GI(n),m=Ui({inputValue:"",cachedOptions:[],createdOptions:[],hoveringIndex:-1,inputHovering:!1,selectionWidth:0,calculatorWidth:0,collapseItemWidth:0,previousQuery:null,previousValue:void 0,selectedLabel:"",menuVisibleOnFocus:!1,isBeforeHide:!1}),g=ae(-1),v=ae(),_=ae(),y=ae(),b=ae(),x=ae(),w=ae(),A=ae(),T=ae(),C=ae(),E=ae(),I=ae(),{isComposing:k,handleCompositionStart:O,handleCompositionEnd:U,handleCompositionUpdate:z}=pT({afterComposition:Xe=>Kn(Xe)}),{wrapperRef:L,isFocused:G,handleBlur:H}=w0(x,{beforeFocus(){return re.value},afterFocus(){n.automaticDropdown&&!te.value&&(te.value=!0,m.menuVisibleOnFocus=!0)},beforeBlur(Xe){var _t,mt;return((_t=y.value)==null?void 0:_t.isFocusInsideContent(Xe))||((mt=b.value)==null?void 0:mt.isFocusInsideContent(Xe))},afterBlur(){te.value=!1,m.menuVisibleOnFocus=!1}}),F=ae([]),X=ae([]),te=ae(!1),re=W(()=>n.disabled||(s==null?void 0:s.disabled)),ie=W(()=>{var Xe;return(Xe=s==null?void 0:s.statusIcon)!=null?Xe:!1}),le=W(()=>{const Xe=X.value.length*n.itemHeight;return Xe>n.height?n.height:Xe}),ge=W(()=>n.multiple?Bt(n.modelValue)&&n.modelValue.length>0:!p(n.modelValue)),pe=W(()=>n.clearable&&!re.value&&m.inputHovering&&ge.value),ye=W(()=>n.remote&&n.filterable?"":Sh),Oe=W(()=>ye.value&&i.is("reverse",te.value)),Be=W(()=>(a==null?void 0:a.validateState)||""),Ye=W(()=>{if(Be.value)return KI[Be.value]}),Ze=W(()=>n.remote?300:0),Q=W(()=>n.loading?n.loadingText||t("el.select.loading"):n.remote&&!m.inputValue&&F.value.length===0?!1:n.filterable&&m.inputValue&&F.value.length>0&&X.value.length===0?n.noMatchText||t("el.select.noMatch"):F.value.length===0?n.noDataText||t("el.select.noData"):null),me=Xe=>{const _t=mt=>{if(n.filterable&&pn(n.filterMethod)||n.filterable&&n.remote&&pn(n.remoteMethod))return!0;const Ot=new RegExp(AF(Xe),"i");return Xe?Ot.test(u(mt)||""):!0};return n.loading?[]:[...m.createdOptions,...n.options].reduce((mt,Ot)=>{const gn=f(Ot);if(Bt(gn)){const dn=gn.filter(_t);dn.length>0&&mt.push({label:u(Ot),type:"Group"},...dn)}else(n.remote||_t(Ot))&&mt.push(Ot);return mt},[])},ce=()=>{F.value=me(""),X.value=me(m.inputValue)},je=W(()=>{const Xe=new Map;return F.value.forEach((_t,mt)=>{Xe.set(Ft(c(_t)),{option:_t,index:mt})}),Xe}),Fe=W(()=>{const Xe=new Map;return X.value.forEach((_t,mt)=>{Xe.set(Ft(c(_t)),{option:_t,index:mt})}),Xe}),nt=W(()=>X.value.every(Xe=>d(Xe))),We=ws(),Ke=W(()=>We.value==="small"?"small":"default"),it=()=>{var Xe;g.value=((Xe=v.value)==null?void 0:Xe.offsetWidth)||200},be=()=>{if(!_.value)return 0;const Xe=window.getComputedStyle(_.value);return Number.parseFloat(Xe.gap||"6px")},K=W(()=>{const Xe=be();return{maxWidth:`${I.value&&n.maxCollapseTags===1?m.selectionWidth-m.collapseItemWidth-Xe:m.selectionWidth}px`}}),ne=W(()=>({maxWidth:`${m.selectionWidth}px`})),Se=W(()=>({width:`${Math.max(m.calculatorWidth,Hke)}px`})),ze=W(()=>Bt(n.modelValue)?n.modelValue.length===0&&!m.inputValue:n.filterable?!m.inputValue:!0),Je=W(()=>{var Xe;const _t=(Xe=n.placeholder)!=null?Xe:t("el.select.placeholder");return n.multiple||!ge.value?_t:m.selectedLabel}),Tt=W(()=>{var Xe,_t;return(_t=(Xe=y.value)==null?void 0:Xe.popperRef)==null?void 0:_t.contentRef}),At=W(()=>{if(n.multiple){const Xe=n.modelValue.length;if(n.modelValue.length>0&&Fe.value.has(n.modelValue[Xe-1])){const{index:_t}=Fe.value.get(n.modelValue[Xe-1]);return _t}}else if(!p(n.modelValue)&&Fe.value.has(n.modelValue)){const{index:Xe}=Fe.value.get(n.modelValue);return Xe}return-1}),Re=W({get(){return te.value&&Q.value!==!1},set(Xe){te.value=Xe}}),wt=W(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(0,n.maxCollapseTags):m.cachedOptions:[]),vt=W(()=>n.multiple?n.collapseTags?m.cachedOptions.slice(n.maxCollapseTags):[]:[]),{createNewOption:q,removeNewOption:xe,selectNewOption:ve,clearAllNewOption:ke}=zke(n,m),we=()=>{re.value||(m.menuVisibleOnFocus?m.menuVisibleOnFocus=!1:te.value=!te.value)},De=()=>{m.inputValue.length>0&&!te.value&&(te.value=!0),q(m.inputValue),Pe(m.inputValue)},xt=Rl(De,Ze.value),Pe=Xe=>{m.previousQuery===Xe||k.value||(m.previousQuery=Xe,n.filterable&&pn(n.filterMethod)?n.filterMethod(Xe):n.filterable&&n.remote&&pn(n.remoteMethod)&&n.remoteMethod(Xe),n.defaultFirstOption&&(n.filterable||n.remote)&&X.value.length?cn(Dt):cn(kn))},Dt=()=>{const Xe=X.value.filter(Ot=>!Ot.disabled&&Ot.type!=="Group"),_t=Xe.find(Ot=>Ot.created),mt=Xe[0];m.hoveringIndex=jt(X.value,_t||mt)},dt=Xe=>{La(n.modelValue,Xe)||e(er,Xe)},Mt=Xe=>{e($n,Xe),dt(Xe),m.previousValue=n.multiple?String(Xe):Xe},jt=(Xe=[],_t)=>{if(!Yn(_t))return Xe.indexOf(_t);const mt=n.valueKey;let Ot=-1;return Xe.some((gn,dn)=>vs(gn,mt)===vs(_t,mt)?(Ot=dn,!0):!1),Ot},Ft=Xe=>Yn(Xe)?vs(Xe,n.valueKey):Xe,Sn=()=>{it()},Pn=()=>{m.selectionWidth=_.value.getBoundingClientRect().width},Ti=()=>{m.calculatorWidth=w.value.getBoundingClientRect().width},jn=()=>{m.collapseItemWidth=I.value.getBoundingClientRect().width},dr=()=>{var Xe,_t;(_t=(Xe=y.value)==null?void 0:Xe.updatePopper)==null||_t.call(Xe)},fi=()=>{var Xe,_t;(_t=(Xe=b.value)==null?void 0:Xe.updatePopper)==null||_t.call(Xe)},J=Xe=>{if(n.multiple){let _t=n.modelValue.slice();const mt=jt(_t,c(Xe));mt>-1?(_t=[..._t.slice(0,mt),..._t.slice(mt+1)],m.cachedOptions.splice(mt,1),xe(Xe)):(n.multipleLimit<=0||_t.length<n.multipleLimit)&&(_t=[..._t,c(Xe)],m.cachedOptions.push(Xe),ve(Xe)),Mt(_t),Xe.created&&Pe(""),n.filterable&&!n.reserveKeyword&&(m.inputValue="")}else m.selectedLabel=u(Xe),Mt(c(Xe)),te.value=!1,ve(Xe),Xe.created||ke();en()},ue=(Xe,_t)=>{let mt=n.modelValue.slice();const Ot=jt(mt,c(_t));Ot>-1&&!re.value&&(mt=[...n.modelValue.slice(0,Ot),...n.modelValue.slice(Ot+1)],m.cachedOptions.splice(Ot,1),Mt(mt),e("remove-tag",c(_t)),xe(_t)),Xe.stopPropagation(),en()},en=()=>{var Xe;(Xe=x.value)==null||Xe.focus()},Ie=()=>{var Xe;if(te.value){te.value=!1,cn(()=>{var _t;return(_t=x.value)==null?void 0:_t.blur()});return}(Xe=x.value)==null||Xe.blur()},de=()=>{m.inputValue.length>0?m.inputValue="":te.value=!1},kt=Xe=>Lee(Xe,_t=>!m.cachedOptions.some(mt=>c(mt)===_t&&d(mt))),Ct=Xe=>{if(n.multiple&&Xe.code!==Kt.delete&&m.inputValue.length===0){Xe.preventDefault();const _t=n.modelValue.slice(),mt=kt(_t);if(mt<0)return;const Ot=_t[mt];_t.splice(mt,1);const gn=m.cachedOptions[mt];m.cachedOptions.splice(mt,1),xe(gn),Mt(_t),e("remove-tag",Ot)}},Ut=()=>{let Xe;Bt(n.modelValue)?Xe=[]:Xe=h.value,n.multiple?m.cachedOptions=[]:m.selectedLabel="",te.value=!1,Mt(Xe),e("clear"),ke(),en()},ut=(Xe,_t=void 0)=>{const mt=X.value;if(!["forward","backward"].includes(Xe)||re.value||mt.length<=0||nt.value||k.value)return;if(!te.value)return we();_t===void 0&&(_t=m.hoveringIndex);let Ot=-1;Xe==="forward"?(Ot=_t+1,Ot>=mt.length&&(Ot=0)):Xe==="backward"&&(Ot=_t-1,(Ot<0||Ot>=mt.length)&&(Ot=mt.length-1));const gn=mt[Ot];if(d(gn)||gn.type==="Group")return ut(Xe,Ot);m.hoveringIndex=Ot,pt(Ot)},Pt=()=>{if(te.value)~m.hoveringIndex&&X.value[m.hoveringIndex]&&J(X.value[m.hoveringIndex]);else return we()},Xt=Xe=>{m.hoveringIndex=Xe??-1},kn=()=>{n.multiple?m.hoveringIndex=X.value.findIndex(Xe=>n.modelValue.some(_t=>Ft(_t)===Ft(Xe))):m.hoveringIndex=X.value.findIndex(Xe=>Ft(Xe)===Ft(n.modelValue))},Kn=Xe=>{if(m.inputValue=Xe.target.value,n.remote)xt();else return De()},rt=Xe=>{if(te.value=!1,G.value){const _t=new FocusEvent("focus",Xe);H(_t)}},ci=()=>(m.isBeforeHide=!1,cn(()=>{~At.value&&pt(m.hoveringIndex)})),pt=Xe=>{C.value.scrollToItem(Xe)},Le=(Xe,_t)=>{const mt=Ft(Xe);if(je.value.has(mt)){const{option:Ot}=je.value.get(mt);return Ot}if(_t&&_t.length){const Ot=_t.find(gn=>Ft(c(gn))===mt);if(Ot)return Ot}return{[l.value.value]:Xe,[l.value.label]:Xe}},Et=(Xe=!1)=>{if(n.multiple)if(n.modelValue.length>0){const _t=m.cachedOptions.slice();m.cachedOptions.length=0,m.previousValue=n.modelValue.toString();for(const mt of n.modelValue){const Ot=Le(mt,_t);m.cachedOptions.push(Ot)}}else m.cachedOptions=[],m.previousValue=void 0;else if(ge.value){m.previousValue=n.modelValue;const _t=X.value,mt=_t.findIndex(Ot=>Ft(c(Ot))===Ft(n.modelValue));~mt?m.selectedLabel=u(_t[mt]):(!m.selectedLabel||Xe)&&(m.selectedLabel=Ft(n.modelValue))}else m.selectedLabel="",m.previousValue=void 0;ke(),it()};return St(te,Xe=>{Xe?Pe(""):(m.inputValue="",m.previousQuery=null,m.isBeforeHide=!0,q("")),e("visible-change",Xe)}),St(()=>n.modelValue,(Xe,_t)=>{var mt;(!Xe||Bt(Xe)&&Xe.length===0||n.multiple&&!La(Xe.toString(),m.previousValue)||!n.multiple&&Ft(Xe)!==Ft(m.previousValue))&&Et(!0),!La(Xe,_t)&&n.validateEvent&&((mt=a==null?void 0:a.validate)==null||mt.call(a,"change").catch(gn=>void 0))},{deep:!0}),St(()=>n.options,()=>{const Xe=x.value;(!Xe||Xe&&document.activeElement!==Xe)&&Et()},{deep:!0,flush:"post"}),St(()=>X.value,()=>C.value&&cn(C.value.resetScrollTop)),ya(()=>{m.isBeforeHide||ce()}),ya(()=>{const{valueKey:Xe,options:_t}=n,mt=new Map;for(const Ot of _t){const gn=c(Ot);let dn=gn;if(Yn(dn)&&(dn=vs(gn,Xe)),mt.get(dn))break;mt.set(dn,!0)}}),Ln(()=>{Et()}),Br(v,Sn),Br(_,Pn),Br(w,Ti),Br(C,dr),Br(L,dr),Br(E,fi),Br(I,jn),{inputId:o,collapseTagSize:Ke,currentPlaceholder:Je,expanded:te,emptyText:Q,popupHeight:le,debounce:Ze,allOptions:F,filteredOptions:X,iconComponent:ye,iconReverse:Oe,tagStyle:K,collapseTagStyle:ne,inputStyle:Se,popperSize:g,dropdownMenuVisible:Re,hasModelValue:ge,shouldShowPlaceholder:ze,selectDisabled:re,selectSize:We,needStatusIcon:ie,showClearBtn:pe,states:m,isFocused:G,nsSelect:i,nsInput:r,calculatorRef:w,inputRef:x,menuRef:C,tagMenuRef:E,tooltipRef:y,tagTooltipRef:b,selectRef:v,wrapperRef:L,selectionRef:_,prefixRef:A,suffixRef:T,collapseItemRef:I,popperRef:Tt,validateState:Be,validateIcon:Ye,showTagList:wt,collapseTagList:vt,debouncedOnInputChange:xt,deleteTag:ue,getLabel:u,getValue:c,getDisabled:d,getValueKey:Ft,handleClear:Ut,handleClickOutside:rt,handleDel:Ct,handleEsc:de,focus:en,blur:Ie,handleMenuEnter:ci,handleResize:Sn,resetSelectionWidth:Pn,resetCalculatorWidth:Ti,updateTooltip:dr,updateTagTooltip:fi,updateOptions:ce,toggleMenu:we,scrollTo:pt,onInput:Kn,onKeyboardNavigate:ut,onKeyboardSelect:Pt,onSelect:J,onHover:Xt,handleCompositionStart:O,handleCompositionEnd:U,handleCompositionUpdate:z}},$ke=Ne({name:"ElSelectV2",components:{ElSelectMenu:Uke,ElTag:p_,ElTooltip:Ja,ElIcon:rn},directives:{ClickOutside:sh},props:yke,emits:bke,setup(n,{emit:e}){const t=W(()=>{const{modelValue:s,multiple:a}=n,o=a?[]:void 0;return Bt(s)?a?s:o:a?o:s}),i=Vke(Ui({...js(n),modelValue:t}),e);ui(WF,{props:Ui({...js(n),height:i.popupHeight,modelValue:t}),expanded:i.expanded,tooltipRef:i.tooltipRef,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect});const r=W(()=>n.multiple?i.states.cachedOptions.map(s=>s.label):i.states.selectedLabel);return{...i,modelValue:t,selectedLabel:r}}});function Gke(n,e,t,i,r,s){const a=Ht("el-tag"),o=Ht("el-tooltip"),l=Ht("el-icon"),u=Ht("el-select-menu"),c=PI("click-outside");return Vn((j(),_e("div",{ref:"selectRef",class:ee([n.nsSelect.b(),n.nsSelect.m(n.selectSize)]),onMouseenter:d=>n.states.inputHovering=!0,onMouseleave:d=>n.states.inputHovering=!1},[he(o,{ref:"tooltipRef",visible:n.dropdownMenuVisible,teleported:n.teleported,"popper-class":[n.nsSelect.e("popper"),n.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":n.popperOptions,"fallback-placements":n.fallbackPlacements,effect:n.effect,placement:n.placement,pure:"",transition:`${n.nsSelect.namespace.value}-zoom-in-top`,trigger:"click",persistent:n.persistent,"append-to":n.appendTo,"show-arrow":n.showArrow,offset:n.offset,onBeforeShow:n.handleMenuEnter,onHide:d=>n.states.isBeforeHide=!1},{default:Ae(()=>[Te("div",{ref:"wrapperRef",class:ee([n.nsSelect.e("wrapper"),n.nsSelect.is("focused",n.isFocused),n.nsSelect.is("hovering",n.states.inputHovering),n.nsSelect.is("filterable",n.filterable),n.nsSelect.is("disabled",n.selectDisabled)]),onClick:wn(n.toggleMenu,["prevent"])},[n.$slots.prefix?(j(),_e("div",{key:0,ref:"prefixRef",class:ee(n.nsSelect.e("prefix"))},[at(n.$slots,"prefix")],2)):ot("v-if",!0),Te("div",{ref:"selectionRef",class:ee([n.nsSelect.e("selection"),n.nsSelect.is("near",n.multiple&&!n.$slots.prefix&&!!n.modelValue.length)])},[n.multiple?at(n.$slots,"tag",{key:0},()=>[(j(!0),_e(an,null,ti(n.showTagList,d=>(j(),_e("div",{key:n.getValueKey(n.getValue(d)),class:ee(n.nsSelect.e("selected-item"))},[he(a,{closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",style:Jt(n.tagStyle),onClose:f=>n.deleteTag(f,d)},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[An(Lt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),n.collapseTags&&n.modelValue.length>n.maxCollapseTags?(j(),gt(o,{key:0,ref:"tagTooltipRef",disabled:n.dropdownMenuVisible||!n.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:n.effect,placement:"bottom",teleported:n.teleported},{default:Ae(()=>[Te("div",{ref:"collapseItemRef",class:ee(n.nsSelect.e("selected-item"))},[he(a,{closable:!1,size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,style:Jt(n.collapseTagStyle),"disable-transitions":""},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))}," + "+Lt(n.modelValue.length-n.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:Ae(()=>[Te("div",{ref:"tagMenuRef",class:ee(n.nsSelect.e("selection"))},[(j(!0),_e(an,null,ti(n.collapseTagList,d=>(j(),_e("div",{key:n.getValueKey(n.getValue(d)),class:ee(n.nsSelect.e("selected-item"))},[he(a,{class:"in-tooltip",closable:!n.selectDisabled&&!n.getDisabled(d),size:n.collapseTagSize,type:n.tagType,effect:n.tagEffect,"disable-transitions":"",onClose:f=>n.deleteTag(f,d)},{default:Ae(()=>[Te("span",{class:ee(n.nsSelect.e("tags-text"))},[at(n.$slots,"label",{label:n.getLabel(d),value:n.getValue(d)},()=>[An(Lt(n.getLabel(d)),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):ot("v-if",!0)]):ot("v-if",!0),Te("div",{class:ee([n.nsSelect.e("selected-item"),n.nsSelect.e("input-wrapper"),n.nsSelect.is("hidden",!n.filterable)])},[Vn(Te("input",{id:n.inputId,ref:"inputRef","onUpdate:modelValue":d=>n.states.inputValue=d,style:Jt(n.inputStyle),autocomplete:n.autocomplete,tabindex:n.tabindex,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":n.expanded,"aria-label":n.ariaLabel,class:ee([n.nsSelect.e("input"),n.nsSelect.is(n.selectSize)]),disabled:n.selectDisabled,role:"combobox",readonly:!n.filterable,spellcheck:"false",type:"text",name:n.name,onInput:n.onInput,onCompositionstart:n.handleCompositionStart,onCompositionupdate:n.handleCompositionUpdate,onCompositionend:n.handleCompositionEnd,onKeydown:[ur(wn(d=>n.onKeyboardNavigate("backward"),["stop","prevent"]),["up"]),ur(wn(d=>n.onKeyboardNavigate("forward"),["stop","prevent"]),["down"]),ur(wn(n.onKeyboardSelect,["stop","prevent"]),["enter"]),ur(wn(n.handleEsc,["stop","prevent"]),["esc"]),ur(wn(n.handleDel,["stop"]),["delete"])],onClick:wn(n.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","autocomplete","tabindex","aria-expanded","aria-label","disabled","readonly","name","onInput","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown","onClick"]),[[OI,n.states.inputValue]]),n.filterable?(j(),_e("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:ee(n.nsSelect.e("input-calculator")),textContent:Lt(n.states.inputValue)},null,10,["textContent"])):ot("v-if",!0)],2),n.shouldShowPlaceholder?(j(),_e("div",{key:1,class:ee([n.nsSelect.e("selected-item"),n.nsSelect.e("placeholder"),n.nsSelect.is("transparent",!n.hasModelValue||n.expanded&&!n.states.inputValue)])},[n.hasModelValue?at(n.$slots,"label",{key:0,label:n.currentPlaceholder,value:n.modelValue},()=>[Te("span",null,Lt(n.currentPlaceholder),1)]):(j(),_e("span",{key:1},Lt(n.currentPlaceholder),1))],2)):ot("v-if",!0)],2),Te("div",{ref:"suffixRef",class:ee(n.nsSelect.e("suffix"))},[n.iconComponent?Vn((j(),gt(l,{key:0,class:ee([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.iconReverse])},{default:Ae(()=>[(j(),gt(ei(n.iconComponent)))]),_:1},8,["class"])),[[Oi,!n.showClearBtn]]):ot("v-if",!0),n.showClearBtn&&n.clearIcon?(j(),gt(l,{key:1,class:ee([n.nsSelect.e("caret"),n.nsInput.e("icon"),n.nsSelect.e("clear")]),onClick:wn(n.handleClear,["prevent","stop"])},{default:Ae(()=>[(j(),gt(ei(n.clearIcon)))]),_:1},8,["class","onClick"])):ot("v-if",!0),n.validateState&&n.validateIcon&&n.needStatusIcon?(j(),gt(l,{key:2,class:ee([n.nsInput.e("icon"),n.nsInput.e("validateIcon")])},{default:Ae(()=>[(j(),gt(ei(n.validateIcon)))]),_:1},8,["class"])):ot("v-if",!0)],2)],10,["onClick"])]),content:Ae(()=>[he(u,{ref:"menuRef",data:n.filteredOptions,width:n.popperSize,"hovering-index":n.states.hoveringIndex,"scrollbar-always-on":n.scrollbarAlwaysOn},tc({default:Ae(d=>[at(n.$slots,"default",Lc(Qp(d)))]),_:2},[n.$slots.header?{name:"header",fn:Ae(()=>[Te("div",{class:ee(n.nsSelect.be("dropdown","header"))},[at(n.$slots,"header")],2)])}:void 0,n.$slots.loading&&n.loading?{name:"loading",fn:Ae(()=>[Te("div",{class:ee(n.nsSelect.be("dropdown","loading"))},[at(n.$slots,"loading")],2)])}:n.loading||n.filteredOptions.length===0?{name:"empty",fn:Ae(()=>[Te("div",{class:ee(n.nsSelect.be("dropdown","empty"))},[at(n.$slots,"empty",{},()=>[Te("span",null,Lt(n.emptyText),1)])],2)])}:void 0,n.$slots.footer?{name:"footer",fn:Ae(()=>[Te("div",{class:ee(n.nsSelect.be("dropdown","footer"))},[at(n.$slots,"footer")],2)])}:void 0]),1032,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","fallback-placements","effect","placement","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],42,["onMouseenter","onMouseleave"])),[[c,n.handleClickOutside,n.popperRef]])}var Wke=Vt($ke,[["render",Gke],["__file","select.vue"]]);const qke=Nn(Wke),jke=zt({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:et([Number,Object])}}),Kke=zt({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),Xke=Ne({name:"ElSkeletonItem"}),Yke=Ne({...Xke,props:Kke,setup(n){const e=Rt("skeleton");return(t,i)=>(j(),_e("div",{class:ee([S(e).e("item"),S(e).e(t.variant)])},[t.variant==="image"?(j(),gt(S(_2e),{key:0})):ot("v-if",!0)],2))}});var O3=Vt(Yke,[["__file","skeleton-item.vue"]]);const Qke=(n,e=0)=>{if(e===0)return n;const t=Yn(e)&&!!e.initVal,i=ae(t);let r=null;const s=o=>{if(Xi(o)){i.value=n.value;return}r&&clearTimeout(r),r=setTimeout(()=>{i.value=n.value},o)},a=o=>{o==="leading"?yn(e)?s(e):s(e.leading):Yn(e)?s(e.trailing):i.value=!1};return Ln(()=>a("leading")),St(()=>n.value,o=>{a(o?"leading":"trailing")}),i},Zke=Ne({name:"ElSkeleton"}),Jke=Ne({...Zke,props:jke,setup(n,{expose:e}){const t=n,i=Rt("skeleton"),r=Qke($i(t,"loading"),t.throttle);return e({uiLoading:r}),(s,a)=>S(r)?(j(),_e("div",si({key:0,class:[S(i).b(),S(i).is("animated",s.animated)]},s.$attrs),[(j(!0),_e(an,null,ti(s.count,o=>(j(),_e(an,{key:o},[S(r)?at(s.$slots,"template",{key:o},()=>[he(O3,{class:ee(S(i).is("first")),variant:"p"},null,8,["class"]),(j(!0),_e(an,null,ti(s.rows,l=>(j(),gt(O3,{key:l,class:ee([S(i).e("paragraph"),S(i).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):ot("v-if",!0)],64))),128))],16)):at(s.$slots,"default",Lc(si({key:1},s.$attrs)))}});var eLe=Vt(Jke,[["__file","skeleton.vue"]]);const tLe=Nn(eLe,{SkeletonItem:O3}),nLe=Xr(O3),Tie=Symbol("sliderContextKey"),iLe=zt({modelValue:{type:et([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:ks,inputSize:ks,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:et(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:et(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:wh,default:"top"},marks:{type:et(Object)},validateEvent:{type:Boolean,default:!0},...Ba(["ariaLabel"])}),fP=n=>yn(n)||Bt(n)&&n.every(yn),rLe={[$n]:fP,[Qa]:fP,[er]:fP},sLe=zt({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:wh,default:"top"}}),aLe={[$n]:n=>yn(n)},oLe=(n,e,t)=>{const i=ae(),r=ae(!1),s=W(()=>e.value instanceof Function),a=W(()=>s.value&&e.value(n.modelValue)||n.modelValue),o=Rl(()=>{t.value&&(r.value=!0)},50),l=Rl(()=>{t.value&&(r.value=!1)},50);return{tooltip:i,tooltipVisible:r,formatValue:a,displayTooltip:o,hideTooltip:l}},lLe=(n,e,t)=>{const{disabled:i,min:r,max:s,step:a,showTooltip:o,precision:l,sliderSize:u,formatTooltip:c,emitChange:d,resetSize:f,updateDragging:h}=Zt(Tie),{tooltip:p,tooltipVisible:m,formatValue:g,displayTooltip:v,hideTooltip:_}=oLe(n,c,o),y=ae(),b=W(()=>`${(n.modelValue-r.value)/(s.value-r.value)*100}%`),x=W(()=>n.vertical?{bottom:b.value}:{left:b.value}),w=()=>{e.hovering=!0,v()},A=()=>{e.hovering=!1,e.dragging||_()},T=re=>{i.value||(re.preventDefault(),H(re),window.addEventListener("mousemove",F),window.addEventListener("touchmove",F),window.addEventListener("mouseup",X),window.addEventListener("touchend",X),window.addEventListener("contextmenu",X),y.value.focus())},C=re=>{i.value||(e.newPosition=Number.parseFloat(b.value)+re/(s.value-r.value)*100,te(e.newPosition),d())},E=()=>{C(-a.value)},I=()=>{C(a.value)},k=()=>{C(-a.value*4)},O=()=>{C(a.value*4)},U=()=>{i.value||(te(0),d())},z=()=>{i.value||(te(100),d())},L=re=>{let ie=!0;switch(re.code){case Kt.left:case Kt.down:E();break;case Kt.right:case Kt.up:I();break;case Kt.home:U();break;case Kt.end:z();break;case Kt.pageDown:k();break;case Kt.pageUp:O();break;default:ie=!1;break}ie&&re.preventDefault()},G=re=>{let ie,le;return re.type.startsWith("touch")?(le=re.touches[0].clientY,ie=re.touches[0].clientX):(le=re.clientY,ie=re.clientX),{clientX:ie,clientY:le}},H=re=>{e.dragging=!0,e.isClick=!0;const{clientX:ie,clientY:le}=G(re);n.vertical?e.startY=le:e.startX=ie,e.startPosition=Number.parseFloat(b.value),e.newPosition=e.startPosition},F=re=>{if(e.dragging){e.isClick=!1,v(),f();let ie;const{clientX:le,clientY:ge}=G(re);n.vertical?(e.currentY=ge,ie=(e.startY-e.currentY)/u.value*100):(e.currentX=le,ie=(e.currentX-e.startX)/u.value*100),e.newPosition=e.startPosition+ie,te(e.newPosition)}},X=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||_(),e.isClick||te(e.newPosition),d()},0),window.removeEventListener("mousemove",F),window.removeEventListener("touchmove",F),window.removeEventListener("mouseup",X),window.removeEventListener("touchend",X),window.removeEventListener("contextmenu",X))},te=async re=>{if(re===null||Number.isNaN(+re))return;re<0?re=0:re>100&&(re=100);const ie=100/((s.value-r.value)/a.value);let ge=Math.round(re/ie)*ie*(s.value-r.value)*.01+r.value;ge=Number.parseFloat(ge.toFixed(l.value)),ge!==n.modelValue&&t($n,ge),!e.dragging&&n.modelValue!==e.oldValue&&(e.oldValue=n.modelValue),await cn(),e.dragging&&v(),p.value.updatePopper()};return St(()=>e.dragging,re=>{h(re)}),Yi(y,"touchstart",T,{passive:!1}),{disabled:i,button:y,tooltip:p,tooltipVisible:m,showTooltip:o,wrapperStyle:x,formatValue:g,handleMouseEnter:w,handleMouseLeave:A,onButtonDown:T,onKeyDown:L,setPosition:te}},uLe=Ne({name:"ElSliderButton"}),cLe=Ne({...uLe,props:sLe,emits:aLe,setup(n,{expose:e,emit:t}){const i=n,r=Rt("slider"),s=Ui({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:a,button:o,tooltip:l,showTooltip:u,tooltipVisible:c,wrapperStyle:d,formatValue:f,handleMouseEnter:h,handleMouseLeave:p,onButtonDown:m,onKeyDown:g,setPosition:v}=lLe(i,s,t),{hovering:_,dragging:y}=js(s);return e({onButtonDown:m,onKeyDown:g,setPosition:v,hovering:_,dragging:y}),(b,x)=>(j(),_e("div",{ref_key:"button",ref:o,class:ee([S(r).e("button-wrapper"),{hover:S(_),dragging:S(y)}]),style:Jt(S(d)),tabindex:S(a)?-1:0,onMouseenter:S(h),onMouseleave:S(p),onMousedown:S(m),onFocus:S(h),onBlur:S(p),onKeydown:S(g)},[he(S(Ja),{ref_key:"tooltip",ref:l,visible:S(c),placement:b.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":b.tooltipClass,disabled:!S(u),persistent:S(u)},{content:Ae(()=>[Te("span",null,Lt(S(f)),1)]),default:Ae(()=>[Te("div",{class:ee([S(r).e("button"),{hover:S(_),dragging:S(y)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var D$=Vt(cLe,[["__file","button.vue"]]);const dLe=zt({mark:{type:et([String,Object]),default:void 0}});var fLe=Ne({name:"ElSliderMarker",props:dLe,setup(n){const e=Rt("slider"),t=W(()=>un(n.mark)?n.mark:n.mark.label),i=W(()=>un(n.mark)?void 0:n.mark.style);return()=>ln("div",{class:e.e("marks-text"),style:i.value},t.value)}});const hLe=(n,e,t)=>{const{form:i,formItem:r}=to(),s=Ji(),a=ae(),o=ae(),l={firstButton:a,secondButton:o},u=W(()=>n.disabled||(i==null?void 0:i.disabled)||!1),c=W(()=>Math.min(e.firstValue,e.secondValue)),d=W(()=>Math.max(e.firstValue,e.secondValue)),f=W(()=>n.range?`${100*(d.value-c.value)/(n.max-n.min)}%`:`${100*(e.firstValue-n.min)/(n.max-n.min)}%`),h=W(()=>n.range?`${100*(c.value-n.min)/(n.max-n.min)}%`:"0%"),p=W(()=>n.vertical?{height:n.height}:{}),m=W(()=>n.vertical?{height:f.value,bottom:h.value}:{width:f.value,left:h.value}),g=()=>{s.value&&(e.sliderSize=s.value[`client${n.vertical?"Height":"Width"}`])},v=k=>{const O=n.min+k*(n.max-n.min)/100;if(!n.range)return a;let U;return Math.abs(c.value-O)<Math.abs(d.value-O)?U=e.firstValue<e.secondValue?"firstButton":"secondButton":U=e.firstValue>e.secondValue?"firstButton":"secondButton",l[U]},_=k=>{const O=v(k);return O.value.setPosition(k),O},y=k=>{e.firstValue=k??n.min,x(n.range?[c.value,d.value]:k??n.min)},b=k=>{e.secondValue=k,n.range&&x([c.value,d.value])},x=k=>{t($n,k),t(Qa,k)},w=async()=>{await cn(),t(er,n.range?[c.value,d.value]:n.modelValue)},A=k=>{var O,U,z,L,G,H;if(u.value||e.dragging)return;g();let F=0;if(n.vertical){const X=(z=(U=(O=k.touches)==null?void 0:O.item(0))==null?void 0:U.clientY)!=null?z:k.clientY;F=(s.value.getBoundingClientRect().bottom-X)/e.sliderSize*100}else{const X=(H=(G=(L=k.touches)==null?void 0:L.item(0))==null?void 0:G.clientX)!=null?H:k.clientX,te=s.value.getBoundingClientRect().left;F=(X-te)/e.sliderSize*100}if(!(F<0||F>100))return _(F)};return{elFormItem:r,slider:s,firstButton:a,secondButton:o,sliderDisabled:u,minValue:c,maxValue:d,runwayStyle:p,barStyle:m,resetSize:g,setPosition:_,emitChange:w,onSliderWrapperPrevent:k=>{var O,U;((O=l.firstButton.value)!=null&&O.dragging||(U=l.secondButton.value)!=null&&U.dragging)&&k.preventDefault()},onSliderClick:k=>{A(k)&&w()},onSliderDown:async k=>{const O=A(k);O&&(await cn(),O.value.onButtonDown(k))},onSliderMarkerDown:k=>{u.value||e.dragging||_(k)},setFirstValue:y,setSecondValue:b}},pLe=(n,e,t,i)=>({stops:W(()=>{if(!n.showStops||n.min>n.max)return[];if(n.step===0)return[];const a=(n.max-n.min)/n.step,o=100*n.step/(n.max-n.min),l=Array.from({length:a-1}).map((u,c)=>(c+1)*o);return n.range?l.filter(u=>u<100*(t.value-n.min)/(n.max-n.min)||u>100*(i.value-n.min)/(n.max-n.min)):l.filter(u=>u>100*(e.firstValue-n.min)/(n.max-n.min))}),getStopStyle:a=>n.vertical?{bottom:`${a}%`}:{left:`${a}%`}}),mLe=n=>W(()=>n.marks?Object.keys(n.marks).map(Number.parseFloat).sort((t,i)=>t-i).filter(t=>t<=n.max&&t>=n.min).map(t=>({point:t,position:(t-n.min)*100/(n.max-n.min),mark:n.marks[t]})):[]),gLe=(n,e,t,i,r,s)=>{const a=u=>{r($n,u),r(Qa,u)},o=()=>n.range?![t.value,i.value].every((u,c)=>u===e.oldValue[c]):n.modelValue!==e.oldValue,l=()=>{var u,c;n.min>n.max&&Xs("Slider","min should not be greater than max.");const d=n.modelValue;n.range&&Bt(d)?d[1]<n.min?a([n.min,n.min]):d[0]>n.max?a([n.max,n.max]):d[0]<n.min?a([n.min,d[1]]):d[1]>n.max?a([d[0],n.max]):(e.firstValue=d[0],e.secondValue=d[1],o()&&(n.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(f=>void 0)),e.oldValue=d.slice())):!n.range&&yn(d)&&!Number.isNaN(d)&&(d<n.min?a(n.min):d>n.max?a(n.max):(e.firstValue=d,o()&&(n.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(f=>void 0)),e.oldValue=d)))};l(),St(()=>e.dragging,u=>{u||l()}),St(()=>n.modelValue,(u,c)=>{e.dragging||Bt(u)&&Bt(c)&&u.every((d,f)=>d===c[f])&&e.firstValue===u[0]&&e.secondValue===u[1]||l()},{deep:!0}),St(()=>[n.min,n.max],()=>{l()})},vLe=(n,e,t)=>{const i=ae();return Ln(async()=>{n.range?(Bt(n.modelValue)?(e.firstValue=Math.max(n.min,n.modelValue[0]),e.secondValue=Math.min(n.max,n.modelValue[1])):(e.firstValue=n.min,e.secondValue=n.max),e.oldValue=[e.firstValue,e.secondValue]):(!yn(n.modelValue)||Number.isNaN(n.modelValue)?e.firstValue=n.min:e.firstValue=Math.min(n.max,Math.max(n.min,n.modelValue)),e.oldValue=e.firstValue),Yi(window,"resize",t),await cn(),t()}),{sliderWrapper:i}},yLe=Ne({name:"ElSlider"}),_Le=Ne({...yLe,props:iLe,emits:rLe,setup(n,{expose:e,emit:t}){const i=n,r=Rt("slider"),{t:s}=wi(),a=Ui({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:o,slider:l,firstButton:u,secondButton:c,sliderDisabled:d,minValue:f,maxValue:h,runwayStyle:p,barStyle:m,resetSize:g,emitChange:v,onSliderWrapperPrevent:_,onSliderClick:y,onSliderDown:b,onSliderMarkerDown:x,setFirstValue:w,setSecondValue:A}=hLe(i,a,t),{stops:T,getStopStyle:C}=pLe(i,a,f,h),{inputId:E,isLabeledByFormItem:I}=hc(i,{formItemContext:o}),k=ws(),O=W(()=>i.inputSize||k.value),U=W(()=>i.ariaLabel||s("el.slider.defaultLabel",{min:i.min,max:i.max})),z=W(()=>i.range?i.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):U.value),L=W(()=>i.formatValueText?i.formatValueText(ie.value):`${ie.value}`),G=W(()=>i.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),H=W(()=>i.formatValueText?i.formatValueText(le.value):`${le.value}`),F=W(()=>[r.b(),r.m(k.value),r.is("vertical",i.vertical),{[r.m("with-input")]:i.showInput}]),X=mLe(i);gLe(i,a,f,h,t,o);const te=W(()=>{const ye=[i.min,i.max,i.step].map(Oe=>{const Be=`${Oe}`.split(".")[1];return Be?Be.length:0});return Math.max.apply(null,ye)}),{sliderWrapper:re}=vLe(i,a,g),{firstValue:ie,secondValue:le,sliderSize:ge}=js(a),pe=ye=>{a.dragging=ye};return Yi(re,"touchstart",_,{passive:!1}),Yi(re,"touchmove",_,{passive:!1}),ui(Tie,{...js(i),sliderSize:ge,disabled:d,precision:te,emitChange:v,resetSize:g,updateDragging:pe}),e({onSliderClick:y}),(ye,Oe)=>{var Be,Ye;return j(),_e("div",{id:ye.range?S(E):void 0,ref_key:"sliderWrapper",ref:re,class:ee(S(F)),role:ye.range?"group":void 0,"aria-label":ye.range&&!S(I)?S(U):void 0,"aria-labelledby":ye.range&&S(I)?(Be=S(o))==null?void 0:Be.labelId:void 0},[Te("div",{ref_key:"slider",ref:l,class:ee([S(r).e("runway"),{"show-input":ye.showInput&&!ye.range},S(r).is("disabled",S(d))]),style:Jt(S(p)),onMousedown:S(b),onTouchstartPassive:S(b)},[Te("div",{class:ee(S(r).e("bar")),style:Jt(S(m))},null,6),he(D$,{id:ye.range?void 0:S(E),ref_key:"firstButton",ref:u,"model-value":S(ie),vertical:ye.vertical,"tooltip-class":ye.tooltipClass,placement:ye.placement,role:"slider","aria-label":ye.range||!S(I)?S(z):void 0,"aria-labelledby":!ye.range&&S(I)?(Ye=S(o))==null?void 0:Ye.labelId:void 0,"aria-valuemin":ye.min,"aria-valuemax":ye.range?S(le):ye.max,"aria-valuenow":S(ie),"aria-valuetext":S(L),"aria-orientation":ye.vertical?"vertical":"horizontal","aria-disabled":S(d),"onUpdate:modelValue":S(w)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),ye.range?(j(),gt(D$,{key:0,ref_key:"secondButton",ref:c,"model-value":S(le),vertical:ye.vertical,"tooltip-class":ye.tooltipClass,placement:ye.placement,role:"slider","aria-label":S(G),"aria-valuemin":S(ie),"aria-valuemax":ye.max,"aria-valuenow":S(le),"aria-valuetext":S(H),"aria-orientation":ye.vertical?"vertical":"horizontal","aria-disabled":S(d),"onUpdate:modelValue":S(A)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):ot("v-if",!0),ye.showStops?(j(),_e("div",{key:1},[(j(!0),_e(an,null,ti(S(T),(Ze,Q)=>(j(),_e("div",{key:Q,class:ee(S(r).e("stop")),style:Jt(S(C)(Ze))},null,6))),128))])):ot("v-if",!0),S(X).length>0?(j(),_e(an,{key:2},[Te("div",null,[(j(!0),_e(an,null,ti(S(X),(Ze,Q)=>(j(),_e("div",{key:Q,style:Jt(S(C)(Ze.position)),class:ee([S(r).e("stop"),S(r).e("marks-stop")])},null,6))),128))]),Te("div",{class:ee(S(r).e("marks"))},[(j(!0),_e(an,null,ti(S(X),(Ze,Q)=>(j(),gt(S(fLe),{key:Q,mark:Ze.mark,style:Jt(S(C)(Ze.position)),onMousedown:wn(me=>S(x)(Ze.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):ot("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),ye.showInput&&!ye.range?(j(),gt(S(iie),{key:0,ref:"input","model-value":S(ie),class:ee(S(r).e("input")),step:ye.step,disabled:S(d),controls:ye.showInputControls,min:ye.min,max:ye.max,precision:S(te),debounce:ye.debounce,size:S(O),"onUpdate:modelValue":S(w),onChange:S(v)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):ot("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var bLe=Vt(_Le,[["__file","slider.vue"]]);const SLe=Nn(bLe),xLe=zt({prefixCls:{type:String}}),R$=Ne({name:"ElSpaceItem",props:xLe,setup(n,{slots:e}){const t=Rt("space"),i=W(()=>`${n.prefixCls||t.b()}__item`);return()=>ln("div",{class:i.value},at(e,"default"))}}),P$={small:8,default:12,large:16};function wLe(n){const e=Rt("space"),t=W(()=>[e.b(),e.m(n.direction),n.class]),i=ae(0),r=ae(0),s=W(()=>{const o=n.wrap||n.fill?{flexWrap:"wrap"}:{},l={alignItems:n.alignment},u={rowGap:`${r.value}px`,columnGap:`${i.value}px`};return[o,l,u,n.style]}),a=W(()=>n.fill?{flexGrow:1,minWidth:`${n.fillRatio}%`}:{});return ya(()=>{const{size:o="small",wrap:l,direction:u,fill:c}=n;if(Bt(o)){const[d=0,f=0]=o;i.value=d,r.value=f}else{let d;yn(o)?d=o:d=P$[o||"small"]||P$.small,(l||c)&&u==="horizontal"?i.value=r.value=d:u==="horizontal"?(i.value=d,r.value=0):(r.value=d,i.value=0)}}),{classes:t,containerStyle:s,itemStyle:a}}const TLe=zt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:et([String,Object,Array]),default:""},style:{type:et([String,Array,Object]),default:""},alignment:{type:et(String),default:"center"},prefixCls:{type:String},spacer:{type:et([Object,String,Number,Array]),default:null,validator:n=>Wr(n)||yn(n)||un(n)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:tf,validator:n=>yn(n)||Bt(n)&&n.length===2&&n.every(yn)}}),CLe=Ne({name:"ElSpace",props:TLe,setup(n,{slots:e}){const{classes:t,containerStyle:i,itemStyle:r}=wLe(n);function s(a,o="",l=[]){const{prefixCls:u}=n;return a.forEach((c,d)=>{p6(c)?Bt(c.children)&&c.children.forEach((f,h)=>{p6(f)&&Bt(f.children)?s(f.children,`${o+h}-`,l):l.push(he(R$,{style:r.value,prefixCls:u,key:`nested-${o+h}`},{default:()=>[f]},Pu.PROPS|Pu.STYLE,["style","prefixCls"]))}):vEe(c)&&l.push(he(R$,{style:r.value,prefixCls:u,key:`LoopKey${o+d}`},{default:()=>[c]},Pu.PROPS|Pu.STYLE,["style","prefixCls"]))}),l}return()=>{var a;const{spacer:o,direction:l}=n,u=at(e,"default",{key:0},()=>[]);if(((a=u.children)!=null?a:[]).length===0)return null;if(Bt(u.children)){let c=s(u.children);if(o){const d=c.length-1;c=c.reduce((f,h,p)=>{const m=[...f,h];return p!==d&&m.push(he("span",{style:[r.value,l==="vertical"?"width: 100%":null],key:p},[Wr(o)?o:An(o,Pu.TEXT)],Pu.STYLE)),m},[])}return he("div",{class:t.value,style:i.value},c,Pu.STYLE|Pu.CLASS)}return u.children}}}),ALe=Nn(CLe),ELe=zt({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:et([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:et([String,Object,Array])}}),MLe=Ne({name:"ElStatistic"}),ILe=Ne({...MLe,props:ELe,setup(n,{expose:e}){const t=n,i=Rt("statistic"),r=W(()=>{const{value:s,formatter:a,precision:o,decimalSeparator:l,groupSeparator:u}=t;if(pn(a))return a(s);if(!yn(s)||Number.isNaN(s))return s;let[c,d=""]=String(s).split(".");return d=d.padEnd(o,"0").slice(0,o>0?o:0),c=c.replace(/\B(?=(\d{3})+(?!\d))/g,u),[c,d].join(d?l:"")});return e({displayValue:r}),(s,a)=>(j(),_e("div",{class:ee(S(i).b())},[s.$slots.title||s.title?(j(),_e("div",{key:0,class:ee(S(i).e("head"))},[at(s.$slots,"title",{},()=>[An(Lt(s.title),1)])],2)):ot("v-if",!0),Te("div",{class:ee(S(i).e("content"))},[s.$slots.prefix||s.prefix?(j(),_e("div",{key:0,class:ee(S(i).e("prefix"))},[at(s.$slots,"prefix",{},()=>[Te("span",null,Lt(s.prefix),1)])],2)):ot("v-if",!0),Te("span",{class:ee(S(i).e("number")),style:Jt(s.valueStyle)},Lt(S(r)),7),s.$slots.suffix||s.suffix?(j(),_e("div",{key:1,class:ee(S(i).e("suffix"))},[at(s.$slots,"suffix",{},()=>[Te("span",null,Lt(s.suffix),1)])],2)):ot("v-if",!0)],2)],2))}});var DLe=Vt(ILe,[["__file","statistic.vue"]]);const Cie=Nn(DLe),RLe=zt({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:et([Number,Object]),default:0},valueStyle:{type:et([String,Object,Array])}}),PLe={finish:()=>!0,[er]:n=>yn(n)},kLe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],k$=n=>yn(n)?new Date(n).getTime():n.valueOf(),L$=(n,e)=>{let t=n;const i=/\[([^\]]*)]/g;return kLe.reduce((s,[a,o])=>{const l=new RegExp(`${a}+(?![^\\[\\]]*\\])`,"g");if(l.test(s)){const u=Math.floor(t/o);return t-=u*o,s.replace(l,c=>String(u).padStart(c.length,"0"))}return s},e).replace(i,"$1")},LLe=Ne({name:"ElCountdown"}),OLe=Ne({...LLe,props:RLe,emits:PLe,setup(n,{expose:e,emit:t}){const i=n;let r;const s=ae(0),a=W(()=>L$(s.value,i.format)),o=c=>L$(c,i.format),l=()=>{r&&(Og(r),r=void 0)},u=()=>{const c=k$(i.value),d=()=>{let f=c-Date.now();t("change",f),f<=0?(f=0,l(),t("finish")):r=e0(d),s.value=f};r=e0(d)};return Ln(()=>{s.value=k$(i.value)-Date.now(),St(()=>[i.value,i.format],()=>{l(),u()},{immediate:!0})}),Vi(()=>{l()}),e({displayValue:a}),(c,d)=>(j(),gt(S(Cie),{value:s.value,title:c.title,prefix:c.prefix,suffix:c.suffix,"value-style":c.valueStyle,formatter:o},tc({_:2},[ti(c.$slots,(f,h)=>({name:h,fn:Ae(()=>[at(c.$slots,h)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var NLe=Vt(OLe,[["__file","countdown.vue"]]);const BLe=Nn(NLe),FLe=zt({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),ULe={[er]:(n,e)=>[n,e].every(yn)},zLe=Ne({name:"ElSteps"}),HLe=Ne({...zLe,props:FLe,emits:ULe,setup(n,{emit:e}){const t=n,i=Rt("steps"),{children:r,addChild:s,removeChild:a}=TF(Qn(),"ElStep");return St(r,()=>{r.value.forEach((o,l)=>{o.setIndex(l)})}),ui("ElSteps",{props:t,steps:r,addStep:s,removeStep:a}),St(()=>t.active,(o,l)=>{e(er,o,l)}),(o,l)=>(j(),_e("div",{class:ee([S(i).b(),S(i).m(o.simple?"simple":o.direction)])},[at(o.$slots,"default")],2))}});var VLe=Vt(HLe,[["__file","steps.vue"]]);const $Le=zt({title:{type:String,default:""},icon:{type:nr},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),GLe=Ne({name:"ElStep"}),WLe=Ne({...GLe,props:$Le,setup(n){const e=n,t=Rt("step"),i=ae(-1),r=ae({}),s=ae(""),a=Zt("ElSteps"),o=Qn();Ln(()=>{St([()=>a.props.active,()=>a.props.processStatus,()=>a.props.finishStatus],([w])=>{b(w)},{immediate:!0})}),Vi(()=>{a.removeStep(x.uid)});const l=W(()=>e.status||s.value),u=W(()=>{const w=a.steps.value[i.value-1];return w?w.currentStatus:"wait"}),c=W(()=>a.props.alignCenter),d=W(()=>a.props.direction==="vertical"),f=W(()=>a.props.simple),h=W(()=>a.steps.value.length),p=W(()=>{var w;return((w=a.steps.value[h.value-1])==null?void 0:w.uid)===(o==null?void 0:o.uid)}),m=W(()=>f.value?"":a.props.space),g=W(()=>[t.b(),t.is(f.value?"simple":a.props.direction),t.is("flex",p.value&&!m.value&&!c.value),t.is("center",c.value&&!d.value&&!f.value)]),v=W(()=>{const w={flexBasis:yn(m.value)?`${m.value}px`:m.value?m.value:`${100/(h.value-(c.value?0:1))}%`};return d.value||p.value&&(w.maxWidth=`${100/h.value}%`),w}),_=w=>{i.value=w},y=w=>{const A=w==="wait",T={transitionDelay:`${A?"-":""}${150*i.value}ms`},C=w===a.props.processStatus||A?0:100;T.borderWidth=C&&!f.value?"1px":0,T[a.props.direction==="vertical"?"height":"width"]=`${C}%`,r.value=T},b=w=>{w>i.value?s.value=a.props.finishStatus:w===i.value&&u.value!=="error"?s.value=a.props.processStatus:s.value="wait";const A=a.steps.value[i.value-1];A&&A.calcProgress(s.value)},x=Ui({uid:o.uid,currentStatus:l,setIndex:_,calcProgress:y});return a.addStep(x),(w,A)=>(j(),_e("div",{style:Jt(S(v)),class:ee(S(g))},[ot(" icon & line "),Te("div",{class:ee([S(t).e("head"),S(t).is(S(l))])},[S(f)?ot("v-if",!0):(j(),_e("div",{key:0,class:ee(S(t).e("line"))},[Te("i",{class:ee(S(t).e("line-inner")),style:Jt(r.value)},null,6)],2)),Te("div",{class:ee([S(t).e("icon"),S(t).is(w.icon||w.$slots.icon?"icon":"text")])},[at(w.$slots,"icon",{},()=>[w.icon?(j(),gt(S(rn),{key:0,class:ee(S(t).e("icon-inner"))},{default:Ae(()=>[(j(),gt(ei(w.icon)))]),_:1},8,["class"])):S(l)==="success"?(j(),gt(S(rn),{key:1,class:ee([S(t).e("icon-inner"),S(t).is("status")])},{default:Ae(()=>[he(S(fT))]),_:1},8,["class"])):S(l)==="error"?(j(),gt(S(rn),{key:2,class:ee([S(t).e("icon-inner"),S(t).is("status")])},{default:Ae(()=>[he(S(qc))]),_:1},8,["class"])):S(f)?ot("v-if",!0):(j(),_e("div",{key:3,class:ee(S(t).e("icon-inner"))},Lt(i.value+1),3))])],2)],2),ot(" title & description "),Te("div",{class:ee(S(t).e("main"))},[Te("div",{class:ee([S(t).e("title"),S(t).is(S(l))])},[at(w.$slots,"title",{},()=>[An(Lt(w.title),1)])],2),S(f)?(j(),_e("div",{key:0,class:ee(S(t).e("arrow"))},null,2)):(j(),_e("div",{key:1,class:ee([S(t).e("description"),S(t).is(S(l))])},[at(w.$slots,"description",{},()=>[An(Lt(w.description),1)])],2))],2)],6))}});var Aie=Vt(WLe,[["__file","item.vue"]]);const qLe=Nn(VLe,{Step:Aie}),jLe=Xr(Aie),Eie=n=>["",...tf].includes(n),KLe=zt({modelValue:{type:[Boolean,String,Number],default:!1},disabled:Boolean,loading:Boolean,size:{type:String,validator:Eie},width:{type:[String,Number],default:""},inlinePrompt:Boolean,inactiveActionIcon:{type:nr},activeActionIcon:{type:nr},activeIcon:{type:nr},inactiveIcon:{type:nr},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:et(Function)},id:String,tabindex:{type:[String,Number]},...Ba(["ariaLabel"])}),XLe={[$n]:n=>fr(n)||un(n)||yn(n),[er]:n=>fr(n)||un(n)||yn(n),[Qa]:n=>fr(n)||un(n)||yn(n)},Mie="ElSwitch",YLe=Ne({name:Mie}),QLe=Ne({...YLe,props:KLe,emits:XLe,setup(n,{expose:e,emit:t}){const i=n,{formItem:r}=to(),s=ws(),a=Rt("switch"),{inputId:o}=hc(i,{formItemContext:r}),l=no(W(()=>i.loading)),u=ae(i.modelValue!==!1),c=ae(),d=ae(),f=W(()=>[a.b(),a.m(s.value),a.is("disabled",l.value),a.is("checked",v.value)]),h=W(()=>[a.e("label"),a.em("label","left"),a.is("active",!v.value)]),p=W(()=>[a.e("label"),a.em("label","right"),a.is("active",v.value)]),m=W(()=>({width:ns(i.width)}));St(()=>i.modelValue,()=>{u.value=!0});const g=W(()=>u.value?i.modelValue:!1),v=W(()=>g.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(g.value)||(t($n,i.inactiveValue),t(er,i.inactiveValue),t(Qa,i.inactiveValue)),St(v,x=>{var w;c.value.checked=x,i.validateEvent&&((w=r==null?void 0:r.validate)==null||w.call(r,"change").catch(A=>void 0))});const _=()=>{const x=v.value?i.inactiveValue:i.activeValue;t($n,x),t(er,x),t(Qa,x),cn(()=>{c.value.checked=v.value})},y=()=>{if(l.value)return;const{beforeChange:x}=i;if(!x){_();return}const w=x();[N2(w),fr(w)].includes(!0)||Xs(Mie,"beforeChange must return type `Promise<boolean>` or `boolean`"),N2(w)?w.then(T=>{T&&_()}).catch(T=>{}):w&&_()},b=()=>{var x,w;(w=(x=c.value)==null?void 0:x.focus)==null||w.call(x)};return Ln(()=>{c.value.checked=v.value}),e({focus:b,checked:v}),(x,w)=>(j(),_e("div",{class:ee(S(f)),onClick:wn(y,["prevent"])},[Te("input",{id:S(o),ref_key:"input",ref:c,class:ee(S(a).e("input")),type:"checkbox",role:"switch","aria-checked":S(v),"aria-disabled":S(l),"aria-label":x.ariaLabel,name:x.name,"true-value":x.activeValue,"false-value":x.inactiveValue,disabled:S(l),tabindex:x.tabindex,onChange:_,onKeydown:ur(y,["enter"])},null,42,["id","aria-checked","aria-disabled","aria-label","name","true-value","false-value","disabled","tabindex","onKeydown"]),!x.inlinePrompt&&(x.inactiveIcon||x.inactiveText)?(j(),_e("span",{key:0,class:ee(S(h))},[x.inactiveIcon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(x.inactiveIcon)))]),_:1})):ot("v-if",!0),!x.inactiveIcon&&x.inactiveText?(j(),_e("span",{key:1,"aria-hidden":S(v)},Lt(x.inactiveText),9,["aria-hidden"])):ot("v-if",!0)],2)):ot("v-if",!0),Te("span",{ref_key:"core",ref:d,class:ee(S(a).e("core")),style:Jt(S(m))},[x.inlinePrompt?(j(),_e("div",{key:0,class:ee(S(a).e("inner"))},[x.activeIcon||x.inactiveIcon?(j(),gt(S(rn),{key:0,class:ee(S(a).is("icon"))},{default:Ae(()=>[(j(),gt(ei(S(v)?x.activeIcon:x.inactiveIcon)))]),_:1},8,["class"])):x.activeText||x.inactiveText?(j(),_e("span",{key:1,class:ee(S(a).is("text")),"aria-hidden":!S(v)},Lt(S(v)?x.activeText:x.inactiveText),11,["aria-hidden"])):ot("v-if",!0)],2)):ot("v-if",!0),Te("div",{class:ee(S(a).e("action"))},[x.loading?(j(),gt(S(rn),{key:0,class:ee(S(a).is("loading"))},{default:Ae(()=>[he(S($d))]),_:1},8,["class"])):S(v)?at(x.$slots,"active-action",{key:1},()=>[x.activeActionIcon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(x.activeActionIcon)))]),_:1})):ot("v-if",!0)]):S(v)?ot("v-if",!0):at(x.$slots,"inactive-action",{key:2},()=>[x.inactiveActionIcon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(x.inactiveActionIcon)))]),_:1})):ot("v-if",!0)])],2)],6),!x.inlinePrompt&&(x.activeIcon||x.activeText)?(j(),_e("span",{key:1,class:ee(S(p))},[x.activeIcon?(j(),gt(S(rn),{key:0},{default:Ae(()=>[(j(),gt(ei(x.activeIcon)))]),_:1})):ot("v-if",!0),!x.activeIcon&&x.activeText?(j(),_e("span",{key:1,"aria-hidden":!S(v)},Lt(x.activeText),9,["aria-hidden"])):ot("v-if",!0)],2)):ot("v-if",!0)],10,["onClick"]))}});var ZLe=Vt(QLe,[["__file","switch.vue"]]);const JLe=Nn(ZLe),hP=function(n){var e;return(e=n.target)==null?void 0:e.closest("td")},e6e=function(n,e,t,i,r){if(!e&&!i&&(!r||Bt(r)&&!r.length))return n;un(t)?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const s=i?null:function(o,l){return r?(Bt(r)||(r=[r]),r.map(u=>un(u)?vs(o,u):u(o,l,n))):(e!=="$key"&&Yn(o)&&"$value"in o&&(o=o.$value),[Yn(o)?vs(o,e):o])},a=function(o,l){if(i)return i(o.value,l.value);for(let u=0,c=o.key.length;u<c;u++){if(o.key[u]<l.key[u])return-1;if(o.key[u]>l.key[u])return 1}return 0};return n.map((o,l)=>({value:o,index:l,key:s?s(o,l):null})).sort((o,l)=>{let u=a(o,l);return u||(u=o.index-l.index),u*+t}).map(o=>o.value)},Iie=function(n,e){let t=null;return n.columns.forEach(i=>{i.id===e&&(t=i)}),t},t6e=function(n,e){let t=null;for(let i=0;i<n.columns.length;i++){const r=n.columns[i];if(r.columnKey===e){t=r;break}}return t||Xs("ElTable",`No column matching with column-key: ${e}`),t},O$=function(n,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?Iie(n,i[0]):null},_o=(n,e)=>{if(!n)throw new Error("Row is required when get row identity");if(un(e)){if(!e.includes("."))return`${n[e]}`;const t=e.split(".");let i=n;for(const r of t)i=i[r];return`${i}`}else if(pn(e))return e.call(null,n)},Jm=function(n,e){const t={};return(n||[]).forEach((i,r)=>{t[_o(i,e)]={row:i,index:r}}),t};function n6e(n,e){const t={};let i;for(i in n)t[i]=n[i];for(i in e)if(Ai(e,i)){const r=e[i];typeof r<"u"&&(t[i]=r)}return t}function XF(n){return n===""||n!==void 0&&(n=Number.parseInt(n,10),Number.isNaN(n)&&(n="")),n}function Die(n){return n===""||n!==void 0&&(n=XF(n),Number.isNaN(n)&&(n=80)),n}function i6e(n){return yn(n)?n:un(n)?/^\d+(?:px)?$/.test(n)?Number.parseInt(n,10):n:null}function r6e(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function N3(n,e,t,i,r,s){let a=s??0,o=!1;const l=n.indexOf(e),u=l!==-1,c=r==null?void 0:r.call(null,e,s),d=h=>{h==="add"?n.push(e):n.splice(l,1),o=!0},f=h=>{let p=0;const m=(i==null?void 0:i.children)&&h[i.children];return m&&Bt(m)&&(p+=m.length,m.forEach(g=>{p+=f(g)})),p};return(!r||c)&&(fr(t)?t&&!u?d("add"):!t&&u&&d("remove"):d(u?"remove":"add")),!(i!=null&&i.checkStrictly)&&(i!=null&&i.children)&&Bt(e[i.children])&&e[i.children].forEach(h=>{N3(n,h,t??!u,i,r,a+1),a+=f(h)+1}),o}function s6e(n,e,t="children",i="hasChildren"){const r=a=>!(Bt(a)&&a.length);function s(a,o,l){e(a,o,l),o.forEach(u=>{if(u[i]){e(u,null,l+1);return}const c=u[t];r(c)||s(u,c,l+1)})}n.forEach(a=>{if(a[i]){e(a,null,0);return}const o=a[t];r(o)||s(a,o,0)})}const N$=(n,e)=>({content:e,...n,popperOptions:{strategy:"fixed",...n.popperOptions}});let Eu=null;function a6e(n,e,t,i){if((Eu==null?void 0:Eu.trigger)===t){Nee(Eu.vm.component.props,N$(n,e));return}Eu==null||Eu();const r=i==null?void 0:i.refs.tableWrapper,s=r==null?void 0:r.dataset.prefix,a=he(Ja,{virtualTriggering:!0,virtualRef:t,appendTo:r,placement:"top",transition:"none",offset:0,hideAfter:0,...N$(n,e)});a.appContext={...i.appContext,...i};const o=document.createElement("div");Zp(a,o),a.component.exposed.onOpen();const l=r==null?void 0:r.querySelector(`.${s}-scrollbar__wrap`);Eu=()=>{Zp(null,o),l==null||l.removeEventListener("scroll",Eu),Eu=null},Eu.trigger=t,Eu.vm=a,l==null||l.addEventListener("scroll",Eu)}function Rie(n){return n.children?tSe(n.children,Rie):[n]}function B$(n,e){return n+e.colSpan}const Pie=(n,e,t,i)=>{let r=0,s=n;const a=t.states.columns.value;if(i){const l=Rie(i[n]);r=a.slice(0,a.indexOf(l[0])).reduce(B$,0),s=r+l.reduce(B$,0)-1}else r=n;let o;switch(e){case"left":s<t.states.fixedLeafColumnsLength.value&&(o="left");break;case"right":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right");break;default:s<t.states.fixedLeafColumnsLength.value?o="left":r>=a.length-t.states.rightFixedLeafColumnsLength.value&&(o="right")}return o?{direction:o,start:r,after:s}:{}},YF=(n,e,t,i,r,s=0)=>{const a=[],{direction:o,start:l,after:u}=Pie(e,t,i,r);if(o){const c=o==="left";a.push(`${n}-fixed-column--${o}`),c&&u+s===i.states.fixedLeafColumnsLength.value-1?a.push("is-last-column"):!c&&l-s===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&a.push("is-first-column")}return a};function F$(n,e){return n+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const QF=(n,e,t,i)=>{const{direction:r,start:s=0,after:a=0}=Pie(n,e,t,i);if(!r)return;const o={},l=r==="left",u=t.states.columns.value;return l?o.left=u.slice(0,s).reduce(F$,0):o.right=u.slice(a+1).reverse().reduce(F$,0),o},v_=(n,e)=>{n&&(Number.isNaN(n[e])||(n[e]=`${n[e]}px`))};function o6e(n){const e=Qn(),t=ae(!1),i=ae([]);return{updateExpandRows:()=>{const l=n.data.value||[],u=n.rowKey.value;if(t.value)i.value=l.slice();else if(u){const c=Jm(i.value,u);i.value=l.reduce((d,f)=>{const h=_o(f,u);return c[h]&&d.push(f),d},[])}else i.value=[]},toggleRowExpansion:(l,u)=>{N3(i.value,l,u)&&e.emit("expand-change",l,i.value.slice())},setExpandRowKeys:l=>{e.store.assertRowKey();const u=n.data.value||[],c=n.rowKey.value,d=Jm(u,c);i.value=l.reduce((f,h)=>{const p=d[h];return p&&f.push(p.row),f},[])},isRowExpanded:l=>{const u=n.rowKey.value;return u?!!Jm(i.value,u)[_o(l,u)]:i.value.includes(l)},states:{expandRows:i,defaultExpandAll:t}}}function l6e(n){const e=Qn(),t=ae(null),i=ae(null),r=u=>{e.store.assertRowKey(),t.value=u,a(u)},s=()=>{t.value=null},a=u=>{const{data:c,rowKey:d}=n;let f=null;d.value&&(f=(S(c)||[]).find(h=>_o(h,d.value)===u)),i.value=f,e.emit("current-change",i.value,null)};return{setCurrentRowKey:r,restoreCurrentRowKey:s,setCurrentRowByKey:a,updateCurrentRow:u=>{const c=i.value;if(u&&u!==c){i.value=u,e.emit("current-change",i.value,c);return}!u&&c&&(i.value=null,e.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=n.rowKey.value,c=n.data.value||[],d=i.value;if(!c.includes(d)&&d){if(u){const f=_o(d,u);a(f)}else i.value=null;i.value===null&&e.emit("current-change",null,d)}else t.value&&(a(t.value),s())},states:{_currentRowKey:t,currentRow:i}}}function u6e(n){const e=ae([]),t=ae({}),i=ae(16),r=ae(!1),s=ae({}),a=ae("hasChildren"),o=ae("children"),l=ae(!1),u=Qn(),c=W(()=>{if(!n.rowKey.value)return{};const y=n.data.value||[];return f(y)}),d=W(()=>{const y=n.rowKey.value,b=Object.keys(s.value),x={};return b.length&&b.forEach(w=>{if(s.value[w].length){const A={children:[]};s.value[w].forEach(T=>{const C=_o(T,y);A.children.push(C),T[a.value]&&!x[C]&&(x[C]={children:[]})}),x[w]=A}}),x}),f=y=>{const b=n.rowKey.value,x={};return s6e(y,(w,A,T)=>{const C=_o(w,b);Bt(A)?x[C]={children:A.map(E=>_o(E,b)),level:T}:r.value&&(x[C]={children:[],lazy:!0,level:T})},o.value,a.value),x},h=(y=!1,b=(x=>(x=u.store)==null?void 0:x.states.defaultExpandAll.value)())=>{var x;const w=c.value,A=d.value,T=Object.keys(w),C={};if(T.length){const E=S(t),I=[],k=(U,z)=>{if(y)return e.value?b||e.value.includes(z):!!(b||U!=null&&U.expanded);{const L=b||e.value&&e.value.includes(z);return!!(U!=null&&U.expanded||L)}};T.forEach(U=>{const z=E[U],L={...w[U]};if(L.expanded=k(z,U),L.lazy){const{loaded:G=!1,loading:H=!1}=z||{};L.loaded=!!G,L.loading=!!H,I.push(U)}C[U]=L});const O=Object.keys(A);r.value&&O.length&&I.length&&O.forEach(U=>{const z=E[U],L=A[U].children;if(I.includes(U)){if(C[U].children.length!==0)throw new Error("[ElTable]children must be an empty array.");C[U].children=L}else{const{loaded:G=!1,loading:H=!1}=z||{};C[U]={lazy:!0,loaded:!!G,loading:!!H,expanded:k(z,U),children:L,level:""}}})}t.value=C,(x=u.store)==null||x.updateTableScrollY()};St(()=>e.value,()=>{h(!0)}),St(()=>c.value,()=>{h()}),St(()=>d.value,()=>{h()});const p=y=>{e.value=y,h()},m=(y,b)=>{u.store.assertRowKey();const x=n.rowKey.value,w=_o(y,x),A=w&&t.value[w];if(w&&A&&"expanded"in A){const T=A.expanded;b=Xi(b)?!A.expanded:b,t.value[w].expanded=b,T!==b&&u.emit("expand-change",y,b),u.store.updateTableScrollY()}},g=y=>{u.store.assertRowKey();const b=n.rowKey.value,x=_o(y,b),w=t.value[x];r.value&&w&&"loaded"in w&&!w.loaded?v(y,x,w):m(y,void 0)},v=(y,b,x)=>{const{load:w}=u.props;w&&!t.value[b].loaded&&(t.value[b].loading=!0,w(y,x,A=>{if(!Bt(A))throw new TypeError("[ElTable] data must be an array");t.value[b].loading=!1,t.value[b].loaded=!0,t.value[b].expanded=!0,A.length&&(s.value[b]=A),u.emit("expand-change",y,!0)}))};return{loadData:v,loadOrToggle:g,toggleTreeExpansion:m,updateTreeExpandKeys:p,updateTreeData:h,updateKeyChildren:(y,b)=>{const{lazy:x,rowKey:w}=u.props;if(x){if(!w)throw new Error("[Table] rowKey is required in updateKeyChild");s.value[y]&&(s.value[y]=b)}},normalize:f,states:{expandRowKeys:e,treeData:t,indent:i,lazy:r,lazyTreeNodeMap:s,lazyColumnIdentifier:a,childrenColumnName:o,checkStrictly:l}}}const c6e=(n,e)=>{const t=e.sortingColumn;return!t||un(t.sortable)?n:e6e(n,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},SM=n=>{const e=[];return n.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,SM(t.children)):e.push(t)}),e};function d6e(){var n;const e=Qn(),{size:t}=js((n=e.proxy)==null?void 0:n.$props),i=ae(null),r=ae([]),s=ae([]),a=ae(!1),o=ae([]),l=ae([]),u=ae([]),c=ae([]),d=ae([]),f=ae([]),h=ae([]),p=ae([]),m=[],g=ae(0),v=ae(0),_=ae(0),y=ae(!1),b=ae([]),x=ae(!1),w=ae(!1),A=ae(null),T=ae({}),C=ae(null),E=ae(null),I=ae(null),k=ae(null),O=ae(null);St(r,()=>{var q;e.state&&(H(!1),e.props.tableLayout==="auto"&&((q=e.refs.tableHeaderRef)==null||q.updateFixedColumnStyle()))},{deep:!0});const U=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},z=q=>{var xe;(xe=q.children)==null||xe.forEach(ve=>{ve.fixed=q.fixed,z(ve)})};let L;const G=()=>{o.value.forEach(we=>{z(we)}),c.value=o.value.filter(we=>we.fixed===!0||we.fixed==="left"),d.value=o.value.filter(we=>we.fixed==="right"),Xi(L)&&o.value[0]&&o.value[0].type==="selection"&&(L=!!o.value[0].fixed),c.value.length>0&&o.value[0]&&o.value[0].type==="selection"&&(o.value[0].fixed?c.value.some(De=>De.type!=="selection")?L=void 0:(o.value[0].fixed=L,L||c.value.shift()):(o.value[0].fixed=!0,c.value.unshift(o.value[0])));const q=o.value.filter(we=>!we.fixed);l.value=[].concat(c.value).concat(q).concat(d.value);const xe=SM(q),ve=SM(c.value),ke=SM(d.value);g.value=xe.length,v.value=ve.length,_.value=ke.length,u.value=[].concat(ve).concat(xe).concat(ke),a.value=c.value.length>0||d.value.length>0},H=(q,xe=!1)=>{q&&G(),xe?e.state.doLayout():e.state.debouncedUpdateLayout()},F=q=>b.value.some(xe=>La(xe,q)),X=()=>{y.value=!1;const q=b.value;b.value=[],q.length&&e.emit("selection-change",[])},te=()=>{let q;if(i.value){q=[];const xe=Jm(b.value,i.value),ve=Jm(r.value,i.value);for(const ke in xe)Ai(xe,ke)&&!ve[ke]&&q.push(xe[ke].row)}else q=b.value.filter(xe=>!r.value.includes(xe));if(q.length){const xe=b.value.filter(ve=>!q.includes(ve));b.value=xe,e.emit("selection-change",xe.slice())}},re=()=>(b.value||[]).slice(),ie=(q,xe,ve=!0,ke=!1)=>{var we,De,xt,Pe;const Dt={children:(De=(we=e==null?void 0:e.store)==null?void 0:we.states)==null?void 0:De.childrenColumnName.value,checkStrictly:(Pe=(xt=e==null?void 0:e.store)==null?void 0:xt.states)==null?void 0:Pe.checkStrictly.value};if(N3(b.value,q,xe,Dt,ke?void 0:A.value)){const Mt=(b.value||[]).slice();ve&&e.emit("select",Mt,q),e.emit("selection-change",Mt)}},le=()=>{var q,xe;const ve=w.value?!y.value:!(y.value||b.value.length);y.value=ve;let ke=!1,we=0;const De=(xe=(q=e==null?void 0:e.store)==null?void 0:q.states)==null?void 0:xe.rowKey.value,{childrenColumnName:xt}=e.store.states,Pe={children:xt.value,checkStrictly:!1};r.value.forEach((Dt,dt)=>{const Mt=dt+we;N3(b.value,Dt,ve,Pe,A.value,Mt)&&(ke=!0),we+=ye(_o(Dt,De))}),ke&&e.emit("selection-change",b.value?b.value.slice():[]),e.emit("select-all",(b.value||[]).slice())},ge=()=>{const q=Jm(b.value,i.value);r.value.forEach(xe=>{const ve=_o(xe,i.value),ke=q[ve];ke&&(b.value[ke.index]=xe)})},pe=()=>{var q;if(((q=r.value)==null?void 0:q.length)===0){y.value=!1;return}const{childrenColumnName:xe}=e.store.states,ve=i.value?Jm(b.value,i.value):void 0;let ke=0,we=0;const De=Dt=>ve?!!ve[_o(Dt,i.value)]:b.value.includes(Dt),xt=Dt=>{var dt;for(const Mt of Dt){const jt=A.value&&A.value.call(null,Mt,ke);if(De(Mt))we++;else if(!A.value||jt)return!1;if(ke++,(dt=Mt[xe.value])!=null&&dt.length&&!xt(Mt[xe.value]))return!1}return!0},Pe=xt(r.value||[]);y.value=we===0?!1:Pe},ye=q=>{var xe;if(!e||!e.store)return 0;const{treeData:ve}=e.store.states;let ke=0;const we=(xe=ve.value[q])==null?void 0:xe.children;return we&&(ke+=we.length,we.forEach(De=>{ke+=ye(De)})),ke},Oe=(q,xe)=>{Bt(q)||(q=[q]);const ve={};return q.forEach(ke=>{T.value[ke.id]=xe,ve[ke.columnKey||ke.id]=xe}),ve},Be=(q,xe,ve)=>{E.value&&E.value!==q&&(E.value.order=null),E.value=q,I.value=xe,k.value=ve},Ye=()=>{let q=S(s);Object.keys(T.value).forEach(xe=>{const ve=T.value[xe];if(!ve||ve.length===0)return;const ke=Iie({columns:u.value},xe);ke&&ke.filterMethod&&(q=q.filter(we=>ve.some(De=>ke.filterMethod.call(null,De,we,ke))))}),C.value=q},Ze=()=>{r.value=c6e(C.value,{sortingColumn:E.value,sortProp:I.value,sortOrder:k.value})},Q=(q=void 0)=>{q&&q.filter||Ye(),Ze()},me=q=>{const{tableHeaderRef:xe}=e.refs;if(!xe)return;const ve=Object.assign({},xe.filterPanels),ke=Object.keys(ve);if(ke.length)if(un(q)&&(q=[q]),Bt(q)){const we=q.map(De=>t6e({columns:u.value},De));ke.forEach(De=>{const xt=we.find(Pe=>Pe.id===De);xt&&(xt.filteredValue=[])}),e.store.commit("filterChange",{column:we,values:[],silent:!0,multi:!0})}else ke.forEach(we=>{const De=u.value.find(xt=>xt.id===we);De&&(De.filteredValue=[])}),T.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},ce=()=>{E.value&&(Be(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:je,toggleRowExpansion:Fe,updateExpandRows:nt,states:We,isRowExpanded:Ke}=o6e({data:r,rowKey:i}),{updateTreeExpandKeys:it,toggleTreeExpansion:be,updateTreeData:K,updateKeyChildren:ne,loadOrToggle:Se,states:ze}=u6e({data:r,rowKey:i}),{updateCurrentRowData:Je,updateCurrentRow:Tt,setCurrentRowKey:At,states:Re}=l6e({data:r,rowKey:i});return{assertRowKey:U,updateColumns:G,scheduleLayout:H,isSelected:F,clearSelection:X,cleanSelection:te,getSelectionRows:re,toggleRowSelection:ie,_toggleAllSelection:le,toggleAllSelection:null,updateSelectionByRowKey:ge,updateAllSelected:pe,updateFilters:Oe,updateCurrentRow:Tt,updateSort:Be,execFilter:Ye,execSort:Ze,execQuery:Q,clearFilter:me,clearSort:ce,toggleRowExpansion:Fe,setExpandRowKeysAdapter:q=>{je(q),it(q)},setCurrentRowKey:At,toggleRowExpansionAdapter:(q,xe)=>{u.value.some(({type:ke})=>ke==="expand")?Fe(q,xe):be(q,xe)},isRowExpanded:Ke,updateExpandRows:nt,updateCurrentRowData:Je,loadOrToggle:Se,updateTreeData:K,updateKeyChildren:ne,states:{tableSize:t,rowKey:i,data:r,_data:s,isComplex:a,_columns:o,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:f,fixedLeafColumns:h,rightFixedLeafColumns:p,updateOrderFns:m,leafColumnsLength:g,fixedLeafColumnsLength:v,rightFixedLeafColumnsLength:_,isAllSelected:y,selection:b,reserveSelection:x,selectOnIndeterminate:w,selectable:A,filters:T,filteredData:C,sortingColumn:E,sortProp:I,sortOrder:k,hoverRow:O,...We,...ze,...Re}}}function F6(n,e){return n.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=F6(t.children,e)),t)})}function U6(n){n.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&U6(e.children)}),n.sort((e,t)=>e.no-t.no)}function f6e(){const n=Qn(),e=d6e();return{ns:Rt("table"),...e,mutations:{setData(a,o){const l=S(a._data)!==o;a.data.value=o,a._data.value=o,n.store.execQuery(),n.store.updateCurrentRowData(),n.store.updateExpandRows(),n.store.updateTreeData(n.store.states.defaultExpandAll.value),S(a.reserveSelection)?(n.store.assertRowKey(),n.store.updateSelectionByRowKey()):l?n.store.clearSelection():n.store.cleanSelection(),n.store.updateAllSelected(),n.$ready&&n.store.scheduleLayout()},insertColumn(a,o,l,u){const c=S(a._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(o),d=F6(c,l)):(c.push(o),d=c),U6(d),a._columns.value=d,a.updateOrderFns.push(u),o.type==="selection"&&(a.selectable.value=o.selectable,a.reserveSelection.value=o.reserveSelection),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},updateColumnOrder(a,o){var l;((l=o.getColumnIndex)==null?void 0:l.call(o))!==o.no&&(U6(a._columns.value),n.$ready&&n.store.updateColumns())},removeColumn(a,o,l,u){const c=S(a._columns)||[];if(l)l.children.splice(l.children.findIndex(f=>f.id===o.id),1),cn(()=>{var f;((f=l.children)==null?void 0:f.length)===0&&delete l.children}),a._columns.value=F6(c,l);else{const f=c.indexOf(o);f>-1&&(c.splice(f,1),a._columns.value=c)}const d=a.updateOrderFns.indexOf(u);d>-1&&a.updateOrderFns.splice(d,1),n.$ready&&(n.store.updateColumns(),n.store.scheduleLayout())},sort(a,o){const{prop:l,order:u,init:c}=o;if(l){const d=S(a.columns).find(f=>f.property===l);d&&(d.order=u,n.store.updateSort(d,l,u),n.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(a,o){const{sortingColumn:l,sortProp:u,sortOrder:c}=a,d=S(l),f=S(u),h=S(c);h===null&&(a.sortingColumn.value=null,a.sortProp.value=null);const p={filter:!0};n.store.execQuery(p),(!o||!(o.silent||o.init))&&n.emit("sort-change",{column:d,prop:f,order:h}),n.store.updateTableScrollY()},filterChange(a,o){const{column:l,values:u,silent:c}=o,d=n.store.updateFilters(l,u);n.store.execQuery(),c||n.emit("filter-change",d),n.store.updateTableScrollY()},toggleAllSelection(){n.store.toggleAllSelection()},rowSelectedChanged(a,o){n.store.toggleRowSelection(o),n.store.updateAllSelected()},setHoverRow(a,o){a.hoverRow.value=o},setCurrentRow(a,o){n.store.updateCurrentRow(o)}},commit:function(a,...o){const l=n.store.mutations;if(l[a])l[a].apply(n,[n.store.states].concat(o));else throw new Error(`Action not found: ${a}`)},updateTableScrollY:function(){cn(()=>n.layout.updateScrollY.apply(n.layout))}}}const Zx={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function h6e(n,e){if(!n)throw new Error("Table is required.");const t=f6e();return t.toggleAllSelection=Rl(t._toggleAllSelection,10),Object.keys(Zx).forEach(i=>{kie(Lie(e,i),i,t)}),p6e(t,e),t}function p6e(n,e){Object.keys(Zx).forEach(t=>{St(()=>Lie(e,t),i=>{kie(i,t,n)})})}function kie(n,e,t){let i=n,r=Zx[e];typeof Zx[e]=="object"&&(r=r.key,i=i||Zx[e].default),t.states[r].value=i}function Lie(n,e){if(e.includes(".")){const t=e.split(".");let i=n;return t.forEach(r=>{i=i[r]}),i}else return n[e]}class m6e{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ae(null),this.scrollX=ae(!1),this.scrollY=ae(!1),this.bodyWidth=ae(null),this.fixedWidth=ae(null),this.rightFixedWidth=ae(null),this.gutterWidth=0;for(const t in e)Ai(e,t)&&(br(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const t=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(t!=null&&t.wrapRef)){let i=!0;const r=this.scrollY.value;return i=t.wrapRef.scrollHeight>t.wrapRef.clientHeight,this.scrollY.value=i,r!==i}return!1}setHeight(e,t="height"){if(!xi)return;const i=this.table.vnode.el;if(e=i6e(e),this.height.value=Number(e),!i&&(e||e===0))return cn(()=>this.setHeight(e,t));yn(e)?(i.style[t]=`${e}px`,this.updateElsHeight()):un(e)&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(i=>{i.isColumnGroup?e.push.apply(e,i.columns):e.push(i)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!xi)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const r=this.getFlattenColumns(),s=r.filter(l=>!yn(l.width));if(r.forEach(l=>{yn(l.width)&&l.realWidth&&(l.realWidth=null)}),s.length>0&&e){if(r.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const u=s.reduce((f,h)=>f+Number(h.minWidth||80),0),c=l/u;let d=0;s.forEach((f,h)=>{if(h===0)return;const p=Math.floor(Number(f.minWidth||80)*c);d+=p,f.realWidth=Number(f.minWidth||80)+p}),s[0].realWidth=Number(s[0].minWidth||80)+l-d}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else r.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const a=this.store.states.fixedColumns.value;if(a.length>0){let l=0;a.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const o=this.store.states.rightFixedColumns.value;if(o.length>0){let l=0;o.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(i=>{var r,s;switch(e){case"columns":(r=i.state)==null||r.onColumnsChange(this);break;case"scrollable":(s=i.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:g6e}=sc,v6e=Ne({name:"ElTableFilterPanel",components:{ElCheckbox:sc,ElCheckboxGroup:g6e,ElScrollbar:nf,ElTooltip:Ja,ElIcon:rn,ArrowDown:Sh,ArrowUp:nF},directives:{ClickOutside:sh},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(n){const e=Qn(),{t}=wi(),i=Rt("table-filter"),r=e==null?void 0:e.parent;r.filterPanels.value[n.column.id]||(r.filterPanels.value[n.column.id]=e);const s=ae(!1),a=ae(null),o=W(()=>n.column&&n.column.filters),l=W(()=>n.column.filterClassName?`${i.b()} ${n.column.filterClassName}`:i.b()),u=W({get:()=>{var x;return(((x=n.column)==null?void 0:x.filteredValue)||[])[0]},set:x=>{c.value&&(typeof x<"u"&&x!==null?c.value.splice(0,1,x):c.value.splice(0,1))}}),c=W({get(){return n.column?n.column.filteredValue||[]:[]},set(x){n.column&&n.upDataColumn("filteredValue",x)}}),d=W(()=>n.column?n.column.filterMultiple:!0),f=x=>x.value===u.value,h=()=>{s.value=!1},p=x=>{x.stopPropagation(),s.value=!s.value},m=()=>{s.value=!1},g=()=>{y(c.value),h()},v=()=>{c.value=[],y(c.value),h()},_=x=>{u.value=x,y(typeof x<"u"&&x!==null?c.value:[]),h()},y=x=>{n.store.commit("filterChange",{column:n.column,values:x}),n.store.updateAllSelected()};St(s,x=>{n.column&&n.upDataColumn("filterOpened",x)},{immediate:!0});const b=W(()=>{var x,w;return(w=(x=a.value)==null?void 0:x.popperRef)==null?void 0:w.contentRef});return{tooltipVisible:s,multiple:d,filterClassName:l,filteredValue:c,filterValue:u,filters:o,handleConfirm:g,handleReset:v,handleSelect:_,isActive:f,t,ns:i,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:b,tooltip:a}}});function y6e(n,e,t,i,r,s){const a=Ht("el-checkbox"),o=Ht("el-checkbox-group"),l=Ht("el-scrollbar"),u=Ht("arrow-up"),c=Ht("arrow-down"),d=Ht("el-icon"),f=Ht("el-tooltip"),h=PI("click-outside");return j(),gt(f,{ref:"tooltip",visible:n.tooltipVisible,offset:0,placement:n.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":n.filterClassName,persistent:"","append-to":n.appendTo},{content:Ae(()=>[n.multiple?(j(),_e("div",{key:0},[Te("div",{class:ee(n.ns.e("content"))},[he(l,{"wrap-class":n.ns.e("wrap")},{default:Ae(()=>[he(o,{modelValue:n.filteredValue,"onUpdate:modelValue":p=>n.filteredValue=p,class:ee(n.ns.e("checkbox-group"))},{default:Ae(()=>[(j(!0),_e(an,null,ti(n.filters,p=>(j(),gt(a,{key:p.value,value:p.value},{default:Ae(()=>[An(Lt(p.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),Te("div",{class:ee(n.ns.e("bottom"))},[Te("button",{class:ee({[n.ns.is("disabled")]:n.filteredValue.length===0}),disabled:n.filteredValue.length===0,type:"button",onClick:n.handleConfirm},Lt(n.t("el.table.confirmFilter")),11,["disabled","onClick"]),Te("button",{type:"button",onClick:n.handleReset},Lt(n.t("el.table.resetFilter")),9,["onClick"])],2)])):(j(),_e("ul",{key:1,class:ee(n.ns.e("list"))},[Te("li",{class:ee([n.ns.e("list-item"),{[n.ns.is("active")]:n.filterValue===void 0||n.filterValue===null}]),onClick:p=>n.handleSelect(null)},Lt(n.t("el.table.clearFilter")),11,["onClick"]),(j(!0),_e(an,null,ti(n.filters,p=>(j(),_e("li",{key:p.value,class:ee([n.ns.e("list-item"),n.ns.is("active",n.isActive(p))]),label:p.value,onClick:m=>n.handleSelect(p.value)},Lt(p.text),11,["label","onClick"]))),128))],2))]),default:Ae(()=>[Vn((j(),_e("span",{class:ee([`${n.ns.namespace.value}-table__column-filter-trigger`,`${n.ns.namespace.value}-none-outline`]),onClick:n.showFilterPanel},[he(d,null,{default:Ae(()=>[at(n.$slots,"filter-icon",{},()=>[n.column.filterOpened?(j(),gt(u,{key:0})):(j(),gt(c,{key:1}))])]),_:3})],10,["onClick"])),[[h,n.hideFilterPanel,n.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var _6e=Vt(v6e,[["render",y6e],["__file","filter-panel.vue"]]);function Oie(n){const e=Qn();RI(()=>{t.value.addObserver(e)}),Ln(()=>{i(t.value),r(t.value)}),fc(()=>{i(t.value),r(t.value)}),yh(()=>{t.value.removeObserver(e)});const t=W(()=>{const s=n.layout;if(!s)throw new Error("Can not find table layout.");return s}),i=s=>{var a;const o=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col"))||[];if(!o.length)return;const l=s.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=o.length;c<d;c++){const f=o[c],h=f.getAttribute("name"),p=u[h];p&&f.setAttribute("width",p.realWidth||p.width)}},r=s=>{var a,o;const l=((a=n.vnode.el)==null?void 0:a.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const u=((o=n.vnode.el)==null?void 0:o.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const f=u[c];f.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",f.style.display=s.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:r}}const rf=Symbol("ElTable");function b6e(n,e){const t=Qn(),i=Zt(rf),r=m=>{m.stopPropagation()},s=(m,g)=>{!g.filters&&g.sortable?p(m,g,!1):g.filterable&&!g.sortable&&r(m),i==null||i.emit("header-click",g,m)},a=(m,g)=>{i==null||i.emit("header-contextmenu",g,m)},o=ae(null),l=ae(!1),u=ae({}),c=(m,g)=>{if(xi&&!(g.children&&g.children.length>0)&&o.value&&n.border){l.value=!0;const v=i;e("set-drag-visible",!0);const y=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,b=t.vnode.el.querySelector(`th.${g.id}`),x=b.getBoundingClientRect(),w=x.left-y+30;$u(b,"noclick"),u.value={startMouseLeft:m.clientX,startLeft:x.right-y,startColumnLeft:x.left-y,tableLeft:y};const A=v==null?void 0:v.refs.resizeProxy;A.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const T=E=>{const I=E.clientX-u.value.startMouseLeft,k=u.value.startLeft+I;A.style.left=`${Math.max(w,k)}px`},C=()=>{if(l.value){const{startColumnLeft:E,startLeft:I}=u.value,O=Number.parseInt(A.style.left,10)-E;g.width=g.realWidth=O,v==null||v.emit("header-dragend",g.width,I-E,g,m),requestAnimationFrame(()=>{n.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,o.value=null,u.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",C),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{To(b,"noclick")},0)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",C)}},d=(m,g)=>{var v;if(g.children&&g.children.length>0)return;const _=m.target;if(!au(_))return;const y=_==null?void 0:_.closest("th");if(!(!g||!g.resizable||!y)&&!l.value&&n.border){const b=y.getBoundingClientRect(),x=document.body.style,w=((v=y.parentNode)==null?void 0:v.lastElementChild)===y;b.width>12&&b.right-m.pageX<8&&!w?(x.cursor="col-resize",bl(y,"is-sortable")&&(y.style.cursor="col-resize"),o.value=g):l.value||(x.cursor="",bl(y,"is-sortable")&&(y.style.cursor="pointer"),o.value=null)}},f=()=>{xi&&(document.body.style.cursor="")},h=({order:m,sortOrders:g})=>{if(m==="")return g[0];const v=g.indexOf(m||null);return g[v>g.length-2?0:v+1]},p=(m,g,v)=>{var _;m.stopPropagation();const y=g.order===v?null:v||h(g),b=(_=m.target)==null?void 0:_.closest("th");if(b&&bl(b,"noclick")){To(b,"noclick");return}if(!g.sortable)return;const x=m.currentTarget;if(["ascending","descending"].some(E=>bl(x,E)&&!g.sortOrders.includes(E)))return;const w=n.store.states;let A=w.sortProp.value,T;const C=w.sortingColumn.value;(C!==g||C===g&&C.order===null)&&(C&&(C.order=null),w.sortingColumn.value=g,A=g.property),y?T=g.order=y:T=g.order=null,w.sortProp.value=A,w.sortOrder.value=T,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:a,handleMouseDown:c,handleMouseMove:d,handleMouseOut:f,handleSortClick:p,handleFilterClick:r}}function S6e(n){const e=Zt(rf),t=Rt("table");return{getHeaderRowStyle:o=>{const l=e==null?void 0:e.props.headerRowStyle;return pn(l)?l.call(null,{rowIndex:o}):l},getHeaderRowClass:o=>{const l=[],u=e==null?void 0:e.props.headerRowClassName;return un(u)?l.push(u):pn(u)&&l.push(u.call(null,{rowIndex:o})),l.join(" ")},getHeaderCellStyle:(o,l,u,c)=>{var d;let f=(d=e==null?void 0:e.props.headerCellStyle)!=null?d:{};pn(f)&&(f=f.call(null,{rowIndex:o,columnIndex:l,row:u,column:c}));const h=QF(l,c.fixed,n.store,u);return v_(h,"left"),v_(h,"right"),Object.assign({},f,h)},getHeaderCellClass:(o,l,u,c)=>{const d=YF(t.b(),l,c.fixed,n.store,u),f=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||f.push("is-leaf"),c.sortable&&f.push("is-sortable");const h=e==null?void 0:e.props.headerCellClassName;return un(h)?f.push(h):pn(h)&&f.push(h.call(null,{rowIndex:o,columnIndex:l,row:u,column:c})),f.push(t.e("cell")),f.filter(p=>!!p).join(" ")}}}const Nie=n=>{const e=[];return n.forEach(t=>{t.children?(e.push(t),e.push.apply(e,Nie(t.children))):e.push(t)}),e},Bie=n=>{let e=1;const t=(s,a)=>{if(a&&(s.level=a.level+1,e<s.level&&(e=s.level)),s.children){let o=0;s.children.forEach(l=>{t(l,s),o+=l.colSpan}),s.colSpan=o}else s.colSpan=1};n.forEach(s=>{s.level=1,t(s,void 0)});const i=[];for(let s=0;s<e;s++)i.push([]);return Nie(n).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(a=>a.isSubColumn=!0)):s.rowSpan=e-s.level+1,i[s.level-1].push(s)}),i};function x6e(n){const e=Zt(rf),t=W(()=>Bie(n.store.states.originColumns.value));return{isGroup:W(()=>{const s=t.value.length>1;return s&&e&&(e.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var w6e=Ne({name:"ElTableHeader",components:{ElCheckbox:sc},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String}},setup(n,{emit:e}){const t=Qn(),i=Zt(rf),r=Rt("table"),s=ae({}),{onColumnsChange:a,onScrollableChange:o}=Oie(i),l=(i==null?void 0:i.props.tableLayout)==="auto",u=Ui(new Map),c=ae(),d=()=>{setTimeout(()=>{u.size>0&&(u.forEach((E,I)=>{const k=c.value.querySelector(`.${I.replace(/\s/g,".")}`);if(k){const O=k.getBoundingClientRect().width;E.width=O}}),u.clear())})};St(u,d),Ln(async()=>{await cn(),await cn();const{prop:E,order:I}=n.defaultSort;i==null||i.store.commit("sort",{prop:E,order:I,init:!0}),d()});const{handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:g,handleSortClick:v,handleFilterClick:_}=b6e(n,e),{getHeaderRowStyle:y,getHeaderRowClass:b,getHeaderCellStyle:x,getHeaderCellClass:w}=S6e(n),{isGroup:A,toggleAllSelection:T,columnRows:C}=x6e(n);return t.state={onColumnsChange:a,onScrollableChange:o},t.filterPanels=s,{ns:r,filterPanels:s,onColumnsChange:a,onScrollableChange:o,columnRows:C,getHeaderRowClass:b,getHeaderRowStyle:y,getHeaderCellClass:w,getHeaderCellStyle:x,handleHeaderClick:f,handleHeaderContextMenu:h,handleMouseDown:p,handleMouseMove:m,handleMouseOut:g,handleSortClick:v,handleFilterClick:_,isGroup:A,toggleAllSelection:T,saveIndexSelection:u,isTableLayoutAuto:l,theadRef:c,updateFixedColumnStyle:d}},render(){const{ns:n,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:r,getHeaderRowClass:s,getHeaderRowStyle:a,handleHeaderClick:o,handleHeaderContextMenu:l,handleMouseDown:u,handleMouseMove:c,handleSortClick:d,handleMouseOut:f,store:h,$parent:p,saveIndexSelection:m,isTableLayoutAuto:g}=this;let v=1;return ln("thead",{ref:"theadRef",class:{[n.is("group")]:e}},t.map((_,y)=>ln("tr",{class:s(y),key:y,style:a(y)},_.map((b,x)=>{b.rowSpan>v&&(v=b.rowSpan);const w=r(y,x,_,b);return g&&b.fixed&&m.set(w,b),ln("th",{class:w,colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:i(y,x,_,b),onClick:A=>{A.currentTarget.classList.contains("noclick")||o(A,b)},onContextmenu:A=>l(A,b),onMousedown:A=>u(A,b),onMousemove:A=>c(A,b),onMouseout:f},[ln("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:x,store:h,_self:p}):b.label,b.sortable&&ln("span",{onClick:A=>d(A,b),class:"caret-wrapper"},[ln("i",{onClick:A=>d(A,b,"ascending"),class:"sort-caret ascending"}),ln("i",{onClick:A=>d(A,b,"descending"),class:"sort-caret descending"})]),b.filterable&&ln(_6e,{store:h,placement:b.filterPlacement||"bottom-start",appendTo:p.appendFilterPanelTo,column:b,upDataColumn:(A,T)=>{b[A]=T}},{"filter-icon":()=>b.renderFilterIcon?b.renderFilterIcon({filterOpened:b.filterOpened}):null})])])}))))}});function pP(n,e,t=.03){return n-e>t}function T6e(n){const e=Zt(rf),t=ae(""),i=ae(ln("div")),r=(p,m,g)=>{var v;const _=e,y=hP(p);let b;const x=(v=_==null?void 0:_.vnode.el)==null?void 0:v.dataset.prefix;y&&(b=O$({columns:n.store.states.columns.value},y,x),b&&(_==null||_.emit(`cell-${g}`,m,b,y,p))),_==null||_.emit(`row-${g}`,m,b,p)},s=(p,m)=>{r(p,m,"dblclick")},a=(p,m)=>{n.store.commit("setCurrentRow",m),r(p,m,"click")},o=(p,m)=>{r(p,m,"contextmenu")},l=Rl(p=>{n.store.commit("setHoverRow",p)},30),u=Rl(()=>{n.store.commit("setHoverRow",null)},30),c=p=>{const m=window.getComputedStyle(p,null),g=Number.parseInt(m.paddingLeft,10)||0,v=Number.parseInt(m.paddingRight,10)||0,_=Number.parseInt(m.paddingTop,10)||0,y=Number.parseInt(m.paddingBottom,10)||0;return{left:g,right:v,top:_,bottom:y}},d=(p,m,g)=>{let v=m.target.parentNode;for(;p>1&&(v=v==null?void 0:v.nextSibling,!(!v||v.nodeName!=="TR"));)g(v,"hover-row hover-fixed-row"),p--};return{handleDoubleClick:s,handleClick:a,handleContextMenu:o,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(p,m,g)=>{var v;const _=e,y=hP(p),b=(v=_==null?void 0:_.vnode.el)==null?void 0:v.dataset.prefix;if(y){const G=O$({columns:n.store.states.columns.value},y,b);y.rowSpan>1&&d(y.rowSpan,p,$u);const H=_.hoverState={cell:y,column:G,row:m};_==null||_.emit("cell-mouse-enter",H.row,H.column,H.cell,p)}if(!g)return;const x=p.target.querySelector(".cell");if(!(bl(x,`${b}-tooltip`)&&x.childNodes.length))return;const w=document.createRange();w.setStart(x,0),w.setEnd(x,x.childNodes.length);const{width:A,height:T}=w.getBoundingClientRect(),{width:C,height:E}=x.getBoundingClientRect(),{top:I,left:k,right:O,bottom:U}=c(x),z=k+O,L=I+U;(pP(A+z,C)||pP(T+L,E)||pP(x.scrollWidth,C))&&a6e(g,y.innerText||y.textContent,y,_)},handleCellMouseLeave:p=>{const m=hP(p);if(!m)return;m.rowSpan>1&&d(m.rowSpan,p,To);const g=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",g==null?void 0:g.row,g==null?void 0:g.column,g==null?void 0:g.cell,p)},tooltipContent:t,tooltipTrigger:i}}function C6e(n){const e=Zt(rf),t=Rt("table");return{getRowStyle:(u,c)=>{const d=e==null?void 0:e.props.rowStyle;return pn(d)?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&u===n.store.states.currentRow.value&&d.push("current-row"),n.stripe&&c%2===1&&d.push(t.em("row","striped"));const f=e==null?void 0:e.props.rowClassName;return un(f)?d.push(f):pn(f)&&d.push(f.call(null,{row:u,rowIndex:c})),d},getCellStyle:(u,c,d,f)=>{const h=e==null?void 0:e.props.cellStyle;let p=h??{};pn(h)&&(p=h.call(null,{rowIndex:u,columnIndex:c,row:d,column:f}));const m=QF(c,n==null?void 0:n.fixed,n.store);return v_(m,"left"),v_(m,"right"),Object.assign({},p,m)},getCellClass:(u,c,d,f,h)=>{const p=YF(t.b(),c,n==null?void 0:n.fixed,n.store,void 0,h),m=[f.id,f.align,f.className,...p],g=e==null?void 0:e.props.cellClassName;return un(g)?m.push(g):pn(g)&&m.push(g.call(null,{rowIndex:u,columnIndex:c,row:d,column:f})),m.push(t.e("cell")),m.filter(v=>!!v).join(" ")},getSpan:(u,c,d,f)=>{let h=1,p=1;const m=e==null?void 0:e.props.spanMethod;if(pn(m)){const g=m({row:u,column:c,rowIndex:d,columnIndex:f});Bt(g)?(h=g[0],p=g[1]):typeof g=="object"&&(h=g.rowspan,p=g.colspan)}return{rowspan:h,colspan:p}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const f=u.map(({realWidth:h,width:p})=>h||p).slice(d,d+c);return Number(f.reduce((h,p)=>Number(h)+Number(p),-1))}}}const A6e=Ne({name:"TableTdWrapper"}),E6e=Ne({...A6e,props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(n){return(e,t)=>(j(),_e("td",{colspan:n.colspan,rowspan:n.rowspan},[at(e.$slots,"default")],8,["colspan","rowspan"]))}});var M6e=Vt(E6e,[["__file","td-wrapper.vue"]]);function I6e(n){const e=Zt(rf),t=Rt("table"),{handleDoubleClick:i,handleClick:r,handleContextMenu:s,handleMouseEnter:a,handleMouseLeave:o,handleCellMouseEnter:l,handleCellMouseLeave:u,tooltipContent:c,tooltipTrigger:d}=T6e(n),{getRowStyle:f,getRowClass:h,getCellStyle:p,getCellClass:m,getSpan:g,getColspanRealWidth:v}=C6e(n),_=W(()=>n.store.states.columns.value.findIndex(({type:A})=>A==="default")),y=(A,T)=>{const C=e.props.rowKey;return C?_o(A,C):T},b=(A,T,C,E=!1)=>{const{tooltipEffect:I,tooltipOptions:k,store:O}=n,{indent:U,columns:z}=O.states,L=h(A,T);let G=!0;return C&&(L.push(t.em("row",`level-${C.level}`)),G=C.display),ln("tr",{style:[G?null:{display:"none"},f(A,T)],class:L,key:y(A,T),onDblclick:F=>i(F,A),onClick:F=>r(F,A),onContextmenu:F=>s(F,A),onMouseenter:()=>a(T),onMouseleave:o},z.value.map((F,X)=>{const{rowspan:te,colspan:re}=g(A,F,T,X);if(!te||!re)return null;const ie=Object.assign({},F);ie.realWidth=v(z.value,re,X);const le={store:n.store,_self:n.context||e,column:ie,row:A,$index:T,cellIndex:X,expanded:E};X===_.value&&C&&(le.treeNode={indent:C.level*U.value,level:C.level},fr(C.expanded)&&(le.treeNode.expanded=C.expanded,"loading"in C&&(le.treeNode.loading=C.loading),"noLazyChildren"in C&&(le.treeNode.noLazyChildren=C.noLazyChildren)));const ge=`${y(A,T)},${X}`,pe=ie.columnKey||ie.rawColumnKey||"",ye=F.showOverflowTooltip&&Nee({effect:I},k,F.showOverflowTooltip);return ln(M6e,{style:p(T,X,A,F),class:m(T,X,A,F,re-1),key:`${pe}${ge}`,rowspan:te,colspan:re,onMouseenter:Oe=>l(Oe,A,ye),onMouseleave:u},{default:()=>x(X,F,le)})}))},x=(A,T,C)=>T.renderCell(C);return{wrappedRowRender:(A,T)=>{const C=n.store,{isRowExpanded:E,assertRowKey:I}=C,{treeData:k,lazyTreeNodeMap:O,childrenColumnName:U,rowKey:z}=C.states,L=C.states.columns.value;if(L.some(({type:H})=>H==="expand")){const H=E(A),F=b(A,T,void 0,H),X=e.renderExpanded;return H?X?[[F,ln("tr",{key:`expanded-row__${F.key}`},[ln("td",{colspan:L.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[X({row:A,$index:T,store:C,expanded:H})])])]]:(console.error("[Element Error]renderExpanded is required."),F):[[F]]}else if(Object.keys(k.value).length){I();const H=_o(A,z.value);let F=k.value[H],X=null;F&&(X={expanded:F.expanded,level:F.level,display:!0},fr(F.lazy)&&(fr(F.loaded)&&F.loaded&&(X.noLazyChildren=!(F.children&&F.children.length)),X.loading=F.loading));const te=[b(A,T,X)];if(F){let re=0;const ie=(ge,pe)=>{ge&&ge.length&&pe&&ge.forEach(ye=>{const Oe={display:pe.display&&pe.expanded,level:pe.level+1,expanded:!1,noLazyChildren:!1,loading:!1},Be=_o(ye,z.value);if(Be==null)throw new Error("For nested data item, row-key is required.");if(F={...k.value[Be]},F&&(Oe.expanded=F.expanded,F.level=F.level||Oe.level,F.display=!!(F.expanded&&Oe.display),fr(F.lazy)&&(fr(F.loaded)&&F.loaded&&(Oe.noLazyChildren=!(F.children&&F.children.length)),Oe.loading=F.loading)),re++,te.push(b(ye,T+re,Oe)),F){const Ye=O.value[Be]||ye[U.value];ie(Ye,F)}})};F.display=!0;const le=O.value[H]||A[U.value];ie(le,F)}return te}else return b(A,T,void 0)},tooltipContent:c,tooltipTrigger:d}}const D6e={store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean};var R6e=Ne({name:"ElTableBody",props:D6e,setup(n){const e=Qn(),t=Zt(rf),i=Rt("table"),{wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}=I6e(n),{onColumnsChange:o,onScrollableChange:l}=Oie(t),u=[];return St(n.store.states.hoverRow,(c,d)=>{var f;const h=e==null?void 0:e.vnode.el,p=Array.from((h==null?void 0:h.children)||[]).filter(v=>v==null?void 0:v.classList.contains(`${i.e("row")}`));let m=c;const g=(f=p[m])==null?void 0:f.childNodes;if(g!=null&&g.length){let v=0;Array.from(g).reduce((y,b,x)=>{var w,A;return((w=g[x])==null?void 0:w.colSpan)>1&&(v=(A=g[x])==null?void 0:A.colSpan),b.nodeName!=="TD"&&v===0&&y.push(x),v>0&&v--,y},[]).forEach(y=>{var b;for(m=c;m>0;){const x=(b=p[m-1])==null?void 0:b.childNodes;if(x[y]&&x[y].nodeName==="TD"&&x[y].rowSpan>1){$u(x[y],"hover-cell"),u.push(x[y]);break}m--}})}else u.forEach(v=>To(v,"hover-cell")),u.length=0;!n.store.states.isComplex.value||!xi||e0(()=>{const v=p[d],_=p[c];v&&!v.classList.contains("hover-fixed-row")&&To(v,"hover-row"),_&&$u(_,"hover-row")})}),yh(()=>{var c;(c=Eu)==null||c()}),{ns:i,onColumnsChange:o,onScrollableChange:l,wrappedRowRender:r,tooltipContent:s,tooltipTrigger:a}},render(){const{wrappedRowRender:n,store:e}=this,t=e.states.data.value||[];return ln("tbody",{tabIndex:-1},[t.reduce((i,r)=>i.concat(n(r,i.length)),[])])}});function P6e(){const n=Zt(rf),e=n==null?void 0:n.store,t=W(()=>e.states.fixedLeafColumnsLength.value),i=W(()=>e.states.rightFixedColumns.value.length),r=W(()=>e.states.columns.value.length),s=W(()=>e.states.fixedColumns.value.length),a=W(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:r,leftFixedCount:s,rightFixedCount:a,columns:e.states.columns}}function k6e(n){const{columns:e}=P6e(),t=Rt("table");return{getCellClasses:(s,a)=>{const o=s[a],l=[t.e("cell"),o.id,o.align,o.labelClassName,...YF(t.b(),a,o.fixed,n.store)];return o.className&&l.push(o.className),o.children||l.push(t.is("leaf")),l},getCellStyles:(s,a)=>{const o=QF(a,s.fixed,n.store);return v_(o,"left"),v_(o,"right"),o},columns:e}}var L6e=Ne({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(n){const{getCellClasses:e,getCellStyles:t,columns:i}=k6e(n);return{ns:Rt("table"),getCellClasses:e,getCellStyles:t,columns:i}},render(){const{columns:n,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:r}=this,s=this.store.states.data.value;let a=[];return i?a=i({columns:n,data:s}):n.forEach((o,l)=>{if(l===0){a[l]=r;return}const u=s.map(h=>Number(h[o.property])),c=[];let d=!0;u.forEach(h=>{if(!Number.isNaN(+h)){d=!1;const p=`${h}`.split(".")[1];c.push(p?p.length:0)}});const f=Math.max.apply(null,c);d?a[l]="":a[l]=u.reduce((h,p)=>{const m=Number(p);return Number.isNaN(+m)?h:Number.parseFloat((h+p).toFixed(Math.min(f,20)))},0)}),ln(ln("tfoot",[ln("tr",{},[...n.map((o,l)=>ln("td",{key:l,colspan:o.colSpan,rowspan:o.rowSpan,class:t(n,l),style:e(o,l)},[ln("div",{class:["cell",o.labelClassName]},[a[l]])]))])]))}});function O6e(n){return{setCurrentRow:d=>{n.commit("setCurrentRow",d)},getSelectionRows:()=>n.getSelectionRows(),toggleRowSelection:(d,f,h=!0)=>{n.toggleRowSelection(d,f,!1,h),n.updateAllSelected()},clearSelection:()=>{n.clearSelection()},clearFilter:d=>{n.clearFilter(d)},toggleAllSelection:()=>{n.commit("toggleAllSelection")},toggleRowExpansion:(d,f)=>{n.toggleRowExpansionAdapter(d,f)},clearSort:()=>{n.clearSort()},sort:(d,f)=>{n.commit("sort",{prop:d,order:f})},updateKeyChildren:(d,f)=>{n.updateKeyChildren(d,f)}}}function N6e(n,e,t,i){const r=ae(!1),s=ae(null),a=ae(!1),o=H=>{a.value=H},l=ae({width:null,height:null,headerHeight:null}),u=ae(!1),c={display:"inline-block",verticalAlign:"middle"},d=ae(),f=ae(0),h=ae(0),p=ae(0),m=ae(0),g=ae(0);ya(()=>{e.setHeight(n.height)}),ya(()=>{e.setMaxHeight(n.maxHeight)}),St(()=>[n.currentRowKey,t.states.rowKey],([H,F])=>{!S(F)||!S(H)||t.setCurrentRowKey(`${H}`)},{immediate:!0}),St(()=>n.data,H=>{i.store.commit("setData",H)},{immediate:!0,deep:!0}),ya(()=>{n.expandRowKeys&&t.setExpandRowKeysAdapter(n.expandRowKeys)});const v=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},_=(H,F)=>{const{pixelX:X,pixelY:te}=F;Math.abs(X)>=Math.abs(te)&&(i.refs.bodyWrapper.scrollLeft+=F.pixelX/5)},y=W(()=>n.height||n.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),b=W(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),x=()=>{y.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(C)};Ln(async()=>{await cn(),t.updateColumns(),E(),requestAnimationFrame(x);const H=i.vnode.el,F=i.refs.headerWrapper;n.flexible&&H&&H.parentElement&&(H.parentElement.style.minWidth="0"),l.value={width:d.value=H.offsetWidth,height:H.offsetHeight,headerHeight:n.showHeader&&F?F.offsetHeight:null},t.states.columns.value.forEach(X=>{X.filteredValue&&X.filteredValue.length&&i.store.commit("filterChange",{column:X,values:X.filteredValue,silent:!0})}),i.$ready=!0});const w=(H,F)=>{if(!H)return;const X=Array.from(H.classList).filter(te=>!te.startsWith("is-scrolling-"));X.push(e.scrollX.value?F:"is-scrolling-none"),H.className=X.join(" ")},A=H=>{const{tableWrapper:F}=i.refs;w(F,H)},T=H=>{const{tableWrapper:F}=i.refs;return!!(F&&F.classList.contains(H))},C=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const ge="is-scrolling-none";T(ge)||A(ge);return}const H=i.refs.scrollBarRef.wrapRef;if(!H)return;const{scrollLeft:F,offsetWidth:X,scrollWidth:te}=H,{headerWrapper:re,footerWrapper:ie}=i.refs;re&&(re.scrollLeft=F),ie&&(ie.scrollLeft=F);const le=te-X-1;F>=le?A("is-scrolling-right"):A(F===0?"is-scrolling-left":"is-scrolling-middle")},E=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Yi(i.refs.scrollBarRef.wrapRef,"scroll",C,{passive:!0}),n.fit?Br(i.vnode.el,I):Yi(window,"resize",I),Br(i.refs.bodyWrapper,()=>{var H,F;I(),(F=(H=i.refs)==null?void 0:H.scrollBarRef)==null||F.update()}))},I=()=>{var H,F,X,te;const re=i.vnode.el;if(!i.$ready||!re)return;let ie=!1;const{width:le,height:ge,headerHeight:pe}=l.value,ye=d.value=re.offsetWidth;le!==ye&&(ie=!0);const Oe=re.offsetHeight;(n.height||y.value)&&ge!==Oe&&(ie=!0);const Be=n.tableLayout==="fixed"?i.refs.headerWrapper:(H=i.refs.tableHeaderRef)==null?void 0:H.$el;n.showHeader&&(Be==null?void 0:Be.offsetHeight)!==pe&&(ie=!0),f.value=((F=i.refs.tableWrapper)==null?void 0:F.scrollHeight)||0,p.value=(Be==null?void 0:Be.scrollHeight)||0,m.value=((X=i.refs.footerWrapper)==null?void 0:X.offsetHeight)||0,g.value=((te=i.refs.appendWrapper)==null?void 0:te.offsetHeight)||0,h.value=f.value-p.value-m.value-g.value,ie&&(l.value={width:ye,height:Oe,headerHeight:n.showHeader&&(Be==null?void 0:Be.offsetHeight)||0},x())},k=ws(),O=W(()=>{const{bodyWidth:H,scrollY:F,gutterWidth:X}=e;return H.value?`${H.value-(F.value?X:0)}px`:""}),U=W(()=>n.maxHeight?"fixed":n.tableLayout),z=W(()=>{if(n.data&&n.data.length)return null;let H="100%";n.height&&h.value&&(H=`${h.value}px`);const F=d.value;return{width:F?`${F}px`:"",height:H}}),L=W(()=>n.height?{height:"100%"}:n.maxHeight?Number.isNaN(Number(n.maxHeight))?{maxHeight:`calc(${n.maxHeight} - ${p.value+m.value}px)`}:{maxHeight:`${n.maxHeight-p.value-m.value}px`}:{});return{isHidden:r,renderExpanded:s,setDragVisible:o,isGroup:u,handleMouseLeave:v,handleHeaderFooterMousewheel:_,tableSize:k,emptyBlockStyle:z,handleFixedMousewheel:(H,F)=>{const X=i.refs.bodyWrapper;if(Math.abs(F.spinY)>0){const te=X.scrollTop;F.pixelY<0&&te!==0&&H.preventDefault(),F.pixelY>0&&X.scrollHeight-X.clientHeight>te&&H.preventDefault(),X.scrollTop+=Math.ceil(F.pixelY/5)}else X.scrollLeft+=Math.ceil(F.pixelX/5)},resizeProxyVisible:a,bodyWidth:O,resizeState:l,doLayout:x,tableBodyStyles:b,tableLayout:U,scrollbarViewStyle:c,scrollbarStyle:L}}function B6e(n){const e=ae(),t=()=>{const r=n.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},a=n.store.states.updateOrderFns;e.value=new MutationObserver(()=>{a.forEach(o=>o())}),e.value.observe(r,s)};Ln(()=>{t()}),yh(()=>{var i;(i=e.value)==null||i.disconnect()})}var F6e={data:{type:Array,default:()=>[]},size:ks,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0}};function Fie(n){const e=n.tableLayout==="auto";let t=n.columns||[];e&&t.every(r=>r.width===void 0)&&(t=[]);const i=r=>{const s={key:`${n.tableLayout}_${r.id}`,style:{},name:void 0};return e?s.style={width:`${r.width}px`}:s.name=r.id,s};return ln("colgroup",{},t.map(r=>ln("col",i(r))))}Fie.props=["columns","tableLayout"];const U6e=()=>{const n=ae(),e=(s,a)=>{const o=n.value;o&&o.scrollTo(s,a)},t=(s,a)=>{const o=n.value;o&&yn(a)&&["Top","Left"].includes(s)&&o[`setScroll${s}`](a)};return{scrollBarRef:n,scrollTo:e,setScrollTop:s=>t("Top",s),setScrollLeft:s=>t("Left",s)}};var U$=!1,Um,z6,H6,xM,wM,Uie,TM,V6,$6,G6,zie,W6,q6,Hie,Vie;function ul(){if(!U$){U$=!0;var n=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(n),t=/(Mac OS X)|(Windows)|(Linux)/.exec(n);if(W6=/\b(iPhone|iP[ao]d)/.exec(n),q6=/\b(iP[ao]d)/.exec(n),G6=/Android/i.exec(n),Hie=/FBAN\/\w+;/i.exec(n),Vie=/Mobile/i.exec(n),zie=!!/Win64/.exec(n),e){Um=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Um&&document&&document.documentMode&&(Um=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(n);Uie=i?parseFloat(i[1])+4:Um,z6=e[2]?parseFloat(e[2]):NaN,H6=e[3]?parseFloat(e[3]):NaN,xM=e[4]?parseFloat(e[4]):NaN,xM?(e=/(?:Chrome\/(\d+\.\d+))/.exec(n),wM=e&&e[1]?parseFloat(e[1]):NaN):wM=NaN}else Um=z6=H6=wM=xM=NaN;if(t){if(t[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(n);TM=r?parseFloat(r[1].replace("_",".")):!0}else TM=!1;V6=!!t[2],$6=!!t[3]}else TM=V6=$6=!1}}var j6={ie:function(){return ul()||Um},ieCompatibilityMode:function(){return ul()||Uie>Um},ie64:function(){return j6.ie()&&zie},firefox:function(){return ul()||z6},opera:function(){return ul()||H6},webkit:function(){return ul()||xM},safari:function(){return j6.webkit()},chrome:function(){return ul()||wM},windows:function(){return ul()||V6},osx:function(){return ul()||TM},linux:function(){return ul()||$6},iphone:function(){return ul()||W6},mobile:function(){return ul()||W6||q6||G6||Vie},nativeApp:function(){return ul()||Hie},android:function(){return ul()||G6},ipad:function(){return ul()||q6}},z6e=j6,eA=!!(typeof window<"u"&&window.document&&window.document.createElement),H6e={canUseDOM:eA,canUseWorkers:typeof Worker<"u",canUseEventListeners:eA&&!!(window.addEventListener||window.attachEvent),canUseViewport:eA&&!!window.screen,isInWorker:!eA},$ie=H6e,Gie;$ie.canUseDOM&&(Gie=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function V6e(n,e){if(!$ie.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+n,i=t in document;if(!i){var r=document.createElement("div");r.setAttribute(t,"return;"),i=typeof r[t]=="function"}return!i&&Gie&&n==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var $6e=V6e,z$=10,H$=40,V$=800;function Wie(n){var e=0,t=0,i=0,r=0;return"detail"in n&&(t=n.detail),"wheelDelta"in n&&(t=-n.wheelDelta/120),"wheelDeltaY"in n&&(t=-n.wheelDeltaY/120),"wheelDeltaX"in n&&(e=-n.wheelDeltaX/120),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(e=t,t=0),i=e*z$,r=t*z$,"deltaY"in n&&(r=n.deltaY),"deltaX"in n&&(i=n.deltaX),(i||r)&&n.deltaMode&&(n.deltaMode==1?(i*=H$,r*=H$):(i*=V$,r*=V$)),i&&!e&&(e=i<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:r}}Wie.getEventType=function(){return z6e.firefox()?"DOMMouseScroll":$6e("wheel")?"wheel":"mousewheel"};var G6e=Wie;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const W6e=function(n,e){if(n&&n.addEventListener){const t=function(i){const r=G6e(i);e&&Reflect.apply(e,this,[i,r])};n.addEventListener("wheel",t,{passive:!0})}},q6e={beforeMount(n,e){W6e(n,e.value)}};let j6e=1;const K6e=Ne({name:"ElTable",directives:{Mousewheel:q6e},components:{TableHeader:w6e,TableBody:R6e,TableFooter:L6e,ElScrollbar:nf,hColgroup:Fie},props:F6e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(n){const{t:e}=wi(),t=Rt("table"),i=Qn();ui(rf,i);const r=h6e(i,n);i.store=r;const s=new m6e({store:i.store,table:i,fit:n.fit,showHeader:n.showHeader});i.layout=s;const a=W(()=>(r.states.data.value||[]).length===0),{setCurrentRow:o,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,sort:m,updateKeyChildren:g}=O6e(r),{isHidden:v,renderExpanded:_,setDragVisible:y,isGroup:b,handleMouseLeave:x,handleHeaderFooterMousewheel:w,tableSize:A,emptyBlockStyle:T,handleFixedMousewheel:C,resizeProxyVisible:E,bodyWidth:I,resizeState:k,doLayout:O,tableBodyStyles:U,tableLayout:z,scrollbarViewStyle:L,scrollbarStyle:G}=N6e(n,s,r,i),{scrollBarRef:H,scrollTo:F,setScrollLeft:X,setScrollTop:te}=U6e(),re=Rl(O,50),ie=`${t.namespace.value}-table_${j6e++}`;i.tableId=ie,i.state={isGroup:b,resizeState:k,doLayout:O,debouncedUpdateLayout:re};const le=W(()=>{var ye;return(ye=n.sumText)!=null?ye:e("el.table.sumText")}),ge=W(()=>{var ye;return(ye=n.emptyText)!=null?ye:e("el.table.emptyText")}),pe=W(()=>Bie(r.states.originColumns.value)[0]);return B6e(i),Vi(()=>{re.cancel()}),{ns:t,layout:s,store:r,columns:pe,handleHeaderFooterMousewheel:w,handleMouseLeave:x,tableId:ie,tableSize:A,isHidden:v,isEmpty:a,renderExpanded:_,resizeProxyVisible:E,resizeState:k,isGroup:b,bodyWidth:I,tableBodyStyles:U,emptyBlockStyle:T,debouncedUpdateLayout:re,handleFixedMousewheel:C,setCurrentRow:o,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:f,toggleRowExpansion:h,clearSort:p,doLayout:O,sort:m,updateKeyChildren:g,t:e,setDragVisible:y,context:i,computedSumText:le,computedEmptyText:ge,tableLayout:z,scrollbarViewStyle:L,scrollbarStyle:G,scrollBarRef:H,scrollTo:F,setScrollLeft:X,setScrollTop:te}}});function X6e(n,e,t,i,r,s){const a=Ht("hColgroup"),o=Ht("table-header"),l=Ht("table-body"),u=Ht("table-footer"),c=Ht("el-scrollbar"),d=PI("mousewheel");return j(),_e("div",{ref:"tableWrapper",class:ee([{[n.ns.m("fit")]:n.fit,[n.ns.m("striped")]:n.stripe,[n.ns.m("border")]:n.border||n.isGroup,[n.ns.m("hidden")]:n.isHidden,[n.ns.m("group")]:n.isGroup,[n.ns.m("fluid-height")]:n.maxHeight,[n.ns.m("scrollable-x")]:n.layout.scrollX.value,[n.ns.m("scrollable-y")]:n.layout.scrollY.value,[n.ns.m("enable-row-hover")]:!n.store.states.isComplex.value,[n.ns.m("enable-row-transition")]:(n.store.states.data.value||[]).length!==0&&(n.store.states.data.value||[]).length<100,"has-footer":n.showSummary},n.ns.m(n.tableSize),n.className,n.ns.b(),n.ns.m(`layout-${n.tableLayout}`)]),style:Jt(n.style),"data-prefix":n.ns.namespace.value,onMouseleave:n.handleMouseLeave},[Te("div",{class:ee(n.ns.e("inner-wrapper"))},[Te("div",{ref:"hiddenColumns",class:"hidden-columns"},[at(n.$slots,"default")],512),n.showHeader&&n.tableLayout==="fixed"?Vn((j(),_e("div",{key:0,ref:"headerWrapper",class:ee(n.ns.e("header-wrapper"))},[Te("table",{ref:"tableHeader",class:ee(n.ns.e("header")),style:Jt(n.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[he(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),he(o,{ref:"tableHeaderRef",border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","onSetDragVisible"])],6)],2)),[[d,n.handleHeaderFooterMousewheel]]):ot("v-if",!0),Te("div",{ref:"bodyWrapper",class:ee(n.ns.e("body-wrapper"))},[he(c,{ref:"scrollBarRef","view-style":n.scrollbarViewStyle,"wrap-style":n.scrollbarStyle,always:n.scrollbarAlwaysOn,tabindex:n.scrollbarTabindex,onScroll:f=>n.$emit("scroll",f)},{default:Ae(()=>[Te("table",{ref:"tableBody",class:ee(n.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Jt({width:n.bodyWidth,tableLayout:n.tableLayout})},[he(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),n.showHeader&&n.tableLayout==="auto"?(j(),gt(o,{key:0,ref:"tableHeaderRef",class:ee(n.ns.e("body-header")),border:n.border,"default-sort":n.defaultSort,store:n.store,"append-filter-panel-to":n.appendFilterPanelTo,onSetDragVisible:n.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):ot("v-if",!0),he(l,{context:n.context,highlight:n.highlightCurrentRow,"row-class-name":n.rowClassName,"tooltip-effect":n.tooltipEffect,"tooltip-options":n.tooltipOptions,"row-style":n.rowStyle,store:n.store,stripe:n.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),n.showSummary&&n.tableLayout==="auto"?(j(),gt(u,{key:1,class:ee(n.ns.e("body-footer")),border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):ot("v-if",!0)],6),n.isEmpty?(j(),_e("div",{key:0,ref:"emptyBlock",style:Jt(n.emptyBlockStyle),class:ee(n.ns.e("empty-block"))},[Te("span",{class:ee(n.ns.e("empty-text"))},[at(n.$slots,"empty",{},()=>[An(Lt(n.computedEmptyText),1)])],2)],6)):ot("v-if",!0),n.$slots.append?(j(),_e("div",{key:1,ref:"appendWrapper",class:ee(n.ns.e("append-wrapper"))},[at(n.$slots,"append")],2)):ot("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),n.showSummary&&n.tableLayout==="fixed"?Vn((j(),_e("div",{key:1,ref:"footerWrapper",class:ee(n.ns.e("footer-wrapper"))},[Te("table",{class:ee(n.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Jt(n.tableBodyStyles)},[he(a,{columns:n.store.states.columns.value,"table-layout":n.tableLayout},null,8,["columns","table-layout"]),he(u,{border:n.border,"default-sort":n.defaultSort,store:n.store,"sum-text":n.computedSumText,"summary-method":n.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Oi,!n.isEmpty],[d,n.handleHeaderFooterMousewheel]]):ot("v-if",!0),n.border||n.isGroup?(j(),_e("div",{key:2,class:ee(n.ns.e("border-left-patch"))},null,2)):ot("v-if",!0)],2),Vn(Te("div",{ref:"resizeProxy",class:ee(n.ns.e("column-resize-proxy"))},null,2),[[Oi,n.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var Y6e=Vt(K6e,[["render",X6e],["__file","table.vue"]]);const Q6e={selection:"table-column--selection",expand:"table__expand-column"},Z6e={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},J6e=n=>Q6e[n]||"",e8e={selection:{renderHeader({store:n,column:e}){function t(){return n.states.data.value&&n.states.data.value.length===0}return ln(sc,{disabled:t(),size:n.states.tableSize.value,indeterminate:n.states.selection.value.length>0&&!n.states.isAllSelected.value,"onUpdate:modelValue":n.toggleAllSelection,modelValue:n.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:n,column:e,store:t,$index:i}){return ln(sc,{disabled:e.selectable?!e.selectable.call(null,n,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",n)},onClick:r=>r.stopPropagation(),modelValue:t.isSelected(n),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:n}){return n.label||"#"},renderCell({column:n,$index:e}){let t=e+1;const i=n.index;return yn(i)?t=e+i:pn(i)&&(t=i(e)),ln("div",{},[t])},sortable:!1},expand:{renderHeader({column:n}){return n.label||""},renderCell({row:n,store:e,expanded:t}){const{ns:i}=e,r=[i.e("expand-icon")];return t&&r.push(i.em("expand-icon","expanded")),ln("div",{class:r,onClick:function(a){a.stopPropagation(),e.toggleRowExpansion(n)}},{default:()=>[ln(rn,null,{default:()=>[ln(Qo)]})]})},sortable:!1,resizable:!1}};function t8e({row:n,column:e,$index:t}){var i;const r=e.property,s=r&&pM(n,r).value;return e&&e.formatter?e.formatter(n,e,s,t):((i=s==null?void 0:s.toString)==null?void 0:i.call(s))||""}function n8e({row:n,treeNode:e,store:t},i=!1){const{ns:r}=t;if(!e)return i?[ln("span",{class:r.e("placeholder")})]:null;const s=[],a=function(o){o.stopPropagation(),!e.loading&&t.loadOrToggle(n)};if(e.indent&&s.push(ln("span",{class:r.e("indent"),style:{"padding-left":`${e.indent}px`}})),fr(e.expanded)&&!e.noLazyChildren){const o=[r.e("expand-icon"),e.expanded?r.em("expand-icon","expanded"):""];let l=Qo;e.loading&&(l=$d),s.push(ln("div",{class:o,onClick:a},{default:()=>[ln(rn,{class:{[r.is("loading")]:e.loading}},{default:()=>[ln(l)]})]}))}else s.push(ln("span",{class:r.e("placeholder")}));return s}function $$(n,e){return n.reduce((t,i)=>(t[i]=i,t),e)}function i8e(n,e){const t=Qn();return{registerComplexWatchers:()=>{const s=["fixed"],a={realWidth:"width",realMinWidth:"minWidth"},o=$$(s,a);Object.keys(o).forEach(l=>{const u=a[l];Ai(e,u)&&St(()=>e[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=XF(c)),u==="minWidth"&&l==="realMinWidth"&&(d=Die(c)),t.columnConfig.value[u]=d,t.columnConfig.value[l]=d;const f=u==="fixed";n.value.store.scheduleLayout(f)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],a={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},o=$$(s,a);Object.keys(o).forEach(l=>{const u=a[l];Ai(e,u)&&St(()=>e[u],c=>{t.columnConfig.value[l]=c})})}}}function r8e(n,e,t){const i=Qn(),r=ae(""),s=ae(!1),a=ae(),o=ae(),l=Rt("table");ya(()=>{a.value=n.align?`is-${n.align}`:null,a.value}),ya(()=>{o.value=n.headerAlign?`is-${n.headerAlign}`:a.value,o.value});const u=W(()=>{let b=i.vnode.vParent||i.parent;for(;b&&!b.tableId&&!b.columnId;)b=b.vnode.vParent||b.parent;return b}),c=W(()=>{const{store:b}=i.parent;if(!b)return!1;const{treeData:x}=b.states,w=x.value;return w&&Object.keys(w).length>0}),d=ae(XF(n.width)),f=ae(Die(n.minWidth)),h=b=>(d.value&&(b.width=d.value),f.value&&(b.minWidth=f.value),!d.value&&f.value&&(b.width=void 0),b.minWidth||(b.minWidth=80),b.realWidth=Number(b.width===void 0?b.minWidth:b.width),b),p=b=>{const x=b.type,w=e8e[x]||{};Object.keys(w).forEach(T=>{const C=w[T];T!=="className"&&C!==void 0&&(b[T]=C)});const A=J6e(x);if(A){const T=`${S(l.namespace)}-${A}`;b.className=b.className?`${b.className} ${T}`:T}return b},m=b=>{Bt(b)?b.forEach(w=>x(w)):x(b);function x(w){var A;((A=w==null?void 0:w.type)==null?void 0:A.name)==="ElTableColumn"&&(w.vParent=i)}};return{columnId:r,realAlign:a,isSubColumn:s,realHeaderAlign:o,columnOrTableParent:u,setColumnWidth:h,setColumnForcedProps:p,setColumnRenders:b=>{n.renderHeader||b.type!=="selection"&&(b.renderHeader=w=>(i.columnConfig.value.label,at(e,"header",w,()=>[b.label]))),e["filter-icon"]&&(b.renderFilterIcon=w=>at(e,"filter-icon",w));let x=b.renderCell;return b.type==="expand"?(b.renderCell=w=>ln("div",{class:"cell"},[x(w)]),t.value.renderExpanded=w=>e.default?e.default(w):e.default):(x=x||t8e,b.renderCell=w=>{let A=null;if(e.default){const O=e.default(w);A=O.some(U=>U.type!==wo)?O:x(w)}else A=x(w);const{columns:T}=t.value.store.states,C=T.value.findIndex(O=>O.type==="default"),E=c.value&&w.cellIndex===C,I=n8e(w,E),k={class:"cell",style:{}};return b.showOverflowTooltip&&(k.class=`${k.class} ${S(l.namespace)}-tooltip`,k.style={width:`${(w.column.realWidth||Number(w.column.width))-1}px`}),m(A),ln("div",k,[I,A])}),b},getPropsData:(...b)=>b.reduce((x,w)=>(Bt(w)&&w.forEach(A=>{x[A]=n[A]}),x),{}),getColumnElIndex:(b,x)=>Array.prototype.indexOf.call(b,x),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var s8e={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:n=>n.every(e=>["ascending","descending",null].includes(e))}};let a8e=1;var qie=Ne({name:"ElTableColumn",components:{ElCheckbox:sc},props:s8e,setup(n,{slots:e}){const t=Qn(),i=ae({}),r=W(()=>{let y=t.parent;for(;y&&!y.tableId;)y=y.parent;return y}),{registerNormalWatchers:s,registerComplexWatchers:a}=i8e(r,n),{columnId:o,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:f,setColumnRenders:h,getPropsData:p,getColumnElIndex:m,realAlign:g,updateColumnOrder:v}=r8e(n,e,r),_=c.value;o.value=`${_.tableId||_.columnId}_column_${a8e++}`,RI(()=>{l.value=r.value!==_;const y=n.type||"default",b=n.sortable===""?!0:n.sortable,x=Xi(n.showOverflowTooltip)?_.props.showOverflowTooltip:n.showOverflowTooltip,w={...Z6e[y],id:o.value,type:y,property:n.prop||n.property,align:g,headerAlign:u,showOverflowTooltip:x,filterable:n.filters||n.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:b,index:n.index,rawColumnKey:t.vnode.key};let I=p(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);I=n6e(w,I),I=r6e(h,d,f)(I),i.value=I,s(),a()}),Ln(()=>{var y;const b=c.value,x=l.value?b.vnode.el.children:(y=b.refs.hiddenColumns)==null?void 0:y.children,w=()=>m(x||[],t.vnode.el);i.value.getColumnIndex=w,w()>-1&&r.value.store.commit("insertColumn",i.value,l.value?b.columnConfig.value:null,v)}),Vi(()=>{const y=i.value.getColumnIndex;(y?y():-1)>-1&&r.value.store.commit("removeColumn",i.value,l.value?_.columnConfig.value:null,v)}),t.columnId=o.value,t.columnConfig=i},render(){var n,e,t;try{const i=(e=(n=this.$slots).default)==null?void 0:e.call(n,{row:{},column:{},$index:-1}),r=[];if(Bt(i))for(const a of i)((t=a.type)==null?void 0:t.name)==="ElTableColumn"||a.shapeFlag&2?r.push(a):a.type===an&&Bt(a.children)&&a.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!un(o==null?void 0:o.children)&&r.push(o)});return ln("div",r)}catch{return ln("div",[])}}});const o8e=Nn(Y6e,{TableColumn:qie}),l8e=Xr(qie);var uw=(n=>(n.ASC="asc",n.DESC="desc",n))(uw||{}),cw=(n=>(n.CENTER="center",n.RIGHT="right",n))(cw||{}),jie=(n=>(n.LEFT="left",n.RIGHT="right",n))(jie||{});const K6={asc:"desc",desc:"asc"},dw=Symbol("placeholder"),u8e=(n,e,t)=>{var i;const r={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:n.flexGrow||0,flexShrink:n.flexShrink||1}};t||(r.flexShrink=1);const s={...(i=n.style)!=null?i:{},...r,flexBasis:"auto",width:n.width};return e||(n.maxWidth&&(s.maxWidth=n.maxWidth),n.minWidth&&(s.minWidth=n.minWidth)),s};function c8e(n,e,t){const i=W(()=>S(e).map((g,v)=>{var _,y;return{...g,key:(y=(_=g.key)!=null?_:g.dataKey)!=null?y:v}})),r=W(()=>S(i).filter(g=>!g.hidden)),s=W(()=>S(r).filter(g=>g.fixed==="left"||g.fixed===!0)),a=W(()=>S(r).filter(g=>g.fixed==="right")),o=W(()=>S(r).filter(g=>!g.fixed)),l=W(()=>{const g=[];return S(s).forEach(v=>{g.push({...v,placeholderSign:dw})}),S(o).forEach(v=>{g.push(v)}),S(a).forEach(v=>{g.push({...v,placeholderSign:dw})}),g}),u=W(()=>S(s).length||S(a).length),c=W(()=>S(i).reduce((g,v)=>(g[v.key]=u8e(v,S(t),n.fixed),g),{})),d=W(()=>S(r).reduce((g,v)=>g+v.width,0)),f=g=>S(i).find(v=>v.key===g),h=g=>S(c)[g],p=(g,v)=>{g.width=v};function m(g){var v;const{key:_}=g.currentTarget.dataset;if(!_)return;const{sortState:y,sortBy:b}=n;let x=uw.ASC;Yn(y)?x=K6[y[_]]:x=K6[b.order],(v=n.onColumnSort)==null||v.call(n,{column:f(_),key:_,order:x})}return{columns:i,columnsStyles:c,columnsTotalWidth:d,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,hasFixedColumns:u,mainColumns:l,normalColumns:o,visibleColumns:r,getColumn:f,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:m}}const d8e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:r})=>{const s=ae({scrollLeft:0,scrollTop:0});function a(h){var p,m,g;const{scrollTop:v}=h;(p=e.value)==null||p.scrollTo(h),(m=t.value)==null||m.scrollToTop(v),(g=i.value)==null||g.scrollToTop(v)}function o(h){s.value=h,a(h)}function l(h){s.value.scrollTop=h,a(S(s))}function u(h){var p,m;s.value.scrollLeft=h,(m=(p=e.value)==null?void 0:p.scrollTo)==null||m.call(p,S(s))}function c(h){var p;o(h),(p=n.onScroll)==null||p.call(n,h)}function d({scrollTop:h}){const{scrollTop:p}=S(s);h!==p&&l(h)}function f(h,p="auto"){var m;(m=e.value)==null||m.scrollToRow(h,p)}return St(()=>S(s).scrollTop,(h,p)=>{h>p&&r()}),{scrollPos:s,scrollTo:o,scrollToLeft:u,scrollToTop:l,scrollToRow:f,onScroll:c,onVerticalScroll:d}},f8e=(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:r,ns:s,isScrolling:a})=>{const o=Qn(),{emit:l}=o,u=Ji(!1),c=ae(n.defaultExpandedRowKeys||[]),d=ae(-1),f=Ji(null),h=ae({}),p=ae({}),m=Ji({}),g=Ji({}),v=Ji({}),_=W(()=>yn(n.estimatedRowHeight));function y(E){var I;(I=n.onRowsRendered)==null||I.call(n,E),E.rowCacheEnd>S(d)&&(d.value=E.rowCacheEnd)}function b({hovered:E,rowKey:I}){if(a.value)return;r.vnode.el.querySelectorAll(`[rowkey="${String(I)}"]`).forEach(U=>{E?U.classList.add(s.is("hovered")):U.classList.remove(s.is("hovered"))})}function x({expanded:E,rowData:I,rowIndex:k,rowKey:O}){var U,z;const L=[...S(c)],G=L.indexOf(O);E?G===-1&&L.push(O):G>-1&&L.splice(G,1),c.value=L,l("update:expandedRowKeys",L),(U=n.onRowExpand)==null||U.call(n,{expanded:E,rowData:I,rowIndex:k,rowKey:O}),(z=n.onExpandedRowsChange)==null||z.call(n,L)}const w=Rl(()=>{var E,I,k,O;u.value=!0,h.value={...S(h),...S(p)},A(S(f),!1),p.value={},f.value=null,(E=e.value)==null||E.forceUpdate(),(I=t.value)==null||I.forceUpdate(),(k=i.value)==null||k.forceUpdate(),(O=o.proxy)==null||O.$forceUpdate(),u.value=!1},0);function A(E,I=!1){S(_)&&[e,t,i].forEach(k=>{const O=S(k);O&&O.resetAfterRowIndex(E,I)})}function T(E,I,k){const O=S(f);(O===null||O>k)&&(f.value=k),p.value[E]=I}function C({rowKey:E,height:I,rowIndex:k},O){O?O===jie.RIGHT?v.value[E]=I:m.value[E]=I:g.value[E]=I;const U=Math.max(...[m,v,g].map(z=>z.value[E]||0));S(h)[E]!==U&&(T(E,U,k),w())}return{expandedRowKeys:c,lastRenderedRowIndex:d,isDynamic:_,isResetting:u,rowHeights:h,resetAfterIndex:A,onRowExpanded:x,onRowHovered:b,onRowsRendered:y,onRowHeightChange:C}},h8e=(n,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const r=ae({}),s=W(()=>{const o={},{data:l,rowKey:u}=n,c=S(e);if(!c||!c.length)return l;const d=[],f=new Set;c.forEach(p=>f.add(p));let h=l.slice();for(h.forEach(p=>o[p[u]]=0);h.length>0;){const p=h.shift();d.push(p),f.has(p[u])&&Bt(p.children)&&p.children.length>0&&(h=[...p.children,...h],p.children.forEach(m=>o[m[u]]=o[p[u]]+1))}return r.value=o,d}),a=W(()=>{const{data:o,expandColumnKey:l}=n;return l?S(s):o});return St(a,(o,l)=>{o!==l&&(t.value=-1,i(0,!0))}),{data:a,depthMap:r}},p8e=(n,e)=>n+e,CM=n=>Bt(n)?n.reduce(p8e,0):n,Bg=(n,e,t={})=>pn(n)?n(e):n??t,Mp=n=>(["width","maxWidth","minWidth","height"].forEach(e=>{n[e]=ns(n[e])}),n),Kie=n=>Wr(n)?e=>ln(n,e):n,m8e=(n,{columnsTotalWidth:e,rowsHeight:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:r})=>{const s=W(()=>{const{fixed:_,width:y,vScrollbarSize:b}=n,x=y-b;return _?Math.max(Math.round(S(e)),x):x}),a=W(()=>S(s)+n.vScrollbarSize),o=W(()=>{const{height:_=0,maxHeight:y=0,footerHeight:b,hScrollbarSize:x}=n;if(y>0){const w=S(h),A=S(t),C=S(f)+w+A+x;return Math.min(C,y-b)}return _-b}),l=W(()=>{const{maxHeight:_}=n,y=S(o);if(yn(_)&&_>0)return y;const b=S(t)+S(f)+S(h);return Math.min(y,b)}),u=_=>_.width,c=W(()=>CM(S(i).map(u))),d=W(()=>CM(S(r).map(u))),f=W(()=>CM(n.headerHeight)),h=W(()=>{var _;return(((_=n.fixedData)==null?void 0:_.length)||0)*n.rowHeight}),p=W(()=>S(o)-S(f)-S(h)),m=W(()=>{const{style:_={},height:y,width:b}=n;return Mp({..._,height:y,width:b})}),g=W(()=>Mp({height:n.footerHeight})),v=W(()=>({top:ns(S(f)),bottom:ns(n.footerHeight),width:ns(n.width)}));return{bodyWidth:s,fixedTableHeight:l,mainTableHeight:o,leftTableWidth:c,rightTableWidth:d,headerWidth:a,windowHeight:p,footerHeight:g,emptyStyle:v,rootStyle:m,headerHeight:f}};function g8e(n){const e=ae(),t=ae(),i=ae(),{columns:r,columnsStyles:s,columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,hasFixedColumns:u,mainColumns:c,onColumnSorted:d}=c8e(n,$i(n,"columns"),$i(n,"fixed")),{scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:g,onVerticalScroll:v,scrollPos:_}=d8e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:me}),y=Rt("table-v2"),b=Qn(),x=Ji(!1),{expandedRowKeys:w,lastRenderedRowIndex:A,isDynamic:T,isResetting:C,rowHeights:E,resetAfterIndex:I,onRowExpanded:k,onRowHeightChange:O,onRowHovered:U,onRowsRendered:z}=f8e(n,{mainTableRef:e,leftTableRef:t,rightTableRef:i,tableInstance:b,ns:y,isScrolling:x}),{data:L,depthMap:G}=h8e(n,{expandedRowKeys:w,lastRenderedRowIndex:A,resetAfterIndex:I}),H=W(()=>{const{estimatedRowHeight:ce,rowHeight:je}=n,Fe=S(L);return yn(ce)?Object.values(S(E)).reduce((nt,We)=>nt+We,0):Fe.length*je}),{bodyWidth:F,fixedTableHeight:X,mainTableHeight:te,leftTableWidth:re,rightTableWidth:ie,headerWidth:le,windowHeight:ge,footerHeight:pe,emptyStyle:ye,rootStyle:Oe,headerHeight:Be}=m8e(n,{columnsTotalWidth:a,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,rowsHeight:H}),Ye=ae(),Ze=W(()=>{const ce=S(L).length===0;return Bt(n.fixedData)?n.fixedData.length===0&&ce:ce});function Q(ce){const{estimatedRowHeight:je,rowHeight:Fe,rowKey:nt}=n;return je?S(E)[S(L)[ce][nt]]||je:Fe}function me(){const{onEndReached:ce}=n;if(!ce)return;const{scrollTop:je}=S(_),Fe=S(H),nt=S(ge),We=Fe-(je+nt)+n.hScrollbarSize;S(A)>=0&&Fe===je+S(te)-S(Be)&&ce(We)}return St(()=>n.expandedRowKeys,ce=>w.value=ce,{deep:!0}),{columns:r,containerRef:Ye,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:T,isResetting:C,isScrolling:x,hasFixedColumns:u,columnsStyles:s,columnsTotalWidth:a,data:L,expandedRowKeys:w,depthMap:G,fixedColumnsOnLeft:o,fixedColumnsOnRight:l,mainColumns:c,bodyWidth:F,emptyStyle:ye,rootStyle:Oe,headerWidth:le,footerHeight:pe,mainTableHeight:te,fixedTableHeight:X,leftTableWidth:re,rightTableWidth:ie,showEmpty:Ze,getRowHeight:Q,onColumnSorted:d,onRowHovered:U,onRowExpanded:k,onRowsRendered:z,onRowHeightChange:O,scrollTo:f,scrollToLeft:h,scrollToTop:p,scrollToRow:m,onScroll:g,onVerticalScroll:v}}const ZF=Symbol("tableV2"),Xie=String,yT={type:et(Array),required:!0},JF={type:et(Array)},Yie={...JF,required:!0},v8e=String,G$={type:et(Array),default:()=>Kr([])},zm={type:Number,required:!0},Qie={type:et([String,Number,Symbol]),default:"id"},W$={type:et(Object)},eg=zt({class:String,columns:yT,columnsStyles:{type:et(Object),required:!0},depth:Number,expandColumnKey:v8e,estimatedRowHeight:{...vg.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:et(Function)},onRowHover:{type:et(Function)},onRowHeightChange:{type:et(Function)},rowData:{type:et(Object),required:!0},rowEventHandlers:{type:et(Object)},rowIndex:{type:Number,required:!0},rowKey:Qie,style:{type:et(Object)}}),mP={type:Number,required:!0},e7=zt({class:String,columns:yT,fixedHeaderData:{type:et(Array)},headerData:{type:et(Array),required:!0},headerHeight:{type:et([Number,Array]),default:50},rowWidth:mP,rowHeight:{type:Number,default:50},height:mP,width:mP}),AM=zt({columns:yT,data:Yie,fixedData:JF,estimatedRowHeight:eg.estimatedRowHeight,width:zm,height:zm,headerWidth:zm,headerHeight:e7.headerHeight,bodyWidth:zm,rowHeight:zm,cache:vie.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:vg.scrollbarAlwaysOn,scrollbarStartGap:vg.scrollbarStartGap,scrollbarEndGap:vg.scrollbarEndGap,class:Xie,style:W$,containerStyle:W$,getRowHeight:{type:et(Function),required:!0},rowKey:eg.rowKey,onRowsRendered:{type:et(Function)},onScroll:{type:et(Function)}}),y8e=zt({cache:AM.cache,estimatedRowHeight:eg.estimatedRowHeight,rowKey:Qie,headerClass:{type:et([String,Function])},headerProps:{type:et([Object,Function])},headerCellProps:{type:et([Object,Function])},headerHeight:e7.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:et([String,Function])},rowProps:{type:et([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:et([Object,Function])},columns:yT,data:Yie,dataGetter:{type:et(Function)},fixedData:JF,expandColumnKey:eg.expandColumnKey,expandedRowKeys:G$,defaultExpandedRowKeys:G$,class:Xie,fixed:Boolean,style:{type:et(Object)},width:zm,height:zm,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:vg.hScrollbarSize,vScrollbarSize:vg.vScrollbarSize,scrollbarAlwaysOn:bie.alwaysOn,sortBy:{type:et(Object),default:()=>({})},sortState:{type:et(Object),default:void 0},onColumnSort:{type:et(Function)},onExpandedRowsChange:{type:et(Function)},onEndReached:{type:et(Function)},onRowExpand:eg.onRowExpand,onScroll:AM.onScroll,onRowsRendered:AM.onRowsRendered,rowEventHandlers:eg.rowEventHandlers}),_8e="ElTableV2Header",b8e=Ne({name:_8e,props:e7,setup(n,{slots:e,expose:t}){const i=Rt("table-v2"),r=Zt("tableV2GridScrollLeft"),s=ae(),a=W(()=>Mp({width:n.width,height:n.height})),o=W(()=>Mp({width:n.rowWidth,height:n.height})),l=W(()=>yo(S(n.headerHeight))),u=f=>{const h=S(s);cn(()=>{h!=null&&h.scroll&&h.scroll({left:f})})},c=()=>{const f=i.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:m}=n;return p==null?void 0:p.map((g,v)=>{var _;const y=Mp({height:m,width:"100%"});return(_=e.fixed)==null?void 0:_.call(e,{class:f,columns:h,rowData:g,rowIndex:-(v+1),style:y})})},d=()=>{const f=i.e("dynamic-header-row"),{columns:h}=n;return S(l).map((p,m)=>{var g;const v=Mp({width:"100%",height:p});return(g=e.dynamic)==null?void 0:g.call(e,{class:f,columns:h,headerIndex:m,style:v})})};return fc(()=>{r!=null&&r.value&&u(r.value)}),t({scrollToLeft:u}),()=>{if(!(n.height<=0))return he("div",{ref:s,class:n.class,style:S(a),role:"rowgroup"},[he("div",{style:S(o),class:i.e("header")},[d(),c()])])}}});var S8e=b8e;const x8e=({atXEndEdge:n,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},r)=>{let s=null,a=0,o=0;const l=(c,d)=>{const f=c<=0&&e.value||c>=0&&n.value,h=d<=0&&i.value||d>=0&&t.value;return f&&h};return{hasReachedEdge:l,onWheel:c=>{Og(s);let d=c.deltaX,f=c.deltaY;Math.abs(d)>Math.abs(f)?f=0:d=0,c.shiftKey&&f!==0&&(d=f,f=0),!(l(a,o)&&l(a+d,o+f))&&(a+=d,o+=f,c.preventDefault(),s=e0(()=>{r(a,o),a=0,o=0}))}}},Zie=({name:n,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:r,getEstimatedTotalHeight:s,getEstimatedTotalWidth:a,getColumnOffset:o,getRowOffset:l,getRowPosition:u,getRowStartIndexForOffset:c,getRowStopIndexForStartIndex:d,initCache:f,injectToInstance:h,validateProps:p})=>Ne({name:n??"ElVirtualList",props:vg,emits:[D3,R3],setup(m,{emit:g,expose:v,slots:_}){const y=Rt("vl");p(m);const b=Qn(),x=ae(f(m,b));h==null||h(b,x);const w=ae(),A=ae(),T=ae(),C=ae(null),E=ae({isScrolling:!1,scrollLeft:yn(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:yn(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:l1,yAxisScrollDir:l1}),I=pie(),k=W(()=>Number.parseInt(`${m.height}`,10)),O=W(()=>Number.parseInt(`${m.width}`,10)),U=W(()=>{const{totalColumn:nt,totalRow:We,columnCache:Ke}=m,{isScrolling:it,xAxisScrollDir:be,scrollLeft:K}=S(E);if(nt===0||We===0)return[0,0,0,0];const ne=i(m,K,S(x)),Se=r(m,ne,K,S(x)),ze=!it||be===P3?Math.max(1,Ke):1,Je=!it||be===l1?Math.max(1,Ke):1;return[Math.max(0,ne-ze),Math.max(0,Math.min(nt-1,Se+Je)),ne,Se]}),z=W(()=>{const{totalColumn:nt,totalRow:We,rowCache:Ke}=m,{isScrolling:it,yAxisScrollDir:be,scrollTop:K}=S(E);if(nt===0||We===0)return[0,0,0,0];const ne=c(m,K,S(x)),Se=d(m,ne,K,S(x)),ze=!it||be===P3?Math.max(1,Ke):1,Je=!it||be===l1?Math.max(1,Ke):1;return[Math.max(0,ne-ze),Math.max(0,Math.min(We-1,Se+Je)),ne,Se]}),L=W(()=>s(m,S(x))),G=W(()=>a(m,S(x))),H=W(()=>{var nt;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:yn(m.height)?`${m.height}px`:m.height,width:yn(m.width)?`${m.width}px`:m.width},(nt=m.style)!=null?nt:{}]}),F=W(()=>{const nt=`${S(G)}px`;return{height:`${S(L)}px`,pointerEvents:S(E).isScrolling?"none":void 0,width:nt}}),X=()=>{const{totalColumn:nt,totalRow:We}=m;if(nt>0&&We>0){const[Se,ze,Je,Tt]=S(U),[At,Re,wt,vt]=S(z);g(D3,{columnCacheStart:Se,columnCacheEnd:ze,rowCacheStart:At,rowCacheEnd:Re,columnVisibleStart:Je,columnVisibleEnd:Tt,rowVisibleStart:wt,rowVisibleEnd:vt})}const{scrollLeft:Ke,scrollTop:it,updateRequested:be,xAxisScrollDir:K,yAxisScrollDir:ne}=S(E);g(R3,{xAxisScrollDir:K,scrollLeft:Ke,yAxisScrollDir:ne,scrollTop:it,updateRequested:be})},te=nt=>{const{clientHeight:We,clientWidth:Ke,scrollHeight:it,scrollLeft:be,scrollTop:K,scrollWidth:ne}=nt.currentTarget,Se=S(E);if(Se.scrollTop===K&&Se.scrollLeft===be)return;let ze=be;if(M$(m.direction))switch(L3()){case ow:ze=-be;break;case KF:ze=ne-Ke-be;break}E.value={...Se,isScrolling:!0,scrollLeft:ze,scrollTop:Math.max(0,Math.min(K,it-We)),updateRequested:!0,xAxisScrollDir:Zm(Se.scrollLeft,ze),yAxisScrollDir:Zm(Se.scrollTop,K)},cn(()=>Oe()),Be(),X()},re=(nt,We)=>{const Ke=S(k),it=(L.value-Ke)/We*nt;ge({scrollTop:Math.min(L.value-Ke,it)})},ie=(nt,We)=>{const Ke=S(O),it=(G.value-Ke)/We*nt;ge({scrollLeft:Math.min(G.value-Ke,it)})},{onWheel:le}=x8e({atXStartEdge:W(()=>E.value.scrollLeft<=0),atXEndEdge:W(()=>E.value.scrollLeft>=G.value-S(O)),atYStartEdge:W(()=>E.value.scrollTop<=0),atYEndEdge:W(()=>E.value.scrollTop>=L.value-S(k))},(nt,We)=>{var Ke,it,be,K;(it=(Ke=A.value)==null?void 0:Ke.onMouseUp)==null||it.call(Ke),(K=(be=T.value)==null?void 0:be.onMouseUp)==null||K.call(be);const ne=S(O),Se=S(k);ge({scrollLeft:Math.min(E.value.scrollLeft+nt,G.value-ne),scrollTop:Math.min(E.value.scrollTop+We,L.value-Se)})});Yi(w,"wheel",le,{passive:!1});const ge=({scrollLeft:nt=E.value.scrollLeft,scrollTop:We=E.value.scrollTop})=>{nt=Math.max(nt,0),We=Math.max(We,0);const Ke=S(E);We===Ke.scrollTop&&nt===Ke.scrollLeft||(E.value={...Ke,xAxisScrollDir:Zm(Ke.scrollLeft,nt),yAxisScrollDir:Zm(Ke.scrollTop,We),scrollLeft:nt,scrollTop:We,updateRequested:!0},cn(()=>Oe()),Be(),X())},pe=(nt=0,We=0,Ke=Gu)=>{const it=S(E);We=Math.max(0,Math.min(We,m.totalColumn-1)),nt=Math.max(0,Math.min(nt,m.totalRow-1));const be=Jee(y.namespace.value),K=S(x),ne=s(m,K),Se=a(m,K);ge({scrollLeft:o(m,We,Ke,it.scrollLeft,K,Se>m.width?be:0),scrollTop:l(m,nt,Ke,it.scrollTop,K,ne>m.height?be:0)})},ye=(nt,We)=>{const{columnWidth:Ke,direction:it,rowHeight:be}=m,K=I.value(e&&Ke,e&&be,e&&it),ne=`${nt},${We}`;if(Ai(K,ne))return K[ne];{const[,Se]=t(m,We,S(x)),ze=S(x),Je=M$(it),[Tt,At]=u(m,nt,ze),[Re]=t(m,We,ze);return K[ne]={position:"absolute",left:Je?void 0:`${Se}px`,right:Je?`${Se}px`:void 0,top:`${At}px`,height:`${Tt}px`,width:`${Re}px`},K[ne]}},Oe=()=>{E.value.isScrolling=!1,cn(()=>{I.value(-1,null,null)})};Ln(()=>{if(!xi)return;const{initScrollLeft:nt,initScrollTop:We}=m,Ke=S(w);Ke&&(yn(nt)&&(Ke.scrollLeft=nt),yn(We)&&(Ke.scrollTop=We)),X()});const Be=()=>{const{direction:nt}=m,{scrollLeft:We,scrollTop:Ke,updateRequested:it}=S(E),be=S(w);if(it&&be){if(nt===k1)switch(L3()){case ow:{be.scrollLeft=-We;break}case jF:{be.scrollLeft=We;break}default:{const{clientWidth:K,scrollWidth:ne}=be;be.scrollLeft=ne-K-We;break}}else be.scrollLeft=Math.max(0,We);be.scrollTop=Math.max(0,Ke)}},{resetAfterColumnIndex:Ye,resetAfterRowIndex:Ze,resetAfter:Q}=b.proxy;v({windowRef:w,innerRef:C,getItemStyleCache:I,scrollTo:ge,scrollToItem:pe,states:E,resetAfterColumnIndex:Ye,resetAfterRowIndex:Ze,resetAfter:Q});const me=()=>{const{scrollbarAlwaysOn:nt,scrollbarStartGap:We,scrollbarEndGap:Ke,totalColumn:it,totalRow:be}=m,K=S(O),ne=S(k),Se=S(G),ze=S(L),{scrollLeft:Je,scrollTop:Tt}=S(E),At=ln(B6,{ref:A,alwaysOn:nt,startGap:We,endGap:Ke,class:y.e("horizontal"),clientSize:K,layout:"horizontal",onScroll:ie,ratio:K*100/Se,scrollFrom:Je/(Se-K),total:be,visible:!0}),Re=ln(B6,{ref:T,alwaysOn:nt,startGap:We,endGap:Ke,class:y.e("vertical"),clientSize:ne,layout:"vertical",onScroll:re,ratio:ne*100/ze,scrollFrom:Tt/(ze-ne),total:it,visible:!0});return{horizontalScrollbar:At,verticalScrollbar:Re}},ce=()=>{var nt;const[We,Ke]=S(U),[it,be]=S(z),{data:K,totalColumn:ne,totalRow:Se,useIsScrolling:ze,itemKey:Je}=m,Tt=[];if(Se>0&&ne>0)for(let At=it;At<=be;At++)for(let Re=We;Re<=Ke;Re++){const wt=Je({columnIndex:Re,data:K,rowIndex:At});Tt.push(ln(an,{key:wt},(nt=_.default)==null?void 0:nt.call(_,{columnIndex:Re,data:K,isScrolling:ze?S(E).isScrolling:void 0,style:ye(At,Re),rowIndex:At})))}return Tt},je=()=>{const nt=ei(m.innerElement),We=ce();return[ln(nt,{style:S(F),ref:C},un(nt)?We:{default:()=>We})]};return()=>{const nt=ei(m.containerElement),{horizontalScrollbar:We,verticalScrollbar:Ke}=me(),it=je();return ln("div",{key:0,class:y.e("wrapper"),role:m.role},[ln(nt,{class:m.className,style:S(H),onScroll:te,ref:w},un(nt)?it:{default:()=>it}),We,Ke])}}}),{max:B3,min:Jie,floor:ere}=Math,w8e={column:"columnWidth",row:"rowHeight"},X6={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},Nf=(n,e,t,i)=>{const[r,s,a]=[t[i],n[w8e[i]],t[X6[i]]];if(e>a){let o=0;if(a>=0){const l=r[a];o=l.offset+l.size}for(let l=a+1;l<=e;l++){const u=s(l);r[l]={offset:o,size:u},o+=u}t[X6[i]]=e}return r[e]},tre=(n,e,t,i,r,s)=>{for(;t<=i;){const a=t+ere((i-t)/2),o=Nf(n,a,e,s).offset;if(o===r)return a;o<r?t=a+1:i=a-1}return B3(0,t-1)},T8e=(n,e,t,i,r)=>{const s=r==="column"?n.totalColumn:n.totalRow;let a=1;for(;t<s&&Nf(n,t,e,r).offset<i;)t+=a,a*=2;return tre(n,e,ere(t/2),Jie(t,s-1),i,r)},q$=(n,e,t,i)=>{const[r,s]=[e[i],e[X6[i]]];return(s>0?r[s].offset:0)>=t?tre(n,e,0,s,t,i):T8e(n,e,B3(0,s),t,i)},nre=({totalRow:n},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let r=0;if(t>=n&&(t=n-1),t>=0){const o=i[t];r=o.offset+o.size}const a=(n-t-1)*e;return r+a},ire=({totalColumn:n},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let r=0;if(i>n&&(i=n-1),i>=0){const o=e[i];r=o.offset+o.size}const a=(n-i-1)*t;return r+a},C8e={column:ire,row:nre},j$=(n,e,t,i,r,s,a)=>{const[o,l]=[s==="row"?n.height:n.width,C8e[s]],u=Nf(n,e,r,s),c=l(n,r),d=B3(0,Jie(c-o,u.offset)),f=B3(0,u.offset-o+a+u.size);switch(t===rD&&(i>=f-o&&i<=d+o?t=Gu:t=Cd),t){case sw:return d;case aw:return f;case Cd:return Math.round(f+(d-f)/2);case Gu:default:return i>=f&&i<=d?i:f>d||i<f?f:d}},A8e=Zie({name:"ElDynamicSizeGrid",getColumnPosition:(n,e,t)=>{const i=Nf(n,e,t,"column");return[i.size,i.offset]},getRowPosition:(n,e,t)=>{const i=Nf(n,e,t,"row");return[i.size,i.offset]},getColumnOffset:(n,e,t,i,r,s)=>j$(n,e,t,i,r,"column",s),getRowOffset:(n,e,t,i,r,s)=>j$(n,e,t,i,r,"row",s),getColumnStartIndexForOffset:(n,e,t)=>q$(n,t,e,"column"),getColumnStopIndexForStartIndex:(n,e,t,i)=>{const r=Nf(n,e,i,"column"),s=t+n.width;let a=r.offset+r.size,o=e;for(;o<n.totalColumn-1&&a<s;)o++,a+=Nf(n,e,i,"column").size;return o},getEstimatedTotalHeight:nre,getEstimatedTotalWidth:ire,getRowStartIndexForOffset:(n,e,t)=>q$(n,t,e,"row"),getRowStopIndexForStartIndex:(n,e,t,i)=>{const{totalRow:r,height:s}=n,a=Nf(n,e,i,"row"),o=t+s;let l=a.size+a.offset,u=e;for(;u<r-1&&l<o;)u++,l+=Nf(n,u,i,"row").size;return u},injectToInstance:(n,e)=>{const t=({columnIndex:s,rowIndex:a},o)=>{var l,u;o=Xi(o)?!0:o,yn(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),yn(a)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,a-1)),(l=n.exposed)==null||l.getItemStyleCache.value(-1,null,null),o&&((u=n.proxy)==null||u.$forceUpdate())},i=(s,a)=>{t({columnIndex:s},a)},r=(s,a)=>{t({rowIndex:s},a)};Object.assign(n.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:r,resetAfter:t})},initCache:({estimatedColumnWidth:n=R6,estimatedRowHeight:e=R6})=>({column:{},estimatedColumnWidth:n,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:n,rowHeight:e})=>{}}),E8e=Zie({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:n},e)=>[n,e*n],getRowPosition:({rowHeight:n},e)=>[n,e*n],getEstimatedTotalHeight:({totalRow:n,rowHeight:e})=>e*n,getEstimatedTotalWidth:({totalColumn:n,columnWidth:e})=>e*n,getColumnOffset:({totalColumn:n,columnWidth:e,width:t},i,r,s,a,o)=>{t=Number(t);const l=Math.max(0,n*e-t),u=Math.min(l,i*e),c=Math.max(0,i*e-t+o+e);switch(r==="smart"&&(s>=c-t&&s<=u+t?r=Gu:r=Cd),r){case sw:return u;case aw:return c;case Cd:{const d=Math.round(c+(u-c)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case Gu:default:return s>=c&&s<=u?s:c>u||s<c?c:u}},getRowOffset:({rowHeight:n,height:e,totalRow:t},i,r,s,a,o)=>{e=Number(e);const l=Math.max(0,t*n-e),u=Math.min(l,i*n),c=Math.max(0,i*n-e+o+n);switch(r===rD&&(s>=c-e&&s<=u+e?r=Gu:r=Cd),r){case sw:return u;case aw:return c;case Cd:{const d=Math.round(c+(u-c)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case Gu:default:return s>=c&&s<=u?s:c>u||s<c?c:u}},getColumnStartIndexForOffset:({columnWidth:n,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getColumnStopIndexForStartIndex:({columnWidth:n,totalColumn:e,width:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},getRowStartIndexForOffset:({rowHeight:n,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/n))),getRowStopIndexForStartIndex:({rowHeight:n,totalRow:e,height:t},i,r)=>{const s=i*n,a=Math.ceil((t+r-s)/n);return Math.max(0,Math.min(e-1,i+a-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:n,rowHeight:e})=>{}}),M8e="ElTableV2Grid",I8e=n=>{const e=ae(),t=ae(),i=ae(0),r=W(()=>{const{data:g,rowHeight:v,estimatedRowHeight:_}=n;if(!_)return g.length*v}),s=W(()=>{const{fixedData:g,rowHeight:v}=n;return((g==null?void 0:g.length)||0)*v}),a=W(()=>CM(n.headerHeight)),o=W(()=>{const{height:g}=n;return Math.max(0,g-S(a)-S(s))}),l=W(()=>S(a)+S(s)>0),u=({data:g,rowIndex:v})=>g[v][n.rowKey];function c({rowCacheStart:g,rowCacheEnd:v,rowVisibleStart:_,rowVisibleEnd:y}){var b;(b=n.onRowsRendered)==null||b.call(n,{rowCacheStart:g,rowCacheEnd:v,rowVisibleStart:_,rowVisibleEnd:y})}function d(g,v){var _;(_=t.value)==null||_.resetAfterRowIndex(g,v)}function f(g,v){const _=S(e),y=S(t);Yn(g)?(_==null||_.scrollToLeft(g.scrollLeft),i.value=g.scrollLeft,y==null||y.scrollTo(g)):(_==null||_.scrollToLeft(g),i.value=g,y==null||y.scrollTo({scrollLeft:g,scrollTop:v}))}function h(g){var v;(v=S(t))==null||v.scrollTo({scrollTop:g})}function p(g,v){var _;(_=S(t))==null||_.scrollToItem(g,1,v)}function m(){var g,v;(g=S(t))==null||g.$forceUpdate(),(v=S(e))==null||v.$forceUpdate()}return{bodyRef:t,forceUpdate:m,fixedRowHeight:s,gridHeight:o,hasHeader:l,headerHeight:a,headerRef:e,totalHeight:r,itemKey:u,onItemRendered:c,resetAfterRowIndex:d,scrollTo:f,scrollToTop:h,scrollToRow:p,scrollLeft:i}},D8e=Ne({name:M8e,props:AM,setup(n,{slots:e,expose:t}){const{ns:i}=Zt(ZF),{bodyRef:r,fixedRowHeight:s,gridHeight:a,hasHeader:o,headerRef:l,headerHeight:u,totalHeight:c,forceUpdate:d,itemKey:f,onItemRendered:h,resetAfterRowIndex:p,scrollTo:m,scrollToTop:g,scrollToRow:v,scrollLeft:_}=I8e(n);ui("tableV2GridScrollLeft",_),t({forceUpdate:d,totalHeight:c,scrollTo:m,scrollToTop:g,scrollToRow:v,resetAfterRowIndex:p});const y=()=>n.bodyWidth;return()=>{const{cache:b,columns:x,data:w,fixedData:A,useIsScrolling:T,scrollbarAlwaysOn:C,scrollbarEndGap:E,scrollbarStartGap:I,style:k,rowHeight:O,bodyWidth:U,estimatedRowHeight:z,headerWidth:L,height:G,width:H,getRowHeight:F,onScroll:X}=n,te=yn(z),re=te?A8e:E8e,ie=S(u);return he("div",{role:"table",class:[i.e("table"),n.class],style:k},[he(re,{ref:r,data:w,useIsScrolling:T,itemKey:f,columnCache:0,columnWidth:te?y:U,totalColumn:1,totalRow:w.length,rowCache:b,rowHeight:te?F:O,width:H,height:S(a),class:i.e("body"),role:"rowgroup",scrollbarStartGap:I,scrollbarEndGap:E,scrollbarAlwaysOn:C,onScroll:X,onItemRendered:h,perfMode:!1},{default:le=>{var ge;const pe=w[le.rowIndex];return(ge=e.row)==null?void 0:ge.call(e,{...le,columns:x,rowData:pe})}}),S(o)&&he(S8e,{ref:l,class:i.e("header-wrapper"),columns:x,headerData:w,headerHeight:n.headerHeight,fixedHeaderData:A,rowWidth:L,rowHeight:O,width:H,height:Math.min(ie+S(s),G)},{dynamic:e.header,fixed:e.row})])}}});var t7=D8e;function R8e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const P8e=(n,{slots:e})=>{const{mainTableRef:t,...i}=n;return he(t7,si({ref:t},i),R8e(e)?e:{default:()=>[e]})};var k8e=P8e;function L8e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const O8e=(n,{slots:e})=>{if(!n.columns.length)return;const{leftTableRef:t,...i}=n;return he(t7,si({ref:t},i),L8e(e)?e:{default:()=>[e]})};var N8e=O8e;function B8e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const F8e=(n,{slots:e})=>{if(!n.columns.length)return;const{rightTableRef:t,...i}=n;return he(t7,si({ref:t},i),B8e(e)?e:{default:()=>[e]})};var U8e=F8e;const z8e=n=>{const{isScrolling:e}=Zt(ZF),t=ae(!1),i=ae(),r=W(()=>yn(n.estimatedRowHeight)&&n.rowIndex>=0),s=(l=!1)=>{const u=S(i);if(!u)return;const{columns:c,onRowHeightChange:d,rowKey:f,rowIndex:h,style:p}=n,{height:m}=u.getBoundingClientRect();t.value=!0,cn(()=>{if(l||m!==Number.parseInt(p.height)){const g=c[0],v=(g==null?void 0:g.placeholderSign)===dw;d==null||d({rowKey:f,height:m,rowIndex:h},g&&!v&&g.fixed)}})},a=W(()=>{const{rowData:l,rowIndex:u,rowKey:c,onRowHover:d}=n,f=n.rowEventHandlers||{},h={};return Object.entries(f).forEach(([p,m])=>{pn(m)&&(h[p]=g=>{m({event:g,rowData:l,rowIndex:u,rowKey:c})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:p,hovered:m})=>{const g=h[p];h[p]=v=>{d({event:v,hovered:m,rowData:l,rowIndex:u,rowKey:c}),g==null||g(v)}}),h}),o=l=>{const{onRowExpand:u,rowData:c,rowIndex:d,rowKey:f}=n;u==null||u({expanded:l,rowData:c,rowIndex:d,rowKey:f})};return Ln(()=>{S(r)&&s(!0)}),{isScrolling:e,measurable:r,measured:t,rowRef:i,eventHandlers:a,onExpand:o}},H8e="ElTableV2TableRow",V8e=Ne({name:H8e,props:eg,setup(n,{expose:e,slots:t,attrs:i}){const{eventHandlers:r,isScrolling:s,measurable:a,measured:o,rowRef:l,onExpand:u}=z8e(n);return e({onExpand:u}),()=>{const{columns:c,columnsStyles:d,expandColumnKey:f,depth:h,rowData:p,rowIndex:m,style:g}=n;let v=c.map((_,y)=>{const b=Bt(p.children)&&p.children.length>0&&_.key===f;return t.cell({column:_,columns:c,columnIndex:y,depth:h,style:d[_.key],rowData:p,rowIndex:m,isScrolling:S(s),expandIconProps:b?{rowData:p,rowIndex:m,onExpand:u}:void 0})});if(t.row&&(v=t.row({cells:v.map(_=>Bt(_)&&_.length===1?_[0]:_),style:g,columns:c,depth:h,rowData:p,rowIndex:m,isScrolling:S(s)})),S(a)){const{height:_,...y}=g||{},b=S(o);return he("div",si({ref:l,class:n.class,style:b?g:y,role:"row"},i,S(r)),[v])}return he("div",si(i,{ref:l,class:n.class,style:g,role:"row"},S(r)),[v])}}});var $8e=V8e;function G8e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const W8e=(n,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:r,expandColumnKey:s,expandedRowKeys:a,estimatedRowHeight:o,hasFixedColumns:l,rowData:u,rowIndex:c,style:d,isScrolling:f,rowProps:h,rowClass:p,rowKey:m,rowEventHandlers:g,ns:v,onRowHovered:_,onRowExpanded:y}=n,b=Bg(p,{columns:t,rowData:u,rowIndex:c},""),x=Bg(h,{columns:t,rowData:u,rowIndex:c}),w=u[m],A=r[w]||0,T=!!s,C=c<0,E=[v.e("row"),b,{[v.e(`row-depth-${A}`)]:T&&c>=0,[v.is("expanded")]:T&&a.includes(w),[v.is("fixed")]:!A&&C,[v.is("customized")]:!!e.row}],I=l?_:void 0,k={...x,columns:t,columnsStyles:i,class:E,depth:A,expandColumnKey:s,estimatedRowHeight:C?void 0:o,isScrolling:f,rowIndex:c,rowData:u,rowKey:w,rowEventHandlers:g,style:d};return he($8e,si(k,{onRowExpand:y,onMouseenter:z=>{I==null||I({hovered:!0,rowKey:w,event:z,rowData:u,rowIndex:c})},onMouseleave:z=>{I==null||I({hovered:!1,rowKey:w,event:z,rowData:u,rowIndex:c})},rowkey:w}),G8e(e)?e:{default:()=>[e]})};var q8e=W8e;const n7=(n,{slots:e})=>{var t;const{cellData:i,style:r}=n,s=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"",a=at(e,"default",n,()=>[s]);return he("div",{class:n.class,title:s,style:r},[a])};n7.displayName="ElTableV2Cell";n7.inheritAttrs=!1;var j8e=n7;const K8e=n=>{const{expanded:e,expandable:t,onExpand:i,style:r,size:s}=n,a={onClick:t?()=>i(!e):void 0,class:n.class};return he(rn,si(a,{size:s,style:r}),{default:()=>[he(Qo,null,null)]})};var X8e=K8e;const rre=({columns:n,column:e,columnIndex:t,depth:i,expandIconProps:r,isScrolling:s,rowData:a,rowIndex:o,style:l,expandedRowKeys:u,ns:c,cellProps:d,expandColumnKey:f,indentSize:h,iconSize:p,rowKey:m},{slots:g})=>{const v=Mp(l);if(e.placeholderSign===dw)return he("div",{class:c.em("row-cell","placeholder"),style:v},null);const{cellRenderer:_,dataKey:y,dataGetter:b}=e,x=pn(b)?b({columns:n,column:e,columnIndex:t,rowData:a,rowIndex:o}):vs(a,y??""),w=Bg(d,{cellData:x,columns:n,column:e,columnIndex:t,rowIndex:o,rowData:a}),A={class:c.e("cell-text"),columns:n,column:e,columnIndex:t,cellData:x,isScrolling:s,rowData:a,rowIndex:o},T=Kie(_),C=T?T(A):at(g,"default",A,()=>[he(j8e,A,null)]),E=[c.e("row-cell"),e.class,e.align===cw.CENTER&&c.is("align-center"),e.align===cw.RIGHT&&c.is("align-right")],I=o>=0&&f&&e.key===f,k=o>=0&&u.includes(a[m]);let O;const U=`margin-inline-start: ${i*h}px;`;return I&&(Yn(r)?O=he(X8e,si(r,{class:[c.e("expand-icon"),c.is("expanded",k)],size:p,expanded:k,style:U,expandable:!0}),null):O=he("div",{style:[U,`width: ${p}px; height: ${p}px;`].join(" ")},null)),he("div",si({class:E,style:v},w,{role:"cell"}),[O,C])};rre.inheritAttrs=!1;var K$=rre;const Y8e=zt({class:String,columns:yT,columnsStyles:{type:et(Object),required:!0},headerIndex:Number,style:{type:et(Object)}}),Q8e=Ne({name:"ElTableV2HeaderRow",props:Y8e,setup(n,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:r,style:s}=n;let a=t.map((o,l)=>e.cell({columns:t,column:o,columnIndex:l,headerIndex:r,style:i[o.key]}));return e.header&&(a=e.header({cells:a.map(o=>Bt(o)&&o.length===1?o[0]:o),columns:t,headerIndex:r})),he("div",{class:n.class,style:s,role:"row"},[a])}}});var Z8e=Q8e;function J8e(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const eOe=({columns:n,columnsStyles:e,headerIndex:t,style:i,headerClass:r,headerProps:s,ns:a},{slots:o})=>{const l={columns:n,headerIndex:t},u=[a.e("header-row"),Bg(r,l,""),{[a.is("customized")]:!!o.header}],c={...Bg(s,l),columnsStyles:e,class:u,columns:n,headerIndex:t,style:i};return he(Z8e,c,J8e(o)?o:{default:()=>[o]})};var tOe=eOe;const i7=(n,{slots:e})=>at(e,"default",n,()=>{var t,i;return[he("div",{class:n.class,title:(t=n.column)==null?void 0:t.title},[(i=n.column)==null?void 0:i.title])]});i7.displayName="ElTableV2HeaderCell";i7.inheritAttrs=!1;var nOe=i7;const iOe=n=>{const{sortOrder:e}=n;return he(rn,{size:14,class:n.class},{default:()=>[e===uw.ASC?he(N2e,null,null):he(L2e,null,null)]})};var rOe=iOe;const sOe=(n,{slots:e})=>{const{column:t,ns:i,style:r,onColumnSorted:s}=n,a=Mp(r);if(t.placeholderSign===dw)return he("div",{class:i.em("header-row-cell","placeholder"),style:a},null);const{headerCellRenderer:o,headerClass:l,sortable:u}=t,c={...n,class:i.e("header-cell-text")},d=Kie(o),f=d?d(c):at(e,"default",c,()=>[he(nOe,c,null)]),{sortBy:h,sortState:p,headerCellProps:m}=n;let g,v;if(p){const b=p[t.key];g=!!K6[b],v=g?b:uw.ASC}else g=t.key===h.key,v=g?h.order:uw.ASC;const _=[i.e("header-cell"),Bg(l,n,""),t.align===cw.CENTER&&i.is("align-center"),t.align===cw.RIGHT&&i.is("align-right"),u&&i.is("sortable")],y={...Bg(m,n),onClick:t.sortable?s:void 0,class:_,style:a,"data-key":t.key};return he("div",si(y,{role:"columnheader"}),[f,u&&he(rOe,{class:[i.e("sort-icon"),g&&i.is("sorting")],sortOrder:v},null)])};var X$=sOe;const sre=(n,{slots:e})=>{var t;return he("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};sre.displayName="ElTableV2Footer";var aOe=sre;const are=(n,{slots:e})=>{const t=at(e,"default",{},()=>[he(Jne,null,null)]);return he("div",{class:n.class,style:n.style},[t])};are.displayName="ElTableV2Empty";var oOe=are;const ore=(n,{slots:e})=>{var t;return he("div",{class:n.class,style:n.style},[(t=e.default)==null?void 0:t.call(e)])};ore.displayName="ElTableV2Overlay";var lOe=ore;function IS(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!Wr(n)}const uOe="ElTableV2",cOe=Ne({name:uOe,props:y8e,setup(n,{slots:e,expose:t}){const i=Rt("table-v2"),{columnsStyles:r,fixedColumnsOnLeft:s,fixedColumnsOnRight:a,mainColumns:o,mainTableHeight:l,fixedTableHeight:u,leftTableWidth:c,rightTableWidth:d,data:f,depthMap:h,expandedRowKeys:p,hasFixedColumns:m,mainTableRef:g,leftTableRef:v,rightTableRef:_,isDynamic:y,isResetting:b,isScrolling:x,bodyWidth:w,emptyStyle:A,rootStyle:T,headerWidth:C,footerHeight:E,showEmpty:I,scrollTo:k,scrollToLeft:O,scrollToTop:U,scrollToRow:z,getRowHeight:L,onColumnSorted:G,onRowHeightChange:H,onRowHovered:F,onRowExpanded:X,onRowsRendered:te,onScroll:re,onVerticalScroll:ie}=g8e(n);return t({scrollTo:k,scrollToLeft:O,scrollToTop:U,scrollToRow:z}),ui(ZF,{ns:i,isResetting:b,isScrolling:x}),()=>{const{cache:le,cellProps:ge,estimatedRowHeight:pe,expandColumnKey:ye,fixedData:Oe,headerHeight:Be,headerClass:Ye,headerProps:Ze,headerCellProps:Q,sortBy:me,sortState:ce,rowHeight:je,rowClass:Fe,rowEventHandlers:nt,rowKey:We,rowProps:Ke,scrollbarAlwaysOn:it,indentSize:be,iconSize:K,useIsScrolling:ne,vScrollbarSize:Se,width:ze}=n,Je=S(f),Tt={cache:le,class:i.e("main"),columns:S(o),data:Je,fixedData:Oe,estimatedRowHeight:pe,bodyWidth:S(w)+Se,headerHeight:Be,headerWidth:S(C),height:S(l),mainTableRef:g,rowKey:We,rowHeight:je,scrollbarAlwaysOn:it,scrollbarStartGap:2,scrollbarEndGap:Se,useIsScrolling:ne,width:ze,getRowHeight:L,onRowsRendered:te,onScroll:re},At=S(c),Re=S(u),wt={cache:le,class:i.e("left"),columns:S(s),data:Je,estimatedRowHeight:pe,leftTableRef:v,rowHeight:je,bodyWidth:At,headerWidth:At,headerHeight:Be,height:Re,rowKey:We,scrollbarAlwaysOn:it,scrollbarStartGap:2,scrollbarEndGap:Se,useIsScrolling:ne,width:At,getRowHeight:L,onScroll:ie},q=S(d)+Se,xe={cache:le,class:i.e("right"),columns:S(a),data:Je,estimatedRowHeight:pe,rightTableRef:_,rowHeight:je,bodyWidth:q,headerWidth:q,headerHeight:Be,height:Re,rowKey:We,scrollbarAlwaysOn:it,scrollbarStartGap:2,scrollbarEndGap:Se,width:q,style:`--${S(i.namespace)}-table-scrollbar-size: ${Se}px`,useIsScrolling:ne,getRowHeight:L,onScroll:ie},ve=S(r),ke={ns:i,depthMap:S(h),columnsStyles:ve,expandColumnKey:ye,expandedRowKeys:S(p),estimatedRowHeight:pe,hasFixedColumns:S(m),rowProps:Ke,rowClass:Fe,rowKey:We,rowEventHandlers:nt,onRowHovered:F,onRowExpanded:X,onRowHeightChange:H},we={cellProps:ge,expandColumnKey:ye,indentSize:be,iconSize:K,rowKey:We,expandedRowKeys:S(p),ns:i},De={ns:i,headerClass:Ye,headerProps:Ze,columnsStyles:ve},xt={ns:i,sortBy:me,sortState:ce,headerCellProps:Q,onColumnSorted:G},Pe={row:Mt=>he(q8e,si(Mt,ke),{row:e.row,cell:jt=>{let Ft;return e.cell?he(K$,si(jt,we,{style:ve[jt.column.key]}),IS(Ft=e.cell(jt))?Ft:{default:()=>[Ft]}):he(K$,si(jt,we,{style:ve[jt.column.key]}),null)}}),header:Mt=>he(tOe,si(Mt,De),{header:e.header,cell:jt=>{let Ft;return e["header-cell"]?he(X$,si(jt,xt,{style:ve[jt.column.key]}),IS(Ft=e["header-cell"](jt))?Ft:{default:()=>[Ft]}):he(X$,si(jt,xt,{style:ve[jt.column.key]}),null)}})},Dt=[n.class,i.b(),i.e("root"),{[i.is("dynamic")]:S(y)}],dt={class:i.e("footer"),style:S(E)};return he("div",{class:Dt,style:S(T)},[he(k8e,Tt,IS(Pe)?Pe:{default:()=>[Pe]}),he(N8e,wt,IS(Pe)?Pe:{default:()=>[Pe]}),he(U8e,xe,IS(Pe)?Pe:{default:()=>[Pe]}),e.footer&&he(aOe,dt,{default:e.footer}),S(I)&&he(oOe,{class:i.e("empty"),style:S(A)},{default:e.empty}),e.overlay&&he(lOe,{class:i.e("overlay")},{default:e.overlay})])}}});var dOe=cOe;const fOe=zt({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:et(Function)}}),hOe=n=>{const e=ae(),t=ae(0),i=ae(0);let r;return Ln(()=>{r=Br(e,([s])=>{const{width:a,height:o}=s.contentRect,{paddingLeft:l,paddingRight:u,paddingTop:c,paddingBottom:d}=getComputedStyle(s.target),f=Number.parseInt(l)||0,h=Number.parseInt(u)||0,p=Number.parseInt(c)||0,m=Number.parseInt(d)||0;t.value=a-f-h,i.value=o-p-m}).stop}),Vi(()=>{r==null||r()}),St([t,i],([s,a])=>{var o;(o=n.onResize)==null||o.call(n,{width:s,height:a})}),{sizer:e,width:t,height:i}},pOe=Ne({name:"ElAutoResizer",props:fOe,setup(n,{slots:e}){const t=Rt("auto-resizer"),{height:i,width:r,sizer:s}=hOe(n),a={width:"100%",height:"100%"};return()=>{var o;return he("div",{ref:s,class:t.b(),style:a},[(o=e.default)==null?void 0:o.call(e,{height:i.value,width:r.value})])}}});var mOe=pOe;const gOe=Nn(dOe),vOe=Nn(mOe),sD=Symbol("tabsRootContextKey"),yOe=zt({tabs:{type:et(Array),default:()=>Kr([])}}),lre="ElTabBar",_Oe=Ne({name:lre}),bOe=Ne({..._Oe,props:yOe,setup(n,{expose:e}){const t=n,i=Qn(),r=Zt(sD);r||Xs(lre,"<el-tabs><el-tab-bar /></el-tabs>");const s=Rt("tabs"),a=ae(),o=ae(),l=()=>{let h=0,p=0;const m=["top","bottom"].includes(r.props.tabPosition)?"width":"height",g=m==="width"?"x":"y",v=g==="x"?"left":"top";return t.tabs.every(_=>{var y,b;const x=(b=(y=i.parent)==null?void 0:y.refs)==null?void 0:b[`tab-${_.uid}`];if(!x)return!1;if(!_.active)return!0;h=x[`offset${xd(v)}`],p=x[`client${xd(m)}`];const w=window.getComputedStyle(x);return m==="width"&&(p-=Number.parseFloat(w.paddingLeft)+Number.parseFloat(w.paddingRight),h+=Number.parseFloat(w.paddingLeft)),!1}),{[m]:`${p}px`,transform:`translate${xd(g)}(${h}px)`}},u=()=>o.value=l(),c=[],d=()=>{var h;c.forEach(m=>m.stop()),c.length=0;const p=(h=i.parent)==null?void 0:h.refs;if(p){for(const m in p)if(m.startsWith("tab-")){const g=p[m];g&&c.push(Br(g,u))}}};St(()=>t.tabs,async()=>{await cn(),u(),d()},{immediate:!0});const f=Br(a,()=>u());return Vi(()=>{c.forEach(h=>h.stop()),c.length=0,f.stop()}),e({ref:a,update:u}),(h,p)=>(j(),_e("div",{ref_key:"barRef",ref:a,class:ee([S(s).e("active-bar"),S(s).is(S(r).props.tabPosition)]),style:Jt(o.value)},null,6))}});var SOe=Vt(bOe,[["__file","tab-bar.vue"]]);const xOe=zt({panes:{type:et(Array),default:()=>Kr([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),wOe={tabClick:(n,e,t)=>t instanceof Event,tabRemove:(n,e)=>e instanceof Event},Y$="ElTabNav",TOe=Ne({name:Y$,props:xOe,emits:wOe,setup(n,{expose:e,emit:t}){const i=Zt(sD);i||Xs(Y$,"<el-tabs><tab-nav /></el-tabs>");const r=Rt("tabs"),s=GSe(),a=nxe(),o=ae(),l=ae(),u=ae(),c=ae(),d=ae(!1),f=ae(0),h=ae(!1),p=ae(!0),m=W(()=>["top","bottom"].includes(i.props.tabPosition)?"width":"height"),g=W(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${f.value}px)`})),v=()=>{if(!o.value)return;const T=o.value[`offset${xd(m.value)}`],C=f.value;if(!C)return;const E=C>T?C-T:0;f.value=E},_=()=>{if(!o.value||!l.value)return;const T=l.value[`offset${xd(m.value)}`],C=o.value[`offset${xd(m.value)}`],E=f.value;if(T-E<=C)return;const I=T-E>C*2?E+C:T-C;f.value=I},y=async()=>{const T=l.value;if(!d.value||!u.value||!o.value||!T)return;await cn();const C=u.value.querySelector(".is-active");if(!C)return;const E=o.value,I=["top","bottom"].includes(i.props.tabPosition),k=C.getBoundingClientRect(),O=E.getBoundingClientRect(),U=I?T.offsetWidth-O.width:T.offsetHeight-O.height,z=f.value;let L=z;I?(k.left<O.left&&(L=z-(O.left-k.left)),k.right>O.right&&(L=z+k.right-O.right)):(k.top<O.top&&(L=z-(O.top-k.top)),k.bottom>O.bottom&&(L=z+(k.bottom-O.bottom))),L=Math.max(L,0),f.value=Math.min(L,U)},b=()=>{var T;if(!l.value||!o.value)return;n.stretch&&((T=c.value)==null||T.update());const C=l.value[`offset${xd(m.value)}`],E=o.value[`offset${xd(m.value)}`],I=f.value;E<C?(d.value=d.value||{},d.value.prev=I,d.value.next=I+E<C,C-I<E&&(f.value=C-E)):(d.value=!1,I>0&&(f.value=0))},x=T=>{let C=0;switch(T.code){case Kt.left:case Kt.up:C=-1;break;case Kt.right:case Kt.down:C=1;break;default:return}const E=Array.from(T.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let k=E.indexOf(T.target)+C;k<0?k=E.length-1:k>=E.length&&(k=0),E[k].focus({preventScroll:!0}),E[k].click(),w()},w=()=>{p.value&&(h.value=!0)},A=()=>h.value=!1;return St(s,T=>{T==="hidden"?p.value=!1:T==="visible"&&setTimeout(()=>p.value=!0,50)}),St(a,T=>{T?setTimeout(()=>p.value=!0,50):p.value=!1}),Br(u,b),Ln(()=>setTimeout(()=>y(),0)),fc(()=>b()),e({scrollToActiveTab:y,removeFocus:A}),()=>{const T=d.value?[he("span",{class:[r.e("nav-prev"),r.is("disabled",!d.value.prev)],onClick:v},[he(rn,null,{default:()=>[he(t0,null,null)]})]),he("span",{class:[r.e("nav-next"),r.is("disabled",!d.value.next)],onClick:_},[he(rn,null,{default:()=>[he(Qo,null,null)]})])]:null,C=n.panes.map((E,I)=>{var k,O,U,z;const L=E.uid,G=E.props.disabled,H=(O=(k=E.props.name)!=null?k:E.index)!=null?O:`${I}`,F=!G&&(E.isClosable||n.editable);E.index=`${I}`;const X=F?he(rn,{class:"is-icon-close",onClick:ie=>t("tabRemove",E,ie)},{default:()=>[he(qc,null,null)]}):null,te=((z=(U=E.slots).label)==null?void 0:z.call(U))||E.props.label,re=!G&&E.active?0:-1;return he("div",{ref:`tab-${L}`,class:[r.e("item"),r.is(i.props.tabPosition),r.is("active",E.active),r.is("disabled",G),r.is("closable",F),r.is("focus",h.value)],id:`tab-${H}`,key:`tab-${L}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":E.active,tabindex:re,onFocus:()=>w(),onBlur:()=>A(),onClick:ie=>{A(),t("tabClick",E,H,ie)},onKeydown:ie=>{F&&(ie.code===Kt.delete||ie.code===Kt.backspace)&&t("tabRemove",E,ie)}},[te,X])});return he("div",{ref:u,class:[r.e("nav-wrap"),r.is("scrollable",!!d.value),r.is(i.props.tabPosition)]},[T,he("div",{class:r.e("nav-scroll"),ref:o},[he("div",{class:[r.e("nav"),r.is(i.props.tabPosition),r.is("stretch",n.stretch&&["top","bottom"].includes(i.props.tabPosition))],ref:l,style:g.value,role:"tablist",onKeydown:x},[n.type?null:he(SOe,{ref:c,tabs:[...n.panes]},null),C])])])}}}),COe=zt({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:et(Function),default:()=>!0},stretch:Boolean}),gP=n=>un(n)||yn(n),AOe={[$n]:n=>gP(n),tabClick:(n,e)=>e instanceof Event,tabChange:n=>gP(n),edit:(n,e)=>["remove","add"].includes(e),tabRemove:n=>gP(n),tabAdd:()=>!0},EOe=Ne({name:"ElTabs",props:COe,emits:AOe,setup(n,{emit:e,slots:t,expose:i}){var r;const s=Rt("tabs"),a=W(()=>["left","right"].includes(n.tabPosition)),{children:o,addChild:l,removeChild:u}=TF(Qn(),"ElTabPane"),c=ae(),d=ae((r=n.modelValue)!=null?r:"0"),f=async(v,_=!1)=>{var y,b,x;if(!(d.value===v||Xi(v)))try{await((y=n.beforeLeave)==null?void 0:y.call(n,v,d.value))!==!1&&(d.value=v,_&&(e($n,v),e("tabChange",v)),(x=(b=c.value)==null?void 0:b.removeFocus)==null||x.call(b))}catch{}},h=(v,_,y)=>{v.props.disabled||(f(_,!0),e("tabClick",v,y))},p=(v,_)=>{v.props.disabled||Xi(v.props.name)||(_.stopPropagation(),e("edit",v.props.name,"remove"),e("tabRemove",v.props.name))},m=()=>{e("edit",void 0,"add"),e("tabAdd")};St(()=>n.modelValue,v=>f(v)),St(d,async()=>{var v;await cn(),(v=c.value)==null||v.scrollToActiveTab()}),ui(sD,{props:n,currentName:d,registerPane:v=>{o.value.push(v)},sortPane:l,unregisterPane:u}),i({currentName:d});const g=({render:v})=>v();return()=>{const v=t["add-icon"],_=n.editable||n.addable?he("div",{class:[s.e("new-tab"),a.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:x=>{[Kt.enter,Kt.numpadEnter].includes(x.code)&&m()}},[v?at(t,"add-icon"):he(rn,{class:s.is("icon-plus")},{default:()=>[he(rte,null,null)]})]):null,y=he("div",{class:[s.e("header"),a.value&&s.e("header-vertical"),s.is(n.tabPosition)]},[he(g,{render:()=>{const x=o.value.some(w=>w.slots.label);return he(TOe,{ref:c,currentName:d.value,editable:n.editable,type:n.type,panes:o.value,stretch:n.stretch,onTabClick:h,onTabRemove:p},{$stable:!x})}},null),_]),b=he("div",{class:s.e("content")},[at(t,"default")]);return he("div",{class:[s.b(),s.m(n.tabPosition),{[s.m("card")]:n.type==="card",[s.m("border-card")]:n.type==="border-card"}]},[b,y])}}});var MOe=EOe;const IOe=zt({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ure="ElTabPane",DOe=Ne({name:ure}),ROe=Ne({...DOe,props:IOe,setup(n){const e=n,t=Qn(),i=Ls(),r=Zt(sD);r||Xs(ure,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=Rt("tab-pane"),a=ae(),o=W(()=>e.closable||r.props.closable),l=r6(()=>{var h;return r.currentName.value===((h=e.name)!=null?h:a.value)}),u=ae(l.value),c=W(()=>{var h;return(h=e.name)!=null?h:a.value}),d=r6(()=>!e.lazy||u.value||l.value);St(l,h=>{h&&(u.value=!0)});const f=Ui({uid:t.uid,slots:i,props:e,paneName:c,active:l,index:a,isClosable:o});return r.registerPane(f),Ln(()=>{r.sortPane(f)}),yh(()=>{r.unregisterPane(f.uid)}),(h,p)=>S(d)?Vn((j(),_e("div",{key:0,id:`pane-${S(c)}`,class:ee(S(s).b()),role:"tabpanel","aria-hidden":!S(l),"aria-labelledby":`tab-${S(c)}`},[at(h.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Oi,S(l)]]):ot("v-if",!0)}});var cre=Vt(ROe,[["__file","tab-pane.vue"]]);const POe=Nn(MOe,{TabPane:cre}),kOe=Xr(cre),LOe=zt({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:tf,default:""},truncated:Boolean,lineClamp:{type:[String,Number]},tag:{type:String,default:"span"}}),OOe=Ne({name:"ElText"}),NOe=Ne({...OOe,props:LOe,setup(n){const e=n,t=ws(),i=Rt("text"),r=W(()=>[i.b(),i.m(e.type),i.m(t.value),i.is("truncated",e.truncated),i.is("line-clamp",!Xi(e.lineClamp))]);return(s,a)=>(j(),gt(ei(s.tag),{class:ee(S(r)),style:Jt({"-webkit-line-clamp":s.lineClamp})},{default:Ae(()=>[at(s.$slots,"default")]),_:3},8,["class","style"]))}});var BOe=Vt(NOe,[["__file","text.vue"]]);const FOe=Nn(BOe),UOe=zt({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:et(String),default:"light"},clearable:{type:Boolean,default:!0},size:ks,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:et([String,Object]),default:()=>ite},clearIcon:{type:et([String,Object]),default:()=>xh},...fb}),zf=n=>{const e=(n||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),r=n.toUpperCase();return r.includes("AM")&&t===12?t=0:r.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},vP=(n,e)=>{const t=zf(n);if(!t)return-1;const i=zf(e);if(!i)return-1;const r=t.minutes+t.hours*60,s=i.minutes+i.hours*60;return r===s?0:r>s?1:-1},Q$=n=>`${n}`.padStart(2,"0"),Yy=n=>`${Q$(n.hours)}:${Q$(n.minutes)}`,zOe=(n,e)=>{const t=zf(n);if(!t)return"";const i=zf(e);if(!i)return"";const r={hours:t.hours,minutes:t.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,Yy(r)},HOe=Ne({name:"ElTimeSelect"}),VOe=Ne({...HOe,props:UOe,emits:["change","blur","focus","clear","update:modelValue"],setup(n,{expose:e}){const t=n;Dn.extend(MF);const{Option:i}=Ng,r=Rt("input"),s=ae(),a=no(),{lang:o}=wi(),l=W(()=>t.modelValue),u=W(()=>{const v=zf(t.start);return v?Yy(v):null}),c=W(()=>{const v=zf(t.end);return v?Yy(v):null}),d=W(()=>{const v=zf(t.step);return v?Yy(v):null}),f=W(()=>{const v=zf(t.minTime||"");return v?Yy(v):null}),h=W(()=>{const v=zf(t.maxTime||"");return v?Yy(v):null}),p=W(()=>{const v=[];if(t.start&&t.end&&t.step){let _=u.value,y;for(;_&&c.value&&vP(_,c.value)<=0;)y=Dn(_,"HH:mm").locale(o.value).format(t.format),v.push({value:y,disabled:vP(_,f.value||"-1:-1")<=0||vP(_,h.value||"100:100")>=0}),_=zOe(_,d.value)}return v});return e({blur:()=>{var v,_;(_=(v=s.value)==null?void 0:v.blur)==null||_.call(v)},focus:()=>{var v,_;(_=(v=s.value)==null?void 0:v.focus)==null||_.call(v)}}),(v,_)=>(j(),gt(S(Ng),{ref_key:"select",ref:s,"model-value":S(l),disabled:S(a),clearable:v.clearable,"clear-icon":v.clearIcon,size:v.size,effect:v.effect,placeholder:v.placeholder,"default-first-option":"",filterable:v.editable,"empty-values":v.emptyValues,"value-on-clear":v.valueOnClear,"onUpdate:modelValue":y=>v.$emit("update:modelValue",y),onChange:y=>v.$emit("change",y),onBlur:y=>v.$emit("blur",y),onFocus:y=>v.$emit("focus",y),onClear:()=>v.$emit("clear")},{prefix:Ae(()=>[v.prefixIcon?(j(),gt(S(rn),{key:0,class:ee(S(r).e("prefix-icon"))},{default:Ae(()=>[(j(),gt(ei(v.prefixIcon)))]),_:1},8,["class"])):ot("v-if",!0)]),default:Ae(()=>[(j(!0),_e(an,null,ti(S(p),y=>(j(),gt(S(i),{key:y.value,label:y.value,value:y.value,disabled:y.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable","empty-values","value-on-clear","onUpdate:modelValue","onChange","onBlur","onFocus","onClear"]))}});var $Oe=Vt(VOe,[["__file","time-select.vue"]]);const GOe=Nn($Oe),WOe=Ne({name:"ElTimeline",setup(n,{slots:e}){const t=Rt("timeline");return ui("timeline",e),()=>ln("ul",{class:[t.b()]},[at(e,"default")])}}),qOe=zt({timestamp:{type:String,default:""},hideTimestamp:Boolean,center:Boolean,placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:nr},hollow:Boolean}),jOe=Ne({name:"ElTimelineItem"}),KOe=Ne({...jOe,props:qOe,setup(n){const e=n,t=Rt("timeline-item"),i=W(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(r,s)=>(j(),_e("li",{class:ee([S(t).b(),{[S(t).e("center")]:r.center}])},[Te("div",{class:ee(S(t).e("tail"))},null,2),r.$slots.dot?ot("v-if",!0):(j(),_e("div",{key:0,class:ee(S(i)),style:Jt({backgroundColor:r.color})},[r.icon?(j(),gt(S(rn),{key:0,class:ee(S(t).e("icon"))},{default:Ae(()=>[(j(),gt(ei(r.icon)))]),_:1},8,["class"])):ot("v-if",!0)],6)),r.$slots.dot?(j(),_e("div",{key:1,class:ee(S(t).e("dot"))},[at(r.$slots,"dot")],2)):ot("v-if",!0),Te("div",{class:ee(S(t).e("wrapper"))},[!r.hideTimestamp&&r.placement==="top"?(j(),_e("div",{key:0,class:ee([S(t).e("timestamp"),S(t).is("top")])},Lt(r.timestamp),3)):ot("v-if",!0),Te("div",{class:ee(S(t).e("content"))},[at(r.$slots,"default")],2),!r.hideTimestamp&&r.placement==="bottom"?(j(),_e("div",{key:1,class:ee([S(t).e("timestamp"),S(t).is("bottom")])},Lt(r.timestamp),3)):ot("v-if",!0)],2)],2))}});var dre=Vt(KOe,[["__file","timeline-item.vue"]]);const XOe=Nn(WOe,{TimelineItem:dre}),YOe=Xr(dre),fre=zt({nowrap:Boolean});var hre=(n=>(n.top="top",n.bottom="bottom",n.left="left",n.right="right",n))(hre||{});const QOe=Object.values(hre),r7=zt({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:et(Object),default:null}}),ZOe=zt({side:{type:et(String),values:QOe,required:!0}}),JOe=["absolute","fixed"],eNe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],s7=zt({arrowPadding:{type:et(Number),default:5},effect:{type:et(String),default:"light"},contentClass:String,placement:{type:et(String),values:eNe,default:"bottom"},reference:{type:et(Object),default:null},offset:{type:Number,default:8},strategy:{type:et(String),values:JOe,default:"absolute"},showArrow:Boolean,...Ba(["ariaLabel"])}),a7=zt({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:et(Function)},"onUpdate:open":{type:et(Function)}}),Uv={type:et(Function)},o7=zt({onBlur:Uv,onClick:Uv,onFocus:Uv,onMouseDown:Uv,onMouseEnter:Uv,onMouseLeave:Uv}),tNe=zt({...a7,...r7,...o7,...s7,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:et(Object),default:null},teleported:Boolean,to:{type:et(String),default:"body"}}),aD=Symbol("tooltipV2"),pre=Symbol("tooltipV2Content"),yP="tooltip_v2.open",nNe=Ne({name:"ElTooltipV2Root"}),iNe=Ne({...nNe,props:a7,setup(n,{expose:e}){const t=n,i=ae(t.defaultOpen),r=ae(null),s=W({get:()=>kg(t.open)?i.value:t.open,set:g=>{var v;i.value=g,(v=t["onUpdate:open"])==null||v.call(t,g)}}),a=W(()=>yn(t.delayDuration)&&t.delayDuration>0),{start:o,stop:l}=Lg(()=>{s.value=!0},W(()=>t.delayDuration),{immediate:!1}),u=Rt("tooltip-v2"),c=Oa(),d=()=>{l(),s.value=!0},f=()=>{S(a)?o():d()},h=d,p=()=>{l(),s.value=!1};return St(s,g=>{var v;g&&(document.dispatchEvent(new CustomEvent(yP)),h()),(v=t.onOpenChange)==null||v.call(t,g)}),Ln(()=>{document.addEventListener(yP,p)}),Vi(()=>{l(),document.removeEventListener(yP,p)}),ui(aD,{contentId:c,triggerRef:r,ns:u,onClose:p,onDelayOpen:f,onOpen:h}),e({onOpen:h,onClose:p}),(g,v)=>at(g.$slots,"default",{open:S(s)})}});var rNe=Vt(iNe,[["__file","root.vue"]]);const sNe=Ne({name:"ElTooltipV2Arrow"}),aNe=Ne({...sNe,props:{...r7,...ZOe},setup(n){const e=n,{ns:t}=Zt(aD),{arrowRef:i}=Zt(pre),r=W(()=>{const{style:s,width:a,height:o}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${a}px`,[`--${l}-tooltip-v2-arrow-height`]:`${o}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${a/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:a/2-1,...s||{}}});return(s,a)=>(j(),_e("span",{ref_key:"arrowRef",ref:i,style:Jt(S(r)),class:ee(S(t).e("arrow"))},null,6))}});var Z$=Vt(aNe,[["__file","arrow.vue"]]);const y_=Math.min,yg=Math.max,F3=Math.round,tA=Math.floor,s0=n=>({x:n,y:n}),oNe={left:"right",right:"left",bottom:"top",top:"bottom"},lNe={start:"end",end:"start"};function Y6(n,e,t){return yg(n,y_(e,t))}function _T(n,e){return typeof n=="function"?n(e):n}function Fg(n){return n.split("-")[0]}function bT(n){return n.split("-")[1]}function mre(n){return n==="x"?"y":"x"}function l7(n){return n==="y"?"height":"width"}function oD(n){return["top","bottom"].includes(Fg(n))?"y":"x"}function u7(n){return mre(oD(n))}function uNe(n,e,t){t===void 0&&(t=!1);const i=bT(n),r=u7(n),s=l7(r);let a=r==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=U3(a)),[a,U3(a)]}function cNe(n){const e=U3(n);return[Q6(n),e,Q6(e)]}function Q6(n){return n.replace(/start|end/g,e=>lNe[e])}function dNe(n,e,t){const i=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(n){case"top":case"bottom":return t?e?r:i:e?i:r;case"left":case"right":return e?s:a;default:return[]}}function fNe(n,e,t,i){const r=bT(n);let s=dNe(Fg(n),t==="start",i);return r&&(s=s.map(a=>a+"-"+r),e&&(s=s.concat(s.map(Q6)))),s}function U3(n){return n.replace(/left|right|bottom|top/g,e=>oNe[e])}function hNe(n){return{top:0,right:0,bottom:0,left:0,...n}}function gre(n){return typeof n!="number"?hNe(n):{top:n,right:n,bottom:n,left:n}}function z3(n){return{...n,top:n.y,left:n.x,right:n.x+n.width,bottom:n.y+n.height}}function J$(n,e,t){let{reference:i,floating:r}=n;const s=oD(e),a=u7(e),o=l7(a),l=Fg(e),u=s==="y",c=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[o]/2-r[o]/2;let h;switch(l){case"top":h={x:c,y:i.y-r.height};break;case"bottom":h={x:c,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(bT(e)){case"start":h[a]-=f*(t&&u?-1:1);break;case"end":h[a]+=f*(t&&u?-1:1);break}return h}const pNe=async(n,e,t)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:n,floating:e,strategy:r}),{x:c,y:d}=J$(u,i,l),f=i,h={},p=0;for(let m=0;m<o.length;m++){const{name:g,fn:v}=o[m],{x:_,y,data:b,reset:x}=await v({x:c,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:u,platform:a,elements:{reference:n,floating:e}});if(c=_??c,d=y??d,h={...h,[g]:{...h[g],...b}},x&&p<=50){p++,typeof x=="object"&&(x.placement&&(f=x.placement),x.rects&&(u=x.rects===!0?await a.getElementRects({reference:n,floating:e,strategy:r}):x.rects),{x:c,y:d}=J$(u,f,l)),m=-1;continue}}return{x:c,y:d,placement:f,strategy:r,middlewareData:h}};async function c7(n,e){var t;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:a,elements:o,strategy:l}=n,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=_T(e,n),p=gre(h),g=o[f?d==="floating"?"reference":"floating":d],v=z3(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(g)))==null||t?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:u,rootBoundary:c,strategy:l})),_=d==="floating"?{...a.floating,x:i,y:r}:a.reference,y=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),b=await(s.isElement==null?void 0:s.isElement(y))?await(s.getScale==null?void 0:s.getScale(y))||{x:1,y:1}:{x:1,y:1},x=z3(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:_,offsetParent:y,strategy:l}):_);return{top:(v.top-x.top+p.top)/b.y,bottom:(x.bottom-v.bottom+p.bottom)/b.y,left:(v.left-x.left+p.left)/b.x,right:(x.right-v.right+p.right)/b.x}}const vre=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:r,rects:s,platform:a,elements:o}=e,{element:l,padding:u=0}=_T(n,e)||{};if(l==null)return{};const c=gre(u),d={x:t,y:i},f=u7(r),h=l7(f),p=await a.getDimensions(l),m=f==="y",g=m?"top":"left",v=m?"bottom":"right",_=m?"clientHeight":"clientWidth",y=s.reference[h]+s.reference[f]-d[f]-s.floating[h],b=d[f]-s.reference[f],x=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let w=x?x[_]:0;(!w||!await(a.isElement==null?void 0:a.isElement(x)))&&(w=o.floating[_]||s.floating[h]);const A=y/2-b/2,T=w/2-p[h]/2-1,C=y_(c[g],T),E=y_(c[v],T),I=C,k=w-p[h]-E,O=w/2-p[h]/2+A,U=Y6(I,O,k),L=bT(r)!=null&&O!=U&&s.reference[h]/2-(O<I?C:E)-p[h]/2<0?O<I?I-O:k-O:0;return{[f]:d[f]-L,data:{[f]:U,centerOffset:O-U+L}}}}),mNe=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t;const{placement:i,middlewareData:r,rects:s,initialPlacement:a,platform:o,elements:l}=e,{mainAxis:u=!0,crossAxis:c=!0,fallbackPlacements:d,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...m}=_T(n,e),g=Fg(i),v=Fg(a)===a,_=await(o.isRTL==null?void 0:o.isRTL(l.floating)),y=d||(v||!p?[U3(a)]:cNe(a));!d&&h!=="none"&&y.push(...fNe(a,p,h,_));const b=[a,...y],x=await c7(e,m),w=[];let A=((t=r.flip)==null?void 0:t.overflows)||[];if(u&&w.push(x[g]),c){const I=uNe(i,s,_);w.push(x[I[0]],x[I[1]])}if(A=[...A,{placement:i,overflows:w}],!w.every(I=>I<=0)){var T,C;const I=(((T=r.flip)==null?void 0:T.index)||0)+1,k=b[I];if(k)return{data:{index:I,overflows:A},reset:{placement:k}};let O=(C=A.filter(U=>U.overflows[0]<=0).sort((U,z)=>U.overflows[1]-z.overflows[1])[0])==null?void 0:C.placement;if(!O)switch(f){case"bestFit":{var E;const U=(E=A.map(z=>[z.placement,z.overflows.filter(L=>L>0).reduce((L,G)=>L+G,0)]).sort((z,L)=>z[1]-L[1])[0])==null?void 0:E[0];U&&(O=U);break}case"initialPlacement":O=a;break}if(i!==O)return{reset:{placement:O}}}return{}}}};async function gNe(n,e){const{placement:t,platform:i,elements:r}=n,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),a=Fg(t),o=bT(t),l=oD(t)==="y",u=["left","top"].includes(a)?-1:1,c=s&&l?-1:1,d=_T(e,n);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&typeof p=="number"&&(h=o==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const yre=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){const{x:t,y:i}=e,r=await gNe(e,n);return{x:t+r.x,y:i+r.y,data:r}}}},vNe=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:g=>{let{x:v,y:_}=g;return{x:v,y:_}}},...l}=_T(n,e),u={x:t,y:i},c=await c7(e,l),d=oD(Fg(r)),f=mre(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",_=h+c[g],y=h-c[v];h=Y6(_,h,y)}if(a){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",_=p+c[g],y=p-c[v];p=Y6(_,p,y)}const m=o.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-t,y:m.y-i}}}}};function a0(n){return _re(n)?(n.nodeName||"").toLowerCase():"#document"}function ou(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Th(n){var e;return(e=(_re(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function _re(n){return n instanceof Node||n instanceof ou(n).Node}function ah(n){return n instanceof Element||n instanceof ou(n).Element}function qd(n){return n instanceof HTMLElement||n instanceof ou(n).HTMLElement}function eG(n){return typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ou(n).ShadowRoot}function ST(n){const{overflow:e,overflowX:t,overflowY:i,display:r}=ac(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(r)}function yNe(n){return["table","td","th"].includes(a0(n))}function d7(n){const e=f7(),t=ac(n);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function f7(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function lD(n){return["html","body","#document"].includes(a0(n))}function ac(n){return ou(n).getComputedStyle(n)}function uD(n){return ah(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function __(n){if(a0(n)==="html")return n;const e=n.assignedSlot||n.parentNode||eG(n)&&n.host||Th(n);return eG(e)?e.host:e}function bre(n){const e=__(n);return lD(e)?n.ownerDocument?n.ownerDocument.body:n.body:qd(e)&&ST(e)?e:bre(e)}function H3(n,e){var t;e===void 0&&(e=[]);const i=bre(n),r=i===((t=n.ownerDocument)==null?void 0:t.body),s=ou(i);return r?e.concat(s,s.visualViewport||[],ST(i)?i:[]):e.concat(i,H3(i))}function Sre(n){const e=ac(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=qd(n),s=r?n.offsetWidth:t,a=r?n.offsetHeight:i,o=F3(t)!==s||F3(i)!==a;return o&&(t=s,i=a),{width:t,height:i,$:o}}function h7(n){return ah(n)?n:n.contextElement}function L1(n){const e=h7(n);if(!qd(e))return s0(1);const t=e.getBoundingClientRect(),{width:i,height:r,$:s}=Sre(e);let a=(s?F3(t.width):t.width)/i,o=(s?F3(t.height):t.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const _Ne=s0(0);function xre(n){const e=ou(n);return!f7()||!e.visualViewport?_Ne:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bNe(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ou(n)?!1:e}function Ug(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const r=n.getBoundingClientRect(),s=h7(n);let a=s0(1);e&&(i?ah(i)&&(a=L1(i)):a=L1(n));const o=bNe(s,t,i)?xre(s):s0(0);let l=(r.left+o.x)/a.x,u=(r.top+o.y)/a.y,c=r.width/a.x,d=r.height/a.y;if(s){const f=ou(s),h=i&&ah(i)?ou(i):i;let p=f.frameElement;for(;p&&i&&h!==f;){const m=L1(p),g=p.getBoundingClientRect(),v=ac(p),_=g.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,y=g.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,u*=m.y,c*=m.x,d*=m.y,l+=_,u+=y,p=ou(p).frameElement}}return z3({width:c,height:d,x:l,y:u})}function SNe(n){let{rect:e,offsetParent:t,strategy:i}=n;const r=qd(t),s=Th(t);if(t===s)return e;let a={scrollLeft:0,scrollTop:0},o=s0(1);const l=s0(0);if((r||!r&&i!=="fixed")&&((a0(t)!=="body"||ST(s))&&(a=uD(t)),qd(t))){const u=Ug(t);o=L1(t),l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}return{width:e.width*o.x,height:e.height*o.y,x:e.x*o.x-a.scrollLeft*o.x+l.x,y:e.y*o.y-a.scrollTop*o.y+l.y}}function xNe(n){return Array.from(n.getClientRects())}function wre(n){return Ug(Th(n)).left+uD(n).scrollLeft}function wNe(n){const e=Th(n),t=uD(n),i=n.ownerDocument.body,r=yg(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=yg(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let a=-t.scrollLeft+wre(n);const o=-t.scrollTop;return ac(i).direction==="rtl"&&(a+=yg(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:a,y:o}}function TNe(n,e){const t=ou(n),i=Th(n),r=t.visualViewport;let s=i.clientWidth,a=i.clientHeight,o=0,l=0;if(r){s=r.width,a=r.height;const u=f7();(!u||u&&e==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:s,height:a,x:o,y:l}}function CNe(n,e){const t=Ug(n,!0,e==="fixed"),i=t.top+n.clientTop,r=t.left+n.clientLeft,s=qd(n)?L1(n):s0(1),a=n.clientWidth*s.x,o=n.clientHeight*s.y,l=r*s.x,u=i*s.y;return{width:a,height:o,x:l,y:u}}function tG(n,e,t){let i;if(e==="viewport")i=TNe(n,t);else if(e==="document")i=wNe(Th(n));else if(ah(e))i=CNe(e,t);else{const r=xre(n);i={...e,x:e.x-r.x,y:e.y-r.y}}return z3(i)}function Tre(n,e){const t=__(n);return t===e||!ah(t)||lD(t)?!1:ac(t).position==="fixed"||Tre(t,e)}function ANe(n,e){const t=e.get(n);if(t)return t;let i=H3(n).filter(o=>ah(o)&&a0(o)!=="body"),r=null;const s=ac(n).position==="fixed";let a=s?__(n):n;for(;ah(a)&&!lD(a);){const o=ac(a),l=d7(a);!l&&o.position==="fixed"&&(r=null),(s?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||ST(a)&&!l&&Tre(n,a))?i=i.filter(c=>c!==a):r=o,a=__(a)}return e.set(n,i),i}function ENe(n){let{element:e,boundary:t,rootBoundary:i,strategy:r}=n;const a=[...t==="clippingAncestors"?ANe(e,this._c):[].concat(t),i],o=a[0],l=a.reduce((u,c)=>{const d=tG(e,c,r);return u.top=yg(d.top,u.top),u.right=y_(d.right,u.right),u.bottom=y_(d.bottom,u.bottom),u.left=yg(d.left,u.left),u},tG(e,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function MNe(n){return Sre(n)}function INe(n,e,t){const i=qd(e),r=Th(e),s=t==="fixed",a=Ug(n,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=s0(0);if(i||!i&&!s)if((a0(e)!=="body"||ST(r))&&(o=uD(e)),i){const u=Ug(e,!0,s,e);l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}else r&&(l.x=wre(r));return{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function nG(n,e){return!qd(n)||ac(n).position==="fixed"?null:e?e(n):n.offsetParent}function DNe(n){let e=__(n);for(;qd(e)&&!lD(e);){if(d7(e))return e;e=__(e)}return null}function Cre(n,e){const t=ou(n);if(!qd(n))return t;let i=nG(n,e);for(;i&&yNe(i)&&ac(i).position==="static";)i=nG(i,e);return i&&(a0(i)==="html"||a0(i)==="body"&&ac(i).position==="static"&&!d7(i))?t:i||DNe(n)||t}const RNe=async function(n){let{reference:e,floating:t,strategy:i}=n;const r=this.getOffsetParent||Cre,s=this.getDimensions;return{reference:INe(e,await r(t),i),floating:{x:0,y:0,...await s(t)}}};function PNe(n){return ac(n).direction==="rtl"}const kNe={convertOffsetParentRelativeRectToViewportRelativeRect:SNe,getDocumentElement:Th,getClippingRect:ENe,getOffsetParent:Cre,getElementRects:RNe,getClientRects:xNe,getDimensions:MNe,getScale:L1,isElement:ah,isRTL:PNe};function LNe(n,e){let t=null,i;const r=Th(n);function s(){clearTimeout(i),t&&t.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=n.getBoundingClientRect();if(o||e(),!d||!f)return;const h=tA(c),p=tA(r.clientWidth-(u+d)),m=tA(r.clientHeight-(c+f)),g=tA(u),_={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:yg(0,y_(1,l))||1};let y=!0;function b(x){const w=x[0].intersectionRatio;if(w!==l){if(!y)return a();w?a(!1,w):i=setTimeout(()=>{a(!1,1e-7)},100)}y=!1}try{t=new IntersectionObserver(b,{..._,root:r.ownerDocument})}catch{t=new IntersectionObserver(b,_)}t.observe(n)}return a(!0),s}function ONe(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,u=h7(n),c=r||s?[...u?H3(u):[],...H3(e)]:[];c.forEach(v=>{r&&v.addEventListener("scroll",t,{passive:!0}),s&&v.addEventListener("resize",t)});const d=u&&o?LNe(u,t):null;let f=-1,h=null;a&&(h=new ResizeObserver(v=>{let[_]=v;_&&_.target===u&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),t()}),u&&!l&&h.observe(u),h.observe(e));let p,m=l?Ug(n):null;l&&g();function g(){const v=Ug(n);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&t(),m=v,p=requestAnimationFrame(g)}return t(),()=>{c.forEach(v=>{r&&v.removeEventListener("scroll",t),s&&v.removeEventListener("resize",t)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const Are=(n,e,t)=>{const i=new Map,r={platform:kNe,...t},s={...r.platform,_c:i};return pNe(n,e,{...r,platform:s})},NNe=zt({style:{type:et([String,Object,Array]),default:()=>({})}}),BNe=Ne({name:"ElVisuallyHidden"}),FNe=Ne({...BNe,props:NNe,setup(n){const e=n,t=W(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,r)=>(j(),_e("span",si(i.$attrs,{style:S(t)}),[at(i.$slots,"default")],16))}});var UNe=Vt(FNe,[["__file","visual-hidden.vue"]]);zt({});const zNe=n=>{if(!xi)return;if(!n)return n;const e=Xo(n);return e||(br(n)?e:n)},HNe=({middleware:n,placement:e,strategy:t})=>{const i=ae(),r=ae(),s=ae(),a=ae(),o=ae({}),l={x:s,y:a,placement:e,strategy:t,middlewareData:o},u=async()=>{if(!xi)return;const c=zNe(i),d=Xo(r);if(!c||!d)return;const f=await Are(c,d,{placement:S(e),strategy:S(t),middleware:S(n)});l_(l).forEach(h=>{l[h].value=f[h]})};return Ln(()=>{ya(()=>{u()})}),{...l,update:u,referenceRef:i,contentRef:r}},VNe=({arrowRef:n,padding:e})=>({name:"arrow",options:{element:n,padding:e},fn(t){const i=S(n);return i?vre({element:i,padding:e}).fn(t):{}}}),$Ne=Ne({name:"ElTooltipV2Content"}),GNe=Ne({...$Ne,props:{...s7,...fre},setup(n){const e=n,{triggerRef:t,contentId:i}=Zt(aD),r=ae(e.placement),s=ae(e.strategy),a=ae(null),{referenceRef:o,contentRef:l,middlewareData:u,x:c,y:d,update:f}=HNe({placement:r,strategy:s,middleware:W(()=>{const y=[yre(e.offset)];return e.showArrow&&y.push(VNe({arrowRef:a})),y})}),h=db().nextZIndex(),p=Rt("tooltip-v2"),m=W(()=>r.value.split("-")[0]),g=W(()=>({position:S(s),top:`${S(d)||0}px`,left:`${S(c)||0}px`,zIndex:h})),v=W(()=>{if(!e.showArrow)return{};const{arrow:y}=S(u);return{[`--${p.namespace.value}-tooltip-v2-arrow-x`]:`${y==null?void 0:y.x}px`||"",[`--${p.namespace.value}-tooltip-v2-arrow-y`]:`${y==null?void 0:y.y}px`||""}}),_=W(()=>[p.e("content"),p.is("dark",e.effect==="dark"),p.is(S(s)),e.contentClass]);return St(a,()=>f()),St(()=>e.placement,y=>r.value=y),Ln(()=>{St(()=>e.reference||t.value,y=>{o.value=y||void 0},{immediate:!0})}),ui(pre,{arrowRef:a}),(y,b)=>(j(),_e("div",{ref_key:"contentRef",ref:l,style:Jt(S(g)),"data-tooltip-v2-root":""},[y.nowrap?ot("v-if",!0):(j(),_e("div",{key:0,"data-side":S(m),class:ee(S(_))},[at(y.$slots,"default",{contentStyle:S(g),contentClass:S(_)}),he(S(UNe),{id:S(i),role:"tooltip"},{default:Ae(()=>[y.ariaLabel?(j(),_e(an,{key:0},[An(Lt(y.ariaLabel),1)],64)):at(y.$slots,"default",{key:1})]),_:3},8,["id"]),at(y.$slots,"arrow",{style:Jt(S(v)),side:S(m)})],10,["data-side"]))],4))}});var iG=Vt(GNe,[["__file","content.vue"]]);const WNe=zt({setRef:{type:et(Function),required:!0},onlyChild:Boolean});var qNe=Ne({props:WNe,setup(n,{slots:e}){const t=ae(),i=tD(t,r=>{r?n.setRef(r.nextElementSibling):n.setRef(null)});return()=>{var r;const[s]=((r=e.default)==null?void 0:r.call(e))||[],a=n.onlyChild?_Ee(s.children):s.children;return he(an,{ref:i},[a])}}});const jNe=Ne({name:"ElTooltipV2Trigger"}),KNe=Ne({...jNe,props:{...fre,...o7},setup(n){const e=n,{onClose:t,onOpen:i,onDelayOpen:r,triggerRef:s,contentId:a}=Zt(aD);let o=!1;const l=_=>{s.value=_},u=()=>{o=!1},c=es(e.onMouseEnter,r),d=es(e.onMouseLeave,t),f=es(e.onMouseDown,()=>{t(),o=!0,document.addEventListener("mouseup",u,{once:!0})}),h=es(e.onFocus,()=>{o||i()}),p=es(e.onBlur,t),m=es(e.onClick,_=>{_.detail===0&&t()}),g={blur:p,click:m,focus:h,mousedown:f,mouseenter:c,mouseleave:d},v=(_,y,b)=>{_&&Object.entries(y).forEach(([x,w])=>{_[b](x,w)})};return St(s,(_,y)=>{v(_,g,"addEventListener"),v(y,g,"removeEventListener"),_&&_.setAttribute("aria-describedby",a.value)}),Vi(()=>{v(s.value,g,"removeEventListener"),document.removeEventListener("mouseup",u)}),(_,y)=>_.nowrap?(j(),gt(S(qNe),{key:0,"set-ref":l,"only-child":""},{default:Ae(()=>[at(_.$slots,"default")]),_:3})):(j(),_e("button",si({key:1,ref_key:"triggerRef",ref:s},_.$attrs),[at(_.$slots,"default")],16))}});var XNe=Vt(KNe,[["__file","trigger.vue"]]);const YNe=Ne({name:"ElTooltipV2"}),QNe=Ne({...YNe,props:tNe,setup(n){const t=js(n),i=Ui(Nc(t,Object.keys(r7))),r=Ui(Nc(t,Object.keys(s7))),s=Ui(Nc(t,Object.keys(a7))),a=Ui(Nc(t,Object.keys(o7)));return(o,l)=>(j(),gt(rNe,Lc(Qp(s)),{default:Ae(({open:u})=>[he(XNe,si(a,{nowrap:""}),{default:Ae(()=>[at(o.$slots,"trigger")]),_:3},16),he(S(pb),{to:o.to,disabled:!o.teleported},{default:Ae(()=>[o.fullTransition?(j(),gt(Ks,Lc(si({key:0},o.transitionProps)),{default:Ae(()=>[o.alwaysOn||u?(j(),gt(iG,Lc(si({key:0},r)),{arrow:Ae(({style:c,side:d})=>[o.showArrow?(j(),gt(Z$,si({key:0},i,{style:c,side:d}),null,16,["style","side"])):ot("v-if",!0)]),default:Ae(()=>[at(o.$slots,"default")]),_:3},16)):ot("v-if",!0)]),_:2},1040)):(j(),_e(an,{key:1},[o.alwaysOn||u?(j(),gt(iG,Lc(si({key:0},r)),{arrow:Ae(({style:c,side:d})=>[o.showArrow?(j(),gt(Z$,si({key:0},i,{style:c,side:d}),null,16,["style","side"])):ot("v-if",!0)]),default:Ae(()=>[at(o.$slots,"default")]),_:3},16)):ot("v-if",!0)],64))]),_:2},1032,["to","disabled"])]),_:3},16))}});var ZNe=Vt(QNe,[["__file","tooltip.vue"]]);const JNe=Nn(ZNe),Ere="left-check-change",Mre="right-check-change",Qy=zt({data:{type:et(Array),default:()=>[]},titles:{type:et(Array),default:()=>[]},buttonTexts:{type:et(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:et(Function)},leftDefaultChecked:{type:et(Array),default:()=>[]},rightDefaultChecked:{type:et(Array),default:()=>[]},renderContent:{type:et(Function)},modelValue:{type:et(Array),default:()=>[]},format:{type:et(Object),default:()=>({})},filterable:Boolean,props:{type:et(Object),default:()=>Kr({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),Z6=(n,e)=>[n,e].every(Bt)||Bt(n)&&na(e),eBe={[er]:(n,e,t)=>[n,t].every(Bt)&&["left","right"].includes(e),[$n]:n=>Bt(n),[Ere]:Z6,[Mre]:Z6},J6="checked-change",tBe=zt({data:Qy.data,optionRender:{type:et(Function)},placeholder:String,title:String,filterable:Boolean,format:Qy.format,filterMethod:Qy.filterMethod,defaultChecked:Qy.leftDefaultChecked,props:Qy.props}),nBe={[J6]:Z6},xT=n=>{const e={label:"label",key:"key",disabled:"disabled"};return W(()=>({...e,...n.props}))},iBe=(n,e,t)=>{const i=xT(n),r=W(()=>n.data.filter(c=>pn(n.filterMethod)?n.filterMethod(e.query,c):String(c[i.value.label]||c[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=W(()=>r.value.filter(c=>!c[i.value.disabled])),a=W(()=>{const c=e.checked.length,d=n.data.length,{noChecked:f,hasChecked:h}=n.format;return f&&h?c>0?h.replace(/\${checked}/g,c.toString()).replace(/\${total}/g,d.toString()):f.replace(/\${total}/g,d.toString()):`${c}/${d}`}),o=W(()=>{const c=e.checked.length;return c>0&&c<s.value.length}),l=()=>{const c=s.value.map(d=>d[i.value.key]);e.allChecked=c.length>0&&c.every(d=>e.checked.includes(d))},u=c=>{e.checked=c?s.value.map(d=>d[i.value.key]):[]};return St(()=>e.checked,(c,d)=>{if(l(),e.checkChangeByUser){const f=c.concat(d).filter(h=>!c.includes(h)||!d.includes(h));t(J6,c,f)}else t(J6,c),e.checkChangeByUser=!0}),St(s,()=>{l()}),St(()=>n.data,()=>{const c=[],d=r.value.map(f=>f[i.value.key]);e.checked.forEach(f=>{d.includes(f)&&c.push(f)}),e.checkChangeByUser=!1,e.checked=c}),St(()=>n.defaultChecked,(c,d)=>{if(d&&c.length===d.length&&c.every(p=>d.includes(p)))return;const f=[],h=s.value.map(p=>p[i.value.key]);c.forEach(p=>{h.includes(p)&&f.push(p)}),e.checkChangeByUser=!1,e.checked=f},{immediate:!0}),{filteredData:r,checkableData:s,checkedSummary:a,isIndeterminate:o,updateAllChecked:l,handleAllCheckedChange:u}},rBe=Ne({name:"ElTransferPanel"}),sBe=Ne({...rBe,props:tBe,emits:nBe,setup(n,{expose:e,emit:t}){const i=n,r=Ls(),s=({option:y})=>y,{t:a}=wi(),o=Rt("transfer"),l=Ui({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),u=xT(i),{filteredData:c,checkedSummary:d,isIndeterminate:f,handleAllCheckedChange:h}=iBe(i,l,t),p=W(()=>!eu(l.query)&&eu(c.value)),m=W(()=>!eu(r.default()[0].children)),{checked:g,allChecked:v,query:_}=js(l);return e({query:_}),(y,b)=>(j(),_e("div",{class:ee(S(o).b("panel"))},[Te("p",{class:ee(S(o).be("panel","header"))},[he(S(sc),{modelValue:S(v),"onUpdate:modelValue":x=>br(v)?v.value=x:null,indeterminate:S(f),"validate-event":!1,onChange:S(h)},{default:Ae(()=>[An(Lt(y.title)+" ",1),Te("span",null,Lt(S(d)),1)]),_:1},8,["modelValue","onUpdate:modelValue","indeterminate","onChange"])],2),Te("div",{class:ee([S(o).be("panel","body"),S(o).is("with-footer",S(m))])},[y.filterable?(j(),gt(S(So),{key:0,modelValue:S(_),"onUpdate:modelValue":x=>br(_)?_.value=x:null,class:ee(S(o).be("panel","filter")),size:"default",placeholder:y.placeholder,"prefix-icon":S(P2e),clearable:"","validate-event":!1},null,8,["modelValue","onUpdate:modelValue","class","placeholder","prefix-icon"])):ot("v-if",!0),Vn(he(S(nne),{modelValue:S(g),"onUpdate:modelValue":x=>br(g)?g.value=x:null,"validate-event":!1,class:ee([S(o).is("filterable",y.filterable),S(o).be("panel","list")])},{default:Ae(()=>[(j(!0),_e(an,null,ti(S(c),x=>(j(),gt(S(sc),{key:x[S(u).key],class:ee(S(o).be("panel","item")),value:x[S(u).key],disabled:x[S(u).disabled],"validate-event":!1},{default:Ae(()=>{var w;return[he(s,{option:(w=y.optionRender)==null?void 0:w.call(y,x)},null,8,["option"])]}),_:2},1032,["class","value","disabled"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"]),[[Oi,!S(p)&&!S(eu)(y.data)]]),Vn(Te("div",{class:ee(S(o).be("panel","empty"))},[at(y.$slots,"empty",{},()=>[An(Lt(S(p)?S(a)("el.transfer.noMatch"):S(a)("el.transfer.noData")),1)])],2),[[Oi,S(p)||S(eu)(y.data)]])],2),S(m)?(j(),_e("p",{key:0,class:ee(S(o).be("panel","footer"))},[at(y.$slots,"default")],2)):ot("v-if",!0)],2))}});var rG=Vt(sBe,[["__file","transfer-panel.vue"]]);const aBe=n=>{const e=xT(n),t=W(()=>n.data.reduce((s,a)=>(s[a[e.value.key]]=a)&&s,{})),i=W(()=>n.data.filter(s=>!n.modelValue.includes(s[e.value.key]))),r=W(()=>n.targetOrder==="original"?n.data.filter(s=>n.modelValue.includes(s[e.value.key])):n.modelValue.reduce((s,a)=>{const o=t.value[a];return o&&s.push(o),s},[]));return{sourceData:i,targetData:r}},oBe=(n,e,t)=>{const i=xT(n),r=(o,l,u)=>{t($n,o),t(er,o,l,u)};return{addToLeft:()=>{const o=n.modelValue.slice();e.rightChecked.forEach(l=>{const u=o.indexOf(l);u>-1&&o.splice(u,1)}),r(o,"left",e.rightChecked)},addToRight:()=>{let o=n.modelValue.slice();const l=n.data.filter(u=>{const c=u[i.value.key];return e.leftChecked.includes(c)&&!n.modelValue.includes(c)}).map(u=>u[i.value.key]);o=n.targetOrder==="unshift"?l.concat(o):o.concat(l),n.targetOrder==="original"&&(o=n.data.filter(u=>o.includes(u[i.value.key])).map(u=>u[i.value.key])),r(o,"right",e.leftChecked)}}},lBe=(n,e)=>({onSourceCheckedChange:(r,s)=>{n.leftChecked=r,s&&e(Ere,r,s)},onTargetCheckedChange:(r,s)=>{n.rightChecked=r,s&&e(Mre,r,s)}}),uBe=Ne({name:"ElTransfer"}),cBe=Ne({...uBe,props:Qy,emits:eBe,setup(n,{expose:e,emit:t}){const i=n,r=Ls(),{t:s}=wi(),a=Rt("transfer"),{formItem:o}=to(),l=Ui({leftChecked:[],rightChecked:[]}),u=xT(i),{sourceData:c,targetData:d}=aBe(i),{onSourceCheckedChange:f,onTargetCheckedChange:h}=lBe(l,t),{addToLeft:p,addToRight:m}=oBe(i,l,t),g=ae(),v=ae(),_=T=>{switch(T){case"left":g.value.query="";break;case"right":v.value.query="";break}},y=W(()=>i.buttonTexts.length===2),b=W(()=>i.titles[0]||s("el.transfer.titles.0")),x=W(()=>i.titles[1]||s("el.transfer.titles.1")),w=W(()=>i.filterPlaceholder||s("el.transfer.filterPlaceholder"));St(()=>i.modelValue,()=>{var T;i.validateEvent&&((T=o==null?void 0:o.validate)==null||T.call(o,"change").catch(C=>void 0))});const A=W(()=>T=>{var C;if(i.renderContent)return i.renderContent(ln,T);const E=(((C=r.default)==null?void 0:C.call(r,{option:T}))||[]).filter(I=>I.type!==wo);return E.length?E:ln("span",T[u.value.label]||T[u.value.key])});return e({clearQuery:_,leftPanel:g,rightPanel:v}),(T,C)=>(j(),_e("div",{class:ee(S(a).b())},[he(rG,{ref_key:"leftPanel",ref:g,data:S(c),"option-render":S(A),placeholder:S(w),title:S(b),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,"default-checked":T.leftDefaultChecked,props:i.props,onCheckedChange:S(f)},{empty:Ae(()=>[at(T.$slots,"left-empty")]),default:Ae(()=>[at(T.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),Te("div",{class:ee(S(a).e("buttons"))},[he(S(_a),{type:"primary",class:ee([S(a).e("button"),S(a).is("with-texts",S(y))]),disabled:S(eu)(l.rightChecked),onClick:S(p)},{default:Ae(()=>[he(S(rn),null,{default:Ae(()=>[he(S(t0))]),_:1}),S(Xi)(T.buttonTexts[0])?ot("v-if",!0):(j(),_e("span",{key:0},Lt(T.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),he(S(_a),{type:"primary",class:ee([S(a).e("button"),S(a).is("with-texts",S(y))]),disabled:S(eu)(l.leftChecked),onClick:S(m)},{default:Ae(()=>[S(Xi)(T.buttonTexts[1])?ot("v-if",!0):(j(),_e("span",{key:0},Lt(T.buttonTexts[1]),1)),he(S(rn),null,{default:Ae(()=>[he(S(Qo))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),he(rG,{ref_key:"rightPanel",ref:v,data:S(d),"option-render":S(A),placeholder:S(w),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,title:S(x),"default-checked":T.rightDefaultChecked,props:i.props,onCheckedChange:S(h)},{empty:Ae(()=>[at(T.$slots,"right-empty")]),default:Ae(()=>[at(T.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var dBe=Vt(cBe,[["__file","transfer.vue"]]);const fBe=Nn(dBe),O1="$treeNodeId",sG=function(n,e){!e||e[O1]||Object.defineProperty(e,O1,{value:n.id,enumerable:!1,configurable:!1,writable:!1})},p7=function(n,e){return n?e[n]:e[O1]},e8=(n,e,t)=>{const i=n.value.currentNode;t();const r=n.value.currentNode;i!==r&&e("current-change",r?r.data:null,r)},t8=n=>{let e=!0,t=!0,i=!0;for(let r=0,s=n.length;r<s;r++){const a=n[r];(a.checked!==!0||a.indeterminate)&&(e=!1,a.disabled||(i=!1)),(a.checked!==!1||a.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},Tx=function(n){if(n.childNodes.length===0||n.loading)return;const{all:e,none:t,half:i}=t8(n.childNodes);e?(n.checked=!0,n.indeterminate=!1):i?(n.checked=!1,n.indeterminate=!0):t&&(n.checked=!1,n.indeterminate=!1);const r=n.parent;!r||r.level===0||n.store.checkStrictly||Tx(r)},nA=function(n,e){const t=n.store.props,i=n.data||{},r=t[e];if(pn(r))return r(i,n);if(un(r))return i[r];if(Xi(r)){const s=i[e];return s===void 0?"":s}};let hBe=0,n8=class EM{constructor(e){this.id=hBe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Ai(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const s=nA(this,"isLeaf");fr(s)&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&!this.isLeafByUser&&this.expand(),Bt(this.data)||sG(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,r=e.key;r&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),r&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Bt(e)||sG(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Bt(this.data)?t=this.data:t=nA(this,"children")||[];for(let i=0,r=t.length;i<r;i++)this.insertChild({data:t[i]})}get label(){return nA(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return nA(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof EM)){if(!i){const r=this.getChildren(!0);r.includes(e.data)||(Xi(t)||t<0?r.push(e.data):r.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Ui(new EM(e)),e instanceof EM&&e.initialize()}e.level=this.level+1,Xi(t)||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const r=this.childNodes.indexOf(e);r>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(r,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let r=this.parent;for(;r.level>0;)r.expanded=!0,r=r.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(r=>{r.canFocus=!0})};this.shouldLoadData()?this.loadData(r=>{Bt(r)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Tx(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,r){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:a,allWithoutDisable:o}=t8(this.childNodes);!this.isLeaf&&!a&&o&&(this.checked=!1,e=!1);const l=()=>{if(t){const u=this.childNodes;for(let f=0,h=u.length;f<h;f++){const p=u[f];r=r||e!==!1;const m=p.disabled?p.checked:r;p.setChecked(m,t,!0,r)}const{half:c,all:d}=t8(u);d||(this.checked=d,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Tx(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||i||Tx(s)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let r="children";return i&&(r=i.children||"children"),t[r]===void 0&&(t[r]=null),e&&!t[r]&&(t[r]=[]),t[r]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(s=>s.data),i={},r=[];e.forEach((s,a)=>{const o=s[O1];!!o&&t.findIndex(u=>u[O1]===o)>=0?i[o]={index:a,data:s}:r.push({index:a,data:s})}),this.store.lazy||t.forEach(s=>{i[s[O1]]||this.removeChildByData(s)}),r.forEach(({index:s,data:a})=>{this.insertChild({data:a},s)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=s=>{this.childNodes=[],this.doCreateChildren(s,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)},r=()=>{this.loading=!1};this.store.load(this,i,r)}else e&&e.call(this)}eachNode(e){const t=[this];for(;t.length;){const i=t.shift();t.unshift(...i.childNodes),e(i)}}reInitChecked(){this.store.checkStrictly||Tx(this)}};class pBe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Ai(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new n8({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,r=function(s){const a=s.root?s.root.childNodes:s.childNodes;if(a.forEach(o=>{o.visible=t.call(o,e,o.data,o),r(o)}),!s.visible&&a.length){let o=!0;o=!a.some(l=>l.visible),s.root?s.root.visible=o===!1:s.visible=o===!1}e&&s.visible&&!s.isLeaf&&(!i||s.loaded)&&s.expand()};r(this)}setData(e){e!==this.root.data?(this.nodesMap={},this.root.setData(e),this._initDefaultCheckedNodes(),this.setCurrentNodeKey(this.currentNodeKey)):this.root.updateChildren()}getNode(e){if(e instanceof n8)return e;const t=Yn(e)?p7(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=kg(t)?this.root:this.getNode(t);i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const r=t[i];r&&r.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(i=>{this.deregisterNode(i)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],r=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&i.push(o.data),r(o)})};return r(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(s=>{s.indeterminate&&e.push(s.data),t(s)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)Ai(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const r=i.childNodes;for(let s=r.length-1;s>=0;s--){const a=r[s];this.remove(a.data)}for(let s=0,a=t.length;s<a;s++){const o=t[s];this.append(o,i.data)}}_setCheckedKeys(e,t=!1,i){const r=this._getAllNodes().sort((l,u)=>l.level-u.level),s=Object.create(null),a=Object.keys(i);r.forEach(l=>l.setChecked(!1,!1));const o=l=>{l.childNodes.forEach(u=>{var c;s[u.data[e]]=!0,(c=u.childNodes)!=null&&c.length&&o(u)})};for(let l=0,u=r.length;l<u;l++){const c=r[l],d=c.data[e].toString();if(!a.includes(d)){c.checked&&!s[d]&&c.setChecked(!1,!1);continue}if(c.childNodes.length&&o(c),c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),t){c.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(g=>{g.isLeaf||g.setChecked(!1,!1),h(g)})};h(c)}}}setCheckedNodes(e,t=!1){const i=this.key,r={};e.forEach(s=>{r[(s||{})[i]]=!0}),this._setCheckedKeys(i,t,r)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,r={};e.forEach(s=>{r[s]=!0}),this._setCheckedKeys(i,t,r)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const r=this.getNode(e);r&&r.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],r=this.nodesMap[i];this.setCurrentNode(r),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(this.currentNodeKey=e,e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const mBe=Ne({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(n){const e=Rt("tree"),t=Zt("NodeInstance"),i=Zt("RootTree");return()=>{const r=n.node,{data:s,store:a}=r;return n.renderContent?n.renderContent(ln,{_self:t,node:r,data:s,store:a}):at(i.ctx.slots,"default",{node:r,data:s},()=>[ln("span",{class:e.be("node","label")},[r.label])])}}});var gBe=Vt(mBe,[["__file","tree-node-content.vue"]]);function Ire(n){const e=Zt("TreeNodeMap",null),t={treeNodeExpand:i=>{n.node!==i&&n.node.collapse()},children:[]};return e&&e.children.push(t),ui("TreeNodeMap",t),{broadcastExpanded:i=>{if(n.accordion)for(const r of t.children)r.treeNodeExpand(i)}}}const Dre=Symbol("dragEvents");function vBe({props:n,ctx:e,el$:t,dropIndicator$:i,store:r}){const s=Rt("tree"),a=ae({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return ui(Dre,{treeNodeDragStart:({event:c,treeNode:d})=>{if(pn(n.allowDrag)&&!n.allowDrag(d.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch{}a.value.draggingNode=d,e.emit("node-drag-start",d.node,c)},treeNodeDragOver:({event:c,treeNode:d})=>{const f=d,h=a.value.dropNode;h&&h.node.id!==f.node.id&&To(h.$el,s.is("drop-inner"));const p=a.value.draggingNode;if(!p||!f)return;let m=!0,g=!0,v=!0,_=!0;pn(n.allowDrop)&&(m=n.allowDrop(p.node,f.node,"prev"),_=g=n.allowDrop(p.node,f.node,"inner"),v=n.allowDrop(p.node,f.node,"next")),c.dataTransfer.dropEffect=g||m||v?"move":"none",(m||g||v)&&(h==null?void 0:h.node.id)!==f.node.id&&(h&&e.emit("node-drag-leave",p.node,h.node,c),e.emit("node-drag-enter",p.node,f.node,c)),m||g||v?a.value.dropNode=f:a.value.dropNode=null,f.node.nextSibling===p.node&&(v=!1),f.node.previousSibling===p.node&&(m=!1),f.node.contains(p.node,!1)&&(g=!1),(p.node===f.node||p.node.contains(f.node))&&(m=!1,g=!1,v=!1);const y=f.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),b=t.value.getBoundingClientRect();let x;const w=m?g?.25:v?.45:1:-1,A=v?g?.75:m?.55:0:1;let T=-9999;const C=c.clientY-y.top;C<y.height*w?x="before":C>y.height*A?x="after":g?x="inner":x="none";const E=f.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),I=i.value;x==="before"?T=E.top-b.top:x==="after"&&(T=E.bottom-b.top),I.style.top=`${T}px`,I.style.left=`${E.right-b.left}px`,x==="inner"?$u(f.$el,s.is("drop-inner")):To(f.$el,s.is("drop-inner")),a.value.showDropIndicator=x==="before"||x==="after",a.value.allowDrop=a.value.showDropIndicator||_,a.value.dropType=x,e.emit("node-drag-over",p.node,f.node,c)},treeNodeDragEnd:c=>{const{draggingNode:d,dropType:f,dropNode:h}=a.value;if(c.preventDefault(),c.dataTransfer&&(c.dataTransfer.dropEffect="move"),d&&h){const p={data:d.node.data};f!=="none"&&d.node.remove(),f==="before"?h.node.parent.insertBefore(p,h.node):f==="after"?h.node.parent.insertAfter(p,h.node):f==="inner"&&h.node.insertChild(p),f!=="none"&&(r.value.registerNode(p),r.value.key&&d.node.eachNode(m=>{var g;(g=r.value.nodesMap[m.data[r.value.key]])==null||g.setChecked(m.checked,!r.value.checkStrictly)})),To(h.$el,s.is("drop-inner")),e.emit("node-drag-end",d.node,h.node,f,c),f!=="none"&&e.emit("node-drop",d.node,h.node,f,c)}d&&!h&&e.emit("node-drag-end",d.node,null,f,c),a.value.showDropIndicator=!1,a.value.draggingNode=null,a.value.dropNode=null,a.value.allowDrop=!0}}),{dragState:a}}const yBe=Ne({name:"ElTreeNode",components:{ElCollapseTransition:JI,ElCheckbox:sc,NodeContent:gBe,ElIcon:rn,Loading:$d},props:{node:{type:n8,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(n,e){const t=Rt("tree"),{broadcastExpanded:i}=Ire(n),r=Zt("RootTree"),s=ae(!1),a=ae(!1),o=ae(null),l=ae(null),u=ae(null),c=Zt(Dre),d=Qn();ui("NodeInstance",d),n.node.expanded&&(s.value=!0,a.value=!0);const f=r.props.props.children||"children";St(()=>{const C=n.node.data[f];return C&&[...C]},()=>{n.node.updateChildren()}),St(()=>n.node.indeterminate,C=>{m(n.node.checked,C)}),St(()=>n.node.checked,C=>{m(C,n.node.indeterminate)}),St(()=>n.node.childNodes.length,()=>n.node.reInitChecked()),St(()=>n.node.expanded,C=>{cn(()=>s.value=C),C&&(a.value=!0)});const h=C=>p7(r.props.nodeKey,C.data),p=C=>{const E=n.props.class;if(!E)return{};let I;if(pn(E)){const{data:k}=C;I=E(k,C)}else I=E;return un(I)?{[I]:!0}:I},m=(C,E)=>{(o.value!==C||l.value!==E)&&r.ctx.emit("check-change",n.node.data,C,E),o.value=C,l.value=E},g=C=>{e8(r.store,r.ctx.emit,()=>{var E;if((E=r==null?void 0:r.props)==null?void 0:E.nodeKey){const k=h(n.node);r.store.value.setCurrentNodeKey(k)}else r.store.value.setCurrentNode(n.node)}),r.currentNode.value=n.node,r.props.expandOnClickNode&&_(),r.props.checkOnClickNode&&!n.node.disabled&&y(null,{target:{checked:!n.node.checked}}),r.ctx.emit("node-click",n.node.data,n.node,d,C)},v=C=>{r.instance.vnode.props.onNodeContextmenu&&(C.stopPropagation(),C.preventDefault()),r.ctx.emit("node-contextmenu",C,n.node.data,n.node,d)},_=()=>{n.node.isLeaf||(s.value?(r.ctx.emit("node-collapse",n.node.data,n.node,d),n.node.collapse()):n.node.expand(()=>{e.emit("node-expand",n.node.data,n.node,d)}))},y=(C,E)=>{n.node.setChecked(E.target.checked,!r.props.checkStrictly),cn(()=>{const I=r.store.value;r.ctx.emit("check",n.node.data,{checkedNodes:I.getCheckedNodes(),checkedKeys:I.getCheckedKeys(),halfCheckedNodes:I.getHalfCheckedNodes(),halfCheckedKeys:I.getHalfCheckedKeys()})})};return{ns:t,node$:u,tree:r,expanded:s,childNodeRendered:a,oldChecked:o,oldIndeterminate:l,getNodeKey:h,getNodeClass:p,handleSelectChange:m,handleClick:g,handleContextMenu:v,handleExpandIconClick:_,handleCheckChange:y,handleChildNodeExpand:(C,E,I)=>{i(E),r.ctx.emit("node-expand",C,E,I)},handleDragStart:C=>{r.props.draggable&&c.treeNodeDragStart({event:C,treeNode:n})},handleDragOver:C=>{C.preventDefault(),r.props.draggable&&c.treeNodeDragOver({event:C,treeNode:{$el:u.value,node:n.node}})},handleDrop:C=>{C.preventDefault()},handleDragEnd:C=>{r.props.draggable&&c.treeNodeDragEnd(C)},CaretRight:nte}}});function _Be(n,e,t,i,r,s){const a=Ht("el-icon"),o=Ht("el-checkbox"),l=Ht("loading"),u=Ht("node-content"),c=Ht("el-tree-node"),d=Ht("el-collapse-transition");return Vn((j(),_e("div",{ref:"node$",class:ee([n.ns.b("node"),n.ns.is("expanded",n.expanded),n.ns.is("current",n.node.isCurrent),n.ns.is("hidden",!n.node.visible),n.ns.is("focusable",!n.node.disabled),n.ns.is("checked",!n.node.disabled&&n.node.checked),n.getNodeClass(n.node)]),role:"treeitem",tabindex:"-1","aria-expanded":n.expanded,"aria-disabled":n.node.disabled,"aria-checked":n.node.checked,draggable:n.tree.props.draggable,"data-key":n.getNodeKey(n.node),onClick:wn(n.handleClick,["stop"]),onContextmenu:n.handleContextMenu,onDragstart:wn(n.handleDragStart,["stop"]),onDragover:wn(n.handleDragOver,["stop"]),onDragend:wn(n.handleDragEnd,["stop"]),onDrop:wn(n.handleDrop,["stop"])},[Te("div",{class:ee(n.ns.be("node","content")),style:Jt({paddingLeft:(n.node.level-1)*n.tree.props.indent+"px"})},[n.tree.props.icon||n.CaretRight?(j(),gt(a,{key:0,class:ee([n.ns.be("node","expand-icon"),n.ns.is("leaf",n.node.isLeaf),{expanded:!n.node.isLeaf&&n.expanded}]),onClick:wn(n.handleExpandIconClick,["stop"])},{default:Ae(()=>[(j(),gt(ei(n.tree.props.icon||n.CaretRight)))]),_:1},8,["class","onClick"])):ot("v-if",!0),n.showCheckbox?(j(),gt(o,{key:1,"model-value":n.node.checked,indeterminate:n.node.indeterminate,disabled:!!n.node.disabled,onClick:wn(()=>{},["stop"]),onChange:n.handleCheckChange},null,8,["model-value","indeterminate","disabled","onClick","onChange"])):ot("v-if",!0),n.node.loading?(j(),gt(a,{key:2,class:ee([n.ns.be("node","loading-icon"),n.ns.is("loading")])},{default:Ae(()=>[he(l)]),_:1},8,["class"])):ot("v-if",!0),he(u,{node:n.node,"render-content":n.renderContent},null,8,["node","render-content"])],6),he(d,null,{default:Ae(()=>[!n.renderAfterExpand||n.childNodeRendered?Vn((j(),_e("div",{key:0,class:ee(n.ns.be("node","children")),role:"group","aria-expanded":n.expanded},[(j(!0),_e(an,null,ti(n.node.childNodes,f=>(j(),gt(c,{key:n.getNodeKey(f),"render-content":n.renderContent,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,node:f,accordion:n.accordion,props:n.props,onNodeExpand:n.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,["aria-expanded"])),[[Oi,n.expanded]]):ot("v-if",!0)]),_:1})],42,["aria-expanded","aria-disabled","aria-checked","draggable","data-key","onClick","onContextmenu","onDragstart","onDragover","onDragend","onDrop"])),[[Oi,n.node.visible]])}var bBe=Vt(yBe,[["render",_Be],["__file","tree-node.vue"]]);function SBe({el$:n},e){const t=Rt("tree"),i=Ji([]),r=Ji([]);Ln(()=>{a()}),fc(()=>{i.value=Array.from(n.value.querySelectorAll("[role=treeitem]")),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"))}),St(r,o=>{o.forEach(l=>{l.setAttribute("tabindex","-1")})}),Yi(n,"keydown",o=>{const l=o.target;if(!l.className.includes(t.b("node")))return;const u=o.code;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const c=i.value.indexOf(l);let d;if([Kt.up,Kt.down].includes(u)){if(o.preventDefault(),u===Kt.up){d=c===-1?0:c!==0?c-1:i.value.length-1;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d--,d===h){d=-1;break}d<0&&(d=i.value.length-1)}}else{d=c===-1?0:c<i.value.length-1?c+1:0;const h=d;for(;!e.value.getNode(i.value[d].dataset.key).canFocus;){if(d++,d===h){d=-1;break}d>=i.value.length&&(d=0)}}d!==-1&&i.value[d].focus()}[Kt.left,Kt.right].includes(u)&&(o.preventDefault(),l.click());const f=l.querySelector('[type="checkbox"]');[Kt.enter,Kt.numpadEnter,Kt.space].includes(u)&&f&&(o.preventDefault(),f.click())});const a=()=>{var o;i.value=Array.from(n.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),r.value=Array.from(n.value.querySelectorAll("input[type=checkbox]"));const l=n.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(l.length){l[0].setAttribute("tabindex","0");return}(o=i.value[0])==null||o.setAttribute("tabindex","0")}}const xBe=Ne({name:"ElTree",components:{ElTreeNode:bBe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:nr}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(n,e){const{t}=wi(),i=Rt("tree"),r=Zt(gb,null),s=ae(new pBe({key:n.nodeKey,data:n.data,lazy:n.lazy,props:n.props,load:n.load,currentNodeKey:n.currentNodeKey,checkStrictly:n.checkStrictly,checkDescendants:n.checkDescendants,defaultCheckedKeys:n.defaultCheckedKeys,defaultExpandedKeys:n.defaultExpandedKeys,autoExpandParent:n.autoExpandParent,defaultExpandAll:n.defaultExpandAll,filterNodeMethod:n.filterNodeMethod}));s.value.initialize();const a=ae(s.value.root),o=ae(null),l=ae(null),u=ae(null),{broadcastExpanded:c}=Ire(n),{dragState:d}=vBe({props:n,ctx:e,el$:l,dropIndicator$:u,store:s});SBe({el$:l},s);const f=W(()=>{const{childNodes:H}=a.value,F=r?r.hasFilteredOptions!==0:!1;return(!H||H.length===0||H.every(({visible:X})=>!X))&&!F});St(()=>n.currentNodeKey,H=>{s.value.setCurrentNodeKey(H)}),St(()=>n.defaultCheckedKeys,H=>{s.value.setDefaultCheckedKey(H)}),St(()=>n.defaultExpandedKeys,H=>{s.value.setDefaultExpandedKeys(H)}),St(()=>n.data,H=>{s.value.setData(H)},{deep:!0}),St(()=>n.checkStrictly,H=>{s.value.checkStrictly=H});const h=H=>{if(!n.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(H)},p=H=>p7(n.nodeKey,H.data),m=H=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const F=s.value.getNode(H);if(!F)return[];const X=[F.data];let te=F.parent;for(;te&&te!==a.value;)X.push(te.data),te=te.parent;return X.reverse()},g=(H,F)=>s.value.getCheckedNodes(H,F),v=H=>s.value.getCheckedKeys(H),_=()=>{const H=s.value.getCurrentNode();return H?H.data:null},y=()=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const H=_();return H?H[n.nodeKey]:null},b=(H,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(H,F)},x=(H,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(H,F)},w=(H,F,X)=>{s.value.setChecked(H,F,X)},A=()=>s.value.getHalfCheckedNodes(),T=()=>s.value.getHalfCheckedKeys(),C=(H,F=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");e8(s,e.emit,()=>{c(H),s.value.setUserCurrentNode(H,F)})},E=(H,F=!0)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");e8(s,e.emit,()=>{c(),s.value.setCurrentNodeKey(H,F)})},I=H=>s.value.getNode(H),k=H=>{s.value.remove(H)},O=(H,F)=>{s.value.append(H,F)},U=(H,F)=>{s.value.insertBefore(H,F)},z=(H,F)=>{s.value.insertAfter(H,F)},L=(H,F,X)=>{c(F),e.emit("node-expand",H,F,X)},G=(H,F)=>{if(!n.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(H,F)};return ui("RootTree",{ctx:e,props:n,store:s,root:a,currentNode:o,instance:Qn()}),ui(Gd,void 0),{ns:i,store:s,root:a,currentNode:o,dragState:d,el$:l,dropIndicator$:u,isEmpty:f,filter:h,getNodeKey:p,getNodePath:m,getCheckedNodes:g,getCheckedKeys:v,getCurrentNode:_,getCurrentKey:y,setCheckedNodes:b,setCheckedKeys:x,setChecked:w,getHalfCheckedNodes:A,getHalfCheckedKeys:T,setCurrentNode:C,setCurrentKey:E,t,getNode:I,remove:k,append:O,insertBefore:U,insertAfter:z,handleNodeExpand:L,updateKeyChildren:G}}});function wBe(n,e,t,i,r,s){const a=Ht("el-tree-node");return j(),_e("div",{ref:"el$",class:ee([n.ns.b(),n.ns.is("dragging",!!n.dragState.draggingNode),n.ns.is("drop-not-allow",!n.dragState.allowDrop),n.ns.is("drop-inner",n.dragState.dropType==="inner"),{[n.ns.m("highlight-current")]:n.highlightCurrent}]),role:"tree"},[(j(!0),_e(an,null,ti(n.root.childNodes,o=>(j(),gt(a,{key:n.getNodeKey(o),node:o,props:n.props,accordion:n.accordion,"render-after-expand":n.renderAfterExpand,"show-checkbox":n.showCheckbox,"render-content":n.renderContent,onNodeExpand:n.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),n.isEmpty?(j(),_e("div",{key:0,class:ee(n.ns.e("empty-block"))},[at(n.$slots,"empty",{},()=>{var o;return[Te("span",{class:ee(n.ns.e("empty-text"))},Lt((o=n.emptyText)!=null?o:n.t("el.tree.emptyText")),3)]})],2)):ot("v-if",!0),Vn(Te("div",{ref:"dropIndicator$",class:ee(n.ns.e("drop-indicator"))},null,2),[[Oi,n.dragState.showDropIndicator]])],2)}var TBe=Vt(xBe,[["render",wBe],["__file","tree.vue"]]);const V3=Nn(TBe),CBe=(n,{attrs:e,emit:t},{select:i,tree:r,key:s})=>{const a=Rt("tree-select");return St(()=>n.data,()=>{n.filterable&&cn(()=>{var l,u;(u=r.value)==null||u.filter((l=i.value)==null?void 0:l.states.inputValue)})},{flush:"post"}),{...Nc(js(n),Object.keys(Ng.props)),...e,"onUpdate:modelValue":l=>t($n,l),valueKey:s,popperClass:W(()=>{const l=[a.e("popper")];return n.popperClass&&l.push(n.popperClass),l.join(" ")}),filterMethod:(l="")=>{var u;n.filterMethod?n.filterMethod(l):n.remoteMethod?n.remoteMethod(l):(u=r.value)==null||u.filter(l)}}},ABe=Ne({extends:I3,setup(n,e){const t=I3.setup(n,e);delete t.selectOptionClick;const i=Qn().proxy;return cn(()=>{t.select.states.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),St(()=>e.attrs.visible,r=>{t.states.visible=r},{immediate:!0}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function i8(n){return n||n===0}function m7(n){return Bt(n)&&n.length}function zv(n){return Bt(n)?n:i8(n)?[n]:[]}function MM(n,e,t,i,r){for(let s=0;s<n.length;s++){const a=n[s];if(e(a,s,n,r))return i?i(a,s,n,r):a;{const o=t(a);if(m7(o)){const l=MM(o,e,t,i,a);if(l)return l}}}}function IM(n,e,t,i){for(let r=0;r<n.length;r++){const s=n[r];e(s,r,n,i);const a=t(s);m7(a)&&IM(a,e,t,s)}}const EBe=(n,{attrs:e,slots:t,emit:i},{select:r,tree:s,key:a})=>{St(()=>n.modelValue,()=>{n.showCheckbox&&cn(()=>{const f=s.value;f&&!La(f.getCheckedKeys(),zv(n.modelValue))&&f.setCheckedKeys(zv(n.modelValue))})},{immediate:!0,deep:!0});const o=W(()=>({value:a.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...n.props})),l=(f,h)=>{var p;const m=o.value[f];return pn(m)?m(h,(p=s.value)==null?void 0:p.getNode(l("value",h))):h[m]},u=zv(n.modelValue).map(f=>MM(n.data||[],h=>l("value",h)===f,h=>l("children",h),(h,p,m,g)=>g&&l("value",g))).filter(f=>i8(f)),c=W(()=>{if(!n.renderAfterExpand&&!n.lazy)return[];const f=[];return IM(n.data.concat(n.cacheData),h=>{const p=l("value",h);f.push({value:p,currentLabel:l("label",h),isDisabled:l("disabled",h)})},h=>l("children",h)),f}),d=()=>{var f;return(f=s.value)==null?void 0:f.getCheckedKeys().filter(h=>{var p;const m=(p=s.value)==null?void 0:p.getNode(h);return!na(m)&&eu(m.childNodes)})};return{...Nc(js(n),Object.keys(V3.props)),...e,nodeKey:a,expandOnClickNode:W(()=>!n.checkStrictly&&n.expandOnClickNode),defaultExpandedKeys:W(()=>n.defaultExpandedKeys?n.defaultExpandedKeys.concat(u):u),renderContent:(f,{node:h,data:p,store:m})=>f(ABe,{value:l("value",p),label:l("label",p),disabled:l("disabled",p),visible:h.visible},n.renderContent?()=>n.renderContent(f,{node:h,data:p,store:m}):t.default?()=>t.default({node:h,data:p,store:m}):void 0),filterNodeMethod:(f,h,p)=>n.filterNodeMethod?n.filterNodeMethod(f,h,p):f?new RegExp(AF(f),"i").test(l("label",h)||""):!0,onNodeClick:(f,h,p)=>{var m,g,v,_;if((m=e.onNodeClick)==null||m.call(e,f,h,p),!(n.showCheckbox&&n.checkOnClickNode)){if(!n.showCheckbox&&(n.checkStrictly||h.isLeaf)){if(!l("disabled",f)){const y=(g=r.value)==null?void 0:g.states.options.get(l("value",f));(v=r.value)==null||v.handleOptionSelect(y)}}else n.expandOnClickNode&&p.proxy.handleExpandIconClick();(_=r.value)==null||_.focus()}},onCheck:(f,h)=>{var p;if(!n.showCheckbox)return;const m=l("value",f),g={};IM([s.value.store.root],b=>g[b.key]=b,b=>b.childNodes);const v=h.checkedKeys,_=n.multiple?zv(n.modelValue).filter(b=>!(b in g)&&!v.includes(b)):[],y=_.concat(v);if(n.checkStrictly)i($n,n.multiple?y:y.includes(m)?m:void 0);else if(n.multiple){const b=d();i($n,_.concat(b))}else{const b=MM([f],A=>!m7(l("children",A))&&!l("disabled",A),A=>l("children",A)),x=b?l("value",b):void 0,w=i8(n.modelValue)&&!!MM([f],A=>l("value",A)===n.modelValue,A=>l("children",A));i($n,x===n.modelValue||w?void 0:x)}cn(()=>{var b;const x=zv(n.modelValue);s.value.setCheckedKeys(x),(b=e.onCheck)==null||b.call(e,f,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})}),(p=r.value)==null||p.focus()},onNodeExpand:(f,h,p)=>{var m;(m=e.onNodeExpand)==null||m.call(e,f,h,p),cn(()=>{if(!n.checkStrictly&&n.lazy&&n.multiple&&h.checked){const g={},v=s.value.getCheckedKeys();IM([s.value.store.root],b=>g[b.key]=b,b=>b.childNodes);const _=zv(n.modelValue).filter(b=>!(b in g)&&!v.includes(b)),y=d();i($n,_.concat(y))}})},cacheOptions:c}};var MBe=Ne({props:{data:{type:Array,default:()=>[]}},setup(n){const e=Zt(gb);return St(()=>n.data,()=>{var t;n.data.forEach(r=>{e.states.cachedOptions.has(r.value)||e.states.cachedOptions.set(r.value,r)});const i=((t=e.selectRef)==null?void 0:t.querySelectorAll("input"))||[];xi&&!Array.from(i).includes(document.activeElement)&&e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const IBe=Ne({name:"ElTreeSelect",inheritAttrs:!1,props:{...Ng.props,...V3.props,cacheData:{type:Array,default:()=>[]}},setup(n,e){const{slots:t,expose:i}=e,r=ae(),s=ae(),a=W(()=>n.nodeKey||n.valueKey||"value"),o=CBe(n,e,{select:r,tree:s,key:a}),{cacheOptions:l,...u}=EBe(n,e,{select:r,tree:s,key:a}),c=Ui({});return i(c),Ln(()=>{Object.assign(c,{...Nc(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...Nc(r.value,["focus","blur","selectedLabel"])})}),()=>ln(Ng,Ui({...o,ref:d=>r.value=d}),{...t,default:()=>[ln(MBe,{data:l.value}),ln(V3,Ui({...u,ref:d=>s.value=d}))]})}});var DBe=Vt(IBe,[["__file","tree-select.vue"]]);const RBe=Nn(DBe),g7=Symbol(),PBe={key:-1,level:-1,data:{}};var Cx=(n=>(n.KEY="id",n.LABEL="label",n.CHILDREN="children",n.DISABLED="disabled",n.CLASS="",n))(Cx||{}),r8=(n=>(n.ADD="add",n.DELETE="delete",n))(r8||{});const Rre={type:Number,default:26},kBe=zt({data:{type:et(Array),default:()=>Kr([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:et(Object),default:()=>Kr({children:"children",label:"label",disabled:"disabled",value:"id",class:""})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:et(Array),default:()=>Kr([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:et(Array),default:()=>Kr([])},indent:{type:Number,default:16},itemSize:Rre,icon:{type:nr},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:et([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:et(Function)},perfMode:{type:Boolean,default:!0}}),LBe=zt({node:{type:et(Object),default:()=>Kr(PBe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:Rre}),OBe=zt({node:{type:et(Object),required:!0}}),Pre="node-click",kre="node-drop",Lre="node-expand",Ore="node-collapse",Nre="current-change",Bre="check",Fre="check-change",Ure="node-contextmenu",NBe={[Pre]:(n,e,t)=>n&&e&&t,[kre]:(n,e,t)=>n&&e&&t,[Lre]:(n,e)=>n&&e,[Ore]:(n,e)=>n&&e,[Nre]:(n,e)=>n&&e,[Bre]:(n,e)=>n&&e,[Fre]:(n,e)=>n&&fr(e),[Ure]:(n,e,t)=>n&&e&&t},BBe={click:(n,e)=>!!(n&&e),drop:(n,e)=>!!(n&&e),toggle:n=>!!n,check:(n,e)=>n&&fr(e)};function FBe(n,e){const t=ae(new Set),i=ae(new Set),{emit:r}=Qn();St([()=>e.value,()=>n.defaultCheckedKeys],()=>cn(()=>{_(n.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!n.showCheckbox||n.checkStrictly)return;const{levelTreeNodeMap:y,maxLevel:b}=e.value,x=t.value,w=new Set;for(let A=b-1;A>=1;--A){const T=y.get(A);T&&T.forEach(C=>{const E=C.children;if(E){let I=!0,k=!1;for(const O of E){const U=O.key;if(x.has(U))k=!0;else if(w.has(U)){I=!1,k=!0;break}else I=!1}I?x.add(C.key):k?(w.add(C.key),x.delete(C.key)):(x.delete(C.key),w.delete(C.key))}})}i.value=w},a=y=>t.value.has(y.key),o=y=>i.value.has(y.key),l=(y,b,x=!0,w=!0)=>{const A=t.value,T=(C,E)=>{A[E?r8.ADD:r8.DELETE](C.key);const I=C.children;!n.checkStrictly&&I&&I.forEach(k=>{k.disabled||T(k,E)})};T(y,b),w&&s(),x&&u(y,b)},u=(y,b)=>{const{checkedNodes:x,checkedKeys:w}=p(),{halfCheckedNodes:A,halfCheckedKeys:T}=m();r(Bre,y.data,{checkedKeys:w,checkedNodes:x,halfCheckedKeys:T,halfCheckedNodes:A}),r(Fre,y.data,b)};function c(y=!1){return p(y).checkedKeys}function d(y=!1){return p(y).checkedNodes}function f(){return m().halfCheckedKeys}function h(){return m().halfCheckedNodes}function p(y=!1){const b=[],x=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:w}=e.value;t.value.forEach(A=>{const T=w.get(A);T&&(!y||y&&T.isLeaf)&&(x.push(A),b.push(T.data))})}return{checkedKeys:x,checkedNodes:b}}function m(){const y=[],b=[];if(e!=null&&e.value&&n.showCheckbox){const{treeNodeMap:x}=e.value;i.value.forEach(w=>{const A=x.get(w);A&&(b.push(w),y.push(A.data))})}return{halfCheckedNodes:y,halfCheckedKeys:b}}function g(y){t.value.clear(),i.value.clear(),cn(()=>{_(y)})}function v(y,b){if(e!=null&&e.value&&n.showCheckbox){const x=e.value.treeNodeMap.get(y);x&&l(x,b,!1)}}function _(y){if(e!=null&&e.value){const{treeNodeMap:b}=e.value;if(n.showCheckbox&&b&&(y==null?void 0:y.length)>0){for(const x of y){const w=b.get(x);w&&!a(w)&&l(w,!0,!1,!1)}s()}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:a,isIndeterminate:o,getCheckedKeys:c,getCheckedNodes:d,getHalfCheckedKeys:f,getHalfCheckedNodes:h,setChecked:v,setCheckedKeys:g}}function UBe(n,e){const t=ae(new Set([])),i=ae(new Set([])),r=W(()=>pn(n.filterMethod));function s(o){var l;if(!r.value)return;const u=new Set,c=i.value,d=t.value,f=[],h=((l=e.value)==null?void 0:l.treeNodes)||[],p=n.filterMethod;d.clear();function m(g){g.forEach(v=>{f.push(v),p!=null&&p(o,v.data,v)?f.forEach(y=>{u.add(y.key)}):v.isLeaf&&d.add(v.key);const _=v.children;if(_&&m(_),!v.isLeaf){if(!u.has(v.key))d.add(v.key);else if(_){let y=!0;for(const b of _)if(!d.has(b.key)){y=!1;break}y?c.add(v.key):c.delete(v.key)}}f.pop()})}return m(h),u}function a(o){return i.value.has(o.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:s,isForceHiddenExpandIcon:a}}function zBe(n,e){const t=ae(new Set(n.defaultExpandedKeys)),i=ae(),r=Ji(),s=ae();St(()=>n.currentNodeKey,Q=>{i.value=Q},{immediate:!0}),St(()=>n.data,Q=>{Oe(Q)},{immediate:!0});const{isIndeterminate:a,isChecked:o,toggleCheckbox:l,getCheckedKeys:u,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p}=FBe(n,r),{doFilter:m,hiddenNodeKeySet:g,isForceHiddenExpandIcon:v}=UBe(n,r),_=W(()=>{var Q;return((Q=n.props)==null?void 0:Q.value)||Cx.KEY}),y=W(()=>{var Q;return((Q=n.props)==null?void 0:Q.children)||Cx.CHILDREN}),b=W(()=>{var Q;return((Q=n.props)==null?void 0:Q.disabled)||Cx.DISABLED}),x=W(()=>{var Q;return((Q=n.props)==null?void 0:Q.label)||Cx.LABEL}),w=W(()=>{var Q;const me=t.value,ce=g.value,je=[],Fe=((Q=r.value)==null?void 0:Q.treeNodes)||[],nt=[];for(let We=Fe.length-1;We>=0;--We)nt.push(Fe[We]);for(;nt.length;){const We=nt.pop();if(!ce.has(We.key)&&(je.push(We),We.children&&me.has(We.key)))for(let Ke=We.children.length-1;Ke>=0;--Ke)nt.push(We.children[Ke])}return je}),A=W(()=>w.value.length>0);function T(Q){const me=new Map,ce=new Map;let je=1;function Fe(We,Ke=1,it=void 0){var be;const K=[];for(const ne of We){const Se=I(ne),ze={level:Ke,key:Se,data:ne};ze.label=O(ne),ze.parent=it;const Je=E(ne);ze.disabled=k(ne),ze.isLeaf=!Je||Je.length===0,Je&&Je.length&&(ze.children=Fe(Je,Ke+1,ze)),K.push(ze),me.set(Se,ze),ce.has(Ke)||ce.set(Ke,[]),(be=ce.get(Ke))==null||be.push(ze)}return Ke>je&&(je=Ke),K}const nt=Fe(Q);return{treeNodeMap:me,levelTreeNodeMap:ce,maxLevel:je,treeNodes:nt}}function C(Q){const me=m(Q);me&&(t.value=me)}function E(Q){return Q[y.value]}function I(Q){return Q?Q[_.value]:""}function k(Q){return Q[b.value]}function O(Q){return Q[x.value]}function U(Q){t.value.has(Q.key)?te(Q):X(Q)}function z(Q){const me=new Set,ce=r.value.treeNodeMap;Q.forEach(je=>{let Fe=ce.get(je);for(;Fe&&!me.has(Fe.key);)me.add(Fe.key),Fe=Fe.parent}),t.value=me}function L(Q,me){e(Pre,Q.data,Q,me),H(Q),n.expandOnClickNode&&U(Q),n.showCheckbox&&n.checkOnClickNode&&!Q.disabled&&l(Q,!o(Q),!0)}function G(Q,me){e(kre,Q.data,Q,me)}function H(Q){le(Q)||(i.value=Q.key,e(Nre,Q.data,Q))}function F(Q,me){l(Q,me)}function X(Q){const me=t.value;if(r.value&&n.accordion){const{treeNodeMap:ce}=r.value;me.forEach(je=>{const Fe=ce.get(je);Q&&Q.level===(Fe==null?void 0:Fe.level)&&me.delete(je)})}me.add(Q.key),e(Lre,Q.data,Q)}function te(Q){t.value.delete(Q.key),e(Ore,Q.data,Q)}function re(Q){return t.value.has(Q.key)}function ie(Q){return!!Q.disabled}function le(Q){const me=i.value;return me!==void 0&&me===Q.key}function ge(){var Q,me;if(i.value)return(me=(Q=r.value)==null?void 0:Q.treeNodeMap.get(i.value))==null?void 0:me.data}function pe(){return i.value}function ye(Q){i.value=Q}function Oe(Q){cn(()=>r.value=T(Q))}function Be(Q){var me;const ce=Yn(Q)?I(Q):Q;return(me=r.value)==null?void 0:me.treeNodeMap.get(ce)}function Ye(Q,me="auto"){const ce=Be(Q);ce&&s.value&&s.value.scrollToItem(w.value.indexOf(ce),me)}function Ze(Q){var me;(me=s.value)==null||me.scrollTo(Q)}return{tree:r,flattenTree:w,isNotEmpty:A,listRef:s,getKey:I,getChildren:E,toggleExpand:U,toggleCheckbox:l,isExpanded:re,isChecked:o,isIndeterminate:a,isDisabled:ie,isCurrent:le,isForceHiddenExpandIcon:v,handleNodeClick:L,handleNodeDrop:G,handleNodeCheck:F,getCurrentNode:ge,getCurrentKey:pe,setCurrentKey:ye,getCheckedKeys:u,getCheckedNodes:c,getHalfCheckedKeys:d,getHalfCheckedNodes:f,setChecked:h,setCheckedKeys:p,filter:C,setData:Oe,getNode:Be,expandNode:X,collapseNode:te,setExpandedKeys:z,scrollToNode:Ye,scrollTo:Ze}}var HBe=Ne({name:"ElTreeNodeContent",props:OBe,setup(n){const e=Zt(g7),t=Rt("tree");return()=>{const i=n.node,{data:r}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:r}):ln("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const VBe=Ne({name:"ElTreeNode"}),$Be=Ne({...VBe,props:LBe,emits:BBe,setup(n,{emit:e}){const t=n,i=Zt(g7),r=Rt("tree"),s=W(()=>{var h;return(h=i==null?void 0:i.props.indent)!=null?h:16}),a=W(()=>{var h;return(h=i==null?void 0:i.props.icon)!=null?h:nte}),o=h=>{const p=i==null?void 0:i.props.props.class;if(!p)return{};let m;if(pn(p)){const{data:g}=h;m=p(g,h)}else m=p;return un(m)?{[m]:!0}:m},l=h=>{e("click",t.node,h)},u=h=>{e("drop",t.node,h)},c=()=>{e("toggle",t.node)},d=h=>{e("check",t.node,h)},f=h=>{var p,m,g,v;(g=(m=(p=i==null?void 0:i.instance)==null?void 0:p.vnode)==null?void 0:m.props)!=null&&g.onNodeContextmenu&&(h.stopPropagation(),h.preventDefault()),i==null||i.ctx.emit(Ure,h,(v=t.node)==null?void 0:v.data,t.node)};return(h,p)=>{var m,g,v;return j(),_e("div",{ref:"node$",class:ee([S(r).b("node"),S(r).is("expanded",h.expanded),S(r).is("current",h.current),S(r).is("focusable",!h.disabled),S(r).is("checked",!h.disabled&&h.checked),o(h.node)]),role:"treeitem",tabindex:"-1","aria-expanded":h.expanded,"aria-disabled":h.disabled,"aria-checked":h.checked,"data-key":(m=h.node)==null?void 0:m.key,onClick:wn(l,["stop"]),onContextmenu:f,onDragover:wn(()=>{},["prevent"]),onDragenter:wn(()=>{},["prevent"]),onDrop:wn(u,["stop"])},[Te("div",{class:ee(S(r).be("node","content")),style:Jt({paddingLeft:`${(h.node.level-1)*S(s)}px`,height:h.itemSize+"px"})},[S(a)?(j(),gt(S(rn),{key:0,class:ee([S(r).is("leaf",!!((g=h.node)!=null&&g.isLeaf)),S(r).is("hidden",h.hiddenExpandIcon),{expanded:!((v=h.node)!=null&&v.isLeaf)&&h.expanded},S(r).be("node","expand-icon")]),onClick:wn(c,["stop"])},{default:Ae(()=>[(j(),gt(ei(S(a))))]),_:1},8,["class","onClick"])):ot("v-if",!0),h.showCheckbox?(j(),gt(S(sc),{key:1,"model-value":h.checked,indeterminate:h.indeterminate,disabled:h.disabled,onChange:d,onClick:wn(()=>{},["stop"])},null,8,["model-value","indeterminate","disabled","onClick"])):ot("v-if",!0),he(S(HBe),{node:h.node},null,8,["node"])],6)],42,["aria-expanded","aria-disabled","aria-checked","data-key","onClick","onDragover","onDragenter","onDrop"])}}});var GBe=Vt($Be,[["__file","tree-node.vue"]]);const WBe=Ne({name:"ElTreeV2"}),qBe=Ne({...WBe,props:kBe,emits:NBe,setup(n,{expose:e,emit:t}){const i=n,r=Ls(),s=W(()=>i.itemSize);ui(g7,{ctx:{emit:t,slots:r},props:i,instance:Qn()}),ui(Gd,void 0);const{t:a}=wi(),o=Rt("tree"),{flattenTree:l,isNotEmpty:u,listRef:c,toggleExpand:d,isExpanded:f,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:g,isForceHiddenExpandIcon:v,handleNodeClick:_,handleNodeDrop:y,handleNodeCheck:b,toggleCheckbox:x,getCurrentNode:w,getCurrentKey:A,setCurrentKey:T,getCheckedKeys:C,getCheckedNodes:E,getHalfCheckedKeys:I,getHalfCheckedNodes:k,setChecked:O,setCheckedKeys:U,filter:z,setData:L,getNode:G,expandNode:H,collapseNode:F,setExpandedKeys:X,scrollToNode:te,scrollTo:re}=zBe(i,t);return e({toggleCheckbox:x,getCurrentNode:w,getCurrentKey:A,setCurrentKey:T,getCheckedKeys:C,getCheckedNodes:E,getHalfCheckedKeys:I,getHalfCheckedNodes:k,setChecked:O,setCheckedKeys:U,filter:z,setData:L,getNode:G,expandNode:H,collapseNode:F,setExpandedKeys:X,scrollToNode:te,scrollTo:re}),(ie,le)=>(j(),_e("div",{class:ee([S(o).b(),{[S(o).m("highlight-current")]:ie.highlightCurrent}]),role:"tree"},[S(u)?(j(),gt(S(xie),{key:0,ref_key:"listRef",ref:c,"class-name":S(o).b("virtual-list"),data:S(l),total:S(l).length,height:ie.height,"item-size":S(s),"perf-mode":ie.perfMode},{default:Ae(({data:ge,index:pe,style:ye})=>[(j(),gt(GBe,{key:ge[pe].key,style:Jt(ye),node:ge[pe],expanded:S(f)(ge[pe]),"show-checkbox":ie.showCheckbox,checked:S(p)(ge[pe]),indeterminate:S(h)(ge[pe]),"item-size":S(s),disabled:S(m)(ge[pe]),current:S(g)(ge[pe]),"hidden-expand-icon":S(v)(ge[pe]),onClick:S(_),onToggle:S(d),onCheck:S(b),onDrop:S(y)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck","onDrop"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(j(),_e("div",{key:1,class:ee(S(o).e("empty-block"))},[at(ie.$slots,"empty",{},()=>{var ge;return[Te("span",{class:ee(S(o).e("empty-text"))},Lt((ge=ie.emptyText)!=null?ge:S(a)("el.tree.emptyText")),3)]})],2))],2))}});var jBe=Vt(qBe,[["__file","tree.vue"]]);const KBe=Nn(jBe),zre=Symbol("uploadContextKey"),XBe="ElUpload";class YBe extends Error{constructor(e,t,i,r){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=r}}function aG(n,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${n} ${t.status}`,new YBe(i,t.status,e.method,n)}function QBe(n){const e=n.responseText||n.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const ZBe=n=>{typeof XMLHttpRequest>"u"&&Xs(XBe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=n.action;e.upload&&e.upload.addEventListener("progress",s=>{const a=s;a.percent=s.total>0?s.loaded/s.total*100:0,n.onProgress(a)});const i=new FormData;if(n.data)for(const[s,a]of Object.entries(n.data))Bt(a)&&a.length?i.append(s,...a):i.append(s,a);i.append(n.filename,n.file,n.file.name),e.addEventListener("error",()=>{n.onError(aG(t,n,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return n.onError(aG(t,n,e));n.onSuccess(QBe(e))}),e.open(n.method,t,!0),n.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const r=n.headers||{};if(r instanceof Headers)r.forEach((s,a)=>e.setRequestHeader(a,s));else for(const[s,a]of Object.entries(r))na(a)||e.setRequestHeader(s,String(a));return e.send(i),e},Hre=["text","picture","picture-card"];let JBe=1;const s8=()=>Date.now()+JBe++,Vre=zt({action:{type:String,default:"#"},headers:{type:et(Object)},method:{type:String,default:"post"},data:{type:et([Object,Function,Promise]),default:()=>Kr({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:et(Array),default:()=>Kr([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Hre,default:"text"},httpRequest:{type:et(Function),default:ZBe},disabled:Boolean,limit:Number}),eFe=zt({...Vre,beforeUpload:{type:et(Function),default:qi},beforeRemove:{type:et(Function)},onRemove:{type:et(Function),default:qi},onChange:{type:et(Function),default:qi},onPreview:{type:et(Function),default:qi},onSuccess:{type:et(Function),default:qi},onProgress:{type:et(Function),default:qi},onError:{type:et(Function),default:qi},onExceed:{type:et(Function),default:qi},crossorigin:{type:et(String)}}),tFe=zt({files:{type:et(Array),default:()=>Kr([])},disabled:{type:Boolean,default:!1},handlePreview:{type:et(Function),default:qi},listType:{type:String,values:Hre,default:"text"},crossorigin:{type:et(String)}}),nFe={remove:n=>!!n},iFe=Ne({name:"ElUploadList"}),rFe=Ne({...iFe,props:tFe,emits:nFe,setup(n,{emit:e}){const t=n,{t:i}=wi(),r=Rt("upload"),s=Rt("icon"),a=Rt("list"),o=no(),l=ae(!1),u=W(()=>[r.b("list"),r.bm("list",t.listType),r.is("disabled",t.disabled)]),c=d=>{e("remove",d)};return(d,f)=>(j(),gt($J,{tag:"ul",class:ee(S(u)),name:S(a).b()},{default:Ae(()=>[(j(!0),_e(an,null,ti(d.files,(h,p)=>(j(),_e("li",{key:h.uid||h.name,class:ee([S(r).be("list","item"),S(r).is(h.status),{focusing:l.value}]),tabindex:"0",onKeydown:ur(m=>!S(o)&&c(h),["delete"]),onFocus:m=>l.value=!0,onBlur:m=>l.value=!1,onClick:m=>l.value=!1},[at(d.$slots,"default",{file:h,index:p},()=>[d.listType==="picture"||h.status!=="uploading"&&d.listType==="picture-card"?(j(),_e("img",{key:0,class:ee(S(r).be("list","item-thumbnail")),src:h.url,crossorigin:d.crossorigin,alt:""},null,10,["src","crossorigin"])):ot("v-if",!0),h.status==="uploading"||d.listType!=="picture-card"?(j(),_e("div",{key:1,class:ee(S(r).be("list","item-info"))},[Te("a",{class:ee(S(r).be("list","item-name")),onClick:wn(m=>d.handlePreview(h),["prevent"])},[he(S(rn),{class:ee(S(s).m("document"))},{default:Ae(()=>[he(S(o6))]),_:1},8,["class"]),Te("span",{class:ee(S(r).be("list","item-file-name")),title:h.name},Lt(h.name),11,["title"])],10,["onClick"]),h.status==="uploading"?(j(),gt(S(fie),{key:0,type:d.listType==="picture-card"?"circle":"line","stroke-width":d.listType==="picture-card"?6:2,percentage:Number(h.percentage),style:Jt(d.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):ot("v-if",!0)],2)):ot("v-if",!0),Te("label",{class:ee(S(r).be("list","item-status-label"))},[d.listType==="text"?(j(),gt(S(rn),{key:0,class:ee([S(s).m("upload-success"),S(s).m("circle-check")])},{default:Ae(()=>[he(S(iF))]),_:1},8,["class"])):["picture-card","picture"].includes(d.listType)?(j(),gt(S(rn),{key:1,class:ee([S(s).m("upload-success"),S(s).m("check")])},{default:Ae(()=>[he(S(fT))]),_:1},8,["class"])):ot("v-if",!0)],2),S(o)?ot("v-if",!0):(j(),gt(S(rn),{key:2,class:ee(S(s).m("close")),onClick:m=>c(h)},{default:Ae(()=>[he(S(qc))]),_:2},1032,["class","onClick"])),ot(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),ot(" This is a bug which needs to be fixed "),ot(" TODO: Fix the incorrect navigation interaction "),S(o)?ot("v-if",!0):(j(),_e("i",{key:3,class:ee(S(s).m("close-tip"))},Lt(S(i)("el.upload.deleteTip")),3)),d.listType==="picture-card"?(j(),_e("span",{key:4,class:ee(S(r).be("list","item-actions"))},[Te("span",{class:ee(S(r).be("list","item-preview")),onClick:m=>d.handlePreview(h)},[he(S(rn),{class:ee(S(s).m("zoom-in"))},{default:Ae(()=>[he(S(ste))]),_:1},8,["class"])],10,["onClick"]),S(o)?ot("v-if",!0):(j(),_e("span",{key:0,class:ee(S(r).be("list","item-delete")),onClick:m=>c(h)},[he(S(rn),{class:ee(S(s).m("delete"))},{default:Ae(()=>[he(S(Zxe))]),_:1},8,["class"])],10,["onClick"]))],2)):ot("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),at(d.$slots,"append")]),_:3},8,["class","name"]))}});var oG=Vt(rFe,[["__file","upload-list.vue"]]);const sFe=zt({disabled:{type:Boolean,default:!1}}),aFe={file:n=>Bt(n)},$re="ElUploadDrag",oFe=Ne({name:$re}),lFe=Ne({...oFe,props:sFe,emits:aFe,setup(n,{emit:e}){Zt(zre)||Xs($re,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Rt("upload"),r=ae(!1),s=no(),a=l=>{if(s.value)return;r.value=!1,l.stopPropagation();const u=Array.from(l.dataTransfer.files);e("file",u)},o=()=>{s.value||(r.value=!0)};return(l,u)=>(j(),_e("div",{class:ee([S(i).b("dragger"),S(i).is("dragover",r.value)]),onDrop:wn(a,["prevent"]),onDragover:wn(o,["prevent"]),onDragleave:wn(c=>r.value=!1,["prevent"])},[at(l.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var uFe=Vt(lFe,[["__file","upload-dragger.vue"]]);const cFe=zt({...Vre,beforeUpload:{type:et(Function),default:qi},onRemove:{type:et(Function),default:qi},onStart:{type:et(Function),default:qi},onSuccess:{type:et(Function),default:qi},onProgress:{type:et(Function),default:qi},onError:{type:et(Function),default:qi},onExceed:{type:et(Function),default:qi}}),dFe=Ne({name:"ElUploadContent",inheritAttrs:!1}),fFe=Ne({...dFe,props:cFe,setup(n,{expose:e}){const t=n,i=Rt("upload"),r=no(),s=Ji({}),a=Ji(),o=m=>{if(m.length===0)return;const{autoUpload:g,limit:v,fileList:_,multiple:y,onStart:b,onExceed:x}=t;if(v&&_.length+m.length>v){x(m,_);return}y||(m=m.slice(0,1));for(const w of m){const A=w;A.uid=s8(),b(A),g&&l(A)}},l=async m=>{if(a.value.value="",!t.beforeUpload)return c(m);let g,v={};try{const y=t.data,b=t.beforeUpload(m);v=B2(t.data)?w3(t.data):t.data,g=await b,B2(t.data)&&La(y,v)&&(v=w3(t.data))}catch{g=!1}if(g===!1){t.onRemove(m);return}let _=m;g instanceof Blob&&(g instanceof File?_=g:_=new File([g],m.name,{type:m.type})),c(Object.assign(_,{uid:m.uid}),v)},u=async(m,g)=>pn(m)?m(g):m,c=async(m,g)=>{const{headers:v,data:_,method:y,withCredentials:b,name:x,action:w,onProgress:A,onSuccess:T,onError:C,httpRequest:E}=t;try{g=await u(g??_,m)}catch{t.onRemove(m);return}const{uid:I}=m,k={headers:v||{},withCredentials:b,file:m,data:g,method:y,filename:x,action:w,onProgress:U=>{A(U,m)},onSuccess:U=>{T(U,m),delete s.value[I]},onError:U=>{C(U,m),delete s.value[I]}},O=E(k);s.value[I]=O,O instanceof Promise&&O.then(k.onSuccess,k.onError)},d=m=>{const g=m.target.files;g&&o(Array.from(g))},f=()=>{r.value||(a.value.value="",a.value.click())},h=()=>{f()};return e({abort:m=>{Yee(s.value).filter(m?([v])=>String(m.uid)===v:()=>!0).forEach(([v,_])=>{_ instanceof XMLHttpRequest&&_.abort(),delete s.value[v]})},upload:l}),(m,g)=>(j(),_e("div",{class:ee([S(i).b(),S(i).m(m.listType),S(i).is("drag",m.drag),S(i).is("disabled",S(r))]),tabindex:S(r)?"-1":"0",onClick:f,onKeydown:ur(wn(h,["self"]),["enter","space"])},[m.drag?(j(),gt(uFe,{key:0,disabled:S(r),onFile:o},{default:Ae(()=>[at(m.$slots,"default")]),_:3},8,["disabled"])):at(m.$slots,"default",{key:1}),Te("input",{ref_key:"inputRef",ref:a,class:ee(S(i).e("input")),name:m.name,disabled:S(r),multiple:m.multiple,accept:m.accept,type:"file",onChange:d,onClick:wn(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var lG=Vt(fFe,[["__file","upload-content.vue"]]);const uG="ElUpload",cG=n=>{var e;(e=n.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(n.url)},hFe=(n,e)=>{const t=Vee(n,"fileList",void 0,{passive:!0}),i=h=>t.value.find(p=>p.uid===h.uid);function r(h){var p;(p=e.value)==null||p.abort(h)}function s(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}function a(h){t.value=t.value.filter(p=>p!==h)}const o=(h,p)=>{const m=i(p);m&&(console.error(h),m.status="fail",a(m),n.onError(h,m,t.value),n.onChange(m,t.value))},l=(h,p)=>{const m=i(p);m&&(n.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},u=(h,p)=>{const m=i(p);m&&(m.status="success",m.response=h,n.onSuccess(h,m,t.value),n.onChange(m,t.value))},c=h=>{na(h.uid)&&(h.uid=s8());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(n.listType==="picture-card"||n.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(m){m.message,n.onError(m,p,t.value)}t.value=[...t.value,p],n.onChange(p,t.value)},d=async h=>{const p=h instanceof File?i(h):h;p||Xs(uG,"file to be removed not found");const m=g=>{r(g),a(g),n.onRemove(g,t.value),cG(g)};n.beforeRemove?await n.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function f(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return St(()=>n.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:g}=p;if(!g&&m)try{p.url=URL.createObjectURL(m)}catch(v){n.onError(v,p,t.value)}return p}))}),St(t,h=>{for(const p of h)p.uid||(p.uid=s8()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:r,clearFiles:s,handleError:o,handleProgress:l,handleStart:c,handleSuccess:u,handleRemove:d,submit:f,revokeFileObjectURL:cG}},pFe=Ne({name:"ElUpload"}),mFe=Ne({...pFe,props:eFe,setup(n,{expose:e}){const t=n,i=no(),r=Ji(),{abort:s,submit:a,clearFiles:o,uploadFiles:l,handleStart:u,handleError:c,handleRemove:d,handleSuccess:f,handleProgress:h,revokeFileObjectURL:p}=hFe(t,r),m=W(()=>t.listType==="picture-card"),g=W(()=>({...t,fileList:l.value,onStart:u,onProgress:h,onSuccess:f,onError:c,onRemove:d}));return Vi(()=>{l.value.forEach(p)}),ui(zre,{accept:$i(t,"accept")}),e({abort:s,submit:a,clearFiles:o,handleStart:u,handleRemove:d}),(v,_)=>(j(),_e("div",null,[S(m)&&v.showFileList?(j(),gt(oG,{key:0,disabled:S(i),"list-type":v.listType,files:S(l),crossorigin:v.crossorigin,"handle-preview":v.onPreview,onRemove:S(d)},tc({append:Ae(()=>[he(lG,si({ref_key:"uploadRef",ref:r},S(g)),{default:Ae(()=>[v.$slots.trigger?at(v.$slots,"trigger",{key:0}):ot("v-if",!0),!v.$slots.trigger&&v.$slots.default?at(v.$slots,"default",{key:1}):ot("v-if",!0)]),_:3},16)]),_:2},[v.$slots.file?{name:"default",fn:Ae(({file:y,index:b})=>[at(v.$slots,"file",{file:y,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ot("v-if",!0),!S(m)||S(m)&&!v.showFileList?(j(),gt(lG,si({key:1,ref_key:"uploadRef",ref:r},S(g)),{default:Ae(()=>[v.$slots.trigger?at(v.$slots,"trigger",{key:0}):ot("v-if",!0),!v.$slots.trigger&&v.$slots.default?at(v.$slots,"default",{key:1}):ot("v-if",!0)]),_:3},16)):ot("v-if",!0),v.$slots.trigger?at(v.$slots,"default",{key:2}):ot("v-if",!0),at(v.$slots,"tip"),!S(m)&&v.showFileList?(j(),gt(oG,{key:3,disabled:S(i),"list-type":v.listType,files:S(l),crossorigin:v.crossorigin,"handle-preview":v.onPreview,onRemove:S(d)},tc({_:2},[v.$slots.file?{name:"default",fn:Ae(({file:y,index:b})=>[at(v.$slots,"file",{file:y,index:b})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):ot("v-if",!0)]))}});var gFe=Vt(mFe,[["__file","upload.vue"]]);const vFe=Nn(gFe),yFe=zt({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:et([String,Array]),default:"Element Plus"},font:{type:et(Object)},gap:{type:et(Array),default:()=>[100,100]},offset:{type:et(Array)}});function _Fe(n){return n.replace(/([A-Z])/g,"-$1").toLowerCase()}function bFe(n){return Object.keys(n).map(e=>`${_Fe(e)}: ${n[e]};`).join(" ")}function SFe(){return window.devicePixelRatio||1}const xFe=(n,e)=>{let t=!1;return n.removedNodes.length&&e&&(t=Array.from(n.removedNodes).includes(e)),n.type==="attributes"&&n.target===e&&(t=!0),t},Gre=3;function _P(n,e,t=1){const i=document.createElement("canvas"),r=i.getContext("2d"),s=n*t,a=e*t;return i.setAttribute("width",`${s}px`),i.setAttribute("height",`${a}px`),r.save(),[r,i,s,a]}function wFe(){function n(e,t,i,r,s,a,o,l){const[u,c,d,f]=_P(r,s,i);if(e instanceof HTMLImageElement)u.drawImage(e,0,0,d,f);else{const{color:te,fontSize:re,fontStyle:ie,fontWeight:le,fontFamily:ge,textAlign:pe,textBaseline:ye}=a,Oe=Number(re)*i;u.font=`${ie} normal ${le} ${Oe}px/${s}px ${ge}`,u.fillStyle=te,u.textAlign=pe,u.textBaseline=ye;const Be=Bt(e)?e:[e];Be==null||Be.forEach((Ye,Ze)=>{u.fillText(Ye??"",d/2,Ze*(Oe+Gre*i))})}const h=Math.PI/180*Number(t),p=Math.max(r,s),[m,g,v]=_P(p,p,i);m.translate(v/2,v/2),m.rotate(h),d>0&&f>0&&m.drawImage(c,-d/2,-f/2);function _(te,re){const ie=te*Math.cos(h)-re*Math.sin(h),le=te*Math.sin(h)+re*Math.cos(h);return[ie,le]}let y=0,b=0,x=0,w=0;const A=d/2,T=f/2;[[0-A,0-T],[0+A,0-T],[0+A,0+T],[0-A,0+T]].forEach(([te,re])=>{const[ie,le]=_(te,re);y=Math.min(y,ie),b=Math.max(b,ie),x=Math.min(x,le),w=Math.max(w,le)});const E=y+v/2,I=x+v/2,k=b-y,O=w-x,U=o*i,z=l*i,L=(k+U)*2,G=O+z,[H,F]=_P(L,G);function X(te=0,re=0){H.drawImage(g,E,I,k,O,te,re,k,O)}return X(),X(k+U,-O/2-z/2),X(k+U,+O/2+z/2),[F.toDataURL(),L/i,G/i]}return n}const TFe=Ne({name:"ElWatermark"}),CFe=Ne({...TFe,props:yFe,setup(n){const e=n,t={position:"relative"},i=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.color)!=null?I:"rgba(0,0,0,.15)"}),r=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontSize)!=null?I:16}),s=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontWeight)!=null?I:"normal"}),a=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontStyle)!=null?I:"normal"}),o=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.fontFamily)!=null?I:"sans-serif"}),l=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.textAlign)!=null?I:"center"}),u=W(()=>{var E,I;return(I=(E=e.font)==null?void 0:E.textBaseline)!=null?I:"hanging"}),c=W(()=>e.gap[0]),d=W(()=>e.gap[1]),f=W(()=>c.value/2),h=W(()=>d.value/2),p=W(()=>{var E,I;return(I=(E=e.offset)==null?void 0:E[0])!=null?I:f.value}),m=W(()=>{var E,I;return(I=(E=e.offset)==null?void 0:E[1])!=null?I:h.value}),g=()=>{const E={zIndex:e.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let I=p.value-f.value,k=m.value-h.value;return I>0&&(E.left=`${I}px`,E.width=`calc(100% - ${I}px)`,I=0),k>0&&(E.top=`${k}px`,E.height=`calc(100% - ${k}px)`,k=0),E.backgroundPosition=`${I}px ${k}px`,E},v=Ji(null),_=Ji(),y=ae(!1),b=()=>{_.value&&(_.value.remove(),_.value=void 0)},x=(E,I)=>{var k;v.value&&_.value&&(y.value=!0,_.value.setAttribute("style",bFe({...g(),backgroundImage:`url('${E}')`,backgroundSize:`${Math.floor(I)}px`})),(k=v.value)==null||k.append(_.value),setTimeout(()=>{y.value=!1}))},w=E=>{let I=120,k=64;const O=e.image,U=e.content,z=e.width,L=e.height;if(!O&&E.measureText){E.font=`${Number(r.value)}px ${o.value}`;const G=Bt(U)?U:[U],H=G.map(F=>{const X=E.measureText(F);return[X.width,X.fontBoundingBoxAscent!==void 0?X.fontBoundingBoxAscent+X.fontBoundingBoxDescent:X.actualBoundingBoxAscent+X.actualBoundingBoxDescent]});I=Math.ceil(Math.max(...H.map(F=>F[0]))),k=Math.ceil(Math.max(...H.map(F=>F[1])))*G.length+(G.length-1)*Gre}return[z??I,L??k]},A=wFe(),T=()=>{const I=document.createElement("canvas").getContext("2d"),k=e.image,O=e.content,U=e.rotate;if(I){_.value||(_.value=document.createElement("div"));const z=SFe(),[L,G]=w(I),H=F=>{const[X,te]=A(F||"",U,z,L,G,{color:i.value,fontSize:r.value,fontStyle:a.value,fontWeight:s.value,fontFamily:o.value,textAlign:l.value,textBaseline:u.value},c.value,d.value);x(X,te)};if(k){const F=new Image;F.onload=()=>{H(F)},F.onerror=()=>{H(O)},F.crossOrigin="anonymous",F.referrerPolicy="no-referrer",F.src=k}else H(O)}};return Ln(()=>{T()}),St(()=>e,()=>{T()},{deep:!0,flush:"post"}),Vi(()=>{b()}),Hee(v,E=>{y.value||E.forEach(I=>{xFe(I,_.value)&&(b(),T())})},{attributes:!0,subtree:!0,childList:!0}),(E,I)=>(j(),_e("div",{ref_key:"containerRef",ref:v,style:Jt([t])},[at(E.$slots,"default")],4))}});var AFe=Vt(CFe,[["__file","watermark.vue"]]);const EFe=Nn(AFe),MFe=zt({zIndex:{type:Number,default:1001},visible:Boolean,fill:{type:String,default:"rgba(0,0,0,0.5)"},pos:{type:et(Object)},targetAreaClickable:{type:Boolean,default:!0}}),IFe=(n,e,t,i,r)=>{const s=ae(null),a=()=>{let d;return un(n.value)?d=document.querySelector(n.value):pn(n.value)?d=n.value():d=n.value,d},o=()=>{const d=a();if(!d||!e.value){s.value=null;return}DFe(d)||d.scrollIntoView(r.value);const{left:f,top:h,width:p,height:m}=d.getBoundingClientRect();s.value={left:f,top:h,width:p,height:m,radius:0}};Ln(()=>{St([e,n],()=>{o()},{immediate:!0}),window.addEventListener("resize",o)}),Vi(()=>{window.removeEventListener("resize",o)});const l=d=>{var f;return(f=Bt(t.value.offset)?t.value.offset[d]:t.value.offset)!=null?f:6},u=W(()=>{var d;if(!s.value)return s.value;const f=l(0),h=l(1),p=((d=t.value)==null?void 0:d.radius)||2;return{left:s.value.left-f,top:s.value.top-h,width:s.value.width+f*2,height:s.value.height+h*2,radius:p}}),c=W(()=>{const d=a();return!i.value||!d||!window.DOMRect?d||void 0:{getBoundingClientRect(){var f,h,p,m;return window.DOMRect.fromRect({width:((f=u.value)==null?void 0:f.width)||0,height:((h=u.value)==null?void 0:h.height)||0,x:((p=u.value)==null?void 0:p.left)||0,y:((m=u.value)==null?void 0:m.top)||0})}}});return{mergedPosInfo:u,triggerTarget:c}},cD=Symbol("ElTour");function DFe(n){const e=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,{top:i,right:r,bottom:s,left:a}=n.getBoundingClientRect();return i>=0&&a>=0&&r<=e&&s<=t}const RFe=(n,e,t,i,r,s,a,o)=>{const l=ae(),u=ae(),c=ae({}),d={x:l,y:u,placement:i,strategy:r,middlewareData:c},f=W(()=>{const v=[yre(S(s)),mNe(),vNe(),PFe()];return S(o)&&S(t)&&v.push(vre({element:S(t)})),v}),h=async()=>{if(!xi)return;const v=S(n),_=S(e);if(!v||!_)return;const y=await Are(v,_,{placement:S(i),strategy:S(r),middleware:S(f)});l_(d).forEach(b=>{d[b].value=y[b]})},p=W(()=>{if(!S(n))return{position:"fixed",top:"50%",left:"50%",transform:"translate3d(-50%, -50%, 0)",maxWidth:"100vw",zIndex:S(a)};const{overflow:v}=S(c);return{position:S(r),zIndex:S(a),top:S(u)!=null?`${S(u)}px`:"",left:S(l)!=null?`${S(l)}px`:"",maxWidth:v!=null&&v.maxWidth?`${v==null?void 0:v.maxWidth}px`:""}}),m=W(()=>{if(!S(o))return{};const{arrow:v}=S(c);return{left:(v==null?void 0:v.x)!=null?`${v==null?void 0:v.x}px`:"",top:(v==null?void 0:v.y)!=null?`${v==null?void 0:v.y}px`:""}});let g;return Ln(()=>{const v=S(n),_=S(e);v&&_&&(g=ONe(v,_,h)),ya(()=>{h()})}),Vi(()=>{g&&g()}),{update:h,contentStyle:p,arrowStyle:m}},PFe=()=>({name:"overflow",async fn(n){const e=await c7(n);let t=0;return e.left>0&&(t=e.left),e.right>0&&(t=e.right),{data:{maxWidth:n.rects.floating.width-t}}}}),kFe=Ne({name:"ElTourMask",inheritAttrs:!1}),LFe=Ne({...kFe,props:MFe,setup(n){const e=n,{ns:t}=Zt(cD),i=W(()=>{var o,l;return(l=(o=e.pos)==null?void 0:o.radius)!=null?l:2}),r=W(()=>{const o=i.value,l=`a${o},${o} 0 0 1`;return{topRight:`${l} ${o},${o}`,bottomRight:`${l} ${-o},${o}`,bottomLeft:`${l} ${-o},${-o}`,topLeft:`${l} ${o},${-o}`}}),s=W(()=>{const o=window.innerWidth,l=window.innerHeight,u=r.value,c=`M${o},0 L0,0 L0,${l} L${o},${l} L${o},0 Z`,d=i.value;return e.pos?`${c} M${e.pos.left+d},${e.pos.top} h${e.pos.width-d*2} ${u.topRight} v${e.pos.height-d*2} ${u.bottomRight} h${-e.pos.width+d*2} ${u.bottomLeft} v${-e.pos.height+d*2} ${u.topLeft} z`:c}),a=W(()=>({fill:e.fill,pointerEvents:"auto",cursor:"auto"}));return FF($i(e,"visible"),{ns:t}),(o,l)=>o.visible?(j(),_e("div",si({key:0,class:S(t).e("mask"),style:{position:"fixed",left:0,right:0,top:0,bottom:0,zIndex:o.zIndex,pointerEvents:o.pos&&o.targetAreaClickable?"none":"auto"}},o.$attrs),[(j(),_e("svg",{style:{width:"100%",height:"100%"}},[Te("path",{class:ee(S(t).e("hollow")),style:Jt(S(a)),d:S(s)},null,14,["d"])]))],16)):ot("v-if",!0)}});var OFe=Vt(LFe,[["__file","mask.vue"]]);const NFe=["absolute","fixed"],BFe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],v7=zt({placement:{type:et(String),values:BFe,default:"bottom"},reference:{type:et(Object),default:null},strategy:{type:et(String),values:NFe,default:"absolute"},offset:{type:Number,default:10},showArrow:Boolean,zIndex:{type:Number,default:2001}}),FFe={close:()=>!0},UFe=Ne({name:"ElTourContent"}),zFe=Ne({...UFe,props:v7,emits:FFe,setup(n,{emit:e}){const t=n,i=ae(t.placement),r=ae(t.strategy),s=ae(null),a=ae(null);St(()=>t.placement,()=>{i.value=t.placement});const{contentStyle:o,arrowStyle:l}=RFe($i(t,"reference"),s,a,i,r,$i(t,"offset"),$i(t,"zIndex"),$i(t,"showArrow")),u=W(()=>i.value.split("-")[0]),{ns:c}=Zt(cD),d=()=>{e("close")},f=h=>{h.detail.focusReason==="pointer"&&h.preventDefault()};return(h,p)=>(j(),_e("div",{ref_key:"contentRef",ref:s,style:Jt(S(o)),class:ee(S(c).e("content")),"data-side":S(u),tabindex:"-1"},[he(S(hb),{loop:"",trapped:"","focus-start-el":"container","focus-trap-el":s.value||void 0,onReleaseRequested:d,onFocusoutPrevented:f},{default:Ae(()=>[at(h.$slots,"default")]),_:3},8,["focus-trap-el"]),h.showArrow?(j(),_e("span",{key:0,ref_key:"arrowRef",ref:a,style:Jt(S(l)),class:ee(S(c).e("arrow"))},null,6)):ot("v-if",!0)],14,["data-side"]))}});var HFe=Vt(zFe,[["__file","content.vue"]]),VFe=Ne({name:"ElTourSteps",props:{current:{type:Number,default:0}},emits:["update-total"],setup(n,{slots:e,emit:t}){let i=0;return()=>{var r,s;const a=(r=e.default)==null?void 0:r.call(e),o=[];let l=0;function u(c){Bt(c)&&c.forEach(d=>{var f;((f=(d==null?void 0:d.type)||{})==null?void 0:f.name)==="ElTourStep"&&(o.push(d),l+=1)})}return a.length&&u(Up((s=a[0])==null?void 0:s.children)),i!==l&&(i=l,t("update-total",l)),o.length?o[n.current]:null}}});const $Fe=zt({modelValue:Boolean,current:{type:Number,default:0},showArrow:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeIcon:{type:nr},placement:v7.placement,contentStyle:{type:et([Object])},mask:{type:et([Boolean,Object]),default:!0},gap:{type:et(Object),default:()=>({offset:6,radius:2})},zIndex:{type:Number},scrollIntoViewOptions:{type:et([Boolean,Object]),default:()=>({block:"center"})},type:{type:et(String)},appendTo:{type:et([String,Object]),default:"body"},closeOnPressEscape:{type:Boolean,default:!0},targetAreaClickable:{type:Boolean,default:!0}}),GFe={[$n]:n=>fr(n),"update:current":n=>yn(n),close:n=>yn(n),finish:()=>!0,change:n=>yn(n)},WFe=Ne({name:"ElTour"}),qFe=Ne({...WFe,props:$Fe,emits:GFe,setup(n,{emit:e}){const t=n,i=Rt("tour"),r=ae(0),s=ae(),a=Vee(t,"current",e,{passive:!0}),o=W(()=>{var C;return(C=s.value)==null?void 0:C.target}),l=W(()=>[i.b(),g.value==="primary"?i.m("primary"):""]),u=W(()=>{var C;return((C=s.value)==null?void 0:C.placement)||t.placement}),c=W(()=>{var C,E;return(E=(C=s.value)==null?void 0:C.contentStyle)!=null?E:t.contentStyle}),d=W(()=>{var C,E;return(E=(C=s.value)==null?void 0:C.mask)!=null?E:t.mask}),f=W(()=>!!d.value&&t.modelValue),h=W(()=>fr(d.value)?void 0:d.value),p=W(()=>{var C,E;return!!o.value&&((E=(C=s.value)==null?void 0:C.showArrow)!=null?E:t.showArrow)}),m=W(()=>{var C,E;return(E=(C=s.value)==null?void 0:C.scrollIntoViewOptions)!=null?E:t.scrollIntoViewOptions}),g=W(()=>{var C,E;return(E=(C=s.value)==null?void 0:C.type)!=null?E:t.type}),{nextZIndex:v}=db(),_=v(),y=W(()=>{var C;return(C=t.zIndex)!=null?C:_}),{mergedPosInfo:b,triggerTarget:x}=IFe(o,$i(t,"modelValue"),$i(t,"gap"),d,m);St(()=>t.modelValue,C=>{C||(a.value=0)});const w=()=>{t.closeOnPressEscape&&(e("update:modelValue",!1),e("close",a.value))},A=C=>{r.value=C},T=Ls();return ui(cD,{currentStep:s,current:a,total:r,showClose:$i(t,"showClose"),closeIcon:$i(t,"closeIcon"),mergedType:g,ns:i,slots:T,updateModelValue(C){e("update:modelValue",C)},onClose(){e("close",a.value)},onFinish(){e("finish")},onChange(){e("change",a.value)}}),(C,E)=>(j(),_e(an,null,[he(S(pb),{to:C.appendTo},{default:Ae(()=>{var I,k;return[Te("div",si({class:S(l)},C.$attrs),[he(OFe,{visible:S(f),fill:(I=S(h))==null?void 0:I.color,style:Jt((k=S(h))==null?void 0:k.style),pos:S(b),"z-index":S(y),"target-area-clickable":C.targetAreaClickable},null,8,["visible","fill","style","pos","z-index","target-area-clickable"]),C.modelValue?(j(),gt(HFe,{key:S(a),reference:S(x),placement:S(u),"show-arrow":S(p),"z-index":S(y),style:Jt(S(c)),onClose:w},{default:Ae(()=>[he(S(VFe),{current:S(a),onUpdateTotal:A},{default:Ae(()=>[at(C.$slots,"default")]),_:3},8,["current"])]),_:3},8,["reference","placement","show-arrow","z-index","style"])):ot("v-if",!0)],16)]}),_:3},8,["to"]),ot(" just for IDE "),ot("v-if",!0)],64))}});var jFe=Vt(qFe,[["__file","tour.vue"]]);const KFe=zt({target:{type:et([String,Object,Function])},title:String,description:String,showClose:{type:Boolean,default:void 0},closeIcon:{type:nr},showArrow:{type:Boolean,default:void 0},placement:v7.placement,mask:{type:et([Boolean,Object]),default:void 0},contentStyle:{type:et([Object])},prevButtonProps:{type:et(Object)},nextButtonProps:{type:et(Object)},scrollIntoViewOptions:{type:et([Boolean,Object]),default:void 0},type:{type:et(String)}}),XFe={close:()=>!0},YFe=Ne({name:"ElTourStep"}),QFe=Ne({...YFe,props:KFe,emits:XFe,setup(n,{emit:e}){const t=n,{Close:i}=oF,{t:r}=wi(),{currentStep:s,current:a,total:o,showClose:l,closeIcon:u,mergedType:c,ns:d,slots:f,updateModelValue:h,onClose:p,onFinish:m,onChange:g}=Zt(cD);St(t,T=>{s.value=T},{immediate:!0});const v=W(()=>{var T;return(T=t.showClose)!=null?T:l.value}),_=W(()=>{var T,C;return(C=(T=t.closeIcon)!=null?T:u.value)!=null?C:i}),y=T=>{if(T)return fSe(T,["children","onClick"])},b=()=>{var T,C;a.value-=1,(T=t.prevButtonProps)!=null&&T.onClick&&((C=t.prevButtonProps)==null||C.onClick()),g()},x=()=>{var T;a.value>=o.value-1?w():a.value+=1,(T=t.nextButtonProps)!=null&&T.onClick&&t.nextButtonProps.onClick(),g()},w=()=>{A(),m()},A=()=>{h(!1),p(),e("close")};return(T,C)=>(j(),_e(an,null,[S(v)?(j(),_e("button",{key:0,"aria-label":"Close",class:ee(S(d).e("closebtn")),type:"button",onClick:A},[he(S(rn),{class:ee(S(d).e("close"))},{default:Ae(()=>[(j(),gt(ei(S(_))))]),_:1},8,["class"])],2)):ot("v-if",!0),Te("header",{class:ee([S(d).e("header"),{"show-close":S(l)}])},[at(T.$slots,"header",{},()=>[Te("span",{role:"heading",class:ee(S(d).e("title"))},Lt(T.title),3)])],2),Te("div",{class:ee(S(d).e("body"))},[at(T.$slots,"default",{},()=>[Te("span",null,Lt(T.description),1)])],2),Te("footer",{class:ee(S(d).e("footer"))},[Te("div",{class:ee(S(d).b("indicators"))},[S(f).indicators?(j(),gt(ei(S(f).indicators),{key:0,current:S(a),total:S(o)},null,8,["current","total"])):(j(!0),_e(an,{key:1},ti(S(o),(E,I)=>(j(),_e("span",{key:E,class:ee([S(d).b("indicator"),I===S(a)?"is-active":""])},null,2))),128))],2),Te("div",{class:ee(S(d).b("buttons"))},[S(a)>0?(j(),gt(S(_a),si({key:0,size:"small",type:S(c)},y(T.prevButtonProps),{onClick:b}),{default:Ae(()=>{var E,I;return[An(Lt((I=(E=T.prevButtonProps)==null?void 0:E.children)!=null?I:S(r)("el.tour.previous")),1)]}),_:1},16,["type"])):ot("v-if",!0),S(a)<=S(o)-1?(j(),gt(S(_a),si({key:1,size:"small",type:S(c)==="primary"?"default":"primary"},y(T.nextButtonProps),{onClick:x}),{default:Ae(()=>{var E,I;return[An(Lt((I=(E=T.nextButtonProps)==null?void 0:E.children)!=null?I:S(a)===S(o)-1?S(r)("el.tour.finish"):S(r)("el.tour.next")),1)]}),_:1},16,["type"])):ot("v-if",!0)],2)],2)],64))}});var Wre=Vt(QFe,[["__file","step.vue"]]);const ZFe=Nn(jFe,{TourStep:Wre}),JFe=Xr(Wre),e7e=zt({container:{type:et([String,Object])},offset:{type:Number,default:0},bound:{type:Number,default:15},duration:{type:Number,default:300},marker:{type:Boolean,default:!0},type:{type:et(String),default:"default"},direction:{type:et(String),default:"vertical"}}),t7e={change:n=>un(n),click:(n,e)=>n instanceof MouseEvent&&(un(e)||Xi(e))},qre=Symbol("anchor"),iA=n=>{if(!xi||n==="")return null;if(un(n))try{return document.querySelector(n)}catch{return null}return n};function n7e(n){let e=0;const t=(...i)=>{e&&Og(e),e=e0(()=>{n(...i),e=0})};return t.cancel=()=>{Og(e),e=0},t}const i7e=Ne({name:"ElAnchor"}),r7e=Ne({...i7e,props:e7e,emits:t7e,setup(n,{expose:e,emit:t}){const i=n,r=ae(""),s=ae(null),a=ae(null),o=ae(),l={};let u=!1,c=0;const d=Rt("anchor"),f=W(()=>[d.b(),i.type==="underline"?d.m("underline"):"",d.m(i.direction)]),h=T=>{l[T.href]=T.el},p=T=>{delete l[T]},m=T=>{r.value!==T&&(r.value=T,t("change",T))};let g=null;const v=T=>{if(!o.value)return;const C=iA(T);if(!C)return;g&&g(),u=!0;const E=_V(C,o.value),I=y6(C,E),k=E.scrollHeight-E.clientHeight,O=Math.min(I-i.offset,k);g=yxe(o.value,c,O,i.duration,()=>{setTimeout(()=>{u=!1},20)})},_=T=>{T&&(m(T),v(T))},y=(T,C)=>{t("click",T,C),_(C)},b=n7e(()=>{o.value&&(c=bV(o.value));const T=x();u||Xi(T)||m(T)}),x=()=>{if(!o.value)return;const T=bV(o.value),C=[];for(const E of Object.keys(l)){const I=iA(E);if(!I)continue;const k=_V(I,o.value),O=y6(I,k);C.push({top:O-i.offset-i.bound,href:E})}C.sort((E,I)=>E.top-I.top);for(let E=0;E<C.length;E++){const I=C[E],k=C[E+1];if(E===0&&T===0)return"";if(I.top<=T&&(!k||k.top>T))return I.href}},w=()=>{const T=iA(i.container);!T||$I(T)?o.value=window:o.value=T};Yi(o,"scroll",b);const A=W(()=>{if(!s.value||!a.value||!r.value)return{};const T=l[r.value];if(!T)return{};const C=s.value.getBoundingClientRect(),E=a.value.getBoundingClientRect(),I=T.getBoundingClientRect();return i.direction==="horizontal"?{left:`${I.left-C.left}px`,width:`${I.width}px`,opacity:1}:{top:`${I.top-C.top+(I.height-E.height)/2}px`,opacity:1}});return Ln(()=>{w();const T=decodeURIComponent(window.location.hash);iA(T)?_(T):b()}),St(()=>i.container,()=>{w()}),ui(qre,{ns:d,direction:i.direction,currentAnchor:r,addLink:h,removeLink:p,handleClick:y}),e({scrollTo:_}),(T,C)=>(j(),_e("div",{ref_key:"anchorRef",ref:s,class:ee(S(f))},[T.marker?(j(),_e("div",{key:0,ref_key:"markerRef",ref:a,class:ee(S(d).e("marker")),style:Jt(S(A))},null,6)):ot("v-if",!0),Te("div",{class:ee(S(d).e("list"))},[at(T.$slots,"default")],2)],2))}});var s7e=Vt(r7e,[["__file","anchor.vue"]]);const a7e=zt({title:String,href:String}),o7e=Ne({name:"ElAnchorLink"}),l7e=Ne({...o7e,props:a7e,setup(n){const e=n,t=ae(null),{ns:i,direction:r,currentAnchor:s,addLink:a,removeLink:o,handleClick:l}=Zt(qre),u=W(()=>[i.e("link"),i.is("active",s.value===e.href)]),c=d=>{l(d,e.href)};return St(()=>e.href,(d,f)=>{cn(()=>{f&&o(f),d&&a({href:d,el:t.value})})}),Ln(()=>{const{href:d}=e;d&&a({href:d,el:t.value})}),Vi(()=>{const{href:d}=e;d&&o(d)}),(d,f)=>(j(),_e("div",{class:ee(S(i).e("item"))},[Te("a",{ref_key:"linkRef",ref:t,class:ee(S(u)),href:d.href,onClick:c},[at(d.$slots,"default",{},()=>[An(Lt(d.title),1)])],10,["href"]),d.$slots["sub-link"]&&S(r)==="vertical"?(j(),_e("div",{key:0,class:ee(S(i).e("list"))},[at(d.$slots,"sub-link")],2)):ot("v-if",!0)],2))}});var jre=Vt(l7e,[["__file","anchor-link.vue"]]);const u7e=Nn(s7e,{AnchorLink:jre}),c7e=Xr(jre),d7e=zt({direction:{type:et(String),default:"horizontal"},options:{type:et(Array),default:()=>[]},modelValue:{type:[String,Number,Boolean],default:void 0},block:Boolean,size:ks,disabled:Boolean,validateEvent:{type:Boolean,default:!0},id:String,name:String,...Ba(["ariaLabel"])}),f7e={[$n]:n=>un(n)||yn(n)||fr(n),[er]:n=>un(n)||yn(n)||fr(n)},h7e=Ne({name:"ElSegmented"}),p7e=Ne({...h7e,props:d7e,emits:f7e,setup(n,{emit:e}){const t=n,i=Rt("segmented"),r=Oa(),s=ws(),a=no(),{formItem:o}=to(),{inputId:l,isLabeledByFormItem:u}=hc(t,{formItemContext:o}),c=ae(null),d=HSe(),f=Ui({isInit:!1,width:0,height:0,translateX:0,translateY:0,focusVisible:!1}),h=C=>{const E=p(C);e($n,E),e(er,E)},p=C=>Yn(C)?C.value:C,m=C=>Yn(C)?C.label:C,g=C=>!!(a.value||Yn(C)&&C.disabled),v=C=>t.modelValue===p(C),_=C=>t.options.find(E=>p(E)===C),y=C=>[i.e("item"),i.is("selected",v(C)),i.is("disabled",g(C))],b=()=>{if(!c.value)return;const C=c.value.querySelector(".is-selected"),E=c.value.querySelector(".is-selected input");if(!C||!E){f.width=0,f.height=0,f.translateX=0,f.translateY=0,f.focusVisible=!1;return}const I=C.getBoundingClientRect();f.isInit=!0,t.direction==="vertical"?(f.height=I.height,f.translateY=C.offsetTop):(f.width=I.width,f.translateX=C.offsetLeft);try{f.focusVisible=E.matches(":focus-visible")}catch{}},x=W(()=>[i.b(),i.m(s.value),i.is("block",t.block)]),w=W(()=>({width:t.direction==="vertical"?"100%":`${f.width}px`,height:t.direction==="vertical"?`${f.height}px`:"100%",transform:t.direction==="vertical"?`translateY(${f.translateY}px)`:`translateX(${f.translateX}px)`,display:f.isInit?"block":"none"})),A=W(()=>[i.e("item-selected"),i.is("disabled",g(_(t.modelValue))),i.is("focus-visible",f.focusVisible)]),T=W(()=>t.name||r.value);return Br(c,b),St(d,b),St(()=>t.modelValue,()=>{var C;b(),t.validateEvent&&((C=o==null?void 0:o.validate)==null||C.call(o,"change").catch(E=>void 0))},{flush:"post"}),(C,E)=>C.options.length?(j(),_e("div",{key:0,id:S(l),ref_key:"segmentedRef",ref:c,class:ee(S(x)),role:"radiogroup","aria-label":S(u)?void 0:C.ariaLabel||"segmented","aria-labelledby":S(u)?S(o).labelId:void 0},[Te("div",{class:ee([S(i).e("group"),S(i).m(t.direction)])},[Te("div",{style:Jt(S(w)),class:ee(S(A))},null,6),(j(!0),_e(an,null,ti(C.options,(I,k)=>(j(),_e("label",{key:k,class:ee(y(I))},[Te("input",{class:ee(S(i).e("item-input")),type:"radio",name:S(T),disabled:g(I),checked:v(I),onChange:O=>h(I)},null,42,["name","disabled","checked","onChange"]),Te("div",{class:ee(S(i).e("item-label"))},[at(C.$slots,"default",{item:I},()=>[An(Lt(m(I)),1)])],2)],2))),128))],2)],10,["id","aria-label","aria-labelledby"])):ot("v-if",!0)}});var m7e=Vt(p7e,[["__file","segmented.vue"]]);const g7e=Nn(m7e),v7e=(n,e)=>{const t=n.toLowerCase();return(e.label||e.value).toLowerCase().includes(t)},y7e=(n,e,t)=>{const{selectionEnd:i}=n;if(i===null)return;const r=n.value,s=yo(e);let a=-1,o;for(let l=i-1;l>=0;--l){const u=r[l];if(u===t||u===`
`||u==="\r"){a=l;continue}if(s.includes(u)){const c=a===-1?i:a;o={pattern:r.slice(l+1,c),start:l+1,end:c,prefix:u,prefixIndex:l,splitIndex:a,selectionEnd:i};break}}return o},_7e=(n,e={debug:!1,useSelectionEnd:!1})=>{const t=n.selectionStart!==null?n.selectionStart:0,i=n.selectionEnd!==null?n.selectionEnd:0,r=e.useSelectionEnd?i:t,s=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"];if(e.debug){const f=document.querySelector("#input-textarea-caret-position-mirror-div");f!=null&&f.parentNode&&f.parentNode.removeChild(f)}const a=document.createElement("div");a.id="input-textarea-caret-position-mirror-div",document.body.appendChild(a);const o=a.style,l=window.getComputedStyle(n),u=n.nodeName==="INPUT";o.whiteSpace=u?"nowrap":"pre-wrap",u||(o.wordWrap="break-word"),o.position="absolute",e.debug||(o.visibility="hidden"),s.forEach(f=>{if(u&&f==="lineHeight")if(l.boxSizing==="border-box"){const h=Number.parseInt(l.height),p=Number.parseInt(l.paddingTop)+Number.parseInt(l.paddingBottom)+Number.parseInt(l.borderTopWidth)+Number.parseInt(l.borderBottomWidth),m=p+Number.parseInt(l.lineHeight);h>m?o.lineHeight=`${h-p}px`:h===m?o.lineHeight=l.lineHeight:o.lineHeight="0"}else o.lineHeight=l.height;else o[f]=l[f]}),XI()?n.scrollHeight>Number.parseInt(l.height)&&(o.overflowY="scroll"):o.overflow="hidden",a.textContent=n.value.slice(0,Math.max(0,r)),u&&a.textContent&&(a.textContent=a.textContent.replace(/\s/g," "));const c=document.createElement("span");c.textContent=n.value.slice(Math.max(0,r))||".",c.style.position="relative",c.style.left=`${-n.scrollLeft}px`,c.style.top=`${-n.scrollTop}px`,a.appendChild(c);const d={top:c.offsetTop+Number.parseInt(l.borderTopWidth),left:c.offsetLeft+Number.parseInt(l.borderLeftWidth),height:Number.parseInt(l.fontSize)*1.5};return e.debug?c.style.backgroundColor="#aaa":document.body.removeChild(a),d.left>=n.clientWidth&&(d.left=n.clientWidth),d},b7e=zt({...uF,options:{type:et(Array),default:()=>[]},prefix:{type:et([String,Array]),default:"@",validator:n=>un(n)?n.length===1:n.every(e=>un(e)&&e.length===1)},split:{type:String,default:" ",validator:n=>n.length===1},filterOption:{type:et([Boolean,Function]),default:()=>v7e,validator:n=>n===!1?!0:pn(n)},placement:{type:et(String),default:"bottom"},showArrow:Boolean,offset:{type:Number,default:0},whole:Boolean,checkIsWhole:{type:et(Function)},modelValue:String,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:et(Object),default:()=>({})}}),S7e={[$n]:n=>un(n),search:(n,e)=>un(n)&&un(e),select:(n,e)=>un(n.value)&&un(e),focus:n=>n instanceof FocusEvent,blur:n=>n instanceof FocusEvent},x7e=zt({options:{type:et(Array),default:()=>[]},loading:Boolean,disabled:Boolean,contentId:String,ariaLabel:String}),w7e={select:n=>un(n.value)},T7e=Ne({name:"ElMentionDropdown"}),C7e=Ne({...T7e,props:x7e,emits:w7e,setup(n,{expose:e,emit:t}){const i=n,r=Rt("mention"),{t:s}=wi(),a=ae(-1),o=ae(),l=ae(),u=ae(),c=(y,b)=>[r.be("dropdown","item"),r.is("hovering",a.value===b),r.is("disabled",y.disabled||i.disabled)],d=y=>{y.disabled||i.disabled||t("select",y)},f=y=>{a.value=y},h=W(()=>i.disabled||i.options.every(y=>y.disabled)),p=W(()=>i.options[a.value]),m=()=>{p.value&&t("select",p.value)},g=y=>{const{options:b}=i;if(b.length===0||h.value)return;y==="next"?(a.value++,a.value===b.length&&(a.value=0)):y==="prev"&&(a.value--,a.value<0&&(a.value=b.length-1));const x=b[a.value];if(x.disabled){g(y);return}cn(()=>v(x))},v=y=>{var b,x,w,A;const{options:T}=i,C=T.findIndex(I=>I.value===y.value),E=(b=l.value)==null?void 0:b[C];if(E){const I=(w=(x=u.value)==null?void 0:x.querySelector)==null?void 0:w.call(x,`.${r.be("dropdown","wrap")}`);I&&tF(I,E)}(A=o.value)==null||A.handleScroll()};return St(()=>i.options,()=>{h.value||i.options.length===0?a.value=-1:a.value=0},{immediate:!0}),e({hoveringIndex:a,navigateOptions:g,selectHoverOption:m,hoverOption:p}),(y,b)=>(j(),_e("div",{ref_key:"dropdownRef",ref:u,class:ee(S(r).b("dropdown"))},[y.$slots.header?(j(),_e("div",{key:0,class:ee(S(r).be("dropdown","header"))},[at(y.$slots,"header")],2)):ot("v-if",!0),Vn(he(S(nf),{id:y.contentId,ref_key:"scrollbarRef",ref:o,tag:"ul","wrap-class":S(r).be("dropdown","wrap"),"view-class":S(r).be("dropdown","list"),role:"listbox","aria-label":y.ariaLabel,"aria-orientation":"vertical"},{default:Ae(()=>[(j(!0),_e(an,null,ti(y.options,(x,w)=>(j(),_e("li",{id:`${y.contentId}-${w}`,ref_for:!0,ref_key:"optionRefs",ref:l,key:w,class:ee(c(x,w)),role:"option","aria-disabled":x.disabled||y.disabled||void 0,"aria-selected":a.value===w,onMousemove:A=>f(w),onClick:wn(A=>d(x),["stop"])},[at(y.$slots,"label",{item:x,index:w},()=>{var A;return[Te("span",null,Lt((A=x.label)!=null?A:x.value),1)]})],42,["id","aria-disabled","aria-selected","onMousemove","onClick"]))),128))]),_:3},8,["id","wrap-class","view-class","aria-label"]),[[Oi,y.options.length>0&&!y.loading]]),y.loading?(j(),_e("div",{key:1,class:ee(S(r).be("dropdown","loading"))},[at(y.$slots,"loading",{},()=>[An(Lt(S(s)("el.mention.loading")),1)])],2)):ot("v-if",!0),y.$slots.footer?(j(),_e("div",{key:2,class:ee(S(r).be("dropdown","footer"))},[at(y.$slots,"footer")],2)):ot("v-if",!0)],2))}});var A7e=Vt(C7e,[["__file","mention-dropdown.vue"]]);const E7e=Ne({name:"ElMention",inheritAttrs:!1}),M7e=Ne({...E7e,props:b7e,emits:S7e,setup(n,{expose:e,emit:t}){const i=n,r=W(()=>Nc(i,Object.keys(uF))),s=Rt("mention"),a=no(),o=Oa(),l=ae(),u=ae(),c=ae(),d=ae(!1),f=ae(),h=ae(),p=W(()=>i.showArrow?i.placement:`${i.placement}-start`),m=W(()=>i.showArrow?["bottom","top"]:["bottom-start","top-start"]),g=W(()=>{const{filterOption:k,options:O}=i;return!h.value||!k?O:O.filter(U=>k(h.value.pattern,U))}),v=W(()=>d.value&&(!!g.value.length||i.loading)),_=W(()=>{var k;return`${o.value}-${(k=c.value)==null?void 0:k.hoveringIndex}`}),y=k=>{t("update:modelValue",k),C()},b=k=>{var O,U,z,L;if(!(!("code"in k)||(O=l.value)!=null&&O.isComposing))switch(k.code){case Kt.left:case Kt.right:C();break;case Kt.up:case Kt.down:if(!d.value)return;k.preventDefault(),(U=c.value)==null||U.navigateOptions(k.code===Kt.up?"prev":"next");break;case Kt.enter:case Kt.numpadEnter:if(!d.value)return;k.preventDefault(),(z=c.value)!=null&&z.hoverOption?(L=c.value)==null||L.selectHoverOption():d.value=!1;break;case Kt.esc:if(!d.value)return;k.preventDefault(),d.value=!1;break;case Kt.backspace:if(i.whole&&h.value){const{splitIndex:G,selectionEnd:H,pattern:F,prefixIndex:X,prefix:te}=h.value,re=T();if(!re)return;const ie=re.value,le=i.options.find(pe=>pe.value===F);if((pn(i.checkIsWhole)?i.checkIsWhole(F,te):le)&&G!==-1&&G+1===H){k.preventDefault();const pe=ie.slice(0,X)+ie.slice(G+1);t($n,pe);const ye=X;cn(()=>{re.selectionStart=ye,re.selectionEnd=ye,I()})}}}},{wrapperRef:x}=w0(l,{beforeFocus(){return a.value},afterFocus(){C()},beforeBlur(k){var O;return(O=u.value)==null?void 0:O.isFocusInsideContent(k)},afterBlur(){d.value=!1}}),w=()=>{C()},A=k=>{if(!h.value)return;const O=T();if(!O)return;const U=O.value,{split:z}=i,L=U.slice(h.value.end),G=L.startsWith(z),H=`${k.value}${G?"":z}`,F=U.slice(0,h.value.start)+H+L;t($n,F),t("select",k,h.value.prefix);const X=h.value.start+H.length+(G?1:0);cn(()=>{O.selectionStart=X,O.selectionEnd=X,O.focus(),I()})},T=()=>{var k,O;return i.type==="textarea"?(k=l.value)==null?void 0:k.textarea:(O=l.value)==null?void 0:O.input},C=()=>{setTimeout(()=>{E(),I(),cn(()=>{var k;return(k=u.value)==null?void 0:k.updatePopper()})},0)},E=()=>{const k=T();if(!k)return;const O=_7e(k),U=k.getBoundingClientRect(),z=l.value.$el.getBoundingClientRect();f.value={position:"absolute",width:0,height:`${O.height}px`,left:`${O.left+U.left-z.left}px`,top:`${O.top+U.top-z.top}px`}},I=()=>{const k=T();if(document.activeElement!==k){d.value=!1;return}const{prefix:O,split:U}=i;if(h.value=y7e(k,O,U),h.value&&h.value.splitIndex===-1){d.value=!0,t("search",h.value.pattern,h.value.prefix);return}d.value=!1};return e({input:l,tooltip:u,dropdownVisible:v}),(k,O)=>(j(),_e("div",{ref_key:"wrapperRef",ref:x,class:ee(S(s).b())},[he(S(So),si(si(S(r),k.$attrs),{ref_key:"elInputRef",ref:l,"model-value":k.modelValue,disabled:S(a),role:S(v)?"combobox":void 0,"aria-activedescendant":S(v)?S(_)||"":void 0,"aria-controls":S(v)?S(o):void 0,"aria-expanded":S(v)||void 0,"aria-label":k.ariaLabel,"aria-autocomplete":S(v)?"none":void 0,"aria-haspopup":S(v)?"listbox":void 0,onInput:y,onKeydown:b,onMousedown:w}),tc({_:2},[ti(k.$slots,(U,z)=>({name:z,fn:Ae(L=>[at(k.$slots,z,Lc(Qp(L)))])}))]),1040,["model-value","disabled","role","aria-activedescendant","aria-controls","aria-expanded","aria-label","aria-autocomplete","aria-haspopup"]),he(S(Ja),{ref_key:"tooltipRef",ref:u,visible:S(v),"popper-class":[S(s).e("popper"),k.popperClass],"popper-options":k.popperOptions,placement:S(p),"fallback-placements":S(m),effect:"light",pure:"",offset:k.offset,"show-arrow":k.showArrow},{default:Ae(()=>[Te("div",{style:Jt(f.value)},null,4)]),content:Ae(()=>{var U;return[he(A7e,{ref_key:"dropdownRef",ref:c,options:S(g),disabled:S(a),loading:k.loading,"content-id":S(o),"aria-label":k.ariaLabel,onSelect:A,onClick:wn((U=l.value)==null?void 0:U.focus,["stop"])},tc({_:2},[ti(k.$slots,(z,L)=>({name:L,fn:Ae(G=>[at(k.$slots,L,Lc(Qp(G)))])}))]),1032,["options","disabled","loading","content-id","aria-label","onClick"])]}),_:3},8,["visible","popper-class","popper-options","placement","fallback-placements","offset","show-arrow"])],2))}});var I7e=Vt(M7e,[["__file","mention.vue"]]);const D7e=Nn(I7e);var R7e=[wxe,J2e,qCe,vOe,ZCe,sAe,Ote,vAe,yAe,_a,Vte,lEe,hEe,DEe,REe,RMe,dne,BMe,sc,WEe,nne,VMe,r3e,s3e,JI,R3e,L3e,q3e,j3e,K3e,X3e,Y3e,oIe,vIe,yIe,DIe,Gne,zIe,IDe,DDe,RDe,Jne,DRe,RRe,rn,VRe,nie,So,iie,rPe,cPe,DPe,RPe,PPe,kPe,UPe,D5e,N5e,W5e,Dte,fie,une,rMe,iMe,tke,ake,hke,nf,Ng,I3,c5e,qke,tLe,nLe,SLe,ALe,Cie,BLe,qLe,jLe,JLe,o8e,l8e,gOe,POe,kOe,p_,FOe,E4e,GOe,XOe,YOe,Ja,JNe,fBe,V3,RBe,KBe,vFe,EFe,ZFe,JFe,u7e,c7e,g7e,D7e];const Lu="ElInfiniteScroll",P7e=50,k7e=200,L7e=0,O7e={delay:{type:Number,default:k7e},distance:{type:Number,default:L7e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},y7=(n,e)=>Object.entries(O7e).reduce((t,[i,r])=>{var s,a;const{type:o,default:l}=r,u=n.getAttribute(`infinite-scroll-${i}`);let c=(a=(s=e[u])!=null?s:u)!=null?a:l;return c=c==="false"?!1:c,c=o(c),t[i]=Number.isNaN(c)?l:c,t},{}),Kre=n=>{const{observer:e}=n[Lu];e&&(e.disconnect(),delete n[Lu].observer)},N7e=(n,e)=>{const{container:t,containerEl:i,instance:r,observer:s,lastScrollTop:a}=n[Lu],{disabled:o,distance:l}=y7(n,r),{clientHeight:u,scrollHeight:c,scrollTop:d}=i,f=d-a;if(n[Lu].lastScrollTop=d,s||o||f<0)return;let h=!1;if(t===n)h=c-(u+d)<=l;else{const{clientTop:p,scrollHeight:m}=n,g=y6(n,i);h=d+u>=g+p+m-l}h&&e.call(r)};function bP(n,e){const{containerEl:t,instance:i}=n[Lu],{disabled:r}=y7(n,i);r||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):Kre(n))}const B7e={async mounted(n,e){const{instance:t,value:i}=e;pn(i)||Xs(Lu,"'v-infinite-scroll' binding value must be a function"),await cn();const{delay:r,immediate:s}=y7(n,t),a=eF(n,!0),o=a===window?document.documentElement:a,l=mg(N7e.bind(null,n,i),r);if(a){if(n[Lu]={instance:t,container:a,containerEl:o,delay:r,cb:i,onScroll:l,lastScrollTop:o.scrollTop},s){const u=new MutationObserver(mg(bP.bind(null,n,i),P7e));n[Lu].observer=u,u.observe(n,{childList:!0,subtree:!0}),bP(n,i)}a.addEventListener("scroll",l)}},unmounted(n){if(!n[Lu])return;const{container:e,onScroll:t}=n[Lu];e==null||e.removeEventListener("scroll",t),Kre(n)},async updated(n){if(!n[Lu])await cn();else{const{containerEl:e,cb:t,observer:i}=n[Lu];e.clientHeight&&i&&bP(n,t)}}},a8=B7e;a8.install=n=>{n.directive("InfiniteScroll",a8)};const F7e=a8;function U7e(n){let e;const t=ae(!1),i=Ui({...n,originalPosition:"",originalOverflow:"",visible:!1});function r(f){i.text=f}function s(){const f=i.parent,h=d.ns;if(!f.vLoadingAddClassList){let p=f.getAttribute("loading-number");p=Number.parseInt(p)-1,p?f.setAttribute("loading-number",p.toString()):(To(f,h.bm("parent","relative")),f.removeAttribute("loading-number")),To(f,h.bm("parent","hidden"))}a(),c.unmount()}function a(){var f,h;(h=(f=d.$el)==null?void 0:f.parentNode)==null||h.removeChild(d.$el)}function o(){var f;n.beforeClose&&!n.beforeClose()||(t.value=!0,clearTimeout(e),e=setTimeout(l,400),i.visible=!1,(f=n.closed)==null||f.call(n))}function l(){if(!t.value)return;const f=i.parent;t.value=!1,f.vLoadingAddClassList=void 0,s()}const u=Ne({name:"ElLoading",setup(f,{expose:h}){const{ns:p,zIndex:m}=qI("loading");return h({ns:p,zIndex:m}),()=>{const g=i.spinner||i.svg,v=ln("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...g?{innerHTML:g}:{}},[ln("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),_=i.text?ln("p",{class:p.b("text")},[i.text]):void 0;return ln(Ks,{name:p.b("fade"),onAfterLeave:l},{default:Ae(()=>[Vn(he("div",{style:{backgroundColor:i.background||""},class:[p.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[ln("div",{class:p.b("spinner")},[v,_])]),[[Oi,i.visible]])])})}}}),c=KJ(u),d=c.mount(document.createElement("div"));return{...js(i),setText:r,removeElLoadingChild:a,close:o,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let rA;const o8=function(n={}){if(!xi)return;const e=z7e(n);if(e.fullscreen&&rA)return rA;const t=U7e({...e,closed:()=>{var r;(r=e.closed)==null||r.call(e),e.fullscreen&&(rA=void 0)}});H7e(e,e.parent,t),dG(e,e.parent,t),e.parent.vLoadingAddClassList=()=>dG(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),cn(()=>t.visible.value=e.visible),e.fullscreen&&(rA=t),t},z7e=n=>{var e,t,i,r;let s;return un(n.target)?s=(e=document.querySelector(n.target))!=null?e:document.body:s=n.target||document.body,{parent:s===document.body||n.body?document.body:s,background:n.background||"",svg:n.svg||"",svgViewBox:n.svgViewBox||"",spinner:n.spinner||!1,text:n.text||"",fullscreen:s===document.body&&((t=n.fullscreen)!=null?t:!0),lock:(i=n.lock)!=null?i:!1,customClass:n.customClass||"",visible:(r=n.visible)!=null?r:!0,beforeClose:n.beforeClose,closed:n.closed,target:s}},H7e=async(n,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,r={};if(n.fullscreen)t.originalPosition.value=Uf(document.body,"position"),t.originalOverflow.value=Uf(document.body,"overflow"),r.zIndex=i();else if(n.parent===document.body){t.originalPosition.value=Uf(document.body,"position"),await cn();for(const s of["top","left"]){const a=s==="top"?"scrollTop":"scrollLeft";r[s]=`${n.target.getBoundingClientRect()[s]+document.body[a]+document.documentElement[a]-Number.parseInt(Uf(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])r[s]=`${n.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=Uf(e,"position");for(const[s,a]of Object.entries(r))t.$el.style[s]=a},dG=(n,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?To(e,i.bm("parent","relative")):$u(e,i.bm("parent","relative")),n.fullscreen&&n.lock?$u(e,i.bm("parent","hidden")):To(e,i.bm("parent","hidden"))},DM=Symbol("ElLoading"),fG=(n,e)=>{var t,i,r,s;const a=e.instance,o=f=>Yn(e.value)?e.value[f]:void 0,l=f=>{const h=un(f)&&(a==null?void 0:a[f])||f;return h&&ae(h)},u=f=>l(o(f)||n.getAttribute(`element-loading-${b0(f)}`)),c=(t=o("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:u("text"),svg:u("svg"),svgViewBox:u("svgViewBox"),spinner:u("spinner"),background:u("background"),customClass:u("customClass"),fullscreen:c,target:(i=o("target"))!=null?i:c?void 0:n,body:(r=o("body"))!=null?r:e.modifiers.body,lock:(s=o("lock"))!=null?s:e.modifiers.lock};n[DM]={options:d,instance:o8(d)}},V7e=(n,e)=>{for(const t of Object.keys(e))br(e[t])&&(e[t].value=n[t])},hG={mounted(n,e){e.value&&fG(n,e)},updated(n,e){const t=n[DM];e.oldValue!==e.value&&(e.value&&!e.oldValue?fG(n,e):e.value&&e.oldValue?Yn(e.value)&&V7e(e.value,t.options):t==null||t.instance.close())},unmounted(n){var e;(e=n[DM])==null||e.instance.close(),n[DM]=null}},$7e={install(n){n.directive("loading",hG),n.config.globalProperties.$loading=o8},directive:hG,service:o8},Xre=["success","info","warning","error"],fo=Kr({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:xi?document.body:void 0}),G7e=zt({customClass:{type:String,default:fo.customClass},center:{type:Boolean,default:fo.center},dangerouslyUseHTMLString:{type:Boolean,default:fo.dangerouslyUseHTMLString},duration:{type:Number,default:fo.duration},icon:{type:nr,default:fo.icon},id:{type:String,default:fo.id},message:{type:et([String,Object,Function]),default:fo.message},onClose:{type:et(Function),default:fo.onClose},showClose:{type:Boolean,default:fo.showClose},type:{type:String,values:Xre,default:fo.type},plain:{type:Boolean,default:fo.plain},offset:{type:Number,default:fo.offset},zIndex:{type:Number,default:fo.zIndex},grouping:{type:Boolean,default:fo.grouping},repeatNum:{type:Number,default:fo.repeatNum}}),W7e={destroy:()=>!0},Bc=rJ([]),q7e=n=>{const e=Bc.findIndex(r=>r.id===n),t=Bc[e];let i;return e>0&&(i=Bc[e-1]),{current:t,prev:i}},j7e=n=>{const{prev:e}=q7e(n);return e?e.vm.exposed.bottom.value:0},K7e=(n,e)=>Bc.findIndex(i=>i.id===n)>0?16:e,X7e=Ne({name:"ElMessage"}),Y7e=Ne({...X7e,props:G7e,emits:W7e,setup(n,{expose:e}){const t=n,{Close:i}=lF,{ns:r,zIndex:s}=qI("message"),{currentZIndex:a,nextZIndex:o}=s,l=ae(),u=ae(!1),c=ae(0);let d;const f=W(()=>t.type?t.type==="error"?"danger":t.type:"info"),h=W(()=>{const A=t.type;return{[r.bm("icon",A)]:A&&r0[A]}}),p=W(()=>t.icon||r0[t.type]||""),m=W(()=>j7e(t.id)),g=W(()=>K7e(t.id,t.offset)+m.value),v=W(()=>c.value+g.value),_=W(()=>({top:`${g.value}px`,zIndex:a.value}));function y(){t.duration!==0&&({stop:d}=Lg(()=>{x()},t.duration))}function b(){d==null||d()}function x(){u.value=!1}function w({code:A}){A===Kt.esc&&x()}return Ln(()=>{y(),o(),u.value=!0}),St(()=>t.repeatNum,()=>{b(),y()}),Yi(document,"keydown",w),Br(l,()=>{c.value=l.value.getBoundingClientRect().height}),e({visible:u,bottom:v,close:x}),(A,T)=>(j(),gt(Ks,{name:S(r).b("fade"),onBeforeLeave:A.onClose,onAfterLeave:C=>A.$emit("destroy"),persisted:""},{default:Ae(()=>[Vn(Te("div",{id:A.id,ref_key:"messageRef",ref:l,class:ee([S(r).b(),{[S(r).m(A.type)]:A.type},S(r).is("center",A.center),S(r).is("closable",A.showClose),S(r).is("plain",A.plain),A.customClass]),style:Jt(S(_)),role:"alert",onMouseenter:b,onMouseleave:y},[A.repeatNum>1?(j(),gt(S(Ote),{key:0,value:A.repeatNum,type:S(f),class:ee(S(r).e("badge"))},null,8,["value","type","class"])):ot("v-if",!0),S(p)?(j(),gt(S(rn),{key:1,class:ee([S(r).e("icon"),S(h)])},{default:Ae(()=>[(j(),gt(ei(S(p))))]),_:1},8,["class"])):ot("v-if",!0),at(A.$slots,"default",{},()=>[A.dangerouslyUseHTMLString?(j(),_e(an,{key:1},[ot(" Caution here, message could've been compromised, never use user's input as message "),Te("p",{class:ee(S(r).e("content")),innerHTML:A.message},null,10,["innerHTML"])],2112)):(j(),_e("p",{key:0,class:ee(S(r).e("content"))},Lt(A.message),3))]),A.showClose?(j(),gt(S(rn),{key:2,class:ee(S(r).e("closeBtn")),onClick:wn(x,["stop"])},{default:Ae(()=>[he(S(i))]),_:1},8,["class","onClick"])):ot("v-if",!0)],46,["id"]),[[Oi,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var Q7e=Vt(Y7e,[["__file","message.vue"]]);let Z7e=1;const Yre=n=>{const e=!n||un(n)||Wr(n)||pn(n)?{message:n}:n,t={...fo,...e};if(!t.appendTo)t.appendTo=document.body;else if(un(t.appendTo)){let i=document.querySelector(t.appendTo);au(i)||(i=document.body),t.appendTo=i}return fr(Rc.grouping)&&!t.grouping&&(t.grouping=Rc.grouping),yn(Rc.duration)&&t.duration===3e3&&(t.duration=Rc.duration),yn(Rc.offset)&&t.offset===16&&(t.offset=Rc.offset),fr(Rc.showClose)&&!t.showClose&&(t.showClose=Rc.showClose),t},J7e=n=>{const e=Bc.indexOf(n);if(e===-1)return;Bc.splice(e,1);const{handler:t}=n;t.close()},e9e=({appendTo:n,...e},t)=>{const i=`message_${Z7e++}`,r=e.onClose,s=document.createElement("div"),a={...e,id:i,onClose:()=>{r==null||r(),J7e(c)},onDestroy:()=>{Zp(null,s)}},o=he(Q7e,a,pn(a.message)||Wr(a.message)?{default:pn(a.message)?a.message:()=>a.message}:null);o.appContext=t||b_._context,Zp(o,s),n.appendChild(s.firstElementChild);const l=o.component,c={id:i,vnode:o,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:o.component.props};return c},b_=(n={},e)=>{if(!xi)return{close:()=>{}};const t=Yre(n);if(t.grouping&&Bc.length){const r=Bc.find(({vnode:s})=>{var a;return((a=s.props)==null?void 0:a.message)===t.message});if(r)return r.props.repeatNum+=1,r.props.type=t.type,r.handler}if(yn(Rc.max)&&Bc.length>=Rc.max)return{close:()=>{}};const i=e9e(t,e);return Bc.push(i),i.handler};Xre.forEach(n=>{b_[n]=(e={},t)=>{const i=Yre(e);return b_({...i,type:n},t)}});function t9e(n){for(const e of Bc)(!n||n===e.props.type)&&e.handler.close()}b_.closeAll=t9e;b_._context=null;const n9e=tte(b_,"$message"),l8="_trap-focus-children",tg=[],pG=n=>{if(tg.length===0)return;const e=tg[tg.length-1][l8];if(e.length>0&&n.code===Kt.tab){if(e.length===1){n.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=n.shiftKey,i=n.target===e[0],r=n.target===e[e.length-1];i&&t&&(n.preventDefault(),e[e.length-1].focus()),r&&!t&&(n.preventDefault(),e[0].focus())}},i9e={beforeMount(n){n[l8]=AV(n),tg.push(n),tg.length<=1&&document.addEventListener("keydown",pG)},updated(n){cn(()=>{n[l8]=AV(n)})},unmounted(){tg.shift(),tg.length===0&&document.removeEventListener("keydown",pG)}},r9e=Ne({name:"ElMessageBox",directives:{TrapFocus:i9e},components:{ElButton:_a,ElFocusTrap:hb,ElInput:So,ElOverlay:BF,ElIcon:rn,...lF},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Eie},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(n,{emit:e}){const{locale:t,zIndex:i,ns:r,size:s}=qI("message-box",W(()=>n.buttonSize)),{t:a}=t,{nextZIndex:o}=i,l=ae(!1),u=Ui({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Kf($d),cancelButtonLoadingIcon:Kf($d),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:o()}),c=W(()=>{const L=u.type;return{[r.bm("icon",L)]:L&&r0[L]}}),d=Oa(),f=Oa(),h=W(()=>u.icon||r0[u.type]||""),p=W(()=>!!u.message),m=ae(),g=ae(),v=ae(),_=ae(),y=ae(),b=W(()=>u.confirmButtonClass);St(()=>u.inputValue,async L=>{await cn(),n.boxType==="prompt"&&L!==null&&k()},{immediate:!0}),St(()=>l.value,L=>{var G,H;L&&(n.boxType!=="prompt"&&(u.autofocus?v.value=(H=(G=y.value)==null?void 0:G.$el)!=null?H:m.value:v.value=m.value),u.zIndex=o()),n.boxType==="prompt"&&(L?cn().then(()=>{var F;_.value&&_.value.$el&&(u.autofocus?v.value=(F=O())!=null?F:m.value:v.value=m.value)}):(u.editorErrorMessage="",u.validateError=!1))});const x=W(()=>n.draggable),w=W(()=>n.overflow);zne(m,g,x,w),Ln(async()=>{await cn(),n.closeOnHashChange&&window.addEventListener("hashchange",A)}),Vi(()=>{n.closeOnHashChange&&window.removeEventListener("hashchange",A)});function A(){l.value&&(l.value=!1,cn(()=>{u.action&&e("action",u.action)}))}const T=()=>{n.closeOnClickModal&&I(u.distinguishCancelAndClose?"close":"cancel")},C=NF(T),E=L=>{if(u.inputType!=="textarea")return L.preventDefault(),I("confirm")},I=L=>{var G;n.boxType==="prompt"&&L==="confirm"&&!k()||(u.action=L,u.beforeClose?(G=u.beforeClose)==null||G.call(u,L,u,A):A())},k=()=>{if(n.boxType==="prompt"){const L=u.inputPattern;if(L&&!L.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;const G=u.inputValidator;if(pn(G)){const H=G(u.inputValue);if(H===!1)return u.editorErrorMessage=u.inputErrorMessage||a("el.messagebox.error"),u.validateError=!0,!1;if(un(H))return u.editorErrorMessage=H,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},O=()=>{const L=_.value.$refs;return L.input||L.textarea},U=()=>{I("close")},z=()=>{n.closeOnPressEscape&&U()};return n.lockScroll&&FF(l),{...js(u),ns:r,overlayEvent:C,visible:l,hasMessage:p,typeClass:c,contentId:d,inputId:f,btnSize:s,iconComponent:h,confirmButtonClasses:b,rootRef:m,focusStartRef:v,headerRef:g,inputRef:_,confirmRef:y,doClose:A,handleClose:U,onCloseRequested:z,handleWrapperClick:T,handleInputEnter:E,handleAction:I,t:a}}});function s9e(n,e,t,i,r,s){const a=Ht("el-icon"),o=Ht("close"),l=Ht("el-input"),u=Ht("el-button"),c=Ht("el-focus-trap"),d=Ht("el-overlay");return j(),gt(Ks,{name:"fade-in-linear",onAfterLeave:f=>n.$emit("vanish"),persisted:""},{default:Ae(()=>[Vn(he(d,{"z-index":n.zIndex,"overlay-class":[n.ns.is("message-box"),n.modalClass],mask:n.modal},{default:Ae(()=>[Te("div",{role:"dialog","aria-label":n.title,"aria-modal":"true","aria-describedby":n.showInput?void 0:n.contentId,class:ee(`${n.ns.namespace.value}-overlay-message-box`),onClick:n.overlayEvent.onClick,onMousedown:n.overlayEvent.onMousedown,onMouseup:n.overlayEvent.onMouseup},[he(c,{loop:"",trapped:n.visible,"focus-trap-el":n.rootRef,"focus-start-el":n.focusStartRef,onReleaseRequested:n.onCloseRequested},{default:Ae(()=>[Te("div",{ref:"rootRef",class:ee([n.ns.b(),n.customClass,n.ns.is("draggable",n.draggable),{[n.ns.m("center")]:n.center}]),style:Jt(n.customStyle),tabindex:"-1",onClick:wn(()=>{},["stop"])},[n.title!==null&&n.title!==void 0?(j(),_e("div",{key:0,ref:"headerRef",class:ee([n.ns.e("header"),{"show-close":n.showClose}])},[Te("div",{class:ee(n.ns.e("title"))},[n.iconComponent&&n.center?(j(),gt(a,{key:0,class:ee([n.ns.e("status"),n.typeClass])},{default:Ae(()=>[(j(),gt(ei(n.iconComponent)))]),_:1},8,["class"])):ot("v-if",!0),Te("span",null,Lt(n.title),1)],2),n.showClose?(j(),_e("button",{key:0,type:"button",class:ee(n.ns.e("headerbtn")),"aria-label":n.t("el.messagebox.close"),onClick:f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),onKeydown:ur(wn(f=>n.handleAction(n.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[he(a,{class:ee(n.ns.e("close"))},{default:Ae(()=>[he(o)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):ot("v-if",!0)],2)):ot("v-if",!0),Te("div",{id:n.contentId,class:ee(n.ns.e("content"))},[Te("div",{class:ee(n.ns.e("container"))},[n.iconComponent&&!n.center&&n.hasMessage?(j(),gt(a,{key:0,class:ee([n.ns.e("status"),n.typeClass])},{default:Ae(()=>[(j(),gt(ei(n.iconComponent)))]),_:1},8,["class"])):ot("v-if",!0),n.hasMessage?(j(),_e("div",{key:1,class:ee(n.ns.e("message"))},[at(n.$slots,"default",{},()=>[n.dangerouslyUseHTMLString?(j(),gt(ei(n.showInput?"label":"p"),{key:1,for:n.showInput?n.inputId:void 0,innerHTML:n.message},null,8,["for","innerHTML"])):(j(),gt(ei(n.showInput?"label":"p"),{key:0,for:n.showInput?n.inputId:void 0},{default:Ae(()=>[An(Lt(n.dangerouslyUseHTMLString?"":n.message),1)]),_:1},8,["for"]))])],2)):ot("v-if",!0)],2),Vn(Te("div",{class:ee(n.ns.e("input"))},[he(l,{id:n.inputId,ref:"inputRef",modelValue:n.inputValue,"onUpdate:modelValue":f=>n.inputValue=f,type:n.inputType,placeholder:n.inputPlaceholder,"aria-invalid":n.validateError,class:ee({invalid:n.validateError}),onKeydown:ur(n.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),Te("div",{class:ee(n.ns.e("errormsg")),style:Jt({visibility:n.editorErrorMessage?"visible":"hidden"})},Lt(n.editorErrorMessage),7)],2),[[Oi,n.showInput]])],10,["id"]),Te("div",{class:ee(n.ns.e("btns"))},[n.showCancelButton?(j(),gt(u,{key:0,loading:n.cancelButtonLoading,"loading-icon":n.cancelButtonLoadingIcon,class:ee([n.cancelButtonClass]),round:n.roundButton,size:n.btnSize,onClick:f=>n.handleAction("cancel"),onKeydown:ur(wn(f=>n.handleAction("cancel"),["prevent"]),["enter"])},{default:Ae(()=>[An(Lt(n.cancelButtonText||n.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):ot("v-if",!0),Vn(he(u,{ref:"confirmRef",type:"primary",loading:n.confirmButtonLoading,"loading-icon":n.confirmButtonLoadingIcon,class:ee([n.confirmButtonClasses]),round:n.roundButton,disabled:n.confirmButtonDisabled,size:n.btnSize,onClick:f=>n.handleAction("confirm"),onKeydown:ur(wn(f=>n.handleAction("confirm"),["prevent"]),["enter"])},{default:Ae(()=>[An(Lt(n.confirmButtonText||n.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Oi,n.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Oi,n.visible]])]),_:3},8,["onAfterLeave"])}var a9e=Vt(r9e,[["render",s9e],["__file","index.vue"]]);const fw=new Map,o9e=n=>{let e=document.body;return n.appendTo&&(un(n.appendTo)&&(e=document.querySelector(n.appendTo)),au(n.appendTo)&&(e=n.appendTo),au(e)||(e=document.body)),e},l9e=(n,e,t=null)=>{const i=he(a9e,n,pn(n.message)||Wr(n.message)?{default:pn(n.message)?n.message:()=>n.message}:null);return i.appContext=t,Zp(i,e),o9e(n).appendChild(e.firstElementChild),i.component},u9e=()=>document.createElement("div"),c9e=(n,e)=>{const t=u9e();n.onVanish=()=>{Zp(null,t),fw.delete(r)},n.onAction=s=>{const a=fw.get(r);let o;n.showInput?o={value:r.inputValue,action:s}:o=s,n.callback?n.callback(o,i.proxy):s==="cancel"||s==="close"?n.distinguishCancelAndClose&&s!=="cancel"?a.reject("close"):a.reject("cancel"):a.resolve(o)};const i=l9e(n,t,e),r=i.proxy;for(const s in n)Ai(n,s)&&!Ai(r.$props,s)&&(r[s]=n[s]);return r.visible=!0,r};function vb(n,e=null){if(!xi)return Promise.reject();let t;return un(n)||Wr(n)?n={message:n}:t=n.callback,new Promise((i,r)=>{const s=c9e(n,e??vb._context);fw.set(s,{options:n,callback:t,resolve:i,reject:r})})}const d9e=["alert","confirm","prompt"],f9e={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};d9e.forEach(n=>{vb[n]=h9e(n)});function h9e(n){return(e,t,i,r)=>{let s="";return Yn(t)?(i=t,s=""):Xi(t)?s="":s=t,vb(Object.assign({title:s,message:e,type:"",...f9e[n]},i,{boxType:n}),r)}}vb.close=()=>{fw.forEach((n,e)=>{e.doClose()}),fw.clear()};vb._context=null;const vp=vb;vp.install=n=>{vp._context=n._context,n.config.globalProperties.$msgbox=vp,n.config.globalProperties.$messageBox=vp,n.config.globalProperties.$alert=vp.alert,n.config.globalProperties.$confirm=vp.confirm,n.config.globalProperties.$prompt=vp.prompt};const p9e=vp,Qre=["success","info","warning","error"],m9e=zt({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:nr},id:{type:String,default:""},message:{type:et([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:et(Function),default:()=>{}},onClose:{type:et(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Qre,""],default:""},zIndex:Number}),g9e={destroy:()=>!0},v9e=Ne({name:"ElNotification"}),y9e=Ne({...v9e,props:m9e,emits:g9e,setup(n,{expose:e}){const t=n,{ns:i,zIndex:r}=qI("notification"),{nextZIndex:s,currentZIndex:a}=r,{Close:o}=oF,l=ae(!1);let u;const c=W(()=>{const y=t.type;return y&&r0[t.type]?i.m(y):""}),d=W(()=>t.type&&r0[t.type]||t.icon),f=W(()=>t.position.endsWith("right")?"right":"left"),h=W(()=>t.position.startsWith("top")?"top":"bottom"),p=W(()=>{var y;return{[h.value]:`${t.offset}px`,zIndex:(y=t.zIndex)!=null?y:a.value}});function m(){t.duration>0&&({stop:u}=Lg(()=>{l.value&&v()},t.duration))}function g(){u==null||u()}function v(){l.value=!1}function _({code:y}){y===Kt.delete||y===Kt.backspace?g():y===Kt.esc?l.value&&v():m()}return Ln(()=>{m(),s(),l.value=!0}),Yi(document,"keydown",_),e({visible:l,close:v}),(y,b)=>(j(),gt(Ks,{name:S(i).b("fade"),onBeforeLeave:y.onClose,onAfterLeave:x=>y.$emit("destroy"),persisted:""},{default:Ae(()=>[Vn(Te("div",{id:y.id,class:ee([S(i).b(),y.customClass,S(f)]),style:Jt(S(p)),role:"alert",onMouseenter:g,onMouseleave:m,onClick:y.onClick},[S(d)?(j(),gt(S(rn),{key:0,class:ee([S(i).e("icon"),S(c)])},{default:Ae(()=>[(j(),gt(ei(S(d))))]),_:1},8,["class"])):ot("v-if",!0),Te("div",{class:ee(S(i).e("group"))},[Te("h2",{class:ee(S(i).e("title")),textContent:Lt(y.title)},null,10,["textContent"]),Vn(Te("div",{class:ee(S(i).e("content")),style:Jt(y.title?void 0:{margin:0})},[at(y.$slots,"default",{},()=>[y.dangerouslyUseHTMLString?(j(),_e(an,{key:1},[ot(" Caution here, message could've been compromised, never use user's input as message "),Te("p",{innerHTML:y.message},null,8,["innerHTML"])],2112)):(j(),_e("p",{key:0},Lt(y.message),1))])],6),[[Oi,y.message]]),y.showClose?(j(),gt(S(rn),{key:0,class:ee(S(i).e("closeBtn")),onClick:wn(v,["stop"])},{default:Ae(()=>[he(S(o))]),_:1},8,["class","onClick"])):ot("v-if",!0)],2)],46,["id","onClick"]),[[Oi,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var _9e=Vt(y9e,[["__file","notification.vue"]]);const $3={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},u8=16;let b9e=1;const S_=function(n={},e){if(!xi)return{close:()=>{}};(un(n)||Wr(n))&&(n={message:n});const t=n.position||"top-right";let i=n.offset||0;$3[t].forEach(({vm:c})=>{var d;i+=(((d=c.el)==null?void 0:d.offsetHeight)||0)+u8}),i+=u8;const r=`notification_${b9e++}`,s=n.onClose,a={...n,offset:i,id:r,onClose:()=>{S9e(r,t,s)}};let o=document.body;au(n.appendTo)?o=n.appendTo:un(n.appendTo)&&(o=document.querySelector(n.appendTo)),au(o)||(o=document.body);const l=document.createElement("div"),u=he(_9e,a,pn(a.message)?a.message:Wr(a.message)?()=>a.message:null);return u.appContext=Xi(e)?S_._context:e,u.props.onDestroy=()=>{Zp(null,l)},Zp(u,l),$3[t].push({vm:u}),o.appendChild(l.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}};Qre.forEach(n=>{S_[n]=(e={},t)=>((un(e)||Wr(e))&&(e={message:e}),S_({...e,type:n},t))});function S9e(n,e,t){const i=$3[e],r=i.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===n});if(r===-1)return;const{vm:s}=i[r];if(!s)return;t==null||t(s);const a=s.el.offsetHeight,o=e.split("-")[0];i.splice(r,1);const l=i.length;if(!(l<1))for(let u=r;u<l;u++){const{el:c,component:d}=i[u].vm,f=Number.parseInt(c.style[o],10)-a-u8;d.props.offset=f}}function x9e(){for(const n of Object.values($3))n.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}S_.closeAll=x9e;S_._context=null;const w9e=tte(S_,"$notify");var T9e=[F7e,$7e,n9e,p9e,w9e,die],C9e=hxe([...R7e,...T9e]);const A9e=["href"],E9e=["href"],M9e=["href"],I9e=["href"],D9e=["href"],R9e=Ne({__name:"Header",setup(n){const e={name:"My Blog",link:"https://junyaohu.github.io/"},t={name:"Template",link:"#"},i={ExtDM:{name:"ExtDM - CVPR 2024",link:"https://zzcheng.top/ExtDM/"},MPOT:{name:"MPOT - ICCV 2023",link:"https://zzcheng.top/MPOT/"},ControlNet:{name:"ControlNet - ICCV 2023",link:"https://github.com/lllyasviel/ControlNet"}};return(r,s)=>{const a=Ht("el-menu-item"),o=Ht("el-sub-menu"),l=Ht("el-menu"),u=Ht("el-affix");return j(),gt(u,{offset:0},{default:Ae(()=>[he(l,{"default-active":"1",class:"el-menu-demo",mode:"horizontal",ellipsis:!1},{default:Ae(()=>[he(a,{index:"0"},{default:Ae(()=>[he(S(rn),{size:20},{default:Ae(()=>[he(S(l2e))]),_:1}),Te("a",{href:e.link},Lt(e.name),9,A9e)]),_:1}),he(a,{index:"1"},{default:Ae(()=>[he(S(rn),{size:20},{default:Ae(()=>[he(S(aF))]),_:1}),Te("a",{href:t.link},Lt(t.name),9,E9e)]),_:1}),he(o,{index:"2"},{title:Ae(()=>[An("More")]),default:Ae(()=>[he(a,{index:"2-1"},{default:Ae(()=>[Te("a",{href:i.ExtDM.link},Lt(i.ExtDM.name),9,M9e)]),_:1}),he(a,{index:"2-2"},{default:Ae(()=>[Te("a",{href:i.MPOT.link},Lt(i.MPOT.name),9,I9e)]),_:1}),he(a,{index:"2-3"},{default:Ae(()=>[Te("a",{href:i.ControlNet.link},Lt(i.ControlNet.name),9,D9e)]),_:1})]),_:1})]),_:1})]),_:1})}}}),Fa=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t},P9e=Fa(R9e,[["__scopeId","data-v-e797e596"]]),k9e={class:"paper-title"},L9e=["href"],O9e={class:"author"},N9e={key:0,class:"name_sup"},B9e=["href"],F9e={class:"address"},U9e={key:0,class:"address_sup"},z9e=["href"],H9e={class:"btn-text"},V9e="./logo.png",mG="Academic Project Page Template",$9e="#000000",gG=" (Vue based)",G9e="#42B883",W9e="#444444",q9e="#: Equal Contribution. *: Corresponding Author.",j9e=Ne({__name:"Title",setup(n){const e=[{name:"Your Name",icon:"./icon/junyaohu.jpg",homepage:"https://junyaohu.github.io/",address_flag:"1,#"},{name:"Anya Forger",icon:"./icon/anya.jpg",homepage:"https://www.bilibili.com/video/BV1jv4y1P7Bb",address_flag:"2,#"},{name:"BugCat Capoo",icon:"./icon/capoo.webp",homepage:"https://zh.moegirl.org.cn/%E7%8C%AB%E7%8C%AB%E8%99%AB%E5%92%96%E6%B3%A2",address_flag:"1,*"}],t=[{address_flag:"1",name:"Home University",icon:"./icon/home.png",homepage:"https://github.com/hmuniversity"},{address_flag:"2",name:"IKUN University",icon:"./icon/ikun.avif",homepage:"https://www.bilibili.com/video/BV178411Y7QB"}],i=["🎉 [ABCD 2024] Poster","🥰 欢迎关注“减论”微信公众号/B站/知乎/小红书","传递人工智能算法科普教育的减约理解","提升信息效率及认知维度"],r=[{disabled:!0,name:"Paper",component:o6},{disabled:!0,name:"中译版",component:o6},{disabled:!1,name:"Code",link:"https://github.com/JunyaoHu/academic-project-page-template-vue",component:t2e},{disabled:!1,name:"Demo",link:"https://junyaohu.github.io/academic-project-page-template-vue",component:f2e},{disabled:!0,name:"Poster",component:S2e},{disabled:!0,name:"Slide",component:Yxe},{disabled:!1,name:"Video (减论)",link:"https://www.bilibili.com/video/BV15XkgYiE73/",component:SV},{disabled:!1,name:"Video (Tutorial)",link:"https://www.bilibili.com/video/BV1oUrfYzEqZ",component:SV}];return(s,a)=>{const o=Ht("el-alert"),l=Ht("el-col"),u=Ht("el-row"),c=Ht("el-image"),d=Ht("el-avatar"),f=Ht("el-button");return j(),_e("div",null,[he(u,{justify:"center"},{default:Ae(()=>[he(l,{span:24},{default:Ae(()=>[he(o,{title:"🔥 This template is still under development.",type:"success"})]),_:1})]),_:1}),(j(),gt(u,{key:0,justify:"center"},{default:Ae(()=>[he(c,{src:V9e,class:"logo",fit:"cover"})]),_:1})),he(u,{justify:"center"},{default:Ae(()=>[he(l,{span:20},{default:Ae(()=>[Te("h1",k9e,[mG?(j(),_e("span",{key:0,style:Jt({color:$9e})},Lt(mG),4)):ot("",!0),gG?(j(),_e("span",{key:1,style:Jt({color:G9e})},Lt(gG),4)):ot("",!0)])]),_:1})]),_:1}),he(u,{justify:"center"},{default:Ae(()=>[(j(),_e(an,null,ti(e,h=>Te("a",{href:h.homepage},[he(f,{class:"title-button",type:"primary",text:""},{default:Ae(()=>[h.icon?(j(),gt(d,{key:0,size:40,src:h.icon},null,8,["src"])):ot("",!0),Te("span",O9e,[An(Lt(h.name),1),h.address_flag?(j(),_e("sup",N9e,Lt(h.address_flag),1)):ot("",!0)])]),_:2},1024)],8,L9e)),64))]),_:1}),he(u,{justify:"center"},{default:Ae(()=>[(j(),_e(an,null,ti(t,h=>Te("a",{href:h.homepage},[he(f,{class:"title-button",type:"primary",text:""},{default:Ae(()=>[h.icon?(j(),gt(d,{key:0,size:40,src:h.icon},null,8,["src"])):ot("",!0),Te("span",F9e,[h.address_flag?(j(),_e("sup",U9e,Lt(h.address_flag),1)):ot("",!0),An(Lt(h.name),1)])]),_:2},1024)],8,B9e)),64))]),_:1}),he(u,{justify:"center",class:"con-cor"},{default:Ae(()=>[An(Lt(q9e))]),_:1}),(j(),_e(an,null,ti(i,h=>he(u,{justify:"center",class:"emphasis"},{default:Ae(()=>[An(Lt(h),1)]),_:2},1024)),64)),he(u,{justify:"center",style:{"margin-bottom":"20px"}},{default:Ae(()=>[he(l,{span:20},{default:Ae(()=>[he(u,{justify:"center"},{default:Ae(()=>[(j(),_e(an,null,ti(r,h=>Te("a",{href:h.link},[he(f,{class:"guidance-button",size:"default",color:W9e,disabled:h.disabled,round:""},{default:Ae(()=>[he(S(rn),{size:18},{default:Ae(()=>[(j(),gt(ei(h.component)))]),_:2},1024),Te("span",H9e,Lt(h.name),1)]),_:2},1032,["disabled"])],8,z9e)),64))]),_:1})]),_:1})]),_:1})])}}}),K9e=Fa(j9e,[["__scopeId","data-v-11025f33"]]),X9e={data(){return{abstract:"Aute amet minim mollit nisi adipisicing cupidatat. Duis sit tempor consequat ea nisi qui consequat deserunt. Officia duis sit mollit dolor officia occaecat. Minim aute excepteur nostrud adipisicing magna nisi amet. Laborum aliqua ut ex cillum qui ipsum tempor officia sunt. Reprehenderit est ex sit fugiat laborum reprehenderit proident deserunt sint pariatur cillum voluptate irure. Voluptate laboris velit veniam exercitation sunt eiusmod occaecat velit fugiat ad."}}},Y9e=n=>(cc("data-v-70b04dcc"),n=n(),dc(),n),Q9e=Y9e(()=>Te("h1",{class:"section-title"},"Abstract",-1));function Z9e(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[Q9e]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(l,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[Te("p",null,Lt(r.abstract),1)]),_:1})]),_:1})])}const J9e=Fa(X9e,[["render",Z9e],["__scopeId","data-v-70b04dcc"]]),eUe={data(){return{bibtex:["@article{junyaohu2023template,","    title={Academic Project Page Template Vue},","    author={Hu, Junyao},","    journal={GitHub},","    year={2023}","}"]}},methods:{copyVal(){let n=document.createElement("textarea"),e=document.getElementsByTagName("pre")[0].innerText;n.value=e,document.body.appendChild(n),n.select(),document.execCommand("Copy"),this.$message.success("Copy Successfully"),n.remove()}}},_7=n=>(cc("data-v-fd59b5c2"),n=n(),dc(),n),tUe=_7(()=>Te("h1",{class:"section-title"},"BibTeX",-1)),nUe=_7(()=>Te("div",{style:{"text-align":"center",color:"var(--el-text-color-secondary)"}},"🖱️ Click here to copy BibTex.",-1)),iUe={class:"code"},rUe=_7(()=>Te("br",null,null,-1));function sUe(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("el-scrollbar"),u=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[tUe]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(u,{class:"bibtex",xs:24,sm:20,md:14,lg:12,xl:12},{default:Ae(()=>[he(l,{style:{margin:"10px 20px 5px 20px"},onClick:e[0]||(e[0]=c=>s.copyVal())},{default:Ae(()=>[nUe,Te("pre",null,[(j(!0),_e(an,null,ti(r.bibtex,c=>(j(),_e("code",iUe,[An(Lt(c),1),rUe]))),256))])]),_:1})]),_:1})]),_:1})])}const aUe=Fa(eUe,[["render",sUe],["__scopeId","data-v-fd59b5c2"]]);function vG(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function b7(n,e){n===void 0&&(n={}),e===void 0&&(e={}),Object.keys(e).forEach(t=>{typeof n[t]>"u"?n[t]=e[t]:vG(e[t])&&vG(n[t])&&Object.keys(e[t]).length>0&&b7(n[t],e[t])})}const Zre={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Bd(){const n=typeof document<"u"?document:{};return b7(n,Zre),n}const oUe={document:Zre,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function gu(){const n=typeof window<"u"?window:{};return b7(n,oUe),n}function lUe(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function c8(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function G3(){return Date.now()}function uUe(n){const e=gu();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function cUe(n,e){e===void 0&&(e="x");const t=gu();let i,r,s;const a=uUe(n);return t.WebKitCSSMatrix?(r=a.transform||a.webkitTransform,r.split(",").length>6&&(r=r.split(", ").map(o=>o.replace(",",".")).join(", ")),s=new t.WebKitCSSMatrix(r==="none"?"":r)):(s=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=s.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?r=s.m41:i.length===16?r=parseFloat(i[12]):r=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?r=s.m42:i.length===16?r=parseFloat(i[13]):r=parseFloat(i[5])),r||0}function sA(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function dUe(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Jl(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!dUe(i)){const r=Object.keys(Object(i)).filter(s=>e.indexOf(s)<0);for(let s=0,a=r.length;s<a;s+=1){const o=r[s],l=Object.getOwnPropertyDescriptor(i,o);l!==void 0&&l.enumerable&&(sA(n[o])&&sA(i[o])?i[o].__swiper__?n[o]=i[o]:Jl(n[o],i[o]):!sA(n[o])&&sA(i[o])?(n[o]={},i[o].__swiper__?n[o]=i[o]:Jl(n[o],i[o])):n[o]=i[o])}}}return n}function aA(n,e,t){n.style.setProperty(e,t)}function Jre(n){let{swiper:e,targetPosition:t,side:i}=n;const r=gu(),s=-e.translate;let a=null,o;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",r.cancelAnimationFrame(e.cssModeFrameID);const u=t>s?"next":"prev",c=(f,h)=>u==="next"&&f>=h||u==="prev"&&f<=h,d=()=>{o=new Date().getTime(),a===null&&(a=o);const f=Math.max(Math.min((o-a)/l,1),0),h=.5-Math.cos(f*Math.PI)/2;let p=s+h*(t-s);if(c(p,t)&&(p=t),e.wrapperEl.scrollTo({[i]:p}),c(p,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:p})}),r.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=r.requestAnimationFrame(d)};d()}function Ad(n,e){return e===void 0&&(e=""),[...n.children].filter(t=>t.matches(e))}function ese(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:[e]),t}function fUe(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function hUe(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function Ip(n,e){return gu().getComputedStyle(n,null).getPropertyValue(e)}function W3(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function tse(n,e){const t=[];let i=n.parentElement;for(;i;)e?i.matches(e)&&t.push(i):t.push(i),i=i.parentElement;return t}function d8(n,e,t){const i=gu();return t?n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom")):n.offsetWidth}let SP;function pUe(){const n=gu(),e=Bd();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function nse(){return SP||(SP=pUe()),SP}let xP;function mUe(n){let{userAgent:e}=n===void 0?{}:n;const t=nse(),i=gu(),r=i.navigator.platform,s=e||i.navigator.userAgent,a={ios:!1,android:!1},o=i.screen.width,l=i.screen.height,u=s.match(/(Android);?[\s\/]+([\d.]+)?/);let c=s.match(/(iPad).*OS\s([\d_]+)/);const d=s.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&s.match(/(iPhone\sOS|iOS)\s([\d_]+)/),h=r==="Win32";let p=r==="MacIntel";const m=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&p&&t.touch&&m.indexOf(`${o}x${l}`)>=0&&(c=s.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),p=!1),u&&!h&&(a.os="android",a.android=!0),(c||f||d)&&(a.os="ios",a.ios=!0),a}function gUe(n){return n===void 0&&(n={}),xP||(xP=mUe(n)),xP}let wP;function vUe(){const n=gu();let e=!1;function t(){const i=n.navigator.userAgent.toLowerCase();return i.indexOf("safari")>=0&&i.indexOf("chrome")<0&&i.indexOf("android")<0}if(t()){const i=String(n.navigator.userAgent);if(i.includes("Version/")){const[r,s]=i.split("Version/")[1].split(" ")[0].split(".").map(a=>Number(a));e=r<16||r===16&&s<2}}return{isSafari:e||t(),needPerspectiveFix:e,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent)}}function yUe(){return wP||(wP=vUe()),wP}function _Ue(n){let{swiper:e,on:t,emit:i}=n;const r=gu();let s=null,a=null;const o=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(s=new ResizeObserver(d=>{a=r.requestAnimationFrame(()=>{const{width:f,height:h}=e;let p=f,m=h;d.forEach(g=>{let{contentBoxSize:v,contentRect:_,target:y}=g;y&&y!==e.el||(p=_?_.width:(v[0]||v).inlineSize,m=_?_.height:(v[0]||v).blockSize)}),(p!==f||m!==h)&&o()})}),s.observe(e.el))},u=()=>{a&&r.cancelAnimationFrame(a),s&&s.unobserve&&e.el&&(s.unobserve(e.el),s=null)},c=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof r.ResizeObserver<"u"){l();return}r.addEventListener("resize",o),r.addEventListener("orientationchange",c)}),t("destroy",()=>{u(),r.removeEventListener("resize",o),r.removeEventListener("orientationchange",c)})}function bUe(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s=[],a=gu(),o=function(c,d){d===void 0&&(d={});const f=a.MutationObserver||a.WebkitMutationObserver,h=new f(p=>{if(e.__preventObserver__)return;if(p.length===1){r("observerUpdate",p[0]);return}const m=function(){r("observerUpdate",p[0])};a.requestAnimationFrame?a.requestAnimationFrame(m):a.setTimeout(m,0)});h.observe(c,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:typeof d.childList>"u"?!0:d.childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),s.push(h)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=tse(e.hostEl);for(let d=0;d<c.length;d+=1)o(c[d])}o(e.hostEl,{childList:e.params.observeSlideChildren}),o(e.wrapperEl,{attributes:!1})}},u=()=>{s.forEach(c=>{c.disconnect()}),s.splice(0,s.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",l),i("destroy",u)}var SUe={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const r=t?"unshift":"push";return n.split(" ").forEach(s=>{i.eventsListeners[s]||(i.eventsListeners[s]=[]),i.eventsListeners[s][r](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function r(){i.off(n,r),r.__emitterProxy&&delete r.__emitterProxy;for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];e.apply(i,a)}return r.__emitterProxy=e,i.on(n,r,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((r,s)=>{(r===e||r.__emitterProxy&&r.__emitterProxy===e)&&t.eventsListeners[i].splice(s,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return typeof s[0]=="string"||Array.isArray(s[0])?(e=s[0],t=s.slice(1,s.length),i=n):(e=s[0].events,t=s[0].data,i=s[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(u=>{u.apply(i,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(u=>{u.apply(i,t)})}),n}};function xUe(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Ip(i,"padding-left")||0,10)-parseInt(Ip(i,"padding-right")||0,10),t=t-parseInt(Ip(i,"padding-top")||0,10)-parseInt(Ip(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function wUe(){const n=this;function e(I){return n.isHorizontal()?I:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[I]}function t(I,k){return parseFloat(I.getPropertyValue(e(k))||0)}const i=n.params,{wrapperEl:r,slidesEl:s,size:a,rtlTranslate:o,wrongRTL:l}=n,u=n.virtual&&i.virtual.enabled,c=u?n.virtual.slides.length:n.slides.length,d=Ad(s,`.${n.params.slideClass}, swiper-slide`),f=u?n.virtual.slides.length:d.length;let h=[];const p=[],m=[];let g=i.slidesOffsetBefore;typeof g=="function"&&(g=i.slidesOffsetBefore.call(n));let v=i.slidesOffsetAfter;typeof v=="function"&&(v=i.slidesOffsetAfter.call(n));const _=n.snapGrid.length,y=n.slidesGrid.length;let b=i.spaceBetween,x=-g,w=0,A=0;if(typeof a>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*a:typeof b=="string"&&(b=parseFloat(b)),n.virtualSize=-b,d.forEach(I=>{o?I.style.marginLeft="":I.style.marginRight="",I.style.marginBottom="",I.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(aA(r,"--swiper-centered-offset-before",""),aA(r,"--swiper-centered-offset-after",""));const T=i.grid&&i.grid.rows>1&&n.grid;T&&n.grid.initSlides(f);let C;const E=i.slidesPerView==="auto"&&i.breakpoints&&Object.keys(i.breakpoints).filter(I=>typeof i.breakpoints[I].slidesPerView<"u").length>0;for(let I=0;I<f;I+=1){C=0;let k;if(d[I]&&(k=d[I]),T&&n.grid.updateSlide(I,k,f,e),!(d[I]&&Ip(k,"display")==="none")){if(i.slidesPerView==="auto"){E&&(d[I].style[e("width")]="");const O=getComputedStyle(k),U=k.style.transform,z=k.style.webkitTransform;if(U&&(k.style.transform="none"),z&&(k.style.webkitTransform="none"),i.roundLengths)C=n.isHorizontal()?d8(k,"width",!0):d8(k,"height",!0);else{const L=t(O,"width"),G=t(O,"padding-left"),H=t(O,"padding-right"),F=t(O,"margin-left"),X=t(O,"margin-right"),te=O.getPropertyValue("box-sizing");if(te&&te==="border-box")C=L+F+X;else{const{clientWidth:re,offsetWidth:ie}=k;C=L+G+H+F+X+(ie-re)}}U&&(k.style.transform=U),z&&(k.style.webkitTransform=z),i.roundLengths&&(C=Math.floor(C))}else C=(a-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(C=Math.floor(C)),d[I]&&(d[I].style[e("width")]=`${C}px`);d[I]&&(d[I].swiperSlideSize=C),m.push(C),i.centeredSlides?(x=x+C/2+w/2+b,w===0&&I!==0&&(x=x-a/2-b),I===0&&(x=x-a/2-b),Math.abs(x)<1/1e3&&(x=0),i.roundLengths&&(x=Math.floor(x)),A%i.slidesPerGroup===0&&h.push(x),p.push(x)):(i.roundLengths&&(x=Math.floor(x)),(A-Math.min(n.params.slidesPerGroupSkip,A))%n.params.slidesPerGroup===0&&h.push(x),p.push(x),x=x+C+b),n.virtualSize+=C+b,w=C,A+=1}}if(n.virtualSize=Math.max(n.virtualSize,a)+v,o&&l&&(i.effect==="slide"||i.effect==="coverflow")&&(r.style.width=`${n.virtualSize+b}px`),i.setWrapperSize&&(r.style[e("width")]=`${n.virtualSize+b}px`),T&&n.grid.updateWrapperSize(C,h,e),!i.centeredSlides){const I=[];for(let k=0;k<h.length;k+=1){let O=h[k];i.roundLengths&&(O=Math.floor(O)),h[k]<=n.virtualSize-a&&I.push(O)}h=I,Math.floor(n.virtualSize-a)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-a)}if(u&&i.loop){const I=m[0]+b;if(i.slidesPerGroup>1){const k=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/i.slidesPerGroup),O=I*i.slidesPerGroup;for(let U=0;U<k;U+=1)h.push(h[h.length-1]+O)}for(let k=0;k<n.virtual.slidesBefore+n.virtual.slidesAfter;k+=1)i.slidesPerGroup===1&&h.push(h[h.length-1]+I),p.push(p[p.length-1]+I),n.virtualSize+=I}if(h.length===0&&(h=[0]),b!==0){const I=n.isHorizontal()&&o?"marginLeft":e("marginRight");d.filter((k,O)=>!i.cssMode||i.loop?!0:O!==d.length-1).forEach(k=>{k.style[I]=`${b}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let I=0;m.forEach(O=>{I+=O+(b||0)}),I-=b;const k=I-a;h=h.map(O=>O<=0?-g:O>k?k+v:O)}if(i.centerInsufficientSlides){let I=0;if(m.forEach(k=>{I+=k+(b||0)}),I-=b,I<a){const k=(a-I)/2;h.forEach((O,U)=>{h[U]=O-k}),p.forEach((O,U)=>{p[U]=O+k})}}if(Object.assign(n,{slides:d,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){aA(r,"--swiper-centered-offset-before",`${-h[0]}px`),aA(r,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const I=-n.snapGrid[0],k=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(O=>O+I),n.slidesGrid=n.slidesGrid.map(O=>O+k)}if(f!==c&&n.emit("slidesLengthChange"),h.length!==_&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==y&&n.emit("slidesGridLengthChange"),i.watchSlidesProgress&&n.updateSlidesOffset(),!u&&!i.cssMode&&(i.effect==="slide"||i.effect==="fade")){const I=`${i.containerModifierClass}backface-hidden`,k=n.el.classList.contains(I);f<=i.maxBackfaceHiddenSlides?k||n.el.classList.add(I):k&&n.el.classList.remove(I)}}function TUe(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let r=0,s;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const a=o=>i?e.slides[e.getSlideIndexByData(o)]:e.slides[o];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(o=>{t.push(o)});else for(s=0;s<Math.ceil(e.params.slidesPerView);s+=1){const o=e.activeIndex+s;if(o>e.slides.length&&!i)break;t.push(a(o))}else t.push(a(e.activeIndex));for(s=0;s<t.length;s+=1)if(typeof t[s]<"u"){const o=t[s].offsetHeight;r=o>r?o:r}(r||r===0)&&(e.wrapperEl.style.height=`${r}px`)}function CUe(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}function AUe(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:r,snapGrid:s}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let a=-n;r&&(a=n),i.forEach(l=>{l.classList.remove(t.slideVisibleClass)}),e.visibleSlidesIndexes=[],e.visibleSlides=[];let o=t.spaceBetween;typeof o=="string"&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*e.size:typeof o=="string"&&(o=parseFloat(o));for(let l=0;l<i.length;l+=1){const u=i[l];let c=u.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=i[0].swiperSlideOffset);const d=(a+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),f=(a-s[0]+(t.centeredSlides?e.minTranslate():0)-c)/(u.swiperSlideSize+o),h=-(a-c),p=h+e.slidesSizesGrid[l];(h>=0&&h<e.size-1||p>1&&p<=e.size||h<=0&&p>=e.size)&&(e.visibleSlides.push(u),e.visibleSlidesIndexes.push(l),i[l].classList.add(t.slideVisibleClass)),u.progress=r?-d:d,u.originalProgress=r?-f:f}}function EUe(n){const e=this;if(typeof n>"u"){const c=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*c||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:r,isBeginning:s,isEnd:a,progressLoop:o}=e;const l=s,u=a;if(i===0)r=0,s=!0,a=!0;else{r=(n-e.minTranslate())/i;const c=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;s=c||r<=0,a=d||r>=1,c&&(r=0),d&&(r=1)}if(t.loop){const c=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[c],h=e.slidesGrid[d],p=e.slidesGrid[e.slidesGrid.length-1],m=Math.abs(n);m>=f?o=(m-f)/p:o=(m+p-h)/p,o>1&&(o-=1)}Object.assign(e,{progress:r,progressLoop:o,isBeginning:s,isEnd:a}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),s&&!l&&e.emit("reachBeginning toEdge"),a&&!u&&e.emit("reachEnd toEdge"),(l&&!s||u&&!a)&&e.emit("fromEdge"),e.emit("progress",r)}function MUe(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:r}=n,s=n.virtual&&t.virtual.enabled,a=l=>Ad(i,`.${t.slideClass}${l}, swiper-slide${l}`)[0];e.forEach(l=>{l.classList.remove(t.slideActiveClass,t.slideNextClass,t.slidePrevClass)});let o;if(s)if(t.loop){let l=r-n.virtual.slidesBefore;l<0&&(l=n.virtual.slides.length+l),l>=n.virtual.slides.length&&(l-=n.virtual.slides.length),o=a(`[data-swiper-slide-index="${l}"]`)}else o=a(`[data-swiper-slide-index="${r}"]`);else o=e[r];if(o){o.classList.add(t.slideActiveClass);let l=hUe(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!l&&(l=e[0]),l&&l.classList.add(t.slideNextClass);let u=fUe(o,`.${t.slideClass}, swiper-slide`)[0];t.loop&&!u===0&&(u=e[e.length-1]),u&&u.classList.add(t.slidePrevClass)}n.emitSlidesClasses()}const RM=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let r=i.querySelector(`.${n.params.lazyPreloaderClass}`);!r&&n.isElement&&(i.shadowRoot?r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(r=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),r&&r.remove())})),r&&r.remove()}},TP=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},f8=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),r=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const a=r,o=[a-e];o.push(...Array.from({length:e}).map((l,u)=>a+i+u)),n.slides.forEach((l,u)=>{o.includes(l.column)&&TP(n,u)});return}const s=r+i-1;if(n.params.rewind||n.params.loop)for(let a=r-e;a<=s+e;a+=1){const o=(a%t+t)%t;(o<r||o>s)&&TP(n,o)}else for(let a=Math.max(r-e,0);a<=Math.min(s+e,t-1);a+=1)a!==r&&(a>s||a<r)&&TP(n,a)};function IUe(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let r;for(let s=0;s<e.length;s+=1)typeof e[s+1]<"u"?i>=e[s]&&i<e[s+1]-(e[s+1]-e[s])/2?r=s:i>=e[s]&&i<e[s+1]&&(r=s+1):i>=e[s]&&(r=s);return t.normalizeSlideIndex&&(r<0||typeof r>"u")&&(r=0),r}function DUe(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:r,activeIndex:s,realIndex:a,snapIndex:o}=e;let l=n,u;const c=f=>{let h=f-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=IUe(e)),i.indexOf(t)>=0)u=i.indexOf(t);else{const f=Math.min(r.slidesPerGroupSkip,l);u=f+Math.floor((l-f)/r.slidesPerGroup)}if(u>=i.length&&(u=i.length-1),l===s){u!==o&&(e.snapIndex=u,e.emit("snapIndexChange")),e.params.loop&&e.virtual&&e.params.virtual.enabled&&(e.realIndex=c(l));return}let d;e.virtual&&r.virtual.enabled&&r.loop?d=c(l):e.slides[l]?d=parseInt(e.slides[l].getAttribute("data-swiper-slide-index")||l,10):d=l,Object.assign(e,{previousSnapIndex:o,snapIndex:u,previousRealIndex:a,realIndex:d,previousIndex:s,activeIndex:l}),e.initialized&&f8(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(a!==d&&e.emit("realIndexChange"),e.emit("slideChange"))}function RUe(n,e){const t=this,i=t.params;let r=n.closest(`.${i.slideClass}, swiper-slide`);!r&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(o=>{!r&&o.matches&&o.matches(`.${i.slideClass}, swiper-slide`)&&(r=o)});let s=!1,a;if(r){for(let o=0;o<t.slides.length;o+=1)if(t.slides[o]===r){s=!0,a=o;break}}if(r&&s)t.clickedSlide=r,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(r.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=a;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var PUe={updateSize:xUe,updateSlides:wUe,updateAutoHeight:TUe,updateSlidesOffset:CUe,updateSlidesProgress:AUe,updateProgress:EUe,updateSlidesClasses:MUe,updateActiveIndex:DUe,updateClickedSlide:RUe};function kUe(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:r,wrapperEl:s}=e;if(t.virtualTranslate)return i?-r:r;if(t.cssMode)return r;let a=cUe(s,n);return a+=e.cssOverflowAdjustment(),i&&(a=-a),a||0}function LUe(n,e){const t=this,{rtlTranslate:i,params:r,wrapperEl:s,progress:a}=t;let o=0,l=0;const u=0;t.isHorizontal()?o=i?-n:n:l=n,r.roundLengths&&(o=Math.floor(o),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?o:l,r.cssMode?s[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-o:-l:r.virtualTranslate||(t.isHorizontal()?o-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),s.style.transform=`translate3d(${o}px, ${l}px, ${u}px)`);let c;const d=t.maxTranslate()-t.minTranslate();d===0?c=0:c=(n-t.minTranslate())/d,c!==a&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function OUe(){return-this.snapGrid[0]}function NUe(){return-this.snapGrid[this.snapGrid.length-1]}function BUe(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const s=this,{params:a,wrapperEl:o}=s;if(s.animating&&a.preventInteractionOnTransition)return!1;const l=s.minTranslate(),u=s.maxTranslate();let c;if(i&&n>l?c=l:i&&n<u?c=u:c=n,s.updateProgress(c),a.cssMode){const d=s.isHorizontal();if(e===0)o[d?"scrollLeft":"scrollTop"]=-c;else{if(!s.support.smoothScroll)return Jre({swiper:s,targetPosition:-c,side:d?"left":"top"}),!0;o.scrollTo({[d?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(s.setTransition(0),s.setTranslate(c),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionEnd"))):(s.setTransition(e),s.setTranslate(c),t&&(s.emit("beforeTransitionStart",e,r),s.emit("transitionStart")),s.animating||(s.animating=!0,s.onTranslateToWrapperTransitionEnd||(s.onTranslateToWrapperTransitionEnd=function(f){!s||s.destroyed||f.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onTranslateToWrapperTransitionEnd),s.onTranslateToWrapperTransitionEnd=null,delete s.onTranslateToWrapperTransitionEnd,t&&s.emit("transitionEnd"))}),s.wrapperEl.addEventListener("transitionend",s.onTranslateToWrapperTransitionEnd))),!0}var FUe={getTranslate:kUe,setTranslate:LUe,minTranslate:OUe,maxTranslate:NUe,translateTo:BUe};function UUe(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function ise(n){let{swiper:e,runCallbacks:t,direction:i,step:r}=n;const{activeIndex:s,previousIndex:a}=e;let o=i;if(o||(s>a?o="next":s<a?o="prev":o="reset"),e.emit(`transition${r}`),t&&s!==a){if(o==="reset"){e.emit(`slideResetTransition${r}`);return}e.emit(`slideChangeTransition${r}`),o==="next"?e.emit(`slideNextTransition${r}`):e.emit(`slidePrevTransition${r}`)}}function zUe(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),ise({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function HUe(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),ise({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var VUe={setTransition:UUe,transitionStart:zUe,transitionEnd:HUe};function $Ue(n,e,t,i,r){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;let a=n;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:u,previousIndex:c,activeIndex:d,rtlTranslate:f,wrapperEl:h,enabled:p}=s;if(s.animating&&o.preventInteractionOnTransition||!p&&!i&&!r)return!1;const m=Math.min(s.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/s.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const v=-l[g];if(o.normalizeSlideIndex)for(let y=0;y<u.length;y+=1){const b=-Math.floor(v*100),x=Math.floor(u[y]*100),w=Math.floor(u[y+1]*100);typeof u[y+1]<"u"?b>=x&&b<w-(w-x)/2?a=y:b>=x&&b<w&&(a=y+1):b>=x&&(a=y)}if(s.initialized&&a!==d&&(!s.allowSlideNext&&(f?v>s.translate&&v>s.minTranslate():v<s.translate&&v<s.minTranslate())||!s.allowSlidePrev&&v>s.translate&&v>s.maxTranslate()&&(d||0)!==a))return!1;a!==(c||0)&&t&&s.emit("beforeSlideChangeStart"),s.updateProgress(v);let _;if(a>d?_="next":a<d?_="prev":_="reset",f&&-v===s.translate||!f&&v===s.translate)return s.updateActiveIndex(a),o.autoHeight&&s.updateAutoHeight(),s.updateSlidesClasses(),o.effect!=="slide"&&s.setTranslate(v),_!=="reset"&&(s.transitionStart(t,_),s.transitionEnd(t,_)),!1;if(o.cssMode){const y=s.isHorizontal(),b=f?v:-v;if(e===0){const x=s.virtual&&s.params.virtual.enabled;x&&(s.wrapperEl.style.scrollSnapType="none",s._immediateVirtual=!0),x&&!s._cssModeVirtualInitialSet&&s.params.initialSlide>0?(s._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[y?"scrollLeft":"scrollTop"]=b})):h[y?"scrollLeft":"scrollTop"]=b,x&&requestAnimationFrame(()=>{s.wrapperEl.style.scrollSnapType="",s._immediateVirtual=!1})}else{if(!s.support.smoothScroll)return Jre({swiper:s,targetPosition:b,side:y?"left":"top"}),!0;h.scrollTo({[y?"left":"top"]:b,behavior:"smooth"})}return!0}return s.setTransition(e),s.setTranslate(v),s.updateActiveIndex(a),s.updateSlidesClasses(),s.emit("beforeTransitionStart",e,i),s.transitionStart(t,_),e===0?s.transitionEnd(t,_):s.animating||(s.animating=!0,s.onSlideToWrapperTransitionEnd||(s.onSlideToWrapperTransitionEnd=function(b){!s||s.destroyed||b.target===this&&(s.wrapperEl.removeEventListener("transitionend",s.onSlideToWrapperTransitionEnd),s.onSlideToWrapperTransitionEnd=null,delete s.onSlideToWrapperTransitionEnd,s.transitionEnd(t,_))}),s.wrapperEl.addEventListener("transitionend",s.onSlideToWrapperTransitionEnd)),!0}function GUe(n,e,t,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const r=this;let s=n;return r.params.loop&&(r.virtual&&r.params.virtual.enabled?s=s+r.virtual.slidesBefore:s=r.getSlideIndexByData(s)),r.slideTo(s,e,t,i)}function WUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{enabled:r,params:s,animating:a}=i;if(!r)return i;let o=s.slidesPerGroup;s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(o=Math.max(i.slidesPerViewDynamic("current",!0),1));const l=i.activeIndex<s.slidesPerGroupSkip?1:o,u=i.virtual&&s.virtual.enabled;if(s.loop){if(a&&!u&&s.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&s.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+l,n,e,t)}),!0}return s.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+l,n,e,t)}function qUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this,{params:r,snapGrid:s,slidesGrid:a,rtlTranslate:o,enabled:l,animating:u}=i;if(!l)return i;const c=i.virtual&&r.virtual.enabled;if(r.loop){if(u&&!c&&r.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const d=o?i.translate:-i.translate;function f(v){return v<0?-Math.floor(Math.abs(v)):Math.floor(v)}const h=f(d),p=s.map(v=>f(v));let m=s[p.indexOf(h)-1];if(typeof m>"u"&&r.cssMode){let v;s.forEach((_,y)=>{h>=_&&(v=y)}),typeof v<"u"&&(m=s[v>0?v-1:v])}let g=0;if(typeof m<"u"&&(g=a.indexOf(m),g<0&&(g=i.activeIndex-1),r.slidesPerView==="auto"&&r.slidesPerGroup===1&&r.slidesPerGroupAuto&&(g=g-i.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),r.rewind&&i.isBeginning){const v=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(v,n,e,t)}else if(r.loop&&i.activeIndex===0&&r.cssMode)return requestAnimationFrame(()=>{i.slideTo(g,n,e,t)}),!0;return i.slideTo(g,n,e,t)}function jUe(n,e,t){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0);const i=this;return i.slideTo(i.activeIndex,n,e,t)}function KUe(n,e,t,i){n===void 0&&(n=this.params.speed),e===void 0&&(e=!0),i===void 0&&(i=.5);const r=this;let s=r.activeIndex;const a=Math.min(r.params.slidesPerGroupSkip,s),o=a+Math.floor((s-a)/r.params.slidesPerGroup),l=r.rtlTranslate?r.translate:-r.translate;if(l>=r.snapGrid[o]){const u=r.snapGrid[o],c=r.snapGrid[o+1];l-u>(c-u)*i&&(s+=r.params.slidesPerGroup)}else{const u=r.snapGrid[o-1],c=r.snapGrid[o];l-u<=(c-u)*i&&(s-=r.params.slidesPerGroup)}return s=Math.max(s,0),s=Math.min(s,r.slidesGrid.length-1),r.slideTo(s,n,e,t)}function XUe(){const n=this,{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let r=n.clickedIndex,s;const a=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;s=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?r<n.loopedSlides-i/2||r>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),r=n.getSlideIndex(Ad(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),c8(()=>{n.slideTo(r)})):n.slideTo(r):r>n.slides.length-i?(n.loopFix(),r=n.getSlideIndex(Ad(t,`${a}[data-swiper-slide-index="${s}"]`)[0]),c8(()=>{n.slideTo(r)})):n.slideTo(r)}else n.slideTo(r)}var YUe={slideTo:$Ue,slideToLoop:GUe,slideNext:WUe,slidePrev:qUe,slideReset:jUe,slideToClosest:KUe,slideToClickedSlide:XUe};function QUe(n){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||e.virtual&&e.params.virtual.enabled)return;Ad(i,`.${t.slideClass}, swiper-slide`).forEach((s,a)=>{s.setAttribute("data-swiper-slide-index",a)}),e.loopFix({slideRealIndex:n,direction:t.centeredSlides?void 0:"next"})}function ZUe(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:r,activeSlideIndex:s,byController:a,byMousewheel:o}=n===void 0?{}:n;const l=this;if(!l.params.loop)return;l.emit("beforeLoopFix");const{slides:u,allowSlidePrev:c,allowSlideNext:d,slidesEl:f,params:h}=l;if(l.allowSlidePrev=!0,l.allowSlideNext=!0,l.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&l.snapIndex===0?l.slideTo(l.virtual.slides.length,0,!1,!0):h.centeredSlides&&l.snapIndex<h.slidesPerView?l.slideTo(l.virtual.slides.length+l.snapIndex,0,!1,!0):l.snapIndex===l.snapGrid.length-1&&l.slideTo(l.virtual.slidesBefore,0,!1,!0)),l.allowSlidePrev=c,l.allowSlideNext=d,l.emit("loopFix");return}const p=h.slidesPerView==="auto"?l.slidesPerViewDynamic():Math.ceil(parseFloat(h.slidesPerView,10));let m=h.loopedSlides||p;m%h.slidesPerGroup!==0&&(m+=h.slidesPerGroup-m%h.slidesPerGroup),l.loopedSlides=m;const g=[],v=[];let _=l.activeIndex;typeof s>"u"?s=l.getSlideIndex(l.slides.filter(A=>A.classList.contains(h.slideActiveClass))[0]):_=s;const y=i==="next"||!i,b=i==="prev"||!i;let x=0,w=0;if(s<m){x=Math.max(m-s,h.slidesPerGroup);for(let A=0;A<m-s;A+=1){const T=A-Math.floor(A/u.length)*u.length;g.push(u.length-T-1)}}else if(s>l.slides.length-m*2){w=Math.max(s-(l.slides.length-m*2),h.slidesPerGroup);for(let A=0;A<w;A+=1){const T=A-Math.floor(A/u.length)*u.length;v.push(T)}}if(b&&g.forEach(A=>{l.slides[A].swiperLoopMoveDOM=!0,f.prepend(l.slides[A]),l.slides[A].swiperLoopMoveDOM=!1}),y&&v.forEach(A=>{l.slides[A].swiperLoopMoveDOM=!0,f.append(l.slides[A]),l.slides[A].swiperLoopMoveDOM=!1}),l.recalcSlides(),h.slidesPerView==="auto"&&l.updateSlides(),h.watchSlidesProgress&&l.updateSlidesOffset(),t){if(g.length>0&&b)if(typeof e>"u"){const A=l.slidesGrid[_],C=l.slidesGrid[_+x]-A;o?l.setTranslate(l.translate-C):(l.slideTo(_+x,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=C,l.touchEventsData.currentTranslate=l.translate))}else r&&(l.slideToLoop(e,0,!1,!0),l.touchEventsData.currentTranslate=l.translate);else if(v.length>0&&y)if(typeof e>"u"){const A=l.slidesGrid[_],C=l.slidesGrid[_-w]-A;o?l.setTranslate(l.translate-C):(l.slideTo(_-w,0,!1,!0),r&&(l.touches[l.isHorizontal()?"startX":"startY"]+=C,l.touchEventsData.currentTranslate=l.translate))}else l.slideToLoop(e,0,!1,!0)}if(l.allowSlidePrev=c,l.allowSlideNext=d,l.controller&&l.controller.control&&!a){const A={slideRealIndex:e,direction:i,setTranslate:r,activeSlideIndex:s,byController:!0};Array.isArray(l.controller.control)?l.controller.control.forEach(T=>{!T.destroyed&&T.params.loop&&T.loopFix({...A,slideTo:T.params.slidesPerView===h.slidesPerView?t:!1})}):l.controller.control instanceof l.constructor&&l.controller.control.params.loop&&l.controller.control.loopFix({...A,slideTo:l.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}l.emit("loopFix")}function JUe(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(r=>{const s=typeof r.swiperSlideIndex>"u"?r.getAttribute("data-swiper-slide-index")*1:r.swiperSlideIndex;i[s]=r}),n.slides.forEach(r=>{r.removeAttribute("data-swiper-slide-index")}),i.forEach(r=>{t.append(r)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var eze={loopCreate:QUe,loopFix:ZUe,loopDestroy:JUe};function tze(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function nze(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var ize={setGrabCursor:tze,unsetGrabCursor:nze};function rze(n,e){e===void 0&&(e=this);function t(i){if(!i||i===Bd()||i===gu())return null;i.assignedSlot&&(i=i.assignedSlot);const r=i.closest(n);return!r&&!i.getRootNode?null:r||t(i.getRootNode().host)}return t(e)}function sze(n){const e=this,t=Bd(),i=gu(),r=e.touchEventsData;r.evCache.push(n);const{params:s,touches:a,enabled:o}=e;if(!o||!s.simulateTouch&&n.pointerType==="mouse"||e.animating&&s.preventInteractionOnTransition)return;!e.animating&&s.cssMode&&s.loop&&e.loopFix();let l=n;l.originalEvent&&(l=l.originalEvent);let u=l.target;if(s.touchEventsTarget==="wrapper"&&!e.wrapperEl.contains(u)||"which"in l&&l.which===3||"button"in l&&l.button>0||r.isTouched&&r.isMoved)return;const c=!!s.noSwipingClass&&s.noSwipingClass!=="",d=n.composedPath?n.composedPath():n.path;c&&l.target&&l.target.shadowRoot&&d&&(u=d[0]);const f=s.noSwipingSelector?s.noSwipingSelector:`.${s.noSwipingClass}`,h=!!(l.target&&l.target.shadowRoot);if(s.noSwiping&&(h?rze(f,u):u.closest(f))){e.allowClick=!0;return}if(s.swipeHandler&&!u.closest(s.swipeHandler))return;a.currentX=l.pageX,a.currentY=l.pageY;const p=a.currentX,m=a.currentY,g=s.edgeSwipeDetection||s.iOSEdgeSwipeDetection,v=s.edgeSwipeThreshold||s.iOSEdgeSwipeThreshold;if(g&&(p<=v||p>=i.innerWidth-v))if(g==="prevent")n.preventDefault();else return;Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=m,r.touchStartTime=G3(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,s.threshold>0&&(r.allowThresholdMove=!1);let _=!0;u.matches(r.focusableElements)&&(_=!1,u.nodeName==="SELECT"&&(r.isTouched=!1)),t.activeElement&&t.activeElement.matches(r.focusableElements)&&t.activeElement!==u&&t.activeElement.blur();const y=_&&e.allowTouchMove&&s.touchStartPreventDefault;(s.touchStartForcePreventDefault||y)&&!u.isContentEditable&&l.preventDefault(),s.freeMode&&s.freeMode.enabled&&e.freeMode&&e.animating&&!s.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",l)}function aze(n){const e=Bd(),t=this,i=t.touchEventsData,{params:r,touches:s,rtlTranslate:a,enabled:o}=t;if(!o||!r.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=i.evCache.findIndex(A=>A.pointerId===l.pointerId);u>=0&&(i.evCache[u]=l);const c=i.evCache.length>1?i.evCache[0]:l,d=c.pageX,f=c.pageY;if(l.preventedByNestedSwiper){s.startX=d,s.startY=f;return}if(!t.allowTouchMove){l.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(s,{startX:d,startY:f,prevX:t.touches.currentX,prevY:t.touches.currentY,currentX:d,currentY:f}),i.touchStartTime=G3());return}if(r.touchReleaseOnEdges&&!r.loop){if(t.isVertical()){if(f<s.startY&&t.translate<=t.maxTranslate()||f>s.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else if(d<s.startX&&t.translate<=t.maxTranslate()||d>s.startX&&t.translate>=t.minTranslate())return}if(e.activeElement&&l.target===e.activeElement&&l.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}if(i.allowTouchCallbacks&&t.emit("touchMove",l),l.targetTouches&&l.targetTouches.length>1)return;s.currentX=d,s.currentY=f;const h=s.currentX-s.startX,p=s.currentY-s.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let A;t.isHorizontal()&&s.currentY===s.startY||t.isVertical()&&s.currentX===s.startX?i.isScrolling=!1:h*h+p*p>=25&&(A=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,i.isScrolling=t.isHorizontal()?A>r.touchAngle:90-A>r.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",l),typeof i.startMoving>"u"&&(s.currentX!==s.startX||s.currentY!==s.startY)&&(i.startMoving=!0),i.isScrolling||t.zoom&&t.params.zoom&&t.params.zoom.enabled&&i.evCache.length>1){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,g=t.isHorizontal()?s.currentX-s.previousX:s.currentY-s.previousY;r.oneWayMovement&&(m=Math.abs(m)*(a?1:-1),g=Math.abs(g)*(a?1:-1)),s.diff=m,m*=r.touchRatio,a&&(m=-m,g=-g);const v=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";const _=t.params.loop&&!r.cssMode,y=t.swipeDirection==="next"&&t.allowSlideNext||t.swipeDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(_&&y&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const A=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(A)}i.allowMomentumBounce=!1,r.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let b;i.isMoved&&v!==t.touchesDirection&&_&&y&&Math.abs(m)>=1&&(t.loopFix({direction:t.swipeDirection,setTranslate:!0}),b=!0),t.emit("sliderMove",l),i.isMoved=!0,i.currentTranslate=m+i.startTranslate;let x=!0,w=r.resistanceRatio;if(r.touchReleaseOnEdges&&(w=0),m>0?(_&&y&&!b&&i.currentTranslate>(r.centeredSlides?t.minTranslate()-t.size/2:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(x=!1,r.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+m)**w))):m<0&&(_&&y&&!b&&i.currentTranslate<(r.centeredSlides?t.maxTranslate()+t.size/2:t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(r.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(r.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(x=!1,r.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-m)**w))),x&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),r.threshold>0)if(Math.abs(m)>r.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,s.startX=s.currentX,s.startY=s.currentY,i.currentTranslate=i.startTranslate,s.diff=t.isHorizontal()?s.currentX-s.startX:s.currentY-s.startY;return}}else{i.currentTranslate=i.startTranslate;return}!r.followFinger||r.cssMode||((r.freeMode&&r.freeMode.enabled&&t.freeMode||r.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function oze(n){const e=this,t=e.touchEventsData,i=t.evCache.findIndex(y=>y.pointerId===n.pointerId);if(i>=0&&t.evCache.splice(i,1),["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&!(["pointercancel","contextmenu"].includes(n.type)&&(e.browser.isSafari||e.browser.isWebView)))return;const{params:r,touches:s,rtlTranslate:a,slidesGrid:o,enabled:l}=e;if(!l||!r.simulateTouch&&n.pointerType==="mouse")return;let u=n;if(u.originalEvent&&(u=u.originalEvent),t.allowTouchCallbacks&&e.emit("touchEnd",u),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&r.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}r.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const c=G3(),d=c-t.touchStartTime;if(e.allowClick){const y=u.path||u.composedPath&&u.composedPath();e.updateClickedSlide(y&&y[0]||u.target,y),e.emit("tap click",u),d<300&&c-t.lastClickTime<300&&e.emit("doubleTap doubleClick",u)}if(t.lastClickTime=G3(),c8(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||s.diff===0||t.currentTranslate===t.startTranslate){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let f;if(r.followFinger?f=a?e.translate:-e.translate:f=-t.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:f});return}let h=0,p=e.slidesSizesGrid[0];for(let y=0;y<o.length;y+=y<r.slidesPerGroupSkip?1:r.slidesPerGroup){const b=y<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;typeof o[y+b]<"u"?f>=o[y]&&f<o[y+b]&&(h=y,p=o[y+b]-o[y]):f>=o[y]&&(h=y,p=o[o.length-1]-o[o.length-2])}let m=null,g=null;r.rewind&&(e.isBeginning?g=r.virtual&&r.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(m=0));const v=(f-o[h])/p,_=h<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(d>r.longSwipesMs){if(!r.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(v>=r.longSwipesRatio?e.slideTo(r.rewind&&e.isEnd?m:h+_):e.slideTo(h)),e.swipeDirection==="prev"&&(v>1-r.longSwipesRatio?e.slideTo(h+_):g!==null&&v<0&&Math.abs(v)>r.longSwipesRatio?e.slideTo(g):e.slideTo(h))}else{if(!r.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(u.target===e.navigation.nextEl||u.target===e.navigation.prevEl)?u.target===e.navigation.nextEl?e.slideTo(h+_):e.slideTo(h):(e.swipeDirection==="next"&&e.slideTo(m!==null?m:h+_),e.swipeDirection==="prev"&&e.slideTo(g!==null?g:h))}}function yG(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:r,snapGrid:s}=n,a=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const o=a&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!o?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!a?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=r,n.allowSlideNext=i,n.params.watchOverflow&&s!==n.snapGrid&&n.checkOverflow()}function lze(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function uze(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let r;const s=n.maxTranslate()-n.minTranslate();s===0?r=0:r=(n.translate-n.minTranslate())/s,r!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function cze(n){const e=this;RM(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}let _G=!1;function dze(){}const rse=(n,e)=>{const t=Bd(),{params:i,el:r,wrapperEl:s,device:a}=n,o=!!i.nested,l=e==="on"?"addEventListener":"removeEventListener",u=e;r[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:o}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&r[l]("click",n.onClick,!0),i.cssMode&&s[l]("scroll",n.onScroll),i.updateOnWindowResize?n[u](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",yG,!0):n[u]("observerUpdate",yG,!0),r[l]("load",n.onLoad,{capture:!0})};function fze(){const n=this,e=Bd(),{params:t}=n;n.onTouchStart=sze.bind(n),n.onTouchMove=aze.bind(n),n.onTouchEnd=oze.bind(n),t.cssMode&&(n.onScroll=uze.bind(n)),n.onClick=lze.bind(n),n.onLoad=cze.bind(n),_G||(e.addEventListener("touchstart",dze),_G=!0),rse(n,"on")}function hze(){rse(this,"off")}var pze={attachEvents:fze,detachEvents:hze};const bG=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function mze(){const n=this,{realIndex:e,initialized:t,params:i,el:r}=n,s=i.breakpoints;if(!s||s&&Object.keys(s).length===0)return;const a=n.getBreakpoint(s,n.params.breakpointsBase,n.el);if(!a||n.currentBreakpoint===a)return;const l=(a in s?s[a]:void 0)||n.originalParams,u=bG(n,i),c=bG(n,l),d=i.enabled;u&&!c?(r.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!u&&c&&(r.classList.add(`${i.containerModifierClass}grid`),(l.grid.fill&&l.grid.fill==="column"||!l.grid.fill&&i.grid.fill==="column")&&r.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(v=>{if(typeof l[v]>"u")return;const _=i[v]&&i[v].enabled,y=l[v]&&l[v].enabled;_&&!y&&n[v].disable(),!_&&y&&n[v].enable()});const f=l.direction&&l.direction!==i.direction,h=i.loop&&(l.slidesPerView!==i.slidesPerView||f),p=i.loop;f&&t&&n.changeDirection(),Jl(n.params,l);const m=n.params.enabled,g=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),d&&!m?n.disable():!d&&m&&n.enable(),n.currentBreakpoint=a,n.emit("_beforeBreakpoint",l),t&&(h?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!p&&g?(n.loopCreate(e),n.updateSlides()):p&&!g&&n.loopDestroy()),n.emit("breakpoint",l)}function gze(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const r=gu(),s=e==="window"?r.innerHeight:t.clientHeight,a=Object.keys(n).map(o=>{if(typeof o=="string"&&o.indexOf("@")===0){const l=parseFloat(o.substr(1));return{value:s*l,point:o}}return{value:o,point:o}});a.sort((o,l)=>parseInt(o.value,10)-parseInt(l.value,10));for(let o=0;o<a.length;o+=1){const{point:l,value:u}=a[o];e==="window"?r.matchMedia(`(min-width: ${u}px)`).matches&&(i=l):u<=t.clientWidth&&(i=l)}return i||"max"}var vze={setBreakpoint:mze,getBreakpoint:gze};function yze(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(r=>{i[r]&&t.push(e+r)}):typeof i=="string"&&t.push(e+i)}),t}function _ze(){const n=this,{classNames:e,params:t,rtl:i,el:r,device:s}=n,a=yze(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:s.android},{ios:s.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...a),r.classList.add(...e),n.emitContainerClasses()}function bze(){const n=this,{el:e,classNames:t}=n;e.classList.remove(...t),n.emitContainerClasses()}var Sze={addClasses:_ze,removeClasses:bze};function xze(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const r=n.slides.length-1,s=n.slidesGrid[r]+n.slidesSizesGrid[r]+i*2;n.isLocked=n.size>s}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var wze={checkOverflow:xze},h8={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Tze(n,e){return function(i){i===void 0&&(i={});const r=Object.keys(i)[0],s=i[r];if(typeof s!="object"||s===null){Jl(e,i);return}if(n[r]===!0&&(n[r]={enabled:!0}),r==="navigation"&&n[r]&&n[r].enabled&&!n[r].prevEl&&!n[r].nextEl&&(n[r].auto=!0),["pagination","scrollbar"].indexOf(r)>=0&&n[r]&&n[r].enabled&&!n[r].el&&(n[r].auto=!0),!(r in n&&"enabled"in s)){Jl(e,i);return}typeof n[r]=="object"&&!("enabled"in n[r])&&(n[r].enabled=!0),n[r]||(n[r]={enabled:!1}),Jl(e,i)}}const CP={eventsEmitter:SUe,update:PUe,translate:FUe,transition:VUe,slide:YUe,loop:eze,grabCursor:ize,events:pze,breakpoints:vze,checkOverflow:wze,classes:Sze},AP={};let S7=class Df{constructor(){let e,t;for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r.length===1&&r[0].constructor&&Object.prototype.toString.call(r[0]).slice(8,-1)==="Object"?t=r[0]:[e,t]=r,t||(t={}),t=Jl({},t),e&&!t.el&&(t.el=e);const a=Bd();if(t.el&&typeof t.el=="string"&&a.querySelectorAll(t.el).length>1){const c=[];return a.querySelectorAll(t.el).forEach(d=>{const f=Jl({},t,{el:d});c.push(new Df(f))}),c}const o=this;o.__swiper__=!0,o.support=nse(),o.device=gUe({userAgent:t.userAgent}),o.browser=yUe(),o.eventsListeners={},o.eventsAnyListeners=[],o.modules=[...o.__modules__],t.modules&&Array.isArray(t.modules)&&o.modules.push(...t.modules);const l={};o.modules.forEach(c=>{c({params:t,swiper:o,extendParams:Tze(t,l),on:o.on.bind(o),once:o.once.bind(o),off:o.off.bind(o),emit:o.emit.bind(o)})});const u=Jl({},h8,l);return o.params=Jl({},u,AP,t),o.originalParams=Jl({},o.params),o.passedParams=Jl({},t),o.params&&o.params.on&&Object.keys(o.params.on).forEach(c=>{o.on(c,o.params.on[c])}),o.params&&o.params.onAny&&o.onAny(o.params.onAny),Object.assign(o,{enabled:o.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return o.params.direction==="horizontal"},isVertical(){return o.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:o.params.allowSlideNext,allowSlidePrev:o.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:o.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:o.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),o.emit("_swiper"),o.params.init&&o.init(),o}getSlideIndex(e){const{slidesEl:t,params:i}=this,r=Ad(t,`.${i.slideClass}, swiper-slide`),s=W3(r[0]);return W3(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.filter(t=>t.getAttribute("data-swiper-slide-index")*1===e)[0])}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Ad(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const r=i.minTranslate(),a=(i.maxTranslate()-r)*e+r;i.translateTo(a,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const r=e.getSlideClasses(i);t.push({slideEl:i,classNames:r}),e.emit("_slideClass",i,r)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:r,slides:s,slidesGrid:a,slidesSizesGrid:o,size:l,activeIndex:u}=i;let c=1;if(typeof r.slidesPerView=="number")return r.slidesPerView;if(r.centeredSlides){let d=s[u]?s[u].swiperSlideSize:0,f;for(let h=u+1;h<s.length;h+=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,c+=1,d>l&&(f=!0));for(let h=u-1;h>=0;h-=1)s[h]&&!f&&(d+=s[h].swiperSlideSize,c+=1,d>l&&(f=!0))}else if(e==="current")for(let d=u+1;d<s.length;d+=1)(t?a[d]+o[d]-a[u]<l:a[d]-a[u]<l)&&(c+=1);else for(let d=u-1;d>=0;d-=1)a[u]-a[d]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(a=>{a.complete&&RM(e,a)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function r(){const a=e.rtlTranslate?e.translate*-1:e.translate,o=Math.min(Math.max(a,e.maxTranslate()),e.minTranslate());e.setTranslate(o),e.updateActiveIndex(),e.updateSlidesClasses()}let s;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)r(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const a=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;s=e.slideTo(a.length-1,0,!1,!0)}else s=e.slideTo(e.activeIndex,0,!1,!0);s||r()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,r=i.params.direction;return e||(e=r==="horizontal"?"vertical":"horizontal"),e===r||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${r}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(s=>{e==="vertical"?s.style.width="":s.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName==="SWIPER-CONTAINER"&&(t.isElement=!0);const r=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let a=(()=>i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(r()):Ad(i,r())[0])();return!a&&t.params.createElements&&(a=ese("div",t.params.wrapperClass),i.append(a),Ad(i,`.${t.params.slideClass}`).forEach(o=>{a.append(o)})),Object.assign(t,{el:i,wrapperEl:a,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:a,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||Ip(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||Ip(i,"direction")==="rtl"),wrongRTL:Ip(a,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(),t.attachEvents();const r=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&r.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),r.forEach(s=>{s.complete?RM(t,s):s.addEventListener("load",a=>{RM(t,a.target)})}),f8(t),t.initialized=!0,f8(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:r,el:s,wrapperEl:a,slides:o}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),r.loop&&i.loopDestroy(),t&&(i.removeClasses(),s.removeAttribute("style"),a.removeAttribute("style"),o&&o.length&&o.forEach(l=>{l.classList.remove(r.slideVisibleClass,r.slideActiveClass,r.slideNextClass,r.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(l=>{i.off(l)}),e!==!1&&(i.el.swiper=null,lUe(i)),i.destroyed=!0),null}static extendDefaults(e){Jl(AP,e)}static get extendedDefaults(){return AP}static get defaults(){return h8}static installModule(e){Df.prototype.__modules__||(Df.prototype.__modules__=[]);const t=Df.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Df.installModule(t)),Df):(Df.installModule(e),Df)}};Object.keys(CP).forEach(n=>{Object.keys(CP[n]).forEach(e=>{S7.prototype[e]=CP[n][e]})});S7.use([_Ue,bUe]);const sse=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function zg(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function _g(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:zg(e[i])&&zg(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:_g(n[i],e[i]):n[i]=e[i]})}function ase(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function ose(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function lse(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function use(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function Cze(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function Aze(n){let{swiper:e,slides:t,passedParams:i,changedParams:r,nextEl:s,prevEl:a,scrollbarEl:o,paginationEl:l}=n;const u=r.filter(C=>C!=="children"&&C!=="direction"&&C!=="wrapperClass"),{params:c,pagination:d,navigation:f,scrollbar:h,virtual:p,thumbs:m}=e;let g,v,_,y,b,x,w,A;r.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&c.thumbs&&!c.thumbs.swiper&&(g=!0),r.includes("controller")&&i.controller&&i.controller.control&&c.controller&&!c.controller.control&&(v=!0),r.includes("pagination")&&i.pagination&&(i.pagination.el||l)&&(c.pagination||c.pagination===!1)&&d&&!d.el&&(_=!0),r.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||o)&&(c.scrollbar||c.scrollbar===!1)&&h&&!h.el&&(y=!0),r.includes("navigation")&&i.navigation&&(i.navigation.prevEl||a)&&(i.navigation.nextEl||s)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(b=!0);const T=C=>{e[C]&&(e[C].destroy(),C==="navigation"?(e.isElement&&(e[C].prevEl.remove(),e[C].nextEl.remove()),c[C].prevEl=void 0,c[C].nextEl=void 0,e[C].prevEl=void 0,e[C].nextEl=void 0):(e.isElement&&e[C].el.remove(),c[C].el=void 0,e[C].el=void 0))};r.includes("loop")&&e.isElement&&(c.loop&&!i.loop?x=!0:!c.loop&&i.loop?w=!0:A=!0),u.forEach(C=>{if(zg(c[C])&&zg(i[C]))_g(c[C],i[C]),(C==="navigation"||C==="pagination"||C==="scrollbar")&&"enabled"in i[C]&&!i[C].enabled&&T(C);else{const E=i[C];(E===!0||E===!1)&&(C==="navigation"||C==="pagination"||C==="scrollbar")?E===!1&&T(C):c[C]=i[C]}}),u.includes("controller")&&!v&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),r.includes("children")&&t&&p&&c.virtual.enabled&&(p.slides=t,p.update(!0)),r.includes("children")&&t&&c.loop&&(A=!0),g&&m.init()&&m.update(!0),v&&(e.controller.control=c.controller.control),_&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(c.pagination.el=l),d.init(),d.render(),d.update()),y&&(e.isElement&&(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-scrollbar"),o.part.add("scrollbar"),e.el.appendChild(o)),o&&(c.scrollbar.el=o),h.init(),h.updateSize(),h.setTranslate()),b&&(e.isElement&&((!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-next"),s.innerHTML=e.hostEl.constructor.nextButtonSvg,s.part.add("button-next"),e.el.appendChild(s)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),a.innerHTML=e.hostEl.constructor.prevButtonSvg,a.part.add("button-prev"),e.el.appendChild(a))),s&&(c.navigation.nextEl=s),a&&(c.navigation.prevEl=a),f.init(),f.update()),r.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),r.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),r.includes("direction")&&e.changeDirection(i.direction,!1),(x||A)&&e.loopDestroy(),(w||A)&&e.loopCreate(),e.update()}function SG(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},r={};_g(t,h8),t._emitClasses=!0,t.init=!1;const s={},a=sse.map(l=>l.replace(/_/,"")),o=Object.assign({},n);return Object.keys(o).forEach(l=>{typeof n[l]>"u"||(a.indexOf(l)>=0?zg(n[l])?(t[l]={},r[l]={},_g(t[l],n[l]),_g(r[l],n[l])):(t[l]=n[l],r[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?e?i[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:s[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:r,rest:s,events:i}}function Eze(n,e){let{el:t,nextEl:i,prevEl:r,paginationEl:s,scrollbarEl:a,swiper:o}=n;ase(e)&&i&&r&&(o.params.navigation.nextEl=i,o.originalParams.navigation.nextEl=i,o.params.navigation.prevEl=r,o.originalParams.navigation.prevEl=r),ose(e)&&s&&(o.params.pagination.el=s,o.originalParams.pagination.el=s),lse(e)&&a&&(o.params.scrollbar.el=a,o.originalParams.scrollbar.el=a),o.init(t)}function Mze(n,e,t,i,r){const s=[];if(!e)return s;const a=l=>{s.indexOf(l)<0&&s.push(l)};if(t&&i){const l=i.map(r),u=t.map(r);l.join("")!==u.join("")&&a("children"),i.length!==t.length&&a("children")}return sse.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(zg(n[l])&&zg(e[l])){const u=Object.keys(n[l]),c=Object.keys(e[l]);u.length!==c.length?a(l):(u.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}),c.forEach(d=>{n[l][d]!==e[l][d]&&a(l)}))}else n[l]!==e[l]&&a(l)}),s}const Ize=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function EP(n,e,t){n===void 0&&(n={});const i=[],r={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},s=(a,o)=>{Array.isArray(a)&&a.forEach(l=>{const u=typeof l.type=="symbol";o==="default"&&(o="container-end"),u&&l.children?s(l.children,o):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")?i.push(l):r[o]&&r[o].push(l)})};return Object.keys(n).forEach(a=>{if(typeof n[a]!="function")return;const o=n[a]();s(o,a)}),t.value=e.value,e.value=i,{slides:i,slots:r}}function Dze(n,e,t){if(!t)return null;const i=c=>{let d=c;return c<0?d=e.length+c:d>=e.length&&(d=d-e.length),d},r=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:s,to:a}=t,o=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,u=[];for(let c=o;c<l;c+=1)c>=s&&c<=a&&u.push(e[i(c)]);return u.map(c=>(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=n,c.props.style=r,ln(c.type,{...c.props},c.children)))}const Rze={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","breakpointsBase","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:i}=e;const{tag:r,wrapperTag:s}=n,a=ae("swiper"),o=ae(null),l=ae(!1),u=ae(!1),c=ae(null),d=ae(null),f=ae(null),h={value:[]},p={value:[]},m=ae(null),g=ae(null),v=ae(null),_=ae(null),{params:y,passedParams:b}=SG(n,!1);EP(t,h,p),f.value=b,p.value=h.value;const x=()=>{EP(t,h,p),l.value=!0};y.onAny=function(T){for(var C=arguments.length,E=new Array(C>1?C-1:0),I=1;I<C;I++)E[I-1]=arguments[I];i(T,...E)},Object.assign(y.on,{_beforeBreakpoint:x,_containerClasses(T,C){a.value=C}});const w={...y};if(delete w.wrapperClass,d.value=new S7(w),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=h.value;const T={cache:!1,slides:h.value,renderExternal:C=>{o.value=C},renderExternalUpdate:!1};_g(d.value.params.virtual,T),_g(d.value.originalParams.virtual,T)}fc(()=>{!u.value&&d.value&&(d.value.emitSlidesClasses(),u.value=!0);const{passedParams:T}=SG(n,!1),C=Mze(T,f.value,h.value,p.value,E=>E.props&&E.props.key);f.value=T,(C.length||l.value)&&d.value&&!d.value.destroyed&&Aze({swiper:d.value,slides:h.value,passedParams:T,changedParams:C,nextEl:m.value,prevEl:g.value,scrollbarEl:_.value,paginationEl:v.value}),l.value=!1}),ui("swiper",d),St(o,()=>{cn(()=>{Ize(d.value)})}),Ln(()=>{c.value&&(Eze({el:c.value,nextEl:m.value,prevEl:g.value,paginationEl:v.value,scrollbarEl:_.value,swiper:d.value},y),i("swiper",d.value))}),Vi(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function A(T){return y.virtual?Dze(d,T,o.value):(T.forEach((C,E)=>{C.props||(C.props={}),C.props.swiperRef=d,C.props.swiperSlideIndex=E}),T)}return()=>{const{slides:T,slots:C}=EP(t,h,p);return ln(r,{ref:c,class:use(a.value)},[C["container-start"],ln(s,{class:Cze(y.wrapperClass)},[C["wrapper-start"],A(T),C["wrapper-end"]]),ase(n)&&[ln("div",{ref:g,class:"swiper-button-prev"}),ln("div",{ref:m,class:"swiper-button-next"})],lse(n)&&ln("div",{ref:_,class:"swiper-scrollbar"}),ose(n)&&ln("div",{ref:v,class:"swiper-pagination"}),C["container-end"]])}}},Pze={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,i=!1;const{swiperRef:r}=n,s=ae(null),a=ae("swiper-slide"),o=ae(!1);function l(d,f,h){f===s.value&&(a.value=h)}Ln(()=>{!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),EB(()=>{i||!r||!r.value||(r.value.on("_slideClass",l),i=!0)}),fc(()=>{!s.value||!r||!r.value||(typeof n.swiperSlideIndex<"u"&&(s.value.swiperSlideIndex=n.swiperSlideIndex),r.value.destroyed&&a.value!=="swiper-slide"&&(a.value="swiper-slide"))}),Vi(()=>{!r||!r.value||r.value.off("_slideClass",l)});const u=W(()=>({isActive:a.value.indexOf("swiper-slide-active")>=0,isVisible:a.value.indexOf("swiper-slide-visible")>=0,isPrev:a.value.indexOf("swiper-slide-prev")>=0,isNext:a.value.indexOf("swiper-slide-next")>=0}));ui("swiperSlide",u);const c=()=>{o.value=!0};return()=>ln(n.tag,{class:use(`${a.value}`),ref:s,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&r&&r.value&&r.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:c},n.zoom?ln("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(u.value),n.lazy&&!o.value&&ln("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(u.value),n.lazy&&!o.value&&ln("div",{class:"swiper-lazy-preloader"})])}};function cse(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(r=>{if(!t[r]&&t.auto===!0){let s=Ad(n.el,`.${i[r]}`)[0];s||(s=ese("div",i[r]),s.className=i[r],n.el.append(s)),t[r]=s,e[r]=s}}),t}function xG(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};const s=m=>(Array.isArray(m)?m:[m]).filter(g=>!!g);function a(m){let g;return m&&typeof m=="string"&&e.isElement&&(g=e.el.querySelector(m),g)?g:(m&&(typeof m=="string"&&(g=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&g.length>1&&e.el.querySelectorAll(m).length===1&&(g=e.el.querySelector(m))),m&&!g?m:g)}function o(m,g){const v=e.params.navigation;m=s(m),m.forEach(_=>{_&&(_.classList[g?"add":"remove"](...v.disabledClass.split(" ")),_.tagName==="BUTTON"&&(_.disabled=g),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](v.lockClass))})}function l(){const{nextEl:m,prevEl:g}=e.navigation;if(e.params.loop){o(g,!1),o(m,!1);return}o(g,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function u(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),r("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),r("navigationNext"))}function d(){const m=e.params.navigation;if(e.params.navigation=cse(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let g=a(m.nextEl),v=a(m.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:v}),g=s(g),v=s(v);const _=(y,b)=>{y&&y.addEventListener("click",b==="next"?c:u),!e.enabled&&y&&y.classList.add(...m.lockClass.split(" "))};g.forEach(y=>_(y,"next")),v.forEach(y=>_(y,"prev"))}function f(){let{nextEl:m,prevEl:g}=e.navigation;m=s(m),g=s(g);const v=(_,y)=>{_.removeEventListener("click",y==="next"?c:u),_.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(_=>v(_,"next")),g.forEach(_=>v(_,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?p():(d(),l())}),i("toEdge fromEdge lock unlock",()=>{l()}),i("destroy",()=>{f()}),i("enable disable",()=>{let{nextEl:m,prevEl:g}=e.navigation;if(m=s(m),g=s(g),e.enabled){l();return}[...m,...g].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),i("click",(m,g)=>{let{nextEl:v,prevEl:_}=e.navigation;v=s(v),_=s(_);const y=g.target;if(e.params.navigation.hideOnClick&&!_.includes(y)&&!v.includes(y)){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===y||e.pagination.el.contains(y)))return;let b;v.length?b=v[0].classList.contains(e.params.navigation.hiddenClass):_.length&&(b=_[0].classList.contains(e.params.navigation.hiddenClass)),r(b===!0?"navigationShow":"navigationHide"),[...v,..._].filter(x=>!!x).forEach(x=>x.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),d(),l()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),f()};Object.assign(e.navigation,{enable:h,disable:p,update:l,init:d,destroy:f})}function DS(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function wG(n){let{swiper:e,extendParams:t,on:i,emit:r}=n;const s="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:_=>_,formatFractionTotal:_=>_,bulletClass:`${s}-bullet`,bulletActiveClass:`${s}-bullet-active`,modifierClass:`${s}-`,currentClass:`${s}-current`,totalClass:`${s}-total`,hiddenClass:`${s}-hidden`,progressbarFillClass:`${s}-progressbar-fill`,progressbarOppositeClass:`${s}-progressbar-opposite`,clickableClass:`${s}-clickable`,lockClass:`${s}-lock`,horizontalClass:`${s}-horizontal`,verticalClass:`${s}-vertical`,paginationDisabledClass:`${s}-disabled`}}),e.pagination={el:null,bullets:[]};let a,o=0;const l=_=>(Array.isArray(_)?_:[_]).filter(y=>!!y);function u(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(_,y){const{bulletActiveClass:b}=e.params.pagination;_&&(_=_[`${y==="prev"?"previous":"next"}ElementSibling`],_&&(_.classList.add(`${b}-${y}`),_=_[`${y==="prev"?"previous":"next"}ElementSibling`],_&&_.classList.add(`${b}-${y}-${y}`)))}function d(_){const y=_.target.closest(DS(e.params.pagination.bulletClass));if(!y)return;_.preventDefault();const b=W3(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===b)return;const x=e.realIndex,w=e.getSlideIndexByData(b),A=e.getSlideIndexByData(e.realIndex),T=C=>{const E=e.activeIndex;e.loopFix({direction:C,activeSlideIndex:w,slideTo:!1});const I=e.activeIndex;E===I&&e.slideToLoop(x,0,!1,!0)};if(w>e.slides.length-e.loopedSlides)T(w>A?"next":"prev");else if(e.params.centeredSlides){const C=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(parseFloat(e.params.slidesPerView,10));w<Math.floor(C/2)&&T("prev")}e.slideToLoop(b)}else e.slideTo(b)}function f(){const _=e.rtl,y=e.params.pagination;if(u())return;let b=e.pagination.el;b=l(b);let x,w;const A=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,T=e.params.loop?Math.ceil(A/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(w=e.previousRealIndex||0,x=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(x=e.snapIndex,w=e.previousSnapIndex):(w=e.previousIndex||0,x=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const C=e.pagination.bullets;let E,I,k;if(y.dynamicBullets&&(a=d8(C[0],e.isHorizontal()?"width":"height",!0),b.forEach(O=>{O.style[e.isHorizontal()?"width":"height"]=`${a*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&w!==void 0&&(o+=x-(w||0),o>y.dynamicMainBullets-1?o=y.dynamicMainBullets-1:o<0&&(o=0)),E=Math.max(x-o,0),I=E+(Math.min(C.length,y.dynamicMainBullets)-1),k=(I+E)/2),C.forEach(O=>{const U=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(z=>`${y.bulletActiveClass}${z}`)].map(z=>typeof z=="string"&&z.includes(" ")?z.split(" "):z).flat();O.classList.remove(...U)}),b.length>1)C.forEach(O=>{const U=W3(O);U===x?O.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&O.setAttribute("part","bullet"),y.dynamicBullets&&(U>=E&&U<=I&&O.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),U===E&&c(O,"prev"),U===I&&c(O,"next"))});else{const O=C[x];if(O&&O.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&C.forEach((U,z)=>{U.setAttribute("part",z===x?"bullet-active":"bullet")}),y.dynamicBullets){const U=C[E],z=C[I];for(let L=E;L<=I;L+=1)C[L]&&C[L].classList.add(...`${y.bulletActiveClass}-main`.split(" "));c(U,"prev"),c(z,"next")}}if(y.dynamicBullets){const O=Math.min(C.length,y.dynamicMainBullets+4),U=(a*O-a)/2-k*a,z=_?"right":"left";C.forEach(L=>{L.style[e.isHorizontal()?z:"top"]=`${U}px`})}}b.forEach((C,E)=>{if(y.type==="fraction"&&(C.querySelectorAll(DS(y.currentClass)).forEach(I=>{I.textContent=y.formatFractionCurrent(x+1)}),C.querySelectorAll(DS(y.totalClass)).forEach(I=>{I.textContent=y.formatFractionTotal(T)})),y.type==="progressbar"){let I;y.progressbarOpposite?I=e.isHorizontal()?"vertical":"horizontal":I=e.isHorizontal()?"horizontal":"vertical";const k=(x+1)/T;let O=1,U=1;I==="horizontal"?O=k:U=k,C.querySelectorAll(DS(y.progressbarFillClass)).forEach(z=>{z.style.transform=`translate3d(0,0,0) scaleX(${O}) scaleY(${U})`,z.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(C.innerHTML=y.renderCustom(e,x+1,T),E===0&&r("paginationRender",C)):(E===0&&r("paginationRender",C),r("paginationUpdate",C)),e.params.watchOverflow&&e.enabled&&C.classList[e.isLocked?"add":"remove"](y.lockClass)})}function h(){const _=e.params.pagination;if(u())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let b=e.pagination.el;b=l(b);let x="";if(_.type==="bullets"){let w=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&w>y&&(w=y);for(let A=0;A<w;A+=1)_.renderBullet?x+=_.renderBullet.call(e,A,_.bulletClass):x+=`<${_.bulletElement} ${e.isElement?'part="bullet"':""} class="${_.bulletClass}"></${_.bulletElement}>`}_.type==="fraction"&&(_.renderFraction?x=_.renderFraction.call(e,_.currentClass,_.totalClass):x=`<span class="${_.currentClass}"></span> / <span class="${_.totalClass}"></span>`),_.type==="progressbar"&&(_.renderProgressbar?x=_.renderProgressbar.call(e,_.progressbarFillClass):x=`<span class="${_.progressbarFillClass}"></span>`),e.pagination.bullets=[],b.forEach(w=>{_.type!=="custom"&&(w.innerHTML=x||""),_.type==="bullets"&&e.pagination.bullets.push(...w.querySelectorAll(DS(_.bulletClass)))}),_.type!=="custom"&&r("paginationRender",b[0])}function p(){e.params.pagination=cse(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const _=e.params.pagination;if(!_.el)return;let y;typeof _.el=="string"&&e.isElement&&(y=e.el.querySelector(_.el)),!y&&typeof _.el=="string"&&(y=[...document.querySelectorAll(_.el)]),y||(y=_.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof _.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(_.el)],y.length>1&&(y=y.filter(b=>tse(b,".swiper")[0]===e.el)[0])),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=l(y),y.forEach(b=>{_.type==="bullets"&&_.clickable&&b.classList.add(...(_.clickableClass||"").split(" ")),b.classList.add(_.modifierClass+_.type),b.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.type==="bullets"&&_.dynamicBullets&&(b.classList.add(`${_.modifierClass}${_.type}-dynamic`),o=0,_.dynamicMainBullets<1&&(_.dynamicMainBullets=1)),_.type==="progressbar"&&_.progressbarOpposite&&b.classList.add(_.progressbarOppositeClass),_.clickable&&b.addEventListener("click",d),e.enabled||b.classList.add(_.lockClass)}))}function m(){const _=e.params.pagination;if(u())return;let y=e.pagination.el;y&&(y=l(y),y.forEach(b=>{b.classList.remove(_.hiddenClass),b.classList.remove(_.modifierClass+_.type),b.classList.remove(e.isHorizontal()?_.horizontalClass:_.verticalClass),_.clickable&&(b.classList.remove(...(_.clickableClass||"").split(" ")),b.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(b=>b.classList.remove(..._.bulletActiveClass.split(" ")))}i("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const _=e.params.pagination;let{el:y}=e.pagination;y=l(y),y.forEach(b=>{b.classList.remove(_.horizontalClass,_.verticalClass),b.classList.add(e.isHorizontal()?_.horizontalClass:_.verticalClass)})}),i("init",()=>{e.params.pagination.enabled===!1?v():(p(),h(),f())}),i("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),i("snapIndexChange",()=>{f()}),i("snapGridLengthChange",()=>{h(),f()}),i("destroy",()=>{m()}),i("enable disable",()=>{let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),i("lock unlock",()=>{f()}),i("click",(_,y)=>{const b=y.target,x=l(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&x&&x.length>0&&!b.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&b===e.navigation.nextEl||e.navigation.prevEl&&b===e.navigation.prevEl))return;const w=x[0].classList.contains(e.params.pagination.hiddenClass);r(w===!0?"paginationShow":"paginationHide"),x.forEach(A=>A.classList.toggle(e.params.pagination.hiddenClass))}});const g=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),p(),h(),f()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:_}=e.pagination;_&&(_=l(_),_.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),m()};Object.assign(e.pagination,{enable:g,disable:v,render:h,update:f,init:p,destroy:m})}function TG(n){let{swiper:e,extendParams:t,on:i,emit:r,params:s}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let a,o,l=s&&s.autoplay?s.autoplay.delay:3e3,u=s&&s.autoplay?s.autoplay.delay:3e3,c,d=new Date().getTime,f,h,p,m,g,v;function _(G){!e||e.destroyed||!e.wrapperEl||G.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",_),C())}const y=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(u=c,f=!1);const G=e.autoplay.paused?c:d+u-new Date().getTime();e.autoplay.timeLeft=G,r("autoplayTimeLeft",G,G/l),o=requestAnimationFrame(()=>{y()})},b=()=>{let G;return e.virtual&&e.params.virtual.enabled?G=e.slides.filter(F=>F.classList.contains("swiper-slide-active"))[0]:G=e.slides[e.activeIndex],G?parseInt(G.getAttribute("data-swiper-autoplay"),10):void 0},x=G=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(o),y();let H=typeof G>"u"?e.params.autoplay.delay:G;l=e.params.autoplay.delay,u=e.params.autoplay.delay;const F=b();!Number.isNaN(F)&&F>0&&typeof G>"u"&&(H=F,l=F,u=F),c=H;const X=e.params.speed,te=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(X,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,X,!0,!0),r("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(X,!0,!0),r("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,X,!0,!0),r("autoplay")),e.params.cssMode&&(d=new Date().getTime(),requestAnimationFrame(()=>{x()})))};return H>0?(clearTimeout(a),a=setTimeout(()=>{te()},H)):requestAnimationFrame(()=>{te()}),H},w=()=>{e.autoplay.running=!0,x(),r("autoplayStart")},A=()=>{e.autoplay.running=!1,clearTimeout(a),cancelAnimationFrame(o),r("autoplayStop")},T=(G,H)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(a),G||(v=!0);const F=()=>{r("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",_):C()};if(e.autoplay.paused=!0,H){g&&(c=e.params.autoplay.delay),g=!1,F();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-d),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),F())},C=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(d=new Date().getTime(),v?(v=!1,x(c)):x(),e.autoplay.paused=!1,r("autoplayResume"))},E=()=>{if(e.destroyed||!e.autoplay.running)return;const G=Bd();G.visibilityState==="hidden"&&(v=!0,T(!0)),G.visibilityState==="visible"&&C()},I=G=>{G.pointerType==="mouse"&&(v=!0,!(e.animating||e.autoplay.paused)&&T(!0))},k=G=>{G.pointerType==="mouse"&&e.autoplay.paused&&C()},O=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",I),e.el.addEventListener("pointerleave",k))},U=()=>{e.el.removeEventListener("pointerenter",I),e.el.removeEventListener("pointerleave",k)},z=()=>{Bd().addEventListener("visibilitychange",E)},L=()=>{Bd().removeEventListener("visibilitychange",E)};i("init",()=>{e.params.autoplay.enabled&&(O(),z(),d=new Date().getTime(),w())}),i("destroy",()=>{U(),L(),e.autoplay.running&&A()}),i("beforeTransitionStart",(G,H,F)=>{e.destroyed||!e.autoplay.running||(F||!e.params.autoplay.disableOnInteraction?T(!0,!0):A())}),i("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){A();return}h=!0,p=!1,v=!1,m=setTimeout(()=>{v=!0,p=!0,T(!0)},200)}}),i("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!h)){if(clearTimeout(m),clearTimeout(a),e.params.autoplay.disableOnInteraction){p=!1,h=!1;return}p&&e.params.cssMode&&C(),p=!1,h=!1}}),i("slideChange",()=>{e.destroyed||!e.autoplay.running||(g=!0)}),Object.assign(e.autoplay,{start:w,stop:A,pause:T,resume:C})}const kze={components:{Swiper:Rze,SwiperSlide:Pze,Navigation:xG,Pagination:wG,Autoplay:TG},data(){return{modules:[xG,wG,TG],image_paths:["./carousel/1.jpg","./carousel/2.jpg","./carousel/3.jpg","./carousel/4.jpg","./carousel/5.jpg","./carousel/6.jpg"]}}};function Lze(n,e,t,i,r,s){const a=Ht("el-image"),o=Ht("swiper-slide"),l=Ht("swiper"),u=Ht("el-col"),c=Ht("el-row");return j(),gt(c,{justify:"center"},{default:Ae(()=>[he(u,{span:24},{default:Ae(()=>[he(l,{loop:!0,slidesPerView:1,breakpoints:{600:{slidesPerView:2},800:{slidesPerView:3}},modules:r.modules,navigation:{hideOnClick:!0},pagination:{hideOnClick:!0,clickable:!0,type:"bullets"},autoplay:{delay:5e3,disableOnInteraction:!1,pauseOnMouseEnter:!0}},{default:Ae(()=>[(j(!0),_e(an,null,ti(r.image_paths,d=>(j(),gt(o,null,{default:Ae(()=>[he(a,{src:d},null,8,["src"])]),_:2},1024))),256))]),_:1},8,["modules"])]),_:1})]),_:1})}const Oze=Fa(kze,[["render",Lze]]);var Ax;typeof window<"u"?Ax=window:typeof Pl<"u"?Ax=Pl:typeof self<"u"?Ax=self:Ax={};var dD=Ax;const ht=sl(dD),Nze={},Bze=Object.freeze(Object.defineProperty({__proto__:null,default:Nze},Symbol.toStringTag,{value:"Module"})),Fze=$te(Bze);var CG=typeof Pl<"u"?Pl:typeof window<"u"?window:{},Uze=Fze,Ex;typeof document<"u"?Ex=document:(Ex=CG["__GLOBAL_DOCUMENT_CACHE@4"],Ex||(Ex=CG["__GLOBAL_DOCUMENT_CACHE@4"]=Uze));var dse=Ex;const Tn=sl(dse);var x7={exports:{}};function Ds(){return Ds=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ds.apply(null,arguments)}const zze=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ds}},Symbol.toStringTag,{value:"Module"})),Hze=$te(zze);var Vze=Gze,$ze=Object.prototype.toString;function Gze(n){if(!n)return!1;var e=$ze.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}function Wze(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=qze(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qze(n,e){if(n){if(typeof n=="string")return AG(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return AG(n,e)}}function AG(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var jze=function(){function n(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var e=n.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},e.addInterceptor=function(i,r){this.typeToInterceptorsMap_.has(i)||this.typeToInterceptorsMap_.set(i,new Set);var s=this.typeToInterceptorsMap_.get(i);return s.has(r)?!1:(s.add(r),!0)},e.removeInterceptor=function(i,r){var s=this.typeToInterceptorsMap_.get(i);return s&&s.has(r)?(s.delete(r),!0):!1},e.clearInterceptorsByType=function(i){var r=this.typeToInterceptorsMap_.get(i);return r?(this.typeToInterceptorsMap_.delete(i),this.typeToInterceptorsMap_.set(i,new Set),!0):!1},e.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},e.getForType=function(i){return this.typeToInterceptorsMap_.get(i)||new Set},e.execute=function(i,r){for(var s=this.getForType(i),a=Wze(s),o;!(o=a()).done;){var l=o.value;try{r=l(r)}catch{}}return r},n}(),Kze=jze,Xze=function(){function n(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var e=n.prototype;return e.getIsEnabled=function(){return this.enabled_},e.enable=function(){this.enabled_=!0},e.disable=function(){this.enabled_=!1},e.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},e.getMaxAttempts=function(){return this.maxAttempts_},e.setMaxAttempts=function(i){this.maxAttempts_=i},e.getDelayFactor=function(){return this.delayFactor_},e.setDelayFactor=function(i){this.delayFactor_=i},e.getFuzzFactor=function(){return this.fuzzFactor_},e.setFuzzFactor=function(i){this.fuzzFactor_=i},e.getInitialDelay=function(){return this.initialDelay_},e.setInitialDelay=function(i){this.initialDelay_=i},e.createRetry=function(i){var r=i===void 0?{}:i,s=r.maxAttempts,a=r.delayFactor,o=r.fuzzFactor,l=r.initialDelay;return new Yze({maxAttempts:s||this.maxAttempts_,delayFactor:a||this.delayFactor_,fuzzFactor:o||this.fuzzFactor_,initialDelay:l||this.initialDelay_})},n}(),Yze=function(){function n(t){this.maxAttempts_=t.maxAttempts,this.delayFactor_=t.delayFactor,this.fuzzFactor_=t.fuzzFactor,this.currentDelay_=t.initialDelay,this.currentAttempt_=1}var e=n.prototype;return e.moveToNextAttempt=function(){this.currentAttempt_++;var i=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+i},e.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},e.getCurrentDelay=function(){return this.currentDelay_},e.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},e.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},e.getCurrentFuzzedDelay=function(){var i=this.getCurrentMinPossibleDelay(),r=this.getCurrentMaxPossibleDelay();return i+Math.random()*(r-i)},n}(),Qze=Xze,Zze=dD,Jze=function(e,t){return t===void 0&&(t=!1),function(i,r,s){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var a=s;if(t)if(Zze.TextDecoder){var o=eHe(r.headers&&r.headers["content-type"]);try{a=new TextDecoder(o).decode(s)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:a});return}e(null,s)}};function eHe(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),r=i[0],s=i[1];return r.trim()==="charset"?s.trim():e},"utf-8")}var tHe=Jze,fse=dD,nHe=Hze,iHe=Vze,hse=Kze,rHe=Qze;Us.httpHandler=tHe;Us.requestInterceptorsStorage=new hse;Us.responseInterceptorsStorage=new hse;Us.retryManager=new rHe;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Björklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var sHe=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(i){var r=i.indexOf(":"),s=i.slice(0,r).trim().toLowerCase(),a=i.slice(r+1).trim();typeof t[s]>"u"?t[s]=a:Array.isArray(t[s])?t[s].push(a):t[s]=[t[s],a]}),t};x7.exports=Us;x7.exports.default=Us;Us.XMLHttpRequest=fse.XMLHttpRequest||uHe;Us.XDomainRequest="withCredentials"in new Us.XMLHttpRequest?Us.XMLHttpRequest:fse.XDomainRequest;aHe(["get","put","post","patch","head","delete"],function(n){Us[n==="delete"?"del":n]=function(e,t,i){return t=pse(e,t,i),t.method=n.toUpperCase(),w7(t)}});function aHe(n,e){for(var t=0;t<n.length;t++)e(n[t])}function oHe(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function pse(n,e,t){var i=n;return iHe(e)?(t=e,typeof n=="string"&&(i={uri:n})):i=nHe({},e,{uri:n}),i.callback=t,i}function Us(n,e,t){return e=pse(n,e,t),w7(e)}function w7(n){if(typeof n.callback>"u")throw new Error("callback argument missing");if(n.requestType&&Us.requestInterceptorsStorage.getIsEnabled()){var e={uri:n.uri||n.url,headers:n.headers||{},body:n.body,metadata:n.metadata||{},retry:n.retry,timeout:n.timeout},t=Us.requestInterceptorsStorage.execute(n.requestType,e);n.uri=t.uri,n.headers=t.headers,n.body=t.body,n.metadata=t.metadata,n.retry=t.retry,n.timeout=t.timeout}var i=!1,r=function(x,w,A){i||(i=!0,n.callback(x,w,A))};function s(){u.readyState===4&&!Us.responseInterceptorsStorage.getIsEnabled()&&setTimeout(l,0)}function a(){var b=void 0;if(u.response?b=u.response:b=u.responseText||lHe(u),v)try{b=JSON.parse(b)}catch{}return b}function o(b){if(clearTimeout(_),clearTimeout(n.retryTimeout),b instanceof Error||(b=new Error(""+(b||"Unknown XMLHttpRequest Error"))),b.statusCode=0,!d&&Us.retryManager.getIsEnabled()&&n.retry&&n.retry.shouldRetry()){n.retryTimeout=setTimeout(function(){n.retry.moveToNextAttempt(),n.xhr=u,w7(n)},n.retry.getCurrentFuzzedDelay());return}if(n.requestType&&Us.responseInterceptorsStorage.getIsEnabled()){var x={headers:y.headers||{},body:y.body,responseUrl:u.responseURL,responseType:u.responseType},w=Us.responseInterceptorsStorage.execute(n.requestType,x);y.body=w.body,y.headers=w.headers}return r(b,y)}function l(){if(!d){var b;clearTimeout(_),clearTimeout(n.retryTimeout),n.useXDR&&u.status===void 0?b=200:b=u.status===1223?204:u.status;var x=y,w=null;if(b!==0?(x={body:a(),statusCode:b,method:h,headers:{},url:f,rawRequest:u},u.getAllResponseHeaders&&(x.headers=sHe(u.getAllResponseHeaders()))):w=new Error("Internal XMLHttpRequest Error"),n.requestType&&Us.responseInterceptorsStorage.getIsEnabled()){var A={headers:x.headers||{},body:x.body,responseUrl:u.responseURL,responseType:u.responseType},T=Us.responseInterceptorsStorage.execute(n.requestType,A);x.body=T.body,x.headers=T.headers}return r(w,x,x.body)}}var u=n.xhr||null;u||(n.cors||n.useXDR?u=new Us.XDomainRequest:u=new Us.XMLHttpRequest);var c,d,f=u.url=n.uri||n.url,h=u.method=n.method||"GET",p=n.body||n.data,m=u.headers=n.headers||{},g=!!n.sync,v=!1,_,y={body:void 0,headers:{},statusCode:0,method:h,url:f,rawRequest:u};if("json"in n&&n.json!==!1&&(v=!0,m.accept||m.Accept||(m.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(m["content-type"]||m["Content-Type"]||(m["Content-Type"]="application/json"),p=JSON.stringify(n.json===!0?p:n.json))),u.onreadystatechange=s,u.onload=l,u.onerror=o,u.onprogress=function(){},u.onabort=function(){d=!0,clearTimeout(n.retryTimeout)},u.ontimeout=o,u.open(h,f,!g,n.username,n.password),g||(u.withCredentials=!!n.withCredentials),!g&&n.timeout>0&&(_=setTimeout(function(){if(!d){d=!0,u.abort("timeout");var b=new Error("XMLHttpRequest timeout");b.code="ETIMEDOUT",o(b)}},n.timeout)),u.setRequestHeader)for(c in m)m.hasOwnProperty(c)&&u.setRequestHeader(c,m[c]);else if(n.headers&&!oHe(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(u.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(u),u.send(p||null),u}function lHe(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch{}return null}function uHe(){}var cHe=x7.exports;const mse=sl(cHe);var gse={exports:{}},EG=dse,T7=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function tu(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}tu.prototype=T7(Error.prototype);tu.prototype.constructor=tu;tu.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function C7(n){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+(a|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function Jx(){this.values=T7(null)}Jx.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function Mx(n,e,t,i){var r=i?n.split(i):[n];for(var s in r)if(typeof r[s]=="string"){var a=r[s].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function dHe(n,e,t){var i=n;function r(){var o=C7(n);if(o===null)throw new tu(tu.Errors.BadTimeStamp,"Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){var u=new Jx;Mx(o,function(c,d){switch(c){case"region":for(var f=t.length-1;f>=0;f--)if(t[f].id===d){u.set(c,t[f].region);break}break;case"vertical":u.alt(c,d,["rl","lr"]);break;case"line":var h=d.split(","),p=h[0];u.integer(c,p),u.percent(c,p)&&u.set("snapToLines",!1),u.alt(c,p,["auto"]),h.length===2&&u.alt("lineAlign",h[1],["start","center","end"]);break;case"position":h=d.split(","),u.percent(c,h[0]),h.length===2&&u.alt("positionAlign",h[1],["start","center","end"]);break;case"size":u.percent(c,d);break;case"align":u.alt(c,d,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),n.substr(0,3)!=="-->")throw new tu(tu.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.substr(3),a(),e.endTime=r(),a(),s(n,e)}var MP=EG.createElement&&EG.createElement("textarea"),fHe={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},MG={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},hHe={v:"title",lang:"lang"},IG={rt:"ruby"};function vse(n,e){function t(){if(!e)return null;function p(g){return e=e.substr(g.length),g}var m=e.match(/^([^<]*)(<[^>]*>?)?/);return p(m[1]?m[1]:m[2])}function i(p){return MP.innerHTML=p,p=MP.textContent,MP.textContent="",p}function r(p,m){return!IG[m.localName]||IG[m.localName]===p.localName}function s(p,m){var g=fHe[p];if(!g)return null;var v=n.document.createElement(g),_=hHe[p];return _&&m&&(v[_]=m.trim()),v}for(var a=n.document.createElement("div"),o=a,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=C7(l.substr(1,l.length-2)),d;if(c){d=n.document.createProcessingInstruction("timestamp",c),o.appendChild(d);continue}var f=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f||(d=s(f[1],f[3]),!d)||!r(o,d))continue;if(f[2]){var h=f[2].split(".");h.forEach(function(p){var m=/^bg_/.test(p),g=m?p.slice(3):p;if(MG.hasOwnProperty(g)){var v=m?"background-color":"color",_=MG[g];d.style[v]=_}}),d.className=h.join(" ")}u.push(f[1]),o.appendChild(d),o=d;continue}o.appendChild(n.document.createTextNode(i(l)))}return a}var DG=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function pHe(n){for(var e=0;e<DG.length;e++){var t=DG[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function mHe(n){var e=[],t="",i;if(!n||!n.childNodes)return"ltr";function r(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function s(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return s(o);if(l.childNodes)return r(o,l),s(o)}for(r(e,n);t=s(e);)for(var a=0;a<t.length;a++)if(i=t.charCodeAt(a),pHe(i))return"rtl";return"ltr"}function gHe(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,i=0,r=0;r<t.length&&t[r]!==e;r++)t[r].mode==="showing"&&i++;return++i*-1}function fD(){}fD.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};fD.prototype.formatStyle=function(n,e){return n===0?0:n+e};function q3(n,e,t){fD.call(this),this.cue=e,this.cueDiv=vse(n,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=n.document.createElement("div"),i={direction:mHe(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":case"line-left":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":case"line-right":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}q3.prototype=T7(fD.prototype);q3.prototype.constructor=q3;function qo(n){var e,t,i,r;if(n.div){t=n.div.offsetHeight,i=n.div.offsetWidth,r=n.div.offsetTop;var s=(s=n.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();n=n.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,n.height/s.length):0}this.left=n.left,this.right=n.right,this.top=n.top||r,this.height=n.height||t,this.bottom=n.bottom||r+(n.height||t),this.width=n.width||i,this.lineHeight=e!==void 0?e:n.lineHeight}qo.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};qo.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};qo.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};qo.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};qo.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};qo.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),i=e*t;return i/(this.height*this.width)};qo.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};qo.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var r={left:n.left,right:n.right,top:n.top||i,height:n.height||e,bottom:n.bottom||i+(n.height||e),width:n.width||t};return r};function vHe(n,e,t,i){function r(g,v){for(var _,y=new qo(g),b=1,x=0;x<v.length;x++){for(;g.overlapsOppositeAxis(t,v[x])||g.within(t)&&g.overlapsAny(i);)g.move(v[x]);if(g.within(t))return g;var w=g.intersectPercentage(t);b>w&&(_=new qo(g),b=w),g=new qo(y)}return _||y}var s=new qo(e),a=e.cue,o=gHe(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=s.lineHeight,d=c*Math.round(o),f=t[u]+c,h=l[0];Math.abs(d)>f&&(d=d<0?-1:1,d*=Math.ceil(f/c)*c),o<0&&(d+=a.vertical===""?t.height:t.width,l=l.reverse()),s.move(h,d)}else{var p=s.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],s=new qo(e)}var m=r(s,l);e.move(m.toCSSCompatValues(t))}function yb(){}yb.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};yb.convertCueToDOMTree=function(n,e){return!n||!e?null:vse(n,e)};var yHe=.05,_He="sans-serif",bHe="1.5%";yb.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=n.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=bHe,t.appendChild(i);function r(c){for(var d=0;d<c.length;d++)if(c[d].hasBeenReset||!c[d].displayState)return!0;return!1}if(!r(e)){for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState);return}var a=[],o=qo.getSimpleBoxPosition(i),l=Math.round(o.height*yHe*100)/100,u={font:l+"px "+_He};(function(){for(var c,d,f=0;f<e.length;f++)d=e[f],c=new q3(n,d,u),i.appendChild(c.div),vHe(n,c,o,a),d.displayState=c.div,a.push(qo.getSimpleBoxPosition(c))})()};yb.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};yb.Parser.prototype={reportOrThrowError:function(n){if(n instanceof tu)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var c=e.buffer,d=0;d<c.length&&c[d]!=="\r"&&c[d]!==`
`;)++d;var f=c.substr(0,d);return c[d]==="\r"&&++d,c[d]===`
`&&++d,e.buffer=c.substr(d),f}function i(c){var d=new Jx;if(Mx(c,function(h,p){switch(h){case"id":d.set(h,p);break;case"width":d.percent(h,p);break;case"lines":d.integer(h,p);break;case"regionanchor":case"viewportanchor":var m=p.split(",");if(m.length!==2)break;var g=new Jx;if(g.percent("x",m[0]),g.percent("y",m[1]),!g.has("x")||!g.has("y"))break;d.set(h+"X",g.get("x")),d.set(h+"Y",g.get("y"));break;case"scroll":d.alt(h,p,["up"]);break}},/=/,/\s/),d.has("id")){var f=new(e.vttjs.VTTRegion||e.window.VTTRegion);f.width=d.get("width",100),f.lines=d.get("lines",3),f.regionAnchorX=d.get("regionanchorX",0),f.regionAnchorY=d.get("regionanchorY",100),f.viewportAnchorX=d.get("viewportanchorX",0),f.viewportAnchorY=d.get("viewportanchorY",100),f.scroll=d.get("scroll",""),e.onregion&&e.onregion(f),e.regionList.push({id:d.get("id"),region:f})}}function r(c){var d=new Jx;Mx(c,function(f,h){switch(f){case"MPEGT":d.integer(f+"S",h);break;case"LOCA":d.set(f+"L",C7(h));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:d.get("MPEGTS"),LOCAL:d.get("LOCAL")})}function s(c){c.match(/X-TIMESTAMP-MAP/)?Mx(c,function(d,f){switch(d){case"X-TIMESTAMP-MAP":r(f);break}},/=/):Mx(c,function(d,f){switch(d){case"Region":i(f);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new tu(tu.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{dHe(a,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new tu(tu.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};var SHe=yb,xHe="auto",wHe={"":1,lr:1,rl:1},THe={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function CHe(n){if(typeof n!="string")return!1;var e=wHe[n.toLowerCase()];return e?n.toLowerCase():!1}function IP(n){if(typeof n!="string")return!1;var e=THe[n.toLowerCase()];return e?n.toLowerCase():!1}function yse(n,e,t){this.hasBeenReset=!1;var i="",r=!1,s=n,a=e,o=t,l=null,u="",c=!0,d="auto",f="start",h="auto",p="auto",m=100,g="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(v){i=""+v}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(v){r=!!v}},startTime:{enumerable:!0,get:function(){return s},set:function(v){if(typeof v!="number")throw new TypeError("Start time must be set to a number.");s=v,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(v){if(typeof v!="number")throw new TypeError("End time must be set to a number.");a=v,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(v){o=""+v,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(v){l=v,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(v){var _=CHe(v);if(_===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=_,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(v){c=!!v,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(v){if(typeof v!="number"&&v!==xHe)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=v,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(v){var _=IP(v);_?(f=_,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return h},set:function(v){if(v<0||v>100)throw new Error("Position must be between 0 and 100.");h=v,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(v){var _=IP(v);_?(p=_,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return m},set:function(v){if(v<0||v>100)throw new Error("Size must be between 0 and 100.");m=v,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return g},set:function(v){var _=IP(v);if(!_)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");g=_,this.hasBeenReset=!0}}}),this.displayState=void 0}yse.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var AHe=yse,EHe={"":!0,up:!0};function MHe(n){if(typeof n!="string")return!1;var e=EHe[n.toLowerCase()];return e?n.toLowerCase():!1}function RS(n){return typeof n=="number"&&n>=0&&n<=100}function IHe(){var n=100,e=3,t=0,i=100,r=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!RS(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!RS(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!RS(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(o){if(!RS(o))throw new Error("ViewportAnchorY must be between 0 and 100.");s=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!RS(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=MHe(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var DHe=IHe,oh=dD,rv=gse.exports={WebVTT:SHe,VTTCue:AHe,VTTRegion:DHe};oh.vttjs=rv;oh.WebVTT=rv.WebVTT;var RHe=rv.VTTCue,PHe=rv.VTTRegion,kHe=oh.VTTCue,LHe=oh.VTTRegion;rv.shim=function(){oh.VTTCue=RHe,oh.VTTRegion=PHe};rv.restore=function(){oh.VTTCue=kHe,oh.VTTRegion=LHe};oh.VTTCue||rv.shim();var OHe=gse.exports;const RG=sl(OHe);var PG="https://example.com",hD=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=ht.location&&ht.location.href||"");var i=/^\/\//.test(e),r=!ht.location&&!/\/\//i.test(e);e=new ht.URL(e,ht.location||PG);var s=new URL(t,e);return r?s.href.slice(PG.length):i?s.href.slice(s.protocol.length):s.href},A7=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var r=this.listeners[i];if(r)if(arguments.length===2)for(var s=r.length,a=0;a<s;++a)r[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=r.length,u=0;u<l;++u)r[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},n}(),NHe=function(e){return ht.atob?ht.atob(e):Buffer.from(e,"base64").toString("binary")};function _se(n){for(var e=NHe(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class BHe extends A7{constructor(){super(),this.buffer=""}push(e){let t;for(this.buffer+=e,t=this.buffer.indexOf(`
`);t>-1;t=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}const FHe=String.fromCharCode(9),DP=function(n){const e=/([0-9.]*)?@?([0-9.]*)?/.exec(n||""),t={};return e[1]&&(t.length=parseInt(e[1],10)),e[2]&&(t.offset=parseInt(e[2],10)),t},UHe=function(){const n="[^=]*",e='"[^"]*"|[^,]*',t="(?:"+n+")=(?:"+e+")";return new RegExp("(?:^|,)("+t+")")},Oo=function(n){const e={};if(!n)return e;const t=n.split(UHe());let i=t.length,r;for(;i--;)t[i]!==""&&(r=/([^=]*)=(.*)/.exec(t[i]).slice(1),r[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),e[r[0]]=r[1]);return e},kG=n=>{const e=n.split("x"),t={};return e[0]&&(t.width=parseInt(e[0],10)),e[1]&&(t.height=parseInt(e[1],10)),t};class zHe extends A7{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(e){let t,i;if(e=e.trim(),e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}this.tagMappers.reduce((s,a)=>{const o=a(e);return o===e?s:s.concat([o])},[e]).forEach(s=>{for(let a=0;a<this.customParsers.length;a++)if(this.customParsers[a].call(this,s))return;if(s.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:s.slice(1)});return}if(s=s.replace("\r",""),t=/^#EXTM3U/.exec(s),t){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(s),t){i={type:"tag",tagType:"inf"},t[1]&&(i.duration=parseFloat(t[1])),t[2]&&(i.title=t[2]),this.trigger("data",i);return}if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"targetduration"},t[1]&&(i.duration=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"version"},t[1]&&(i.version=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"media-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(s),t){i={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(i.number=parseInt(t[1],10)),this.trigger("data",i);return}if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(s),t){i={type:"tag",tagType:"playlist-type"},t[1]&&(i.playlistType=t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(s),t){i=Ds(DP(t[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",i);return}if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(s),t){i={type:"tag",tagType:"allow-cache"},t[1]&&(i.allowed=!/NO/.test(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-MAP:(.*)$/.exec(s),t){if(i={type:"tag",tagType:"map"},t[1]){const a=Oo(t[1]);a.URI&&(i.uri=a.URI),a.BYTERANGE&&(i.byterange=DP(a.BYTERANGE))}this.trigger("data",i);return}if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"stream-inf"},t[1]&&(i.attributes=Oo(t[1]),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=kG(i.attributes.RESOLUTION)),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),this.trigger("data",i);return}if(t=/^#EXT-X-MEDIA:(.*)$/.exec(s),t){i={type:"tag",tagType:"media"},t[1]&&(i.attributes=Oo(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-ENDLIST/.exec(s),t){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(t=/^#EXT-X-DISCONTINUITY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(s),t){i={type:"tag",tagType:"program-date-time"},t[1]&&(i.dateTimeString=t[1],i.dateTimeObject=new Date(t[1])),this.trigger("data",i);return}if(t=/^#EXT-X-KEY:(.*)$/.exec(s),t){i={type:"tag",tagType:"key"},t[1]&&(i.attributes=Oo(t[1]),i.attributes.IV&&(i.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),this.trigger("data",i);return}if(t=/^#EXT-X-START:(.*)$/.exec(s),t){i={type:"tag",tagType:"start"},t[1]&&(i.attributes=Oo(t[1]),i.attributes["TIME-OFFSET"]=parseFloat(i.attributes["TIME-OFFSET"]),i.attributes.PRECISE=/YES/.test(i.attributes.PRECISE)),this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out-cont"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-out"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(s),t){i={type:"tag",tagType:"cue-in"},t[1]?i.data=t[1]:i.data="",this.trigger("data",i);return}if(t=/^#EXT-X-SKIP:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"skip"},i.attributes=Oo(t[1]),i.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(i.attributes["SKIPPED-SEGMENTS"]=parseInt(i.attributes["SKIPPED-SEGMENTS"],10)),i.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(i.attributes["RECENTLY-REMOVED-DATERANGES"]=i.attributes["RECENTLY-REMOVED-DATERANGES"].split(FHe)),this.trigger("data",i);return}if(t=/^#EXT-X-PART:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part"},i.attributes=Oo(t[1]),["DURATION"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["INDEPENDENT","GAP"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),i.attributes.hasOwnProperty("BYTERANGE")&&(i.attributes.byterange=DP(i.attributes.BYTERANGE)),this.trigger("data",i);return}if(t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"server-control"},i.attributes=Oo(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=/YES/.test(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PART-INF:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"part-inf"},i.attributes=Oo(t[1]),["PART-TARGET"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseFloat(i.attributes[a]))}),this.trigger("data",i);return}if(t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"preload-hint"},i.attributes=Oo(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(a){if(i.attributes.hasOwnProperty(a)){i.attributes[a]=parseInt(i.attributes[a],10);const o=a==="BYTERANGE-LENGTH"?"length":"offset";i.attributes.byterange=i.attributes.byterange||{},i.attributes.byterange[o]=i.attributes[a],delete i.attributes[a]}}),this.trigger("data",i);return}if(t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"rendition-report"},i.attributes=Oo(t[1]),["LAST-MSN","LAST-PART"].forEach(function(a){i.attributes.hasOwnProperty(a)&&(i.attributes[a]=parseInt(i.attributes[a],10))}),this.trigger("data",i);return}if(t=/^#EXT-X-DATERANGE:(.*)$/.exec(s),t&&t[1]){i={type:"tag",tagType:"daterange"},i.attributes=Oo(t[1]),["ID","CLASS"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=String(i.attributes[o]))}),["START-DATE","END-DATE"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=new Date(i.attributes[o]))}),["DURATION","PLANNED-DURATION"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=parseFloat(i.attributes[o]))}),["END-ON-NEXT"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=/YES/i.test(i.attributes[o]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(o){i.attributes.hasOwnProperty(o)&&(i.attributes[o]=i.attributes[o].toString(16))});const a=/^X-([A-Z]+-)+[A-Z]+$/;for(const o in i.attributes){if(!a.test(o))continue;const l=/[0-9A-Fa-f]{6}/g.test(i.attributes[o]),u=/^\d+(\.\d+)?$/.test(i.attributes[o]);i.attributes[o]=l?i.attributes[o].toString(16):u?parseFloat(i.attributes[o]):String(i.attributes[o])}this.trigger("data",i);return}if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(s),t){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(t=/^#EXT-X-I-FRAMES-ONLY/.exec(s),t){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(s),t){i={type:"tag",tagType:"content-steering"},i.attributes=Oo(t[1]),this.trigger("data",i);return}if(t=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(s),t){i={type:"tag",tagType:"i-frame-playlist"},i.attributes=Oo(t[1]),i.attributes.URI&&(i.uri=i.attributes.URI),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes.RESOLUTION&&(i.attributes.RESOLUTION=kG(i.attributes.RESOLUTION)),i.attributes["AVERAGE-BANDWIDTH"]&&(i.attributes["AVERAGE-BANDWIDTH"]=parseInt(i.attributes["AVERAGE-BANDWIDTH"],10)),i.attributes["FRAME-RATE"]&&(i.attributes["FRAME-RATE"]=parseFloat(i.attributes["FRAME-RATE"])),this.trigger("data",i);return}if(t=/^#EXT-X-DEFINE:(.*)$/.exec(s),t){i={type:"tag",tagType:"define"},i.attributes=Oo(t[1]),this.trigger("data",i);return}this.trigger("data",{type:"tag",data:s.slice(4)})})}addParser({expression:e,customType:t,dataParser:i,segment:r}){typeof i!="function"&&(i=s=>s),this.customParsers.push(s=>{if(e.exec(s))return this.trigger("data",{type:"custom",data:i(s),customType:t,segment:r}),!0})}addTagMapper({expression:e,map:t}){const i=r=>e.test(r)?t(r):r;this.tagMappers.push(i)}}const HHe=n=>n.toLowerCase().replace(/-(\w)/g,e=>e[1].toUpperCase()),Uh=function(n){const e={};return Object.keys(n).forEach(function(t){e[HHe(t)]=n[t]}),e},RP=function(n){const{serverControl:e,targetDuration:t,partTargetDuration:i}=n;if(!e)return;const r="#EXT-X-SERVER-CONTROL",s="holdBack",a="partHoldBack",o=t&&t*3,l=i&&i*2;t&&!e.hasOwnProperty(s)&&(e[s]=o,this.trigger("info",{message:`${r} defaulting HOLD-BACK to targetDuration * 3 (${o}).`})),o&&e[s]<o&&(this.trigger("warn",{message:`${r} clamping HOLD-BACK (${e[s]}) to targetDuration * 3 (${o})`}),e[s]=o),i&&!e.hasOwnProperty(a)&&(e[a]=i*3,this.trigger("info",{message:`${r} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${e[a]}).`})),i&&e[a]<l&&(this.trigger("warn",{message:`${r} clamping PART-HOLD-BACK (${e[a]}) to partTargetDuration * 2 (${l}).`}),e[a]=l)};class VHe extends A7{constructor(e={}){super(),this.lineStream=new BHe,this.parseStream=new zHe,this.lineStream.pipe(this.parseStream),this.mainDefinitions=e.mainDefinitions||{},this.params=new URL(e.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const t=this,i=[];let r={},s,a,o=!1;const l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let d=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let f=0,h=0;const p={};this.on("end",()=>{r.uri||!r.parts&&!r.preloadHints||(!r.map&&s&&(r.map=s),!r.key&&a&&(r.key=a),!r.timeline&&typeof d=="number"&&(r.timeline=d),this.manifest.preloadSegment=r)}),this.parseStream.on("data",function(m){let g,v;if(t.manifest.definitions){for(const _ in t.manifest.definitions)if(m.uri&&(m.uri=m.uri.replace(`{$${_}}`,t.manifest.definitions[_])),m.attributes)for(const y in m.attributes)typeof m.attributes[y]=="string"&&(m.attributes[y]=m.attributes[y].replace(`{$${_}}`,t.manifest.definitions[_]))}({tag(){({version(){m.version&&(this.manifest.version=m.version)},"allow-cache"(){this.manifest.allowCache=m.allowed,"allowed"in m||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const _={};"length"in m&&(r.byterange=_,_.length=m.length,"offset"in m||(m.offset=f)),"offset"in m&&(r.byterange=_,_.offset=m.offset),f=_.offset+_.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),m.title&&(r.title=m.title),m.duration>0&&(r.duration=m.duration),m.duration===0&&(r.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key(){if(!m.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(m.attributes.METHOD==="NONE"){a=null;return}if(!m.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(m.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:m.attributes};return}if(m.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:m.attributes.URI};return}if(m.attributes.KEYFORMAT===c){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(m.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(m.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),m.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(m.attributes.KEYID&&m.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:m.attributes.KEYFORMAT,keyId:m.attributes.KEYID.substring(2)},pssh:_se(m.attributes.URI.split(",")[1])};return}m.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),a={method:m.attributes.METHOD||"AES-128",uri:m.attributes.URI},typeof m.attributes.IV<"u"&&(a.iv=m.attributes.IV)},"media-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+m.number});return}this.manifest.mediaSequence=m.number},"discontinuity-sequence"(){if(!isFinite(m.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+m.number});return}this.manifest.discontinuitySequence=m.number,d=m.number},"playlist-type"(){if(!/VOD|EVENT/.test(m.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+m.playlist});return}this.manifest.playlistType=m.playlistType},map(){s={},m.uri&&(s.uri=m.uri),m.byterange&&(s.byterange=m.byterange),a&&(s.key=a)},"stream-inf"(){if(this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,!m.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}r.attributes||(r.attributes={}),Ds(r.attributes,m.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,!(m.attributes&&m.attributes.TYPE&&m.attributes["GROUP-ID"]&&m.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const _=this.manifest.mediaGroups[m.attributes.TYPE];_[m.attributes["GROUP-ID"]]=_[m.attributes["GROUP-ID"]]||{},g=_[m.attributes["GROUP-ID"]],v={default:/yes/i.test(m.attributes.DEFAULT)},v.default?v.autoselect=!0:v.autoselect=/yes/i.test(m.attributes.AUTOSELECT),m.attributes.LANGUAGE&&(v.language=m.attributes.LANGUAGE),m.attributes.URI&&(v.uri=m.attributes.URI),m.attributes["INSTREAM-ID"]&&(v.instreamId=m.attributes["INSTREAM-ID"]),m.attributes.CHARACTERISTICS&&(v.characteristics=m.attributes.CHARACTERISTICS),m.attributes.FORCED&&(v.forced=/yes/i.test(m.attributes.FORCED)),g[m.attributes.NAME]=v},discontinuity(){d+=1,r.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=m.dateTimeString,this.manifest.dateTimeObject=m.dateTimeObject),r.dateTimeString=m.dateTimeString,r.dateTimeObject=m.dateTimeObject;const{lastProgramDateTime:_}=this;this.lastProgramDateTime=new Date(m.dateTimeString).getTime(),_===null&&this.manifest.segments.reduceRight((y,b)=>(b.programDateTime=y-b.duration*1e3,b.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(m.duration)||m.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+m.duration});return}this.manifest.targetDuration=m.duration,RP.call(this,this.manifest)},start(){if(!m.attributes||isNaN(m.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:m.attributes["TIME-OFFSET"],precise:m.attributes.PRECISE}},"cue-out"(){r.cueOut=m.data},"cue-out-cont"(){r.cueOutCont=m.data},"cue-in"(){r.cueIn=m.data},skip(){this.manifest.skip=Uh(m.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",m.attributes,["SKIPPED-SEGMENTS"])},part(){o=!0;const _=this.manifest.segments.length,y=Uh(m.attributes);r.parts=r.parts||[],r.parts.push(y),y.byterange&&(y.byterange.hasOwnProperty("offset")||(y.byterange.offset=h),h=y.byterange.offset+y.byterange.length);const b=r.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${b} for segment #${_}`,m.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((x,w)=>{x.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${w} lacks required attribute(s): LAST-PART`})})},"server-control"(){const _=this.manifest.serverControl=Uh(m.attributes);_.hasOwnProperty("canBlockReload")||(_.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),RP.call(this,this.manifest),_.canSkipDateranges&&!_.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const _=this.manifest.segments.length,y=Uh(m.attributes),b=y.type&&y.type==="PART";r.preloadHints=r.preloadHints||[],r.preloadHints.push(y),y.byterange&&(y.byterange.hasOwnProperty("offset")||(y.byterange.offset=b?h:0,b&&(h=y.byterange.offset+y.byterange.length)));const x=r.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${x} for segment #${_}`,m.attributes,["TYPE","URI"]),!!y.type)for(let w=0;w<r.preloadHints.length-1;w++){const A=r.preloadHints[w];A.type&&A.type===y.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${x} for segment #${_} has the same TYPE ${y.type} as preload hint #${w}`})}},"rendition-report"(){const _=Uh(m.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(_);const y=this.manifest.renditionReports.length-1,b=["LAST-MSN","URI"];o&&b.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${y}`,m.attributes,b)},"part-inf"(){this.manifest.partInf=Uh(m.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",m.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),RP.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(Uh(m.attributes));const _=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${_}`,m.attributes,["ID","START-DATE"]);const y=this.manifest.dateRanges[_];y.endDate&&y.startDate&&new Date(y.endDate)<new Date(y.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),y.duration&&y.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),y.plannedDuration&&y.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const b=!!y.endOnNext;if(b&&!y.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),b&&(y.duration||y.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),y.duration&&y.endDate){const w=y.startDate.getTime()+y.duration*1e3;this.manifest.dateRanges[_].endDate=new Date(w)}if(!p[y.id])p[y.id]=y;else{for(const w in p[y.id])if(y[w]&&JSON.stringify(p[y.id][w])!==JSON.stringify(y[w])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const x=this.manifest.dateRanges.findIndex(w=>w.id===y.id);this.manifest.dateRanges[x]=Ds(this.manifest.dateRanges[x],y),p[y.id]=Ds(p[y.id],y),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=Uh(m.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",m.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const _=(y,b)=>{if(y in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${y}`});return}this.manifest.definitions[y]=b};if("QUERYPARAM"in m.attributes){if("NAME"in m.attributes||"IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const y=this.params.get(m.attributes.QUERYPARAM);if(!y){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${m.attributes.QUERYPARAM}`});return}_(m.attributes.QUERYPARAM,decodeURIComponent(y));return}if("NAME"in m.attributes){if("IMPORT"in m.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in m.attributes)||typeof m.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${m.attributes.NAME}`});return}_(m.attributes.NAME,m.attributes.VALUE);return}if("IMPORT"in m.attributes){if(!this.mainDefinitions[m.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${m.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}_(m.attributes.IMPORT,this.mainDefinitions[m.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:m.attributes,uri:m.uri,timeline:d}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",m.attributes,["BANDWIDTH","URI"])}}[m.tagType]||l).call(t)},uri(){r.uri=m.uri,i.push(r),this.manifest.targetDuration&&!("duration"in r)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),r.duration=this.manifest.targetDuration),a&&(r.key=a),r.timeline=d,s&&(r.map=s),h=0,this.lastProgramDateTime!==null&&(r.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=r.duration*1e3),r={}},comment(){},custom(){m.segment?(r.custom=r.custom||{},r.custom[m.customType]=m.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[m.customType]=m.data)}})[m.type].call(t)})}requiredCompatibilityversion(e,t){(e<t||!e)&&this.trigger("warn",{message:`manifest must be at least version ${t}`})}warnOnMissingAttributes_(e,t,i){const r=[];i.forEach(function(s){t.hasOwnProperty(s)||r.push(s)}),r.length&&this.trigger("warn",{message:`${e} lacks required attribute(s): ${r.join(", ")}`})}push(e){this.lineStream.push(e)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(e){this.parseStream.addParser(e)}addTagMapper(e){this.parseStream.addTagMapper(e)}}var bg={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},$He=["video","audio","text"],LG=["Video","Audio","Text"],bse=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var s=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(r).toString(16)).slice(-2);return"avc1."+s+"00"+a})},md=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var s;$He.forEach(function(a){var o=bg[a].exec(r.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=r.substring(0,o[1].length),u=r.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),s||i.push({type:r,details:"",mediaType:"unknown"})}),i},GHe=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var s=i[r];if(s.default&&s.playlists)return md(s.playlists[0].attributes.CODECS)}return null},Sse=function(e){return e===void 0&&(e=""),bg.audio.test(e.trim().toLowerCase())},WHe=function(e){return e===void 0&&(e=""),bg.text.test(e.trim().toLowerCase())},x_=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return bse(s.trim())}),i="video";t.length===1&&Sse(t[0])?i="audio":t.length===1&&WHe(t[0])&&(i="application");var r="mp4";return t.every(function(s){return bg.mp4.test(s)})?r="mp4":t.every(function(s){return bg.webm.test(s)})?r="webm":t.every(function(s){return bg.ogg.test(s)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},e2=function(e,t){return e===void 0&&(e=""),t===void 0&&(t=!1),ht.MediaSource&&ht.MediaSource.isTypeSupported&&ht.MediaSource.isTypeSupported(x_(e))||t&&ht.ManagedMediaSource&&ht.ManagedMediaSource.isTypeSupported&&ht.ManagedMediaSource.isTypeSupported(x_(e))||!1},PP=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<LG.length;i++){var r=LG[i];if(bg["muxer"+r].test(t))return!0}return!1})},OG="mp4a.40.2",qHe="avc1.4d400d",jHe=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,KHe=/^application\/dash\+xml/i,xse=function(e){return jHe.test(e)?"hls":KHe.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},XHe=function(e){return e.toString(2).length},YHe=function(e){return Math.ceil(XHe(e)/8)},wse=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},QHe=function(e){return wse(e)},Si=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!QHe(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Ga=ht.BigInt||Number,p8=[Ga("0x1"),Ga("0x100"),Ga("0x10000"),Ga("0x1000000"),Ga("0x100000000"),Ga("0x10000000000"),Ga("0x1000000000000"),Ga("0x100000000000000"),Ga("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var ZHe=function(e,t){var i=t===void 0?{}:t,r=i.signed,s=r===void 0?!1:r,a=i.le,o=a===void 0?!1:a;e=Si(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(f,h,p){var m=o?p:Math.abs(p+1-e.length);return f+Ga(h)*p8[m]},Ga(0));if(s){var d=p8[e.length]/Ga(2)-Ga(1);c=Ga(c),c>d&&(c-=d,c-=d,c-=Ga(2))}return Number(c)},JHe=function(e,t){var i=t===void 0?{}:t,r=i.le,s=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Ga(e);for(var a=YHe(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/p8[l]&Ga(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},Tse=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},eVe=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return Si(t[0]);var r=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(r),a=0;return t.forEach(function(o){o=Si(o),s.set(o,a),a+=o.byteLength}),s},ps=function(e,t,i){var r=i===void 0?{}:i,s=r.offset,a=s===void 0?0:s,o=r.mask,l=o===void 0?[]:o;e=Si(e),t=Si(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,d){var f=l[d]?l[d]&e[a+d]:e[a+d];return c===f})},tVe=function(e,t,i){t.forEach(function(r){for(var s in e.mediaGroups[r])for(var a in e.mediaGroups[r][s]){var o=e.mediaGroups[r][s][a];i(o,r,s,a)}})},C0={},Ch={};function nVe(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(e.call(void 0,r,i,n))return r}}function E7(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function iVe(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var Cse=E7({HTML:"text/html",isHTML:function(n){return n===Cse.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Ase=E7({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Ase.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ch.assign=iVe;Ch.find=nVe;Ch.freeze=E7;Ch.MIME_TYPE=Cse;Ch.NAMESPACE=Ase;var Ese=Ch,Fd=Ese.find,hw=Ese.NAMESPACE;function rVe(n){return n!==""}function sVe(n){return n?n.split(/[\t\n\f\r ]+/).filter(rVe):[]}function aVe(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function NG(n){if(!n)return[];var e=sVe(n);return Object.keys(e.reduce(aVe,{}))}function oVe(n){return function(e){return n&&n.indexOf(e)!==-1}}function wT(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Ol(n,e){var t=n.prototype;if(!(t instanceof e)){let r=function(){};var i=r;r.prototype=e.prototype,r=new r,wT(t,r),n.prototype=t=r}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var Nl={},Vc=Nl.ELEMENT_NODE=1,w_=Nl.ATTRIBUTE_NODE=2,j3=Nl.TEXT_NODE=3,Mse=Nl.CDATA_SECTION_NODE=4,Ise=Nl.ENTITY_REFERENCE_NODE=5,lVe=Nl.ENTITY_NODE=6,Dse=Nl.PROCESSING_INSTRUCTION_NODE=7,Rse=Nl.COMMENT_NODE=8,Pse=Nl.DOCUMENT_NODE=9,kse=Nl.DOCUMENT_TYPE_NODE=10,lh=Nl.DOCUMENT_FRAGMENT_NODE=11,uVe=Nl.NOTATION_NODE=12,Do={},Na={};Do.INDEX_SIZE_ERR=(Na[1]="Index size error",1);Do.DOMSTRING_SIZE_ERR=(Na[2]="DOMString size error",2);var ml=Do.HIERARCHY_REQUEST_ERR=(Na[3]="Hierarchy request error",3);Do.WRONG_DOCUMENT_ERR=(Na[4]="Wrong document",4);Do.INVALID_CHARACTER_ERR=(Na[5]="Invalid character",5);Do.NO_DATA_ALLOWED_ERR=(Na[6]="No data allowed",6);Do.NO_MODIFICATION_ALLOWED_ERR=(Na[7]="No modification allowed",7);var Lse=Do.NOT_FOUND_ERR=(Na[8]="Not found",8);Do.NOT_SUPPORTED_ERR=(Na[9]="Not supported",9);var BG=Do.INUSE_ATTRIBUTE_ERR=(Na[10]="Attribute in use",10);Do.INVALID_STATE_ERR=(Na[11]="Invalid state",11);Do.SYNTAX_ERR=(Na[12]="Syntax error",12);Do.INVALID_MODIFICATION_ERR=(Na[13]="Invalid modification",13);Do.NAMESPACE_ERR=(Na[14]="Invalid namespace",14);Do.INVALID_ACCESS_ERR=(Na[15]="Invalid access",15);function Vs(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Na[n]),this.message=Na[n],Error.captureStackTrace&&Error.captureStackTrace(this,Vs);return t.code=n,e&&(this.message=this.message+": "+e),t}Vs.prototype=Error.prototype;wT(Do,Vs);function Xf(){}Xf.prototype={length:0,item:function(n){return n>=0&&n<this.length?this[n]:null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)c1(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function T_(n,e){this._node=n,this._refresh=e,M7(this)}function M7(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!==e){var t=n._refresh(n._node);if(qse(n,"length",t.length),!n.$$length||t.length<n.$$length)for(var i=t.length;i in n;i++)Object.prototype.hasOwnProperty.call(n,i)&&delete n[i];wT(t,n),n._inc=e}}T_.prototype.item=function(n){return M7(this),this[n]||null};Ol(T_,Xf);function K3(){}function Ose(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function FG(n,e,t,i){if(i?e[Ose(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var r=n.ownerDocument;r&&(i&&Fse(r,n,i),cVe(r,n,t))}}function UG(n,e,t){var i=Ose(e,t);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,n){var s=n.ownerDocument;s&&(Fse(s,n,t),t.ownerElement=null)}}else throw new Vs(Lse,new Error(n.tagName+"@"+t))}K3.prototype={length:0,item:Xf.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new Vs(BG);var t=this.getNamedItem(n.nodeName);return FG(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new Vs(BG);return t=this.getNamedItemNS(n.namespaceURI,n.localName),FG(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return UG(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return UG(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function Nse(){}Nse.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new TT;if(i.implementation=this,i.childNodes=new Xf,i.doctype=t||null,t&&i.appendChild(t),e){var r=i.createElementNS(n,e);i.appendChild(r)}return i},createDocumentType:function(n,e,t){var i=new pD;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function Gr(){}Gr.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return X3(this,n,e)},replaceChild:function(n,e){X3(this,n,e,zse),e&&this.removeChild(e)},removeChild:function(n){return Use(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return m8(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==j3&&n.nodeType==j3?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==w_?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==w_?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function Bse(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}wT(Nl,Gr);wT(Nl,Gr.prototype);function pw(n,e){if(e(n))return!0;if(n=n.firstChild)do if(pw(n,e))return!0;while(n=n.nextSibling)}function TT(){this.ownerDocument=this}function cVe(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===hw.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Fse(n,e,t,i){n&&n._inc++;var r=t.namespaceURI;r===hw.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function I7(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function Use(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,I7(n.ownerDocument,n),e}function dVe(n){return n&&(n.nodeType===Gr.DOCUMENT_NODE||n.nodeType===Gr.DOCUMENT_FRAGMENT_NODE||n.nodeType===Gr.ELEMENT_NODE)}function fVe(n){return n&&(Ud(n)||D7(n)||uh(n)||n.nodeType===Gr.DOCUMENT_FRAGMENT_NODE||n.nodeType===Gr.COMMENT_NODE||n.nodeType===Gr.PROCESSING_INSTRUCTION_NODE)}function uh(n){return n&&n.nodeType===Gr.DOCUMENT_TYPE_NODE}function Ud(n){return n&&n.nodeType===Gr.ELEMENT_NODE}function D7(n){return n&&n.nodeType===Gr.TEXT_NODE}function zG(n,e){var t=n.childNodes||[];if(Fd(t,Ud)||uh(e))return!1;var i=Fd(t,uh);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function HG(n,e){var t=n.childNodes||[];function i(s){return Ud(s)&&s!==e}if(Fd(t,i))return!1;var r=Fd(t,uh);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function hVe(n,e,t){if(!dVe(n))throw new Vs(ml,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new Vs(Lse,"child not in parent");if(!fVe(e)||uh(e)&&n.nodeType!==Gr.DOCUMENT_NODE)throw new Vs(ml,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function pVe(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Gr.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Ud);if(s.length>1||Fd(r,D7))throw new Vs(ml,"More than one element or text in fragment");if(s.length===1&&!zG(n,t))throw new Vs(ml,"Element in fragment can not be inserted before doctype")}if(Ud(e)&&!zG(n,t))throw new Vs(ml,"Only one element can be added and only after doctype");if(uh(e)){if(Fd(i,uh))throw new Vs(ml,"Only one doctype is allowed");var a=Fd(i,Ud);if(t&&i.indexOf(a)<i.indexOf(t))throw new Vs(ml,"Doctype can only be inserted before an element");if(!t&&a)throw new Vs(ml,"Doctype can not be appended since element is present")}}function zse(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Gr.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Ud);if(s.length>1||Fd(r,D7))throw new Vs(ml,"More than one element or text in fragment");if(s.length===1&&!HG(n,t))throw new Vs(ml,"Element in fragment can not be inserted before doctype")}if(Ud(e)&&!HG(n,t))throw new Vs(ml,"Only one element can be added and only after doctype");if(uh(e)){let l=function(u){return uh(u)&&u!==t};var o=l;if(Fd(i,l))throw new Vs(ml,"Only one doctype is allowed");var a=Fd(i,Ud);if(t&&i.indexOf(a)<i.indexOf(t))throw new Vs(ml,"Doctype can only be inserted before an element")}}function X3(n,e,t,i){hVe(n,e,t),n.nodeType===Gr.DOCUMENT_NODE&&(i||pVe)(n,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===lh){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:n.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:n.firstChild=s,t==null?n.lastChild=a:t.previousSibling=a;do s.parentNode=n;while(s!==a&&(s=s.nextSibling));return I7(n.ownerDocument||n,n),e.nodeType==lh&&(e.firstChild=e.lastChild=null),e}function mVe(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,I7(n.ownerDocument,n,e),e}TT.prototype={nodeName:"#document",nodeType:Pse,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==lh){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return X3(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Vc&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),Use(this,n)},replaceChild:function(n,e){X3(this,n,e,zse),n.ownerDocument=this,e&&this.removeChild(e),Ud(n)&&(this.documentElement=n)},importNode:function(n,e){return Wse(this,n,e)},getElementById:function(n){var e=null;return pw(this.documentElement,function(t){if(t.nodeType==Vc&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=NG(n);return new T_(this,function(t){var i=[];return e.length>0&&pw(t.documentElement,function(r){if(r!==t&&r.nodeType===Vc){var s=r.getAttribute("class");if(s){var a=n===s;if(!a){var o=NG(s);a=e.every(oVe(o))}a&&i.push(r)}}}),i})},createElement:function(n){var e=new Hg;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new Xf;var t=e.attributes=new K3;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new mD;return n.ownerDocument=this,n.childNodes=new Xf,n},createTextNode:function(n){var e=new R7;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new P7;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new k7;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new O7;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new Y3;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new L7;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new Hg,i=e.split(":"),r=t.attributes=new K3;return t.childNodes=new Xf,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(n,e){var t=new Y3,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};Ol(TT,Gr);function Hg(){this._nsMap={}}Hg.prototype={nodeType:Vc,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===lh?this.insertBefore(n,null):mVe(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new T_(this,function(e){var t=[];return pw(e,function(i){i!==e&&i.nodeType==Vc&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new T_(this,function(t){var i=[];return pw(t,function(r){r!==t&&r.nodeType===Vc&&(n==="*"||r.namespaceURI===n)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};TT.prototype.getElementsByTagName=Hg.prototype.getElementsByTagName;TT.prototype.getElementsByTagNameNS=Hg.prototype.getElementsByTagNameNS;Ol(Hg,Gr);function Y3(){}Y3.prototype.nodeType=w_;Ol(Y3,Gr);function CT(){}CT.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Na[ml])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),r=this.data.substring(n+e);t=i+t+r,this.nodeValue=this.data=t,this.length=t.length}};Ol(CT,Gr);function R7(){}R7.prototype={nodeName:"#text",nodeType:j3,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};Ol(R7,CT);function P7(){}P7.prototype={nodeName:"#comment",nodeType:Rse};Ol(P7,CT);function k7(){}k7.prototype={nodeName:"#cdata-section",nodeType:Mse};Ol(k7,CT);function pD(){}pD.prototype.nodeType=kse;Ol(pD,Gr);function Hse(){}Hse.prototype.nodeType=uVe;Ol(Hse,Gr);function Vse(){}Vse.prototype.nodeType=lVe;Ol(Vse,Gr);function L7(){}L7.prototype.nodeType=Ise;Ol(L7,Gr);function mD(){}mD.prototype.nodeName="#document-fragment";mD.prototype.nodeType=lh;Ol(mD,Gr);function O7(){}O7.prototype.nodeType=Dse;Ol(O7,Gr);function $se(){}$se.prototype.serializeToString=function(n,e,t){return Gse.call(n,e,t)};Gr.prototype.toString=Gse;function Gse(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return c1(this,t,n,e,a),t.join("")}function VG(n,e,t){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===hw.XML||r===hw.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===i)return a.namespace!==r}return!0}function kP(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,Bse),'"')}function c1(n,e,t,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case Vc:var s=n.attributes,a=s.length,v=n.firstChild,o=n.tagName;t=hw.isHTML(n.namespaceURI)||t;var l=o;if(!t&&!n.prefix&&n.namespaceURI){for(var u,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){u=s.item(c).value;break}if(!u)for(var d=r.length-1;d>=0;d--){var f=r[d];if(f.prefix===""&&f.namespace===n.namespaceURI){u=f.namespace;break}}if(u!==n.namespaceURI)for(var d=r.length-1;d>=0;d--){var f=r[d];if(f.namespace===n.namespaceURI){f.prefix&&(l=f.prefix+":"+o);break}}}e.push("<",l);for(var h=0;h<a;h++){var p=s.item(h);p.prefix=="xmlns"?r.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&r.push({prefix:"",namespace:p.value})}for(var h=0;h<a;h++){var p=s.item(h);if(VG(p,t,r)){var m=p.prefix||"",g=p.namespaceURI;kP(e,m?"xmlns:"+m:"xmlns",g),r.push({prefix:m,namespace:g})}c1(p,e,t,i,r)}if(o===l&&VG(n,t,r)){var m=n.prefix||"",g=n.namespaceURI;kP(e,m?"xmlns:"+m:"xmlns",g),r.push({prefix:m,namespace:g})}if(v||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;v;)v.data?e.push(v.data):c1(v,e,t,i,r.slice()),v=v.nextSibling;else for(;v;)c1(v,e,t,i,r.slice()),v=v.nextSibling;e.push("</",l,">")}else e.push("/>");return;case Pse:case lh:for(var v=n.firstChild;v;)c1(v,e,t,i,r.slice()),v=v.nextSibling;return;case w_:return kP(e,n.name,n.value);case j3:return e.push(n.data.replace(/[<&>]/g,Bse));case Mse:return e.push("<![CDATA[",n.data,"]]>");case Rse:return e.push("<!--",n.data,"-->");case kse:var _=n.publicId,y=n.systemId;if(e.push("<!DOCTYPE ",n.name),_)e.push(" PUBLIC ",_),y&&y!="."&&e.push(" ",y),e.push(">");else if(y&&y!=".")e.push(" SYSTEM ",y,">");else{var b=n.internalSubset;b&&e.push(" [",b,"]"),e.push(">")}return;case Dse:return e.push("<?",n.target," ",n.data,"?>");case Ise:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function Wse(n,e,t){var i;switch(e.nodeType){case Vc:i=e.cloneNode(!1),i.ownerDocument=n;case lh:break;case w_:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var r=e.firstChild;r;)i.appendChild(Wse(n,r,t)),r=r.nextSibling;return i}function m8(n,e,t){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(e.childNodes&&(i.childNodes=new Xf),i.ownerDocument=n,i.nodeType){case Vc:var a=e.attributes,o=i.attributes=new K3,l=a.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(m8(n,a.item(u),!0));break;case w_:t=!0}if(t)for(var c=e.firstChild;c;)i.appendChild(m8(n,c,t)),c=c.nextSibling;return i}function qse(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case Vc:case lh:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};var p2t=n;Object.defineProperty(T_.prototype,"length",{get:function(){return M7(this),this.$$length}}),Object.defineProperty(Gr.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case Vc:case lh:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),qse=function(e,t,i){e["$$"+t]=i}}}catch{}C0.DocumentType=pD;C0.DOMException=Vs;C0.DOMImplementation=Nse;C0.Element=Hg;C0.Node=Gr;C0.NodeList=Xf;C0.XMLSerializer=$se;var gD={},jse={};(function(n){var e=Ch.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:`
`,nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"	",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),n.entityMap=n.HTML_ENTITIES})(jse);var N7={},mw=Ch.NAMESPACE,g8=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,$G=new RegExp("[\\-\\.0-9"+g8.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),GG=new RegExp("^"+g8.source+$G.source+"*(?::"+g8.source+$G.source+"*)?$"),PS=0,zh=1,Hv=2,kS=3,Vv=4,$v=5,LS=6,oA=7;function C_(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,C_)}C_.prototype=new Error;C_.prototype.name=C_.name;function Kse(){}Kse.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),Xse(e,e={}),gVe(n,e,t,i,this.errorHandler),i.endDocument()}};function gVe(n,e,t,i,r){function s(L){if(L>65535){L-=65536;var G=55296+(L>>10),H=56320+(L&1023);return String.fromCharCode(G,H)}else return String.fromCharCode(L)}function a(L){var G=L.slice(1,-1);return Object.hasOwnProperty.call(t,G)?t[G]:G.charAt(0)==="#"?s(parseInt(G.substr(1).replace("x","0x"))):(r.error("entity not found:"+L),L)}function o(L){if(L>m){var G=n.substring(m,L).replace(/&#?\w+;/g,a);f&&l(m),i.characters(G,0,L-m),m=L}}function l(L,G){for(;L>=c&&(G=d.exec(n));)u=G.index,c=u+G[0].length,f.lineNumber++;f.columnNumber=L-u+1}for(var u=0,c=0,d=/.*(?:\r\n?|\n)|.*$/g,f=i.locator,h=[{currentNSMap:e}],p={},m=0;;){try{var g=n.indexOf("<",m);if(g<0){if(!n.substr(m).match(/^\s*$/)){var v=i.doc,_=v.createTextNode(n.substr(m));v.appendChild(_),i.currentElement=_}return}switch(g>m&&o(g),n.charAt(g+1)){case"/":var I=n.indexOf(">",g+3),y=n.substring(g+2,I).replace(/[ \t\n\r]+$/g,""),b=h.pop();I<0?(y=n.substring(g+2).replace(/[\s<].*/,""),r.error("end tag name: "+y+" is not complete:"+b.tagName),I=g+1+y.length):y.match(/\s</)&&(y=y.replace(/[\s<].*/,""),r.error("end tag name: "+y+" maybe not complete"),I=g+1+y.length);var x=b.localNSMap,w=b.tagName==y,A=w||b.tagName&&b.tagName.toLowerCase()==y.toLowerCase();if(A){if(i.endElement(b.uri,b.localName,y),x)for(var T in x)Object.prototype.hasOwnProperty.call(x,T)&&i.endPrefixMapping(T);w||r.fatalError("end tag name: "+y+" is not match the current start tagName:"+b.tagName)}else h.push(b);I++;break;case"?":f&&l(g),I=SVe(n,g,i);break;case"!":f&&l(g),I=bVe(n,g,i,r);break;default:f&&l(g);var C=new Yse,E=h[h.length-1].currentNSMap,I=vVe(n,g,C,E,a,r),k=C.length;if(!C.closed&&_Ve(n,I,C.tagName,p)&&(C.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),f&&k){for(var O=WG(f,{}),U=0;U<k;U++){var z=C[U];l(z.offset),z.locator=WG(f,{})}i.locator=O,qG(C,i,E)&&h.push(C),i.locator=f}else qG(C,i,E)&&h.push(C);mw.isHTML(C.uri)&&!C.closed?I=yVe(n,I,C.tagName,a,i):I++}}catch(L){if(L instanceof C_)throw L;r.error("element parse error: "+L),I=-1}I>m?m=I:o(Math.max(g,m)+1)}}function WG(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function vVe(n,e,t,i,r,s){function a(f,h,p){t.attributeNames.hasOwnProperty(f)&&s.fatalError("Attribute "+f+" redefined"),t.addValue(f,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),p)}for(var o,l,u=++e,c=PS;;){var d=n.charAt(u);switch(d){case"=":if(c===zh)o=n.slice(e,u),c=kS;else if(c===Hv)c=kS;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===kS||c===zh)if(c===zh&&(s.warning('attribute value must after "="'),o=n.slice(e,u)),e=u+1,u=n.indexOf(d,e),u>0)l=n.slice(e,u),a(o,l,e-1),c=$v;else throw new Error("attribute value no end '"+d+"' match");else if(c==Vv)l=n.slice(e,u),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+d+")!!"),e=u+1,c=$v;else throw new Error('attribute value must after "="');break;case"/":switch(c){case PS:t.setTagName(n.slice(e,u));case $v:case LS:case oA:c=oA,t.closed=!0;case Vv:case zh:break;case Hv:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==PS&&t.setTagName(n.slice(e,u)),u;case">":switch(c){case PS:t.setTagName(n.slice(e,u));case $v:case LS:case oA:break;case Vv:case zh:l=n.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case Hv:c===Hv&&(l=o),c==Vv?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!mw.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case kS:throw new Error("attribute value missed!!")}return u;case"":d=" ";default:if(d<=" ")switch(c){case PS:t.setTagName(n.slice(e,u)),c=LS;break;case zh:o=n.slice(e,u),c=Hv;break;case Vv:var l=n.slice(e,u);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case $v:c=LS;break}else switch(c){case Hv:t.tagName,(!mw.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,c=zh;break;case $v:s.warning('attribute space is required"'+o+'"!!');case LS:c=zh,e=u;break;case kS:c=Vv,e=u;break;case oA:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function qG(n,e,t){for(var i=n.tagName,r=null,d=n.length;d--;){var s=n[d],a=s.qName,o=s.value,f=a.indexOf(":");if(f>0)var l=s.prefix=a.slice(0,f),u=a.slice(f+1),c=l==="xmlns"&&u;else u=a,l=null,c=a==="xmlns"&&"";s.localName=u,c!==!1&&(r==null&&(r={},Xse(t,t={})),t[c]=r[c]=o,s.uri=mw.XMLNS,e.startPrefixMapping(c,o))}for(var d=n.length;d--;){s=n[d];var l=s.prefix;l&&(l==="xml"&&(s.uri=mw.XML),l!=="xmlns"&&(s.uri=t[l||""]))}var f=i.indexOf(":");f>0?(l=n.prefix=i.slice(0,f),u=n.localName=i.slice(f+1)):(l=null,u=n.localName=i);var h=n.uri=t[l||""];if(e.startElement(h,u,i,n),n.closed){if(e.endElement(h,u,i),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return n.currentNSMap=t,n.localNSMap=r,!0}function yVe(n,e,t,i,r){if(/^(?:script|textarea)$/i.test(t)){var s=n.indexOf("</"+t+">",e),a=n.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return e+1}function _Ve(n,e,t,i){var r=i[t];return r==null&&(r=n.lastIndexOf("</"+t+">"),r<e&&(r=n.lastIndexOf("</"+t)),i[t]=r),r<e}function Xse(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function bVe(n,e,t,i){var r=n.charAt(e+2);switch(r){case"-":if(n.charAt(e+3)==="-"){var s=n.indexOf("-->",e+4);return s>e?(t.comment(n,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var s=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,s-e-9),t.endCDATA(),s+3}var a=xVe(n,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var d=a[o-1];return t.startDTD(l,u,c),t.endDTD(),d.index+d[0].length}}return-1}function SVe(n,e,t){var i=n.indexOf("?>",e);if(i){var r=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),i+2):-1}return-1}function Yse(){this.attributeNames={}}Yse.prototype={setTagName:function(n){if(!GG.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!GG.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function xVe(n,e){var t,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(n);t=r.exec(n);)if(i.push(t),t[1])return i}N7.XMLReader=Kse;N7.ParseError=C_;var wVe=Ch,TVe=C0,jG=jse,Qse=N7,CVe=TVe.DOMImplementation,KG=wVe.NAMESPACE,AVe=Qse.ParseError,EVe=Qse.XMLReader;function Zse(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function Jse(n){this.options=n||{locator:{}}}Jse.prototype.parseFromString=function(n,e){var t=this.options,i=new EVe,r=t.domBuilder||new AT,s=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?jG.HTML_ENTITIES:jG.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=MVe(s,r,a),i.domBuilder=t.domBuilder||r,l&&(o[""]=KG.HTML),o.xml=o.xml||KG.XML;var c=t.normalizeLineEndings||Zse;return n&&typeof n=="string"?i.parse(c(n),o,u):i.errorHandler.error("invalid doc source"),r.doc};function MVe(n,e,t){if(!n){if(e instanceof AT)return e;n=e}var i={},r=n instanceof Function;t=t||{};function s(a){var o=n[a];!o&&r&&(o=n.length==2?function(l){n(a,l)}:n),i[a]=o&&function(l){o("[xmldom "+a+"]	"+l+v8(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function AT(){this.cdata=!1}function Gv(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}AT.prototype={startDocument:function(){this.doc=new CVe().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var r=this.doc,s=r.createElementNS(n,t||e),a=i.length;lA(this,s),this.currentElement=s,this.locator&&Gv(this.locator,s);for(var o=0;o<a;o++){var n=i.getURI(o),l=i.getValue(o),t=i.getQName(o),u=r.createAttributeNS(n,t);this.locator&&Gv(i.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(n,e,t){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&Gv(this.locator,t),lA(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=XG.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&Gv(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=XG.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&Gv(this.locator,i),lA(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,e,t);this.locator&&Gv(this.locator,r),lA(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,v8(this.locator))},error:function(n){console.error("[xmldom error]	"+n,v8(this.locator))},fatalError:function(n){throw new AVe(n,this.locator)}};function v8(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function XG(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){AT.prototype[n]=function(){return null}});function lA(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}gD.__DOMHandler=AT;gD.normalizeLineEndings=Zse;gD.DOMParser=Jse;var IVe=gD.DOMParser;/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const YG=n=>!!n&&typeof n=="object",Ra=(...n)=>n.reduce((e,t)=>(typeof t!="object"||Object.keys(t).forEach(i=>{Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=e[i].concat(t[i]):YG(e[i])&&YG(t[i])?e[i]=Ra(e[i],t[i]):e[i]=t[i]}),e),{}),eae=n=>Object.keys(n).map(e=>n[e]),DVe=(n,e)=>{const t=[];for(let i=n;i<e;i++)t.push(i);return t},A_=n=>n.reduce((e,t)=>e.concat(t),[]),tae=n=>{if(!n.length)return[];const e=[];for(let t=0;t<n.length;t++)e.push(n[t]);return e},RVe=(n,e)=>n.reduce((t,i,r)=>(i[e]&&t.push(r),t),[]),PVe=(n,e)=>eae(n.reduce((t,i)=>(i.forEach(r=>{t[e(r)]=r}),t),{}));var E_={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",INVALID_NUMBER_OF_CONTENT_STEERING:"INVALID_NUMBER_OF_CONTENT_STEERING",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const gw=({baseUrl:n="",source:e="",range:t="",indexRange:i=""})=>{const r={uri:e,resolvedUri:hD(n||"",e)};if(t||i){const a=(t||i).split("-");let o=ht.BigInt?ht.BigInt(a[0]):parseInt(a[0],10),l=ht.BigInt?ht.BigInt(a[1]):parseInt(a[1],10);o<Number.MAX_SAFE_INTEGER&&typeof o=="bigint"&&(o=Number(o)),l<Number.MAX_SAFE_INTEGER&&typeof l=="bigint"&&(l=Number(l));let u;typeof l=="bigint"||typeof o=="bigint"?u=ht.BigInt(l)-ht.BigInt(o)+ht.BigInt(1):u=l-o+1,typeof u=="bigint"&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),r.byterange={length:u,offset:o}}return r},kVe=n=>{let e;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=ht.BigInt(n.offset)+ht.BigInt(n.length)-ht.BigInt(1):e=n.offset+n.length-1,`${n.offset}-${e}`},QG=n=>(n&&typeof n!="number"&&(n=parseInt(n,10)),isNaN(n)?null:n),LVe={static(n){const{duration:e,timescale:t=1,sourceDuration:i,periodDuration:r}=n,s=QG(n.endNumber),a=e/t;return typeof s=="number"?{start:0,end:s}:typeof r=="number"?{start:0,end:r/a}:{start:0,end:i/a}},dynamic(n){const{NOW:e,clientOffset:t,availabilityStartTime:i,timescale:r=1,duration:s,periodStart:a=0,minimumUpdatePeriod:o=0,timeShiftBufferDepth:l=1/0}=n,u=QG(n.endNumber),c=(e+t)/1e3,d=i+a,h=c+o-d,p=Math.ceil(h*r/s),m=Math.floor((c-d-l)*r/s),g=Math.floor((c-d)*r/s);return{start:Math.max(0,m),end:typeof u=="number"?u:Math.min(p,g)}}},OVe=n=>e=>{const{duration:t,timescale:i=1,periodStart:r,startNumber:s=1}=n;return{number:s+e,duration:t/i,timeline:r,time:e*t}},B7=n=>{const{type:e,duration:t,timescale:i=1,periodDuration:r,sourceDuration:s}=n,{start:a,end:o}=LVe[e](n),l=DVe(a,o).map(OVe(n));if(e==="static"){const u=l.length-1,c=typeof r=="number"?r:s;l[u].duration=c-t/i*u}return l},nae=n=>{const{baseUrl:e,initialization:t={},sourceDuration:i,indexRange:r="",periodStart:s,presentationTime:a,number:o=0,duration:l}=n;if(!e)throw new Error(E_.NO_BASE_URL);const u=gw({baseUrl:e,source:t.sourceURL,range:t.range}),c=gw({baseUrl:e,source:e,indexRange:r});if(c.map=u,l){const d=B7(n);d.length&&(c.duration=d[0].duration,c.timeline=d[0].timeline)}else i&&(c.duration=i,c.timeline=s);return c.presentationTime=a||s,c.number=o,[c]},F7=(n,e,t)=>{const i=n.sidx.map?n.sidx.map:null,r=n.sidx.duration,s=n.timeline||0,a=n.sidx.byterange,o=a.offset+a.length,l=e.timescale,u=e.references.filter(g=>g.referenceType!==1),c=[],d=n.endList?"static":"dynamic",f=n.sidx.timeline;let h=f,p=n.mediaSequence||0,m;typeof e.firstOffset=="bigint"?m=ht.BigInt(o)+e.firstOffset:m=o+e.firstOffset;for(let g=0;g<u.length;g++){const v=e.references[g],_=v.referencedSize,y=v.subsegmentDuration;let b;typeof m=="bigint"?b=m+ht.BigInt(_)-ht.BigInt(1):b=m+_-1;const x=`${m}-${b}`,A=nae({baseUrl:t,timescale:l,timeline:s,periodStart:f,presentationTime:h,number:p,duration:y,sourceDuration:r,indexRange:x,type:d})[0];i&&(A.map=i),c.push(A),typeof m=="bigint"?m+=ht.BigInt(_):m+=_,h+=y/l,p++}return n.segments=c,n},NVe=["AUDIO","SUBTITLES"],BVe=1/60,iae=n=>PVe(n,({timeline:e})=>e).sort((e,t)=>e.timeline>t.timeline?1:-1),FVe=(n,e)=>{for(let t=0;t<n.length;t++)if(n[t].attributes.NAME===e)return n[t];return null},ZG=n=>{let e=[];return tVe(n,NVe,(t,i,r,s)=>{e=e.concat(t.playlists||[])}),e},JG=({playlist:n,mediaSequence:e})=>{n.mediaSequence=e,n.segments.forEach((t,i)=>{t.number=n.mediaSequence+i})},UVe=({oldPlaylists:n,newPlaylists:e,timelineStarts:t})=>{e.forEach(i=>{i.discontinuitySequence=t.findIndex(function({timeline:l}){return l===i.timeline});const r=FVe(n,i.attributes.NAME);if(!r||i.sidx)return;const s=i.segments[0],a=r.segments.findIndex(function(l){return Math.abs(l.presentationTime-s.presentationTime)<BVe});if(a===-1){JG({playlist:i,mediaSequence:r.mediaSequence+r.segments.length}),i.segments[0].discontinuity=!0,i.discontinuityStarts.unshift(0),(!r.segments.length&&i.timeline>r.timeline||r.segments.length&&i.timeline>r.segments[r.segments.length-1].timeline)&&i.discontinuitySequence--;return}r.segments[a].discontinuity&&!s.discontinuity&&(s.discontinuity=!0,i.discontinuityStarts.unshift(0),i.discontinuitySequence--),JG({playlist:i,mediaSequence:r.segments[a].number})})},zVe=({oldManifest:n,newManifest:e})=>{const t=n.playlists.concat(ZG(n)),i=e.playlists.concat(ZG(e));return e.timelineStarts=iae([n.timelineStarts,e.timelineStarts]),UVe({oldPlaylists:t,newPlaylists:i,timelineStarts:e.timelineStarts}),e},vD=n=>n&&n.uri+"-"+kVe(n.byterange),LP=n=>{const e=n.reduce(function(i,r){return i[r.attributes.baseUrl]||(i[r.attributes.baseUrl]=[]),i[r.attributes.baseUrl].push(r),i},{});let t=[];return Object.values(e).forEach(i=>{const r=eae(i.reduce((s,a)=>{const o=a.attributes.id+(a.attributes.lang||"");return s[o]?(a.segments&&(a.segments[0]&&(a.segments[0].discontinuity=!0),s[o].segments.push(...a.segments)),a.attributes.contentProtection&&(s[o].attributes.contentProtection=a.attributes.contentProtection)):(s[o]=a,s[o].attributes.timelineStarts=[]),s[o].attributes.timelineStarts.push({start:a.attributes.periodStart,timeline:a.attributes.periodStart}),s},{}));t=t.concat(r)}),t.map(i=>(i.discontinuityStarts=RVe(i.segments||[],"discontinuity"),i))},U7=(n,e)=>{const t=vD(n.sidx),i=t&&e[t]&&e[t].sidx;return i&&F7(n,i,n.sidx.resolvedUri),n},HVe=(n,e={})=>{if(!Object.keys(e).length)return n;for(const t in n)n[t]=U7(n[t],e);return n},VVe=({attributes:n,segments:e,sidx:t,mediaSequence:i,discontinuitySequence:r,discontinuityStarts:s},a)=>{const o={attributes:{NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuitySequence:r,discontinuityStarts:s,timelineStarts:n.timelineStarts,mediaSequence:i,segments:e};return n.contentProtection&&(o.contentProtection=n.contentProtection),n.serviceLocation&&(o.attributes.serviceLocation=n.serviceLocation),t&&(o.sidx=t),a&&(o.attributes.AUDIO="audio",o.attributes.SUBTITLES="subs"),o},$Ve=({attributes:n,segments:e,mediaSequence:t,discontinuityStarts:i,discontinuitySequence:r})=>{typeof e>"u"&&(e=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);const s={NAME:n.id,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1};n.codecs&&(s.CODECS=n.codecs);const a={attributes:s,uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:i,discontinuitySequence:r,mediaSequence:t,segments:e};return n.serviceLocation&&(a.attributes.serviceLocation=n.serviceLocation),a},GVe=(n,e={},t=!1)=>{let i;const r=n.reduce((s,a)=>{const o=a.attributes.role&&a.attributes.role.value||"",l=a.attributes.lang||"";let u=a.attributes.label||"main";if(l&&!a.attributes.label){const d=o?` (${o})`:"";u=`${a.attributes.lang}${d}`}s[u]||(s[u]={language:l,autoselect:!0,default:o==="main",playlists:[],uri:""});const c=U7(VVe(a,t),e);return s[u].playlists.push(c),typeof i>"u"&&o==="main"&&(i=a,i.default=!0),s},{});if(!i){const s=Object.keys(r)[0];r[s].default=!0}return r},WVe=(n,e={})=>n.reduce((t,i)=>{const r=i.attributes.label||i.attributes.lang||"text",s=i.attributes.lang||"und";return t[r]||(t[r]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),t[r].playlists.push(U7($Ve(i),e)),t},{}),qVe=n=>n.reduce((e,t)=>(t&&t.forEach(i=>{const{channel:r,language:s}=i;e[s]={autoselect:!1,default:!1,instreamId:r,language:s},i.hasOwnProperty("aspectRatio")&&(e[s].aspectRatio=i.aspectRatio),i.hasOwnProperty("easyReader")&&(e[s].easyReader=i.easyReader),i.hasOwnProperty("3D")&&(e[s]["3D"]=i["3D"])}),e),{}),jVe=({attributes:n,segments:e,sidx:t,discontinuityStarts:i})=>{const r={attributes:{NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth,"PROGRAM-ID":1},uri:"",endList:n.type==="static",timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,discontinuityStarts:i,timelineStarts:n.timelineStarts,segments:e};return n.frameRate&&(r.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(r.contentProtection=n.contentProtection),n.serviceLocation&&(r.attributes.serviceLocation=n.serviceLocation),t&&(r.sidx=t),r},KVe=({attributes:n})=>n.mimeType==="video/mp4"||n.mimeType==="video/webm"||n.contentType==="video",XVe=({attributes:n})=>n.mimeType==="audio/mp4"||n.mimeType==="audio/webm"||n.contentType==="audio",YVe=({attributes:n})=>n.mimeType==="text/vtt"||n.contentType==="text",QVe=(n,e)=>{n.forEach(t=>{t.mediaSequence=0,t.discontinuitySequence=e.findIndex(function({timeline:i}){return i===t.timeline}),t.segments&&t.segments.forEach((i,r)=>{i.number=r})})},eW=n=>n?Object.keys(n).reduce((e,t)=>{const i=n[t];return e.concat(i.playlists)},[]):[],ZVe=({dashPlaylists:n,locations:e,contentSteering:t,sidxMapping:i={},previousManifest:r,eventStream:s})=>{if(!n.length)return{};const{sourceDuration:a,type:o,suggestedPresentationDelay:l,minimumUpdatePeriod:u}=n[0].attributes,c=LP(n.filter(KVe)).map(jVe),d=LP(n.filter(XVe)),f=LP(n.filter(YVe)),h=n.map(b=>b.attributes.captionServices).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:a,playlists:HVe(c,i)};u>=0&&(p.minimumUpdatePeriod=u*1e3),e&&(p.locations=e),t&&(p.contentSteering=t),o==="dynamic"&&(p.suggestedPresentationDelay=l),s&&s.length>0&&(p.eventStream=s);const m=p.playlists.length===0,g=d.length?GVe(d,i,m):null,v=f.length?WVe(f,i):null,_=c.concat(eW(g),eW(v)),y=_.map(({timelineStarts:b})=>b);return p.timelineStarts=iae(y),QVe(_,p.timelineStarts),g&&(p.mediaGroups.AUDIO.audio=g),v&&(p.mediaGroups.SUBTITLES.subs=v),h.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=qVe(h)),r?zVe({oldManifest:r,newManifest:p}):p},JVe=(n,e,t)=>{const{NOW:i,clientOffset:r,availabilityStartTime:s,timescale:a=1,periodStart:o=0,minimumUpdatePeriod:l=0}=n,u=(i+r)/1e3,c=s+o,f=u+l-c;return Math.ceil((f*a-e)/t)},rae=(n,e)=>{const{type:t,minimumUpdatePeriod:i=0,media:r="",sourceDuration:s,timescale:a=1,startNumber:o=1,periodStart:l}=n,u=[];let c=-1;for(let d=0;d<e.length;d++){const f=e[d],h=f.d,p=f.r||0,m=f.t||0;c<0&&(c=m),m&&m>c&&(c=m);let g;if(p<0){const y=d+1;y===e.length?t==="dynamic"&&i>0&&r.indexOf("$Number$")>0?g=JVe(n,c,h):g=(s*a-c)/h:g=(e[y].t-c)/h}else g=p+1;const v=o+u.length+g;let _=o+u.length;for(;_<v;)u.push({number:_,duration:h/a,time:c,timeline:l}),c+=h,_++}return u},e$e=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,t$e=n=>(e,t,i,r)=>{if(e==="$$")return"$";if(typeof n[t]>"u")return e;const s=""+n[t];return t==="RepresentationID"||(i?r=parseInt(r,10):r=1,s.length>=r)?s:`${new Array(r-s.length+1).join("0")}${s}`},tW=(n,e)=>n.replace(e$e,t$e(e)),n$e=(n,e)=>!n.duration&&!e?[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodStart}]:n.duration?B7(n):rae(n,e),i$e=(n,e)=>{const t={RepresentationID:n.id,Bandwidth:n.bandwidth||0},{initialization:i={sourceURL:"",range:""}}=n,r=gw({baseUrl:n.baseUrl,source:tW(i.sourceURL,t),range:i.range});return n$e(n,e).map(a=>{t.Number=a.number,t.Time=a.time;const o=tW(n.media||"",t),l=n.timescale||1,u=n.presentationTimeOffset||0,c=n.periodStart+(a.time-u)/l;return{uri:o,timeline:a.timeline,duration:a.duration,resolvedUri:hD(n.baseUrl||"",o),map:r,number:a.number,presentationTime:c}})},r$e=(n,e)=>{const{baseUrl:t,initialization:i={}}=n,r=gw({baseUrl:t,source:i.sourceURL,range:i.range}),s=gw({baseUrl:t,source:e.media,range:e.mediaRange});return s.map=r,s},s$e=(n,e)=>{const{duration:t,segmentUrls:i=[],periodStart:r}=n;if(!t&&!e||t&&e)throw new Error(E_.SEGMENT_TIME_UNSPECIFIED);const s=i.map(l=>r$e(n,l));let a;return t&&(a=B7(n)),e&&(a=rae(n,e)),a.map((l,u)=>{if(s[u]){const c=s[u],d=n.timescale||1,f=n.presentationTimeOffset||0;return c.timeline=l.timeline,c.duration=l.duration,c.number=l.number,c.presentationTime=r+(l.time-f)/d,c}}).filter(l=>l)},a$e=({attributes:n,segmentInfo:e})=>{let t,i;e.template?(i=i$e,t=Ra(n,e.template)):e.base?(i=nae,t=Ra(n,e.base)):e.list&&(i=s$e,t=Ra(n,e.list));const r={attributes:n};if(!i)return r;const s=i(t,e.segmentTimeline);if(t.duration){const{duration:a,timescale:o=1}=t;t.duration=a/o}else s.length?t.duration=s.reduce((a,o)=>Math.max(a,Math.ceil(o.duration)),0):t.duration=0;return r.attributes=t,r.segments=s,e.base&&t.indexRange&&(r.sidx=s[0],r.segments=[]),r},o$e=n=>n.map(a$e),ms=(n,e)=>tae(n.childNodes).filter(({tagName:t})=>t===e),ET=n=>n.textContent.trim(),l$e=n=>parseFloat(n.split("/").reduce((e,t)=>e/t)),Wv=n=>{const o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(n);if(!o)return 0;const[l,u,c,d,f,h]=o.slice(1);return parseFloat(l||0)*31536e3+parseFloat(u||0)*2592e3+parseFloat(c||0)*86400+parseFloat(d||0)*3600+parseFloat(f||0)*60+parseFloat(h||0)},u$e=n=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(n)&&(n+="Z"),Date.parse(n)),nW={mediaPresentationDuration(n){return Wv(n)},availabilityStartTime(n){return u$e(n)/1e3},minimumUpdatePeriod(n){return Wv(n)},suggestedPresentationDelay(n){return Wv(n)},type(n){return n},timeShiftBufferDepth(n){return Wv(n)},start(n){return Wv(n)},width(n){return parseInt(n,10)},height(n){return parseInt(n,10)},bandwidth(n){return parseInt(n,10)},frameRate(n){return l$e(n)},startNumber(n){return parseInt(n,10)},timescale(n){return parseInt(n,10)},presentationTimeOffset(n){return parseInt(n,10)},duration(n){const e=parseInt(n,10);return isNaN(e)?Wv(n):e},d(n){return parseInt(n,10)},t(n){return parseInt(n,10)},r(n){return parseInt(n,10)},presentationTime(n){return parseInt(n,10)},DEFAULT(n){return n}},ea=n=>n&&n.attributes?tae(n.attributes).reduce((e,t)=>{const i=nW[t.name]||nW.DEFAULT;return e[t.name]=i(t.value),e},{}):{},c$e={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},yD=(n,e)=>e.length?A_(n.map(function(t){return e.map(function(i){const r=ET(i),s=hD(t.baseUrl,r),a=Ra(ea(i),{baseUrl:s});return s!==r&&!a.serviceLocation&&t.serviceLocation&&(a.serviceLocation=t.serviceLocation),a})})):n,z7=n=>{const e=ms(n,"SegmentTemplate")[0],t=ms(n,"SegmentList")[0],i=t&&ms(t,"SegmentURL").map(d=>Ra({tag:"SegmentURL"},ea(d))),r=ms(n,"SegmentBase")[0],s=t||e,a=s&&ms(s,"SegmentTimeline")[0],o=t||r||e,l=o&&ms(o,"Initialization")[0],u=e&&ea(e);u&&l?u.initialization=l&&ea(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});const c={template:u,segmentTimeline:a&&ms(a,"S").map(d=>ea(d)),list:t&&Ra(ea(t),{segmentUrls:i,initialization:ea(l)}),base:r&&Ra(ea(r),{initialization:ea(l)})};return Object.keys(c).forEach(d=>{c[d]||delete c[d]}),c},d$e=(n,e,t)=>i=>{const r=ms(i,"BaseURL"),s=yD(e,r),a=Ra(n,ea(i)),o=z7(i);return s.map(l=>({segmentInfo:Ra(t,o),attributes:Ra(a,l)}))},f$e=n=>n.reduce((e,t)=>{const i=ea(t);i.schemeIdUri&&(i.schemeIdUri=i.schemeIdUri.toLowerCase());const r=c$e[i.schemeIdUri];if(r){e[r]={attributes:i};const s=ms(t,"cenc:pssh")[0];if(s){const a=ET(s);e[r].pssh=a&&_se(a)}}return e},{}),h$e=n=>{if(n.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{let i,r;return r=t,/^CC\d=/.test(t)?[i,r]=t.split("="):/^CC\d$/.test(t)&&(i=t),{channel:i,language:r}});if(n.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof n.value!="string"?[]:n.value.split(";")).map(t=>{const i={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){const[r,s=""]=t.split("=");i.channel=r,i.language=t,s.split(",").forEach(a=>{const[o,l]=a.split(":");o==="lang"?i.language=l:o==="er"?i.easyReader=Number(l):o==="war"?i.aspectRatio=Number(l):o==="3D"&&(i["3D"]=Number(l))})}else i.language=t;return i.channel&&(i.channel="SERVICE"+i.channel),i})},p$e=n=>A_(ms(n.node,"EventStream").map(e=>{const t=ea(e),i=t.schemeIdUri;return ms(e,"Event").map(r=>{const s=ea(r),a=s.presentationTime||0,o=t.timescale||1,l=s.duration||0,u=a/o+n.attributes.start;return{schemeIdUri:i,value:t.value,id:s.id,start:u,end:u+l/o,messageData:ET(r)||s.messageData,contentEncoding:t.contentEncoding,presentationTimeOffset:t.presentationTimeOffset||0}})})),m$e=(n,e,t)=>i=>{const r=ea(i),s=yD(e,ms(i,"BaseURL")),a=ms(i,"Role")[0],o={role:ea(a)};let l=Ra(n,r,o);const u=ms(i,"Accessibility")[0],c=h$e(ea(u));c&&(l=Ra(l,{captionServices:c}));const d=ms(i,"Label")[0];if(d&&d.childNodes.length){const g=d.childNodes[0].nodeValue.trim();l=Ra(l,{label:g})}const f=f$e(ms(i,"ContentProtection"));Object.keys(f).length&&(l=Ra(l,{contentProtection:f}));const h=z7(i),p=ms(i,"Representation"),m=Ra(t,h);return A_(p.map(d$e(l,s,m)))},g$e=(n,e)=>(t,i)=>{const r=yD(e,ms(t.node,"BaseURL")),s=Ra(n,{periodStart:t.attributes.start});typeof t.attributes.duration=="number"&&(s.periodDuration=t.attributes.duration);const a=ms(t.node,"AdaptationSet"),o=z7(t.node);return A_(a.map(m$e(s,r,o)))},v$e=(n,e)=>{if(n.length>1&&e({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!n.length)return null;const t=Ra({serverURL:ET(n[0])},ea(n[0]));return t.queryBeforeStart=t.queryBeforeStart==="true",t},y$e=({attributes:n,priorPeriodAttributes:e,mpdType:t})=>typeof n.start=="number"?n.start:e&&typeof e.start=="number"&&typeof e.duration=="number"?e.start+e.duration:!e&&t==="static"?0:null,_$e=(n,e={})=>{const{manifestUri:t="",NOW:i=Date.now(),clientOffset:r=0,eventHandler:s=function(){}}=e,a=ms(n,"Period");if(!a.length)throw new Error(E_.INVALID_NUMBER_OF_PERIOD);const o=ms(n,"Location"),l=ea(n),u=yD([{baseUrl:t}],ms(n,"BaseURL")),c=ms(n,"ContentSteering");l.type=l.type||"static",l.sourceDuration=l.mediaPresentationDuration||0,l.NOW=i,l.clientOffset=r,o.length&&(l.locations=o.map(ET));const d=[];return a.forEach((f,h)=>{const p=ea(f),m=d[h-1];p.start=y$e({attributes:p,priorPeriodAttributes:m?m.attributes:null,mpdType:l.type}),d.push({node:f,attributes:p})}),{locations:l.locations,contentSteeringInfo:v$e(c,s),representationInfo:A_(d.map(g$e(l,u))),eventStream:A_(d.map(p$e))}},sae=n=>{if(n==="")throw new Error(E_.DASH_EMPTY_MANIFEST);const e=new IVe;let t,i;try{t=e.parseFromString(n,"application/xml"),i=t&&t.documentElement.tagName==="MPD"?t.documentElement:null}catch{}if(!i||i&&i.getElementsByTagName("parsererror").length>0)throw new Error(E_.DASH_INVALID_XML);return i},b$e=n=>{const e=ms(n,"UTCTiming")[0];if(!e)return null;const t=ea(e);switch(t.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":t.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":t.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":t.method="DIRECT",t.value=Date.parse(t.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(E_.UNSUPPORTED_UTC_TIMING_SCHEME)}return t},S$e=(n,e={})=>{const t=_$e(sae(n),e),i=o$e(t.representationInfo);return ZVe({dashPlaylists:i,locations:t.locations,contentSteering:t.contentSteeringInfo,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest,eventStream:t.eventStream})},x$e=n=>b$e(sae(n));var aae=Math.pow(2,32),w$e=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*aae+e.getUint32(4)},T$e={getUint64:w$e,MAX_UINT32:aae},iW=T$e.getUint64,C$e=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=iW(n.subarray(i)),t.firstOffset=iW(n.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t},A$e=C$e;const E$e=sl(A$e);var M$e=Si([73,68,51]),I$e=function(e,t){t===void 0&&(t=0),e=Si(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(i&16)>>4;return s?r+20:r+10},Ix=function n(e,t){return t===void 0&&(t=0),e=Si(e),e.length-t<10||!ps(e,M$e,{offset:t})?t:(t+=I$e(e,t),n(e,t))},rW=function(e){return typeof e=="string"?Tse(e):e},D$e=function(e){return Array.isArray(e)?e.map(function(t){return rW(t)}):[rW(e)]},R$e=function n(e,t,i){i===void 0&&(i=!1),t=D$e(t),e=Si(e);var r=[];if(!t.length)return r;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(s+8,l);ps(o,t[0])&&(t.length===1?r.push(u):r.push.apply(r,n(u,t.slice(1),i))),s=l}return r},uA={EBML:Si([26,69,223,163]),DocType:Si([66,130]),Segment:Si([24,83,128,103]),SegmentInfo:Si([21,73,169,102]),Tracks:Si([22,84,174,107]),Track:Si([174]),TrackNumber:Si([215]),DefaultDuration:Si([35,227,131]),TrackEntry:Si([174]),TrackType:Si([131]),FlagDefault:Si([136]),CodecID:Si([134]),CodecPrivate:Si([99,162]),VideoTrack:Si([224]),AudioTrack:Si([225]),Cluster:Si([31,67,182,117]),Timestamp:Si([231]),TimestampScale:Si([42,215,177]),BlockGroup:Si([160]),BlockDuration:Si([155]),Block:Si([161]),SimpleBlock:Si([163])},y8=[128,64,32,16,8,4,2,1],P$e=function(e){for(var t=1,i=0;i<y8.length&&!(e&y8[i]);i++)t++;return t},Q3=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var s=P$e(e[t]),a=e.subarray(t,t+s);return i&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=y8[s-1]),{length:s,value:ZHe(a,{signed:r}),bytes:a}},sW=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?JHe(e):e},k$e=function(e){return Array.isArray(e)?e.map(function(t){return sW(t)}):[sW(e)]},L$e=function n(e,t,i){if(i>=t.length)return t.length;var r=Q3(t,i,!1);if(ps(e.bytes,r.bytes))return i;var s=Q3(t,i+r.length);return n(e,t,i+s.length+s.value+r.length)},aW=function n(e,t){t=k$e(t),e=Si(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var s=Q3(e,r,!1),a=Q3(e,r+s.length),o=r+s.length+a.length;a.value===127&&(a.value=L$e(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);ps(t[0],s.bytes)&&(t.length===1?i.push(u):i=i.concat(n(u,t.slice(1))));var c=s.length+a.length+u.length;r+=c}return i},O$e=Si([0,0,0,1]),N$e=Si([0,0,1]),B$e=Si([0,0,3]),F$e=function(e){for(var t=[],i=1;i<e.length-2;)ps(e.subarray(i,i+3),B$e)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,s=new Uint8Array(r),a=0;for(i=0;i<r;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=e[a];return s},oae=function(e,t,i,r){r===void 0&&(r=1/0),e=Si(e),i=[].concat(i);for(var s=0,a,o=0;s<e.length&&(o<r||a);){var l=void 0;if(ps(e.subarray(s),O$e)?l=4:ps(e.subarray(s),N$e)&&(l=3),!l){s++;continue}if(o++,a)return F$e(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),i.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},U$e=function(e,t,i){return oae(e,"h264",t,i)},z$e=function(e,t,i){return oae(e,"h265",t,i)},No={webm:Si([119,101,98,109]),matroska:Si([109,97,116,114,111,115,107,97]),flac:Si([102,76,97,67]),ogg:Si([79,103,103,83]),ac3:Si([11,119]),riff:Si([82,73,70,70]),avi:Si([65,86,73]),wav:Si([87,65,86,69]),"3gp":Si([102,116,121,112,51,103]),mp4:Si([102,116,121,112]),fmp4:Si([115,116,121,112]),mov:Si([102,116,121,112,113,116]),moov:Si([109,111,111,118]),moof:Si([109,111,111,102])},M_={aac:function(e){var t=Ix(e);return ps(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Ix(e);return ps(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=aW(e,[uA.EBML,uA.DocType])[0];return ps(t,No.webm)},mkv:function(e){var t=aW(e,[uA.EBML,uA.DocType])[0];return ps(t,No.matroska)},mp4:function(e){if(M_["3gp"](e)||M_.mov(e))return!1;if(ps(e,No.mp4,{offset:4})||ps(e,No.fmp4,{offset:4})||ps(e,No.moof,{offset:4})||ps(e,No.moov,{offset:4}))return!0},mov:function(e){return ps(e,No.mov,{offset:4})},"3gp":function(e){return ps(e,No["3gp"],{offset:4})},ac3:function(e){var t=Ix(e);return ps(e,No.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=Ix(e);return ps(e,No.flac,{offset:t})},ogg:function(e){return ps(e,No.ogg)},avi:function(e){return ps(e,No.riff)&&ps(e,No.avi,{offset:8})},wav:function(e){return ps(e,No.riff)&&ps(e,No.wav,{offset:8})},h264:function(e){return U$e(e,7,3).length},h265:function(e){return z$e(e,[32,33],3).length}},_8=Object.keys(M_).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);_8.forEach(function(n){var e=M_[n];M_[n]=function(t){return e(Si(t))}});var H$e=M_,H7=function(e){e=Si(e);for(var t=0;t<_8.length;t++){var i=_8[t];if(H$e[i](e))return i}return""},V$e=function(e){return R$e(e,["moof"]).length>0},V7=9e4,$7,G7,_D,W7,lae,uae,cae;$7=function(n){return n*V7};G7=function(n,e){return n*e};_D=function(n){return n/V7};W7=function(n,e){return n/e};lae=function(n,e){return $7(W7(n,e))};uae=function(n,e){return G7(_D(n),e)};cae=function(n,e,t){return _D(t?n:n-e)};var ng={ONE_SECOND_IN_TS:V7,secondsToVideoTs:$7,secondsToAudioTs:G7,videoTsToSeconds:_D,audioTsToSeconds:W7,audioTsToVideoTs:lae,videoTsToAudioTs:uae,metadataTsToSeconds:cae};/**
 * @license
 * Video.js 8.21.0 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var b8="8.21.0";const Hf={},o0=function(n,e){return Hf[n]=Hf[n]||[],e&&(Hf[n]=Hf[n].concat(e)),Hf[n]},$$e=function(n,e){o0(n,e)},dae=function(n,e){const t=o0(n).indexOf(e);return t<=-1?!1:(Hf[n]=Hf[n].slice(),Hf[n].splice(t,1),!0)},G$e=function(n,e){o0(n,[].concat(e).map(t=>{const i=(...r)=>(dae(n,i),t(...r));return i}))},Z3={prefixed:!0},PM=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],oW=PM[0];let Dx;for(let n=0;n<PM.length;n++)if(PM[n][1]in Tn){Dx=PM[n];break}if(Dx){for(let n=0;n<Dx.length;n++)Z3[oW[n]]=Dx[n];Z3.prefixed=Dx[0]!==oW[0]}let pl=[];const W$e=(n,e,t)=>(i,r,s)=>{const a=e.levels[r],o=new RegExp(`^(${a})$`);let l=n;if(i!=="log"&&s.unshift(i.toUpperCase()+":"),t&&(l=`%c${n}`,s.unshift(t)),s.unshift(l+":"),pl){pl.push([].concat(s));const c=pl.length-1e3;pl.splice(0,c>0?c:0)}if(!ht.console)return;let u=ht.console[i];!u&&i==="debug"&&(u=ht.console.info||ht.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(s)?"apply":"call"](ht.console,s)};function S8(n,e=":",t=""){let i="info",r;function s(...a){r("log",i,a)}return r=W$e(n,s,t),s.createLogger=(a,o,l)=>{const u=o!==void 0?o:e,c=l!==void 0?l:t,d=`${n} ${u} ${a}`;return S8(d,u,c)},s.createNewLogger=(a,o,l)=>S8(a,o,l),s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},s.level=a=>{if(typeof a=="string"){if(!s.levels.hasOwnProperty(a))throw new Error(`"${a}" in not a valid log level`);i=a}return i},s.history=()=>pl?[].concat(pl):[],s.history.filter=a=>(pl||[]).filter(o=>new RegExp(`.*${a}.*`).test(o[0])),s.history.clear=()=>{pl&&(pl.length=0)},s.history.disable=()=>{pl!==null&&(pl.length=0,pl=null)},s.history.enable=()=>{pl===null&&(pl=[])},s.error=(...a)=>r("error",i,a),s.warn=(...a)=>r("warn",i,a),s.debug=(...a)=>r("debug",i,a),s}const ji=S8("VIDEOJS"),fae=ji.createLogger,q$e=Object.prototype.toString,hae=function(n){return jd(n)?Object.keys(n):[]};function N1(n,e){hae(n).forEach(t=>e(n[t],t))}function pae(n,e,t=0){return hae(n).reduce((i,r)=>e(i,n[r],r),t)}function jd(n){return!!n&&typeof n=="object"}function I_(n){return jd(n)&&q$e.call(n)==="[object Object]"&&n.constructor===Object}function jr(...n){const e={};return n.forEach(t=>{t&&N1(t,(i,r)=>{if(!I_(i)){e[r]=i;return}I_(e[r])||(e[r]={}),e[r]=jr(e[r],i)})}),e}function mae(n={}){const e=[];for(const t in n)if(n.hasOwnProperty(t)){const i=n[t];e.push(i)}return e}function bD(n,e,t,i=!0){const r=a=>Object.defineProperty(n,e,{value:a,enumerable:!0,writable:!0}),s={configurable:!0,enumerable:!0,get(){const a=t();return r(a),a}};return i&&(s.set=r),Object.defineProperty(n,e,s)}var j$e=Object.freeze({__proto__:null,each:N1,reduce:pae,isObject:jd,isPlain:I_,merge:jr,values:mae,defineLazyProperty:bD});let q7=!1,gae=null,jc=!1,vae,yae=!1,B1=!1,F1=!1,Kd=!1,j7=null,SD=null;const K$e=!!(ht.cast&&ht.cast.framework&&ht.cast.framework.CastReceiverContext);let _ae=null,J3=!1,xD=!1,e4=!1,wD=!1,t4=!1,n4=!1,i4=!1;const vw=!!(_b()&&("ontouchstart"in ht||ht.navigator.maxTouchPoints||ht.DocumentTouch&&ht.document instanceof ht.DocumentTouch)),Hh=ht.navigator&&ht.navigator.userAgentData;Hh&&Hh.platform&&Hh.brands&&(jc=Hh.platform==="Android",B1=!!Hh.brands.find(n=>n.brand==="Microsoft Edge"),F1=!!Hh.brands.find(n=>n.brand==="Chromium"),Kd=!B1&&F1,j7=SD=(Hh.brands.find(n=>n.brand==="Chromium")||{}).version||null,xD=Hh.platform==="Windows");if(!F1){const n=ht.navigator&&ht.navigator.userAgent||"";q7=/iPod/i.test(n),gae=function(){const e=n.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),jc=/Android/i.test(n),vae=function(){const e=n.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;const t=e[1]&&parseFloat(e[1]),i=e[2]&&parseFloat(e[2]);return t&&i?parseFloat(e[1]+"."+e[2]):t||null}(),yae=/Firefox/i.test(n),B1=/Edg/i.test(n),F1=/Chrome/i.test(n)||/CriOS/i.test(n),Kd=!B1&&F1,j7=SD=function(){const e=n.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),_ae=function(){const e=/MSIE\s(\d+)\.\d/.exec(n);let t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(n)&&/rv:11.0/.test(n)&&(t=11),t}(),t4=/Tizen/i.test(n),n4=/Web0S/i.test(n),i4=t4||n4,J3=/Safari/i.test(n)&&!Kd&&!jc&&!B1&&!i4,xD=/Windows/i.test(n),e4=/iPad/i.test(n)||J3&&vw&&!/iPhone/i.test(n),wD=/iPhone/i.test(n)&&!e4}const Co=wD||e4||q7,TD=(J3||Co)&&!Kd;var bae=Object.freeze({__proto__:null,get IS_IPOD(){return q7},get IOS_VERSION(){return gae},get IS_ANDROID(){return jc},get ANDROID_VERSION(){return vae},get IS_FIREFOX(){return yae},get IS_EDGE(){return B1},get IS_CHROMIUM(){return F1},get IS_CHROME(){return Kd},get CHROMIUM_VERSION(){return j7},get CHROME_VERSION(){return SD},IS_CHROMECAST_RECEIVER:K$e,get IE_VERSION(){return _ae},get IS_SAFARI(){return J3},get IS_WINDOWS(){return xD},get IS_IPAD(){return e4},get IS_IPHONE(){return wD},get IS_TIZEN(){return t4},get IS_WEBOS(){return n4},get IS_SMART_TV(){return i4},TOUCH_ENABLED:vw,IS_IOS:Co,IS_ANY_SAFARI:TD});function lW(n){return typeof n=="string"&&!!n.trim()}function X$e(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function _b(){return Tn===ht.document}function bb(n){return jd(n)&&n.nodeType===1}function Sae(){try{return ht.parent!==ht.self}catch{return!0}}function xae(n){return function(e,t){if(!lW(e))return Tn[n](null);lW(t)&&(t=Tn.querySelector(t));const i=bb(t)?t:Tn;return i[n]&&i[n](e)}}function Ei(n="div",e={},t={},i){const r=Tn.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){const a=e[s];s==="textContent"?A0(r,a):(r[s]!==a||s==="tabIndex")&&(r[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){r.setAttribute(s,t[s])}),i&&K7(r,i),r}function A0(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function x8(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function t2(n,e){return X$e(e),n.classList.contains(e)}function Sg(n,...e){return n.classList.add(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n}function CD(n,...e){return n?(n.classList.remove(...e.reduce((t,i)=>t.concat(i.split(/\s+/)),[])),n):(ji.warn("removeClass was called with an element that doesn't exist"),null)}function wae(n,e,t){return typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=void 0),e.split(/\s+/).forEach(i=>n.classList.toggle(i,t)),n}function Tae(n,e){Object.getOwnPropertyNames(e).forEach(function(t){const i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function Sp(n){const e={},t=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(n&&n.attributes&&n.attributes.length>0){const i=n.attributes;for(let r=i.length-1;r>=0;r--){const s=i[r].name;let a=i[r].value;t.includes(s)&&(a=a!==null),e[s]=a}}return e}function Cae(n,e){return n.getAttribute(e)}function D_(n,e,t){n.setAttribute(e,t)}function AD(n,e){n.removeAttribute(e)}function Aae(){Tn.body.focus(),Tn.onselectstart=function(){return!1}}function Eae(){Tn.onselectstart=function(){return!0}}function R_(n){if(n&&n.getBoundingClientRect&&n.parentNode){const e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(i=>{e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(P_(n,"height"))),t.width||(t.width=parseFloat(P_(n,"width"))),t}}function yw(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};const e=n.offsetWidth,t=n.offsetHeight;let i=0,r=0;for(;n.offsetParent&&n!==Tn[Z3.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function ED(n,e){const t={x:0,y:0};if(Co){let c=n;for(;c&&c.nodeName.toLowerCase()!=="html";){const d=P_(c,"transform");if(/^matrix/.test(d)){const f=d.slice(7,-1).split(/,\s/).map(Number);t.x+=f[4],t.y+=f[5]}else if(/^matrix3d/.test(d)){const f=d.slice(9,-1).split(/,\s/).map(Number);t.x+=f[12],t.y+=f[13]}if(c.assignedSlot&&c.assignedSlot.parentElement&&ht.WebKitCSSMatrix){const f=ht.getComputedStyle(c.assignedSlot.parentElement).transform,h=new ht.WebKitCSSMatrix(f);t.x+=h.m41,t.y+=h.m42}c=c.parentNode||c.host}}const i={},r=yw(e.target),s=yw(n),a=s.width,o=s.height;let l=e.offsetY-(s.top-r.top),u=e.offsetX-(s.left-r.left);return e.changedTouches&&(u=e.changedTouches[0].pageX-s.left,l=e.changedTouches[0].pageY+s.top,Co&&(u-=t.x,l-=t.y)),i.y=1-Math.max(0,Math.min(1,l/o)),i.x=Math.max(0,Math.min(1,u/a)),i}function Mae(n){return jd(n)&&n.nodeType===3}function MD(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function Iae(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(e=>{if(typeof e=="function"&&(e=e()),bb(e)||Mae(e))return e;if(typeof e=="string"&&/\S/.test(e))return Tn.createTextNode(e)}).filter(e=>e)}function K7(n,e){return Iae(e).forEach(t=>n.appendChild(t)),n}function Dae(n,e){return K7(MD(n),e)}function _w(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0||n.type==="mousedown"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}const l0=xae("querySelector"),Rae=xae("querySelectorAll");function P_(n,e){if(!n||!e)return"";if(typeof ht.getComputedStyle=="function"){let t;try{t=ht.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}function Pae(n){[...Tn.styleSheets].forEach(e=>{try{const t=[...e.cssRules].map(r=>r.cssText).join(""),i=Tn.createElement("style");i.textContent=t,n.document.head.appendChild(i)}catch{const i=Tn.createElement("link");i.rel="stylesheet",i.type=e.type,i.media=e.media.mediaText,i.href=e.href,n.document.head.appendChild(i)}})}var kae=Object.freeze({__proto__:null,isReal:_b,isEl:bb,isInFrame:Sae,createEl:Ei,textContent:A0,prependTo:x8,hasClass:t2,addClass:Sg,removeClass:CD,toggleClass:wae,setAttributes:Tae,getAttributes:Sp,getAttribute:Cae,setAttribute:D_,removeAttribute:AD,blockTextSelection:Aae,unblockTextSelection:Eae,getBoundingClientRect:R_,findPosition:yw,getPointerPosition:ED,isTextNode:Mae,emptyEl:MD,normalizeContent:Iae,appendContent:K7,insertContent:Dae,isSingleLeftClick:_w,$:l0,$$:Rae,computedStyle:P_,copyStyleSheetsToWindow:Pae});let Lae=!1,w8;const Y$e=function(){if(w8.options.autoSetup===!1)return;const n=Array.prototype.slice.call(Tn.getElementsByTagName("video")),e=Array.prototype.slice.call(Tn.getElementsByTagName("audio")),t=Array.prototype.slice.call(Tn.getElementsByTagName("video-js")),i=n.concat(e,t);if(i&&i.length>0)for(let r=0,s=i.length;r<s;r++){const a=i[r];if(a&&a.getAttribute)a.player===void 0&&a.getAttribute("data-setup")!==null&&w8(a);else{T8(1);break}}else Lae||T8(1)};function T8(n,e){_b()&&(e&&(w8=e),ht.setTimeout(Y$e,n))}function C8(){Lae=!0,ht.removeEventListener("load",C8)}_b()&&(Tn.readyState==="complete"?C8():ht.addEventListener("load",C8));const Oae=function(n){const e=Tn.createElement("style");return e.className=n,e},Nae=function(n,e){n.styleSheet?n.styleSheet.cssText=e:n.textContent=e};var jo=new WeakMap;const Q$e=3;let Z$e=Q$e;function oc(){return Z$e++}function uW(n,e){if(!jo.has(n))return;const t=jo.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&jo.delete(n)}function X7(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function ID(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){const i=n||ht.event;n={};const r=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const s in i)r.includes(s)||s==="returnValue"&&i.preventDefault||(n[s]=i[s]);if(n.target||(n.target=n.srcElement||Tn),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){const s=Tn.documentElement,a=Tn.body;n.pageX=n.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}let cA;const J$e=function(){if(typeof cA!="boolean"){cA=!1;try{const n=Object.defineProperty({},"passive",{get(){cA=!0}});ht.addEventListener("test",null,n),ht.removeEventListener("test",null,n)}catch{}}return cA},eGe=["touchstart","touchmove"];function hu(n,e,t){if(Array.isArray(e))return X7(hu,n,e,t);jo.has(n)||jo.set(n,{});const i=jo.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=oc()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(r,s){if(i.disabled)return;r=ID(r);const a=i.handlers[r.type];if(a){const o=a.slice(0);for(let l=0,u=o.length;l<u&&!r.isImmediatePropagationStopped();l++)try{o[l].call(n,r,s)}catch(c){ji.error(c)}}}),i.handlers[e].length===1)if(n.addEventListener){let r=!1;J$e()&&eGe.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function Ao(n,e,t){if(!jo.has(n))return;const i=jo.get(n);if(!i.handlers)return;if(Array.isArray(e))return X7(Ao,n,e,t);const r=function(a,o){i.handlers[o]=[],uW(a,o)};if(e===void 0){for(const a in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},a)&&r(n,a);return}const s=i.handlers[e];if(s){if(!t){r(n,e);return}if(t.guid)for(let a=0;a<s.length;a++)s[a].guid===t.guid&&s.splice(a--,1);uW(n,e)}}function Sb(n,e,t){const i=jo.has(n)?jo.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=ID(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)Sb.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){jo.has(e.target)||jo.set(e.target,{});const s=jo.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function DD(n,e,t){if(Array.isArray(e))return X7(DD,n,e,t);const i=function(){Ao(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||oc(),hu(n,e,i)}function Y7(n,e,t){const i=function(){Ao(n,e,i),t.apply(this,arguments)};i.guid=t.guid=t.guid||oc(),hu(n,e,i)}var tGe=Object.freeze({__proto__:null,fixEvent:ID,on:hu,off:Ao,trigger:Sb,one:DD,any:Y7});const lc=30,ts=function(n,e,t){e.guid||(e.guid=oc());const i=e.bind(n);return i.guid=t?t+"_"+e.guid:e.guid,i},Xd=function(n,e){let t=ht.performance.now();return function(...r){const s=ht.performance.now();s-t>=e&&(n(...r),t=s)}},Bae=function(n,e,t,i=ht){let r;const s=()=>{i.clearTimeout(r),r=null},a=function(){const o=this,l=arguments;let u=function(){r=null,u=null,t||n.apply(o,l)};!r&&t&&n.apply(o,l),i.clearTimeout(r),r=i.setTimeout(u,e)};return a.cancel=s,a};var nGe=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:lc,bind_:ts,throttle:Xd,debounce:Bae});let OS;class pu{on(e,t){const i=this.addEventListener;this.addEventListener=()=>{},hu(this,e,t),this.addEventListener=i}off(e,t){Ao(this,e,t)}one(e,t){const i=this.addEventListener;this.addEventListener=()=>{},DD(this,e,t),this.addEventListener=i}any(e,t){const i=this.addEventListener;this.addEventListener=()=>{},Y7(this,e,t),this.addEventListener=i}trigger(e){const t=e.type||e;typeof e=="string"&&(e={type:t}),e=ID(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Sb(this,e)}queueTrigger(e){OS||(OS=new Map);const t=e.type||e;let i=OS.get(this);i||(i=new Map,OS.set(this,i));const r=i.get(t);i.delete(t),ht.clearTimeout(r);const s=ht.setTimeout(()=>{i.delete(t),i.size===0&&(i=null,OS.delete(this)),this.trigger(e)},0);i.set(t,s)}}pu.prototype.allowedEvents_={};pu.prototype.addEventListener=pu.prototype.on;pu.prototype.removeEventListener=pu.prototype.off;pu.prototype.dispatchEvent=pu.prototype.trigger;const RD=n=>typeof n.name=="function"?n.name():typeof n.name=="string"?n.name:n.name_?n.name_:n.constructor&&n.constructor.name?n.constructor.name:typeof n,Yf=n=>n instanceof pu||!!n.eventBusEl_&&["on","one","off","trigger"].every(e=>typeof n[e]=="function"),iGe=(n,e)=>{Yf(n)?e():(n.eventedCallbacks||(n.eventedCallbacks=[]),n.eventedCallbacks.push(e))},A8=n=>typeof n=="string"&&/\S/.test(n)||Array.isArray(n)&&!!n.length,r4=(n,e,t)=>{if(!n||!n.nodeName&&!Yf(n))throw new Error(`Invalid target for ${RD(e)}#${t}; must be a DOM node or evented object.`)},Fae=(n,e,t)=>{if(!A8(n))throw new Error(`Invalid event type for ${RD(e)}#${t}; must be a non-empty string or array.`)},Uae=(n,e,t)=>{if(typeof n!="function")throw new Error(`Invalid listener for ${RD(e)}#${t}; must be a function.`)},OP=(n,e,t)=>{const i=e.length<3||e[0]===n||e[0]===n.eventBusEl_;let r,s,a;return i?(r=n.eventBusEl_,e.length>=3&&e.shift(),[s,a]=e):(r=e[0],s=e[1],a=e[2]),r4(r,n,t),Fae(s,n,t),Uae(a,n,t),a=ts(n,a),{isTargetingSelf:i,target:r,type:s,listener:a}},Z0=(n,e,t,i)=>{r4(n,n,e),n.nodeName?tGe[e](n,t,i):n[e](t,i)},rGe={on(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=OP(this,n,"on");if(Z0(t,"on",i,r),!e){const s=()=>this.off(t,i,r);s.guid=r.guid;const a=()=>this.off("dispose",s);a.guid=r.guid,Z0(this,"on","dispose",s),Z0(t,"on","dispose",a)}},one(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=OP(this,n,"one");if(e)Z0(t,"one",i,r);else{const s=(...a)=>{this.off(t,i,s),r.apply(null,a)};s.guid=r.guid,Z0(t,"one",i,s)}},any(...n){const{isTargetingSelf:e,target:t,type:i,listener:r}=OP(this,n,"any");if(e)Z0(t,"any",i,r);else{const s=(...a)=>{this.off(t,i,s),r.apply(null,a)};s.guid=r.guid,Z0(t,"any",i,s)}},off(n,e,t){if(!n||A8(n))Ao(this.eventBusEl_,n,e);else{const i=n,r=e;r4(i,this,"off"),Fae(r,this,"off"),Uae(t,this,"off"),t=ts(this,t),this.off("dispose",t),i.nodeName?(Ao(i,r,t),Ao(i,"dispose",t)):Yf(i)&&(i.off(r,t),i.off("dispose",t))}},trigger(n,e){r4(this.eventBusEl_,this,"trigger");const t=n&&typeof n!="string"?n.type:n;if(!A8(t))throw new Error(`Invalid event type for ${RD(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Sb(this.eventBusEl_,n,e)}};function Q7(n,e={}){const{eventBusKey:t}=e;if(t){if(!n[t].nodeName)throw new Error(`The eventBusKey "${t}" does not refer to an element.`);n.eventBusEl_=n[t]}else n.eventBusEl_=Ei("span",{className:"vjs-event-bus"});return Object.assign(n,rGe),n.eventedCallbacks&&n.eventedCallbacks.forEach(i=>{i()}),n.on("dispose",()=>{n.off(),[n,n.el_,n.eventBusEl_].forEach(function(i){i&&jo.has(i)&&jo.delete(i)}),ht.setTimeout(()=>{n.eventBusEl_=null},0)}),n}const sGe={state:{},setState(n){typeof n=="function"&&(n=n());let e;return N1(n,(t,i)=>{this.state[i]!==t&&(e=e||{},e[i]={from:this.state[i],to:t}),this.state[i]=t}),e&&Yf(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function zae(n,e){return Object.assign(n,sGe),n.state=Object.assign({},n.state,e),typeof n.handleStateChanged=="function"&&Yf(n)&&n.on("statechanged",n.handleStateChanged),n}const n2=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toLowerCase())},Is=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},Hae=function(n,e){return Is(n)===Is(e)};var aGe=Object.freeze({__proto__:null,toLowerCase:n2,toTitleCase:Is,titleCaseEquals:Hae});class Yt{constructor(e,t,i){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=jr({},this.options_),t=this.options_=jr(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){const r=e&&e.id&&e.id()||"no_player";this.id_=`${r}_component_${oc()}`}this.name_=t.name||null,t.el?this.el_=t.el:t.createEl!==!1&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach(r=>this.addClass(r)),["on","off","one","any","trigger"].forEach(r=>{this[r]=void 0}),t.evented!==!1&&(Q7(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),zae(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,t.initChildren!==!1&&this.initChildren(),this.ready(i),t.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(e={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(e){return e?(this.options_=jr(this.options_,e),this.options_):this.options_}el(){return this.el_}createEl(e,t,i){return Ei(e,t,i)}localize(e,t,i=e){const r=this.player_.language&&this.player_.language(),s=this.player_.languages&&this.player_.languages(),a=s&&s[r],o=r&&r.split("-")[0],l=s&&s[o];let u=i;return a&&a[e]?u=a[e]:l&&l[e]&&(u=l[e]),t&&(u=u.replace(/\{(\d+)\}/g,function(c,d){const f=t[d-1];let h=f;return typeof f>"u"&&(h=c),h})),u}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(e){return this.childIndex_[e]}getChild(e){if(e)return this.childNameIndex_[e]}getDescendant(...e){e=e.reduce((i,r)=>i.concat(r),[]);let t=this;for(let i=0;i<e.length;i++)if(t=t.getChild(e[i]),!t||!t.getChild)return;return t}setIcon(e,t=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const i="http://www.w3.org/2000/svg",r=Ei("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),s=Tn.createElementNS(i,"svg");s.setAttributeNS(null,"viewBox","0 0 512 512");const a=Tn.createElementNS(i,"use");return s.appendChild(a),a.setAttributeNS(null,"href",`#vjs-icon-${e}`),r.appendChild(s),this.iconIsSet_?t.replaceChild(r,t.querySelector(".vjs-icon-placeholder")):t.appendChild(r),this.iconIsSet_=!0,r}addChild(e,t={},i=this.children_.length){let r,s;if(typeof e=="string"){s=Is(e);const a=t.componentClass||s;t.name=s;const o=Yt.getComponent(a);if(!o)throw new Error(`Component ${a} does not exist`);if(typeof o!="function")return null;r=new o(this.player_||this,t)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,typeof r.id=="function"&&(this.childIndex_[r.id()]=r),s=s||r.name&&Is(r.name()),s&&(this.childNameIndex_[s]=r,this.childNameIndex_[n2(s)]=r),typeof r.el=="function"&&r.el()){let a=null;this.children_[i+1]&&(this.children_[i+1].el_?a=this.children_[i+1].el_:bb(this.children_[i+1])&&(a=this.children_[i+1])),this.contentEl().insertBefore(r.el(),a)}return r}removeChild(e){if(typeof e=="string"&&(e=this.getChild(e)),!e||!this.children_)return;let t=!1;for(let r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(!t)return;e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[Is(e.name())]=null,this.childNameIndex_[n2(e.name())]=null;const i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}initChildren(){const e=this.options_.children;if(e){const t=this.options_,i=a=>{const o=a.name;let l=a.opts;if(t[o]!==void 0&&(l=t[o]),l===!1)return;l===!0&&(l={}),l.playerOptions=this.options_.playerOptions;const u=this.addChild(o,l);u&&(this[o]=u)};let r;const s=Yt.getComponent("Tech");Array.isArray(e)?r=e:r=Object.keys(e),r.concat(Object.keys(this.options_).filter(function(a){return!r.some(function(o){return typeof o=="string"?a===o:a===o.name})})).map(a=>{let o,l;return typeof a=="string"?(o=a,l=e[o]||this.options_[o]||{}):(o=a.name,l=a),{name:o,opts:l}}).filter(a=>{const o=Yt.getComponent(a.opts.componentClass||Is(a.name));return o&&!s.isTech(o)}).forEach(i)}}buildCSSClass(){return""}ready(e,t=!1){if(e){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(e);return}t?e.call(this):this.setTimeout(e,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)}$(e,t){return l0(e,t||this.contentEl())}$$(e,t){return Rae(e,t||this.contentEl())}hasClass(e){return t2(this.el_,e)}addClass(...e){Sg(this.el_,...e)}removeClass(...e){CD(this.el_,...e)}toggleClass(e,t){wae(this.el_,e,t)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(e){return Cae(this.el_,e)}setAttribute(e,t){D_(this.el_,e,t)}removeAttribute(e){AD(this.el_,e)}width(e,t){return this.dimension("width",e,t)}height(e,t){return this.dimension("height",e,t)}dimensions(e,t){this.width(e,!0),this.height(t)}dimension(e,t,i){if(t!==void 0){(t===null||t!==t)&&(t=0),(""+t).indexOf("%")!==-1||(""+t).indexOf("px")!==-1?this.el_.style[e]=t:t==="auto"?this.el_.style[e]="":this.el_.style[e]=t+"px",i||this.trigger("componentresize");return}if(!this.el_)return 0;const r=this.el_.style[e],s=r.indexOf("px");return parseInt(s!==-1?r.slice(0,s):this.el_["offset"+Is(e)],10)}currentDimension(e){let t=0;if(e!=="width"&&e!=="height")throw new Error("currentDimension only accepts width or height value");if(t=P_(this.el_,e),t=parseFloat(t),t===0||isNaN(t)){const i=`offset${Is(e)}`;t=this.el_[i]}return t}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const e=this.el_.getBoundingClientRect(),t={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left},i={x:e.left+e.width/2,y:e.top+e.height/2,width:0,height:0,top:e.top+e.height/2,right:e.left+e.width/2,bottom:e.top+e.height/2,left:e.left+e.width/2};return{boundingClientRect:t,center:i}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(e){this.player_&&(e.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&e.stopPropagation(),this.player_.handleKeyDown(e))}handleKeyPress(e){this.handleKeyDown(e)}emitTapEvents(){let e=0,t=null;const i=10,r=200;let s;this.on("touchstart",function(o){o.touches.length===1&&(t={pageX:o.touches[0].pageX,pageY:o.touches[0].pageY},e=ht.performance.now(),s=!0)}),this.on("touchmove",function(o){if(o.touches.length>1)s=!1;else if(t){const l=o.touches[0].pageX-t.pageX,u=o.touches[0].pageY-t.pageY;Math.sqrt(l*l+u*u)>i&&(s=!1)}});const a=function(){s=!1};this.on("touchleave",a),this.on("touchcancel",a),this.on("touchend",function(o){t=null,s===!0&&ht.performance.now()-e<r&&(o.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const e=ts(this.player(),this.player().reportUserActivity);let t;this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});const i=function(r){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",i),this.on("touchcancel",i)}setTimeout(e,t){var i;return e=ts(this,e),this.clearTimersOnDispose_(),i=ht.setTimeout(()=>{this.setTimeoutIds_.has(i)&&this.setTimeoutIds_.delete(i),e()},t),this.setTimeoutIds_.add(i),i}clearTimeout(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),ht.clearTimeout(e)),e}setInterval(e,t){e=ts(this,e),this.clearTimersOnDispose_();const i=ht.setInterval(e,t);return this.setIntervalIds_.add(i),i}clearInterval(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),ht.clearInterval(e)),e}requestAnimationFrame(e){this.clearTimersOnDispose_();var t;return e=ts(this,e),t=ht.requestAnimationFrame(()=>{this.rafIds_.has(t)&&this.rafIds_.delete(t),e()}),this.rafIds_.add(t),t}requestNamedAnimationFrame(e,t){this.namedRafs_.has(e)&&this.cancelNamedAnimationFrame(e),this.clearTimersOnDispose_(),t=ts(this,t);const i=this.requestAnimationFrame(()=>{t(),this.namedRafs_.has(e)&&this.namedRafs_.delete(e)});return this.namedRafs_.set(e,i),e}cancelNamedAnimationFrame(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))}cancelAnimationFrame(e){return this.rafIds_.has(e)&&(this.rafIds_.delete(e),ht.cancelAnimationFrame(e)),e}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([e,t])=>{this[e].forEach((i,r)=>this[t](r))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(e){return(e||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(e){function t(s){const a=ht.getComputedStyle(s,null),o=a.getPropertyValue("visibility");return a.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(o)}function i(s){return!(!t(s.parentElement)||!t(s)||s.style.opacity==="0"||ht.getComputedStyle(s).height==="0px"||ht.getComputedStyle(s).width==="0px")}function r(s){if(s.offsetWidth+s.offsetHeight+s.getBoundingClientRect().height+s.getBoundingClientRect().width===0)return!1;const a={x:s.getBoundingClientRect().left+s.offsetWidth/2,y:s.getBoundingClientRect().top+s.offsetHeight/2};if(a.x<0||a.x>(Tn.documentElement.clientWidth||ht.innerWidth)||a.y<0||a.y>(Tn.documentElement.clientHeight||ht.innerHeight))return!1;let o=Tn.elementFromPoint(a.x,a.y);for(;o;){if(o===s)return!0;if(o.parentNode)o=o.parentNode;else return!1}}return e||(e=this.el()),!!(r(e)&&i(e)&&(!e.parentElement||e.tabIndex>=0))}static registerComponent(e,t){if(typeof e!="string"||!e)throw new Error(`Illegal component name, "${e}"; must be a non-empty string.`);const i=Yt.getComponent("Tech"),r=i&&i.isTech(t),s=Yt===t||Yt.prototype.isPrototypeOf(t.prototype);if(r||!s){let o;throw r?o="techs must be registered using Tech.registerTech()":o="must be a Component subclass",new Error(`Illegal component, "${e}"; ${o}.`)}e=Is(e),Yt.components_||(Yt.components_={});const a=Yt.getComponent("Player");if(e==="Player"&&a&&a.players){const o=a.players,l=Object.keys(o);if(o&&l.length>0&&l.map(u=>o[u]).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return Yt.components_[e]=t,Yt.components_[n2(e)]=t,t}static getComponent(e){if(!(!e||!Yt.components_))return Yt.components_[e]}}Yt.registerComponent("Component",Yt);function oGe(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error(`Failed to execute '${n}' on 'TimeRanges': The index provided (${e}) is non-numeric or out of bounds (0-${t}).`)}function cW(n,e,t,i){return oGe(n,i,t.length-1),t[i][e]}function NP(n){let e;return n===void 0||n.length===0?e={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:cW.bind(null,"start",0,n),end:cW.bind(null,"end",1,n)},ht.Symbol&&ht.Symbol.iterator&&(e[ht.Symbol.iterator]=()=>(n||[]).values()),e}function $c(n,e){return Array.isArray(n)?NP(n):n===void 0||e===void 0?NP():NP([[n,e]])}const Vae=function(n,e){n=n<0?0:n;let t=Math.floor(n%60),i=Math.floor(n/60%60),r=Math.floor(n/3600);const s=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(n)||n===1/0)&&(r=i=t="-"),r=r>0||a>0?r+":":"",i=((r||s>=10)&&i<10?"0"+i:i)+":",t=t<10?"0"+t:t,r+i+t};let Z7=Vae;function $ae(n){Z7=n}function Gae(){Z7=Vae}function Vg(n,e=n){return Z7(n,e)}var lGe=Object.freeze({__proto__:null,createTimeRanges:$c,createTimeRange:$c,setFormatTime:$ae,resetFormatTime:Gae,formatTime:Vg});function Wae(n,e){let t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=$c(0,0));for(let s=0;s<n.length;s++)i=n.start(s),r=n.end(s),r>e&&(r=e),t+=r-i;return t/e}function Ts(n){if(n instanceof Ts)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:jd(n)&&(typeof n.code=="number"&&(this.code=n.code),Object.assign(this,n)),this.message||(this.message=Ts.defaultMessages[this.code]||"")}Ts.prototype.code=0;Ts.prototype.message="";Ts.prototype.status=null;Ts.prototype.metadata=null;Ts.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ts.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Ts.MEDIA_ERR_CUSTOM=0;Ts.prototype.MEDIA_ERR_CUSTOM=0;Ts.MEDIA_ERR_ABORTED=1;Ts.prototype.MEDIA_ERR_ABORTED=1;Ts.MEDIA_ERR_NETWORK=2;Ts.prototype.MEDIA_ERR_NETWORK=2;Ts.MEDIA_ERR_DECODE=3;Ts.prototype.MEDIA_ERR_DECODE=3;Ts.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ts.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ts.MEDIA_ERR_ENCRYPTED=5;Ts.prototype.MEDIA_ERR_ENCRYPTED=5;function i2(n){return n!=null&&typeof n.then=="function"}function Ed(n){i2(n)&&n.then(null,e=>{})}const E8=function(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((t,i,r)=>(n[i]&&(t[i]=n[i]),t),{cues:n.cues&&Array.prototype.map.call(n.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},uGe=function(n){const e=n.$$("track"),t=Array.prototype.map.call(e,r=>r.track);return Array.prototype.map.call(e,function(r){const s=E8(r.track);return r.src&&(s.src=r.src),s}).concat(Array.prototype.filter.call(n.textTracks(),function(r){return t.indexOf(r)===-1}).map(E8))},cGe=function(n,e){return n.forEach(function(t){const i=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(r=>i.addCue(r))}),e.textTracks()};var dW={textTracksToJson:uGe,jsonToTextTracks:cGe,trackToJson_:E8};const BP="vjs-modal-dialog";class xb extends Yt{constructor(e,t){super(e,t),this.handleKeyDown_=i=>this.handleKeyDown(i),this.close_=i=>this.close(i),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=Ei("div",{className:`${BP}-content`},{role:"document"}),this.descEl_=Ei("p",{className:`${BP}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),A0(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${BP} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(e){if(typeof e=="boolean"){const t=this.closeable_=!!e;let i=this.getChild("closeButton");if(t&&!i){const r=this.contentEl_;this.contentEl_=this.el_,i=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(i,"close",this.close_)}!t&&i&&(this.off(i,"close",this.close_),this.removeChild(i),i.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(e){const t=this.contentEl(),i=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,i.removeChild(t),this.empty(),Dae(t,e),this.trigger("modalfill"),r?i.insertBefore(t,r):i.appendChild(t);const s=this.getChild("closeButton");s&&i.appendChild(s.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),MD(this.contentEl()),this.trigger("modalempty")}content(e){return typeof e<"u"&&(this.content_=e),this.content_}conditionalFocus_(){const e=Tn.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(e){if(this.trigger({type:"modalKeydown",originalEvent:e,target:this,bubbles:!0}),e.stopPropagation(),e.key==="Escape"&&this.closeable()){e.preventDefault(),this.close();return}if(e.key!=="Tab")return;const t=this.focusableEls_(),i=this.el_.querySelector(":focus");let r;for(let s=0;s<t.length;s++)if(i===t[s]){r=s;break}Tn.activeElement===this.el_&&(r=0),e.shiftKey&&r===0?(t[t.length-1].focus(),e.preventDefault()):!e.shiftKey&&r===t.length-1&&(t[0].focus(),e.preventDefault())}focusableEls_(){const e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,t=>(t instanceof ht.HTMLAnchorElement||t instanceof ht.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof ht.HTMLInputElement||t instanceof ht.HTMLSelectElement||t instanceof ht.HTMLTextAreaElement||t instanceof ht.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof ht.HTMLIFrameElement||t instanceof ht.HTMLObjectElement||t instanceof ht.HTMLEmbedElement||t.hasAttribute("tabindex")&&t.getAttribute("tabindex")!==-1||t.hasAttribute("contenteditable"))}}xb.prototype.options_={pauseOnOpen:!0,temporary:!0};Yt.registerComponent("ModalDialog",xb);class k_ extends pu{constructor(e=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let t=0;t<e.length;t++)this.addTrack(e[t])}addTrack(e){const t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.tracks_[t]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=()=>{this.trigger({track:e,type:"labelchange",target:this})},Yf(e)&&e.addEventListener("labelchange",e.labelchange_)}removeTrack(e){let t;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this[i],t.off&&t.off(),this.tracks_.splice(i,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})}getTrackById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}k_.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const n in k_.prototype.allowedEvents_)k_.prototype["on"+n]=null;const FP=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].enabled=!1)};class dGe extends k_{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].enabled){FP(e,e[t]);break}super(e),this.changing_=!1}addTrack(e){e.enabled&&FP(this,e),super.addTrack(e),e.addEventListener&&(e.enabledChange_=()=>{this.changing_||(this.changing_=!0,FP(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}const UP=function(n,e){for(let t=0;t<n.length;t++)!Object.keys(n[t]).length||e.id===n[t].id||(n[t].selected=!1)};class fGe extends k_{constructor(e=[]){for(let t=e.length-1;t>=0;t--)if(e[t].selected){UP(e,e[t]);break}super(e),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set(){}})}addTrack(e){e.selected&&UP(this,e),super.addTrack(e),e.addEventListener&&(e.selectedChange_=()=>{this.changing_||(this.changing_=!0,UP(this,e),this.changing_=!1,this.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))}removeTrack(e){super.removeTrack(e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}class qae extends k_{addTrack(e){super.addTrack(e),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),e.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(e){super.removeTrack(e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}class hGe{constructor(e=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let t=0,i=e.length;t<i;t++)this.addTrackElement_(e[t])}addTrackElement_(e){const t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get(){return this.trackElements_[t]}}),this.trackElements_.indexOf(e)===-1&&this.trackElements_.push(e)}getTrackElementByTrack_(e){let t;for(let i=0,r=this.trackElements_.length;i<r;i++)if(e===this.trackElements_[i].track){t=this.trackElements_[i];break}return t}removeTrackElement_(e){for(let t=0,i=this.trackElements_.length;t<i;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&typeof this.trackElements_[t].track.off=="function"&&this.trackElements_[t].track.off(),typeof this.trackElements_[t].off=="function"&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}}}class s4{constructor(e){s4.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(e){const t=this.length||0;let i=0;const r=e.length;this.cues_=e,this.length_=e.length;const s=function(a){""+a in this||Object.defineProperty(this,""+a,{get(){return this.cues_[a]}})};if(t<r)for(i=t;i<r;i++)s.call(this,i)}getCueById(e){let t=null;for(let i=0,r=this.length;i<r;i++){const s=this[i];if(s.id===e){t=s;break}}return t}}const pGe={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},mGe={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},gGe={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},fW={disabled:"disabled",hidden:"hidden",showing:"showing"};let J7=class extends pu{constructor(e={}){super();const t={id:e.id||"vjs_track_"+oc(),kind:e.kind||"",language:e.language||""};let i=e.label||"";for(const r in t)Object.defineProperty(this,r,{get(){return t[r]},set(){}});Object.defineProperty(this,"label",{get(){return i},set(r){r!==i&&(i=r,this.trigger("labelchange"))}})}};const e9=function(n){return new URL(n,Tn.baseURI)},jae=function(n){return new URL(n,Tn.baseURI).href},t9=function(n){if(typeof n=="string"){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(n);if(t)return t.pop().toLowerCase()}return""},PD=function(n,e=ht.location){return e9(n).origin!==e.origin};var vGe=Object.freeze({__proto__:null,parseUrl:e9,getAbsoluteURL:jae,getFileExtension:t9,isCrossOrigin:PD});const hW=function(n,e){const t=new ht.WebVTT.Parser(ht,ht.vttjs,ht.WebVTT.StringDecoder()),i=[];t.oncue=function(r){e.addCue(r)},t.onparsingerror=function(r){i.push(r)},t.onflush=function(){e.trigger({type:"loadeddata",target:e})},t.parse(n),i.length>0&&(ht.console&&ht.console.groupCollapsed&&ht.console.groupCollapsed(`Text Track parsing errors for ${e.src}`),i.forEach(r=>ji.error(r)),ht.console&&ht.console.groupEnd&&ht.console.groupEnd()),t.flush()},pW=function(n,e){const t={uri:n},i=PD(n);i&&(t.cors=i);const r=e.tech_.crossOrigin()==="use-credentials";r&&(t.withCredentials=r),mse(t,ts(this,function(s,a,o){if(s)return ji.error(s,a);e.loaded_=!0,typeof ht.WebVTT!="function"?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],l=>{if(l.type==="vttjserror"){ji.error(`vttjs failed to load, stopping trying to process ${e.src}`);return}return hW(o,e)}):hW(o,e)}))};class MT extends J7{constructor(e={}){if(!e.tech)throw new Error("A tech was not provided.");const t=jr(e,{kind:gGe[e.kind]||"subtitles",language:e.language||e.srclang||""});let i=fW[t.mode]||"disabled";const r=t.default;(t.kind==="metadata"||t.kind==="chapters")&&(i="hidden"),super(t),this.tech_=t.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const s=new s4(this.cues_),a=new s4(this.activeCues_);let o=!1;this.timeupdateHandler=ts(this,function(u={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1),u.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const l=()=>{this.stopTracking()};this.tech_.one("dispose",l),i!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return r},set(){}},mode:{get(){return i},set(u){fW[u]&&i!==u&&(i=u,!this.preload_&&i!=="disabled"&&this.cues.length===0&&pW(this.src,this),this.stopTracking(),i!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?s:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return a;const u=this.tech_.currentTime(),c=[];for(let d=0,f=this.cues.length;d<f;d++){const h=this.cues[d];h.startTime<=u&&h.endTime>=u&&c.push(h)}if(o=!1,c.length!==this.activeCues_.length)o=!0;else for(let d=0;d<c.length;d++)this.activeCues_.indexOf(c[d])===-1&&(o=!0);return this.activeCues_=c,a.setCues_(this.activeCues_),a},set(){}}}),t.src?(this.src=t.src,this.preload_||(this.loaded_=!0),(this.preload_||t.kind!=="subtitles"&&t.kind!=="captions")&&pW(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(e){let t=e;if(!("getCueAsHTML"in t)){t=new ht.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(const r in e)r in t||(t[r]=e[r]);t.id=e.id,t.originalCue_=e}const i=this.tech_.textTracks();for(let r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}removeCue(e){let t=this.cues_.length;for(;t--;){const i=this.cues_[t];if(i===e||i.originalCue_&&i.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}}}MT.prototype.allowedEvents_={cuechange:"cuechange"};class Kae extends J7{constructor(e={}){const t=jr(e,{kind:mGe[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"enabled",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("enabledchange"))}}),t.enabled&&(this.enabled=t.enabled),this.loaded_=!0}}class Xae extends J7{constructor(e={}){const t=jr(e,{kind:pGe[e.kind]||""});super(t);let i=!1;Object.defineProperty(this,"selected",{get(){return i},set(r){typeof r!="boolean"||r===i||(i=r,this.trigger("selectedchange"))}}),t.selected&&(this.selected=t.selected)}}class ch extends pu{constructor(e={}){super();let t;const i=new MT(e);this.kind=i.kind,this.src=i.src,this.srclang=i.language,this.label=i.label,this.default=i.default,Object.defineProperties(this,{readyState:{get(){return t}},track:{get(){return i}}}),t=ch.NONE,i.addEventListener("loadeddata",()=>{t=ch.LOADED,this.trigger({type:"load",target:this})})}}ch.prototype.allowedEvents_={load:"load"};ch.NONE=0;ch.LOADING=1;ch.LOADED=2;ch.ERROR=3;const Yu={audio:{ListClass:dGe,TrackClass:Kae,capitalName:"Audio"},video:{ListClass:fGe,TrackClass:Xae,capitalName:"Video"},text:{ListClass:qae,TrackClass:MT,capitalName:"Text"}};Object.keys(Yu).forEach(function(n){Yu[n].getterName=`${n}Tracks`,Yu[n].privateName=`${n}Tracks_`});const L_={remoteText:{ListClass:qae,TrackClass:MT,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:hGe,TrackClass:ch,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Go=Object.assign({},Yu,L_);L_.names=Object.keys(L_);Yu.names=Object.keys(Yu);Go.names=[].concat(L_.names).concat(Yu.names);function yGe(n,e,t,i,r={}){const s=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;const a=new Go.text.TrackClass(r);return s.addTrack(a),a}class Hi extends Yt{constructor(e={},t=function(){}){e.reportTouchActivity=!1,super(null,e,t),this.onDurationChange_=i=>this.onDurationChange(i),this.trackProgress_=i=>this.trackProgress(i),this.trackCurrentTime_=i=>this.trackCurrentTime(i),this.stopTrackingCurrentTime_=i=>this.stopTrackingCurrentTime(i),this.disposeSourceHandler_=i=>this.disposeSourceHandler(i),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Go.names.forEach(i=>{const r=Go[i];e&&e[r.getterName]&&(this[r.privateName]=e[r.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(i=>{e[`native${i}Tracks`]===!1&&(this[`featuresNative${i}Tracks`]=!1)}),e.nativeCaptions===!1||e.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(e.nativeCaptions===!0||e.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=e.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Go.text.ListClass,this.initTrackListeners(),e.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(e){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(e),1)),this.trigger({src:e,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ts(this,function(){const t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,t===1&&this.stopTrackingProgress()}),500)}onDurationChange(e){this.duration_=this.duration()}buffered(){return $c(0,0)}bufferedPercent(){return Wae(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(Yu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(e){e=[].concat(e),e.forEach(t=>{const i=this[`${t}Tracks`]()||[];let r=i.length;for(;r--;){const s=i[r];t==="text"&&this.removeRemoteTextTrack(s),i.removeTrack(s)}})}cleanupAutoTextTracks(){const e=this.autoRemoteTextTracks_||[];let t=e.length;for(;t--;){const i=e[t];this.removeRemoteTextTrack(i)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(e){return e!==void 0&&(this.error_=new Ts(e),this.trigger("error")),this.error_}played(){return this.hasStarted_?$c(0,0):$c()}play(){}setScrubbing(e){}scrubbing(){}setCurrentTime(e){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){Yu.names.forEach(e=>{const t=Yu[e],i=()=>{this.trigger(`${e}trackchange`)},r=this[t.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),this.on("dispose",()=>{r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)})})}addWebVttScript_(){if(!ht.WebVTT)if(Tn.body.contains(this.el())){if(!this.options_["vtt.js"]&&I_(RG)&&Object.keys(RG).length>0){this.trigger("vttjsloaded");return}const e=Tn.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=()=>{this.trigger("vttjsloaded")},e.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{e.onload=null,e.onerror=null}),ht.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const e=this.textTracks(),t=this.remoteTextTracks(),i=o=>e.addTrack(o.track),r=o=>e.removeTrack(o.track);t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();const s=()=>this.trigger("texttrackchange"),a=()=>{s();for(let o=0;o<e.length;o++){const l=e[o];l.removeEventListener("cuechange",s),l.mode==="showing"&&l.addEventListener("cuechange",s)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(let o=0;o<e.length;o++)e[o].removeEventListener("cuechange",s)})}addTextTrack(e,t,i){if(!e)throw new Error("TextTrack kind is required but was not provided");return yGe(this,e,t,i)}createRemoteTextTrack(e){const t=jr(e,{tech:this});return new L_.remoteTextEl.TrackClass(t)}addRemoteTextTrack(e={},t){const i=this.createRemoteTextTrack(e);return typeof t!="boolean"&&(t=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),t===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(i.track)),i}removeRemoteTextTrack(e){const t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(e){const t=oc();return!this.isReady_||this.paused()?(this.queuedHanders_.add(t),this.one("playing",()=>{this.queuedHanders_.has(t)&&(this.queuedHanders_.delete(t),e())})):this.requestNamedAnimationFrame(t,e),t}cancelVideoFrameCallback(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(e){}overrideNativeVideoTracks(e){}canPlayType(e){return""}static canPlayType(e){return""}static canPlaySource(e,t){return Hi.canPlayType(e.type)}static isTech(e){return e.prototype instanceof Hi||e instanceof Hi||e===Hi}static registerTech(e,t){if(Hi.techs_||(Hi.techs_={}),!Hi.isTech(t))throw new Error(`Tech ${e} must be a Tech`);if(!Hi.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Hi.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Is(e),Hi.techs_[e]=t,Hi.techs_[n2(e)]=t,e!=="Tech"&&Hi.defaultTechOrder_.push(e),t}static getTech(e){if(e){if(Hi.techs_&&Hi.techs_[e])return Hi.techs_[e];if(e=Is(e),ht&&ht.videojs&&ht.videojs[e])return ji.warn(`The ${e} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),ht.videojs[e]}}}Go.names.forEach(function(n){const e=Go[n];Hi.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Hi.prototype.featuresVolumeControl=!0;Hi.prototype.featuresMuteControl=!0;Hi.prototype.featuresFullscreenResize=!1;Hi.prototype.featuresPlaybackRate=!1;Hi.prototype.featuresProgressEvents=!1;Hi.prototype.featuresSourceset=!1;Hi.prototype.featuresTimeupdateEvents=!1;Hi.prototype.featuresNativeTextTracks=!1;Hi.prototype.featuresVideoFrameCallback=!1;Hi.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){let r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){const i=n.sourceHandlers||[];let r;for(let s=0;s<i.length;s++)if(r=i[s].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){const r=n.sourceHandlers||[];let s;for(let a=0;a<r.length;a++)if(s=r[a].canHandleSource(t,i),s)return r[a];return null},n.canPlaySource=function(t,i){const r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""},["seekable","seeking","duration"].forEach(function(t){const i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){let i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:ji.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Yt.registerComponent("Tech",Hi);Hi.registerTech("Tech",Hi);Hi.defaultTechOrder_=[];const xg={},a4={},o4={};function _Ge(n,e){xg[n]=xg[n]||[],xg[n].push(e)}function bGe(n,e,t){n.setTimeout(()=>Dm(e,xg[e.type],t,n),1)}function SGe(n,e){n.forEach(t=>t.setTech&&t.setTech(e))}function xGe(n,e,t){return n.reduceRight(n9(t),e[t]())}function wGe(n,e,t,i){return e[t](n.reduce(n9(t),i))}function mW(n,e,t,i=null){const r="call"+Is(t),s=n.reduce(n9(r),i),a=s===o4,o=a?null:e[t](s);return AGe(n,t,o,a),o}const TGe={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},CGe={setCurrentTime:1,setMuted:1,setVolume:1},gW={play:1,pause:1};function n9(n){return(e,t)=>e===o4?o4:t[n]?t[n](e):e}function AGe(n,e,t,i){for(let r=n.length-1;r>=0;r--){const s=n[r];s[e]&&s[e](i,t)}}function EGe(n){a4.hasOwnProperty(n.id())&&delete a4[n.id()]}function MGe(n,e){const t=a4[n.id()];let i=null;if(t==null)return i=e(n),a4[n.id()]=[[e,i]],i;for(let r=0;r<t.length;r++){const[s,a]=t[r];s===e&&(i=a)}return i===null&&(i=e(n),t.push([e,i])),i}function Dm(n={},e=[],t,i,r=[],s=!1){const[a,...o]=e;if(typeof a=="string")Dm(n,xg[a],t,i,r,s);else if(a){const l=MGe(i,a);if(!l.setSource)return r.push(l),Dm(n,o,t,i,r,s);l.setSource(Object.assign({},n),function(u,c){if(u)return Dm(n,o,t,i,r,s);r.push(l),Dm(c,n.type===c.type?o:xg[c.type],t,i,r,s)})}else o.length?Dm(n,o,t,i,r,s):s?t(n,r):Dm(n,xg["*"],t,i,r,!0)}const IGe={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},l4=function(n=""){const e=t9(n);return IGe[e.toLowerCase()]||""},DGe=(n,e)=>{if(!e)return"";if(n.cache_.source.src===e&&n.cache_.source.type)return n.cache_.source.type;const t=n.cache_.sources.filter(r=>r.src===e);if(t.length)return t[0].type;const i=n.$$("source");for(let r=0;r<i.length;r++){const s=i[r];if(s.type&&s.src&&s.src===e)return s.type}return l4(e)},Yae=function(n){if(Array.isArray(n)){let e=[];n.forEach(function(t){t=Yae(t),Array.isArray(t)?e=e.concat(t):jd(t)&&e.push(t)}),n=e}else typeof n=="string"&&n.trim()?n=[vW({src:n})]:jd(n)&&typeof n.src=="string"&&n.src&&n.src.trim()?n=[vW(n)]:n=[];return n};function vW(n){if(!n.type){const e=l4(n.src);e&&(n.type=e)}return n}var RGe=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const yW=t4?10009:n4?461:8,qv={codes:{play:415,pause:19,ff:417,rw:412,back:yW},names:{415:"play",19:"pause",417:"ff",412:"rw",[yW]:"back"},isEventKey(n,e){return e=e.toLowerCase(),!!(this.names[n.keyCode]&&this.names[n.keyCode]===e)},getEventName(n){if(this.names[n.keyCode])return this.names[n.keyCode];if(this.codes[n.code]){const e=this.codes[n.code];return this.names[e]}return null}},_W=5;class PGe extends pu{constructor(e){super(),this.player_=e,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(e){const t=e.originalEvent?e.originalEvent:e;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t.key)){if(this.isPaused_)return;t.preventDefault();const i=t.key.substring(5).toLowerCase();this.move(i)}else if(qv.isEventKey(t,"play")||qv.isEventKey(t,"pause")||qv.isEventKey(t,"ff")||qv.isEventKey(t,"rw")){t.preventDefault();const i=qv.getEventName(t);this.performMediaAction_(i)}else qv.isEventKey(t,"Back")&&e.target&&typeof e.target.closeable=="function"&&e.target.closeable()&&(t.preventDefault(),e.target.close())}performMediaAction_(e){if(this.player_)switch(e){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+_W);break;case"rw":this.userSeek_(this.player_.currentTime()-_W);break}}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(e){const t=e.relatedTarget;let i=null;const r=this.getCurrentComponent(e.target);t&&(i=!!t.closest(".video-js"),t.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!e.currentTarget.contains(e.relatedTarget)&&!i||!t)&&(r&&r.name()==="CloseButton"?this.refocusComponent():(this.pause(),r&&r.el()&&(this.lastFocusedComponent_=r)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const e=this.player_,t=[];function i(r){for(const s of r)s.hasOwnProperty("el_")&&s.getIsFocusable()&&s.getIsAvailableToBeFocused(s.el())&&t.push(s),s.hasOwnProperty("children_")&&s.children_.length>0&&i(s.children_)}return e.children_.forEach(r=>{if(r.hasOwnProperty("el_"))if(r.getIsFocusable&&r.getIsAvailableToBeFocused&&r.getIsFocusable()&&r.getIsAvailableToBeFocused(r.el())){t.push(r);return}else r.hasOwnProperty("children_")&&r.children_.length>0?i(r.children_):r.hasOwnProperty("items")&&r.items.length>0?i(r.items):this.findSuitableDOMChild(r)&&t.push(r);if(r.name_==="ErrorDisplay"&&r.opened_){const s=r.el_.querySelector(".vjs-errors-ok-button-container");s&&s.querySelectorAll("button").forEach((o,l)=>{t.push({name:()=>"ModalButton"+(l+1),el:()=>o,getPositions:()=>{const u=o.getBoundingClientRect(),c={x:u.x,y:u.y,width:u.width,height:u.height,top:u.top,right:u.right,bottom:u.bottom,left:u.left},d={x:u.left+u.width/2,y:u.top+u.height/2,width:0,height:0,top:u.top+u.height/2,right:u.left+u.width/2,bottom:u.top+u.height/2,left:u.left+u.width/2};return{boundingClientRect:c,center:d}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:u=>!0,focus:()=>o.focus()})})}}),this.focusableComponents=t,this.focusableComponents}findSuitableDOMChild(e){function t(i){if(e.getIsFocusable(i)&&e.getIsAvailableToBeFocused(i))return i;for(let r=0;r<i.children.length;r++){const s=i.children[r],a=t(s);if(a)return a}return null}return e.el()?t(e.el()):null}getCurrentComponent(e){this.updateFocusableComponents();const t=e||document.activeElement;if(this.focusableComponents.length){for(const i of this.focusableComponents)if(i.el()===t)return i}}add(e){const t=[...this.focusableComponents];e.hasOwnProperty("el_")&&e.getIsFocusable()&&e.getIsAvailableToBeFocused(e.el())&&t.push(e),this.focusableComponents=t,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(e){for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===e.name()){this.focusableComponents.splice(t,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(e){const t=this.getCurrentComponent();if(!t)return;const i=t.getPositions(),r=this.focusableComponents.filter(a=>a!==t&&this.isInDirection_(i.boundingClientRect,a.getPositions().boundingClientRect,e)),s=this.findBestCandidate_(i.center,r,e);s?this.focus(s):this.trigger({type:"endOfFocusableComponents",direction:e,focusedComponent:t})}findBestCandidate_(e,t,i){let r=1/0,s=null;for(const a of t){const o=a.getPositions().center,l=this.calculateDistance_(e,o,i);l<r&&(r=l,s=a)}return s}isInDirection_(e,t,i){switch(i){case"right":return t.left>=e.right;case"left":return t.right<=e.left;case"down":return t.top>=e.bottom;case"up":return t.bottom<=e.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let e=0;e<this.focusableComponents.length;e++)if(this.focusableComponents[e].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[e]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(e){typeof e=="object"&&(e.getIsAvailableToBeFocused(e.el())?e.focus():this.findSuitableDOMChild(e)&&this.findSuitableDOMChild(e).focus())}calculateDistance_(e,t,i){const r=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y);let a;switch(i){case"right":case"left":a=r+s*100;break;case"up":a=s*2+r*.5;break;case"down":a=s*5+r;break;default:a=r+s}return a}searchForTrackSelect_(){const e=this;for(const t of e.updateFocusableComponents())if(t.constructor.name==="TextTrackSelect"){e.focus(t);break}}}class kGe extends Yt{constructor(e,t,i){const r=jr({createEl:!1},t);if(super(e,r,i),!t.playerOptions.sources||t.playerOptions.sources.length===0)for(let s=0,a=t.playerOptions.techOrder;s<a.length;s++){const o=Is(a[s]);let l=Hi.getTech(o);if(o||(l=Yt.getComponent(o)),l&&l.isSupported()){e.loadTech_(o);break}}else e.src(t.playerOptions.sources)}}Yt.registerComponent("MediaLoader",kGe);class kD extends Yt{constructor(e,t){super(e,t),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=i=>this.handleMouseOver(i),this.handleMouseOut_=i=>this.handleMouseOut(i),this.handleClick_=i=>this.handleClick(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.emitTapEvents(),this.enable()}createEl(e="div",t={},i={}){t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),e==="button"&&ji.error(`Creating a ClickableComponent with an HTML element of ${e} is not supported; use a Button instead.`),i=Object.assign({role:"button"},i),this.tabIndex_=t.tabIndex;const r=Ei(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(Ei("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(e){return this.controlTextEl_=Ei("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}controlText(e,t=this.el()){if(e===void 0)return this.controlText_||"Need Text";const i=this.localize(e);this.controlText_=e,A0(this.controlTextEl_,i),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&t.setAttribute("title",i)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(e){e.key===" "||e.key==="Enter"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Yt.registerComponent("ClickableComponent",kD);class M8 extends kD{constructor(e,t){super(e,t),this.update(),this.update_=i=>this.update(i),e.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return Ei("div",{className:"vjs-poster"})}crossOrigin(e){if(typeof e>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.$("img")&&(this.$("img").crossOrigin=e)}update(e){const t=this.player().poster();this.setSrc(t),t?this.show():this.hide()}setSrc(e){if(!e){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(Ei("picture",{className:"vjs-poster",tabIndex:-1},{},Ei("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=e}handleClick(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Ed(this.player_.play()):this.player_.pause())}}M8.prototype.crossorigin=M8.prototype.crossOrigin;Yt.registerComponent("PosterImage",M8);const Su="#222",bW="#ccc",LGe={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function zP(n,e){let t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function ud(n,e,t){try{n.style[e]=t}catch{return}}function SW(n){return n?`${n}px`:""}class OGe extends Yt{constructor(e,t,i){super(e,t,i);const r=a=>this.updateDisplay(a),s=a=>{this.updateDisplayOverlay(),this.updateDisplay(a)};e.on("loadstart",a=>this.toggleDisplay(a)),e.on("texttrackchange",r),e.on("loadedmetadata",a=>{this.updateDisplayOverlay(),this.preselectTrack(a)}),e.ready(ts(this,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks){this.hide();return}e.on("fullscreenchange",s),e.on("playerresize",s);const a=ht.screen.orientation||ht,o=ht.screen.orientation?"change":"orientationchange";a.addEventListener(o,s),e.on("dispose",()=>a.removeEventListener(o,s));const l=this.options_.playerOptions.tracks||[];for(let u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()}))}preselectTrack(){const e={captions:1,subtitles:1},t=this.player_.textTracks(),i=this.player_.cache_.selectedLanguage;let r,s,a;for(let o=0;o<t.length;o++){const l=t[o];i&&i.enabled&&i.language&&i.language===l.language&&l.kind in e?l.kind===i.kind?a=l:a||(a=l):i&&!i.enabled?(a=null,r=null,s=null):l.default&&(l.kind==="descriptions"&&!r?r=l:l.kind in e&&!s&&(s=l))}a?a.mode="showing":s?s.mode="showing":r&&(r.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof ht.WebVTT=="function"&&ht.WebVTT.processCues(ht,[],this.el_)}updateDisplay(){const e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){const a=[];for(let o=0;o<e.length;++o){const l=e[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}let i=null,r=null,s=e.length;for(;s--;){const a=e[s];a.mode==="showing"&&(a.kind==="descriptions"?i=a:r=a)}if(r?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(r)):i&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(i)),!ht.CSS.supports("inset","10px")){const a=this.el_,o=a.querySelectorAll(".vjs-text-track-cue"),l=this.player_.controlBar.el_.getBoundingClientRect().height,u=this.player_.el_.getBoundingClientRect().height;a.style="",ud(a,"position","relative"),ud(a,"height",u-l+"px"),ud(a,"top","unset"),i4?ud(a,"bottom",u+"px"):ud(a,"bottom","0px"),o.length>0&&o.forEach(c=>{if(c.style.inset){const d=c.style.inset.split(" ");d.length===3&&Object.assign(c.style,{top:d[0],right:d[1],bottom:d[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!ht.CSS.supports("inset-inline: 10px"))return;const e=this.player_.currentWidth(),t=this.player_.currentHeight(),i=e/t,r=this.player_.videoWidth()/this.player_.videoHeight();let s=0,a=0;Math.abs(i-r)>.1&&(i>r?s=Math.round((e-t*r)/2):a=Math.round((t-e/r)/2)),ud(this.el_,"insetInline",SW(s)),ud(this.el_,"insetBlock",SW(a))}updateDisplayState(e){const t=this.player_.textTrackSettings.getValues(),i=e.activeCues;let r=i.length;for(;r--;){const s=i[r];if(!s)continue;const a=s.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&ud(a.firstChild,"color",zP(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&ud(a.firstChild,"backgroundColor",zP(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?ud(a,"backgroundColor",zP(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&(t.edgeStyle==="dropshadow"?a.firstChild.style.textShadow=`2px 2px 3px ${Su}, 2px 2px 4px ${Su}, 2px 2px 5px ${Su}`:t.edgeStyle==="raised"?a.firstChild.style.textShadow=`1px 1px ${Su}, 2px 2px ${Su}, 3px 3px ${Su}`:t.edgeStyle==="depressed"?a.firstChild.style.textShadow=`1px 1px ${bW}, 0 1px ${bW}, -1px -1px ${Su}, 0 -1px ${Su}`:t.edgeStyle==="uniform"&&(a.firstChild.style.textShadow=`0 0 4px ${Su}, 0 0 4px ${Su}, 0 0 4px ${Su}, 0 0 4px ${Su}`)),t.fontPercent&&t.fontPercent!==1){const o=ht.parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&t.fontFamily!=="default"&&(t.fontFamily==="small-caps"?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=LGe[t.fontFamily])}}updateForTrack(e){if(Array.isArray(e)||(e=[e]),typeof ht.WebVTT!="function"||e.every(i=>!i.activeCues))return;const t=[];for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s)t.push(r.activeCues[s])}ht.WebVTT.processCues(ht,t,this.el_);for(let i=0;i<e.length;++i){const r=e[i];for(let s=0;s<r.activeCues.length;++s){const a=r.activeCues[s].displayState;Sg(a,"vjs-text-track-cue","vjs-text-track-cue-"+(r.language?r.language:i)),r.language&&D_(a,"lang",r.language)}this.player_.textTrackSettings&&this.updateDisplayState(r)}}}Yt.registerComponent("TextTrackDisplay",OGe);let NGe=class extends Yt{createEl(){const e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),i=Ei("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[t])}),r=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}};Yt.registerComponent("LoadingSpinner",NGe);class Eo extends kD{createEl(e,t={},i={}){e="button",t=Object.assign({className:this.buildCSSClass()},t),i=Object.assign({type:"button"},i);const r=Ei(e,t,i);return this.player_.options_.experimentalSvgIcons||r.appendChild(Ei("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r}addChild(e,t={}){const i=this.constructor.name;return ji.warn(`Adding an actionable (user controllable) child to a Button (${i}) is not supported; use a ClickableComponent instead.`),Yt.prototype.addChild.call(this,e,t)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(e){if(e.key===" "||e.key==="Enter"){e.stopPropagation();return}super.handleKeyDown(e)}}Yt.registerComponent("Button",Eo);class Qae extends Eo{constructor(e,t){super(e,t),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",i=>this.handleMouseDown(i))}buildCSSClass(){return"vjs-big-play-button"}handleClick(e){const t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e){Ed(t),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(!r){this.player_.tech(!0).focus();return}const s=()=>r.focus();i2(t)?t.then(s,()=>{}):this.setTimeout(s,1)}handleKeyDown(e){this.mouseused_=!1,super.handleKeyDown(e)}handleMouseDown(e){this.mouseused_=!0}}Qae.prototype.controlText_="Play Video";Yt.registerComponent("BigPlayButton",Qae);class BGe extends Eo{constructor(e,t){super(e,t),this.setIcon("cancel"),this.controlText(t&&t.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(e){this.trigger({type:"close",bubbles:!1})}handleKeyDown(e){e.key==="Escape"?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):super.handleKeyDown(e)}}Yt.registerComponent("CloseButton",BGe);class Zae extends Eo{constructor(e,t={}){super(e,t),t.replay=t.replay===void 0||t.replay,this.setIcon("play"),this.on(e,"play",i=>this.handlePlay(i)),this.on(e,"pause",i=>this.handlePause(i)),t.replay&&this.on(e,"ended",i=>this.handleEnded(i))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(e){this.player_.paused()?Ed(this.player_.play()):this.player_.pause()}handleSeeked(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)}handlePlay(e){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",t=>this.handleSeeked(t))}}Zae.prototype.controlText_="Play";Yt.registerComponent("PlayToggle",Zae);class wb extends Yt{constructor(e,t){super(e,t),this.on(e,["timeupdate","ended","seeking"],i=>this.update(i)),this.updateTextNode_()}createEl(){const e=this.buildCSSClass(),t=super.createEl("div",{className:`${e} vjs-time-control vjs-control`}),i=Ei("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)} `},{role:"presentation"});return t.appendChild(i),this.contentEl_=Ei("span",{className:`${e}-display`},{role:"presentation"}),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(e){!this.player_.options_.enableSmoothSeeking&&e.type==="seeking"||this.updateContent(e)}updateTextNode_(e=0){e=Vg(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let t=this.textNode_;t&&this.contentEl_.firstChild!==t&&(t=null,ji.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=Tn.createTextNode(this.formattedTime_),this.textNode_&&(t?this.contentEl_.replaceChild(this.textNode_,t):this.contentEl_.appendChild(this.textNode_))}))}updateContent(e){}}wb.prototype.labelText_="Time";wb.prototype.controlText_="Time";Yt.registerComponent("TimeDisplay",wb);class i9 extends wb{buildCSSClass(){return"vjs-current-time"}updateContent(e){let t;this.player_.ended()?t=this.player_.duration():t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)}}i9.prototype.labelText_="Current Time";i9.prototype.controlText_="Current Time";Yt.registerComponent("CurrentTimeDisplay",i9);class r9 extends wb{constructor(e,t){super(e,t);const i=r=>this.updateContent(r);this.on(e,"durationchange",i),this.on(e,"loadstart",i),this.on(e,"loadedmetadata",i)}buildCSSClass(){return"vjs-duration"}updateContent(e){const t=this.player_.duration();this.updateTextNode_(t)}}r9.prototype.labelText_="Duration";r9.prototype.controlText_="Duration";Yt.registerComponent("DurationDisplay",r9);class FGe extends Yt{createEl(){const e=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),t=super.createEl("div"),i=super.createEl("span",{textContent:"/"});return t.appendChild(i),e.appendChild(t),e}}Yt.registerComponent("TimeDivider",FGe);class s9 extends wb{constructor(e,t){super(e,t),this.on(e,"durationchange",i=>this.updateContent(i))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const e=super.createEl();return this.options_.displayNegative!==!1&&e.insertBefore(Ei("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}updateContent(e){if(typeof this.player_.duration()!="number")return;let t;this.player_.ended()?t=0:this.player_.remainingTimeDisplay?t=this.player_.remainingTimeDisplay():t=this.player_.remainingTime(),this.updateTextNode_(t)}}s9.prototype.labelText_="Remaining Time";s9.prototype.controlText_="Remaining Time";Yt.registerComponent("RemainingTimeDisplay",s9);class UGe extends Yt{constructor(e,t){super(e,t),this.updateShowing(),this.on(this.player(),"durationchange",i=>this.updateShowing(i))}createEl(){const e=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ei("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ei("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")} `})),this.contentEl_.appendChild(Tn.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}dispose(){this.contentEl_=null,super.dispose()}updateShowing(e){this.player().duration()===1/0?this.show():this.hide()}}Yt.registerComponent("LiveDisplay",UGe);class Jae extends Eo{constructor(e,t){super(e,t),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=i=>this.updateLiveEdgeStatus(i),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const e=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=Ei("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}Jae.prototype.controlText_="Seek to live, currently playing live";Yt.registerComponent("SeekToLive",Jae);function IT(n,e,t){return n=Number(n),Math.min(t,Math.max(e,isNaN(n)?e:n))}var zGe=Object.freeze({__proto__:null,clamp:IT});class a9 extends Yt{constructor(e,t){super(e,t),this.handleMouseDown_=i=>this.handleMouseDown(i),this.handleMouseUp_=i=>this.handleMouseUp(i),this.handleKeyDown_=i=>this.handleKeyDown(i),this.handleClick_=i=>this.handleClick(i),this.handleMouseMove_=i=>this.handleMouseMove(i),this.update_=i=>this.update(i),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(e,t={},i={}){return t.className=t.className+" vjs-slider",t=Object.assign({tabIndex:0},t),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),super.createEl(e,t,i)}handleMouseDown(e){const t=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Kd&&e.preventDefault(),Aae(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)}handleMouseMove(e){}handleMouseUp(e){const t=this.bar.el_.ownerDocument;Eae(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",()=>{const t=this.vertical()?"height":"width";this.bar.el().style[t]=(e*100).toFixed(2)+"%"})),e}getProgress(){return Number(IT(this.getPercent(),0,1).toFixed(4))}calculateDistance(e){const t=ED(this.el_,e);return this.vertical()?t.y:t.x}handleKeyDown(e){const t=this.options_.playerOptions.spatialNavigation,i=t&&t.enabled,r=t&&t.horizontalSeek;i?r&&e.key==="ArrowLeft"||!r&&e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):r&&e.key==="ArrowRight"||!r&&e.key==="ArrowUp"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e):e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepBack()):e.key==="ArrowUp"||e.key==="ArrowRight"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):super.handleKeyDown(e)}handleClick(e){e.stopPropagation(),e.preventDefault()}vertical(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Yt.registerComponent("Slider",a9);const HP=(n,e)=>IT(n/e*100,0,100).toFixed(2)+"%";class HGe extends Yt{constructor(e,t){super(e,t),this.partEls_=[],this.on(e,"progress",i=>this.update(i))}createEl(){const e=super.createEl("div",{className:"vjs-load-progress"}),t=Ei("span",{className:"vjs-control-text"}),i=Ei("span",{textContent:this.localize("Loaded")}),r=Tn.createTextNode(": ");return this.percentageEl_=Ei("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(t),t.appendChild(i),t.appendChild(r),t.appendChild(this.percentageEl_),e}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(e){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const t=this.player_.liveTracker,i=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),s=this.player_.bufferedEnd(),a=this.partEls_,o=HP(s,r);this.percent_!==o&&(this.el_.style.width=o,A0(this.percentageEl_,o),this.percent_=o);for(let l=0;l<i.length;l++){const u=i.start(l),c=i.end(l);let d=a[l];d||(d=this.el_.appendChild(Ei()),a[l]=d),!(d.dataset.start===u&&d.dataset.end===c)&&(d.dataset.start=u,d.dataset.end=c,d.style.left=HP(u,s),d.style.width=HP(c-u,s))}for(let l=a.length;l>i.length;l--)this.el_.removeChild(a[l-1]);a.length=i.length})}}Yt.registerComponent("LoadProgressBar",HGe);class VGe extends Yt{constructor(e,t){super(e,t),this.update=Xd(ts(this,this.update),lc)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(e,t,i){const r=yw(this.el_),s=R_(this.player_.el()),a=e.width*t;if(!s||!r)return;let o=e.left-s.left+a,l=e.width-a+(s.right-e.right);l||(l=e.width-a,o=a);let u=r.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),u=Math.round(u),this.el_.style.right=`-${u}px`,this.write(i)}write(e){A0(this.el_,e)}updateTime(e,t,i,r){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let s;const a=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const o=this.player_.liveTracker.liveWindow(),l=o-t*o;s=(l<1?"":"-")+Vg(l,o)}else s=Vg(i,a);this.update(e,t,s),r&&r()})}}Yt.registerComponent("TimeTooltip",VGe);class o9 extends Yt{constructor(e,t){super(e,t),this.setIcon("circle"),this.update=Xd(ts(this,this.update),lc)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(e,t){const i=this.getChild("timeTooltip");if(!i)return;const r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();i.updateTime(e,t,r)}}o9.prototype.options_={children:[]};!Co&&!jc&&o9.prototype.options_.children.push("timeTooltip");Yt.registerComponent("PlayProgressBar",o9);class eoe extends Yt{constructor(e,t){super(e,t),this.update=Xd(ts(this,this.update),lc)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t){const i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,()=>{this.el_.style.left=`${e.width*t}px`})}}eoe.prototype.options_={children:["timeTooltip"]};Yt.registerComponent("MouseTimeDisplay",eoe);const dA=5,xW=12;class LD extends a9{constructor(e,t){t=jr(LD.prototype.options_,t),t.children=[...t.children];const i=e.options_.disableSeekWhileScrubbingOnMobile&&(Co||jc);(!Co&&!jc||i)&&t.children.splice(1,0,"mouseTimeDisplay"),super(e,t),this.shouldDisableSeekWhileScrubbingOnMobile_=i,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=ts(this,this.update),this.update=Xd(this.update_,lc),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=e=>this.enableInterval_(e),this.disableIntervalHandler_=e=>this.disableInterval_(e),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Tn&&"visibilityState"in Tn&&this.on(Tn,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(e){Tn.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,lc))}disableInterval_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(e){if(Tn.visibilityState==="hidden")return;const t=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const i=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),r=this.player_.liveTracker;let s=this.player_.duration();r&&r.isLive()&&(s=this.player_.liveTracker.liveCurrentTime()),this.percent_!==t&&(this.el_.setAttribute("aria-valuenow",(t*100).toFixed(2)),this.percent_=t),(this.currentTime_!==i||this.duration_!==s)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Vg(i,s),Vg(s,s)],"{1} of {2}")),this.currentTime_=i,this.duration_=s),this.bar&&this.bar.update(R_(this.el()),this.getProgress())}),t}userSeek_(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}getPercent(){if(this.pendingSeekTime_)return this.pendingSeekTime_/this.player_.duration();const e=this.getCurrentTime_();let t;const i=this.player_.liveTracker;return i&&i.isLive()?(t=(e-i.seekableStart())/i.liveWindow(),i.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t}handleMouseDown(e){_w(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbingOnMobile_||this.player_.pause(),super.handleMouseDown(e))}handleMouseMove(e,t=!1){if(!_w(e)||isNaN(this.player_.duration()))return;!t&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let i;const r=this.calculateDistance(e),s=this.player_.liveTracker;if(!s||!s.isLive())i=r*this.player_.duration(),i===this.player_.duration()&&(i=i-.1);else{if(r>=.99){s.seekToLiveEdge();return}const a=s.seekableStart(),o=s.liveCurrentTime();if(i=a+r*s.liveWindow(),i>=o&&(i=o),i<=a&&(i=a+.1),i===1/0)return}this.shouldDisableSeekWhileScrubbingOnMobile_?this.pendingSeekTime_=i:this.userSeek_(i),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const e=this.getChild("mouseTimeDisplay");e&&e.show()}disable(){super.disable();const e=this.getChild("mouseTimeDisplay");e&&e.hide()}handleMouseUp(e){super.handleMouseUp(e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime_&&(this.userSeek_(this.pendingSeekTime_),this.pendingSeekTime_=null),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Ed(this.player_.play()):this.update_()}stepForward(){this.userSeek_(this.player_.currentTime()+dA)}stepBack(){this.userSeek_(this.player_.currentTime()-dA)}handleAction(e){this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(e){const t=this.player_.liveTracker;if(e.key===" "||e.key==="Enter")e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(e.key==="Home")e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(e.key==="End")e.preventDefault(),e.stopPropagation(),t&&t.isLive()?this.userSeek_(t.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(e.key)){e.preventDefault(),e.stopPropagation();const i=parseInt(e.key,10)*.1;t&&t.isLive()?this.userSeek_(t.seekableStart()+t.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else e.key==="PageDown"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-dA*xW)):e.key==="PageUp"?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+dA*xW)):super.handleKeyDown(e)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Tn&&"visibilityState"in Tn&&this.off(Tn,"visibilitychange",this.toggleVisibility_),super.dispose()}}LD.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};Yt.registerComponent("SeekBar",LD);class toe extends Yt{constructor(e,t){super(e,t),this.handleMouseMove=Xd(ts(this,this.handleMouseMove),lc),this.throttledHandleMouseSeek=Xd(ts(this,this.handleMouseSeek),lc),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.handleMouseDownHandler_=i=>this.handleMouseDown(i),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(e){const t=this.getChild("seekBar");if(!t)return;const i=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(!i&&!r)return;const s=t.el(),a=yw(s);let o=ED(s,e).x;o=IT(o,0,1),r&&r.update(a,o),i&&i.update(a,t.getProgress())}handleMouseSeek(e){const t=this.getChild("seekBar");t&&t.handleMouseMove(e)}enabled(){return this.enabled_}disable(){if(this.children().forEach(e=>e.disable&&e.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Ed(this.player_.play())}}enable(){this.children().forEach(e=>e.enable&&e.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)}handleMouseDown(e){const t=this.el_.ownerDocument,i=this.getChild("seekBar");i&&i.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()}}toe.prototype.options_={children:["seekBar"]};Yt.registerComponent("ProgressControl",toe);class noe extends Eo{constructor(e,t){super(e,t),this.setIcon("picture-in-picture-enter"),this.on(e,["enterpictureinpicture","leavepictureinpicture"],i=>this.handlePictureInPictureChange(i)),this.on(e,["disablepictureinpicturechanged","loadedmetadata"],i=>this.handlePictureInPictureEnabledChange(i)),this.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){Tn.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in ht?this.enable():this.disable()}handlePictureInPictureChange(e){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof Tn.exitPictureInPicture=="function"&&super.show()}}noe.prototype.controlText_="Picture-in-Picture";Yt.registerComponent("PictureInPictureToggle",noe);class ioe extends Eo{constructor(e,t){super(e,t),this.setIcon("fullscreen-enter"),this.on(e,"fullscreenchange",i=>this.handleFullscreenChange(i)),Tn[e.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(e){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}ioe.prototype.controlText_="Fullscreen";Yt.registerComponent("FullscreenToggle",ioe);const $Ge=function(n,e){e.tech_&&!e.tech_.featuresVolumeControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresVolumeControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class GGe extends Yt{createEl(){const e=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(super.createEl("span",{className:"vjs-control-text"})),e}}Yt.registerComponent("VolumeLevel",GGe);class WGe extends Yt{constructor(e,t){super(e,t),this.update=Xd(ts(this,this.update),lc)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(e,t,i,r){if(!i){const s=R_(this.el_),a=R_(this.player_.el()),o=e.width*t;if(!a||!s)return;const l=e.left-a.left+o,u=e.width-o+(a.right-e.right);let c=s.width/2;l<c?c+=c-l:u<c&&(c=u),c<0?c=0:c>s.width&&(c=s.width),this.el_.style.right=`-${c}px`}this.write(`${r}%`)}write(e){A0(this.el_,e)}updateVolume(e,t,i,r,s){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(e,t,i,r.toFixed(0)),s&&s()})}}Yt.registerComponent("VolumeLevelTooltip",WGe);class roe extends Yt{constructor(e,t){super(e,t),this.update=Xd(ts(this,this.update),lc)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(e,t,i){const r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,i,r,()=>{i?this.el_.style.bottom=`${e.height*t}px`:this.el_.style.left=`${e.width*t}px`})}}roe.prototype.options_={children:["volumeLevelTooltip"]};Yt.registerComponent("MouseVolumeLevelDisplay",roe);class OD extends a9{constructor(e,t){super(e,t),this.on("slideractive",i=>this.updateLastVolume_(i)),this.on(e,"volumechange",i=>this.updateARIAAttributes(i)),e.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(e){_w(e)&&super.handleMouseDown(e)}handleMouseMove(e){const t=this.getChild("mouseVolumeLevelDisplay");if(t){const i=this.el(),r=R_(i),s=this.vertical();let a=ED(i,e);a=s?a.y:a.x,a=IT(a,0,1),t.update(r,a,s)}_w(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(e){const t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const e=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(e)})}}OD.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Co&&!jc&&OD.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");OD.prototype.playerEvent="volumechange";Yt.registerComponent("VolumeBar",OD);class soe extends Yt{constructor(e,t={}){t.vertical=t.vertical||!1,(typeof t.volumeBar>"u"||I_(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),super(e,t),$Ge(this,e),this.throttledHandleMouseMove=Xd(ts(this,this.handleMouseMove),lc),this.handleMouseUpHandler_=i=>this.handleMouseUp(i),this.on("mousedown",i=>this.handleMouseDown(i)),this.on("touchstart",i=>this.handleMouseDown(i)),this.on("mousemove",i=>this.handleMouseMove(i)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${e}`})}handleMouseDown(e){const t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}handleMouseUp(e){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseMove(e){this.volumeBar.handleMouseMove(e)}}soe.prototype.options_={children:["volumeBar"]};Yt.registerComponent("VolumeControl",soe);const qGe=function(n,e){e.tech_&&!e.tech_.featuresMuteControl&&n.addClass("vjs-hidden"),n.on(e,"loadstart",function(){e.tech_.featuresMuteControl?n.removeClass("vjs-hidden"):n.addClass("vjs-hidden")})};class aoe extends Eo{constructor(e,t){super(e,t),qGe(this,e),this.on(e,["loadstart","volumechange"],i=>this.update(i))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.volume(),i=this.player_.lastVolume_();if(t===0){const r=i<.1?.1:i;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(e){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const e=this.player_.volume();let t=3;this.setIcon("volume-high"),Co&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),CD(this.el_,[0,1,2,3].reduce((i,r)=>i+`${r?" ":""}vjs-vol-${r}`,"")),Sg(this.el_,`vjs-vol-${t}`)}updateControlText_(){const t=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)}}aoe.prototype.controlText_="Mute";Yt.registerComponent("MuteToggle",aoe);class ooe extends Yt{constructor(e,t={}){typeof t.inline<"u"?t.inline=t.inline:t.inline=!0,(typeof t.volumeControl>"u"||I_(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),super(e,t),this.handleKeyPressHandler_=i=>this.handleKeyPress(i),this.on(e,["loadstart"],i=>this.volumePanelState_(i)),this.on(this.muteToggle,"keyup",i=>this.handleKeyPress(i)),this.on(this.volumeControl,"keyup",i=>this.handleVolumeControlKeyUp(i)),this.on("keydown",i=>this.handleKeyPress(i)),this.on("mouseover",i=>this.handleMouseOver(i)),this.on("mouseout",i=>this.handleMouseOut(i)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${e}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(e){e.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(e){this.addClass("vjs-hover"),hu(Tn,"keyup",this.handleKeyPressHandler_)}handleMouseOut(e){this.removeClass("vjs-hover"),Ao(Tn,"keyup",this.handleKeyPressHandler_)}handleKeyPress(e){e.key==="Escape"&&this.handleMouseOut()}}ooe.prototype.options_={children:["muteToggle","volumeControl"]};Yt.registerComponent("VolumePanel",ooe);class loe extends Eo{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipForwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(e){if(isNaN(this.player_.duration()))return;const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()?i.seekableEnd():this.player_.duration();let s;t+this.skipTime<=r?s=t+this.skipTime:s=r,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}loe.prototype.controlText_="Skip Forward";Yt.registerComponent("SkipForward",loe);class uoe extends Eo{constructor(e,t){super(e,t),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(e.language())])),this.show()):this.hide()}getSkipBackwardTime(){const e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(e){const t=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()&&i.seekableStart();let s;r&&t-this.skipTime<=r?s=r:t>=this.skipTime?s=t-this.skipTime:s=0,this.player_.currentTime(s)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}uoe.prototype.controlText_="Skip Backward";Yt.registerComponent("SkipBackward",uoe);class coe extends Yt{constructor(e,t){super(e,t),t&&(this.menuButton_=t.menuButton),this.focusedChild_=-1,this.on("keydown",i=>this.handleKeyDown(i)),this.boundHandleBlur_=i=>this.handleBlur(i),this.boundHandleTapClick_=i=>this.handleTapClick(i)}addEventListenerForItem(e){e instanceof Yt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(e){e instanceof Yt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))}removeChild(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),super.removeChild(e)}addItem(e){const t=this.addChild(e);t&&this.addEventListenerForItem(t)}createEl(){const e=this.options_.contentElType||"ul";this.contentEl_=Ei(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const t=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),hu(t,"click",function(i){i.preventDefault(),i.stopImmediatePropagation()}),t}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(e){const t=e.relatedTarget||Tn.activeElement;if(!this.children().some(i=>i.el()===t)){const i=this.menuButton_;i&&i.buttonPressed_&&t!==i.el().firstChild&&i.unpressButton()}}handleTapClick(e){if(this.menuButton_){this.menuButton_.unpressButton();const t=this.children();if(!Array.isArray(t))return;const i=t.filter(r=>r.el()===e.target)[0];if(!i)return;i.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(e){e.key==="ArrowLeft"||e.key==="ArrowDown"?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(e.key==="ArrowRight"||e.key==="ArrowUp")&&(e.preventDefault(),e.stopPropagation(),this.stepBack())}stepForward(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)}stepBack(){let e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)}focus(e=0){const t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}Yt.registerComponent("Menu",coe);class l9 extends Yt{constructor(e,t={}){super(e,t),this.menuButton_=new Eo(e,t),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const i=Eo.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+i,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const r=s=>this.handleClick(s);this.handleMenuKeyUp_=s=>this.handleMenuKeyUp(s),this.on(this.menuButton_,"tap",r),this.on(this.menuButton_,"click",r),this.on(this.menuButton_,"keydown",s=>this.handleKeyDown(s)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),hu(Tn,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",s=>this.handleMouseLeave(s)),this.on("keydown",s=>this.handleSubmenuKeyDown(s))}update(){const e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const e=new coe(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const t=Ei("li",{className:"vjs-menu-title",textContent:Is(this.options_.title),tabIndex:-1}),i=new Yt(this.player_,{el:t});e.addItem(i)}if(this.items=this.createItems(),this.items)for(let t=0;t<this.items.length;t++)e.addItem(this.items[t]);return e}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(e){super.setIcon(e,this.menuButton_.el_)}buildWrapperCSSClass(){let e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";const t=Eo.prototype.buildCSSClass();return`vjs-menu-button ${e} ${t} ${super.buildCSSClass()}`}buildCSSClass(){let e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup",`vjs-menu-button ${e} ${super.buildCSSClass()}`}controlText(e,t=this.menuButton_.el()){return this.menuButton_.controlText(e,t)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(e){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(e){this.removeClass("vjs-hover"),Ao(Tn,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(e){e.key==="Escape"||e.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus())):(e.key==="Up"||e.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))}handleMenuKeyUp(e){(e.key==="Escape"||e.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(e){this.handleSubmenuKeyDown(e)}handleSubmenuKeyDown(e){(e.key==="Escape"||e.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!e.key==="Tab"&&(e.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Co&&Sae())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Yt.registerComponent("MenuButton",l9);class u9 extends l9{constructor(e,t){const i=t.tracks;if(super(e,t),this.items.length<=1&&this.hide(),!i)return;const r=ts(this,this.update);i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),i.addEventListener("labelchange",r),this.player_.on("ready",r),this.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r),i.removeEventListener("labelchange",r)})}}Yt.registerComponent("TrackButton",u9);class DT extends kD{constructor(e,t){super(e,t),this.selectable=t.selectable,this.isSelected_=t.selected||!1,this.multiSelectable=t.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(e,t,i){this.nonIconControl=!0;const r=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},t),i),s=Ei("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(s):r.replaceChild(s,r.querySelector(".vjs-icon-placeholder")),r}handleKeyDown(e){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(e.key)||super.handleKeyDown(e)}handleClick(e){this.selected(!0)}selected(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Yt.registerComponent("MenuItem",DT);class RT extends DT{constructor(e,t){const i=t.track,r=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected=i.mode==="showing",super(e,t),this.track=i,this.kinds=(t.kinds||[t.kind||this.track.kind]).filter(Boolean);const s=(...o)=>{this.handleTracksChange.apply(this,o)},a=(...o)=>{this.handleSelectedLanguageChange.apply(this,o)};if(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",a),this.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",a)}),r.onchange===void 0){let o;this.on(["tap","click"],function(){if(typeof ht.Event!="object")try{o=new ht.Event("change")}catch{}o||(o=Tn.createEvent("Event"),o.initEvent("change",!0,!0)),r.dispatchEvent(o)})}this.handleTracksChange()}handleClick(e){const t=this.track,i=this.player_.textTracks();if(super.handleClick(e),!!i)for(let r=0;r<i.length;r++){const s=i[r];this.kinds.indexOf(s.kind)!==-1&&(s===t?s.mode!=="showing"&&(s.mode="showing"):s.mode!=="disabled"&&(s.mode="disabled"))}}handleTracksChange(e){const t=this.track.mode==="showing";t!==this.isSelected_&&this.selected(t)}handleSelectedLanguageChange(e){if(this.track.mode==="showing"){const t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Yt.registerComponent("TextTrackMenuItem",RT);class doe extends RT{constructor(e,t){t.track={player:e,kind:t.kind,kinds:t.kinds,default:!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,super(e,t)}handleTracksChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i!==this.isSelected_&&this.selected(i)}handleSelectedLanguageChange(e){const t=this.player().textTracks();let i=!0;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&a.mode==="showing"){i=!1;break}}i&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Yt.registerComponent("OffTextTrackMenuItem",doe);class Tb extends u9{constructor(e,t={}){t.tracks=e.textTracks(),super(e,t)}createItems(e=[],t=RT){let i;this.label_&&(i=`${this.label_} off`),e.push(new doe(this.player_,{kinds:this.kinds_,kind:this.kind_,label:i})),this.hideThreshold_+=1;const r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let s=0;s<r.length;s++){const a=r[s];if(this.kinds_.indexOf(a.kind)>-1){const o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass(`vjs-${a.kind}-menu-item`),e.push(o)}}return e}}Yt.registerComponent("TextTrackButton",Tb);class foe extends DT{constructor(e,t){const i=t.track,r=t.cue,s=e.currentTime();t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=s&&s<r.endTime,super(e,t),this.track=i,this.cue=r}handleClick(e){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Yt.registerComponent("ChaptersTrackMenuItem",foe);class c9 extends Tb{constructor(e,t,i){super(e,t,i),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(r=>{r.selected(this.track_.activeCues[0]===r.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(e){if(e&&e.track&&e.track.kind!=="chapters")return;const t=this.findChaptersTrack();t!==this.track_?(this.setTrack(t),super.update()):(!this.items||t&&t.cues&&t.cues.length!==this.items.length)&&super.update()}setTrack(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";const t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const e=this.player_.textTracks()||[];for(let t=e.length-1;t>=0;t--){const i=e[t];if(i.kind===this.kind_)return i}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(Is(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const e=[];if(!this.track_)return e;const t=this.track_.cues;if(!t)return e;for(let i=0,r=t.length;i<r;i++){const s=t[i],a=new foe(this.player_,{track:this.track_,cue:s});e.push(a)}return e}}c9.prototype.kind_="chapters";c9.prototype.controlText_="Chapters";Yt.registerComponent("ChaptersButton",c9);class d9 extends Tb{constructor(e,t,i){super(e,t,i),this.setIcon("audio-description");const r=e.textTracks(),s=ts(this,this.handleTracksChange);r.addEventListener("change",s),this.on("dispose",function(){r.removeEventListener("change",s)})}handleTracksChange(e){const t=this.player().textTracks();let i=!1;for(let r=0,s=t.length;r<s;r++){const a=t[r];if(a.kind!==this.kind_&&a.mode==="showing"){i=!0;break}}i?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}d9.prototype.kind_="descriptions";d9.prototype.controlText_="Descriptions";Yt.registerComponent("DescriptionsButton",d9);class f9 extends Tb{constructor(e,t,i){super(e,t,i),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}f9.prototype.kind_="subtitles";f9.prototype.controlText_="Subtitles";Yt.registerComponent("SubtitlesButton",f9);class h9 extends RT{constructor(e,t){t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,default:!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",super(e,t),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+t.kind+" settings dialog")}handleClick(e){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Yt.registerComponent("CaptionSettingsMenuItem",h9);class p9 extends Tb{constructor(e,t,i){super(e,t,i),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new h9(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(e)}}p9.prototype.kind_="captions";p9.prototype.controlText_="Captions";Yt.registerComponent("CaptionsButton",p9);class hoe extends RT{createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):s.appendChild(Ei("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ei("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),r}}Yt.registerComponent("SubsCapsMenuItem",hoe);class m9 extends Tb{constructor(e,t={}){super(e,t),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(Is(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new h9(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=super.createItems(e,hoe),e}}m9.prototype.kinds_=["captions","subtitles"];m9.prototype.controlText_="Subtitles";Yt.registerComponent("SubsCapsButton",m9);class poe extends DT{constructor(e,t){const i=t.track,r=e.audioTracks();t.label=i.label||i.language||"Unknown",t.selected=i.enabled,super(e,t),this.track=i,this.addClass(`vjs-${i.kind}-menu-item`);const s=(...a)=>{this.handleTracksChange.apply(this,a)};r.addEventListener("change",s),this.on("dispose",()=>{r.removeEventListener("change",s)})}createEl(e,t,i){const r=super.createEl(e,t,i),s=r.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(s.appendChild(Ei("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),s.appendChild(Ei("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}handleClick(e){if(super.handleClick(e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];r!==this.track&&(r.enabled=r===this.track)}}}handleTracksChange(e){this.selected(this.track.enabled)}}Yt.registerComponent("AudioTrackMenuItem",poe);class moe extends u9{constructor(e,t={}){t.tracks=e.audioTracks(),super(e,t),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(e=[]){this.hideThreshold_=1;const t=this.player_.audioTracks();for(let i=0;i<t.length;i++){const r=t[i];e.push(new poe(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e}}moe.prototype.controlText_="Audio Track";Yt.registerComponent("AudioTrackButton",moe);class g9 extends DT{constructor(e,t){const i=t.rate,r=parseFloat(i,10);t.label=i,t.selected=r===e.playbackRate(),t.selectable=!0,t.multiSelectable=!1,super(e,t),this.label=i,this.rate=r,this.on(e,"ratechange",s=>this.update(s))}handleClick(e){super.handleClick(),this.player().playbackRate(this.rate)}update(e){this.selected(this.player().playbackRate()===this.rate)}}g9.prototype.contentElType="button";Yt.registerComponent("PlaybackRateMenuItem",g9);class goe extends l9{constructor(e,t){super(e,t),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(e,"loadstart",i=>this.updateVisibility(i)),this.on(e,"ratechange",i=>this.updateLabel(i)),this.on(e,"playbackrateschange",i=>this.handlePlaybackRateschange(i))}createEl(){const e=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ei("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const e=this.playbackRates(),t=[];for(let i=e.length-1;i>=0;i--)t.push(new g9(this.player(),{rate:e[i]+"x"}));return t}handlePlaybackRateschange(e){this.update()}playbackRates(){const e=this.player();return e.playbackRates&&e.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}goe.prototype.controlText_="Playback Rate";Yt.registerComponent("PlaybackRateMenuButton",goe);class voe extends Yt{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(e="div",t={},i={}){return t.className||(t.className=this.buildCSSClass()),super.createEl(e,t,i)}}Yt.registerComponent("Spacer",voe);class jGe extends voe{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:" "})}}Yt.registerComponent("CustomControlSpacer",jGe);class yoe extends Yt{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}yoe.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Yt.registerComponent("ControlBar",yoe);class _oe extends xb{constructor(e,t){super(e,t),this.on(e,"error",i=>{this.open(i)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const e=this.player().error();return e?this.localize(e.message):""}}_oe.prototype.options_=Object.assign({},xb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Yt.registerComponent("ErrorDisplay",_oe);class boe extends Yt{constructor(e,t={}){super(e,t),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),Ei("select",{id:this.options_.id},{},this.options_.SelectOptions.map(t=>{const i=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${oc()}`)+"-"+t[1].replace(/\W+/g,""),r=Ei("option",{id:i,value:this.localize(t[0]),textContent:this.localize(t[1])});return r.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${i}`),r}))}}Yt.registerComponent("TextTrackSelect",boe);class wg extends Yt{constructor(e,t={}){super(e,t);const i=Ei("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(i);const r=this.options_.selects;for(const s of r){const a=this.options_.selectConfigs[s],o=a.className,l=a.id.replace("%s",this.options_.id_);let u=null;const c=`vjs_select_${oc()}`;if(this.options_.type==="colors"){u=Ei("span",{className:o});const f=Ei("label",{id:l,className:"vjs-label",textContent:this.localize(a.label)});f.setAttribute("for",c),u.appendChild(f)}const d=new boe(e,{SelectOptions:a.options,legendId:this.options_.legendId,id:c,labelId:l});this.addChild(d),this.options_.type==="colors"&&(u.appendChild(d.el()),this.el().appendChild(u))}}createEl(){return Ei("fieldset",{className:this.options_.className})}}Yt.registerComponent("TextTrackFieldset",wg);class Soe extends Yt{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,r=new wg(e,{id_:i,legendId:`captions-text-legend-${i}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(r);const s=new wg(e,{id_:i,legendId:`captions-background-${i}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(s);const a=new wg(e,{id_:i,legendId:`captions-window-${i}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(a)}createEl(){return Ei("div",{className:"vjs-track-settings-colors"})}}Yt.registerComponent("TextTrackSettingsColors",Soe);class xoe extends Yt{constructor(e,t={}){super(e,t);const i=this.options_.textTrackComponentid,r=new wg(e,{id_:i,legendId:`captions-font-size-${i}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(r);const s=new wg(e,{id_:i,legendId:`captions-edge-style-${i}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(s);const a=new wg(e,{id_:i,legendId:`captions-font-family-${i}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(a)}createEl(){return Ei("div",{className:"vjs-track-settings-font"})}}Yt.registerComponent("TextTrackSettingsFont",xoe);class woe extends Yt{constructor(e,t={}){super(e,t);const i=this.localize("restore all settings to the default values"),r=new Eo(e,{controlText:i,className:"vjs-default-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Reset"),this.addChild(r);const s=new Eo(e,{controlText:i,className:"vjs-done-button"});s.el().classList.remove("vjs-control","vjs-button"),s.el().textContent=this.localize("Done"),this.addChild(s)}createEl(){return Ei("div",{className:"vjs-track-settings-controls"})}}Yt.registerComponent("TrackSettingsControls",woe);const VP="vjs-text-track-settings",wW=["#000","Black"],TW=["#00F","Blue"],CW=["#0FF","Cyan"],AW=["#0F0","Green"],EW=["#F0F","Magenta"],MW=["#F00","Red"],IW=["#FFF","White"],DW=["#FF0","Yellow"],$P=["1","Opaque"],GP=["0.5","Semi-Transparent"],RW=["0","Transparent"],xp={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[wW,IW,MW,AW,TW,DW,EW,CW],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[$P,GP,RW],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[IW,wW,MW,AW,TW,DW,EW,CW],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:n=>n==="1.00"?null:Number(n)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[$P,GP],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[RW,GP,$P],className:"vjs-window-opacity vjs-opacity"}};xp.windowColor.options=xp.backgroundColor.options;function Toe(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function KGe(n,e){const t=n.options[n.options.selectedIndex].value;return Toe(t,e)}function XGe(n,e,t){if(e){for(let i=0;i<n.options.length;i++)if(Toe(n.options[i].value,t)===e){n.selectedIndex=i;break}}}class YGe extends xb{constructor(e,t){t.temporary=!1,super(e,t),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(e),this.endDialog=Ei("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),t.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(e){const t=new Soe(e,{textTrackComponentid:this.id_,selectConfigs:xp,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(t);const i=new xoe(e,{textTrackComponentid:this.id_,selectConfigs:xp,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(i);const r=new woe(e);this.addChild(r)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),N1(xp,e=>{this.on(this.$(e.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return pae(xp,(e,t,i)=>{const r=KGe(this.$(t.selector),t.parser);return r!==void 0&&(e[i]=r),e},{})}setValues(e){N1(xp,(t,i)=>{XGe(this.$(t.selector),e[i],t.parser)})}setDefaults(){N1(xp,e=>{const t=e.hasOwnProperty("default")?e.default:0;this.$(e.selector).selectedIndex=t})}restoreSettings(){let e;try{e=JSON.parse(ht.localStorage.getItem(VP))}catch(t){ji.warn(t)}e&&this.setValues(e)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const e=this.getValues();try{Object.keys(e).length?ht.localStorage.setItem(VP,JSON.stringify(e)):ht.localStorage.removeItem(VP)}catch(t){ji.warn(t)}}updateDisplay(){const e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Yt.registerComponent("TextTrackSettings",YGe);class QGe extends Yt{constructor(e,t){let i=t.ResizeObserver||ht.ResizeObserver;t.ResizeObserver===null&&(i=!1);const r=jr({createEl:!i,reportTouchActivity:!1},t);super(e,r),this.ResizeObserver=t.ResizeObserver||ht.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=Bae(()=>{this.resizeHandler()},100,!1,this),i?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(e.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const s=this.debouncedHandler_;let a=this.unloadListener_=function(){Ao(this,"resize",s),Ao(this,"unload",a),a=null};hu(this.el_.contentWindow,"unload",a),hu(this.el_.contentWindow,"resize",s)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Yt.registerComponent("ResizeManager",QGe);const ZGe={trackingThreshold:20,liveTolerance:15};class JGe extends Yt{constructor(e,t){const i=jr(ZGe,t,{createEl:!1});super(e,i),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=r=>this.handlePlay(r),this.handleFirstTimeupdate_=r=>this.handleFirstTimeupdate(r),this.handleSeeked_=r=>this.handleSeeked(r),this.seekToLiveEdge_=r=>this.seekToLiveEdge(r),this.reset_(),this.on(this.player_,"durationchange",r=>this.handleDurationchange(r)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const e=this.player_.seekable();if(!e||!e.length)return;const t=Number(ht.performance.now().toFixed(4)),i=this.lastTime_===-1?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+i;const r=this.liveCurrentTime(),s=this.player_.currentTime();let a=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-s)>this.options_.liveTolerance;(!this.timeupdateSeen_||r===1/0)&&(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,lc),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.end(i));return t.length?t.sort()[t.length-1]:1/0}seekableStart(){const e=this.player_.seekable(),t=[];let i=e?e.length:0;for(;i--;)t.push(e.start(i));return t.length?t.sort()[0]:0}liveWindow(){const e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Yt.registerComponent("LiveTracker",JGe);class eWe extends Yt{constructor(e,t){super(e,t),this.on("statechanged",i=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:Ei("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${oc()}`}),description:Ei("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${oc()}`})},Ei("div",{className:"vjs-title-bar"},{},mae(this.els))}updateDom_(){const e=this.player_.tech_,t=e&&e.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(r=>{const s=this.state[r],a=this.els[r],o=i[r];MD(a),s&&A0(a,s),t&&(t.removeAttribute(o),s&&t.setAttribute(o,a.id))}),this.state.title||this.state.description?this.show():this.hide()}update(e){this.setState(e)}dispose(){const e=this.player_.tech_,t=e&&e.el_;t&&(t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Yt.registerComponent("TitleBar",eWe);const tWe={initialDisplay:4e3,position:[],takeFocus:!1};class nWe extends Eo{constructor(e,t){t=jr(tWe,t),super(e,t),this.controlText(t.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],i=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(e=>`vjs-${e}`).join(" ")}`}createEl(){const e=Ei("button",{},{type:"button",class:this.buildCSSClass()},Ei("span"));return this.controlTextEl_=e.querySelector("span"),e}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Yt.registerComponent("TransientButton",nWe);const I8=n=>{const e=n.el();if(e.hasAttribute("src"))return n.triggerSourceset(e.src),!0;const t=n.$$("source"),i=[];let r="";if(!t.length)return!1;for(let s=0;s<t.length;s++){const a=t[s].src;a&&i.indexOf(a)===-1&&i.push(a)}return i.length?(i.length===1&&(r=i[0]),n.triggerSourceset(r),!0):!1},iWe=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(n){const e=Tn.createElement(this.nodeName.toLowerCase());e.innerHTML=n;const t=Tn.createDocumentFragment();for(;e.childNodes.length;)t.appendChild(e.childNodes[0]);return this.innerText="",ht.Element.prototype.appendChild.call(this,t),this.innerHTML}}),Coe=(n,e)=>{let t={};for(let i=0;i<n.length&&(t=Object.getOwnPropertyDescriptor(n[i],e),!(t&&t.set&&t.get));i++);return t.enumerable=!0,t.configurable=!0,t},rWe=n=>Coe([n.el(),ht.HTMLMediaElement.prototype,ht.Element.prototype,iWe],"innerHTML"),PW=function(n){const e=n.el();if(e.resetSourceWatch_)return;const t={},i=rWe(n),r=s=>(...a)=>{const o=s.apply(e,a);return I8(n),o};["append","appendChild","insertAdjacentHTML"].forEach(s=>{e[s]&&(t[s]=e[s],e[s]=r(t[s]))}),Object.defineProperty(e,"innerHTML",jr(i,{set:r(i.set)})),e.resetSourceWatch_=()=>{e.resetSourceWatch_=null,Object.keys(t).forEach(s=>{e[s]=t[s]}),Object.defineProperty(e,"innerHTML",i)},n.one("sourceset",e.resetSourceWatch_)},sWe=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?jae(ht.Element.prototype.getAttribute.call(this,"src")):""},set(n){return ht.Element.prototype.setAttribute.call(this,"src",n),n}}),aWe=n=>Coe([n.el(),ht.HTMLMediaElement.prototype,sWe],"src"),oWe=function(n){if(!n.featuresSourceset)return;const e=n.el();if(e.resetSourceset_)return;const t=aWe(n),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",jr(t,{set:s=>{const a=t.set.call(e,s);return n.triggerSourceset(e.src),a}})),e.setAttribute=(s,a)=>{const o=i.call(e,s,a);return/src/i.test(s)&&n.triggerSourceset(e.src),o},e.load=()=>{const s=r.call(e);return I8(n)||(n.triggerSourceset(""),PW(n)),s},e.currentSrc?n.triggerSourceset(e.currentSrc):I8(n)||PW(n),e.resetSourceset_=()=>{e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",t),e.resetSourceWatch_&&e.resetSourceWatch_()}};class qn extends Hi{constructor(e,t){super(e,t);const i=e.source;let r=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",i&&(this.el_.currentSrc!==i.src||e.tag&&e.tag.initNetworkState_===3)?this.setSource(i):this.handleLateInit_(this.el_),e.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const s=this.el_.childNodes;let a=s.length;const o=[];for(;a--;){const l=s[a];l.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(l),this.remoteTextTracks().addTrack(l.track),this.textTracks().addTrack(l.track),!r&&!this.el_.hasAttribute("crossorigin")&&PD(l.src)&&(r=!0)):o.push(l))}for(let l=0;l<o.length;l++)this.el_.removeChild(o[l])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&r&&ji.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(vw||wD)&&e.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),qn.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){oWe(this)}restoreMetadataTracksInIOSNativePlayer_(){const e=this.textTracks();let t;const i=()=>{t=[];for(let s=0;s<e.length;s++){const a=e[s];a.kind==="metadata"&&t.push({track:a,storedMode:a.mode})}};i(),e.addEventListener("change",i),this.on("dispose",()=>e.removeEventListener("change",i));const r=()=>{for(let s=0;s<t.length;s++){const a=t[s];a.track.mode==="disabled"&&a.track.mode!==a.storedMode&&(a.track.mode=a.storedMode)}e.removeEventListener("change",r)};this.on("webkitbeginfullscreen",()=>{e.removeEventListener("change",i),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",()=>{e.removeEventListener("change",i),e.addEventListener("change",i),e.removeEventListener("change",r)})}overrideNative_(e,t){if(t!==this[`featuresNative${e}Tracks`])return;const i=e.toLowerCase();this[`${i}TracksListeners_`]&&Object.keys(this[`${i}TracksListeners_`]).forEach(r=>{this.el()[`${i}Tracks`].removeEventListener(r,this[`${i}TracksListeners_`][r])}),this[`featuresNative${e}Tracks`]=!t,this[`${i}TracksListeners_`]=null,this.proxyNativeTracksForType_(i)}overrideNativeAudioTracks(e){this.overrideNative_("Audio",e)}overrideNativeVideoTracks(e){this.overrideNative_("Video",e)}proxyNativeTracksForType_(e){const t=Yu[e],i=this.el()[t.getterName],r=this[t.getterName]();if(!this[`featuresNative${t.capitalName}Tracks`]||!i||!i.addEventListener)return;const s={change:o=>{const l={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(l),e==="text"&&this[L_.remoteText.getterName]().trigger(l)},addtrack(o){r.addTrack(o.track)},removetrack(o){r.removeTrack(o.track)}},a=function(){const o=[];for(let l=0;l<r.length;l++){let u=!1;for(let c=0;c<i.length;c++)if(i[c]===r[l]){u=!0;break}u||o.push(r[l])}for(;o.length;)r.removeTrack(o.shift())};this[t.getterName+"Listeners_"]=s,Object.keys(s).forEach(o=>{const l=s[o];i.addEventListener(o,l),this.on("dispose",u=>i.removeEventListener(o,l))}),this.on("loadstart",a),this.on("dispose",o=>this.off("loadstart",a))}proxyNativeTracks_(){Yu.names.forEach(e=>{this.proxyNativeTracksForType_(e)})}createEl(){let e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){const i=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(i,e),qn.disposeMediaElement(e),e=i}else{e=Tn.createElement("video");const i=this.options_.tag&&Sp(this.options_.tag),r=jr({},i);(!vw||this.options_.nativeControlsForTouch!==!0)&&delete r.controls,Tae(e,Object.assign(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&D_(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);const t=["loop","muted","playsinline","autoplay"];for(let i=0;i<t.length;i++){const r=t[i],s=this.options_[r];typeof s<"u"&&(s?D_(e,r,r):AD(e,r),e[r]=s)}return e}handleLateInit_(e){if(e.networkState===0||e.networkState===3)return;if(e.readyState===0){let i=!1;const r=function(){i=!0};this.on("loadstart",r);const s=function(){i||this.trigger("loadstart")};this.on("loadedmetadata",s),this.ready(function(){this.off("loadstart",r),this.off("loadedmetadata",s),i||this.trigger("loadstart")});return}const t=["loadstart"];t.push("loadedmetadata"),e.readyState>=2&&t.push("loadeddata"),e.readyState>=3&&t.push("canplay"),e.readyState>=4&&t.push("canplaythrough"),this.ready(function(){t.forEach(function(i){this.trigger(i)},this)})}setScrubbing(e){this.isScrubbing_=e}scrubbing(){return this.isScrubbing_}setCurrentTime(e){try{this.isScrubbing_&&this.el_.fastSeek&&TD?this.el_.fastSeek(e):this.el_.currentTime=e}catch(t){ji(t,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&jc&&Kd&&this.el_.currentTime===0){const e=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",e))};return this.on("timeupdate",e),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const e=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},t=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",t),this.on("dispose",()=>{this.off("webkitbeginfullscreen",t),this.off("webkitendfullscreen",e)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Ed(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}},0);else try{e.webkitEnterFullScreen()}catch(t){this.trigger("fullscreenerror",t)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):super.requestVideoFrameCallback(e)}cancelVideoFrameCallback(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):super.cancelVideoFrameCallback(e)}src(e){if(e===void 0)return this.el_.src;this.setSrc(e)}addSourceElement(e,t){if(!e)return ji.error("Invalid source URL."),!1;const i={src:e};t&&(i.type=t);const r=Ei("source",{},i);return this.el_.appendChild(r),!0}removeSourceElement(e){if(!e)return ji.error("Source URL is required to remove the source element."),!1;const t=this.el_.querySelectorAll("source");for(const i of t)if(i.src===e)return this.el_.removeChild(i),!0;return ji.warn(`No matching source element found with src: ${e}`),!1}reset(){qn.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(e){this.el_.controls=!!e}addTextTrack(e,t,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,i):super.addTextTrack(e,t,i)}createRemoteTextTrack(e){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(e);const t=Tn.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e.default&&(t.default=e.default),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t}addRemoteTextTrack(e,t){const i=super.addRemoteTextTrack(e,t);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}removeRemoteTextTrack(e){if(super.removeRemoteTextTrack(e),this.featuresNativeTextTracks){const t=this.$$("track");let i=t.length;for(;i--;)(e===t[i]||e===t[i].track)&&this.el().removeChild(t[i])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),ht.performance&&(e.creationTime=ht.performance.now()),e}}bD(qn,"TEST_VID",function(){if(!_b())return;const n=Tn.createElement("video"),e=Tn.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n});qn.isSupported=function(){try{qn.TEST_VID.volume=.5}catch{return!1}return!!(qn.TEST_VID&&qn.TEST_VID.canPlayType)};qn.canPlayType=function(n){return qn.TEST_VID.canPlayType(n)};qn.canPlaySource=function(n,e){return qn.canPlayType(n.type)};qn.canControlVolume=function(){try{const n=qn.TEST_VID.volume;qn.TEST_VID.volume=n/2+.1;const e=n!==qn.TEST_VID.volume;return e&&Co?(ht.setTimeout(()=>{qn&&qn.prototype&&(qn.prototype.featuresVolumeControl=n!==qn.TEST_VID.volume)}),!1):e}catch{return!1}};qn.canMuteVolume=function(){try{const n=qn.TEST_VID.muted;return qn.TEST_VID.muted=!n,qn.TEST_VID.muted?D_(qn.TEST_VID,"muted","muted"):AD(qn.TEST_VID,"muted","muted"),n!==qn.TEST_VID.muted}catch{return!1}};qn.canControlPlaybackRate=function(){if(jc&&Kd&&SD<58)return!1;try{const n=qn.TEST_VID.playbackRate;return qn.TEST_VID.playbackRate=n/2+.1,n!==qn.TEST_VID.playbackRate}catch{return!1}};qn.canOverrideAttributes=function(){try{const n=()=>{};Object.defineProperty(Tn.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Tn.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Tn.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Tn.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};qn.supportsNativeTextTracks=function(){return TD||Co&&Kd};qn.supportsNativeVideoTracks=function(){return!!(qn.TEST_VID&&qn.TEST_VID.videoTracks)};qn.supportsNativeAudioTracks=function(){return!!(qn.TEST_VID&&qn.TEST_VID.audioTracks)};qn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([n,e]){bD(qn.prototype,n,()=>qn[e](),!0)});qn.prototype.featuresVolumeControl=qn.canControlVolume();qn.prototype.movingMediaElementInDOM=!Co;qn.prototype.featuresFullscreenResize=!0;qn.prototype.featuresProgressEvents=!0;qn.prototype.featuresTimeupdateEvents=!0;qn.prototype.featuresVideoFrameCallback=!!(qn.TEST_VID&&qn.TEST_VID.requestVideoFrameCallback);qn.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};qn.resetMediaElement=function(n){if(!n)return;const e=n.querySelectorAll("source");let t=e.length;for(;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){qn.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){qn.prototype["set"+Is(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){qn.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){qn.prototype["set"+Is(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){qn.prototype[n]=function(){return this.el_[n]()}});Hi.withSourceHandlers(qn);qn.nativeSourceHandler={};qn.nativeSourceHandler.canPlayType=function(n){try{return qn.TEST_VID.canPlayType(n)}catch{return""}};qn.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return qn.nativeSourceHandler.canPlayType(n.type);if(n.src){const t=t9(n.src);return qn.nativeSourceHandler.canPlayType(`video/${t}`)}return""};qn.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};qn.nativeSourceHandler.dispose=function(){};qn.registerSourceHandler(qn.nativeSourceHandler);Hi.registerTech("Html5",qn);const Aoe=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],WP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},D8=["tiny","xsmall","small","medium","large","xlarge","huge"],kM={};D8.forEach(n=>{const e=n.charAt(0)==="x"?`x-${n.substring(1)}`:n;kM[n]=`vjs-layout-${e}`});const lWe={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class os extends Yt{constructor(e,t,i){if(e.id=e.id||t.id||`vjs_video_${oc()}`,t=Object.assign(os.getTagSettings(e),t),t.initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language){const a=e.closest("[lang]");a&&(t.language=a.getAttribute("lang"))}if(super(null,t,i),this.boundDocumentFullscreenChange_=a=>this.documentFullscreenChange_(a),this.boundFullWindowOnEscKey_=a=>this.fullWindowOnEscKey(a),this.boundUpdateStyleEl_=a=>this.updateStyleEl_(a),this.boundApplyInitTime_=a=>this.applyInitTime_(a),this.boundUpdateCurrentBreakpoint_=a=>this.updateCurrentBreakpoint_(a),this.boundHandleTechClick_=a=>this.handleTechClick_(a),this.boundHandleTechDoubleClick_=a=>this.handleTechDoubleClick_(a),this.boundHandleTechTouchStart_=a=>this.handleTechTouchStart_(a),this.boundHandleTechTouchMove_=a=>this.handleTechTouchMove_(a),this.boundHandleTechTouchEnd_=a=>this.handleTechTouchEnd_(a),this.boundHandleTechTap_=a=>this.handleTechTap_(a),this.boundUpdatePlayerHeightOnAudioOnlyMode_=a=>this.updatePlayerHeightOnAudioOnlyMode_(a),this.isFullscreen_=!1,this.log=fae(this.id_),this.fsApi_=Z3,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=e,this.tagAttributes=e&&Sp(e),this.language(this.options_.language),t.languages){const a={};Object.getOwnPropertyNames(t.languages).forEach(function(o){a[o.toLowerCase()]=t.languages[o]}),this.languages_=a}else this.languages_=os.prototype.options_.languages;this.resetCache_(),this.poster_=t.poster||"",this.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],e.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(a=>{if(typeof this[a]!="function")throw new Error(`plugin "${a}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Q7(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(hu(Tn,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const r=jr(this.options_);if(t.plugins&&Object.keys(t.plugins).forEach(a=>{this[a](t.plugins[a])}),t.debug&&this.debug(!0),this.options_.playerOptions=r,this.middleware_=[],this.playbackRates(t.playbackRates),t.experimentalSvgIcons){const o=new ht.DOMParser().parseFromString(RGe,"image/svg+xml");if(o.querySelector("parsererror"))ji.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const u=o.documentElement;u.style.display="none",this.el_.appendChild(u),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(e.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),t.spatialNavigation&&t.spatialNavigation.enabled&&(this.spatialNavigation=new PGe(this),this.addClass("vjs-spatial-navigation-enabled")),vw&&this.addClass("vjs-touch-enabled"),Co||this.addClass("vjs-workinghover"),os.players[this.id_]=this;const s=b8.split(".")[0];this.addClass(`vjs-v${s}`),this.userActive(!0),this.reportUserActivity(),this.one("play",a=>this.listenForUserActivity_(a)),this.on("keydown",a=>this.handleKeyDown(a)),this.on("languagechange",a=>this.handleLanguagechange(a)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ao(Tn,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ao(Tn,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),os.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),EGe(this),Go.names.forEach(e=>{const t=Go[e],i=this[t.getterName]();i&&i.off&&i.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let e=this.tag,t,i=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player");const r=this.tag.tagName.toLowerCase()==="video-js";i?t=this.el_=e.parentNode:r||(t=this.el_=super.createEl("div"));const s=Sp(e);if(r){for(t=this.el_=e,e=this.tag=Tn.createElement("video");t.children.length;)e.appendChild(t.firstChild);t2(t,"video-js")||Sg(t,"video-js"),t.appendChild(e),i=this.playerElIngest_=t,Object.keys(t).forEach(l=>{try{e[l]=t[l]}catch{}})}e.setAttribute("tabindex","-1"),s.tabindex="-1",Kd&&xD&&(e.setAttribute("role","application"),s.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(l){r&&l==="class"||t.setAttribute(l,s[l]),r&&e.setAttribute(l,s[l])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused");const a=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(l=>bae[l]).map(l=>"vjs-device-"+l.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...a),ht.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=Oae("vjs-styles-dimensions");const l=l0(".vjs-styles-defaults"),u=l0("head");u.insertBefore(this.styleEl_,l?l.nextSibling:u.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const o=e.getElementsByTagName("a");for(let l=0;l<o.length;l++){const u=o.item(l);Sg(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!i&&e.parentNode.insertBefore(t,e),x8(e,t),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t}crossOrigin(e){if(typeof e>"u")return this.techGet_("crossOrigin");if(e!==null&&e!=="anonymous"&&e!=="use-credentials"){ji.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${e}"`);return}this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)}width(e){return this.dimension("width",e)}height(e){return this.dimension("height",e)}dimension(e,t){const i=e+"_";if(t===void 0)return this[i]||0;if(t===""||t==="auto"){this[i]=void 0,this.updateStyleEl_();return}const r=parseFloat(t);if(isNaN(r)){ji.error(`Improper value "${t}" supplied for for ${e}`);return}this[i]=r,this.updateStyleEl_()}fluid(e){if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Yf(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),iGe(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(ht.VIDEOJS_NO_DYNAMIC_STYLE===!0){const o=typeof this.width_=="number"?this.width_:this.options_.width,l=typeof this.height_=="number"?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),l>=0&&(u.height=l));return}let e,t,i,r;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?i=this.aspectRatio_:this.videoWidth()>0?i=this.videoWidth()+":"+this.videoHeight():i="16:9";const s=i.split(":"),a=s[1]/s[0];this.width_!==void 0?e=this.width_:this.height_!==void 0?e=this.height_/a:e=this.videoWidth()||300,this.height_!==void 0?t=this.height_:t=e*a,/^[^a-zA-Z]/.test(this.id())?r="dimensions-"+this.id():r=this.id()+"-dimensions",this.addClass(r),Nae(this.styleEl_,`
      .${r} {
        width: ${e}px;
        height: ${t}px;
      }

      .${r}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${a*100}%;
      }
    `)}loadTech_(e,t){this.tech_&&this.unloadTech_();const i=Is(e),r=e.charAt(0).toLowerCase()+e.slice(1);i!=="Html5"&&this.tag&&(Hi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;let s=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(s=!1);const a={source:t,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${r}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Go.names.forEach(l=>{const u=Go[l];a[u.getterName]=this[u.privateName]}),Object.assign(a,this.options_[i]),Object.assign(a,this.options_[r]),Object.assign(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);const o=Hi.getTech(e);if(!o)throw new Error(`No Tech named '${i}' exists! '${i}' should be registered using videojs.registerTech()'`);this.tech_=new o(a),this.tech_.ready(ts(this,this.handleTechReady_),!0),dW.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Aoe.forEach(l=>{this.on(this.tech_,l,u=>this[`handleTech${Is(l)}_`](u))}),Object.keys(WP).forEach(l=>{this.on(this.tech_,l,u=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${WP[l]}_`].bind(this),event:u});return}this[`handleTech${WP[l]}_`](u)})}),this.on(this.tech_,"loadstart",l=>this.handleTechLoadStart_(l)),this.on(this.tech_,"sourceset",l=>this.handleTechSourceset_(l)),this.on(this.tech_,"waiting",l=>this.handleTechWaiting_(l)),this.on(this.tech_,"ended",l=>this.handleTechEnded_(l)),this.on(this.tech_,"seeking",l=>this.handleTechSeeking_(l)),this.on(this.tech_,"play",l=>this.handleTechPlay_(l)),this.on(this.tech_,"pause",l=>this.handleTechPause_(l)),this.on(this.tech_,"durationchange",l=>this.handleTechDurationChange_(l)),this.on(this.tech_,"fullscreenchange",(l,u)=>this.handleTechFullscreenChange_(l,u)),this.on(this.tech_,"fullscreenerror",(l,u)=>this.handleTechFullscreenError_(l,u)),this.on(this.tech_,"enterpictureinpicture",l=>this.handleTechEnterPictureInPicture_(l)),this.on(this.tech_,"leavepictureinpicture",l=>this.handleTechLeavePictureInPicture_(l)),this.on(this.tech_,"error",l=>this.handleTechError_(l)),this.on(this.tech_,"posterchange",l=>this.handleTechPosterChange_(l)),this.on(this.tech_,"textdata",l=>this.handleTechTextData_(l)),this.on(this.tech_,"ratechange",l=>this.handleTechRateChange_(l)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(i!=="Html5"||!this.tag)&&x8(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Go.names.forEach(e=>{const t=Go[e];this[t.privateName]=this[t.getterName]()}),this.textTracksJson_=dW.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(e){return e===void 0&&ji.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":b8}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(e){if(!this.tech_||typeof e!="string")return;const t=()=>{const r=this.muted();this.muted(!0);const s=()=>{this.muted(r)};this.playTerminatedQueue_.push(s);const a=this.play();if(i2(a))return a.catch(o=>{throw s(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${o||""}`)})};let i;if(e==="any"&&!this.muted()?(i=this.play(),i2(i)&&(i=i.catch(t))):e==="muted"&&!this.muted()?i=t():i=this.play(),!!i2(i))return i.then(()=>{this.trigger({type:"autoplay-success",autoplay:e})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:e})})}updateSourceCaches_(e=""){let t=e,i="";typeof t!="string"&&(t=e.src,i=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!i&&(i=DGe(this,t)),this.cache_.source=jr({},e,{src:t,type:i});const r=this.cache_.sources.filter(l=>l.src&&l.src===t),s=[],a=this.$$("source"),o=[];for(let l=0;l<a.length;l++){const u=Sp(a[l]);s.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!r.length?this.cache_.sources=s:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}handleTechSourceset_(e){if(!this.changingSrc_){let t=s=>this.updateSourceCaches_(s);const i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(t=()=>{}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],s=>{if(s.type==="sourceset")return;const a=this.techGet_("currentSrc");this.lastSource_.tech=a,this.updateSourceCaches_(a)})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})}hasStarted(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(e=>e.callback(e.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const e=this.currentTime(),t=()=>{e!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",t))};this.on("timeupdate",t)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Ed(this.play()):this.pause())}handleTechDoubleClick_(e){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),i=>i.contains(e.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isInPictureInPicture()&&!Tn.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(e){e.cancelable&&e.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(e){const t=e.target.player;if(t&&t!==this)return;const i=this.el();let r=Tn[this.fsApi_.fullscreenElement]===i;!r&&i.matches&&(r=i.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}handleTechFullscreenChange_(e,t){t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(t.isFullscreen))}handleTechFullscreenError_(e,t){this.trigger("fullscreenerror",t)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(e){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(e){this.isInPictureInPicture(!1)}handleTechError_(){const e=this.tech_.error();e&&this.error(e)}handleTechTextData_(){let e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(e,t){this.ready(function(){if(e in CGe)return wGe(this.middleware_,this.tech_,e,t);if(e in gW)return mW(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(i){throw ji(i),i}},!0)}techGet_(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in TGe)return xGe(this.middleware_,this.tech_,e);if(e in gW)return mW(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw this.tech_[e]===void 0?(ji(`Video.js: ${e} method not defined for ${this.techName_} playback technology.`,t),t):t.name==="TypeError"?(ji(`Video.js: ${e} unavailable on ${this.techName_} playback technology element.`,t),this.tech_.isReady_=!1,t):(ji(t),t)}}}play(){return new Promise(e=>{this.play_(e)})}play_(e=Ed){this.playCallbacks_.push(e);const t=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),i=!!(TD||Co);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!t){this.waitToPlay_=a=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!t&&i&&this.load();return}const r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),r===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}runPlayTerminatedQueue_(){const e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(t){t()})}runPlayCallbacks_(e){const t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach(function(i){i(e)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||$c(0,0)}scrubbing(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(e){if(e===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0,isFinite(e)&&(this.cache_.currentTime=Number(e))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let e=this.techGet_("buffered");return(!e||!e.length)&&(e=$c(0,0)),e}seekable(){let e=this.techGet_("seekable");return(!e||!e.length)&&(e=$c(0,0)),e}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return Wae(this.buffered(),this.duration())}bufferedEnd(){const e=this.buffered(),t=this.duration();let i=e.end(e.length-1);return i>t&&(i=t),i}volume(e){let t;if(e!==void 0){t=Math.max(0,Math.min(1,e)),this.cache_.volume=t,this.techCall_("setVolume",t),t>0&&this.lastVolume_(t);return}return t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t}muted(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1}defaultMuted(e){return e!==void 0&&this.techCall_("setDefaultMuted",e),this.techGet_("defaultMuted")||!1}lastVolume_(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(e){if(e!==void 0){const t=this.isFullscreen_;this.isFullscreen_=!!e,this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(e){this.isInPictureInPicture()&&this.exitPictureInPicture();const t=this;return new Promise((i,r)=>{function s(){t.off("fullscreenerror",o),t.off("fullscreenchange",a)}function a(){s(),i()}function o(u,c){s(),r(c)}t.one("fullscreenchange",a),t.one("fullscreenerror",o);const l=t.requestFullscreenHelper_(e);l&&(l.then(s,s),l.then(i,r))})}requestFullscreenHelper_(e){let t;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(t=e)),this.fsApi_.requestFullscreen){const i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),i}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const e=this;return new Promise((t,i)=>{function r(){e.off("fullscreenerror",a),e.off("fullscreenchange",s)}function s(){r(),t()}function a(l,u){r(),i(u)}e.one("fullscreenchange",s),e.one("fullscreenerror",a);const o=e.exitFullscreenHelper_();o&&(o.then(r,r),o.then(t,i))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const e=Tn[this.fsApi_.exitFullscreen]();return e&&Ed(e.then(()=>this.isFullscreen(!1))),e}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Tn.documentElement.style.overflow,hu(Tn,"keydown",this.boundFullWindowOnEscKey_),Tn.documentElement.style.overflow="hidden",Sg(Tn.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(e){e.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ao(Tn,"keydown",this.boundFullWindowOnEscKey_),Tn.documentElement.style.overflow=this.docOrigOverflow,CD(Tn.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&ht.documentPictureInPicture){const e=Tn.createElement(this.el().tagName);return e.classList=this.el().classList,e.classList.add("vjs-pip-container"),this.posterImage&&e.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&e.appendChild(this.titleBar.el().cloneNode(!0)),e.appendChild(Ei("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),ht.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(t=>(Pae(t),this.el_.parentNode.insertBefore(e,this.el_),t.document.body.appendChild(this.el_),t.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:t}),t.addEventListener("pagehide",i=>{const r=i.target.querySelector(".video-js");e.parentNode.replaceChild(r,e),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),t))}return"pictureInPictureEnabled"in Tn&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(ht.documentPictureInPicture&&ht.documentPictureInPicture.window)return ht.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in Tn)return Tn.exitPictureInPicture()}handleKeyDown(e){const{userActions:t}=this.options_;!t||!t.hotkeys||(r=>{const s=r.tagName.toLowerCase();if(r.isContentEditable)return!0;const a=["button","checkbox","hidden","radio","reset","submit"];return s==="input"?a.indexOf(r.type)===-1:["textarea"].indexOf(s)!==-1})(this.el_.ownerDocument.activeElement)||(typeof t.hotkeys=="function"?t.hotkeys.call(this,e):this.handleHotkeys(e))}handleHotkeys(e){const t=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:i=a=>e.key.toLowerCase()==="f",muteKey:r=a=>e.key.toLowerCase()==="m",playPauseKey:s=a=>e.key.toLowerCase()==="k"||e.key.toLowerCase()===" "}=t;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();const a=Yt.getComponent("FullscreenToggle");Tn[this.fsApi_.fullscreenEnabled]!==!1&&a.prototype.handleClick.call(this,e)}else r.call(this,e)?(e.preventDefault(),e.stopPropagation(),Yt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),Yt.getComponent("PlayToggle").prototype.handleClick.call(this,e))}canPlayType(e){let t;for(let i=0,r=this.options_.techOrder;i<r.length;i++){const s=r[i];let a=Hi.getTech(s);if(a||(a=Yt.getComponent(s)),!a){ji.error(`The "${s}" tech is undefined. Skipped browser support check for that tech.`);continue}if(a.isSupported()&&(t=a.canPlayType(e),t))return t}return""}selectSource(e){const t=this.options_.techOrder.map(o=>[o,Hi.getTech(o)]).filter(([o,l])=>l?l.isSupported():(ji.error(`The "${o}" tech is undefined. Skipped browser support check for that tech.`),!1)),i=function(o,l,u){let c;return o.some(d=>l.some(f=>{if(c=u(d,f),c)return!0})),c};let r;const s=o=>(l,u)=>o(u,l),a=([o,l],u)=>{if(l.canPlaySource(u,this.options_[o.toLowerCase()]))return{source:u,tech:o}};return this.options_.sourceOrder?r=i(e,t,s(a)):r=i(t,e,a),r||!1}handleSrc_(e,t){if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const i=Yae(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),bGe(this,i[0],(r,s)=>{if(this.middleware_=s,t||(this.cache_.sources=i),this.updateSourceCaches_(r),this.src_(r)){if(i.length>1)return this.handleSrc_(i.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}SGe(s,this.tech_)}),i.length>1){const r=()=>{this.error(null),this.handleSrc_(i.slice(1),!0)},s=()=>{this.off("error",r)};this.one("error",r),this.one("playing",s),this.resetRetryOnError_=()=>{this.off("error",r),this.off("playing",s)}}}src(e){return this.handleSrc_(e,!1)}src_(e){const t=this.selectSource([e]);return t?Hae(t.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(t.tech,t.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(e,t){return this.tech_?this.tech_.addSourceElement(e,t):!1}removeSourceElement(e){return this.tech_?this.tech_.removeSourceElement(e):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const e=this.play();Ed(e.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Yf(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:e,durationDisplay:t,progressControl:i,remainingTimeDisplay:r}=this.controlBar||{},{seekBar:s}=i||{};e&&e.updateContent(),t&&t.updateContent(),r&&r.updateContent(),s&&(s.update(),s.loadProgressBar&&s.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const e=this.currentSource(),t=[];return Object.keys(e).length!==0&&t.push(e),this.cache_.sources||t}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")}autoplay(e){if(e===void 0)return this.options_.autoplay||!1;let t;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),t=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,t=typeof t>"u"?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)}playsinline(e){return e!==void 0&&(this.techCall_("setPlaysinline",e),this.options_.playsinline=e),this.techGet_("playsinline")}loop(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")}poster(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(e){if(e===void 0)return this.error_||null;if(o0("beforeerror").forEach(t=>{const i=t(this,e);if(!(jd(i)&&!Array.isArray(i)||typeof i=="string"||typeof i=="number"||i===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=i}),this.options_.suppressNotSupportedError&&e&&e.code===4){const t=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),this.one("loadstart",function(){this.off(["click","touchstart"],t)});return}if(e===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ts(e),this.addClass("vjs-error"),ji.error(`(CODE:${this.error_.code} ${Ts.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),o0("error").forEach(t=>t(this,this.error_))}reportUserActivity(e){this.userActivity_=!0}userActive(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let e,t,i;const r=ts(this,this.reportUserActivity),s=function(d){(d.screenX!==t||d.screenY!==i)&&(t=d.screenX,i=d.screenY,r())},a=function(){r(),this.clearInterval(e),e=this.setInterval(r,250)},o=function(d){r(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",s),this.on("mouseup",o),this.on("mouseleave",o);const l=this.getChild("controlBar");l&&!Co&&!jc&&(l.on("mouseenter",function(d){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),l.on("mouseleave",function(d){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",r),this.on("keyup",r);let u;const c=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(u);const d=this.options_.inactivityTimeout;d<=0||(u=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},d))};this.setInterval(c,250)}playbackRate(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const e=this.getChild("ControlBar");!e||this.audioOnlyCache_.controlBarHeight===e.currentHeight()||(this.audioOnlyCache_.controlBarHeight=e.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const e=this.children(),t=this.getChild("ControlBar"),i=t&&t.currentHeight();e.forEach(r=>{r!==t&&r.el_&&!r.hasClass("vjs-hidden")&&(r.hide(),this.audioOnlyCache_.hiddenChildren.push(r))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=i,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(i),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(e=>e.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(e){if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){const t=[];return this.isInPictureInPicture()&&t.push(this.exitPictureInPicture()),this.isFullscreen()&&t.push(this.exitFullscreen()),this.audioPosterMode()&&t.push(this.audioPosterMode(!1)),Promise.all(t).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(e){return typeof e!="boolean"||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(e,t,i){if(this.tech_)return this.tech_.addTextTrack(e,t,i)}addRemoteTextTrack(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)}removeRemoteTextTrack(e={}){let{track:t}=e;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Yf(this)&&this.trigger("languagechange"))}languages(){return jr(os.prototype.options_.languages,this.languages_)}toJSON(){const e=jr(this.options_),t=e.tracks;e.tracks=[];for(let i=0;i<t.length;i++){let r=t[i];r=jr(r),r.player=void 0,e.tracks[i]=r}return e}createModal(e,t){t=t||{},t.content=e||"";const i=new xb(this,t);return this.addChild(i),i.on("dispose",()=>{this.removeChild(i)}),i.open(),i}updateCurrentBreakpoint_(){if(!this.responsive())return;const e=this.currentBreakpoint(),t=this.currentWidth();for(let i=0;i<D8.length;i++){const r=D8[i],s=this.breakpoints_[r];if(t<=s){if(e===r)return;e&&this.removeClass(kM[e]),this.addClass(kM[r]),this.breakpoint_=r;break}}}removeCurrentBreakpoint_(){const e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)}breakpoints(e){return e===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},lWe,e),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(e){if(e===void 0)return this.responsive_;e=!!e;const t=this.responsive_;if(e!==t)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return kM[this.breakpoint_]||""}loadMedia(e,t){if(!e||typeof e!="object")return;const i=this.crossOrigin();this.reset(),this.cache_.media=jr(e);const{artist:r,artwork:s,description:a,poster:o,src:l,textTracks:u,title:c}=this.cache_.media;!s&&o&&(this.cache_.media.artwork=[{src:o,type:l4(o)}]),i&&this.crossOrigin(i),l&&this.src(l),o&&this.poster(o),Array.isArray(u)&&u.forEach(d=>this.addRemoteTextTrack(d,!1)),this.titleBar&&this.titleBar.update({title:c,description:a||r||""}),this.ready(t)}getMedia(){if(!this.cache_.media){const e=this.poster(),t=this.currentSources(),i=Array.prototype.map.call(this.remoteTextTracks(),s=>({kind:s.kind,label:s.label,language:s.language,src:s.src})),r={src:t,textTracks:i};return e&&(r.poster=e,r.artwork=[{src:r.poster,type:l4(r.poster)}]),r}return jr(this.cache_.media)}static getTagSettings(e){const t={sources:[],tracks:[]},i=Sp(e),r=i["data-setup"];if(t2(e,"vjs-fill")&&(i.fill=!0),t2(e,"vjs-fluid")&&(i.fluid=!0),r!==null)try{Object.assign(i,JSON.parse(r||"{}"))}catch(s){ji.error("data-setup",s)}if(Object.assign(t,i),e.hasChildNodes()){const s=e.childNodes;for(let a=0,o=s.length;a<o;a++){const l=s[a],u=l.nodeName.toLowerCase();u==="source"?t.sources.push(Sp(l)):u==="track"&&t.tracks.push(Sp(l))}}return t}debug(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(t=>typeof t=="number")&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))}}Go.names.forEach(function(n){const e=Go[n];os.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});os.prototype.crossorigin=os.prototype.crossOrigin;os.players={};const NS=ht.navigator;os.prototype.options_={techOrder:Hi.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:NS&&(NS.languages&&NS.languages[0]||NS.userLanguage||NS.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1};Aoe.forEach(function(n){os.prototype[`handleTech${Is(n)}_`]=function(){return this.trigger(n)}});Yt.registerComponent("Player",os);const u4="plugin",U1="activePlugins_",d1={},c4=n=>d1.hasOwnProperty(n),LM=n=>c4(n)?d1[n]:void 0,Eoe=(n,e)=>{n[U1]=n[U1]||{},n[U1][e]=!0},d4=(n,e,t)=>{const i=(t?"before":"")+"pluginsetup";n.trigger(i,e),n.trigger(i+":"+e.name,e)},uWe=function(n,e){const t=function(){d4(this,{name:n,plugin:e,instance:null},!0);const i=e.apply(this,arguments);return Eoe(this,n),d4(this,{name:n,plugin:e,instance:i}),i};return Object.keys(e).forEach(function(i){t[i]=e[i]}),t},kW=(n,e)=>(e.prototype.name=n,function(...t){d4(this,{name:n,plugin:e,instance:null},!0);const i=new e(this,...t);return this[n]=()=>i,d4(this,i.getEventHash()),i});class Cl{constructor(e){if(this.constructor===Cl)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Q7(this),delete this.trigger,zae(this,this.constructor.defaultState),Eoe(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(e={}){return e.name=this.name,e.plugin=this.constructor,e.instance=this,e}trigger(e,t={}){return Sb(this.eventBusEl_,e,this.getEventHash(t))}handleStateChanged(e){}dispose(){const{name:e,player:t}=this;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[U1][e]=!1,this.player=this.state=null,t[e]=kW(e,d1[e])}static isBasic(e){const t=typeof e=="string"?LM(e):e;return typeof t=="function"&&!Cl.prototype.isPrototypeOf(t.prototype)}static registerPlugin(e,t){if(typeof e!="string")throw new Error(`Illegal plugin name, "${e}", must be a string, was ${typeof e}.`);if(c4(e))ji.warn(`A plugin named "${e}" already exists. You may want to avoid re-registering plugins!`);else if(os.prototype.hasOwnProperty(e))throw new Error(`Illegal plugin name, "${e}", cannot share a name with an existing player method!`);if(typeof t!="function")throw new Error(`Illegal plugin for "${e}", must be a function, was ${typeof t}.`);return d1[e]=t,e!==u4&&(Cl.isBasic(t)?os.prototype[e]=uWe(e,t):os.prototype[e]=kW(e,t)),t}static deregisterPlugin(e){if(e===u4)throw new Error("Cannot de-register base plugin.");c4(e)&&(delete d1[e],delete os.prototype[e])}static getPlugins(e=Object.keys(d1)){let t;return e.forEach(i=>{const r=LM(i);r&&(t=t||{},t[i]=r)}),t}static getPluginVersion(e){const t=LM(e);return t&&t.VERSION||""}}Cl.getPlugin=LM;Cl.BASE_PLUGIN_NAME=u4;Cl.registerPlugin(u4,Cl);os.prototype.usingPlugin=function(n){return!!this[U1]&&this[U1][n]===!0};os.prototype.hasPlugin=function(n){return!!c4(n)};function cWe(n,e){let t=!1;return function(...i){return t||ji.warn(n),t=!0,e.apply(this,i)}}function Qc(n,e,t,i){return cWe(`${e} is deprecated and will be removed in ${n}.0; please use ${t} instead.`,i)}var dWe={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const Moe=n=>n.indexOf("#")===0?n.slice(1):n;function $t(n,e,t){let i=$t.getPlayer(n);if(i)return e&&ji.warn(`Player "${n}" is already initialised. Options will not be applied.`),t&&i.ready(t),i;const r=typeof n=="string"?l0("#"+Moe(n)):n;if(!bb(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");const a=("getRootNode"in r?r.getRootNode()instanceof ht.ShadowRoot:!1)?r.getRootNode():r.ownerDocument.body;(!r.ownerDocument.defaultView||!a.contains(r))&&ji.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),o0("beforesetup").forEach(l=>{const u=l(r,jr(e));if(!jd(u)||Array.isArray(u)){ji.error("please return an object in beforesetup hooks");return}e=jr(e,u)});const o=Yt.getComponent("Player");return i=new o(r,e,t),o0("setup").forEach(l=>l(i)),i}$t.hooks_=Hf;$t.hooks=o0;$t.hook=$$e;$t.hookOnce=G$e;$t.removeHook=dae;if(ht.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&_b()){let n=l0(".vjs-styles-defaults");if(!n){n=Oae("vjs-styles-defaults");const e=l0("head");e&&e.insertBefore(n,e.firstChild),Nae(n,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}T8(1,$t);$t.VERSION=b8;$t.options=os.prototype.options_;$t.getPlayers=()=>os.players;$t.getPlayer=n=>{const e=os.players;let t;if(typeof n=="string"){const i=Moe(n),r=e[i];if(r)return r;t=l0("#"+i)}else t=n;if(bb(t)){const{player:i,playerId:r}=t;if(i||e[r])return i||e[r]}};$t.getAllPlayers=()=>Object.keys(os.players).map(n=>os.players[n]).filter(Boolean);$t.players=os.players;$t.getComponent=Yt.getComponent;$t.registerComponent=(n,e)=>(Hi.isTech(e)&&ji.warn(`The ${n} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Yt.registerComponent.call(Yt,n,e));$t.getTech=Hi.getTech;$t.registerTech=Hi.registerTech;$t.use=_Ge;Object.defineProperty($t,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty($t.middleware,"TERMINATOR",{value:o4,writeable:!1,enumerable:!0});$t.browser=bae;$t.obj=j$e;$t.mergeOptions=Qc(9,"videojs.mergeOptions","videojs.obj.merge",jr);$t.defineLazyProperty=Qc(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",bD);$t.bind=Qc(9,"videojs.bind","native Function.prototype.bind",ts);$t.registerPlugin=Cl.registerPlugin;$t.deregisterPlugin=Cl.deregisterPlugin;$t.plugin=(n,e)=>(ji.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Cl.registerPlugin(n,e));$t.getPlugins=Cl.getPlugins;$t.getPlugin=Cl.getPlugin;$t.getPluginVersion=Cl.getPluginVersion;$t.addLanguage=function(n,e){return n=(""+n).toLowerCase(),$t.options.languages=jr($t.options.languages,{[n]:e}),$t.options.languages[n]};$t.log=ji;$t.createLogger=fae;$t.time=lGe;$t.createTimeRange=Qc(9,"videojs.createTimeRange","videojs.time.createTimeRanges",$c);$t.createTimeRanges=Qc(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",$c);$t.formatTime=Qc(9,"videojs.formatTime","videojs.time.formatTime",Vg);$t.setFormatTime=Qc(9,"videojs.setFormatTime","videojs.time.setFormatTime",$ae);$t.resetFormatTime=Qc(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",Gae);$t.parseUrl=Qc(9,"videojs.parseUrl","videojs.url.parseUrl",e9);$t.isCrossOrigin=Qc(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",PD);$t.EventTarget=pu;$t.any=Y7;$t.on=hu;$t.one=DD;$t.off=Ao;$t.trigger=Sb;$t.xhr=mse;$t.TextTrack=MT;$t.AudioTrack=Kae;$t.VideoTrack=Xae;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(n=>{$t[n]=function(){return ji.warn(`videojs.${n}() is deprecated; use videojs.dom.${n}() instead`),kae[n].apply(null,arguments)}});$t.computedStyle=Qc(9,"videojs.computedStyle","videojs.dom.computedStyle",P_);$t.dom=kae;$t.fn=nGe;$t.num=zGe;$t.str=aGe;$t.url=vGe;$t.Error=dWe;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class fWe{constructor(e){let t=this;return t.id=e.id,t.label=t.id,t.width=e.width,t.height=e.height,t.bitrate=e.bandwidth,t.frameRate=e.frameRate,t.enabled_=e.enabled,Object.defineProperty(t,"enabled",{get(){return t.enabled_()},set(i){t.enabled_(i)}}),t}}class f4 extends $t.EventTarget{constructor(){super();let e=this;return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get(){return e.levels_.length}}),e[Symbol.iterator]=()=>e.levels_.values(),e}addQualityLevel(e){let t=this.getQualityLevelById(e.id);if(t)return t;const i=this.levels_.length;return t=new fWe(e),""+i in this||Object.defineProperty(this,i,{get(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t}removeQualityLevel(e){let t=null;for(let i=0,r=this.length;i<r;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t}getQualityLevelById(e){for(let t=0,i=this.length;t<i;t++){const r=this[t];if(r.id===e)return r}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}f4.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const n in f4.prototype.allowedEvents_)f4.prototype["on"+n]=null;var Ioe="4.1.0";const hWe=function(n,e){const t=n.qualityLevels,i=new f4,r=function(){i.dispose(),n.qualityLevels=t,n.off("dispose",r)};return n.on("dispose",r),n.qualityLevels=()=>i,n.qualityLevels.VERSION=Ioe,i},Doe=function(n){return hWe(this,$t.obj.merge({},n))};$t.registerPlugin("qualityLevels",Doe);Doe.VERSION=Ioe;/*! @name @videojs/http-streaming @version 3.16.2 @license Apache-2.0 */const gl=hD,h4=(n,e)=>e&&e.responseURL&&n!==e.responseURL?e.responseURL:n,pc=n=>$t.log.debug?$t.log.debug.bind($t,"VHS:",`${n} >`):function(){};function Fr(...n){const e=$t.obj||$t;return(e.merge||e.mergeOptions).apply(e,n)}function Pa(...n){const e=$t.time||$t;return(e.createTimeRanges||e.createTimeRanges).apply(e,n)}function pWe(n){if(n.length===0)return"Buffered Ranges are empty";let e=`Buffered Ranges: 
`;for(let t=0;t<n.length;t++){const i=n.start(t),r=n.end(t);e+=`${i} --> ${r}. Duration (${r-i})
`}return e}const Md=1/30,Id=Md*3,Roe=function(n,e){const t=[];let i;if(n&&n.length)for(i=0;i<n.length;i++)e(n.start(i),n.end(i))&&t.push([n.start(i),n.end(i)]);return Pa(t)},f1=function(n,e){return Roe(n,function(t,i){return t-Id<=e&&i+Id>=e})},fA=function(n,e){return Roe(n,function(t){return t-Md>=e})},mWe=function(n){if(n.length<2)return Pa();const e=[];for(let t=1;t<n.length;t++){const i=n.end(t-1),r=n.start(t);e.push([i,r])}return Pa(e)},gWe=function(n,e){let t=null,i=null,r=0;const s=[],a=[];if(!n||!n.length||!e||!e.length)return Pa();let o=n.length;for(;o--;)s.push({time:n.start(o),type:"start"}),s.push({time:n.end(o),type:"end"});for(o=e.length;o--;)s.push({time:e.start(o),type:"start"}),s.push({time:e.end(o),type:"end"});for(s.sort(function(l,u){return l.time-u.time}),o=0;o<s.length;o++)s[o].type==="start"?(r++,r===2&&(t=s[o].time)):s[o].type==="end"&&(r--,r===1&&(i=s[o].time)),t!==null&&i!==null&&(a.push([t,i]),t=null,i=null);return Pa(a)},Poe=n=>{const e=[];if(!n||!n.length)return"";for(let t=0;t<n.length;t++)e.push(n.start(t)+" => "+n.end(t));return e.join(", ")},vWe=function(n,e,t=1){return((n.length?n.end(n.length-1):0)-e)/t},ig=n=>{const e=[];for(let t=0;t<n.length;t++)e.push({start:n.start(t),end:n.end(t)});return e},yWe=function(n,e){if(n===e)return!1;if(!n&&e||!e&&n||n.length!==e.length)return!0;for(let t=0;t<n.length;t++)if(n.start(t)!==e.start(t)||n.end(t)!==e.end(t))return!0;return!1},qP=function(n){if(!(!n||!n.length||!n.end))return n.end(n.length-1)},v9=function(n,e){let t=0;if(!n||!n.length)return t;for(let i=0;i<n.length;i++){const r=n.start(i),s=n.end(i);if(!(e>s)){if(e>r&&e<=s){t+=s-e;continue}t+=s-r}}return t},y9=(n,e)=>{if(!e.preload)return e.duration;let t=0;return(e.parts||[]).forEach(function(i){t+=i.duration}),(e.preloadHints||[]).forEach(function(i){i.type==="PART"&&(t+=n.partTargetDuration)}),t},R8=n=>(n.segments||[]).reduce((e,t,i)=>(t.parts?t.parts.forEach(function(r,s){e.push({duration:r.duration,segmentIndex:i,partIndex:s,part:r,segment:t})}):e.push({duration:t.duration,segmentIndex:i,partIndex:null,segment:t,part:null}),e),[]),koe=n=>{const e=n.segments&&n.segments.length&&n.segments[n.segments.length-1];return e&&e.parts||[]},Loe=({preloadSegment:n})=>{if(!n)return;const{parts:e,preloadHints:t}=n;let i=(t||[]).reduce((r,s)=>r+(s.type==="PART"?1:0),0);return i+=e&&e.length?e.length:0,i},Ooe=(n,e)=>{if(e.endList)return 0;if(n&&n.suggestedPresentationDelay)return n.suggestedPresentationDelay;const t=koe(e).length>0;return t&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:t&&e.partTargetDuration?e.partTargetDuration*3:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?e.targetDuration*3:0},_We=function(n,e){let t=0,i=e-n.mediaSequence,r=n.segments[i];if(r){if(typeof r.start<"u")return{result:r.start,precise:!0};if(typeof r.end<"u")return{result:r.end-r.duration,precise:!0}}for(;i--;){if(r=n.segments[i],typeof r.end<"u")return{result:t+r.end,precise:!0};if(t+=y9(n,r),typeof r.start<"u")return{result:t+r.start,precise:!0}}return{result:t,precise:!1}},bWe=function(n,e){let t=0,i,r=e-n.mediaSequence;for(;r<n.segments.length;r++){if(i=n.segments[r],typeof i.start<"u")return{result:i.start-t,precise:!0};if(t+=y9(n,i),typeof i.end<"u")return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}},Noe=function(n,e,t){if(typeof e>"u"&&(e=n.mediaSequence+n.segments.length),e<n.mediaSequence)return 0;const i=_We(n,e);if(i.precise)return i.result;const r=bWe(n,e);return r.precise?r.result:i.result+t},Boe=function(n,e,t){if(!n)return 0;if(typeof t!="number"&&(t=0),typeof e>"u"){if(n.totalDuration)return n.totalDuration;if(!n.endList)return ht.Infinity}return Noe(n,e,t)},r2=function({defaultDuration:n,durationList:e,startIndex:t,endIndex:i}){let r=0;if(t>i&&([t,i]=[i,t]),t<0){for(let s=t;s<Math.min(0,i);s++)r+=n;t=0}for(let s=t;s<i;s++)r+=e[s].duration;return r},Foe=function(n,e,t,i){if(!n||!n.segments)return null;if(n.endList)return Boe(n);if(e===null)return null;e=e||0;let r=Noe(n,n.mediaSequence+n.segments.length,e);return t&&(i=typeof i=="number"?i:Ooe(null,n),r-=i),Math.max(0,r)},SWe=function(n,e,t){const r=e||0;let s=Foe(n,e,!0,t);return s===null?Pa():(s<r&&(s=r),Pa(r,s))},xWe=function({playlist:n,currentTime:e,startingSegmentIndex:t,startingPartIndex:i,startTime:r,exactManifestTimings:s}){let a=e-r;const o=R8(n);let l=0;for(let u=0;u<o.length;u++){const c=o[u];if(t===c.segmentIndex&&!(typeof i=="number"&&typeof c.partIndex=="number"&&i!==c.partIndex)){l=u;break}}if(a<0){if(l>0)for(let u=l-1;u>=0;u--){const c=o[u];if(a+=c.duration,s){if(a<0)continue}else if(a+Md<=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r-r2({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:u})}}return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e}}if(l<0){for(let u=l;u<0;u++)if(a-=n.targetDuration,a<0)return{partIndex:o[0]&&o[0].partIndex||null,segmentIndex:o[0]&&o[0].segmentIndex||0,startTime:e};l=0}for(let u=l;u<o.length;u++){const c=o[u];a-=c.duration;const d=c.duration>Md,f=a===0,h=d&&a+Md>=0;if(!((f||h)&&u!==o.length-1)){if(s){if(a>0)continue}else if(a-Md>=0)continue;return{partIndex:c.partIndex,segmentIndex:c.segmentIndex,startTime:r+r2({defaultDuration:n.targetDuration,durationList:o,startIndex:l,endIndex:u})}}}return{segmentIndex:o[o.length-1].segmentIndex,partIndex:o[o.length-1].partIndex,startTime:e}},Uoe=function(n){return n.excludeUntil&&n.excludeUntil>Date.now()},_9=function(n){return n.excludeUntil&&n.excludeUntil===1/0},ND=function(n){const e=Uoe(n);return!n.disabled&&!e},wWe=function(n){return n.disabled},TWe=function(n){for(let e=0;e<n.segments.length;e++)if(n.segments[e].key)return!0;return!1},zoe=function(n,e){return e.attributes&&e.attributes[n]},CWe=function(n,e,t,i=0){return zoe("BANDWIDTH",t)?(n*t.attributes.BANDWIDTH-i*8)/e:NaN},P8=(n,e)=>{if(n.playlists.length===1)return!0;const t=e.attributes.BANDWIDTH||Number.MAX_VALUE;return n.playlists.filter(i=>ND(i)?(i.attributes.BANDWIDTH||0)<t:!1).length===0},b9=(n,e)=>!n&&!e||!n&&e||n&&!e?!1:!!(n===e||n.id&&e.id&&n.id===e.id||n.resolvedUri&&e.resolvedUri&&n.resolvedUri===e.resolvedUri||n.uri&&e.uri&&n.uri===e.uri),LW=function(n,e){const t=n&&n.mediaGroups&&n.mediaGroups.AUDIO||{};let i=!1;for(const r in t){for(const s in t[r])if(i=e(t[r][s]),i)break;if(i)break}return!!i},PT=n=>{if(!n||!n.playlists||!n.playlists.length)return LW(n,t=>t.playlists&&t.playlists.length||t.uri);for(let e=0;e<n.playlists.length;e++){const t=n.playlists[e],i=t.attributes&&t.attributes.CODECS;if(!(i&&i.split(",").every(s=>Sse(s))||LW(n,s=>b9(t,s))))return!1}return!0};var yl={liveEdgeDelay:Ooe,duration:Boe,seekable:SWe,getMediaInfoForTime:xWe,isEnabled:ND,isDisabled:wWe,isExcluded:Uoe,isIncompatible:_9,playlistEnd:Foe,isAes:TWe,hasAttribute:zoe,estimateSegmentRequestTime:CWe,isLowestEnabledRendition:P8,isAudioOnly:PT,playlistMatch:b9,segmentDurationWithParts:y9};const{log:Hoe}=$t,z1=(n,e)=>`${n}-${e}`,Voe=(n,e,t)=>`placeholder-uri-${n}-${e}-${t}`,AWe=({onwarn:n,oninfo:e,manifestString:t,customTagParsers:i=[],customTagMappers:r=[],llhls:s})=>{const a=new VHe;n&&a.on("warn",n),e&&a.on("info",e),i.forEach(u=>a.addParser(u)),r.forEach(u=>a.addTagMapper(u)),a.push(t),a.end();const o=a.manifest;if(s||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(u){o.hasOwnProperty(u)&&delete o[u]}),o.segments&&o.segments.forEach(function(u){["parts","preloadHints"].forEach(function(c){u.hasOwnProperty(c)&&delete u[c]})})),!o.targetDuration){let u=10;o.segments&&o.segments.length&&(u=o.segments.reduce((c,d)=>Math.max(c,d.duration),0)),n&&n({message:`manifest has no targetDuration defaulting to ${u}`}),o.targetDuration=u}const l=koe(o);if(l.length&&!o.partTargetDuration){const u=l.reduce((c,d)=>Math.max(c,d.duration),0);n&&(n({message:`manifest has no partTargetDuration defaulting to ${u}`}),Hoe.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),o.partTargetDuration=u}return o},Cb=(n,e)=>{n.mediaGroups&&["AUDIO","SUBTITLES"].forEach(t=>{if(n.mediaGroups[t])for(const i in n.mediaGroups[t])for(const r in n.mediaGroups[t][i]){const s=n.mediaGroups[t][i][r];e(s,t,i,r)}})},$oe=({playlist:n,uri:e,id:t})=>{n.id=t,n.playlistErrors_=0,e&&(n.uri=e),n.attributes=n.attributes||{}},EWe=n=>{let e=n.playlists.length;for(;e--;){const t=n.playlists[e];$oe({playlist:t,id:z1(e,t.uri)}),t.resolvedUri=gl(n.uri,t.uri),n.playlists[t.id]=t,n.playlists[t.uri]=t,t.attributes.BANDWIDTH||Hoe.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},MWe=n=>{Cb(n,e=>{e.uri&&(e.resolvedUri=gl(n.uri,e.uri))})},IWe=(n,e)=>{const t=z1(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:ht.location.href,resolvedUri:ht.location.href,playlists:[{uri:e,id:t,resolvedUri:e,attributes:{}}]};return i.playlists[t]=i.playlists[0],i.playlists[e]=i.playlists[0],i},Goe=(n,e,t=Voe)=>{n.uri=e;for(let r=0;r<n.playlists.length;r++)if(!n.playlists[r].uri){const s=`placeholder-uri-${r}`;n.playlists[r].uri=s}const i=PT(n);Cb(n,(r,s,a,o)=>{if(!r.playlists||!r.playlists.length){if(i&&s==="AUDIO"&&!r.uri)for(let l=0;l<n.playlists.length;l++){const u=n.playlists[l];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===a)return}r.playlists=[Ds({},r)]}r.playlists.forEach(function(l,u){const c=t(s,a,o,l),d=z1(u,c);l.uri?l.resolvedUri=l.resolvedUri||gl(n.uri,l.uri):(l.uri=u===0?c:d,l.resolvedUri=l.uri),l.id=l.id||d,l.attributes=l.attributes||{},n.playlists[l.id]=l,n.playlists[l.uri]=l})}),EWe(n),MWe(n)};class OW{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(e=[]){if(this.offset_!==null||!e.length)return;const[t]=e;t.programDateTime!==void 0&&(this.offset_=t.programDateTime/1e3)}setPendingDateRanges(e=[]){if(!e.length)return;const[t]=e,i=t.startDate.getTime();this.trimProcessedDateRanges_(i),this.pendingDateRanges_=e.reduce((r,s)=>(r.set(s.id,s),r),new Map)}processDateRange(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}getDateRangesToProcess(){if(this.offset_===null)return[];const e={},t=[];this.pendingDateRanges_.forEach((i,r)=>{if(!this.processedDateRanges_.has(r)&&(i.startTime=i.startDate.getTime()/1e3-this.offset_,i.processDateRange=()=>this.processDateRange(i),t.push(i),!!i.class))if(e[i.class]){const s=e[i.class].push(i);i.classListIndex=s-1}else e[i.class]=[i],i.classListIndex=0});for(const i of t){const r=e[i.class]||[];i.endDate?i.endTime=i.endDate.getTime()/1e3-this.offset_:i.endOnNext&&r[i.classListIndex+1]?i.endTime=r[i.classListIndex+1].startTime:i.duration?i.endTime=i.startTime+i.duration:i.plannedDuration?i.endTime=i.startTime+i.plannedDuration:i.endTime=i.startTime}return t}trimProcessedDateRanges_(e){new Map(this.processedDateRanges_).forEach((i,r)=>{i.startDate.getTime()<e&&this.processedDateRanges_.delete(r)})}}const Woe=22,Tg=({requestType:n,request:e,error:t,parseFailure:i})=>{const r=e.status<200||e.status>299,s=e.status>=400&&e.status<=499,a={uri:e.uri,requestType:n},o=r&&!s||i;if(t&&s)a.error=Ds({},t),a.errorType=$t.Error.NetworkRequestFailed;else if(e.aborted)a.errorType=$t.Error.NetworkRequestAborted;else if(e.timedout)a.erroType=$t.Error.NetworkRequestTimeout;else if(o){const l=i?$t.Error.NetworkBodyParserFailed:$t.Error.NetworkBadStatus;a.errorType=l,a.status=e.status,a.headers=e.headers}return a},{EventTarget:DWe}=$t,RWe=(n,e)=>{if(e.endList||!e.serverControl)return n;const t={};if(e.serverControl.canBlockReload){const{preloadSegment:i}=e;let r=e.mediaSequence+e.segments.length;if(i){const s=i.parts||[],a=Loe(e)-1;a>-1&&a!==s.length-1&&(t._HLS_part=a),(a>-1||s.length)&&r--}t._HLS_msn=r}if(e.serverControl&&e.serverControl.canSkipUntil&&(t._HLS_skip=e.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(t).length){const i=new ht.URL(n);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(r){t.hasOwnProperty(r)&&i.searchParams.set(r,t[r])}),n=i.toString()}return n},PWe=(n,e)=>{if(!n)return e;const t=Fr(n,e);if(n.preloadHints&&!e.preloadHints&&delete t.preloadHints,n.parts&&!e.parts)delete t.parts;else if(n.parts&&e.parts)for(let i=0;i<e.parts.length;i++)n.parts&&n.parts[i]&&(t.parts[i]=Fr(n.parts[i],e.parts[i]));return!n.skipped&&e.skipped&&(t.skipped=!1),n.preload&&!e.preload&&(t.preload=!1),t},kWe=(n,e,t)=>{const i=n.slice(),r=e.slice();t=t||0;const s=[];let a;for(let o=0;o<r.length;o++){const l=i[o+t],u=r[o];l?(a=l.map||a,s.push(PWe(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s},qoe=(n,e)=>{!n.resolvedUri&&n.uri&&(n.resolvedUri=gl(e,n.uri)),n.key&&!n.key.resolvedUri&&(n.key.resolvedUri=gl(e,n.key.uri)),n.map&&!n.map.resolvedUri&&(n.map.resolvedUri=gl(e,n.map.uri)),n.map&&n.map.key&&!n.map.key.resolvedUri&&(n.map.key.resolvedUri=gl(e,n.map.key.uri)),n.parts&&n.parts.length&&n.parts.forEach(t=>{t.resolvedUri||(t.resolvedUri=gl(e,t.uri))}),n.preloadHints&&n.preloadHints.length&&n.preloadHints.forEach(t=>{t.resolvedUri||(t.resolvedUri=gl(e,t.uri))})},joe=function(n){const e=n.segments||[],t=n.preloadSegment;if(t&&t.parts&&t.parts.length){if(t.preloadHints){for(let i=0;i<t.preloadHints.length;i++)if(t.preloadHints[i].type==="MAP")return e}t.duration=n.targetDuration,t.preload=!0,e.push(t)}return e},Koe=(n,e)=>n===e||n.segments&&e.segments&&n.segments.length===e.segments.length&&n.endList===e.endList&&n.mediaSequence===e.mediaSequence&&n.preloadSegment===e.preloadSegment,k8=(n,e,t=Koe)=>{const i=Fr(n,{}),r=i.playlists[e.id];if(!r||t(r,e))return null;e.segments=joe(e);const s=Fr(r,e);if(s.preloadSegment&&!e.preloadSegment&&delete s.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(let a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}s.segments=kWe(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}s.segments.forEach(a=>{qoe(a,s.resolvedUri)});for(let a=0;a<i.playlists.length;a++)i.playlists[a].id===e.id&&(i.playlists[a]=s);return i.playlists[e.id]=s,i.playlists[e.uri]=s,Cb(n,(a,o,l,u)=>{if(a.playlists)for(let c=0;c<a.playlists.length;c++)e.id===a.playlists[c].id&&(a.playlists[c]=s)}),i},L8=(n,e)=>{const t=n.segments||[],i=t[t.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],s=r&&r.duration||i&&i.duration;return e&&s?s*1e3:(n.partTargetDuration||n.targetDuration||10)*500},NW=(n,e,t)=>{if(!n)return;const i=[];return n.forEach(r=>{if(!r.attributes)return;const{BANDWIDTH:s,RESOLUTION:a,CODECS:o}=r.attributes;i.push({id:r.id,bandwidth:s,resolution:a,codecs:o})}),{type:e,isLive:t,renditions:i}};class h1 extends DWe{constructor(e,t,i={}){if(super(),!e)throw new Error("A non-empty playlist URL or object is required");this.logger_=pc("PlaylistLoader");const{withCredentials:r=!1}=i;this.src=e,this.vhs_=t,this.withCredentials=r,this.addDateRangesToTextTrack_=i.addDateRangesToTextTrack;const s=t.options_;this.customTagParsers=s&&s.customTagParsers||[],this.customTagMappers=s&&s.customTagMappers||[],this.llhls=s&&s.llhls,this.dateRangesStorage_=new OW,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const e=this.media();if(!e)return;this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);const t=this.dateRangesStorage_.getDateRangesToProcess();!t.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(t)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const e=this.media();let t=gl(this.main.uri,e.uri);this.llhls&&(t=RWe(t,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:t,withCredentials:this.withCredentials,requestType:"hls-playlist"},(i,r)=>{if(this.request){if(i)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(e,t,i){const{uri:r,id:s}=t;this.request=null,i&&(this.state=i),this.error={playlist:this.main.playlists[s],status:e.status,message:`HLS playlist request error at URL: ${r}.`,responseText:e.responseText,code:e.status>=500?4:2,metadata:Tg({requestType:e.requestType,request:e,error:e.error})},this.trigger("error")}parseManifest_({url:e,manifestString:t}){try{return AWe({onwarn:({message:i})=>this.logger_(`m3u8-parser warn for ${e}: ${i}`),oninfo:({message:i})=>this.logger_(`m3u8-parser info for ${e}: ${i}`),manifestString:t,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}catch(i){this.error=i,this.error.metadata={errorType:$t.Error.StreamingHlsPlaylistParserError,error:i}}}haveMetadata({playlistString:e,playlistObject:t,url:i,id:r}){this.request=null,this.state="HAVE_METADATA";const s={playlistInfo:{type:"media",uri:i}};this.trigger({type:"playlistparsestart",metadata:s});const a=t||this.parseManifest_({url:i,manifestString:e});a.lastRequest=Date.now(),$oe({playlist:a,uri:i,id:r});const o=k8(this.main,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.main=o,this.media_=this.main.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(L8(this.media(),!!o)),s.parsedPlaylist=NW(this.main.playlists,s.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:s}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),ht.clearTimeout(this.mediaUpdateTimeout),ht.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new OW,this.off()}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e,t){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.main.playlists[e]}if(ht.clearTimeout(this.finalRenditionTimeout),t){const o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=ht.setTimeout(this.media.bind(this,e,!1),o);return}const i=this.state,r=!this.media_||e.id!==this.media_.id,s=this.main.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,r&&(this.trigger("mediachanging"),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(L8(e,!0)),!r)return;if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e;const a={playlistInfo:{type:"media",uri:e.uri}};this.trigger({type:"playlistrequeststart",metadata:a}),this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(o,l)=>{if(this.request){if(e.lastRequest=Date.now(),e.resolvedUri=h4(e.resolvedUri,l),o)return this.playlistRequestError(this.request,e,i);this.trigger({type:"playlistrequestcomplete",metadata:a}),this.haveMetadata({playlistString:l.responseText,url:e.uri,id:e.id}),i==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(e){this.mediaUpdateTimeout&&(ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const t=this.media();if(e){const i=t?(t.partTargetDuration||t.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=ht.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},i);return}if(!this.started){this.start();return}t&&!t.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(e){this.mediaUpdateTimeout&&(ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=ht.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(e)},e))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=ht.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const e={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:e}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(t,i)=>{if(!this.request)return;if(this.request=null,t)return this.error={status:i.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:i.responseText,code:2,metadata:Tg({requestType:i.requestType,request:i,error:t})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:e}),this.src=h4(this.src,i),this.trigger({type:"playlistparsestart",metadata:e});const r=this.parseManifest_({manifestString:i.responseText,url:this.src});e.parsedPlaylist=NW(r.playlists,e.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:e}),this.setupInitialPlaylist(r)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(e){if(this.state="HAVE_MAIN_MANIFEST",e.playlists){this.main=e,Goe(this.main,this.srcUri()),e.playlists.forEach(i=>{i.segments=joe(i),i.segments.forEach(r=>{qoe(r,i.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const t=this.srcUri()||ht.location.href;this.main=IWe(e,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(e,t){const i=this.main,r=e.ID;let s=i.playlists.length;for(;s--;){const a=i.playlists[s];if(a.attributes["PATHWAY-ID"]===r){const o=a.resolvedUri,l=a.id;if(t){const u=this.createCloneURI_(a.resolvedUri,e),c=z1(r,u),d=this.createCloneAttributes_(r,a.attributes),f=this.createClonePlaylist_(a,c,e,d);i.playlists[s]=f,i.playlists[c]=f,i.playlists[u]=f}else i.playlists.splice(s,1);delete i.playlists[l],delete i.playlists[o]}}this.updateOrDeleteCloneMedia(e,t)}updateOrDeleteCloneMedia(e,t){const i=this.main,r=e.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!i.mediaGroups[s]||!i.mediaGroups[s][r])){for(const a in i.mediaGroups[s])if(a===r){for(const o in i.mediaGroups[s][a])i.mediaGroups[s][a][o].playlists.forEach((u,c)=>{const d=i.playlists[u.id],f=d.id,h=d.resolvedUri;delete i.playlists[f],delete i.playlists[h]});delete i.mediaGroups[s][a]}}}),t&&this.createClonedMediaGroups_(e)}addClonePathway(e,t={}){const i=this.main,r=i.playlists.length,s=this.createCloneURI_(t.resolvedUri,e),a=z1(e.ID,s),o=this.createCloneAttributes_(e.ID,t.attributes),l=this.createClonePlaylist_(t,a,e,o);i.playlists[r]=l,i.playlists[a]=l,i.playlists[s]=l,this.createClonedMediaGroups_(e)}createClonedMediaGroups_(e){const t=e.ID,i=e["BASE-ID"],r=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(s=>{if(!(!r.mediaGroups[s]||r.mediaGroups[s][t]))for(const a in r.mediaGroups[s]){if(a===i)r.mediaGroups[s][t]={};else continue;for(const o in r.mediaGroups[s][a]){const l=r.mediaGroups[s][a][o];r.mediaGroups[s][t][o]=Ds({},l);const u=r.mediaGroups[s][t][o],c=this.createCloneURI_(l.resolvedUri,e);u.resolvedUri=c,u.uri=c,u.playlists=[],l.playlists.forEach((d,f)=>{const h=r.playlists[d.id],p=Voe(s,t,o),m=z1(t,p);if(h&&!r.playlists[m]){const g=this.createClonePlaylist_(h,m,e),v=g.resolvedUri;r.playlists[m]=g,r.playlists[v]=g}u.playlists[f]=this.createClonePlaylist_(d,m,e)})}}})}createClonePlaylist_(e,t,i,r){const s=this.createCloneURI_(e.resolvedUri,i),a={resolvedUri:s,uri:s,id:t};return e.segments&&(a.segments=[]),r&&(a.attributes=r),Fr(e,a)}createCloneURI_(e,t){const i=new URL(e);i.hostname=t["URI-REPLACEMENT"].HOST;const r=t["URI-REPLACEMENT"].PARAMS;for(const s of Object.keys(r))i.searchParams.set(s,r[s]);return i.href}createCloneAttributes_(e,t){const i={"PATHWAY-ID":e};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(r=>{t[r]&&(i[r]=e)}),i}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes.keyId;r&&t.add(r.toLowerCase())}return t}}}const O8=function(n,e,t,i){const r=n.responseType==="arraybuffer"?n.response:n.responseText;!e&&r&&(n.responseTime=Date.now(),n.roundTripTime=n.responseTime-n.requestTime,n.bytesReceived=r.byteLength||r.length,n.bandwidth||(n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3))),t.headers&&(n.responseHeaders=t.headers),e&&e.code==="ETIMEDOUT"&&(n.timedout=!0),!e&&!n.aborted&&t.statusCode!==200&&t.statusCode!==206&&t.statusCode!==0&&(e=new Error("XHR Failed with a response of: "+(n&&(r||n.responseText)))),i(e,n)},LWe=(n,e)=>{if(!n||!n.size)return;let t=e;return n.forEach(i=>{t=i(t)}),t},OWe=(n,e,t,i)=>{!n||!n.size||n.forEach(r=>{r(e,t,i)})},Xoe=function(){const n=function e(t,i){t=Fr({timeout:45e3},t);const r=e.beforeRequest||$t.Vhs.xhr.beforeRequest,s=e._requestCallbackSet||$t.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||$t.Vhs.xhr._responseCallbackSet;r&&typeof r=="function"&&($t.log.warn("beforeRequest is deprecated, use onRequest instead."),s.add(r));const o=$t.Vhs.xhr.original===!0?$t.xhr:$t.Vhs.xhr,l=LWe(s,t);s.delete(r);const u=o(l||t,function(d,f){return OWe(a,u,d,f),O8(u,d,f,i)}),c=u.abort;return u.abort=function(){return u.aborted=!0,c.apply(u,arguments)},u.uri=t.uri,u.requestType=t.requestType,u.requestTime=Date.now(),u};return n.original=!0,n},NWe=function(n){let e;const t=n.offset;return typeof n.offset=="bigint"||typeof n.length=="bigint"?e=ht.BigInt(n.offset)+ht.BigInt(n.length)-ht.BigInt(1):e=n.offset+n.length-1,"bytes="+t+"-"+e},N8=function(n){const e={};return n.byterange&&(e.Range=NWe(n.byterange)),e},BWe=function(n,e){return n.start(e)+"-"+n.end(e)},FWe=function(n,e){const t=n.toString(16);return"00".substring(0,2-t.length)+t+(e%2?" ":"")},UWe=function(n){return n>=32&&n<126?String.fromCharCode(n):"."},Yoe=function(n){const e={};return Object.keys(n).forEach(t=>{const i=n[t];wse(i)?e[t]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[t]=i}),e},p4=function(n){const e=n.byterange||{length:1/0,offset:0};return[e.length,e.offset,n.resolvedUri].join(",")},Qoe=function(n){return n.resolvedUri},Zoe=n=>{const e=Array.prototype.slice.call(n),t=16;let i="",r,s;for(let a=0;a<e.length/t;a++)r=e.slice(a*t,a*t+t).map(FWe).join(""),s=e.slice(a*t,a*t+t).map(UWe).join(""),i+=r+" "+s+`
`;return i},zWe=({bytes:n})=>Zoe(n),HWe=n=>{let e="",t;for(t=0;t<n.length;t++)e+=BWe(n,t)+" ";return e};var VWe=Object.freeze({__proto__:null,createTransferableMessage:Yoe,initSegmentId:p4,segmentKeyId:Qoe,hexDump:Zoe,tagDump:zWe,textRanges:HWe});const Joe=.25,$We=(n,e)=>{if(!e.dateTimeObject)return null;const t=e.videoTimingInfo.transmuxerPrependedSeconds,r=e.videoTimingInfo.transmuxedPresentationStart+t,s=n-r;return new Date(e.dateTimeObject.getTime()+s*1e3)},GWe=n=>n.transmuxedPresentationEnd-n.transmuxedPresentationStart-n.transmuxerPrependedSeconds,WWe=(n,e)=>{let t;try{t=new Date(n)}catch{return null}if(!e||!e.segments||e.segments.length===0)return null;let i=e.segments[0];if(t<new Date(i.dateTimeObject))return null;for(let l=0;l<e.segments.length-1;l++){i=e.segments[l];const u=new Date(e.segments[l+1].dateTimeObject);if(t<u)break}const r=e.segments[e.segments.length-1],s=r.dateTimeObject,a=r.videoTimingInfo?GWe(r.videoTimingInfo):r.duration+r.duration*Joe,o=new Date(s.getTime()+a*1e3);return t>o?null:(t>new Date(s)&&(i=r),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:yl.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},qWe=(n,e)=>{if(!e||!e.segments||e.segments.length===0)return null;let t=0,i;for(let s=0;s<e.segments.length&&(i=e.segments[s],t=i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:t+i.duration,!(n<=t));s++);const r=e.segments[e.segments.length-1];if(r.videoTimingInfo&&r.videoTimingInfo.transmuxedPresentationEnd<n)return null;if(n>t){if(n>t+r.duration*Joe)return null;i=r}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:t-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},jWe=(n,e)=>{let t,i;try{t=new Date(n),i=new Date(e)}catch{}const r=t.getTime();return(i.getTime()-r)/1e3},KWe=n=>{if(!n.segments||n.segments.length===0)return!1;for(let e=0;e<n.segments.length;e++)if(!n.segments[e].dateTimeObject)return!1;return!0},XWe=({playlist:n,time:e=void 0,callback:t})=>{if(!t)throw new Error("getProgramTime: callback must be provided");if(!n||e===void 0)return t({message:"getProgramTime: playlist and time must be provided"});const i=qWe(e,n);if(!i)return t({message:"valid programTime was not found"});if(i.type==="estimate")return t({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:i.estimatedStart});const r={mediaSeconds:e},s=$We(e,i.segment);return s&&(r.programDateTime=s.toISOString()),t(null,r)},ele=({programTime:n,playlist:e,retryCount:t=2,seekTo:i,pauseAfterSeek:r=!0,tech:s,callback:a})=>{if(!a)throw new Error("seekToProgramTime: callback must be provided");if(typeof n>"u"||!e||!i)return a({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!e.endList&&!s.hasStarted_)return a({message:"player must be playing a live stream to start buffering"});if(!KWe(e))return a({message:"programDateTime tags must be provided in the manifest "+e.resolvedUri});const o=WWe(n,e);if(!o)return a({message:`${n} was not found in the stream`});const l=o.segment,u=jWe(l.dateTimeObject,n);if(o.type==="estimate"){if(t===0)return a({message:`${n} is not buffered yet. Try again`});i(o.estimatedStart+u),s.one("seeked",()=>{ele({programTime:n,playlist:e,retryCount:t-1,seekTo:i,pauseAfterSeek:r,tech:s,callback:a})});return}const c=l.start+u,d=()=>a(null,s.currentTime());s.one("seeked",d),r&&s.pause(),i(c)},jP=(n,e)=>{if(n.readyState===4)return e()},YWe=(n,e,t,i)=>{let r=[],s,a=!1;const o=function(d,f,h,p){return f.abort(),a=!0,t(d,f,h,p)},l=function(d,f){if(a)return;if(d)return d.metadata=Tg({requestType:i,request:f,error:d}),o(d,f,"",r);const h=f.responseText.substring(r&&r.byteLength||0,f.responseText.length);if(r=eVe(r,Tse(h,!0)),s=s||Ix(r),r.length<10||s&&r.length<s+2)return jP(f,()=>o(d,f,"",r));const p=H7(r);return p==="ts"&&r.length<188?jP(f,()=>o(d,f,"",r)):!p&&r.length<376?jP(f,()=>o(d,f,"",r)):o(null,f,p,r)},c=e({uri:n,beforeSend(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function({total:f,loaded:h}){return O8(d,null,{statusCode:d.status},l)})}},function(d,f){return O8(c,d,f,l)});return c},{EventTarget:QWe}=$t,BW=function(n,e){if(!Koe(n,e)||n.sidx&&e.sidx&&(n.sidx.offset!==e.sidx.offset||n.sidx.length!==e.sidx.length))return!1;if(!n.sidx&&e.sidx||n.sidx&&!e.sidx||n.segments&&!e.segments||!n.segments&&e.segments)return!1;if(!n.segments&&!e.segments)return!0;for(let t=0;t<n.segments.length;t++){const i=n.segments[t],r=e.segments[t];if(i.uri!==r.uri)return!1;if(!i.byterange&&!r.byterange)continue;const s=i.byterange,a=r.byterange;if(s&&!a||!s&&a||s.offset!==a.offset||s.length!==a.length)return!1}return!0},ZWe=(n,e,t,i)=>{const r=i.attributes.NAME||t;return`placeholder-uri-${n}-${e}-${r}`},JWe=({mainXml:n,srcUrl:e,clientOffset:t,sidxMapping:i,previousManifest:r})=>{const s=S$e(n,{manifestUri:e,clientOffset:t,sidxMapping:i,previousManifest:r});return Goe(s,e,ZWe),s},eqe=(n,e)=>{Cb(n,(t,i,r,s)=>{(!e.mediaGroups[i][r]||!(s in e.mediaGroups[i][r]))&&delete n.mediaGroups[i][r][s]})},tqe=(n,e,t)=>{let i=!0,r=Fr(n,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod,timelineStarts:e.timelineStarts});for(let s=0;s<e.playlists.length;s++){const a=e.playlists[s];if(a.sidx){const l=vD(a.sidx);t&&t[l]&&t[l].sidx&&F7(a,t[l].sidx,a.sidx.resolvedUri)}const o=k8(r,a,BW);o&&(r=o,i=!1)}return Cb(e,(s,a,o,l)=>{if(s.playlists&&s.playlists.length){const u=s.playlists[0].id,c=k8(r,s.playlists[0],BW);c&&(r=c,l in r.mediaGroups[a][o]||(r.mediaGroups[a][o][l]=s),r.mediaGroups[a][o][l].playlists[0]=r.playlists[u],i=!1)}}),eqe(r,e),e.minimumUpdatePeriod!==n.minimumUpdatePeriod&&(i=!1),i?null:r},nqe=(n,e)=>(!n.map&&!e.map||!!(n.map&&e.map&&n.map.byterange.offset===e.map.byterange.offset&&n.map.byterange.length===e.map.byterange.length))&&n.uri===e.uri&&n.byterange.offset===e.byterange.offset&&n.byterange.length===e.byterange.length,FW=(n,e)=>{const t={};for(const i in n){const s=n[i].sidx;if(s){const a=vD(s);if(!e[a])break;const o=e[a].sidxInfo;nqe(o,s)&&(t[a]=e[a])}}return t},iqe=(n,e)=>{let i=FW(n.playlists,e);return Cb(n,(r,s,a,o)=>{if(r.playlists&&r.playlists.length){const l=r.playlists;i=Fr(i,FW(l,e))}}),i};class B8 extends QWe{constructor(e,t,i={},r){super(),this.isPaused_=!0,this.mainPlaylistLoader_=r||this,r||(this.isMain_=!0);const{withCredentials:s=!1}=i;if(this.vhs_=t,this.withCredentials=s,this.addMetadataToTextTrack=i.addMetadataToTextTrack,!e)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=pc("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=e,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=e}get isPaused(){return this.isPaused_}requestErrored_(e,t,i){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2,metadata:e.metadata},i&&(this.state=i),this.trigger("error"),!0}addSidxSegments_(e,t,i){const r=e.sidx&&vD(e.sidx);if(!e.sidx||!r||this.mainPlaylistLoader_.sidxMapping_[r]){ht.clearTimeout(this.mediaRequest_),this.mediaRequest_=ht.setTimeout(()=>i(!1),0);return}const s=h4(e.sidx.resolvedUri),a=(l,u)=>{if(this.requestErrored_(l,u,t))return;const c=this.mainPlaylistLoader_.sidxMapping_,{requestType:d}=u;let f;try{f=E$e(Si(u.response).subarray(8))}catch(h){h.metadata=Tg({requestType:d,request:u,parseFailure:!0}),this.requestErrored_(h,u,t);return}return c[r]={sidxInfo:e.sidx,sidx:f},F7(e,f,e.sidx.resolvedUri),i(!0)},o="dash-sidx";this.request=YWe(s,this.vhs_.xhr,(l,u,c,d)=>{if(l)return a(l,u);if(!c||c!=="mp4"){const p=c||"unknown";return a({status:u.status,message:`Unsupported ${p} container type for sidx segment at URL: ${s}`,response:"",playlist:e,internal:!0,playlistExclusionDuration:1/0,code:2},u)}const{offset:f,length:h}=e.sidx.byterange;if(d.length>=h+f)return a(l,{response:d.subarray(f,f+h),status:u.status,uri:u.uri});this.request=this.vhs_.xhr({uri:s,responseType:"arraybuffer",requestType:"dash-sidx",headers:N8({byterange:e.sidx.byterange})},a)},o)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},ht.clearTimeout(this.minimumUpdatePeriodTimeout_),ht.clearTimeout(this.mediaRequest_),ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}media(e){if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const t=this.state;if(typeof e=="string"){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}const i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,i&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,t,r=>{this.haveMetadata({startingState:t,playlist:e})}))}haveMetadata({startingState:e,playlist:t}){this.state="HAVE_METADATA",this.loadedPlaylists_[t.id]=t,ht.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(t.id),e==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(ht.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(e){this.isPaused_=!1,ht.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const t=this.media();if(e){const i=t?t.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=ht.setTimeout(()=>this.load(),i);return}if(!this.started){this.start();return}t&&!t.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){ht.clearTimeout(this.mediaRequest_),this.mediaRequest_=ht.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((e,t)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(e){const t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(i,r)=>{if(i){const{requestType:a}=r;i.metadata=Tg({requestType:a,request:r,error:i})}if(this.requestErrored_(i,r)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:t});const s=r.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?this.mainLoaded_=Date.parse(r.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=h4(this.mainPlaylistLoader_.srcUrl,r),s){this.handleMain_(),this.syncClientServerClock_(()=>e(r,s));return}return e(r,s)})}syncClientServerClock_(e){const t=x$e(this.mainPlaylistLoader_.mainXml_);if(t===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e();if(t.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=t.value-Date.now(),e();this.request=this.vhs_.xhr({uri:gl(this.mainPlaylistLoader_.srcUrl,t.value),method:t.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(i,r)=>{if(!this.request)return;if(i){const{requestType:a}=r;return this.error.metadata=Tg({requestType:a,request:r,error:i}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()}let s;t.method==="HEAD"?!r.responseHeaders||!r.responseHeaders.date?s=this.mainLoaded_:s=Date.parse(r.responseHeaders.date):s=Date.parse(r.responseText),this.mainPlaylistLoader_.clientOffset_=s-Date.now(),e()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){ht.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const e=this.mainPlaylistLoader_.main,t={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:t});let i;try{i=JWe({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:e})}catch(s){this.error=s,this.error.metadata={errorType:$t.Error.StreamingDashManifestParserError,error:s},this.trigger("error")}e&&(i=tqe(e,i,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=i||e;const r=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(r&&r!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=r),(!e||i&&i.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(i),i){const{duration:s,endList:a}=i,o=[];i.playlists.forEach(u=>{o.push({id:u.id,bandwidth:u.attributes.BANDWIDTH,resolution:u.attributes.RESOLUTION,codecs:u.attributes.CODECS})});const l={duration:s,isLive:!a,renditions:o};t.parsedManifest=l,this.trigger({type:"manifestparsecomplete",metadata:t})}return!!i}updateMinimumUpdatePeriodTimeout_(){const e=this.mainPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(ht.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);let t=e.main&&e.main.minimumUpdatePeriod;if(t===0&&(e.media()?t=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof t!="number"||t<=0){t<0&&this.logger_(`found invalid minimumUpdatePeriod of ${t}, not setting a timeout`);return}this.createMUPTimeout_(t)}createMUPTimeout_(e){const t=this.mainPlaylistLoader_;t.minimumUpdatePeriodTimeout_=ht.setTimeout(()=>{t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)},e)}refreshXml_(){this.requestMain_((e,t)=>{t&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=iqe(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,i=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(e){if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const t=this.mainPlaylistLoader_.main.playlists,i=!this.media_||this.media_!==t[e];if(i?this.media_=t[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const r=()=>{this.media().endList||(this.mediaUpdateTimeout=ht.setTimeout(()=>{this.trigger("mediaupdatetimeout"),r()},L8(this.media(),!!i)))};r()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(e){if(e&&this.mainPlaylistLoader_.main.eventStream){const t=this.mainPlaylistLoader_.main.eventStream.map(i=>({cueTime:i.start,frames:[{data:i.messageData}]}));this.addMetadataToTextTrack("EventStream",t,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(e){if(e.contentProtection){const t=new Set;for(const i in e.contentProtection){const r=e.contentProtection[i].attributes["cenc:default_KID"];r&&t.add(r.replace(/-/g,"").toLowerCase())}return t}}}var Ma={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const rqe=n=>{const e=new Uint8Array(new ArrayBuffer(n.length));for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e.buffer},tle=function(n){return n.on=n.addEventListener,n.off=n.removeEventListener,n},sqe=function(n){try{return URL.createObjectURL(new Blob([n],{type:"application/javascript"}))}catch{const t=new BlobBuilder;return t.append(n),URL.createObjectURL(t.getBlob())}},nle=function(n){return function(){const e=sqe(n),t=tle(new Worker(e));t.objURL=e;const i=t.terminate;return t.on=t.addEventListener,t.off=t.removeEventListener,t.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},t}},ile=function(n){return`var browserWorkerPolyFill = ${tle.toString()};
browserWorkerPolyFill(self);
`+n},rle=function(n){return n.toString().replace(/^function.+?{/,"").slice(0,-1)},aqe=ile(rle(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=function(){this.init=function(){var R={};this.on=function(B,V){R[B]||(R[B]=[]),R[B]=R[B].concat(V)},this.off=function(B,V){var $;return R[B]?($=R[B].indexOf(V),R[B]=R[B].slice(),R[B].splice($,1),$>-1):!1},this.trigger=function(B){var V,$,Z,fe;if(V=R[B],!!V)if(arguments.length===2)for(Z=V.length,$=0;$<Z;++$)V[$].call(this,arguments[1]);else{for(fe=[],$=arguments.length,$=1;$<arguments.length;++$)fe.push(arguments[$]);for(Z=V.length,$=0;$<Z;++$)V[$].apply(this,fe)}},this.dispose=function(){R={}}}};e.prototype.pipe=function(R){return this.on("data",function(B){R.push(B)}),this.on("done",function(B){R.flush(B)}),this.on("partialdone",function(B){R.partialFlush(B)}),this.on("endedtimeline",function(B){R.endTimeline(B)}),this.on("reset",function(B){R.reset(B)}),R},e.prototype.push=function(R){this.trigger("data",R)},e.prototype.flush=function(R){this.trigger("done",R)},e.prototype.partialFlush=function(R){this.trigger("partialdone",R)},e.prototype.endTimeline=function(R){this.trigger("endedtimeline",R)},e.prototype.reset=function(R){this.trigger("reset",R)};var t=e,i=Math.pow(2,32),r=function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V;return B.getBigUint64?(V=B.getBigUint64(0),V<Number.MAX_SAFE_INTEGER?Number(V):V):B.getUint32(0)*i+B.getUint32(4)},s={getUint64:r,MAX_UINT32:i},a=s.MAX_UINT32,o,l,u,c,d,f,h,p,m,g,v,_,y,b,x,w,A,T,C,E,I,k,O,U,z,L,G,H,F,X,te,re,ie,le,ge,pe;(function(){var R;if(O={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(R in O)O.hasOwnProperty(R)&&(O[R]=[R.charCodeAt(0),R.charCodeAt(1),R.charCodeAt(2),R.charCodeAt(3)]);U=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),L=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),z=new Uint8Array([0,0,0,1]),G=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),H=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),F={video:G,audio:H},re=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),te=new Uint8Array([0,0,0,0,0,0,0,0]),ie=new Uint8Array([0,0,0,0,0,0,0,0]),le=ie,ge=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),pe=ie,X=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),o=function(R){var B=[],V=0,$,Z,fe;for($=1;$<arguments.length;$++)B.push(arguments[$]);for($=B.length;$--;)V+=B[$].byteLength;for(Z=new Uint8Array(V+8),fe=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),fe.setUint32(0,Z.byteLength),Z.set(R,4),$=0,V=8;$<B.length;$++)Z.set(B[$],V),V+=B[$].byteLength;return Z},l=function(){return o(O.dinf,o(O.dref,re))},u=function(R){return o(O.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,R.audioobjecttype<<3|R.samplingfrequencyindex>>>1,R.samplingfrequencyindex<<7|R.channelcount<<3,6,1,2]))},c=function(){return o(O.ftyp,U,z,U,L)},w=function(R){return o(O.hdlr,F[R])},d=function(R){return o(O.mdat,R)},x=function(R){var B=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,R.duration>>>24&255,R.duration>>>16&255,R.duration>>>8&255,R.duration&255,85,196,0,0]);return R.samplerate&&(B[12]=R.samplerate>>>24&255,B[13]=R.samplerate>>>16&255,B[14]=R.samplerate>>>8&255,B[15]=R.samplerate&255),o(O.mdhd,B)},b=function(R){return o(O.mdia,x(R),w(R.type),h(R))},f=function(R){return o(O.mfhd,new Uint8Array([0,0,0,0,(R&4278190080)>>24,(R&16711680)>>16,(R&65280)>>8,R&255]))},h=function(R){return o(O.minf,R.type==="video"?o(O.vmhd,X):o(O.smhd,te),l(),T(R))},p=function(R,B){for(var V=[],$=B.length;$--;)V[$]=E(B[$]);return o.apply(null,[O.moof,f(R)].concat(V))},m=function(R){for(var B=R.length,V=[];B--;)V[B]=_(R[B]);return o.apply(null,[O.moov,v(4294967295)].concat(V).concat(g(R)))},g=function(R){for(var B=R.length,V=[];B--;)V[B]=I(R[B]);return o.apply(null,[O.mvex].concat(V))},v=function(R){var B=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(R&4278190080)>>24,(R&16711680)>>16,(R&65280)>>8,R&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(O.mvhd,B)},A=function(R){var B=R.samples||[],V=new Uint8Array(4+B.length),$,Z;for(Z=0;Z<B.length;Z++)$=B[Z].flags,V[Z+4]=$.dependsOn<<4|$.isDependedOn<<2|$.hasRedundancy;return o(O.sdtp,V)},T=function(R){return o(O.stbl,C(R),o(O.stts,pe),o(O.stsc,le),o(O.stsz,ge),o(O.stco,ie))},function(){var R,B;C=function(V){return o(O.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),V.type==="video"?R(V):B(V))},R=function(V){var $=V.sps||[],Z=V.pps||[],fe=[],Ve=[],Qe,lt;for(Qe=0;Qe<$.length;Qe++)fe.push(($[Qe].byteLength&65280)>>>8),fe.push($[Qe].byteLength&255),fe=fe.concat(Array.prototype.slice.call($[Qe]));for(Qe=0;Qe<Z.length;Qe++)Ve.push((Z[Qe].byteLength&65280)>>>8),Ve.push(Z[Qe].byteLength&255),Ve=Ve.concat(Array.prototype.slice.call(Z[Qe]));if(lt=[O.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(V.width&65280)>>8,V.width&255,(V.height&65280)>>8,V.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(O.avcC,new Uint8Array([1,V.profileIdc,V.profileCompatibility,V.levelIdc,255].concat([$.length],fe,[Z.length],Ve))),o(O.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],V.sarRatio){var ct=V.sarRatio[0],It=V.sarRatio[1];lt.push(o(O.pasp,new Uint8Array([(ct&4278190080)>>24,(ct&16711680)>>16,(ct&65280)>>8,ct&255,(It&4278190080)>>24,(It&16711680)>>16,(It&65280)>>8,It&255])))}return o.apply(null,lt)},B=function(V){return o(O.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(V.channelcount&65280)>>8,V.channelcount&255,(V.samplesize&65280)>>8,V.samplesize&255,0,0,0,0,(V.samplerate&65280)>>8,V.samplerate&255,0,0]),u(V))}}(),y=function(R){var B=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(R.id&4278190080)>>24,(R.id&16711680)>>16,(R.id&65280)>>8,R.id&255,0,0,0,0,(R.duration&4278190080)>>24,(R.duration&16711680)>>16,(R.duration&65280)>>8,R.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(R.width&65280)>>8,R.width&255,0,0,(R.height&65280)>>8,R.height&255,0,0]);return o(O.tkhd,B)},E=function(R){var B,V,$,Z,fe,Ve,Qe;return B=o(O.tfhd,new Uint8Array([0,0,0,58,(R.id&4278190080)>>24,(R.id&16711680)>>16,(R.id&65280)>>8,R.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Ve=Math.floor(R.baseMediaDecodeTime/a),Qe=Math.floor(R.baseMediaDecodeTime%a),V=o(O.tfdt,new Uint8Array([1,0,0,0,Ve>>>24&255,Ve>>>16&255,Ve>>>8&255,Ve&255,Qe>>>24&255,Qe>>>16&255,Qe>>>8&255,Qe&255])),fe=32+20+8+16+8+8,R.type==="audio"?($=k(R,fe),o(O.traf,B,V,$)):(Z=A(R),$=k(R,Z.length+fe),o(O.traf,B,V,$,Z))},_=function(R){return R.duration=R.duration||4294967295,o(O.trak,y(R),b(R))},I=function(R){var B=new Uint8Array([0,0,0,0,(R.id&4278190080)>>24,(R.id&16711680)>>16,(R.id&65280)>>8,R.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return R.type!=="video"&&(B[B.length-1]=0),o(O.trex,B)},function(){var R,B,V;V=function($,Z){var fe=0,Ve=0,Qe=0,lt=0;return $.length&&($[0].duration!==void 0&&(fe=1),$[0].size!==void 0&&(Ve=2),$[0].flags!==void 0&&(Qe=4),$[0].compositionTimeOffset!==void 0&&(lt=8)),[0,0,fe|Ve|Qe|lt,1,($.length&4278190080)>>>24,($.length&16711680)>>>16,($.length&65280)>>>8,$.length&255,(Z&4278190080)>>>24,(Z&16711680)>>>16,(Z&65280)>>>8,Z&255]},B=function($,Z){var fe,Ve,Qe,lt,ct,It;for(lt=$.samples||[],Z+=8+12+16*lt.length,Qe=V(lt,Z),Ve=new Uint8Array(Qe.length+lt.length*16),Ve.set(Qe),fe=Qe.length,It=0;It<lt.length;It++)ct=lt[It],Ve[fe++]=(ct.duration&4278190080)>>>24,Ve[fe++]=(ct.duration&16711680)>>>16,Ve[fe++]=(ct.duration&65280)>>>8,Ve[fe++]=ct.duration&255,Ve[fe++]=(ct.size&4278190080)>>>24,Ve[fe++]=(ct.size&16711680)>>>16,Ve[fe++]=(ct.size&65280)>>>8,Ve[fe++]=ct.size&255,Ve[fe++]=ct.flags.isLeading<<2|ct.flags.dependsOn,Ve[fe++]=ct.flags.isDependedOn<<6|ct.flags.hasRedundancy<<4|ct.flags.paddingValue<<1|ct.flags.isNonSyncSample,Ve[fe++]=ct.flags.degradationPriority&61440,Ve[fe++]=ct.flags.degradationPriority&15,Ve[fe++]=(ct.compositionTimeOffset&4278190080)>>>24,Ve[fe++]=(ct.compositionTimeOffset&16711680)>>>16,Ve[fe++]=(ct.compositionTimeOffset&65280)>>>8,Ve[fe++]=ct.compositionTimeOffset&255;return o(O.trun,Ve)},R=function($,Z){var fe,Ve,Qe,lt,ct,It;for(lt=$.samples||[],Z+=8+12+8*lt.length,Qe=V(lt,Z),fe=new Uint8Array(Qe.length+lt.length*8),fe.set(Qe),Ve=Qe.length,It=0;It<lt.length;It++)ct=lt[It],fe[Ve++]=(ct.duration&4278190080)>>>24,fe[Ve++]=(ct.duration&16711680)>>>16,fe[Ve++]=(ct.duration&65280)>>>8,fe[Ve++]=ct.duration&255,fe[Ve++]=(ct.size&4278190080)>>>24,fe[Ve++]=(ct.size&16711680)>>>16,fe[Ve++]=(ct.size&65280)>>>8,fe[Ve++]=ct.size&255;return o(O.trun,fe)},k=function($,Z){return $.type==="audio"?R($,Z):B($,Z)}}();var ye={ftyp:c,mdat:d,moof:p,moov:m,initSegment:function(R){var B=c(),V=m(R),$;return $=new Uint8Array(B.byteLength+V.byteLength),$.set(B),$.set(V,B.byteLength),$}},Oe=function(R){var B,V,$=[],Z=[];for(Z.byteLength=0,Z.nalCount=0,Z.duration=0,$.byteLength=0,B=0;B<R.length;B++)V=R[B],V.nalUnitType==="access_unit_delimiter_rbsp"?($.length&&($.duration=V.dts-$.dts,Z.byteLength+=$.byteLength,Z.nalCount+=$.length,Z.duration+=$.duration,Z.push($)),$=[V],$.byteLength=V.data.byteLength,$.pts=V.pts,$.dts=V.dts):(V.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&($.keyFrame=!0),$.duration=V.dts-$.dts,$.byteLength+=V.data.byteLength,$.push(V));return Z.length&&(!$.duration||$.duration<=0)&&($.duration=Z[Z.length-1].duration),Z.byteLength+=$.byteLength,Z.nalCount+=$.length,Z.duration+=$.duration,Z.push($),Z},Be=function(R){var B,V,$=[],Z=[];for($.byteLength=0,$.nalCount=0,$.duration=0,$.pts=R[0].pts,$.dts=R[0].dts,Z.byteLength=0,Z.nalCount=0,Z.duration=0,Z.pts=R[0].pts,Z.dts=R[0].dts,B=0;B<R.length;B++)V=R[B],V.keyFrame?($.length&&(Z.push($),Z.byteLength+=$.byteLength,Z.nalCount+=$.nalCount,Z.duration+=$.duration),$=[V],$.nalCount=V.length,$.byteLength=V.byteLength,$.pts=V.pts,$.dts=V.dts,$.duration=V.duration):($.duration+=V.duration,$.nalCount+=V.length,$.byteLength+=V.byteLength,$.push(V));return Z.length&&$.duration<=0&&($.duration=Z[Z.length-1].duration),Z.byteLength+=$.byteLength,Z.nalCount+=$.nalCount,Z.duration+=$.duration,Z.push($),Z},Ye=function(R){var B;return!R[0][0].keyFrame&&R.length>1&&(B=R.shift(),R.byteLength-=B.byteLength,R.nalCount-=B.nalCount,R[0][0].dts=B.dts,R[0][0].pts=B.pts,R[0][0].duration+=B.duration),R},Ze=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Q=function(R,B){var V=Ze();return V.dataOffset=B,V.compositionTimeOffset=R.pts-R.dts,V.duration=R.duration,V.size=4*R.length,V.size+=R.byteLength,R.keyFrame&&(V.flags.dependsOn=2,V.flags.isNonSyncSample=0),V},me=function(R,B){var V,$,Z,fe,Ve,Qe=B||0,lt=[];for(V=0;V<R.length;V++)for(fe=R[V],$=0;$<fe.length;$++)Ve=fe[$],Z=Q(Ve,Qe),Qe+=Z.size,lt.push(Z);return lt},ce=function(R){var B,V,$,Z,fe,Ve,Qe=0,lt=R.byteLength,ct=R.nalCount,It=lt+4*ct,Wt=new Uint8Array(It),Mn=new DataView(Wt.buffer);for(B=0;B<R.length;B++)for(Z=R[B],V=0;V<Z.length;V++)for(fe=Z[V],$=0;$<fe.length;$++)Ve=fe[$],Mn.setUint32(Qe,Ve.data.byteLength),Qe+=4,Wt.set(Ve.data,Qe),Qe+=Ve.data.byteLength;return Wt},je=function(R,B){var V,$=B||0,Z=[];return V=Q(R,$),Z.push(V),Z},Fe=function(R){var B,V,$=0,Z=R.byteLength,fe=R.length,Ve=Z+4*fe,Qe=new Uint8Array(Ve),lt=new DataView(Qe.buffer);for(B=0;B<R.length;B++)V=R[B],lt.setUint32($,V.data.byteLength),$+=4,Qe.set(V.data,$),$+=V.data.byteLength;return Qe},nt={groupNalsIntoFrames:Oe,groupFramesIntoGops:Be,extendFirstKeyFrame:Ye,generateSampleTable:me,concatenateNalData:ce,generateSampleTableForFrame:je,concatenateNalDataForFrame:Fe},We=[33,16,5,32,164,27],Ke=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],it=function(R){for(var B=[];R--;)B.push(0);return B},be=function(R){return Object.keys(R).reduce(function(B,V){return B[V]=new Uint8Array(R[V].reduce(function($,Z){return $.concat(Z)},[])),B},{})},K,ne=function(){if(!K){var R={96e3:[We,[227,64],it(154),[56]],88200:[We,[231],it(170),[56]],64e3:[We,[248,192],it(240),[56]],48e3:[We,[255,192],it(268),[55,148,128],it(54),[112]],44100:[We,[255,192],it(268),[55,163,128],it(84),[112]],32e3:[We,[255,192],it(268),[55,234],it(226),[112]],24e3:[We,[255,192],it(268),[55,255,128],it(268),[111,112],it(126),[224]],16e3:[We,[255,192],it(268),[55,255,128],it(268),[111,255],it(269),[223,108],it(195),[1,192]],12e3:[Ke,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,253,128],it(259),[56]],11025:[Ke,it(268),[3,127,248],it(268),[6,255,240],it(268),[13,255,224],it(268),[27,255,192],it(268),[55,175,128],it(108),[112]],8e3:[Ke,it(268),[3,121,16],it(47),[7]]};K=be(R)}return K},Se=9e4,ze,Je,Tt,At,Re,wt,vt;ze=function(R){return R*Se},Je=function(R,B){return R*B},Tt=function(R){return R/Se},At=function(R,B){return R/B},Re=function(R,B){return ze(At(R,B))},wt=function(R,B){return Je(Tt(R),B)},vt=function(R,B,V){return Tt(V?R:R-B)};var q={ONE_SECOND_IN_TS:Se,secondsToVideoTs:ze,secondsToAudioTs:Je,videoTsToSeconds:Tt,audioTsToSeconds:At,audioTsToVideoTs:Re,videoTsToAudioTs:wt,metadataTsToSeconds:vt},xe=ne,ve=q,ke=function(R){var B,V,$=0;for(B=0;B<R.length;B++)V=R[B],$+=V.data.byteLength;return $},we=function(R,B,V,$){var Z,fe=0,Ve=0,Qe=0,lt=0,ct,It,Wt;if(B.length&&(Z=ve.audioTsToVideoTs(R.baseMediaDecodeTime,R.samplerate),fe=Math.ceil(ve.ONE_SECOND_IN_TS/(R.samplerate/1024)),V&&$&&(Ve=Z-Math.max(V,$),Qe=Math.floor(Ve/fe),lt=Qe*fe),!(Qe<1||lt>ve.ONE_SECOND_IN_TS/2))){for(ct=xe()[R.samplerate],ct||(ct=B[0].data),It=0;It<Qe;It++)Wt=B[0],B.splice(0,0,{data:ct,dts:Wt.dts-fe,pts:Wt.pts-fe});return R.baseMediaDecodeTime-=Math.floor(ve.videoTsToAudioTs(lt,R.samplerate)),lt}},De=function(R,B,V){return B.minSegmentDts>=V?R:(B.minSegmentDts=1/0,R.filter(function($){return $.dts>=V?(B.minSegmentDts=Math.min(B.minSegmentDts,$.dts),B.minSegmentPts=B.minSegmentDts,!0):!1}))},xt=function(R){var B,V,$=[];for(B=0;B<R.length;B++)V=R[B],$.push({size:V.data.byteLength,duration:1024});return $},Pe=function(R){var B,V,$=0,Z=new Uint8Array(ke(R));for(B=0;B<R.length;B++)V=R[B],Z.set(V.data,$),$+=V.data.byteLength;return Z},Dt={prefixWithSilence:we,trimAdtsFramesByEarliestDts:De,generateSampleTable:xt,concatenateFrameData:Pe},dt=q.ONE_SECOND_IN_TS,Mt=function(R,B){typeof B.pts=="number"&&(R.timelineStartInfo.pts===void 0&&(R.timelineStartInfo.pts=B.pts),R.minSegmentPts===void 0?R.minSegmentPts=B.pts:R.minSegmentPts=Math.min(R.minSegmentPts,B.pts),R.maxSegmentPts===void 0?R.maxSegmentPts=B.pts:R.maxSegmentPts=Math.max(R.maxSegmentPts,B.pts)),typeof B.dts=="number"&&(R.timelineStartInfo.dts===void 0&&(R.timelineStartInfo.dts=B.dts),R.minSegmentDts===void 0?R.minSegmentDts=B.dts:R.minSegmentDts=Math.min(R.minSegmentDts,B.dts),R.maxSegmentDts===void 0?R.maxSegmentDts=B.dts:R.maxSegmentDts=Math.max(R.maxSegmentDts,B.dts))},jt=function(R){delete R.minSegmentDts,delete R.maxSegmentDts,delete R.minSegmentPts,delete R.maxSegmentPts},Ft=function(R,B){var V,$,Z=R.minSegmentDts;return B||(Z-=R.timelineStartInfo.dts),V=R.timelineStartInfo.baseMediaDecodeTime,V+=Z,V=Math.max(0,V),R.type==="audio"&&($=R.samplerate/dt,V*=$,V=Math.floor(V)),V},Sn={clearDtsInfo:jt,calculateTrackBaseMediaDecodeTime:Ft,collectDtsInfo:Mt},Pn=4,Ti=128,jn=function(R){for(var B=0,V={payloadType:-1,payloadSize:0},$=0,Z=0;B<R.byteLength&&R[B]!==Ti;){for(;R[B]===255;)$+=255,B++;for($+=R[B++];R[B]===255;)Z+=255,B++;if(Z+=R[B++],!V.payload&&$===Pn){var fe=String.fromCharCode(R[B+3],R[B+4],R[B+5],R[B+6]);if(fe==="GA94"){V.payloadType=$,V.payloadSize=Z,V.payload=R.subarray(B,B+Z);break}else V.payload=void 0}B+=Z,$=0,Z=0}return V},dr=function(R){return R.payload[0]!==181||(R.payload[1]<<8|R.payload[2])!==49||String.fromCharCode(R.payload[3],R.payload[4],R.payload[5],R.payload[6])!=="GA94"||R.payload[7]!==3?null:R.payload.subarray(8,R.payload.length-1)},fi=function(R,B){var V=[],$,Z,fe,Ve;if(!(B[0]&64))return V;for(Z=B[0]&31,$=0;$<Z;$++)fe=$*3,Ve={type:B[fe+2]&3,pts:R},B[fe+2]&4&&(Ve.ccData=B[fe+3]<<8|B[fe+4],V.push(Ve));return V},J=function(R){for(var B=R.byteLength,V=[],$=1,Z,fe;$<B-2;)R[$]===0&&R[$+1]===0&&R[$+2]===3?(V.push($+2),$+=2):$++;if(V.length===0)return R;Z=B-V.length,fe=new Uint8Array(Z);var Ve=0;for($=0;$<Z;Ve++,$++)Ve===V[0]&&(Ve++,V.shift()),fe[$]=R[Ve];return fe},ue={parseSei:jn,parseUserData:dr,parseCaptionPackets:fi,discardEmulationPreventionBytes:J,USER_DATA_REGISTERED_ITU_T_T35:Pn},en=t,Ie=ue,de=function(R){R=R||{},de.prototype.init.call(this),this.parse708captions_=typeof R.parse708captions=="boolean"?R.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Le(0,0),new Le(0,1),new Le(1,0),new Le(1,1)],this.parse708captions_&&(this.cc708Stream_=new Xt({captionServices:R.captionServices})),this.reset(),this.ccStreams_.forEach(function(B){B.on("data",this.trigger.bind(this,"data")),B.on("partialdone",this.trigger.bind(this,"partialdone")),B.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};de.prototype=new en,de.prototype.push=function(R){var B,V,$;if(R.nalUnitType==="sei_rbsp"&&(B=Ie.parseSei(R.escapedRBSP),!!B.payload&&B.payloadType===Ie.USER_DATA_REGISTERED_ITU_T_T35&&(V=Ie.parseUserData(B),!!V))){if(R.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(R.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}$=Ie.parseCaptionPackets(R.pts,V),this.captionPackets_=this.captionPackets_.concat($),this.latestDts_!==R.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=R.dts}},de.prototype.flushCCStreams=function(R){this.ccStreams_.forEach(function(B){return R==="flush"?B.flush():B.partialFlush()},this)},de.prototype.flushStream=function(R){if(!this.captionPackets_.length){this.flushCCStreams(R);return}this.captionPackets_.forEach(function(B,V){B.presortIndex=V}),this.captionPackets_.sort(function(B,V){return B.pts===V.pts?B.presortIndex-V.presortIndex:B.pts-V.pts}),this.captionPackets_.forEach(function(B){B.type<2?this.dispatchCea608Packet(B):this.dispatchCea708Packet(B)},this),this.captionPackets_.length=0,this.flushCCStreams(R)},de.prototype.flush=function(){return this.flushStream("flush")},de.prototype.partialFlush=function(){return this.flushStream("partialFlush")},de.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(R){R.reset()})},de.prototype.dispatchCea608Packet=function(R){this.setsTextOrXDSActive(R)?this.activeCea608Channel_[R.type]=null:this.setsChannel1Active(R)?this.activeCea608Channel_[R.type]=0:this.setsChannel2Active(R)&&(this.activeCea608Channel_[R.type]=1),this.activeCea608Channel_[R.type]!==null&&this.ccStreams_[(R.type<<1)+this.activeCea608Channel_[R.type]].push(R)},de.prototype.setsChannel1Active=function(R){return(R.ccData&30720)===4096},de.prototype.setsChannel2Active=function(R){return(R.ccData&30720)===6144},de.prototype.setsTextOrXDSActive=function(R){return(R.ccData&28928)===256||(R.ccData&30974)===4138||(R.ccData&30974)===6186},de.prototype.dispatchCea708Packet=function(R){this.parse708captions_&&this.cc708Stream_.push(R)};var kt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Ct=function(R){var B=kt[R]||R;return R&4096&&R===B?"":String.fromCharCode(B)},Ut=function(R){return 32<=R&&R<=127||160<=R&&R<=255},ut=function(R){this.windowNum=R,this.reset()};ut.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},ut.prototype.getText=function(){return this.rows.join(`
`)},ut.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},ut.prototype.newLine=function(R){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(R),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},ut.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},ut.prototype.addText=function(R){this.rows[this.rowIdx]+=R},ut.prototype.backspace=function(){if(!this.isEmpty()){var R=this.rows[this.rowIdx];this.rows[this.rowIdx]=R.substr(0,R.length-1)}};var Pt=function(R,B,V){this.serviceNum=R,this.text="",this.currentWindow=new ut(-1),this.windows=[],this.stream=V,typeof B=="string"&&this.createTextDecoder(B)};Pt.prototype.init=function(R,B){this.startPts=R;for(var V=0;V<8;V++)this.windows[V]=new ut(V),typeof B=="function"&&(this.windows[V].beforeRowOverflow=B)},Pt.prototype.setCurrentWindow=function(R){this.currentWindow=this.windows[R]},Pt.prototype.createTextDecoder=function(R){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(R)}catch(B){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+R+" encoding. "+B})}};var Xt=function(R){R=R||{},Xt.prototype.init.call(this);var B=this,V=R.captionServices||{},$={},Z;Object.keys(V).forEach(fe=>{Z=V[fe],/^SERVICE/.test(fe)&&($[fe]=Z.encoding)}),this.serviceEncodings=$,this.current708Packet=null,this.services={},this.push=function(fe){fe.type===3?(B.new708Packet(),B.add708Bytes(fe)):(B.current708Packet===null&&B.new708Packet(),B.add708Bytes(fe))}};Xt.prototype=new en,Xt.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Xt.prototype.add708Bytes=function(R){var B=R.ccData,V=B>>>8,$=B&255;this.current708Packet.ptsVals.push(R.pts),this.current708Packet.data.push(V),this.current708Packet.data.push($)},Xt.prototype.push708Packet=function(){var R=this.current708Packet,B=R.data,V=null,$=null,Z=0,fe=B[Z++];for(R.seq=fe>>6,R.sizeCode=fe&63;Z<B.length;Z++)fe=B[Z++],V=fe>>5,$=fe&31,V===7&&$>0&&(fe=B[Z++],V=fe),this.pushServiceBlock(V,Z,$),$>0&&(Z+=$-1)},Xt.prototype.pushServiceBlock=function(R,B,V){var $,Z=B,fe=this.current708Packet.data,Ve=this.services[R];for(Ve||(Ve=this.initService(R,Z));Z<B+V&&Z<fe.length;Z++)$=fe[Z],Ut($)?Z=this.handleText(Z,Ve):$===24?Z=this.multiByteCharacter(Z,Ve):$===16?Z=this.extendedCommands(Z,Ve):128<=$&&$<=135?Z=this.setCurrentWindow(Z,Ve):152<=$&&$<=159?Z=this.defineWindow(Z,Ve):$===136?Z=this.clearWindows(Z,Ve):$===140?Z=this.deleteWindows(Z,Ve):$===137?Z=this.displayWindows(Z,Ve):$===138?Z=this.hideWindows(Z,Ve):$===139?Z=this.toggleWindows(Z,Ve):$===151?Z=this.setWindowAttributes(Z,Ve):$===144?Z=this.setPenAttributes(Z,Ve):$===145?Z=this.setPenColor(Z,Ve):$===146?Z=this.setPenLocation(Z,Ve):$===143?Ve=this.reset(Z,Ve):$===8?Ve.currentWindow.backspace():$===12?Ve.currentWindow.clearText():$===13?Ve.currentWindow.pendingNewLine=!0:$===14?Ve.currentWindow.clearText():$===141&&Z++},Xt.prototype.extendedCommands=function(R,B){var V=this.current708Packet.data,$=V[++R];return Ut($)&&(R=this.handleText(R,B,{isExtended:!0})),R},Xt.prototype.getPts=function(R){return this.current708Packet.ptsVals[Math.floor(R/2)]},Xt.prototype.initService=function(R,B){var $="SERVICE"+R,V=this,$,Z;return $ in this.serviceEncodings&&(Z=this.serviceEncodings[$]),this.services[R]=new Pt(R,Z,V),this.services[R].init(this.getPts(B),function(fe){V.flushDisplayed(fe,V.services[R])}),this.services[R]},Xt.prototype.handleText=function(R,B,V){var $=V&&V.isExtended,Z=V&&V.isMultiByte,fe=this.current708Packet.data,Ve=$?4096:0,Qe=fe[R],lt=fe[R+1],ct=B.currentWindow,It,Wt;function Mn(tn){return tn.map(gi=>("0"+(gi&255).toString(16)).slice(-2)).join("")}if(Z?(Wt=[Qe,lt],R++):Wt=[Qe],B.textDecoder_&&!$)It=B.textDecoder_.decode(new Uint8Array(Wt));else if(Z){const tn=Mn(Wt);It=String.fromCharCode(parseInt(tn,16))}else It=Ct(Ve|Qe);return ct.pendingNewLine&&!ct.isEmpty()&&ct.newLine(this.getPts(R)),ct.pendingNewLine=!1,ct.addText(It),R},Xt.prototype.multiByteCharacter=function(R,B){var V=this.current708Packet.data,$=V[R+1],Z=V[R+2];return Ut($)&&Ut(Z)&&(R=this.handleText(++R,B,{isMultiByte:!0})),R},Xt.prototype.setCurrentWindow=function(R,B){var V=this.current708Packet.data,$=V[R],Z=$&7;return B.setCurrentWindow(Z),R},Xt.prototype.defineWindow=function(R,B){var V=this.current708Packet.data,$=V[R],Z=$&7;B.setCurrentWindow(Z);var fe=B.currentWindow;return $=V[++R],fe.visible=($&32)>>5,fe.rowLock=($&16)>>4,fe.columnLock=($&8)>>3,fe.priority=$&7,$=V[++R],fe.relativePositioning=($&128)>>7,fe.anchorVertical=$&127,$=V[++R],fe.anchorHorizontal=$,$=V[++R],fe.anchorPoint=($&240)>>4,fe.rowCount=$&15,$=V[++R],fe.columnCount=$&63,$=V[++R],fe.windowStyle=($&56)>>3,fe.penStyle=$&7,fe.virtualRowCount=fe.rowCount+1,R},Xt.prototype.setWindowAttributes=function(R,B){var V=this.current708Packet.data,$=V[R],Z=B.currentWindow.winAttr;return $=V[++R],Z.fillOpacity=($&192)>>6,Z.fillRed=($&48)>>4,Z.fillGreen=($&12)>>2,Z.fillBlue=$&3,$=V[++R],Z.borderType=($&192)>>6,Z.borderRed=($&48)>>4,Z.borderGreen=($&12)>>2,Z.borderBlue=$&3,$=V[++R],Z.borderType+=($&128)>>5,Z.wordWrap=($&64)>>6,Z.printDirection=($&48)>>4,Z.scrollDirection=($&12)>>2,Z.justify=$&3,$=V[++R],Z.effectSpeed=($&240)>>4,Z.effectDirection=($&12)>>2,Z.displayEffect=$&3,R},Xt.prototype.flushDisplayed=function(R,B){for(var V=[],$=0;$<8;$++)B.windows[$].visible&&!B.windows[$].isEmpty()&&V.push(B.windows[$].getText());B.endPts=R,B.text=V.join(`

`),this.pushCaption(B),B.startPts=R},Xt.prototype.pushCaption=function(R){R.text!==""&&(this.trigger("data",{startPts:R.startPts,endPts:R.endPts,text:R.text,stream:"cc708_"+R.serviceNum}),R.text="",R.startPts=R.endPts)},Xt.prototype.displayWindows=function(R,B){var V=this.current708Packet.data,$=V[++R],Z=this.getPts(R);this.flushDisplayed(Z,B);for(var fe=0;fe<8;fe++)$&1<<fe&&(B.windows[fe].visible=1);return R},Xt.prototype.hideWindows=function(R,B){var V=this.current708Packet.data,$=V[++R],Z=this.getPts(R);this.flushDisplayed(Z,B);for(var fe=0;fe<8;fe++)$&1<<fe&&(B.windows[fe].visible=0);return R},Xt.prototype.toggleWindows=function(R,B){var V=this.current708Packet.data,$=V[++R],Z=this.getPts(R);this.flushDisplayed(Z,B);for(var fe=0;fe<8;fe++)$&1<<fe&&(B.windows[fe].visible^=1);return R},Xt.prototype.clearWindows=function(R,B){var V=this.current708Packet.data,$=V[++R],Z=this.getPts(R);this.flushDisplayed(Z,B);for(var fe=0;fe<8;fe++)$&1<<fe&&B.windows[fe].clearText();return R},Xt.prototype.deleteWindows=function(R,B){var V=this.current708Packet.data,$=V[++R],Z=this.getPts(R);this.flushDisplayed(Z,B);for(var fe=0;fe<8;fe++)$&1<<fe&&B.windows[fe].reset();return R},Xt.prototype.setPenAttributes=function(R,B){var V=this.current708Packet.data,$=V[R],Z=B.currentWindow.penAttr;return $=V[++R],Z.textTag=($&240)>>4,Z.offset=($&12)>>2,Z.penSize=$&3,$=V[++R],Z.italics=($&128)>>7,Z.underline=($&64)>>6,Z.edgeType=($&56)>>3,Z.fontStyle=$&7,R},Xt.prototype.setPenColor=function(R,B){var V=this.current708Packet.data,$=V[R],Z=B.currentWindow.penColor;return $=V[++R],Z.fgOpacity=($&192)>>6,Z.fgRed=($&48)>>4,Z.fgGreen=($&12)>>2,Z.fgBlue=$&3,$=V[++R],Z.bgOpacity=($&192)>>6,Z.bgRed=($&48)>>4,Z.bgGreen=($&12)>>2,Z.bgBlue=$&3,$=V[++R],Z.edgeRed=($&48)>>4,Z.edgeGreen=($&12)>>2,Z.edgeBlue=$&3,R},Xt.prototype.setPenLocation=function(R,B){var V=this.current708Packet.data,$=V[R],Z=B.currentWindow.penLoc;return B.currentWindow.pendingNewLine=!0,$=V[++R],Z.row=$&15,$=V[++R],Z.column=$&63,R},Xt.prototype.reset=function(R,B){var V=this.getPts(R);return this.flushDisplayed(V,B),this.initService(B.serviceNum,R)};var kn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Kn=function(R){return R===null?"":(R=kn[R]||R,String.fromCharCode(R))},rt=14,ci=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],pt=function(){for(var R=[],B=rt+1;B--;)R.push({text:"",indent:0,offset:0});return R},Le=function(R,B){Le.prototype.init.call(this),this.field_=R||0,this.dataChannel_=B||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(V){var $,Z,fe,Ve,Qe;if($=V.ccData&32639,$===this.lastControlCode_){this.lastControlCode_=null;return}if(($&61440)===4096?this.lastControlCode_=$:$!==this.PADDING_&&(this.lastControlCode_=null),fe=$>>>8,Ve=$&255,$!==this.PADDING_)if($===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if($===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(V.pts),this.flushDisplayed(V.pts),Z=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=Z,this.startPts_=V.pts;else if($===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(V.pts);else if($===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(V.pts);else if($===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(V.pts);else if($===this.CARRIAGE_RETURN_)this.clearFormatting(V.pts),this.flushDisplayed(V.pts),this.shiftRowsUp_(),this.startPts_=V.pts;else if($===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if($===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(V.pts),this.displayed_=pt();else if($===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=pt();else if($===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(V.pts),this.displayed_=pt()),this.mode_="paintOn",this.startPts_=V.pts;else if(this.isSpecialCharacter(fe,Ve))fe=(fe&3)<<8,Qe=Kn(fe|Ve),this[this.mode_](V.pts,Qe),this.column_++;else if(this.isExtCharacter(fe,Ve))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),fe=(fe&3)<<8,Qe=Kn(fe|Ve),this[this.mode_](V.pts,Qe),this.column_++;else if(this.isMidRowCode(fe,Ve))this.clearFormatting(V.pts),this[this.mode_](V.pts," "),this.column_++,(Ve&14)===14&&this.addFormatting(V.pts,["i"]),(Ve&1)===1&&this.addFormatting(V.pts,["u"]);else if(this.isOffsetControlCode(fe,Ve)){const ct=Ve&3;this.nonDisplayed_[this.row_].offset=ct,this.column_+=ct}else if(this.isPAC(fe,Ve)){var lt=ci.indexOf($&7968);if(this.mode_==="rollUp"&&(lt-this.rollUpRows_+1<0&&(lt=this.rollUpRows_-1),this.setRollUp(V.pts,lt)),lt!==this.row_&&lt>=0&&lt<=14&&(this.clearFormatting(V.pts),this.row_=lt),Ve&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(V.pts,["u"]),($&16)===16){const ct=($&14)>>1;this.column_=ct*4,this.nonDisplayed_[this.row_].indent+=ct}this.isColorPAC(Ve)&&(Ve&14)===14&&this.addFormatting(V.pts,["i"])}else this.isNormalChar(fe)&&(Ve===0&&(Ve=null),Qe=Kn(fe),Qe+=Kn(Ve),this[this.mode_](V.pts,Qe),this.column_+=Qe.length)}};Le.prototype=new en,Le.prototype.flushDisplayed=function(R){const B=$=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+$+"."})},V=[];this.displayed_.forEach(($,Z)=>{if($&&$.text&&$.text.length){try{$.text=$.text.trim()}catch{B(Z)}$.text.length&&V.push({text:$.text,line:Z+1,position:10+Math.min(70,$.indent*10)+$.offset*2.5})}else $==null&&B(Z)}),V.length&&this.trigger("data",{startPts:this.startPts_,endPts:R,content:V,stream:this.name_})},Le.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=pt(),this.nonDisplayed_=pt(),this.lastControlCode_=null,this.column_=0,this.row_=rt,this.rollUpRows_=2,this.formatting_=[]},Le.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Le.prototype.isSpecialCharacter=function(R,B){return R===this.EXT_&&B>=48&&B<=63},Le.prototype.isExtCharacter=function(R,B){return(R===this.EXT_+1||R===this.EXT_+2)&&B>=32&&B<=63},Le.prototype.isMidRowCode=function(R,B){return R===this.EXT_&&B>=32&&B<=47},Le.prototype.isOffsetControlCode=function(R,B){return R===this.OFFSET_&&B>=33&&B<=35},Le.prototype.isPAC=function(R,B){return R>=this.BASE_&&R<this.BASE_+8&&B>=64&&B<=127},Le.prototype.isColorPAC=function(R){return R>=64&&R<=79||R>=96&&R<=127},Le.prototype.isNormalChar=function(R){return R>=32&&R<=127},Le.prototype.setRollUp=function(R,B){if(this.mode_!=="rollUp"&&(this.row_=rt,this.mode_="rollUp",this.flushDisplayed(R),this.nonDisplayed_=pt(),this.displayed_=pt()),B!==void 0&&B!==this.row_)for(var V=0;V<this.rollUpRows_;V++)this.displayed_[B-V]=this.displayed_[this.row_-V],this.displayed_[this.row_-V]={text:"",indent:0,offset:0};B===void 0&&(B=this.row_),this.topRow_=B-this.rollUpRows_+1},Le.prototype.addFormatting=function(R,B){this.formatting_=this.formatting_.concat(B);var V=B.reduce(function($,Z){return $+"<"+Z+">"},"");this[this.mode_](R,V)},Le.prototype.clearFormatting=function(R){if(this.formatting_.length){var B=this.formatting_.reverse().reduce(function(V,$){return V+"</"+$+">"},"");this.formatting_=[],this[this.mode_](R,B)}},Le.prototype.popOn=function(R,B){var V=this.nonDisplayed_[this.row_].text;V+=B,this.nonDisplayed_[this.row_].text=V},Le.prototype.rollUp=function(R,B){var V=this.displayed_[this.row_].text;V+=B,this.displayed_[this.row_].text=V},Le.prototype.shiftRowsUp_=function(){var R;for(R=0;R<this.topRow_;R++)this.displayed_[R]={text:"",indent:0,offset:0};for(R=this.row_+1;R<rt+1;R++)this.displayed_[R]={text:"",indent:0,offset:0};for(R=this.topRow_;R<this.row_;R++)this.displayed_[R]=this.displayed_[R+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Le.prototype.paintOn=function(R,B){var V=this.displayed_[this.row_].text;V+=B,this.displayed_[this.row_].text=V};var Et={CaptionStream:de,Cea608Stream:Le,Cea708Stream:Xt},Xe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},_t=t,mt=8589934592,Ot=4294967296,gn="shared",dn=function(R,B){var V=1;for(R>B&&(V=-1);Math.abs(B-R)>Ot;)R+=V*mt;return R},En=function(R){var B,V;En.prototype.init.call(this),this.type_=R||gn,this.push=function($){if($.type==="metadata"){this.trigger("data",$);return}this.type_!==gn&&$.type!==this.type_||(V===void 0&&(V=$.dts),$.dts=dn($.dts,V),$.pts=dn($.pts,V),B=$.dts,this.trigger("data",$))},this.flush=function(){V=B,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){V=void 0,B=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};En.prototype=new _t;var ni={TimestampRolloverStream:En,handleRollover:dn},bn=(R,B,V)=>{if(!R)return-1;for(var $=V;$<R.length;$++)if(R[$]===B)return $;return-1},Un={typedArrayIndexOf:bn},Bn=Un.typedArrayIndexOf,yi={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},Qi=function(R,B,V){var $,Z="";for($=B;$<V;$++)Z+="%"+("00"+R[$].toString(16)).slice(-2);return Z},Ii=function(R,B,V){return decodeURIComponent(Qi(R,B,V))},Di=function(R,B,V){return unescape(Qi(R,B,V))},Zn=function(R){return R[0]<<21|R[1]<<14|R[2]<<7|R[3]},xr={APIC:function(R){var B=1,V,$,Z="-->";R.data[0]===yi.Utf8&&(V=Bn(R.data,0,B),!(V<0)&&(R.mimeType=Di(R.data,B,V),B=V+1,R.pictureType=R.data[B],B++,$=Bn(R.data,0,B),!($<0)&&(R.description=Ii(R.data,B,$),B=$+1,R.mimeType===Z?R.url=Di(R.data,B,R.data.length):R.pictureData=R.data.subarray(B,R.data.length))))},"T*":function(R){R.data[0]===yi.Utf8&&(R.value=Ii(R.data,1,R.data.length).replace(/\0*$/,""),R.values=R.value.split("\0"))},TXXX:function(R){var B;R.data[0]===yi.Utf8&&(B=Bn(R.data,0,1),B!==-1&&(R.description=Ii(R.data,1,B),R.value=Ii(R.data,B+1,R.data.length).replace(/\0*$/,""),R.data=R.value))},"W*":function(R){R.url=Di(R.data,0,R.data.length).replace(/\0.*$/,"")},WXXX:function(R){var B;R.data[0]===yi.Utf8&&(B=Bn(R.data,0,1),B!==-1&&(R.description=Ii(R.data,1,B),R.url=Di(R.data,B+1,R.data.length).replace(/\0.*$/,"")))},PRIV:function(R){var B;for(B=0;B<R.data.length;B++)if(R.data[B]===0){R.owner=Di(R.data,0,B);break}R.privateData=R.data.subarray(B+1),R.data=R.privateData}},rr=function(R){var B,V,$=10,Z=0,fe=[];if(!(R.length<10||R[0]!=="I".charCodeAt(0)||R[1]!=="D".charCodeAt(0)||R[2]!=="3".charCodeAt(0))){Z=Zn(R.subarray(6,10)),Z+=10;var Ve=R[5]&64;Ve&&($+=4,$+=Zn(R.subarray(10,14)),Z-=Zn(R.subarray(16,20)));do{if(B=Zn(R.subarray($+4,$+8)),B<1)break;V=String.fromCharCode(R[$],R[$+1],R[$+2],R[$+3]);var Qe={id:V,data:R.subarray($+10,$+B+10)};Qe.key=Qe.id,xr[Qe.id]?xr[Qe.id](Qe):Qe.id[0]==="T"?xr["T*"](Qe):Qe.id[0]==="W"&&xr["W*"](Qe),fe.push(Qe),$+=10,$+=B}while($<Z);return fe}},wa={parseId3Frames:rr,parseSyncSafeInteger:Zn,frameParsers:xr},ro=t,Li=Xe,Ys=wa,wr;wr=function(R){var B={descriptor:R&&R.descriptor},V=0,$=[],Z=0,fe;if(wr.prototype.init.call(this),this.dispatchType=Li.METADATA_STREAM_TYPE.toString(16),B.descriptor)for(fe=0;fe<B.descriptor.length;fe++)this.dispatchType+=("00"+B.descriptor[fe].toString(16)).slice(-2);this.push=function(Ve){var Qe,lt,ct,It,Wt,Mn;if(Ve.type==="timed-metadata"){if(Ve.dataAlignmentIndicator&&(Z=0,$.length=0),$.length===0&&(Ve.data.length<10||Ve.data[0]!=="I".charCodeAt(0)||Ve.data[1]!=="D".charCodeAt(0)||Ve.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if($.push(Ve),Z+=Ve.data.byteLength,$.length===1&&(V=Ys.parseSyncSafeInteger(Ve.data.subarray(6,10)),V+=10),!(Z<V)){for(Qe={data:new Uint8Array(V),frames:[],pts:$[0].pts,dts:$[0].dts},Wt=0;Wt<V;)Qe.data.set($[0].data.subarray(0,V-Wt),Wt),Wt+=$[0].data.byteLength,Z-=$[0].data.byteLength,$.shift();lt=10,Qe.data[5]&64&&(lt+=4,lt+=Ys.parseSyncSafeInteger(Qe.data.subarray(10,14)),V-=Ys.parseSyncSafeInteger(Qe.data.subarray(16,20)));do{if(ct=Ys.parseSyncSafeInteger(Qe.data.subarray(lt+4,lt+8)),ct<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(Mn=String.fromCharCode(Qe.data[lt],Qe.data[lt+1],Qe.data[lt+2],Qe.data[lt+3]),It={id:Mn,data:Qe.data.subarray(lt+10,lt+ct+10)},It.key=It.id,Ys.frameParsers[It.id]?Ys.frameParsers[It.id](It):It.id[0]==="T"?Ys.frameParsers["T*"](It):It.id[0]==="W"&&Ys.frameParsers["W*"](It),It.owner==="com.apple.streaming.transportStreamTimestamp"){var tn=It.data,gi=(tn[3]&1)<<30|tn[4]<<22|tn[5]<<14|tn[6]<<6|tn[7]>>>2;gi*=4,gi+=tn[7]&3,It.timeStamp=gi,Qe.pts===void 0&&Qe.dts===void 0&&(Qe.pts=It.timeStamp,Qe.dts=It.timeStamp),this.trigger("timestamp",It)}Qe.frames.push(It),lt+=10,lt+=ct}while(lt<V);this.trigger("data",Qe)}}}},wr.prototype=new ro;var ra=wr,Os=t,is=Et,mr=Xe,rs=ni.TimestampRolloverStream,Ta,uf,_i,al=188,Me=71;Ta=function(){var R=new Uint8Array(al),B=0;Ta.prototype.init.call(this),this.push=function(V){var $=0,Z=al,fe;for(B?(fe=new Uint8Array(V.byteLength+B),fe.set(R.subarray(0,B)),fe.set(V,B),B=0):fe=V;Z<fe.byteLength;){if(fe[$]===Me&&fe[Z]===Me){this.trigger("data",fe.subarray($,Z)),$+=al,Z+=al;continue}$++,Z++}$<fe.byteLength&&(R.set(fe.subarray($),0),B=fe.byteLength-$)},this.flush=function(){B===al&&R[0]===Me&&(this.trigger("data",R),B=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){B=0,this.trigger("reset")}},Ta.prototype=new Os,uf=function(){var R,B,V,$;uf.prototype.init.call(this),$=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,R=function(Z,fe){var Ve=0;fe.payloadUnitStartIndicator&&(Ve+=Z[Ve]+1),fe.type==="pat"?B(Z.subarray(Ve),fe):V(Z.subarray(Ve),fe)},B=function(Z,fe){fe.section_number=Z[7],fe.last_section_number=Z[8],$.pmtPid=(Z[10]&31)<<8|Z[11],fe.pmtPid=$.pmtPid},V=function(Z,fe){var Ve,Qe,lt,ct;if(Z[5]&1){for($.programMapTable={video:null,audio:null,"timed-metadata":{}},Ve=(Z[1]&15)<<8|Z[2],Qe=3+Ve-4,lt=(Z[10]&15)<<8|Z[11],ct=12+lt;ct<Qe;){var It=Z[ct],Wt=(Z[ct+1]&31)<<8|Z[ct+2];It===mr.H264_STREAM_TYPE&&$.programMapTable.video===null?$.programMapTable.video=Wt:It===mr.ADTS_STREAM_TYPE&&$.programMapTable.audio===null?$.programMapTable.audio=Wt:It===mr.METADATA_STREAM_TYPE&&($.programMapTable["timed-metadata"][Wt]=It),ct+=((Z[ct+3]&15)<<8|Z[ct+4])+5}fe.programMapTable=$.programMapTable}},this.push=function(Z){var fe={},Ve=4;if(fe.payloadUnitStartIndicator=!!(Z[1]&64),fe.pid=Z[1]&31,fe.pid<<=8,fe.pid|=Z[2],(Z[3]&48)>>>4>1&&(Ve+=Z[Ve]+1),fe.pid===0)fe.type="pat",R(Z.subarray(Ve),fe),this.trigger("data",fe);else if(fe.pid===this.pmtPid)for(fe.type="pmt",R(Z.subarray(Ve),fe),this.trigger("data",fe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([Z,Ve,fe]):this.processPes_(Z,Ve,fe)},this.processPes_=function(Z,fe,Ve){Ve.pid===this.programMapTable.video?Ve.streamType=mr.H264_STREAM_TYPE:Ve.pid===this.programMapTable.audio?Ve.streamType=mr.ADTS_STREAM_TYPE:Ve.streamType=this.programMapTable["timed-metadata"][Ve.pid],Ve.type="pes",Ve.data=Z.subarray(fe),this.trigger("data",Ve)}},uf.prototype=new Os,uf.STREAM_TYPES={h264:27,adts:15},_i=function(){var R=this,B=!1,V={data:[],size:0},$={data:[],size:0},Z={data:[],size:0},fe,Ve=function(lt,ct){var It;const Wt=lt[0]<<16|lt[1]<<8|lt[2];ct.data=new Uint8Array,Wt===1&&(ct.packetLength=6+(lt[4]<<8|lt[5]),ct.dataAlignmentIndicator=(lt[6]&4)!==0,It=lt[7],It&192&&(ct.pts=(lt[9]&14)<<27|(lt[10]&255)<<20|(lt[11]&254)<<12|(lt[12]&255)<<5|(lt[13]&254)>>>3,ct.pts*=4,ct.pts+=(lt[13]&6)>>>1,ct.dts=ct.pts,It&64&&(ct.dts=(lt[14]&14)<<27|(lt[15]&255)<<20|(lt[16]&254)<<12|(lt[17]&255)<<5|(lt[18]&254)>>>3,ct.dts*=4,ct.dts+=(lt[18]&6)>>>1)),ct.data=lt.subarray(9+lt[8]))},Qe=function(lt,ct,It){var Wt=new Uint8Array(lt.size),Mn={type:ct},tn=0,gi=0,Ci=!1,Ns;if(!(!lt.data.length||lt.size<9)){for(Mn.trackId=lt.data[0].pid,tn=0;tn<lt.data.length;tn++)Ns=lt.data[tn],Wt.set(Ns.data,gi),gi+=Ns.data.byteLength;Ve(Wt,Mn),Ci=ct==="video"||Mn.packetLength<=lt.size,(It||Ci)&&(lt.size=0,lt.data.length=0),Ci&&R.trigger("data",Mn)}};_i.prototype.init.call(this),this.push=function(lt){({pat:function(){},pes:function(){var ct,It;switch(lt.streamType){case mr.H264_STREAM_TYPE:ct=V,It="video";break;case mr.ADTS_STREAM_TYPE:ct=$,It="audio";break;case mr.METADATA_STREAM_TYPE:ct=Z,It="timed-metadata";break;default:return}lt.payloadUnitStartIndicator&&Qe(ct,It,!0),ct.data.push(lt),ct.size+=lt.data.byteLength},pmt:function(){var ct={type:"metadata",tracks:[]};fe=lt.programMapTable,fe.video!==null&&ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+fe.video,codec:"avc",type:"video"}),fe.audio!==null&&ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+fe.audio,codec:"adts",type:"audio"}),B=!0,R.trigger("data",ct)}})[lt.type]()},this.reset=function(){V.size=0,V.data.length=0,$.size=0,$.data.length=0,this.trigger("reset")},this.flushStreams_=function(){Qe(V,"video"),Qe($,"audio"),Qe(Z,"timed-metadata")},this.flush=function(){if(!B&&fe){var lt={type:"metadata",tracks:[]};fe.video!==null&&lt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+fe.video,codec:"avc",type:"video"}),fe.audio!==null&&lt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+fe.audio,codec:"adts",type:"audio"}),R.trigger("data",lt)}B=!1,this.flushStreams_(),this.trigger("done")}},_i.prototype=new Os;var Ee={PAT_PID:0,MP2T_PACKET_LENGTH:al,TransportPacketStream:Ta,TransportParseStream:uf,ElementaryStream:_i,TimestampRolloverStream:rs,CaptionStream:is.CaptionStream,Cea608Stream:is.Cea608Stream,Cea708Stream:is.Cea708Stream,MetadataStream:ra};for(var Ge in mr)mr.hasOwnProperty(Ge)&&(Ee[Ge]=mr[Ge]);var Ue=Ee,qe=t,qt=q.ONE_SECOND_IN_TS,Qt,Wn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Qt=function(R){var B,V=0;Qt.prototype.init.call(this),this.skipWarn_=function($,Z){this.trigger("log",{level:"warn",message:`adts skiping bytes ${$} to ${Z} in frame ${V} outside syncword`})},this.push=function($){var Z=0,fe,Ve,Qe,lt,ct;if(R||(V=0),$.type==="audio"){B&&B.length?(Qe=B,B=new Uint8Array(Qe.byteLength+$.data.byteLength),B.set(Qe),B.set($.data,Qe.byteLength)):B=$.data;for(var It;Z+7<B.length;){if(B[Z]!==255||(B[Z+1]&246)!==240){typeof It!="number"&&(It=Z),Z++;continue}if(typeof It=="number"&&(this.skipWarn_(It,Z),It=null),Ve=(~B[Z+1]&1)*2,fe=(B[Z+3]&3)<<11|B[Z+4]<<3|(B[Z+5]&224)>>5,lt=((B[Z+6]&3)+1)*1024,ct=lt*qt/Wn[(B[Z+2]&60)>>>2],B.byteLength-Z<fe)break;this.trigger("data",{pts:$.pts+V*ct,dts:$.dts+V*ct,sampleCount:lt,audioobjecttype:(B[Z+2]>>>6&3)+1,channelcount:(B[Z+2]&1)<<2|(B[Z+3]&192)>>>6,samplerate:Wn[(B[Z+2]&60)>>>2],samplingfrequencyindex:(B[Z+2]&60)>>>2,samplesize:16,data:B.subarray(Z+7+Ve,Z+fe)}),V++,Z+=fe}typeof It=="number"&&(this.skipWarn_(It,Z),It=null),B=B.subarray(Z)}},this.flush=function(){V=0,this.trigger("done")},this.reset=function(){B=void 0,this.trigger("reset")},this.endTimeline=function(){B=void 0,this.trigger("endedtimeline")}},Qt.prototype=new qe;var yt=Qt,xn;xn=function(R){var B=R.byteLength,V=0,$=0;this.length=function(){return 8*B},this.bitsAvailable=function(){return 8*B+$},this.loadWord=function(){var Z=R.byteLength-B,fe=new Uint8Array(4),Ve=Math.min(4,B);if(Ve===0)throw new Error("no bytes available");fe.set(R.subarray(Z,Z+Ve)),V=new DataView(fe.buffer).getUint32(0),$=Ve*8,B-=Ve},this.skipBits=function(Z){var fe;$>Z?(V<<=Z,$-=Z):(Z-=$,fe=Math.floor(Z/8),Z-=fe*8,B-=fe,this.loadWord(),V<<=Z,$-=Z)},this.readBits=function(Z){var fe=Math.min($,Z),Ve=V>>>32-fe;return $-=fe,$>0?V<<=fe:B>0&&this.loadWord(),fe=Z-fe,fe>0?Ve<<fe|this.readBits(fe):Ve},this.skipLeadingZeros=function(){var Z;for(Z=0;Z<$;++Z)if(V&2147483648>>>Z)return V<<=Z,$-=Z,Z;return this.loadWord(),Z+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var Z=this.skipLeadingZeros();return this.readBits(Z+1)-1},this.readExpGolomb=function(){var Z=this.readUnsignedExpGolomb();return 1&Z?1+Z>>>1:-1*(Z>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Jn=xn,mn=t,pi=Jn,Xn,li,ai;li=function(){var R=0,B,V;li.prototype.init.call(this),this.push=function($){var Z;V?(Z=new Uint8Array(V.byteLength+$.data.byteLength),Z.set(V),Z.set($.data,V.byteLength),V=Z):V=$.data;for(var fe=V.byteLength;R<fe-3;R++)if(V[R+2]===1){B=R+5;break}for(;B<fe;)switch(V[B]){case 0:if(V[B-1]!==0){B+=2;break}else if(V[B-2]!==0){B++;break}R+3!==B-2&&this.trigger("data",V.subarray(R+3,B-2));do B++;while(V[B]!==1&&B<fe);R=B-2,B+=3;break;case 1:if(V[B-1]!==0||V[B-2]!==0){B+=3;break}this.trigger("data",V.subarray(R+3,B-2)),R=B-2,B+=3;break;default:B+=3;break}V=V.subarray(R),B-=R,R=0},this.reset=function(){V=null,R=0,this.trigger("reset")},this.flush=function(){V&&V.byteLength>3&&this.trigger("data",V.subarray(R+3)),V=null,R=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},li.prototype=new mn,ai={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Xn=function(){var R=new li,B,V,$,Z,fe,Ve,Qe;Xn.prototype.init.call(this),B=this,this.push=function(lt){lt.type==="video"&&(V=lt.trackId,$=lt.pts,Z=lt.dts,R.push(lt))},R.on("data",function(lt){var ct={trackId:V,pts:$,dts:Z,data:lt,nalUnitTypeCode:lt[0]&31};switch(ct.nalUnitTypeCode){case 5:ct.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:ct.nalUnitType="sei_rbsp",ct.escapedRBSP=fe(lt.subarray(1));break;case 7:ct.nalUnitType="seq_parameter_set_rbsp",ct.escapedRBSP=fe(lt.subarray(1)),ct.config=Ve(ct.escapedRBSP);break;case 8:ct.nalUnitType="pic_parameter_set_rbsp";break;case 9:ct.nalUnitType="access_unit_delimiter_rbsp";break}B.trigger("data",ct)}),R.on("done",function(){B.trigger("done")}),R.on("partialdone",function(){B.trigger("partialdone")}),R.on("reset",function(){B.trigger("reset")}),R.on("endedtimeline",function(){B.trigger("endedtimeline")}),this.flush=function(){R.flush()},this.partialFlush=function(){R.partialFlush()},this.reset=function(){R.reset()},this.endTimeline=function(){R.endTimeline()},Qe=function(lt,ct){var It=8,Wt=8,Mn,tn;for(Mn=0;Mn<lt;Mn++)Wt!==0&&(tn=ct.readExpGolomb(),Wt=(It+tn+256)%256),It=Wt===0?It:Wt},fe=function(lt){for(var ct=lt.byteLength,It=[],Wt=1,Mn,tn;Wt<ct-2;)lt[Wt]===0&&lt[Wt+1]===0&&lt[Wt+2]===3?(It.push(Wt+2),Wt+=2):Wt++;if(It.length===0)return lt;Mn=ct-It.length,tn=new Uint8Array(Mn);var gi=0;for(Wt=0;Wt<Mn;gi++,Wt++)gi===It[0]&&(gi++,It.shift()),tn[Wt]=lt[gi];return tn},Ve=function(lt){var ct=0,It=0,Wt=0,Mn=0,tn,gi,Ci,Ns,ko,ad,Lh,ff,W0,q0,Iv,se=[1,1],M,D;if(tn=new pi(lt),gi=tn.readUnsignedByte(),Ns=tn.readUnsignedByte(),Ci=tn.readUnsignedByte(),tn.skipUnsignedExpGolomb(),ai[gi]&&(ko=tn.readUnsignedExpGolomb(),ko===3&&tn.skipBits(1),tn.skipUnsignedExpGolomb(),tn.skipUnsignedExpGolomb(),tn.skipBits(1),tn.readBoolean()))for(Iv=ko!==3?8:12,D=0;D<Iv;D++)tn.readBoolean()&&(D<6?Qe(16,tn):Qe(64,tn));if(tn.skipUnsignedExpGolomb(),ad=tn.readUnsignedExpGolomb(),ad===0)tn.readUnsignedExpGolomb();else if(ad===1)for(tn.skipBits(1),tn.skipExpGolomb(),tn.skipExpGolomb(),Lh=tn.readUnsignedExpGolomb(),D=0;D<Lh;D++)tn.skipExpGolomb();if(tn.skipUnsignedExpGolomb(),tn.skipBits(1),ff=tn.readUnsignedExpGolomb(),W0=tn.readUnsignedExpGolomb(),q0=tn.readBits(1),q0===0&&tn.skipBits(1),tn.skipBits(1),tn.readBoolean()&&(ct=tn.readUnsignedExpGolomb(),It=tn.readUnsignedExpGolomb(),Wt=tn.readUnsignedExpGolomb(),Mn=tn.readUnsignedExpGolomb()),tn.readBoolean()&&tn.readBoolean()){switch(M=tn.readUnsignedByte(),M){case 1:se=[1,1];break;case 2:se=[12,11];break;case 3:se=[10,11];break;case 4:se=[16,11];break;case 5:se=[40,33];break;case 6:se=[24,11];break;case 7:se=[20,11];break;case 8:se=[32,11];break;case 9:se=[80,33];break;case 10:se=[18,11];break;case 11:se=[15,11];break;case 12:se=[64,33];break;case 13:se=[160,99];break;case 14:se=[4,3];break;case 15:se=[3,2];break;case 16:se=[2,1];break;case 255:{se=[tn.readUnsignedByte()<<8|tn.readUnsignedByte(),tn.readUnsignedByte()<<8|tn.readUnsignedByte()];break}}se&&se[0]/se[1]}return{profileIdc:gi,levelIdc:Ci,profileCompatibility:Ns,width:(ff+1)*16-ct*2-It*2,height:(2-q0)*(W0+1)*16-Wt*2-Mn*2,sarRatio:se}}},Xn.prototype=new mn;var Pr={H264Stream:Xn,NalByteStream:li},vn=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],zi=function(R,B){var V=R[B+6]<<21|R[B+7]<<14|R[B+8]<<7|R[B+9],$=R[B+5],Z=($&16)>>4;return V=V>=0?V:0,Z?V+20:V+10},Gi=function(R,B){return R.length-B<10||R[B]!=="I".charCodeAt(0)||R[B+1]!=="D".charCodeAt(0)||R[B+2]!=="3".charCodeAt(0)?B:(B+=zi(R,B),Gi(R,B))},Ar=function(R){var B=Gi(R,0);return R.length>=B+2&&(R[B]&255)===255&&(R[B+1]&240)===240&&(R[B+1]&22)===16},Yr=function(R){return R[0]<<21|R[1]<<14|R[2]<<7|R[3]},td=function(R,B,V){var $,Z="";for($=B;$<V;$++)Z+="%"+("00"+R[$].toString(16)).slice(-2);return Z},Qb=function(R,B,V){return unescape(td(R,B,V))},hv=function(R,B){var V=(R[B+5]&224)>>5,$=R[B+4]<<3,Z=R[B+3]&6144;return Z|$|V},fR=function(R,B){return R[B]==="I".charCodeAt(0)&&R[B+1]==="D".charCodeAt(0)&&R[B+2]==="3".charCodeAt(0)?"timed-metadata":R[B]&!0&&(R[B+1]&240)===240?"audio":null},sa=function(R){for(var B=0;B+5<R.length;){if(R[B]!==255||(R[B+1]&246)!==240){B++;continue}return vn[(R[B+2]&60)>>>2]}return null},jT=function(R){var B,V,$,Z;B=10,R[5]&64&&(B+=4,B+=Yr(R.subarray(10,14)));do{if(V=Yr(R.subarray(B+4,B+8)),V<1)return null;if(Z=String.fromCharCode(R[B],R[B+1],R[B+2],R[B+3]),Z==="PRIV"){$=R.subarray(B+10,B+V+10);for(var fe=0;fe<$.byteLength;fe++)if($[fe]===0){var Ve=Qb($,0,fe);if(Ve==="com.apple.streaming.transportStreamTimestamp"){var Qe=$.subarray(fe+1),lt=(Qe[3]&1)<<30|Qe[4]<<22|Qe[5]<<14|Qe[6]<<6|Qe[7]>>>2;return lt*=4,lt+=Qe[7]&3,lt}break}}B+=10,B+=V}while(B<R.byteLength);return null},pv={isLikelyAacData:Ar,parseId3TagSize:zi,parseAdtsSize:hv,parseType:fR,parseSampleRate:sa,parseAacTimestamp:jT},hR=t,mv=pv,nd;nd=function(){var R=new Uint8Array,B=0;nd.prototype.init.call(this),this.setTimestamp=function(V){B=V},this.push=function(V){var $=0,Z=0,fe,Ve,Qe,lt;for(R.length?(lt=R.length,R=new Uint8Array(V.byteLength+lt),R.set(R.subarray(0,lt)),R.set(V,lt)):R=V;R.length-Z>=3;){if(R[Z]==="I".charCodeAt(0)&&R[Z+1]==="D".charCodeAt(0)&&R[Z+2]==="3".charCodeAt(0)){if(R.length-Z<10||($=mv.parseId3TagSize(R,Z),Z+$>R.length))break;Ve={type:"timed-metadata",data:R.subarray(Z,Z+$)},this.trigger("data",Ve),Z+=$;continue}else if((R[Z]&255)===255&&(R[Z+1]&240)===240){if(R.length-Z<7||($=mv.parseAdtsSize(R,Z),Z+$>R.length))break;Qe={type:"audio",data:R.subarray(Z,Z+$),pts:B,dts:B},this.trigger("data",Qe),Z+=$;continue}Z++}fe=R.length-Z,fe>0?R=R.subarray(Z):R=new Uint8Array},this.reset=function(){R=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){R=new Uint8Array,this.trigger("endedtimeline")}},nd.prototype=new hR;var gr=nd,gv=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Zb=gv,KT=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ol=KT,id=t,D0=ye,_n=nt,za=Dt,Ro=Sn,Bl=Ue,Ca=q,gc=yt,Ur=Pr.H264Stream,XT=gr,YT=pv.isLikelyAacData,QT=q.ONE_SECOND_IN_TS,Jb=Zb,eS=ol,R0,Ih,vv,cf,pR=function(R,B){B.stream=R,this.trigger("log",B)},ZT=function(R,B){for(var V=Object.keys(B),$=0;$<V.length;$++){var Z=V[$];Z==="headOfPipeline"||!B[Z].on||B[Z].on("log",pR.bind(R,Z))}},vu=function(R,B){var V;if(R.length!==B.length)return!1;for(V=0;V<R.length;V++)if(R[V]!==B[V])return!1;return!0},Bi=function(R,B,V,$,Z,fe){var Ve=V-B,Qe=$-B,lt=Z-V;return{start:{dts:R,pts:R+Ve},end:{dts:R+Qe,pts:R+lt},prependedContentDuration:fe,baseMediaDecodeTime:R}};Ih=function(R,B){var V=[],$,Z=0,fe=0,Ve=1/0;B=B||{},$=B.firstSequenceNumber||0,Ih.prototype.init.call(this),this.push=function(Qe){Ro.collectDtsInfo(R,Qe),R&&Jb.forEach(function(lt){R[lt]=Qe[lt]}),V.push(Qe)},this.setEarliestDts=function(Qe){Z=Qe},this.setVideoBaseMediaDecodeTime=function(Qe){Ve=Qe},this.setAudioAppendStart=function(Qe){fe=Qe},this.flush=function(){var Qe,lt,ct,It,Wt,Mn,tn;if(V.length===0){this.trigger("done","AudioSegmentStream");return}Qe=za.trimAdtsFramesByEarliestDts(V,R,Z),R.baseMediaDecodeTime=Ro.calculateTrackBaseMediaDecodeTime(R,B.keepOriginalTimestamps),tn=za.prefixWithSilence(R,Qe,fe,Ve),R.samples=za.generateSampleTable(Qe),ct=D0.mdat(za.concatenateFrameData(Qe)),V=[],lt=D0.moof($,[R]),It=new Uint8Array(lt.byteLength+ct.byteLength),$++,It.set(lt),It.set(ct,lt.byteLength),Ro.clearDtsInfo(R),Wt=Math.ceil(QT*1024/R.samplerate),Qe.length&&(Mn=Qe.length*Wt,this.trigger("segmentTimingInfo",Bi(Ca.audioTsToVideoTs(R.baseMediaDecodeTime,R.samplerate),Qe[0].dts,Qe[0].pts,Qe[0].dts+Mn,Qe[0].pts+Mn,tn||0)),this.trigger("timingInfo",{start:Qe[0].pts,end:Qe[0].pts+Mn})),this.trigger("data",{track:R,boxes:It}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ro.clearDtsInfo(R),V=[],this.trigger("reset")}},Ih.prototype=new id,R0=function(R,B){var V,$=[],Z=[],fe,Ve;B=B||{},V=B.firstSequenceNumber||0,R0.prototype.init.call(this),delete R.minPTS,this.gopCache_=[],this.push=function(Qe){Ro.collectDtsInfo(R,Qe),Qe.nalUnitType==="seq_parameter_set_rbsp"&&!fe&&(fe=Qe.config,R.sps=[Qe.data],eS.forEach(function(lt){R[lt]=fe[lt]},this)),Qe.nalUnitType==="pic_parameter_set_rbsp"&&!Ve&&(Ve=Qe.data,R.pps=[Qe.data]),$.push(Qe)},this.flush=function(){for(var Qe,lt,ct,It,Wt,Mn,tn=0,gi,Ci;$.length&&$[0].nalUnitType!=="access_unit_delimiter_rbsp";)$.shift();if($.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(Qe=_n.groupNalsIntoFrames($),ct=_n.groupFramesIntoGops(Qe),ct[0][0].keyFrame||(lt=this.getGopForFusion_($[0],R),lt?(tn=lt.duration,ct.unshift(lt),ct.byteLength+=lt.byteLength,ct.nalCount+=lt.nalCount,ct.pts=lt.pts,ct.dts=lt.dts,ct.duration+=lt.duration):ct=_n.extendFirstKeyFrame(ct)),Z.length){var Ns;if(B.alignGopsAtEnd?Ns=this.alignGopsAtEnd_(ct):Ns=this.alignGopsAtStart_(ct),!Ns){this.gopCache_.unshift({gop:ct.pop(),pps:R.pps,sps:R.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Ro.clearDtsInfo(R),ct=Ns}Ro.collectDtsInfo(R,ct),R.samples=_n.generateSampleTable(ct),Wt=D0.mdat(_n.concatenateNalData(ct)),R.baseMediaDecodeTime=Ro.calculateTrackBaseMediaDecodeTime(R,B.keepOriginalTimestamps),this.trigger("processedGopsInfo",ct.map(function(ko){return{pts:ko.pts,dts:ko.dts,byteLength:ko.byteLength}})),gi=ct[0],Ci=ct[ct.length-1],this.trigger("segmentTimingInfo",Bi(R.baseMediaDecodeTime,gi.dts,gi.pts,Ci.dts+Ci.duration,Ci.pts+Ci.duration,tn)),this.trigger("timingInfo",{start:ct[0].pts,end:ct[ct.length-1].pts+ct[ct.length-1].duration}),this.gopCache_.unshift({gop:ct.pop(),pps:R.pps,sps:R.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),$=[],this.trigger("baseMediaDecodeTime",R.baseMediaDecodeTime),this.trigger("timelineStartInfo",R.timelineStartInfo),It=D0.moof(V,[R]),Mn=new Uint8Array(It.byteLength+Wt.byteLength),V++,Mn.set(It),Mn.set(Wt,It.byteLength),this.trigger("data",{track:R,boxes:Mn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),$=[],this.gopCache_.length=0,Z.length=0,this.trigger("reset")},this.resetStream_=function(){Ro.clearDtsInfo(R),fe=void 0,Ve=void 0},this.getGopForFusion_=function(Qe){var lt=45e3,ct=1e4,It=1/0,Wt,Mn,tn,gi,Ci;for(Ci=0;Ci<this.gopCache_.length;Ci++)gi=this.gopCache_[Ci],tn=gi.gop,!(!(R.pps&&vu(R.pps[0],gi.pps[0]))||!(R.sps&&vu(R.sps[0],gi.sps[0])))&&(tn.dts<R.timelineStartInfo.dts||(Wt=Qe.dts-tn.dts-tn.duration,Wt>=-ct&&Wt<=lt&&(!Mn||It>Wt)&&(Mn=gi,It=Wt)));return Mn?Mn.gop:null},this.alignGopsAtStart_=function(Qe){var lt,ct,It,Wt,Mn,tn,gi,Ci;for(Mn=Qe.byteLength,tn=Qe.nalCount,gi=Qe.duration,lt=ct=0;lt<Z.length&&ct<Qe.length&&(It=Z[lt],Wt=Qe[ct],It.pts!==Wt.pts);){if(Wt.pts>It.pts){lt++;continue}ct++,Mn-=Wt.byteLength,tn-=Wt.nalCount,gi-=Wt.duration}return ct===0?Qe:ct===Qe.length?null:(Ci=Qe.slice(ct),Ci.byteLength=Mn,Ci.duration=gi,Ci.nalCount=tn,Ci.pts=Ci[0].pts,Ci.dts=Ci[0].dts,Ci)},this.alignGopsAtEnd_=function(Qe){var lt,ct,It,Wt,Mn,tn;for(lt=Z.length-1,ct=Qe.length-1,Mn=null,tn=!1;lt>=0&&ct>=0;){if(It=Z[lt],Wt=Qe[ct],It.pts===Wt.pts){tn=!0;break}if(It.pts>Wt.pts){lt--;continue}lt===Z.length-1&&(Mn=ct),ct--}if(!tn&&Mn===null)return null;var gi;if(tn?gi=ct:gi=Mn,gi===0)return Qe;var Ci=Qe.slice(gi),Ns=Ci.reduce(function(ko,ad){return ko.byteLength+=ad.byteLength,ko.duration+=ad.duration,ko.nalCount+=ad.nalCount,ko},{byteLength:0,duration:0,nalCount:0});return Ci.byteLength=Ns.byteLength,Ci.duration=Ns.duration,Ci.nalCount=Ns.nalCount,Ci.pts=Ci[0].pts,Ci.dts=Ci[0].dts,Ci},this.alignGopsWith=function(Qe){Z=Qe}},R0.prototype=new id,cf=function(R,B){this.numberOfTracks=0,this.metadataStream=B,R=R||{},typeof R.remux<"u"?this.remuxTracks=!!R.remux:this.remuxTracks=!0,typeof R.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=R.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,cf.prototype.init.call(this),this.push=function(V){if(V.content||V.text)return this.pendingCaptions.push(V);if(V.frames)return this.pendingMetadata.push(V);this.pendingTracks.push(V.track),this.pendingBytes+=V.boxes.byteLength,V.track.type==="video"&&(this.videoTrack=V.track,this.pendingBoxes.push(V.boxes)),V.track.type==="audio"&&(this.audioTrack=V.track,this.pendingBoxes.unshift(V.boxes))}},cf.prototype=new id,cf.prototype.flush=function(R){var B=0,V={captions:[],captionStreams:{},metadata:[],info:{}},$,Z,fe,Ve=0,Qe;if(this.pendingTracks.length<this.numberOfTracks){if(R!=="VideoSegmentStream"&&R!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(Ve=this.videoTrack.timelineStartInfo.pts,eS.forEach(function(lt){V.info[lt]=this.videoTrack[lt]},this)):this.audioTrack&&(Ve=this.audioTrack.timelineStartInfo.pts,Jb.forEach(function(lt){V.info[lt]=this.audioTrack[lt]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?V.type=this.pendingTracks[0].type:V.type="combined",this.emittedTracks+=this.pendingTracks.length,fe=D0.initSegment(this.pendingTracks),V.initSegment=new Uint8Array(fe.byteLength),V.initSegment.set(fe),V.data=new Uint8Array(this.pendingBytes),Qe=0;Qe<this.pendingBoxes.length;Qe++)V.data.set(this.pendingBoxes[Qe],B),B+=this.pendingBoxes[Qe].byteLength;for(Qe=0;Qe<this.pendingCaptions.length;Qe++)$=this.pendingCaptions[Qe],$.startTime=Ca.metadataTsToSeconds($.startPts,Ve,this.keepOriginalTimestamps),$.endTime=Ca.metadataTsToSeconds($.endPts,Ve,this.keepOriginalTimestamps),V.captionStreams[$.stream]=!0,V.captions.push($);for(Qe=0;Qe<this.pendingMetadata.length;Qe++)Z=this.pendingMetadata[Qe],Z.cueTime=Ca.metadataTsToSeconds(Z.pts,Ve,this.keepOriginalTimestamps),V.metadata.push(Z);for(V.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",V),Qe=0;Qe<V.captions.length;Qe++)$=V.captions[Qe],this.trigger("caption",$);for(Qe=0;Qe<V.metadata.length;Qe++)Z=V.metadata[Qe],this.trigger("id3Frame",Z)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},cf.prototype.setRemux=function(R){this.remuxTracks=R},vv=function(R){var B=this,V=!0,$,Z;vv.prototype.init.call(this),R=R||{},this.baseMediaDecodeTime=R.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var fe={};this.transmuxPipeline_=fe,fe.type="aac",fe.metadataStream=new Bl.MetadataStream,fe.aacStream=new XT,fe.audioTimestampRolloverStream=new Bl.TimestampRolloverStream("audio"),fe.timedMetadataTimestampRolloverStream=new Bl.TimestampRolloverStream("timed-metadata"),fe.adtsStream=new gc,fe.coalesceStream=new cf(R,fe.metadataStream),fe.headOfPipeline=fe.aacStream,fe.aacStream.pipe(fe.audioTimestampRolloverStream).pipe(fe.adtsStream),fe.aacStream.pipe(fe.timedMetadataTimestampRolloverStream).pipe(fe.metadataStream).pipe(fe.coalesceStream),fe.metadataStream.on("timestamp",function(Ve){fe.aacStream.setTimestamp(Ve.timeStamp)}),fe.aacStream.on("data",function(Ve){Ve.type!=="timed-metadata"&&Ve.type!=="audio"||fe.audioSegmentStream||(Z=Z||{timelineStartInfo:{baseMediaDecodeTime:B.baseMediaDecodeTime},codec:"adts",type:"audio"},fe.coalesceStream.numberOfTracks++,fe.audioSegmentStream=new Ih(Z,R),fe.audioSegmentStream.on("log",B.getLogTrigger_("audioSegmentStream")),fe.audioSegmentStream.on("timingInfo",B.trigger.bind(B,"audioTimingInfo")),fe.adtsStream.pipe(fe.audioSegmentStream).pipe(fe.coalesceStream),B.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!$}))}),fe.coalesceStream.on("data",this.trigger.bind(this,"data")),fe.coalesceStream.on("done",this.trigger.bind(this,"done")),ZT(this,fe)},this.setupTsPipeline=function(){var fe={};this.transmuxPipeline_=fe,fe.type="ts",fe.metadataStream=new Bl.MetadataStream,fe.packetStream=new Bl.TransportPacketStream,fe.parseStream=new Bl.TransportParseStream,fe.elementaryStream=new Bl.ElementaryStream,fe.timestampRolloverStream=new Bl.TimestampRolloverStream,fe.adtsStream=new gc,fe.h264Stream=new Ur,fe.captionStream=new Bl.CaptionStream(R),fe.coalesceStream=new cf(R,fe.metadataStream),fe.headOfPipeline=fe.packetStream,fe.packetStream.pipe(fe.parseStream).pipe(fe.elementaryStream).pipe(fe.timestampRolloverStream),fe.timestampRolloverStream.pipe(fe.h264Stream),fe.timestampRolloverStream.pipe(fe.adtsStream),fe.timestampRolloverStream.pipe(fe.metadataStream).pipe(fe.coalesceStream),fe.h264Stream.pipe(fe.captionStream).pipe(fe.coalesceStream),fe.elementaryStream.on("data",function(Ve){var Qe;if(Ve.type==="metadata"){for(Qe=Ve.tracks.length;Qe--;)!$&&Ve.tracks[Qe].type==="video"?($=Ve.tracks[Qe],$.timelineStartInfo.baseMediaDecodeTime=B.baseMediaDecodeTime):!Z&&Ve.tracks[Qe].type==="audio"&&(Z=Ve.tracks[Qe],Z.timelineStartInfo.baseMediaDecodeTime=B.baseMediaDecodeTime);$&&!fe.videoSegmentStream&&(fe.coalesceStream.numberOfTracks++,fe.videoSegmentStream=new R0($,R),fe.videoSegmentStream.on("log",B.getLogTrigger_("videoSegmentStream")),fe.videoSegmentStream.on("timelineStartInfo",function(lt){Z&&!R.keepOriginalTimestamps&&(Z.timelineStartInfo=lt,fe.audioSegmentStream.setEarliestDts(lt.dts-B.baseMediaDecodeTime))}),fe.videoSegmentStream.on("processedGopsInfo",B.trigger.bind(B,"gopInfo")),fe.videoSegmentStream.on("segmentTimingInfo",B.trigger.bind(B,"videoSegmentTimingInfo")),fe.videoSegmentStream.on("baseMediaDecodeTime",function(lt){Z&&fe.audioSegmentStream.setVideoBaseMediaDecodeTime(lt)}),fe.videoSegmentStream.on("timingInfo",B.trigger.bind(B,"videoTimingInfo")),fe.h264Stream.pipe(fe.videoSegmentStream).pipe(fe.coalesceStream)),Z&&!fe.audioSegmentStream&&(fe.coalesceStream.numberOfTracks++,fe.audioSegmentStream=new Ih(Z,R),fe.audioSegmentStream.on("log",B.getLogTrigger_("audioSegmentStream")),fe.audioSegmentStream.on("timingInfo",B.trigger.bind(B,"audioTimingInfo")),fe.audioSegmentStream.on("segmentTimingInfo",B.trigger.bind(B,"audioSegmentTimingInfo")),fe.adtsStream.pipe(fe.audioSegmentStream).pipe(fe.coalesceStream)),B.trigger("trackinfo",{hasAudio:!!Z,hasVideo:!!$})}}),fe.coalesceStream.on("data",this.trigger.bind(this,"data")),fe.coalesceStream.on("id3Frame",function(Ve){Ve.dispatchType=fe.metadataStream.dispatchType,B.trigger("id3Frame",Ve)}),fe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),fe.coalesceStream.on("done",this.trigger.bind(this,"done")),ZT(this,fe)},this.setBaseMediaDecodeTime=function(fe){var Ve=this.transmuxPipeline_;R.keepOriginalTimestamps||(this.baseMediaDecodeTime=fe),Z&&(Z.timelineStartInfo.dts=void 0,Z.timelineStartInfo.pts=void 0,Ro.clearDtsInfo(Z),Ve.audioTimestampRolloverStream&&Ve.audioTimestampRolloverStream.discontinuity()),$&&(Ve.videoSegmentStream&&(Ve.videoSegmentStream.gopCache_=[]),$.timelineStartInfo.dts=void 0,$.timelineStartInfo.pts=void 0,Ro.clearDtsInfo($),Ve.captionStream.reset()),Ve.timestampRolloverStream&&Ve.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(fe){Z&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(fe)},this.setRemux=function(fe){var Ve=this.transmuxPipeline_;R.remux=fe,Ve&&Ve.coalesceStream&&Ve.coalesceStream.setRemux(fe)},this.alignGopsWith=function(fe){$&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(fe)},this.getLogTrigger_=function(fe){var Ve=this;return function(Qe){Qe.stream=fe,Ve.trigger("log",Qe)}},this.push=function(fe){if(V){var Ve=YT(fe);Ve&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Ve&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),V=!1}this.transmuxPipeline_.headOfPipeline.push(fe)},this.flush=function(){V=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},vv.prototype=new id;var tS={Transmuxer:vv,VideoSegmentStream:R0,AudioSegmentStream:Ih,AUDIO_PROPERTIES:Jb,VIDEO_PROPERTIES:eS,generateSegmentTimingInfo:Bi},yv=function(R){return R>>>0},nS=function(R){return("00"+R.toString(16)).slice(-2)},P0={toUnsigned:yv,toHexString:nS},mR=function(R){var B="";return B+=String.fromCharCode(R[0]),B+=String.fromCharCode(R[1]),B+=String.fromCharCode(R[2]),B+=String.fromCharCode(R[3]),B},Dh=mR,gR=P0.toUnsigned,JT=Dh,iS=function(R,B){var V=[],$,Z,fe,Ve,Qe;if(!B.length)return null;for($=0;$<R.byteLength;)Z=gR(R[$]<<24|R[$+1]<<16|R[$+2]<<8|R[$+3]),fe=JT(R.subarray($+4,$+8)),Ve=Z>1?$+Z:R.byteLength,fe===B[0]&&(B.length===1?V.push(R.subarray($+8,Ve)):(Qe=iS(R.subarray($+8,Ve),B.slice(1)),Qe.length&&(V=V.concat(Qe)))),$=Ve;return V},_v=iS,vR=P0.toUnsigned,yR=s.getUint64,eC=function(R){var B={version:R[0],flags:new Uint8Array(R.subarray(1,4))};return B.version===1?B.baseMediaDecodeTime=yR(R.subarray(4)):B.baseMediaDecodeTime=vR(R[4]<<24|R[5]<<16|R[6]<<8|R[7]),B},bv=eC,rS=function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:R[0],flags:new Uint8Array(R.subarray(1,4)),trackId:B.getUint32(4)},$=V.flags[2]&1,Z=V.flags[2]&2,fe=V.flags[2]&8,Ve=V.flags[2]&16,Qe=V.flags[2]&32,lt=V.flags[0]&65536,ct=V.flags[0]&131072,It;return It=8,$&&(It+=4,V.baseDataOffset=B.getUint32(12),It+=4),Z&&(V.sampleDescriptionIndex=B.getUint32(It),It+=4),fe&&(V.defaultSampleDuration=B.getUint32(It),It+=4),Ve&&(V.defaultSampleSize=B.getUint32(It),It+=4),Qe&&(V.defaultSampleFlags=B.getUint32(It)),lt&&(V.durationIsEmpty=!0),!$&&ct&&(V.baseDataOffsetIsMoof=!0),V},Sv=rS,tC=s.getUint64,nC=function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:R[0],flags:new Uint8Array(R.subarray(1,4)),references:[],referenceId:B.getUint32(4),timescale:B.getUint32(8)},$=12;V.version===0?(V.earliestPresentationTime=B.getUint32($),V.firstOffset=B.getUint32($+4),$+=8):(V.earliestPresentationTime=tC(R.subarray($)),V.firstOffset=tC(R.subarray($+8)),$+=16),$+=2;var Z=B.getUint16($);for($+=2;Z>0;$+=12,Z--)V.references.push({referenceType:(R[$]&128)>>>7,referencedSize:B.getUint32($)&2147483647,subsegmentDuration:B.getUint32($+4),startsWithSap:!!(R[$+8]&128),sapType:(R[$+8]&112)>>>4,sapDeltaTime:B.getUint32($+8)&268435455});return V},k0=nC,sS=function(R){return{isLeading:(R[0]&12)>>>2,dependsOn:R[0]&3,isDependedOn:(R[1]&192)>>>6,hasRedundancy:(R[1]&48)>>>4,paddingValue:(R[1]&14)>>>1,isNonSyncSample:R[1]&1,degradationPriority:R[2]<<8|R[3]}},iC=sS,rC=iC,_R=function(R){var B={version:R[0],flags:new Uint8Array(R.subarray(1,4)),samples:[]},V=new DataView(R.buffer,R.byteOffset,R.byteLength),$=B.flags[2]&1,Z=B.flags[2]&4,fe=B.flags[1]&1,Ve=B.flags[1]&2,Qe=B.flags[1]&4,lt=B.flags[1]&8,ct=V.getUint32(4),It=8,Wt;for($&&(B.dataOffset=V.getInt32(It),It+=4),Z&&ct&&(Wt={flags:rC(R.subarray(It,It+4))},It+=4,fe&&(Wt.duration=V.getUint32(It),It+=4),Ve&&(Wt.size=V.getUint32(It),It+=4),lt&&(B.version===1?Wt.compositionTimeOffset=V.getInt32(It):Wt.compositionTimeOffset=V.getUint32(It),It+=4),B.samples.push(Wt),ct--);ct--;)Wt={},fe&&(Wt.duration=V.getUint32(It),It+=4),Ve&&(Wt.size=V.getUint32(It),It+=4),Qe&&(Wt.flags=rC(R.subarray(It,It+4)),It+=4),lt&&(B.version===1?Wt.compositionTimeOffset=V.getInt32(It):Wt.compositionTimeOffset=V.getUint32(It),It+=4),B.samples.push(Wt);return B},aS=_R,oS=s,xv=oS.getUint64,Qs,Rh,ll=function(R){return new Date(R*1e3-20828448e5)},L0=Dh,sC=_v,lS=function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V=[],$,Z;for($=0;$+4<R.length;$+=Z){if(Z=B.getUint32($),$+=4,Z<=0){V.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(R[$]&31){case 1:V.push("slice_layer_without_partitioning_rbsp");break;case 5:V.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:V.push("sei_rbsp");break;case 7:V.push("seq_parameter_set_rbsp");break;case 8:V.push("pic_parameter_set_rbsp");break;case 9:V.push("access_unit_delimiter_rbsp");break;default:V.push("UNKNOWN NAL - "+R[$]&31);break}}return V},yu={avc1:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength);return{dataReferenceIndex:B.getUint16(6),width:B.getUint16(24),height:B.getUint16(26),horizresolution:B.getUint16(28)+B.getUint16(30)/16,vertresolution:B.getUint16(32)+B.getUint16(34)/16,frameCount:B.getUint16(40),depth:B.getUint16(74),config:Qs(R.subarray(78,R.byteLength))}},avcC:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={configurationVersion:R[0],avcProfileIndication:R[1],profileCompatibility:R[2],avcLevelIndication:R[3],lengthSizeMinusOne:R[4]&3,sps:[],pps:[]},$=R[5]&31,Z,fe,Ve,Qe;for(Ve=6,Qe=0;Qe<$;Qe++)fe=B.getUint16(Ve),Ve+=2,V.sps.push(new Uint8Array(R.subarray(Ve,Ve+fe))),Ve+=fe;for(Z=R[Ve],Ve++,Qe=0;Qe<Z;Qe++)fe=B.getUint16(Ve),Ve+=2,V.pps.push(new Uint8Array(R.subarray(Ve,Ve+fe))),Ve+=fe;return V},btrt:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength);return{bufferSizeDB:B.getUint32(0),maxBitrate:B.getUint32(4),avgBitrate:B.getUint32(8)}},edts:function(B){return{boxes:Qs(B)}},elst:function(B){var V=new DataView(B.buffer,B.byteOffset,B.byteLength),$={version:V.getUint8(0),flags:new Uint8Array(B.subarray(1,4)),edits:[]},Z=V.getUint32(4),fe;for(fe=8;Z;Z--)$.version===0?($.edits.push({segmentDuration:V.getUint32(fe),mediaTime:V.getInt32(fe+4),mediaRate:V.getUint16(fe+8)+V.getUint16(fe+10)/(256*256)}),fe+=12):($.edits.push({segmentDuration:xv(B.subarray(fe)),mediaTime:xv(B.subarray(fe+8)),mediaRate:V.getUint16(fe+16)+V.getUint16(fe+18)/(256*256)}),fe+=20);return $},esds:function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),esId:R[6]<<8|R[7],streamPriority:R[8]&31,decoderConfig:{objectProfileIndication:R[11],streamType:R[12]>>>2&63,bufferSize:R[13]<<16|R[14]<<8|R[15],maxBitrate:R[16]<<24|R[17]<<16|R[18]<<8|R[19],avgBitrate:R[20]<<24|R[21]<<16|R[22]<<8|R[23],decoderConfigDescriptor:{tag:R[24],length:R[25],audioObjectType:R[26]>>>3&31,samplingFrequencyIndex:(R[26]&7)<<1|R[27]>>>7&1,channelConfiguration:R[27]>>>3&15}}}},ftyp:function(R){for(var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={majorBrand:L0(R.subarray(0,4)),minorVersion:B.getUint32(4),compatibleBrands:[]},$=8;$<R.byteLength;)V.compatibleBrands.push(L0(R.subarray($,$+4))),$+=4;return V},dinf:function(R){return{boxes:Qs(R)}},dref:function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),dataReferences:Qs(R.subarray(8))}},hdlr:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4)),handlerType:L0(R.subarray(8,12)),name:""},$=8;for($=24;$<R.byteLength;$++){if(R[$]===0){$++;break}V.name+=String.fromCharCode(R[$])}return V.name=decodeURIComponent(escape(V.name)),V},mdat:function(R){return{byteLength:R.byteLength,nals:lS(R)}},mdhd:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V=4,$,Z={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4)),language:""};return Z.version===1?(V+=4,Z.creationTime=ll(B.getUint32(V)),V+=8,Z.modificationTime=ll(B.getUint32(V)),V+=4,Z.timescale=B.getUint32(V),V+=8,Z.duration=B.getUint32(V)):(Z.creationTime=ll(B.getUint32(V)),V+=4,Z.modificationTime=ll(B.getUint32(V)),V+=4,Z.timescale=B.getUint32(V),V+=4,Z.duration=B.getUint32(V)),V+=4,$=B.getUint16(V),Z.language+=String.fromCharCode(($>>10)+96),Z.language+=String.fromCharCode((($&992)>>5)+96),Z.language+=String.fromCharCode(($&31)+96),Z},mdia:function(R){return{boxes:Qs(R)}},mfhd:function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),sequenceNumber:R[4]<<24|R[5]<<16|R[6]<<8|R[7]}},minf:function(R){return{boxes:Qs(R)}},mp4a:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={dataReferenceIndex:B.getUint16(6),channelcount:B.getUint16(16),samplesize:B.getUint16(18),samplerate:B.getUint16(24)+B.getUint16(26)/65536};return R.byteLength>28&&(V.streamDescriptor=Qs(R.subarray(28))[0]),V},moof:function(R){return{boxes:Qs(R)}},moov:function(R){return{boxes:Qs(R)}},mvex:function(R){return{boxes:Qs(R)}},mvhd:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V=4,$={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4))};return $.version===1?(V+=4,$.creationTime=ll(B.getUint32(V)),V+=8,$.modificationTime=ll(B.getUint32(V)),V+=4,$.timescale=B.getUint32(V),V+=8,$.duration=B.getUint32(V)):($.creationTime=ll(B.getUint32(V)),V+=4,$.modificationTime=ll(B.getUint32(V)),V+=4,$.timescale=B.getUint32(V),V+=4,$.duration=B.getUint32(V)),V+=4,$.rate=B.getUint16(V)+B.getUint16(V+2)/16,V+=4,$.volume=B.getUint8(V)+B.getUint8(V+1)/8,V+=2,V+=2,V+=2*4,$.matrix=new Uint32Array(R.subarray(V,V+9*4)),V+=9*4,V+=6*4,$.nextTrackId=B.getUint32(V),$},pdin:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength);return{version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4)),rate:B.getUint32(4),initialDelay:B.getUint32(8)}},sdtp:function(R){var B={version:R[0],flags:new Uint8Array(R.subarray(1,4)),samples:[]},V;for(V=4;V<R.byteLength;V++)B.samples.push({dependsOn:(R[V]&48)>>4,isDependedOn:(R[V]&12)>>2,hasRedundancy:R[V]&3});return B},sidx:k0,smhd:function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),balance:R[4]+R[5]/256}},stbl:function(R){return{boxes:Qs(R)}},ctts:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4)),compositionOffsets:[]},$=B.getUint32(4),Z;for(Z=8;$;Z+=8,$--)V.compositionOffsets.push({sampleCount:B.getUint32(Z),sampleOffset:B[V.version===0?"getUint32":"getInt32"](Z+4)});return V},stss:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4)),syncSamples:[]},$=B.getUint32(4),Z;for(Z=8;$;Z+=4,$--)V.syncSamples.push(B.getUint32(Z));return V},stco:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:R[0],flags:new Uint8Array(R.subarray(1,4)),chunkOffsets:[]},$=B.getUint32(4),Z;for(Z=8;$;Z+=4,$--)V.chunkOffsets.push(B.getUint32(Z));return V},stsc:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V=B.getUint32(4),$={version:R[0],flags:new Uint8Array(R.subarray(1,4)),sampleToChunks:[]},Z;for(Z=8;V;Z+=12,V--)$.sampleToChunks.push({firstChunk:B.getUint32(Z),samplesPerChunk:B.getUint32(Z+4),sampleDescriptionIndex:B.getUint32(Z+8)});return $},stsd:function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),sampleDescriptions:Qs(R.subarray(8))}},stsz:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:R[0],flags:new Uint8Array(R.subarray(1,4)),sampleSize:B.getUint32(4),entries:[]},$;for($=12;$<R.byteLength;$+=4)V.entries.push(B.getUint32($));return V},stts:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V={version:R[0],flags:new Uint8Array(R.subarray(1,4)),timeToSamples:[]},$=B.getUint32(4),Z;for(Z=8;$;Z+=8,$--)V.timeToSamples.push({sampleCount:B.getUint32(Z),sampleDelta:B.getUint32(Z+4)});return V},styp:function(R){return yu.ftyp(R)},tfdt:bv,tfhd:Sv,tkhd:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength),V=4,$={version:B.getUint8(0),flags:new Uint8Array(R.subarray(1,4))};return $.version===1?(V+=4,$.creationTime=ll(B.getUint32(V)),V+=8,$.modificationTime=ll(B.getUint32(V)),V+=4,$.trackId=B.getUint32(V),V+=4,V+=8,$.duration=B.getUint32(V)):($.creationTime=ll(B.getUint32(V)),V+=4,$.modificationTime=ll(B.getUint32(V)),V+=4,$.trackId=B.getUint32(V),V+=4,V+=4,$.duration=B.getUint32(V)),V+=4,V+=2*4,$.layer=B.getUint16(V),V+=2,$.alternateGroup=B.getUint16(V),V+=2,$.volume=B.getUint8(V)+B.getUint8(V+1)/8,V+=2,V+=2,$.matrix=new Uint32Array(R.subarray(V,V+9*4)),V+=9*4,$.width=B.getUint16(V)+B.getUint16(V+2)/65536,V+=4,$.height=B.getUint16(V)+B.getUint16(V+2)/65536,$},traf:function(R){return{boxes:Qs(R)}},trak:function(R){return{boxes:Qs(R)}},trex:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength);return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),trackId:B.getUint32(4),defaultSampleDescriptionIndex:B.getUint32(8),defaultSampleDuration:B.getUint32(12),defaultSampleSize:B.getUint32(16),sampleDependsOn:R[20]&3,sampleIsDependedOn:(R[21]&192)>>6,sampleHasRedundancy:(R[21]&48)>>4,samplePaddingValue:(R[21]&14)>>1,sampleIsDifferenceSample:!!(R[21]&1),sampleDegradationPriority:B.getUint16(22)}},trun:aS,"url ":function(R){return{version:R[0],flags:new Uint8Array(R.subarray(1,4))}},vmhd:function(R){var B=new DataView(R.buffer,R.byteOffset,R.byteLength);return{version:R[0],flags:new Uint8Array(R.subarray(1,4)),graphicsmode:B.getUint16(4),opcolor:new Uint16Array([B.getUint16(6),B.getUint16(8),B.getUint16(10)])}}};Qs=function(R){for(var B=0,V=[],$,Z,fe,Ve,Qe,lt=new ArrayBuffer(R.length),ct=new Uint8Array(lt),It=0;It<R.length;++It)ct[It]=R[It];for($=new DataView(lt);B<R.byteLength;)Z=$.getUint32(B),fe=L0(R.subarray(B+4,B+8)),Ve=Z>1?B+Z:R.byteLength,Qe=(yu[fe]||function(Wt){return{data:Wt}})(R.subarray(B+8,Ve)),Qe.size=Z,Qe.type=fe,V.push(Qe),B=Ve;return V},Rh=function(R,B){var V;return B=B||0,V=new Array(B*2+1).join(" "),R.map(function($,Z){return V+$.type+`
`+Object.keys($).filter(function(fe){return fe!=="type"&&fe!=="boxes"}).map(function(fe){var Ve=V+"  "+fe+": ",Qe=$[fe];if(Qe instanceof Uint8Array||Qe instanceof Uint32Array){var lt=Array.prototype.slice.call(new Uint8Array(Qe.buffer,Qe.byteOffset,Qe.byteLength)).map(function(ct){return" "+("00"+ct.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return lt?lt.length===1?Ve+"<"+lt.join("").slice(1)+">":Ve+`<
`+lt.map(function(ct){return V+"  "+ct}).join(`
`)+`
`+V+"  >":Ve+"<>"}return Ve+JSON.stringify(Qe,null,2).split(`
`).map(function(ct,It){return It===0?ct:V+"  "+ct}).join(`
`)}).join(`
`)+($.boxes?`
`+Rh($.boxes,B+1):"")}).join(`
`)};var wv={inspect:Qs,textify:Rh,parseType:L0,findBox:sC,parseTraf:yu.traf,parseTfdt:yu.tfdt,parseHdlr:yu.hdlr,parseTfhd:yu.tfhd,parseTrun:yu.trun,parseSidx:yu.sidx},bR=function(R){for(var B=0,V=String.fromCharCode(R[B]),$="";V!=="\0";)$+=V,B++,V=String.fromCharCode(R[B]);return $+=V,$},aC={uint8ToCString:bR},Tv=aC.uint8ToCString,oC=s.getUint64,O0=function(R){var B=4,V=R[0],$,Z,fe,Ve,Qe,lt,ct,It;if(V===0){$=Tv(R.subarray(B)),B+=$.length,Z=Tv(R.subarray(B)),B+=Z.length;var Wt=new DataView(R.buffer);fe=Wt.getUint32(B),B+=4,Qe=Wt.getUint32(B),B+=4,lt=Wt.getUint32(B),B+=4,ct=Wt.getUint32(B),B+=4}else if(V===1){var Wt=new DataView(R.buffer);fe=Wt.getUint32(B),B+=4,Ve=oC(R.subarray(B)),B+=8,lt=Wt.getUint32(B),B+=4,ct=Wt.getUint32(B),B+=4,$=Tv(R.subarray(B)),B+=$.length,Z=Tv(R.subarray(B)),B+=Z.length}It=new Uint8Array(R.subarray(B,R.byteLength));var Mn={scheme_id_uri:$,value:Z,timescale:fe||1,presentation_time:Ve,presentation_time_delta:Qe,event_duration:lt,id:ct,message_data:It};return xR(V,Mn)?Mn:void 0},SR=function(R,B,V,$){return R||R===0?R/B:$+V/B},xR=function(R,B){var V=B.scheme_id_uri!=="\0",$=R===0&&lC(B.presentation_time_delta)&&V,Z=R===1&&lC(B.presentation_time)&&V;return!(R>1)&&$||Z},lC=function(R){return R!==void 0||R!==null},uC={parseEmsgBox:O0,scaleTime:SR},N0;typeof window<"u"?N0=window:typeof n<"u"?N0=n:typeof self<"u"?N0=self:N0={};var uS=N0,B0=P0.toUnsigned,F0=P0.toHexString,Dr=_v,df=Dh,cS=uC,Cv=Sv,cC=aS,dS=bv,fS=s.getUint64,hS,Fl,pS,U0,vc,z0,Ul,mS=uS,_u=wa.parseId3Frames;hS=function(R){var B={},V=Dr(R,["moov","trak"]);return V.reduce(function($,Z){var fe,Ve,Qe,lt,ct;return fe=Dr(Z,["tkhd"])[0],!fe||(Ve=fe[0],Qe=Ve===0?12:20,lt=B0(fe[Qe]<<24|fe[Qe+1]<<16|fe[Qe+2]<<8|fe[Qe+3]),ct=Dr(Z,["mdia","mdhd"])[0],!ct)?null:(Ve=ct[0],Qe=Ve===0?12:20,$[lt]=B0(ct[Qe]<<24|ct[Qe+1]<<16|ct[Qe+2]<<8|ct[Qe+3]),$)},B)},Fl=function(R,B){var V;V=Dr(B,["moof","traf"]);var $=V.reduce(function(Z,fe){var Ve=Dr(fe,["tfhd"])[0],Qe=B0(Ve[4]<<24|Ve[5]<<16|Ve[6]<<8|Ve[7]),lt=R[Qe]||9e4,ct=Dr(fe,["tfdt"])[0],It=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),Wt;ct[0]===1?Wt=fS(ct.subarray(4,12)):Wt=It.getUint32(4);let Mn;return typeof Wt=="bigint"?Mn=Wt/mS.BigInt(lt):typeof Wt=="number"&&!isNaN(Wt)&&(Mn=Wt/lt),Mn<Number.MAX_SAFE_INTEGER&&(Mn=Number(Mn)),Mn<Z&&(Z=Mn),Z},1/0);return typeof $=="bigint"||isFinite($)?$:0},pS=function(R,B){var V=Dr(B,["moof","traf"]),$=0,Z=0,fe;if(V&&V.length){var Ve=Dr(V[0],["tfhd"])[0],Qe=Dr(V[0],["trun"])[0],lt=Dr(V[0],["tfdt"])[0];if(Ve){var ct=Cv(Ve);fe=ct.trackId}if(lt){var It=dS(lt);$=It.baseMediaDecodeTime}if(Qe){var Wt=cC(Qe);Wt.samples&&Wt.samples.length&&(Z=Wt.samples[0].compositionTimeOffset||0)}}var Mn=R[fe]||9e4;typeof $=="bigint"&&(Z=mS.BigInt(Z),Mn=mS.BigInt(Mn));var tn=($+Z)/Mn;return typeof tn=="bigint"&&tn<Number.MAX_SAFE_INTEGER&&(tn=Number(tn)),tn},U0=function(R){var B=Dr(R,["moov","trak"]),V=[];return B.forEach(function($){var Z=Dr($,["mdia","hdlr"]),fe=Dr($,["tkhd"]);Z.forEach(function(Ve,Qe){var lt=df(Ve.subarray(8,12)),ct=fe[Qe],It,Wt,Mn;lt==="vide"&&(It=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),Wt=It.getUint8(0),Mn=Wt===0?It.getUint32(12):It.getUint32(20),V.push(Mn))})}),V},z0=function(R){var B=R[0],V=B===0?12:20;return B0(R[V]<<24|R[V+1]<<16|R[V+2]<<8|R[V+3])},vc=function(R){var B=Dr(R,["moov","trak"]),V=[];return B.forEach(function($){var Z={},fe=Dr($,["tkhd"])[0],Ve,Qe;fe&&(Ve=new DataView(fe.buffer,fe.byteOffset,fe.byteLength),Qe=Ve.getUint8(0),Z.id=Qe===0?Ve.getUint32(12):Ve.getUint32(20));var lt=Dr($,["mdia","hdlr"])[0];if(lt){var ct=df(lt.subarray(8,12));ct==="vide"?Z.type="video":ct==="soun"?Z.type="audio":Z.type=ct}var It=Dr($,["mdia","minf","stbl","stsd"])[0];if(It){var Wt=It.subarray(8);Z.codec=df(Wt.subarray(4,8));var Mn=Dr(Wt,[Z.codec])[0],tn,gi;Mn&&(/^[asm]vc[1-9]$/i.test(Z.codec)?(tn=Mn.subarray(78),gi=df(tn.subarray(4,8)),gi==="avcC"&&tn.length>11?(Z.codec+=".",Z.codec+=F0(tn[9]),Z.codec+=F0(tn[10]),Z.codec+=F0(tn[11])):Z.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(Z.codec)?(tn=Mn.subarray(28),gi=df(tn.subarray(4,8)),gi==="esds"&&tn.length>20&&tn[19]!==0?(Z.codec+="."+F0(tn[19]),Z.codec+="."+F0(tn[20]>>>2&63).replace(/^0/,"")):Z.codec="mp4a.40.2"):Z.codec=Z.codec.toLowerCase())}var Ci=Dr($,["mdia","mdhd"])[0];Ci&&(Z.timescale=z0(Ci)),V.push(Z)}),V},Ul=function(R,B=0){var V=Dr(R,["emsg"]);return V.map($=>{var Z=cS.parseEmsgBox(new Uint8Array($)),fe=_u(Z.message_data);return{cueTime:cS.scaleTime(Z.presentation_time,Z.timescale,Z.presentation_time_delta,B),duration:cS.scaleTime(Z.event_duration,Z.timescale),frames:fe}})};var Ph={findBox:Dr,parseType:df,timescale:hS,startTime:Fl,compositionStartTime:pS,videoTrackIds:U0,tracks:vc,getTimescaleFromMediaHeader:z0,getEmsgID3:Ul};const{parseTrun:wR}=wv,{findBox:gS}=Ph;var dC=uS,fC=function(R){var B=gS(R,["moof","traf"]),V=gS(R,["mdat"]),$=[];return V.forEach(function(Z,fe){var Ve=B[fe];$.push({mdat:Z,traf:Ve})}),$},hC=function(R,B,V){var $=B,Z=V.defaultSampleDuration||0,fe=V.defaultSampleSize||0,Ve=V.trackId,Qe=[];return R.forEach(function(lt){var ct=wR(lt),It=ct.samples;It.forEach(function(Wt){Wt.duration===void 0&&(Wt.duration=Z),Wt.size===void 0&&(Wt.size=fe),Wt.trackId=Ve,Wt.dts=$,Wt.compositionTimeOffset===void 0&&(Wt.compositionTimeOffset=0),typeof $=="bigint"?(Wt.pts=$+dC.BigInt(Wt.compositionTimeOffset),$+=dC.BigInt(Wt.duration)):(Wt.pts=$+Wt.compositionTimeOffset,$+=Wt.duration)}),Qe=Qe.concat(It)}),Qe},Av={getMdatTrafPairs:fC,parseSamples:hC},pC=ue.discardEmulationPreventionBytes,mC=Et.CaptionStream,Ev=_v,gC=bv,vS=Sv,{getMdatTrafPairs:yS,parseSamples:vC}=Av,yC=function(R,B){for(var V=R,$=0;$<B.length;$++){var Z=B[$];if(V<Z.size)return Z;V-=Z.size}return null},_C=function(R,B,V){var $=new DataView(R.buffer,R.byteOffset,R.byteLength),Z={logs:[],seiNals:[]},fe,Ve,Qe,lt;for(Ve=0;Ve+4<R.length;Ve+=Qe)if(Qe=$.getUint32(Ve),Ve+=4,!(Qe<=0))switch(R[Ve]&31){case 6:var ct=R.subarray(Ve+1,Ve+1+Qe),It=yC(Ve,B);if(fe={nalUnitType:"sei_rbsp",size:Qe,data:ct,escapedRBSP:pC(ct),trackId:V},It)fe.pts=It.pts,fe.dts=It.dts,lt=It;else if(lt)fe.pts=lt.pts,fe.dts=lt.dts;else{Z.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Ve+" for trackId "+V+". See mux.js#223."});break}Z.seiNals.push(fe);break}return Z},TR=function(R,B){var V={},$=yS(R);return $.forEach(function(Z){var fe=Z.mdat,Ve=Z.traf,Qe=Ev(Ve,["tfhd"]),lt=vS(Qe[0]),ct=lt.trackId,It=Ev(Ve,["tfdt"]),Wt=It.length>0?gC(It[0]).baseMediaDecodeTime:0,Mn=Ev(Ve,["trun"]),tn,gi;B===ct&&Mn.length>0&&(tn=vC(Mn,Wt,lt),gi=_C(fe,tn,ct),V[ct]||(V[ct]={seiNals:[],logs:[]}),V[ct].seiNals=V[ct].seiNals.concat(gi.seiNals),V[ct].logs=V[ct].logs.concat(gi.logs))}),V},_S=function(R,B,V){var $;if(B===null)return null;$=TR(R,B);var Z=$[B]||{};return{seiNals:Z.seiNals,logs:Z.logs,timescale:V}},bC=function(){var R=!1,B,V,$,Z,fe,Ve;this.isInitialized=function(){return R},this.init=function(Qe){B=new mC,R=!0,Ve=Qe?Qe.isPartial:!1,B.on("data",function(lt){lt.startTime=lt.startPts/Z,lt.endTime=lt.endPts/Z,fe.captions.push(lt),fe.captionStreams[lt.stream]=!0}),B.on("log",function(lt){fe.logs.push(lt)})},this.isNewInit=function(Qe,lt){return Qe&&Qe.length===0||lt&&typeof lt=="object"&&Object.keys(lt).length===0?!1:$!==Qe[0]||Z!==lt[$]},this.parse=function(Qe,lt,ct){var It;if(this.isInitialized()){if(!lt||!ct)return null;if(this.isNewInit(lt,ct))$=lt[0],Z=ct[$];else if($===null||!Z)return V.push(Qe),null}else return null;for(;V.length>0;){var Wt=V.shift();this.parse(Wt,lt,ct)}return It=_S(Qe,$,Z),It&&It.logs&&(fe.logs=fe.logs.concat(It.logs)),It===null||!It.seiNals?fe.logs.length?{logs:fe.logs,captions:[],captionStreams:[]}:null:(this.pushNals(It.seiNals),this.flushStream(),fe)},this.pushNals=function(Qe){if(!this.isInitialized()||!Qe||Qe.length===0)return null;Qe.forEach(function(lt){B.push(lt)})},this.flushStream=function(){if(!this.isInitialized())return null;Ve?B.partialFlush():B.flush()},this.clearParsedCaptions=function(){fe.captions=[],fe.captionStreams={},fe.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;B.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){V=[],$=null,Z=null,fe?this.clearParsedCaptions():fe={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},SC=bC;const{parseTfdt:xC}=wv,Po=_v,{getTimescaleFromMediaHeader:H0}=Ph,{parseSamples:CR,getMdatTrafPairs:AR}=Av;var He=function(){let R=9e4;this.init=function(B){const V=Po(B,["moov","trak","mdia","mdhd"])[0];V&&(R=H0(V))},this.parseSegment=function(B){const V=[],$=AR(B);let Z=0;return $.forEach(function(fe){const Ve=fe.mdat,Qe=fe.traf,lt=Po(Qe,["tfdt"])[0],ct=Po(Qe,["tfhd"])[0],It=Po(Qe,["trun"]);if(lt&&(Z=xC(lt).baseMediaDecodeTime),It.length&&ct){const Wt=CR(It,Z,ct);let Mn=0;Wt.forEach(function(tn){const gi="utf-8",Ci=new TextDecoder(gi),Ns=Ve.slice(Mn,Mn+tn.size);if(Po(Ns,["vtte"])[0]){Mn+=tn.size;return}Po(Ns,["vttc"]).forEach(function(Lh){const ff=Po(Lh,["payl"])[0],W0=Po(Lh,["sttg"])[0],q0=tn.pts/R,Iv=(tn.pts+tn.duration)/R;let se,M;if(ff)try{se=Ci.decode(ff)}catch(D){console.error(D)}if(W0)try{M=Ci.decode(W0)}catch(D){console.error(D)}tn.duration&&se&&V.push({cueText:se,start:q0,end:Iv,settings:M})}),Mn+=tn.size})}}),V}},Mv=Xe,wC=function(R){var B=R[1]&31;return B<<=8,B|=R[2],B},V0=function(R){return!!(R[1]&64)},$0=function(R){var B=0;return(R[3]&48)>>>4>1&&(B+=R[4]+1),B},MR=function(R,B){var V=wC(R);return V===0?"pat":V===B?"pmt":B?"pes":null},TC=function(R){var B=V0(R),V=4+$0(R);return B&&(V+=R[V]+1),(R[V+10]&31)<<8|R[V+11]},IR=function(R){var B={},V=V0(R),$=4+$0(R);if(V&&($+=R[$]+1),!!(R[$+5]&1)){var Z,fe,Ve;Z=(R[$+1]&15)<<8|R[$+2],fe=3+Z-4,Ve=(R[$+10]&15)<<8|R[$+11];for(var Qe=12+Ve;Qe<fe;){var lt=$+Qe;B[(R[lt+1]&31)<<8|R[lt+2]]=R[lt],Qe+=((R[lt+3]&15)<<8|R[lt+4])+5}return B}},CC=function(R,B){var V=wC(R),$=B[V];switch($){case Mv.H264_STREAM_TYPE:return"video";case Mv.ADTS_STREAM_TYPE:return"audio";case Mv.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},bS=function(R){var B=V0(R);if(!B)return null;var V=4+$0(R);if(V>=R.byteLength)return null;var $=null,Z;return Z=R[V+7],Z&192&&($={},$.pts=(R[V+9]&14)<<27|(R[V+10]&255)<<20|(R[V+11]&254)<<12|(R[V+12]&255)<<5|(R[V+13]&254)>>>3,$.pts*=4,$.pts+=(R[V+13]&6)>>>1,$.dts=$.pts,Z&64&&($.dts=(R[V+14]&14)<<27|(R[V+15]&255)<<20|(R[V+16]&254)<<12|(R[V+17]&255)<<5|(R[V+18]&254)>>>3,$.dts*=4,$.dts+=(R[V+18]&6)>>>1)),$},G0=function(R){switch(R){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},AC=function(R){for(var B=4+$0(R),V=R.subarray(B),$=0,Z=0,fe=!1,Ve;Z<V.byteLength-3;Z++)if(V[Z+2]===1){$=Z+5;break}for(;$<V.byteLength;)switch(V[$]){case 0:if(V[$-1]!==0){$+=2;break}else if(V[$-2]!==0){$++;break}Z+3!==$-2&&(Ve=G0(V[Z+3]&31),Ve==="slice_layer_without_partitioning_rbsp_idr"&&(fe=!0));do $++;while(V[$]!==1&&$<V.length);Z=$-2,$+=3;break;case 1:if(V[$-1]!==0||V[$-2]!==0){$+=3;break}Ve=G0(V[Z+3]&31),Ve==="slice_layer_without_partitioning_rbsp_idr"&&(fe=!0),Z=$-2,$+=3;break;default:$+=3;break}return V=V.subarray(Z),$-=Z,Z=0,V&&V.byteLength>3&&(Ve=G0(V[Z+3]&31),Ve==="slice_layer_without_partitioning_rbsp_idr"&&(fe=!0)),fe},EC={parseType:MR,parsePat:TC,parsePmt:IR,parsePayloadUnitStartIndicator:V0,parsePesType:CC,parsePesTime:bS,videoPacketContainsKeyFrame:AC},SS=Xe,kh=ni.handleRollover,Er={};Er.ts=EC,Er.aac=pv;var rd=q.ONE_SECOND_IN_TS,Ha=188,aa=71,zl=function(R,B){for(var V=0,$=Ha,Z,fe;$<R.byteLength;){if(R[V]===aa&&R[$]===aa){switch(Z=R.subarray(V,$),fe=Er.ts.parseType(Z,B.pid),fe){case"pat":B.pid=Er.ts.parsePat(Z);break;case"pmt":var Ve=Er.ts.parsePmt(Z);B.table=B.table||{},Object.keys(Ve).forEach(function(Qe){B.table[Qe]=Ve[Qe]});break}V+=Ha,$+=Ha;continue}V++,$++}},sd=function(R,B,V){for(var $=0,Z=Ha,fe,Ve,Qe,lt,ct,It=!1;Z<=R.byteLength;){if(R[$]===aa&&(R[Z]===aa||Z===R.byteLength)){switch(fe=R.subarray($,Z),Ve=Er.ts.parseType(fe,B.pid),Ve){case"pes":Qe=Er.ts.parsePesType(fe,B.table),lt=Er.ts.parsePayloadUnitStartIndicator(fe),Qe==="audio"&&lt&&(ct=Er.ts.parsePesTime(fe),ct&&(ct.type="audio",V.audio.push(ct),It=!0));break}if(It)break;$+=Ha,Z+=Ha;continue}$++,Z++}for(Z=R.byteLength,$=Z-Ha,It=!1;$>=0;){if(R[$]===aa&&(R[Z]===aa||Z===R.byteLength)){switch(fe=R.subarray($,Z),Ve=Er.ts.parseType(fe,B.pid),Ve){case"pes":Qe=Er.ts.parsePesType(fe,B.table),lt=Er.ts.parsePayloadUnitStartIndicator(fe),Qe==="audio"&&lt&&(ct=Er.ts.parsePesTime(fe),ct&&(ct.type="audio",V.audio.push(ct),It=!0));break}if(It)break;$-=Ha,Z-=Ha;continue}$--,Z--}},MC=function(R,B,V){for(var $=0,Z=Ha,fe,Ve,Qe,lt,ct,It,Wt,Mn,tn=!1,gi={data:[],size:0};Z<R.byteLength;){if(R[$]===aa&&R[Z]===aa){switch(fe=R.subarray($,Z),Ve=Er.ts.parseType(fe,B.pid),Ve){case"pes":if(Qe=Er.ts.parsePesType(fe,B.table),lt=Er.ts.parsePayloadUnitStartIndicator(fe),Qe==="video"&&(lt&&!tn&&(ct=Er.ts.parsePesTime(fe),ct&&(ct.type="video",V.video.push(ct),tn=!0)),!V.firstKeyFrame)){if(lt&&gi.size!==0){for(It=new Uint8Array(gi.size),Wt=0;gi.data.length;)Mn=gi.data.shift(),It.set(Mn,Wt),Wt+=Mn.byteLength;if(Er.ts.videoPacketContainsKeyFrame(It)){var Ci=Er.ts.parsePesTime(It);Ci?(V.firstKeyFrame=Ci,V.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}gi.size=0}gi.data.push(fe),gi.size+=fe.byteLength}break}if(tn&&V.firstKeyFrame)break;$+=Ha,Z+=Ha;continue}$++,Z++}for(Z=R.byteLength,$=Z-Ha,tn=!1;$>=0;){if(R[$]===aa&&R[Z]===aa){switch(fe=R.subarray($,Z),Ve=Er.ts.parseType(fe,B.pid),Ve){case"pes":Qe=Er.ts.parsePesType(fe,B.table),lt=Er.ts.parsePayloadUnitStartIndicator(fe),Qe==="video"&&lt&&(ct=Er.ts.parsePesTime(fe),ct&&(ct.type="video",V.video.push(ct),tn=!0));break}if(tn)break;$-=Ha,Z-=Ha;continue}$--,Z--}},DR=function(R,B){if(R.audio&&R.audio.length){var V=B;(typeof V>"u"||isNaN(V))&&(V=R.audio[0].dts),R.audio.forEach(function(fe){fe.dts=kh(fe.dts,V),fe.pts=kh(fe.pts,V),fe.dtsTime=fe.dts/rd,fe.ptsTime=fe.pts/rd})}if(R.video&&R.video.length){var $=B;if((typeof $>"u"||isNaN($))&&($=R.video[0].dts),R.video.forEach(function(fe){fe.dts=kh(fe.dts,$),fe.pts=kh(fe.pts,$),fe.dtsTime=fe.dts/rd,fe.ptsTime=fe.pts/rd}),R.firstKeyFrame){var Z=R.firstKeyFrame;Z.dts=kh(Z.dts,$),Z.pts=kh(Z.pts,$),Z.dtsTime=Z.dts/rd,Z.ptsTime=Z.pts/rd}}},RR=function(R){for(var B=!1,V=0,$=null,Z=null,fe=0,Ve=0,Qe;R.length-Ve>=3;){var lt=Er.aac.parseType(R,Ve);switch(lt){case"timed-metadata":if(R.length-Ve<10){B=!0;break}if(fe=Er.aac.parseId3TagSize(R,Ve),fe>R.length){B=!0;break}Z===null&&(Qe=R.subarray(Ve,Ve+fe),Z=Er.aac.parseAacTimestamp(Qe)),Ve+=fe;break;case"audio":if(R.length-Ve<7){B=!0;break}if(fe=Er.aac.parseAdtsSize(R,Ve),fe>R.length){B=!0;break}$===null&&(Qe=R.subarray(Ve,Ve+fe),$=Er.aac.parseSampleRate(Qe)),V++,Ve+=fe;break;default:Ve++;break}if(B)return null}if($===null||Z===null)return null;var ct=rd/$,It={audio:[{type:"audio",dts:Z,pts:Z},{type:"audio",dts:Z+V*1024*ct,pts:Z+V*1024*ct}]};return It},PR=function(R){var B={pid:null,table:null},V={};zl(R,B);for(var $ in B.table)if(B.table.hasOwnProperty($)){var Z=B.table[$];switch(Z){case SS.H264_STREAM_TYPE:V.video=[],MC(R,B,V),V.video.length===0&&delete V.video;break;case SS.ADTS_STREAM_TYPE:V.audio=[],sd(R,B,V),V.audio.length===0&&delete V.audio;break}}return V},kR=function(R,B){var V=Er.aac.isLikelyAacData(R),$;return V?$=RR(R):$=PR(R),!$||!$.audio&&!$.video?null:(DR($,B),$)},xS={inspect:kR,parseAudioPes_:sd};const LR=function(R,B){B.on("data",function(V){const $=V.initSegment;V.initSegment={data:$.buffer,byteOffset:$.byteOffset,byteLength:$.byteLength};const Z=V.data;V.data=Z.buffer,R.postMessage({action:"data",segment:V,byteOffset:Z.byteOffset,byteLength:Z.byteLength},[V.data])}),B.on("done",function(V){R.postMessage({action:"done"})}),B.on("gopInfo",function(V){R.postMessage({action:"gopInfo",gopInfo:V})}),B.on("videoSegmentTimingInfo",function(V){const $={start:{decode:q.videoTsToSeconds(V.start.dts),presentation:q.videoTsToSeconds(V.start.pts)},end:{decode:q.videoTsToSeconds(V.end.dts),presentation:q.videoTsToSeconds(V.end.pts)},baseMediaDecodeTime:q.videoTsToSeconds(V.baseMediaDecodeTime)};V.prependedContentDuration&&($.prependedContentDuration=q.videoTsToSeconds(V.prependedContentDuration)),R.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:$})}),B.on("audioSegmentTimingInfo",function(V){const $={start:{decode:q.videoTsToSeconds(V.start.dts),presentation:q.videoTsToSeconds(V.start.pts)},end:{decode:q.videoTsToSeconds(V.end.dts),presentation:q.videoTsToSeconds(V.end.pts)},baseMediaDecodeTime:q.videoTsToSeconds(V.baseMediaDecodeTime)};V.prependedContentDuration&&($.prependedContentDuration=q.videoTsToSeconds(V.prependedContentDuration)),R.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:$})}),B.on("id3Frame",function(V){R.postMessage({action:"id3Frame",id3Frame:V})}),B.on("caption",function(V){R.postMessage({action:"caption",caption:V})}),B.on("trackinfo",function(V){R.postMessage({action:"trackinfo",trackInfo:V})}),B.on("audioTimingInfo",function(V){R.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:q.videoTsToSeconds(V.start),end:q.videoTsToSeconds(V.end)}})}),B.on("videoTimingInfo",function(V){R.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:q.videoTsToSeconds(V.start),end:q.videoTsToSeconds(V.end)}})}),B.on("log",function(V){R.postMessage({action:"log",log:V})})};class IC{constructor(B,V){this.options=V||{},this.self=B,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new tS.Transmuxer(this.options),LR(this.self,this.transmuxer)}pushMp4Captions(B){this.captionParser||(this.captionParser=new SC,this.captionParser.init());const V=new Uint8Array(B.data,B.byteOffset,B.byteLength),$=this.captionParser.parse(V,B.trackIds,B.timescales);this.self.postMessage({action:"mp4Captions",captions:$&&$.captions||[],logs:$&&$.logs||[],data:V.buffer},[V.buffer])}initMp4WebVttParser(B){this.webVttParser||(this.webVttParser=new He);const V=new Uint8Array(B.data,B.byteOffset,B.byteLength);this.webVttParser.init(V)}getMp4WebVttText(B){this.webVttParser||(this.webVttParser=new He);const V=new Uint8Array(B.data,B.byteOffset,B.byteLength),$=this.webVttParser.parseSegment(V);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:$||[],data:V.buffer},[V.buffer])}probeMp4StartTime({timescales:B,data:V}){const $=Ph.startTime(B,V);this.self.postMessage({action:"probeMp4StartTime",startTime:$,data:V},[V.buffer])}probeMp4Tracks({data:B}){const V=Ph.tracks(B);this.self.postMessage({action:"probeMp4Tracks",tracks:V,data:B},[B.buffer])}probeEmsgID3({data:B,offset:V}){const $=Ph.getEmsgID3(B,V);this.self.postMessage({action:"probeEmsgID3",id3Frames:$,emsgData:B},[B.buffer])}probeTs({data:B,baseStartTime:V}){const $=typeof V=="number"&&!isNaN(V)?V*q.ONE_SECOND_IN_TS:void 0,Z=xS.inspect(B,$);let fe=null;Z&&(fe={hasVideo:Z.video&&Z.video.length===2||!1,hasAudio:Z.audio&&Z.audio.length===2||!1},fe.hasVideo&&(fe.videoStart=Z.video[0].ptsTime),fe.hasAudio&&(fe.audioStart=Z.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:fe,data:B},[B.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(B){const V=new Uint8Array(B.data,B.byteOffset,B.byteLength);this.transmuxer.push(V)}reset(){this.transmuxer.reset()}setTimestampOffset(B){const V=B.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(q.secondsToVideoTs(V)))}setAudioAppendStart(B){this.transmuxer.setAudioAppendStart(Math.ceil(q.secondsToVideoTs(B.appendStart)))}setRemux(B){this.transmuxer.setRemux(B.remux)}flush(B){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(B){this.transmuxer.alignGopsWith(B.gopsToAlignWith.slice())}}self.onmessage=function(R){if(R.data.action==="init"&&R.data.options){this.messageHandlers=new IC(self,R.data.options);return}this.messageHandlers||(this.messageHandlers=new IC(self)),R.data&&R.data.action&&R.data.action!=="init"&&this.messageHandlers[R.data.action]&&this.messageHandlers[R.data.action](R.data)}}));var oqe=nle(aqe);const lqe=(n,e,t)=>{const{type:i,initSegment:r,captions:s,captionStreams:a,metadata:o,videoFrameDtsTime:l,videoFramePtsTime:u}=n.data.segment;e.buffer.push({captions:s,captionStreams:a,metadata:o});const c=n.data.segment.boxes||{data:n.data.segment.data},d={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(r.data,r.byteOffset,r.byteLength)};typeof l<"u"&&(d.videoFrameDtsTime=l),typeof u<"u"&&(d.videoFramePtsTime=u),t(d)},uqe=({transmuxedData:n,callback:e})=>{n.buffer=[],e(n)},cqe=(n,e)=>{e.gopInfo=n.data.gopInfo},sle=n=>{const{transmuxer:e,bytes:t,audioAppendStart:i,gopsToAlignWith:r,remux:s,onData:a,onTrackInfo:o,onAudioTimingInfo:l,onVideoTimingInfo:u,onVideoSegmentTimingInfo:c,onAudioSegmentTimingInfo:d,onId3:f,onCaptions:h,onDone:p,onEndedTimeline:m,onTransmuxerLog:g,isEndOfTimeline:v,segment:_,triggerSegmentEventFn:y}=n,b={buffer:[]};let x=v;const w=T=>{e.currentTransmux===n&&(T.data.action==="data"&&lqe(T,b,a),T.data.action==="trackinfo"&&o(T.data.trackInfo),T.data.action==="gopInfo"&&cqe(T,b),T.data.action==="audioTimingInfo"&&l(T.data.audioTimingInfo),T.data.action==="videoTimingInfo"&&u(T.data.videoTimingInfo),T.data.action==="videoSegmentTimingInfo"&&c(T.data.videoSegmentTimingInfo),T.data.action==="audioSegmentTimingInfo"&&d(T.data.audioSegmentTimingInfo),T.data.action==="id3Frame"&&f([T.data.id3Frame],T.data.id3Frame.dispatchType),T.data.action==="caption"&&h(T.data.caption),T.data.action==="endedtimeline"&&(x=!1,m()),T.data.action==="log"&&g(T.data.log),T.data.type==="transmuxed"&&(x||(e.onmessage=null,uqe({transmuxedData:b,callback:p}),ale(e))))},A=()=>{const T={message:"Received an error message from the transmuxer worker",metadata:{errorType:$t.Error.StreamingFailedToTransmuxSegment,segmentInfo:Hm({segment:_})}};p(null,T)};if(e.onmessage=w,e.onerror=A,i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),typeof s<"u"&&e.postMessage({action:"setRemux",remux:s}),t.byteLength){const T=t instanceof ArrayBuffer?t:t.buffer,C=t instanceof ArrayBuffer?0:t.byteOffset;y({type:"segmenttransmuxingstart",segment:_}),e.postMessage({action:"push",data:T,byteOffset:C,byteLength:t.byteLength},[T])}v&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},ale=n=>{n.currentTransmux=null,n.transmuxQueue.length&&(n.currentTransmux=n.transmuxQueue.shift(),typeof n.currentTransmux=="function"?n.currentTransmux():sle(n.currentTransmux))},UW=(n,e)=>{n.postMessage({action:e}),ale(n)},ole=(n,e)=>{if(!e.currentTransmux){e.currentTransmux=n,UW(e,n);return}e.transmuxQueue.push(UW.bind(null,e,n))},dqe=n=>{ole("reset",n)},fqe=n=>{ole("endTimeline",n)},lle=n=>{if(!n.transmuxer.currentTransmux){n.transmuxer.currentTransmux=n,sle(n);return}n.transmuxer.transmuxQueue.push(n)},hqe=n=>{const e=new oqe;e.currentTransmux=null,e.transmuxQueue=[];const t=e.terminate;return e.terminate=()=>(e.currentTransmux=null,e.transmuxQueue.length=0,t.call(e)),e.postMessage({action:"init",options:n}),e};var KP={reset:dqe,endTimeline:fqe,transmux:lle,createTransmuxer:hqe};const H1=function(n){const e=n.transmuxer,t=n.endAction||n.action,i=n.callback,r=Ds({},n,{endAction:null,transmuxer:null,callback:null}),s=a=>{a.data.action===t&&(e.removeEventListener("message",s),a.data.data&&(a.data.data=new Uint8Array(a.data.data,n.byteOffset||0,n.byteLength||a.data.data.byteLength),n.data&&(n.data=a.data.data)),i(a.data))};if(e.addEventListener("message",s),n.data){const a=n.data instanceof ArrayBuffer;r.byteOffset=a?0:n.data.byteOffset,r.byteLength=n.data.byteLength;const o=[a?n.data:n.data.buffer];e.postMessage(r,o)}else e.postMessage(r)},Dd={FAILURE:2,TIMEOUT:-101,ABORTED:-102},ule="wvtt",F8=n=>{n.forEach(e=>{e.abort()})},pqe=n=>({bandwidth:n.bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0}),mqe=n=>{const e=n.target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return i.bytesReceived=n.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},S9=(n,e)=>{const{requestType:t}=e,i=Tg({requestType:t,request:e,error:n});return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:Dd.TIMEOUT,xhr:e,metadata:i}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:Dd.ABORTED,xhr:e,metadata:i}:n?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:Dd.FAILURE,xhr:e,metadata:i}:e.responseType==="arraybuffer"&&e.response.byteLength===0?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:Dd.FAILURE,xhr:e,metadata:i}:null},zW=(n,e,t,i)=>(r,s)=>{const a=s.response,o=S9(r,s);if(o)return t(o,n);if(a.byteLength!==16)return t({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:Dd.FAILURE,xhr:s},n);const l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);for(let d=0;d<e.length;d++)e[d].bytes=u;const c={uri:s.uri};return i({type:"segmentkeyloadcomplete",segment:n,keyInfo:c}),t(null,n)},gqe=(n,e)=>{e===ule&&n.transmuxer.postMessage({action:"initMp4WebVttParser",data:n.map.bytes})},vqe=(n,e,t)=>{e===ule&&H1({action:"getMp4WebVttText",data:n.bytes,transmuxer:n.transmuxer,callback:({data:i,mp4VttCues:r})=>{n.bytes=i,t(null,n,{mp4VttCues:r})}})},cle=(n,e)=>{const t=H7(n.map.bytes);if(t!=="mp4"){const i=n.map.resolvedUri||n.map.uri,r=t||"unknown";return e({internal:!0,message:`Found unsupported ${r} container for initialization segment at URL: ${i}`,code:Dd.FAILURE,metadata:{mediaType:r}})}H1({action:"probeMp4Tracks",data:n.map.bytes,transmuxer:n.transmuxer,callback:({tracks:i,data:r})=>(n.map.bytes=r,i.forEach(function(s){n.map.tracks=n.map.tracks||{},!n.map.tracks[s.type]&&(n.map.tracks[s.type]=s,typeof s.id=="number"&&s.timescale&&(n.map.timescales=n.map.timescales||{},n.map.timescales[s.id]=s.timescale),s.type==="text"&&gqe(n,s.codec))}),e(null))})},yqe=({segment:n,finishProcessingFn:e,triggerSegmentEventFn:t})=>(i,r)=>{const s=S9(i,r);if(s)return e(s,n);const a=new Uint8Array(r.response);if(t({type:"segmentloaded",segment:n}),n.map.key)return n.map.encryptedBytes=a,e(null,n);n.map.bytes=a,cle(n,function(o){if(o)return o.xhr=r,o.status=r.status,e(o,n);e(null,n)})},_qe=({segment:n,finishProcessingFn:e,responseType:t,triggerSegmentEventFn:i})=>(r,s)=>{const a=S9(r,s);if(a)return e(a,n);i({type:"segmentloaded",segment:n});const o=t==="arraybuffer"||!s.responseText?s.response:rqe(s.responseText.substring(n.lastReachedChar||0));return n.stats=pqe(s),n.key?n.encryptedBytes=new Uint8Array(o):n.bytes=new Uint8Array(o),e(null,n)},bqe=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{const p=n.map&&n.map.tracks||{},m=!!(p.audio&&p.video);let g=i.bind(null,n,"audio","start");const v=i.bind(null,n,"audio","end");let _=i.bind(null,n,"video","start");const y=i.bind(null,n,"video","end"),b=()=>lle({bytes:e,transmuxer:n.transmuxer,audioAppendStart:n.audioAppendStart,gopsToAlignWith:n.gopsToAlignWith,remux:m,onData:x=>{x.type=x.type==="combined"?"video":x.type,c(n,x)},onTrackInfo:x=>{t&&(m&&(x.isMuxed=!0),t(n,x))},onAudioTimingInfo:x=>{g&&typeof x.start<"u"&&(g(x.start),g=null),v&&typeof x.end<"u"&&v(x.end)},onVideoTimingInfo:x=>{_&&typeof x.start<"u"&&(_(x.start),_=null),y&&typeof x.end<"u"&&y(x.end)},onVideoSegmentTimingInfo:x=>{const w={pts:{start:x.start.presentation,end:x.end.presentation},dts:{start:x.start.decode,end:x.end.decode}};h({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:w}),r(x)},onAudioSegmentTimingInfo:x=>{const w={pts:{start:x.start.pts,end:x.end.pts},dts:{start:x.start.dts,end:x.end.dts}};h({type:"segmenttransmuxingtiminginfoavailable",segment:n,timingInfo:w}),s(x)},onId3:(x,w)=>{a(n,x,w)},onCaptions:x=>{o(n,[x])},isEndOfTimeline:l,onEndedTimeline:()=>{u()},onTransmuxerLog:f,onDone:(x,w)=>{d&&(x.type=x.type==="combined"?"video":x.type,h({type:"segmenttransmuxingcomplete",segment:n}),d(w,n,x))},segment:n,triggerSegmentEventFn:h});H1({action:"probeTs",transmuxer:n.transmuxer,data:e,baseStartTime:n.baseStartTime,callback:x=>{n.bytes=e=x.data;const w=x.result;w&&(t(n,{hasAudio:w.hasAudio,hasVideo:w.hasVideo,isMuxed:m}),t=null),b()}})},dle=({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{let p=new Uint8Array(e);if(V$e(p)){n.isFmp4=!0;const{tracks:m}=n.map;if(m.text&&(!m.audio||!m.video)){c(n,{data:p,type:"text"}),vqe(n,m.text.codec,d);return}const v={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&m.audio.codec!=="enca"&&(v.audioCodec=m.audio.codec),m.video&&m.video.codec&&m.video.codec!=="encv"&&(v.videoCodec=m.video.codec),m.video&&m.audio&&(v.isMuxed=!0),t(n,v);const _=(y,b)=>{c(n,{data:p,type:v.hasAudio&&!v.isMuxed?"audio":"video"}),b&&b.length&&a(n,b),y&&y.length&&o(n,y),d(null,n,{})};H1({action:"probeMp4StartTime",timescales:n.map.timescales,data:p,transmuxer:n.transmuxer,callback:({data:y,startTime:b})=>{e=y.buffer,n.bytes=p=y,v.hasAudio&&!v.isMuxed&&i(n,"audio","start",b),v.hasVideo&&i(n,"video","start",b),H1({action:"probeEmsgID3",data:p,transmuxer:n.transmuxer,offset:b,callback:({emsgData:x,id3Frames:w})=>{if(e=x.buffer,n.bytes=p=x,!m.video||!x.byteLength||!n.transmuxer){_(void 0,w);return}H1({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:n.transmuxer,data:p,timescales:n.map.timescales,trackIds:[m.video.id],callback:A=>{e=A.data.buffer,n.bytes=p=A.data,A.logs.forEach(function(T){f(Fr(T,{stream:"mp4CaptionParser"}))}),_(A.captions,w)}})}})}});return}if(!n.transmuxer){d(null,n,{});return}if(typeof n.container>"u"&&(n.container=H7(p)),n.container!=="ts"&&n.container!=="aac"){t(n,{hasAudio:!1,hasVideo:!1}),d(null,n,{});return}bqe({segment:n,bytes:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})},fle=function({id:n,key:e,encryptedBytes:t,decryptionWorker:i,segment:r,doneFn:s},a){const o=u=>{if(u.data.source===n){i.removeEventListener("message",o);const c=u.data.decrypted;a(new Uint8Array(c.bytes,c.byteOffset,c.byteLength))}};i.onerror=()=>{const u="An error occurred in the decryption worker",c=Hm({segment:r}),d={message:u,metadata:{error:new Error(u),errorType:$t.Error.StreamingFailedToDecryptSegment,segmentInfo:c,keyInfo:{uri:r.key.resolvedUri||r.map.key.resolvedUri}}};s(d,r)},i.addEventListener("message",o);let l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),i.postMessage(Yoe({source:n,encrypted:t,key:l,iv:e.iv}),[t.buffer,l.buffer])},Sqe=({decryptionWorker:n,segment:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{h({type:"segmentdecryptionstart"}),fle({id:e.requestId,key:e.key,encryptedBytes:e.encryptedBytes,decryptionWorker:n,segment:e,doneFn:d},p=>{e.bytes=p,h({type:"segmentdecryptioncomplete",segment:e}),dle({segment:e,bytes:e.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})})},xqe=({activeXhrs:n,decryptionWorker:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})=>{let p=0,m=!1;return(g,v)=>{if(!m){if(g)return m=!0,F8(n),d(g,v);if(p+=1,p===n.length){const _=function(){if(v.encryptedBytes)return Sqe({decryptionWorker:e,segment:v,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h});dle({segment:v,bytes:v.bytes,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:d,onTransmuxerLog:f,triggerSegmentEventFn:h})};if(v.endOfAllRequests=Date.now(),v.map&&v.map.encryptedBytes&&!v.map.bytes)return h({type:"segmentdecryptionstart",segment:v}),fle({decryptionWorker:e,id:v.requestId+"-init",encryptedBytes:v.map.encryptedBytes,key:v.map.key,segment:v,doneFn:d},y=>{v.map.bytes=y,h({type:"segmentdecryptioncomplete",segment:v}),cle(v,b=>{if(b)return F8(n),d(b,v);_()})});_()}}}},wqe=({loadendState:n,abortFn:e})=>t=>{t.target.aborted&&e&&!n.calledAbortFn&&(e(),n.calledAbortFn=!0)},Tqe=({segment:n,progressFn:e,trackInfoFn:t,timingInfoFn:i,videoSegmentTimingInfoFn:r,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:o,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c})=>d=>{if(!d.target.aborted)return n.stats=Fr(n.stats,mqe(d)),!n.stats.firstBytesReceivedAt&&n.stats.bytesReceived&&(n.stats.firstBytesReceivedAt=Date.now()),e(d,n)},Cqe=({xhr:n,xhrOptions:e,decryptionWorker:t,segment:i,abortFn:r,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:p,doneFn:m,onTransmuxerLog:g,triggerSegmentEventFn:v})=>{const _=[],y=xqe({activeXhrs:_,decryptionWorker:t,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:p,doneFn:m,onTransmuxerLog:g,triggerSegmentEventFn:v});if(i.key&&!i.key.bytes){const T=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&T.push(i.map.key);const C=Fr(e,{uri:i.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),E=zW(i,T,y,v),I={uri:i.key.resolvedUri};v({type:"segmentkeyloadstart",segment:i,keyInfo:I});const k=n(C,E);_.push(k)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){const k=Fr(e,{uri:i.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),O=zW(i,[i.map.key],y,v),U={uri:i.map.key.resolvedUri};v({type:"segmentkeyloadstart",segment:i,keyInfo:U});const z=n(k,O);_.push(z)}const C=Fr(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:N8(i.map),requestType:"segment-media-initialization"}),E=yqe({segment:i,finishProcessingFn:y,triggerSegmentEventFn:v});v({type:"segmentloadstart",segment:i});const I=n(C,E);_.push(I)}const b=Fr(e,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:N8(i),requestType:"segment"}),x=_qe({segment:i,finishProcessingFn:y,responseType:b.responseType,triggerSegmentEventFn:v});v({type:"segmentloadstart",segment:i});const w=n(b,x);w.addEventListener("progress",Tqe({segment:i,progressFn:s,trackInfoFn:a,timingInfoFn:o,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:d,isEndOfTimeline:f,endedTimelineFn:h,dataFn:p})),_.push(w);const A={};return _.forEach(T=>{T.addEventListener("loadend",wqe({loadendState:A,abortFn:r}))}),()=>F8(_)},Aqe=pc("CodecUtils"),Eqe=function(n){const e=n.attributes||{};if(e.CODECS)return md(e.CODECS)},hle=(n,e)=>{const t=e.attributes||{};return n&&n.mediaGroups&&n.mediaGroups.AUDIO&&t.AUDIO&&n.mediaGroups.AUDIO[t.AUDIO]},Mqe=(n,e)=>{if(!hle(n,e))return!0;const t=e.attributes||{},i=n.mediaGroups.AUDIO[t.AUDIO];for(const r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1},m4=function(n){const e={};return n.forEach(({mediaType:t,type:i,details:r})=>{e[t]=e[t]||[],e[t].push(bse(`${i}${r}`))}),Object.keys(e).forEach(function(t){if(e[t].length>1){Aqe(`multiple ${t} codecs found as attributes: ${e[t].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),e[t]=null;return}e[t]=e[t][0]}),e},HW=function(n){let e=0;return n.audio&&e++,n.video&&e++,e},s2=function(n,e){const t=e.attributes||{},i=m4(Eqe(e)||[]);if(hle(n,e)&&!i.audio&&!Mqe(n,e)){const r=m4(GHe(n,t.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},hA=pc("PlaylistSelector"),VW=function(n){if(!n||!n.playlist)return;const e=n.playlist;return JSON.stringify({id:e.id,bandwidth:n.bandwidth,width:n.width,height:n.height,codecs:e.attributes&&e.attributes.CODECS||""})},g4=function(n,e){if(!n)return"";const t=ht.getComputedStyle(n);return t?t[e]:""},V1=function(n,e){const t=n.slice();n.sort(function(i,r){const s=e(i,r);return s===0?t.indexOf(i)-t.indexOf(r):s})},x9=function(n,e){let t,i;return n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH),t=t||ht.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||ht.Number.MAX_VALUE,t-i},Iqe=function(n,e){let t,i;return n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(t=n.attributes.RESOLUTION.width),t=t||ht.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||ht.Number.MAX_VALUE,t===i&&n.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?n.attributes.BANDWIDTH-e.attributes.BANDWIDTH:t-i};let ple=function(n,e,t,i,r,s){if(!n)return;const a={bandwidth:e,width:t,height:i,limitRenditionByPlayerDimensions:r};let o=n.playlists;yl.isAudioOnly(n)&&(o=s.getAudioTrackPlaylists_(),a.audioOnly=!0);let l=o.map(x=>{let w;const A=x.attributes&&x.attributes.RESOLUTION&&x.attributes.RESOLUTION.width,T=x.attributes&&x.attributes.RESOLUTION&&x.attributes.RESOLUTION.height;return w=x.attributes&&x.attributes.BANDWIDTH,w=w||ht.Number.MAX_VALUE,{bandwidth:w,width:A,height:T,playlist:x}});V1(l,(x,w)=>x.bandwidth-w.bandwidth),l=l.filter(x=>!yl.isIncompatible(x.playlist));let u=l.filter(x=>yl.isEnabled(x.playlist));u.length||(u=l.filter(x=>!yl.isDisabled(x.playlist)));const c=u.filter(x=>x.bandwidth*Ma.BANDWIDTH_VARIANCE<e);let d=c[c.length-1];const f=c.filter(x=>x.bandwidth===d.bandwidth)[0];if(r===!1){const x=f||u[0]||l[0];if(x&&x.playlist){let w="sortedPlaylistReps";return f&&(w="bandwidthBestRep"),u[0]&&(w="enabledPlaylistReps"),hA(`choosing ${VW(x)} using ${w} with options`,a),x.playlist}return hA("could not choose a playlist with options",a),null}const h=c.filter(x=>x.width&&x.height);V1(h,(x,w)=>x.width-w.width);const p=h.filter(x=>x.width===t&&x.height===i);d=p[p.length-1];const m=p.filter(x=>x.bandwidth===d.bandwidth)[0];let g,v,_;m||(g=h.filter(x=>x.width>t||x.height>i),v=g.filter(x=>x.width===g[0].width&&x.height===g[0].height),d=v[v.length-1],_=v.filter(x=>x.bandwidth===d.bandwidth)[0]);let y;if(s.leastPixelDiffSelector){const x=h.map(w=>(w.pixelDiff=Math.abs(w.width-t)+Math.abs(w.height-i),w));V1(x,(w,A)=>w.pixelDiff===A.pixelDiff?A.bandwidth-w.bandwidth:w.pixelDiff-A.pixelDiff),y=x[0]}const b=y||_||m||f||u[0]||l[0];if(b&&b.playlist){let x="sortedPlaylistReps";return y?x="leastPixelDiffRep":_?x="resolutionPlusOneRep":m?x="resolutionBestRep":f?x="bandwidthBestRep":u[0]&&(x="enabledPlaylistReps"),hA(`choosing ${VW(b)} using ${x} with options`,a),b.playlist}return hA("could not choose a playlist with options",a),null};const $W=function(){let n=this.useDevicePixelRatio&&ht.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(n=this.customPixelRatio),ple(this.playlists.main,this.systemBandwidth,parseInt(g4(this.tech_.el(),"width"),10)*n,parseInt(g4(this.tech_.el(),"height"),10)*n,this.limitRenditionByPlayerDimensions,this.playlistController_)},Dqe=function(n){let e=-1,t=-1;if(n<0||n>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let i=this.useDevicePixelRatio&&ht.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(i=this.customPixelRatio),e<0&&(e=this.systemBandwidth,t=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==t&&(e=n*this.systemBandwidth+(1-n)*e,t=this.systemBandwidth),ple(this.playlists.main,e,parseInt(g4(this.tech_.el(),"width"),10)*i,parseInt(g4(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},Rqe=function(n){const{main:e,currentTime:t,bandwidth:i,duration:r,segmentDuration:s,timeUntilRebuffer:a,currentTimeline:o,syncController:l}=n,u=e.playlists.filter(p=>!yl.isIncompatible(p));let c=u.filter(yl.isEnabled);c.length||(c=u.filter(p=>!yl.isDisabled(p)));const f=c.filter(yl.hasAttribute.bind(null,"BANDWIDTH")).map(p=>{const g=l.getSyncPoint(p,r,o,t)?1:2,_=yl.estimateSegmentRequestTime(s,i,p)*g-a;return{playlist:p,rebufferingImpact:_}}),h=f.filter(p=>p.rebufferingImpact<=0);return V1(h,(p,m)=>x9(m.playlist,p.playlist)),h.length?h[0]:(V1(f,(p,m)=>p.rebufferingImpact-m.rebufferingImpact),f[0]||null)},Pqe=function(){const n=this.playlists.main.playlists.filter(yl.isEnabled);return V1(n,(t,i)=>x9(t,i)),n.filter(t=>!!s2(this.playlists.main,t).video)[0]||null},kqe=n=>{let e=0,t;return n.bytes&&(t=new Uint8Array(n.bytes),n.segments.forEach(i=>{t.set(i,e),e+=i.byteLength})),t};function mle(n){try{return new URL(n).pathname.split("/").slice(-2).join("/")}catch{return""}}const Lqe=function(n,e,t){if(!n[t]){e.trigger({type:"usage",name:"vhs-608"});let i=t;/^cc708_/.test(t)&&(i="SERVICE"+t.split("_")[1]);const r=e.textTracks().getTrackById(i);if(r)n[t]=r;else{const s=e.options_.vhs&&e.options_.vhs.captionServices||{};let a=t,o=t,l=!1;const u=s[i];u&&(a=u.label,o=u.language,l=u.default),n[t]=e.addRemoteTextTrack({kind:"captions",id:i,default:l,label:a,language:o},!1).track}}},Oqe=function({inbandTextTracks:n,captionArray:e,timestampOffset:t}){if(!e)return;const i=ht.WebKitDataCue||ht.VTTCue;e.forEach(r=>{const s=r.stream;r.content?r.content.forEach(a=>{const o=new i(r.startTime+t,r.endTime+t,a.text);o.line=a.line,o.align="left",o.position=a.position,o.positionAlign="line-left",n[s].addCue(o)}):n[s].addCue(new i(r.startTime+t,r.endTime+t,r.text))})},Nqe=function(n){Object.defineProperties(n.frame,{id:{get(){return $t.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get(){return $t.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get(){return $t.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}})},Bqe=({inbandTextTracks:n,metadataArray:e,timestampOffset:t,videoDuration:i})=>{if(!e)return;const r=ht.WebKitDataCue||ht.VTTCue,s=n.metadataTrack_;if(!s||(e.forEach(c=>{const d=c.cueTime+t;typeof d!="number"||ht.isNaN(d)||d<0||!(d<1/0)||!c.frames||!c.frames.length||c.frames.forEach(f=>{const h=new r(d,d,f.value||f.url||f.data||"");h.frame=f,h.value=f,Nqe(h),s.addCue(h)})}),!s.cues||!s.cues.length))return;const a=s.cues,o=[];for(let c=0;c<a.length;c++)a[c]&&o.push(a[c]);const l=o.reduce((c,d)=>{const f=c[d.startTime]||[];return f.push(d),c[d.startTime]=f,c},{}),u=Object.keys(l).sort((c,d)=>Number(c)-Number(d));u.forEach((c,d)=>{const f=l[c],h=isFinite(i)?i:c,p=Number(u[d+1])||h;f.forEach(m=>{m.endTime=p})})},Fqe={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},Uqe=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),zqe=({inbandTextTracks:n,dateRanges:e})=>{const t=n.metadataTrack_;if(!t)return;const i=ht.WebKitDataCue||ht.VTTCue;e.forEach(r=>{for(const s of Object.keys(r)){if(Uqe.has(s))continue;const a=new i(r.startTime,r.endTime,"");a.id=r.id,a.type="com.apple.quicktime.HLS",a.value={key:Fqe[s],data:r[s]},(s==="scte35Out"||s==="scte35In")&&(a.value.data=new Uint8Array(a.value.data.match(/[\da-f]{2}/gi)).buffer),t.addCue(a)}r.processDateRange()})},GW=(n,e,t)=>{n.metadataTrack_||(n.metadataTrack_=t.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,$t.browser.IS_ANY_SAFARI||(n.metadataTrack_.inBandMetadataTrackDispatchType=e))},Rx=function(n,e,t){let i,r;if(t&&t.cues)for(i=t.cues.length;i--;)r=t.cues[i],r.startTime>=n&&r.endTime<=e&&t.removeCue(r)},Hqe=function(n){const e=n.cues;if(!e)return;const t={};for(let i=e.length-1;i>=0;i--){const r=e[i],s=`${r.startTime}-${r.endTime}-${r.text}`;t[s]?n.removeCue(r):t[s]=r}},Vqe=(n,e,t)=>{if(typeof e>"u"||e===null||!n.length)return[];const i=Math.ceil((e-t+3)*ng.ONE_SECOND_IN_TS);let r;for(r=0;r<n.length&&!(n[r].pts>i);r++);return n.slice(r)},$qe=(n,e,t)=>{if(!e.length)return n;if(t)return e.slice();const i=e[0].pts;let r=0;for(r;r<n.length&&!(n[r].pts>=i);r++);return n.slice(0,r).concat(e)},Gqe=(n,e,t,i)=>{const r=Math.ceil((e-i)*ng.ONE_SECOND_IN_TS),s=Math.ceil((t-i)*ng.ONE_SECOND_IN_TS),a=n.slice();let o=n.length;for(;o--&&!(n[o].pts<=s););if(o===-1)return a;let l=o+1;for(;l--&&!(n[l].pts<=r););return l=Math.max(l,0),a.splice(l,o-l+1),a},Wqe=function(n,e){if(!n&&!e||!n&&e||n&&!e)return!1;if(n===e)return!0;const t=Object.keys(n).sort(),i=Object.keys(e).sort();if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(s!==i[r]||n[s]!==e[s])return!1}return!0},qqe=function(n,e,t){e=e||[];const i=[];let r=0;for(let s=0;s<e.length;s++){const a=e[s];if(n===a.timeline&&(i.push(s),r+=a.duration,r>t))return s}return i.length===0?0:i[i.length-1]},BS=1,jqe=500,WW=n=>typeof n=="number"&&isFinite(n),pA=1/60,Kqe=(n,e,t)=>n!=="main"||!e||!t?null:!t.hasAudio&&!t.hasVideo?"Neither audio nor video found in segment.":e.hasVideo&&!t.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&t.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,Xqe=(n,e,t)=>{let i=e-Ma.BACK_BUFFER_LENGTH;n.length&&(i=Math.max(i,n.start(0)));const r=e-t;return Math.min(r,i)},jv=n=>{const{startOfSegment:e,duration:t,segment:i,part:r,playlist:{mediaSequence:s,id:a,segments:o=[]},mediaIndex:l,partIndex:u,timeline:c}=n,d=o.length-1;let f="mediaIndex/partIndex increment";n.getMediaInfoForTime?f=`getMediaInfoForTime (${n.getMediaInfoForTime})`:n.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),n.independent&&(f+=` with independent ${n.independent}`);const h=typeof u=="number",p=n.segment.uri?"segment":"pre-segment",m=h?Loe({preloadSegment:i})-1:0;return`${p} [${s+l}/${s+d}]`+(h?` part [${u}/${m}]`:"")+` segment start/end [${i.start} => ${i.end}]`+(h?` part start/end [${r.start} => ${r.end}]`:"")+` startOfSegment [${e}] duration [${t}] timeline [${c}] selected by [${f}] playlist [${a}]`},qW=n=>`${n}TimingInfo`,Yqe=({segmentTimeline:n,currentTimeline:e,startOfSegment:t,buffered:i,overrideCheck:r})=>!r&&n===e?null:n<e?t:i.length?i.end(i.length-1):t,U8=({timelineChangeController:n,currentTimeline:e,segmentTimeline:t,loaderType:i,audioDisabled:r})=>{if(e===t)return!1;if(i==="audio"){const s=n.lastTimelineChange({type:"main"});return!s||s.to!==t}if(i==="main"&&r){const s=n.pendingTimelineChange({type:"audio"});return!(s&&s.to===t)}return!1},Qqe=n=>{if(!n)return!1;const e=n.pendingTimelineChange({type:"audio"}),t=n.pendingTimelineChange({type:"main"}),i=e&&t,r=i&&e.to!==t.to;return!!(i&&e.from!==-1&&t.from!==-1&&r)},Zqe=n=>{const e=n.timelineChangeController_.pendingTimelineChange({type:"audio"}),t=n.timelineChangeController_.pendingTimelineChange({type:"main"});return e&&t&&e.to<t.to},Vh=n=>{const e=n.pendingSegment_;if(!e)return;if(U8({timelineChangeController:n.timelineChangeController_,currentTimeline:n.currentTimeline_,segmentTimeline:e.timeline,loaderType:n.loaderType_,audioDisabled:n.audioDisabled_})&&Qqe(n.timelineChangeController_)){if(Zqe(n)){n.timelineChangeController_.trigger("audioTimelineBehind");return}n.timelineChangeController_.trigger("fixBadTimelineChange")}},Jqe=n=>{let e=0;return["video","audio"].forEach(function(t){const i=n[`${t}TimingInfo`];if(!i)return;const{start:r,end:s}=i;let a;typeof r=="bigint"||typeof s=="bigint"?a=ht.BigInt(s)-ht.BigInt(r):typeof r=="number"&&typeof s=="number"&&(a=s-r),typeof a<"u"&&a>e&&(e=a)}),typeof e=="bigint"&&e<Number.MAX_SAFE_INTEGER&&(e=Number(e)),e},jW=({segmentDuration:n,maxDuration:e})=>n?Math.round(n)>e+Md:!1,eje=(n,e)=>{if(e!=="hls")return null;const t=Jqe({audioTimingInfo:n.audioTimingInfo,videoTimingInfo:n.videoTimingInfo});if(!t)return null;const i=n.playlist.targetDuration,r=jW({segmentDuration:t,maxDuration:i*2}),s=jW({segmentDuration:t,maxDuration:i}),a=`Segment with index ${n.mediaIndex} from playlist ${n.playlist.id} has a duration of ${t} when the reported duration is ${n.duration} and the target duration is ${i}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return r||s?{severity:r?"warn":"info",message:a}:null},Hm=({type:n,segment:e})=>{if(!e)return;const t=!!(e.key||e.map&&e.map.ke),i=!!(e.map&&!e.map.bytes),r=e.startOfSegment===void 0?e.start:e.startOfSegment;return{type:n||e.type,uri:e.resolvedUri||e.uri,start:r,duration:e.duration,isEncrypted:t,isMediaInitialization:i}};class z8 extends $t.EventTarget{constructor(e,t={}){if(super(),!e)throw new TypeError("Initialization settings are required");if(typeof e.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.vhs_=e.vhs,this.loaderType_=e.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.sourceType_=e.sourceType,this.sourceUpdater_=e.sourceUpdater,this.inbandTextTracks_=e.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=e.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=e.parse708captions,this.useDtsForTimestampOffset_=e.useDtsForTimestampOffset,this.captionServices_=e.captionServices,this.exactManifestTimings=e.exactManifestTimings,this.addMetadataToTextTrack=e.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=e.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=pc(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(i){i!==this.state_&&(this.logger_(`${this.state_} -> ${i}`),this.state_=i,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vh(this)}),this.sourceUpdater_.on("codecschange",i=>{this.trigger(Ds({type:"codecschange"},i))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vh(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",i=>{this.trigger(Ds({type:"timelinechange"},i)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Vh(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vh(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return KP.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&ht.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,ht.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e}error(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&KP.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Pa();if(this.loaderType_==="main"){const{hasAudio:t,hasVideo:i,isMuxed:r}=e;if(i&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(i)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(e,t=!1){if(!e)return null;const i=p4(e);let r=this.initSegments_[i];return t&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e}segmentKey(e,t=!1){if(!e)return null;const i=Qoe(e);let r=this.keyCache_[i];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});const s={resolvedUri:(r||e).resolvedUri};return r&&(s.bytes=r.bytes),s}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(e,t={}){if(!e||this.playlist_&&this.playlist_.endList&&e.endList&&this.playlist_.uri===e.uri)return;const i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));let s=null;if(i&&(i.id?s=i.id:i.uri&&(s=i.uri)),this.logger_(`playlist update [${s} => ${e.id||e.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(e,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${qP(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!i||i.uri!==e.uri){this.mediaIndex!==null&&(!e.endList&&typeof e.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const a=e.mediaSequence-i.mediaSequence;if(this.logger_(`live window shift [${a}]`),this.mediaIndex!==null)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){const l=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=l}}r&&(r.mediaIndex-=a,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(i,e)}pause(){this.checkBufferTimeout_&&(ht.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&KP.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const e=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!e&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(e,t,i=()=>{},r=!1){if(t===1/0&&(t=this.duration_()),t<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let s=1;const a=()=>{s--,s===0&&i()};(r||!this.audioDisabled_)&&(s++,this.sourceUpdater_.removeAudio(e,t,a)),(r||this.loaderType_==="main")&&(this.gopBuffer_=Gqe(this.gopBuffer_,e,t,this.timeMapping_),s++,this.sourceUpdater_.removeVideo(e,t,a));for(const o in this.inbandTextTracks_)Rx(e,t,this.inbandTextTracks_[o]);Rx(e,t,this.segmentMetadataTrack_),a()}monitorBuffer_(){this.checkBufferTimeout_&&ht.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ht.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&ht.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=ht.setTimeout(this.monitorBufferTick_.bind(this),jqe)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const e=this.chooseNextRequest_();if(!e)return;const t={segmentInfo:Hm({type:this.loaderType_,segment:e})};this.trigger({type:"segmentselected",metadata:t}),typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e)}isEndOfStream_(e=this.mediaIndex,t=this.playlist_,i=this.partIndex){if(!t||!this.mediaSource_)return!1;const r=typeof e=="number"&&t.segments[e],s=e+1===t.segments.length,a=!r||!r.parts||i+1===r.parts.length;return t.endList&&this.mediaSource_.readyState==="open"&&s&&a}chooseNextRequest_(){const e=this.buffered_(),t=qP(e)||0,i=v9(e,this.currentTime_()),r=!this.hasPlayed_()&&i>=1,s=i>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||r||s)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(o.isSyncRequest)o.mediaIndex=qqe(this.currentTimeline_,a,t),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${o.mediaIndex}`);else if(this.mediaIndex!==null){const f=a[this.mediaIndex],h=typeof this.partIndex=="number"?this.partIndex:-1;o.startOfSegment=f.end?f.end:t,f.parts&&f.parts[h+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=h+1):o.mediaIndex=this.mediaIndex+1}else{let f,h,p;const m=this.fetchAtBuffer_?t:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${m}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${t}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const g=this.getSyncInfoFromMediaSequenceSync_(m);if(!g){const v="No sync info found while using media sequence sync";return this.error({message:v,metadata:{errorType:$t.Error.StreamingFailedToSelectNextSegment,error:new Error(v)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${g.start} --> ${g.end})`),f=g.segmentIndex,h=g.partIndex,p=g.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const g=yl.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:m,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});f=g.segmentIndex,h=g.partIndex,p=g.startTime}o.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${m}`:`currentTime ${m}`,o.mediaIndex=f,o.startOfSegment=p,o.partIndex=h,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${o.mediaIndex} `)}const l=a[o.mediaIndex];let u=l&&typeof o.partIndex=="number"&&l.parts&&l.parts[o.partIndex];if(!l||typeof o.partIndex=="number"&&!u)return null;typeof o.partIndex!="number"&&l.parts&&(o.partIndex=0,u=l.parts[0]);const c=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!i&&u&&!c&&!u.independent)if(o.partIndex===0){const f=a[o.mediaIndex-1],h=f.parts&&f.parts.length&&f.parts[f.parts.length-1];h&&h.independent&&(o.mediaIndex-=1,o.partIndex=f.parts.length-1,o.independent="previous segment")}else l.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");const d=this.mediaSource_&&this.mediaSource_.readyState==="ended";return o.mediaIndex>=a.length-1&&d&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,o.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(o))}getSyncInfoFromMediaSequenceSync_(e){if(!this.mediaSequenceSync_)return null;const t=Math.max(e,this.mediaSequenceSync_.start);e!==t&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${e} to ${t}`);const i=this.mediaSequenceSync_.getSyncInfoForTime(t);if(!i)return null;if(!i.isAppended)return i;const r=this.mediaSequenceSync_.getSyncInfoForTime(i.end);return r?(r.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),r):null}generateSegmentInfo_(e){const{independent:t,playlist:i,mediaIndex:r,startOfSegment:s,isSyncRequest:a,partIndex:o,forceTimestampOffset:l,getMediaInfoForTime:u}=e,c=i.segments[r],d=typeof o=="number"&&c.parts[o],f={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||c.resolvedUri,mediaIndex:r,partIndex:d?o:null,isSyncRequest:a,startOfSegment:s,playlist:i,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:c.timeline,duration:d&&d.duration||c.duration,segment:c,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},h=typeof l<"u"?l:this.isPendingTimestampOffset_;f.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:c.timeline,currentTimeline:this.currentTimeline_,startOfSegment:s,buffered:this.buffered_(),overrideCheck:h});const p=qP(this.sourceUpdater_.audioBuffered());return typeof p=="number"&&(f.audioAppendStart=p-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(f.gopsToAlignWith=Vqe(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),f}timestampOffsetForSegment_(e){return Yqe(e)}earlyAbortWhenNeeded_(e){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return;const t=this.currentTime_(),i=e.bandwidth,r=this.pendingSegment_.duration,s=yl.estimateSegmentRequestTime(r,i,this.playlist_,e.bytesReceived),a=vWe(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(s<=a)return;const o=Rqe({main:this.vhs_.playlists.main,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o)return;const u=s-a-o.rebufferingImpact;let c=.5;a<=Md&&(c=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c)&&(this.bandwidth=o.playlist.attributes.BANDWIDTH*Ma.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(e){this.logger_(`Aborting ${jv(e)}`),this.mediaRequestsAborted+=1}handleProgress_(e,t){this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&this.trigger("progress")}handleTrackInfo_(e,t){const{hasAudio:i,hasVideo:r}=t,s={segmentInfo:Hm({type:this.loaderType_,segment:e}),trackInfo:{hasAudio:i,hasVideo:r}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:s}),this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(t)||(t=t||{},Wqe(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vh(this))))}handleTimingInfo_(e,t,i,r){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;const s=this.pendingSegment_,a=qW(t);s[a]=s[a]||{},s[a][i]=r,this.logger_(`timinginfo: ${t} - ${i} - ${r}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Vh(this)}handleCaptions_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(t.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));return}const r=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),s={};t.forEach(a=>{s[a.stream]=s[a.stream]||{startTime:1/0,captions:[],endTime:0};const o=s[a.stream];o.startTime=Math.min(o.startTime,a.startTime+r),o.endTime=Math.max(o.endTime,a.endTime+r),o.captions.push(a)}),Object.keys(s).forEach(a=>{const{startTime:o,endTime:l,captions:u}=s[a],c=this.inbandTextTracks_;this.logger_(`adding cues from ${o} -> ${l} for ${a}`),Lqe(c,this.vhs_.tech_,a),Rx(o,l,c[a]),Oqe({captionArray:u,inbandTextTracks:c,timestampOffset:r})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(e,t,i){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,i));return}this.addMetadataToTextTrack(i,t,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(e=>e()),this.metadataQueue_.caption.forEach(e=>e()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const e=this.callQueue_;this.callQueue_=[],e.forEach(t=>t())}processLoadQueue_(){const e=this.loadQueue_;this.loadQueue_=[],e.forEach(t=>t())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!U8({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(e=this.pendingSegment_){return e&&e.trackInfo||this.currentMediaInfo_}getMediaInfo_(e=this.pendingSegment_){return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;const{hasAudio:i,hasVideo:r,isMuxed:s}=t;return!(r&&!e.videoTimingInfo||i&&!this.audioDisabled_&&!s&&!e.audioTimingInfo||U8({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(e,t){if(this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Vh(this),this.callQueue_.push(this.handleData_.bind(this,e,t));return}const i=this.pendingSegment_;if(this.setTimeMapping_(i.timeline),this.updateMediaSecondsLoaded_(i.part||i.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),i.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),i.isFmp4=e.isFmp4,i.timingInfo=i.timingInfo||{},i.isFmp4)this.trigger("fmp4"),i.timingInfo.start=i[qW(t.type)].start;else{const r=this.getCurrentMediaInfo_(),s=this.loaderType_==="main"&&r&&r.hasVideo;let a;s&&(a=i.videoTimingInfo.start),i.timingInfo.start=this.trueSegmentStart_({currentStart:i.timingInfo.start,playlist:i.playlist,mediaIndex:i.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:s,firstVideoFrameTimeForData:a,videoTimingInfo:i.videoTimingInfo,audioTimingInfo:i.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(i,t.type),this.updateSourceBufferTimestampOffset_(i),i.isSyncRequest){this.updateTimingInfoEnd_(i),this.syncController_.saveSegmentTimingInfo({segmentInfo:i,shouldSaveTimelineMapping:this.loaderType_==="main"});const r=this.chooseNextRequest_();if(r.mediaIndex!==i.mediaIndex||r.partIndex!==i.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}i.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(i,t)}}updateAppendInitSegmentStatus(e,t){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)}getInitSegmentAndUpdateState_({type:e,initSegment:t,map:i,playlist:r}){if(i){const s=p4(i);if(this.activeInitSegmentId_===s)return null;t=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=s}return t&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,t):null}handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i},r){const s=this.sourceUpdater_.audioBuffered(),a=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ig(s).join(", ")),a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ig(a).join(", "));const o=s.length?s.start(0):0,l=s.length?s.end(s.length-1):0,u=a.length?a.start(0):0,c=a.length?a.end(a.length-1):0;if(l-o<=BS&&c-u<=BS){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${i.byteLength}, audio buffer: ${ig(s).join(", ")}, video buffer: ${ig(a).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:e,type:t,bytes:i}));const f=this.currentTime_()-BS;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${f}`),this.remove(0,f,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${BS}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=ht.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},BS*1e3)},!0)}handleAppendError_({segmentInfo:e,type:t,bytes:i},r){if(r){if(r.code===Woe){this.handleQuotaExceededError_({segmentInfo:e,type:t,bytes:i});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",r),this.error({message:`${t} append of ${i.length}b failed for segment #${e.mediaIndex} in playlist ${e.playlist.id}`,metadata:{errorType:$t.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:e,type:t,initSegment:i,data:r,bytes:s}){if(!s){const o=[r];let l=r.byteLength;i&&(o.unshift(i),l+=i.byteLength),s=kqe({bytes:l,segments:o})}const a={segmentInfo:Hm({type:this.loaderType_,segment:e})};this.trigger({type:"segmentappendstart",metadata:a}),this.sourceUpdater_.appendBuffer({segmentInfo:e,type:t,bytes:s},this.handleAppendError_.bind(this,{segmentInfo:e,type:t,bytes:s}))}handleSegmentTimingInfo_(e,t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId)return;const r=this.pendingSegment_.segment,s=`${e}TimingInfo`;r[s]||(r[s]={}),r[s].transmuxerPrependedSeconds=i.prependedContentDuration||0,r[s].transmuxedPresentationStart=i.start.presentation,r[s].transmuxedDecodeStart=i.start.decode,r[s].transmuxedPresentationEnd=i.end.presentation,r[s].transmuxedDecodeEnd=i.end.decode,r[s].baseMediaDecodeTime=i.baseMediaDecodeTime}appendData_(e,t){const{type:i,data:r}=t;if(!r||!r.byteLength||i==="audio"&&this.audioDisabled_)return;const s=this.getInitSegmentAndUpdateState_({type:i,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:i,initSegment:s,data:r})}loadSegment_(e){if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Vh(this),this.loadQueue_.push(()=>{const t=Ds({},e,{forceTimestampOffset:!0});Ds(e,this.generateSegmentInfo_(t)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)}updateTransmuxerAndRequestSegment_(e){this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));const t=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=this.mediaIndex!==null,s=e.timeline!==this.currentTimeline_&&e.timeline>0,a=i||r&&s;this.logger_(`Requesting
${mle(e.uri)}
${jv(e)}`),t.map&&!t.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Cqe({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:t,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:o,level:l,stream:u})=>{this.logger_(`${jv(e)} logged from transmuxer stream ${u} as a ${l}: ${o}`)},triggerSegmentEventFn:({type:o,segment:l,keyInfo:u,trackInfo:c,timingInfo:d})=>{const h={segmentInfo:Hm({segment:l})};u&&(h.keyInfo=u),c&&(h.trackInfo=c),d&&(h.timingInfo=d),this.trigger({type:o,metadata:h})}})}trimBackBuffer_(e){const t=Xqe(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}createSimplifiedSegmentObj_(e){const t=e.segment,i=e.part,r=e.segment.key||e.segment.map&&e.segment.map.key,s=e.segment.map&&!e.segment.map.bytes,a={resolvedUri:i?i.resolvedUri:t.resolvedUri,byterange:i?i.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part,type:this.loaderType_,start:e.startOfSegment,duration:e.duration,isEncrypted:r,isMediaInitialization:s},o=e.playlist.segments[e.mediaIndex-1];if(o&&o.timeline===t.timeline&&(o.videoTimingInfo?a.baseStartTime=o.videoTimingInfo.transmuxedDecodeEnd:o.audioTimingInfo&&(a.baseStartTime=o.audioTimingInfo.transmuxedDecodeEnd)),t.key){const l=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);a.key=this.segmentKey(t.key),a.key.iv=l}return t.map&&(a.map=this.initSegmentForMap(t.map)),a}saveTransferStats_(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)}saveBandwidthRelatedStats_(e,t){if(this.pendingSegment_.byteLength=t.bytesReceived,e<pA){this.logger_(`Ignoring segment's bandwidth because its duration of ${e} is less than the min to record ${pA}`);return}const i={bandwidthInfo:{from:this.bandwidth,to:t.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:i}),this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(e,t,i){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,i));return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_||t.requestId!==this.pendingSegment_.requestId)return;if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Dd.ABORTED)return;if(this.pause(),e.code===Dd.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}const r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,i.gopInfo&&(this.gopBuffer_=$qe(this.gopBuffer_,i.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}setTimeMapping_(e){const t=this.syncController_.mappingForTimeline(e);t!==null&&(this.timeMapping_=t)}updateMediaSecondsLoaded_(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}shouldUpdateTransmuxerTimestampOffset_(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:e,playlist:t,mediaIndex:i,firstVideoFrameTimeForData:r,currentVideoTimestampOffset:s,useVideoTimingInfo:a,videoTimingInfo:o,audioTimingInfo:l}){if(typeof e<"u")return e;if(!a)return l.start;const u=t.segments[i-1];return i===0||!u||typeof u.start>"u"||u.end!==r+s?r:o.start}waitForAppendsToComplete_(e){const t=this.getCurrentMediaInfo_(e);if(!t){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:i,hasVideo:r,isMuxed:s}=t,a=this.loaderType_==="main"&&r,o=!this.audioDisabled_&&i&&!s;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}checkAppendsDone_(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(e){const t=Kqe(this.loaderType_,this.getCurrentMediaInfo_(),e);return t?(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(e){if(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")return;let t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e,audioTimingInfo:t,timingInfo:i}){return this.useDtsForTimestampOffset_?e&&typeof e.transmuxedDecodeStart=="number"?e.transmuxedDecodeStart:t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:i.start:i.start}updateTimingInfoEnd_(e){e.timingInfo=e.timingInfo||{};const t=this.getMediaInfo_(),r=this.loaderType_==="main"&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;r&&(e.timingInfo.end=typeof r.end=="number"?r.end:r.start+e.duration)}handleAppendsDone_(){if(this.pendingSegment_){const l={segmentInfo:Hm({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:l})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const e=this.pendingSegment_;e.part&&e.part.syncInfo?e.part.syncInfo.markAppended():e.segment.syncInfo&&e.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});const t=eje(e,this.sourceType_);if(t&&(t.severity==="warn"?$t.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${jv(e)}`);return}this.logger_(`Appended ${jv(e)}`),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");const i=e.segment,r=e.part,s=i.end&&this.currentTime_()-i.end>e.playlist.targetDuration*3,a=r&&r.end&&this.currentTime_()-r.end>e.playlist.partTargetDuration*3;if(s||a){this.logger_(`bad ${s?"segment":"part"} ${jv(e)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(e){if(e.duration<pA){this.logger_(`Ignoring segment's throughput because its duration of ${e.duration} is less than the min to record ${pA}`);return}const t=this.throughput.rate,i=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/i*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}addSegmentMetadataCue_(e){if(!this.segmentMetadataTrack_)return;const t=e.segment,i=t.start,r=t.end;if(!WW(i)||!WW(r))return;Rx(i,r,this.segmentMetadataTrack_);const s=ht.WebKitDataCue||ht.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:i,end:r},o=JSON.stringify(a),l=new s(i,r,o);l.value=a,this.segmentMetadataTrack_.addCue(l)}}function Vf(){}const gle=function(n){return typeof n!="string"?n:n.replace(/./,e=>e.toUpperCase())},tje=["video","audio"],H8=(n,e)=>{const t=e[`${n}Buffer`];return t&&t.updating||e.queuePending[n]},nje=(n,e)=>{for(let t=0;t<e.length;t++){const i=e[t];if(i.type==="mediaSource")return null;if(i.type===n)return t}return null},$1=(n,e)=>{if(e.queue.length===0)return;let t=0,i=e.queue[t];if(i.type==="mediaSource"){!e.updating()&&e.mediaSource.readyState!=="closed"&&(e.queue.shift(),i.action(e),i.doneFn&&i.doneFn(),$1("audio",e),$1("video",e));return}if(n!=="mediaSource"&&!(!e.ready()||e.mediaSource.readyState==="closed"||H8(n,e))){if(i.type!==n){if(t=nje(n,e.queue),t===null)return;i=e.queue[t]}if(e.queue.splice(t,1),e.queuePending[n]=i,i.action(n,e),!i.doneFn){e.queuePending[n]=null,$1(n,e);return}}},vle=(n,e)=>{const t=e[`${n}Buffer`],i=gle(n);t&&(t.removeEventListener("updateend",e[`on${i}UpdateEnd_`]),t.removeEventListener("error",e[`on${i}Error_`]),e.codecs[n]=null,e[`${n}Buffer`]=null)},yd=(n,e)=>n&&e&&Array.prototype.indexOf.call(n.sourceBuffers,e)!==-1,Gl={appendBuffer:(n,e,t)=>(i,r)=>{const s=r[`${i}Buffer`];if(yd(r.mediaSource,s)){r.logger_(`Appending segment ${e.mediaIndex}'s ${n.length} bytes to ${i}Buffer`);try{s.appendBuffer(n)}catch(a){r.logger_(`Error with code ${a.code} `+(a.code===Woe?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${e.mediaIndex} to ${i}Buffer`),r.queuePending[i]=null,t(a)}}},remove:(n,e)=>(t,i)=>{const r=i[`${t}Buffer`];if(yd(i.mediaSource,r)){i.logger_(`Removing ${n} to ${e} from ${t}Buffer`);try{r.remove(n,e)}catch{i.logger_(`Remove ${n} to ${e} from ${t}Buffer failed`)}}},timestampOffset:n=>(e,t)=>{const i=t[`${e}Buffer`];yd(t.mediaSource,i)&&(t.logger_(`Setting ${e}timestampOffset to ${n}`),i.timestampOffset=n)},callback:n=>(e,t)=>{n()},endOfStream:n=>e=>{if(e.mediaSource.readyState==="open"){e.logger_(`Calling mediaSource endOfStream(${n||""})`);try{e.mediaSource.endOfStream(n)}catch(t){$t.log.warn("Failed to call media source endOfStream",t)}}},duration:n=>e=>{e.logger_(`Setting mediaSource duration to ${n}`);try{e.mediaSource.duration=n}catch(t){$t.log.warn("Failed to set media source duration",t)}},abort:()=>(n,e)=>{if(e.mediaSource.readyState!=="open")return;const t=e[`${n}Buffer`];if(yd(e.mediaSource,t)){e.logger_(`calling abort on ${n}Buffer`);try{t.abort()}catch(i){$t.log.warn(`Failed to abort on ${n}Buffer`,i)}}},addSourceBuffer:(n,e)=>t=>{const i=gle(n),r=x_(e);t.logger_(`Adding ${n}Buffer with codec ${e} to mediaSource`);const s=t.mediaSource.addSourceBuffer(r);s.addEventListener("updateend",t[`on${i}UpdateEnd_`]),s.addEventListener("error",t[`on${i}Error_`]),t.codecs[n]=e,t[`${n}Buffer`]=s},removeSourceBuffer:n=>e=>{const t=e[`${n}Buffer`];if(vle(n,e),!!yd(e.mediaSource,t)){e.logger_(`Removing ${n}Buffer with codec ${e.codecs[n]} from mediaSource`);try{e.mediaSource.removeSourceBuffer(t)}catch(i){$t.log.warn(`Failed to removeSourceBuffer ${n}Buffer`,i)}}},changeType:n=>(e,t)=>{const i=t[`${e}Buffer`],r=x_(n);if(!yd(t.mediaSource,i))return;const s=n.substring(0,n.indexOf(".")),a=t.codecs[e];if(a.substring(0,a.indexOf("."))===s)return;const l={codecsChangeInfo:{from:a,to:n}};t.trigger({type:"codecschange",metadata:l}),t.logger_(`changing ${e}Buffer codec from ${a} to ${n}`);try{i.changeType(r),t.codecs[e]=n}catch(u){l.errorType=$t.Error.StreamingCodecsChangeError,l.error=u,u.metadata=l,t.error_=u,t.trigger("error"),$t.log.warn(`Failed to changeType on ${e}Buffer`,u)}}},Wl=({type:n,sourceUpdater:e,action:t,doneFn:i,name:r})=>{e.queue.push({type:n,action:t,doneFn:i,name:r}),$1(n,e)},KW=(n,e)=>t=>{const i=e[`${n}Buffered`](),r=pWe(i);if(e.logger_(`received "updateend" event for ${n} Source Buffer: `,r),e.queuePending[n]){const s=e.queuePending[n].doneFn;e.queuePending[n]=null,s&&s(e[`${n}Error_`])}$1(n,e)};class yle extends $t.EventTarget{constructor(e){super(),this.mediaSource=e,this.sourceopenListener_=()=>$1("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=pc("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=KW("video",this),this.onAudioUpdateEnd_=KW("audio",this),this.onVideoError_=t=>{this.videoError_=t},this.onAudioError_=t=>{this.audioError_=t},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(e,t){Wl({type:"mediaSource",sourceUpdater:this,action:Gl.addSourceBuffer(e,t),name:"addSourceBuffer"})}abort(e){Wl({type:e,sourceUpdater:this,action:Gl.abort(e),name:"abort"})}removeSourceBuffer(e){if(!this.canRemoveSourceBuffer()){$t.log.error("removeSourceBuffer is not supported!");return}Wl({type:"mediaSource",sourceUpdater:this,action:Gl.removeSourceBuffer(e),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!$t.browser.IS_FIREFOX&&ht.MediaSource&&ht.MediaSource.prototype&&typeof ht.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return ht.SourceBuffer&&ht.SourceBuffer.prototype&&typeof ht.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(e,t){if(!this.canChangeType()){$t.log.error("changeType is not supported!");return}Wl({type:e,sourceUpdater:this,action:Gl.changeType(t),name:"changeType"})}addOrChangeSourceBuffers(e){if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(t=>{const i=e[t];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(t,i);this.canChangeType()&&this.changeType(t,i)})}appendBuffer(e,t){const{segmentInfo:i,type:r,bytes:s}=e;if(this.processedAppend_=!0,r==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,t]),this.logger_(`delayed audio append of ${s.length} until video append`);return}const a=t;if(Wl({type:r,sourceUpdater:this,action:Gl.appendBuffer(s,i||{mediaIndex:-1},a),doneFn:t,name:"appendBuffer"}),r==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const o=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${o.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,o.forEach(l=>{this.appendBuffer.apply(this,l)})}}audioBuffered(){return yd(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Pa()}videoBuffered(){return yd(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Pa()}buffered(){const e=yd(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=yd(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():gWe(this.audioBuffered(),this.videoBuffered())}setDuration(e,t=Vf){Wl({type:"mediaSource",sourceUpdater:this,action:Gl.duration(e),name:"duration",doneFn:t})}endOfStream(e=null,t=Vf){typeof e!="string"&&(e=void 0),Wl({type:"mediaSource",sourceUpdater:this,action:Gl.endOfStream(e),name:"endOfStream",doneFn:t})}removeAudio(e,t,i=Vf){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){i();return}Wl({type:"audio",sourceUpdater:this,action:Gl.remove(e,t),doneFn:i,name:"remove"})}removeVideo(e,t,i=Vf){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){i();return}Wl({type:"video",sourceUpdater:this,action:Gl.remove(e,t),doneFn:i,name:"remove"})}updating(){return!!(H8("audio",this)||H8("video",this))}audioTimestampOffset(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Wl({type:"audio",sourceUpdater:this,action:Gl.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_}videoTimestampOffset(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==e&&(Wl({type:"video",sourceUpdater:this,action:Gl.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}audioQueueCallback(e){this.audioBuffer&&Wl({type:"audio",sourceUpdater:this,action:Gl.callback(e),name:"callback"})}videoQueueCallback(e){this.videoBuffer&&Wl({type:"video",sourceUpdater:this,action:Gl.callback(e),name:"callback"})}dispose(){this.trigger("dispose"),tje.forEach(e=>{this.abort(e),this.canRemoveSourceBuffer()?this.removeSourceBuffer(e):this[`${e}QueueCallback`](()=>vle(e,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const XW=n=>decodeURIComponent(escape(String.fromCharCode.apply(null,n))),ije=n=>{const e=new Uint8Array(n);return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")},YW=new Uint8Array(`

`.split("").map(n=>n.charCodeAt(0)));class rje extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class sje extends z8{constructor(e,t={}){super(e,t),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=e.featuresNativeTextTracks,this.loadVttJs=e.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Pa();const e=this.subtitlesTrack_.cues,t=e[0].startTime,i=e[e.length-1].startTime;return Pa([[t,i]])}initSegmentForMap(e,t=!1){if(!e)return null;const i=p4(e);let r=this.initSegments_[i];if(t&&!r&&e.bytes){const s=YW.byteLength+e.bytes.byteLength,a=new Uint8Array(s);a.set(e.bytes),a.set(YW,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(e,t){Rx(e,t,this.subtitlesTrack_)}fillBuffer_(){const e=this.chooseNextRequest_();if(e){if(this.syncController_.timestampOffsetForTimeline(e.timeline)===null){const t=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",t),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(e)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e}stopForError(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(e,t,i){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(t.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Dd.TIMEOUT&&this.handleTimeout_(),e.code===Dd.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}const r=this.pendingSegment_,s=i.mp4VttCues&&i.mp4VttCues.length;s&&(r.mp4VttCues=i.mp4VttCues),this.saveBandwidthRelatedStats_(r.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");const a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,typeof ht.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(e,t,i),()=>this.stopForError({message:"Error loading vtt.js"}));return}a.requested=!0;try{this.parseVTTCues_(r)}catch(o){this.stopForError({message:o.message,metadata:{errorType:$t.Error.StreamingVttParserError,error:o}});return}if(s||this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach(o=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new ht.VTTCue(o.startTime,o.endTime,o.text):o)}),Hqe(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(e,t){const i=e&&e.type==="vtt",r=t&&t.type==="text";i&&r&&super.handleData_(e,t)}updateTimingInfoEnd_(){}parseMp4VttCues_(e){const t=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();e.mp4VttCues.forEach(i=>{const r=i.start+t,s=i.end+t,a=new ht.VTTCue(r,s,i.cueText);i.settings&&i.settings.split(" ").forEach(o=>{const l=o.split(":"),u=l[0],c=l[1];a[u]=isNaN(c)?c:Number(c)}),e.cues.push(a)})}parseVTTCues_(e){let t,i=!1;if(typeof ht.WebVTT!="function")throw new rje;if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},e.mp4VttCues){this.parseMp4VttCues_(e);return}typeof ht.TextDecoder=="function"?t=new ht.TextDecoder("utf8"):(t=ht.WebVTT.StringDecoder(),i=!0);const r=new ht.WebVTT.Parser(ht,ht.vttjs,t);if(r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=a=>{e.timestampmap=a},r.onparsingerror=a=>{$t.log.warn("Error encountered when parsing cues: "+a.message)},e.segment.map){let a=e.segment.map.bytes;i&&(a=XW(a)),r.parse(a)}let s=e.bytes;i&&(s=XW(s)),r.parse(s),r.flush()}updateTimeMapping_(e,t,i){const r=e.segment;if(!t)return;if(!e.cues.length){r.empty=!0;return}const{MPEGTS:s,LOCAL:a}=e.timestampmap,l=s/ng.ONE_SECOND_IN_TS-a+t.mapping;if(e.cues.forEach(u=>{const c=u.endTime-u.startTime,d=this.handleRollover_(u.startTime+l,t.time);u.startTime=Math.max(d,0),u.endTime=Math.max(d+c,0)}),!i.syncInfo){const u=e.cues[0].startTime,c=e.cues[e.cues.length-1].startTime;i.syncInfo={mediaSequence:i.mediaSequence+e.mediaIndex,time:Math.min(u,c-r.duration)}}}handleRollover_(e,t){if(t===null)return e;let i=e*ng.ONE_SECOND_IN_TS;const r=t*ng.ONE_SECOND_IN_TS;let s;for(r<i?s=-8589934592:s=8589934592;Math.abs(i-r)>4294967296;)i+=s;return i/ng.ONE_SECOND_IN_TS}}const aje=function(n,e){const t=n.cues;for(let i=0;i<t.length;i++){const r=t[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},oje=function(n,e,t=0){if(!n.segments)return;let i=t,r;for(let s=0;s<n.segments.length;s++){const a=n.segments[s];if(r||(r=aje(e,i+a.duration/2)),r){if("cueIn"in a){r.endTime=i,r.adEndTime=i,i+=a.duration,r=null;continue}if(i<r.endTime){i+=a.duration;continue}r.endTime+=a.duration}else if("cueOut"in a&&(r=new ht.VTTCue(i,i+a.duration,a.cueOut),r.adStartTime=i,r.adEndTime=i+parseFloat(a.cueOut),e.addCue(r)),"cueOutCont"in a){const[o,l]=a.cueOutCont.split("/").map(parseFloat);r=new ht.VTTCue(i,i+a.duration,""),r.adStartTime=i-o,r.adEndTime=r.adStartTime+l,e.addCue(r)}i+=a.duration}};class QW{constructor({start:e,end:t,segmentIndex:i,partIndex:r=null,appended:s=!1}){this.start_=e,this.end_=t,this.segmentIndex_=i,this.partIndex_=r,this.appended_=s}isInRange(e){return e>=this.start&&e<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class lje{constructor(e,t=[]){this.segmentSyncInfo_=e,this.partsSyncInfo_=t}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(e=>e.resetAppendedStatus())}}class _le{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(e=>e.resetAppendStatus())}update(e,t){const{mediaSequence:i,segments:r}=e;if(this.isReliable_=this.isReliablePlaylist_(i,r),!!this.isReliable_)return this.updateStorage_(r,i,this.calculateBaseTime_(i,r,t))}getSyncInfoForTime(e){for(const{segmentSyncInfo:t,partsSyncInfo:i}of this.storage_.values())if(i.length){for(const r of i)if(r.isInRange(e))return r}else if(t.isInRange(e))return t;return null}getSyncInfoForMediaSequence(e){return this.storage_.get(e)}updateStorage_(e,t,i){const r=new Map;let s=`
`,a=i,o=t;this.start_=a,e.forEach((l,u)=>{const c=this.storage_.get(o),d=a,f=d+l.duration,h=!!(c&&c.segmentSyncInfo&&c.segmentSyncInfo.isAppended),p=new QW({start:d,end:f,appended:h,segmentIndex:u});l.syncInfo=p;let m=a;const g=(l.parts||[]).map((v,_)=>{const y=m,b=m+v.duration,x=!!(c&&c.partsSyncInfo&&c.partsSyncInfo[_]&&c.partsSyncInfo[_].isAppended),w=new QW({start:y,end:b,appended:x,segmentIndex:u,partIndex:_});return m=b,s+=`Media Sequence: ${o}.${_} | Range: ${y} --> ${b} | Appended: ${x}
`,v.syncInfo=w,w});r.set(o,new lje(p,g)),s+=`${mle(l.resolvedUri)} | Media Sequence: ${o} | Range: ${d} --> ${f} | Appended: ${h}
`,o++,a=f}),this.end_=a,this.storage_=r,this.diagnostics_=s}calculateBaseTime_(e,t,i){if(!this.storage_.size)return 0;if(this.storage_.has(e))return this.storage_.get(e).segmentSyncInfo.start;const r=Math.min(...this.storage_.keys());if(e<r){const s=r-e;let a=this.storage_.get(r).segmentSyncInfo.start;for(let o=0;o<s;o++){const l=t[o];a-=l.duration}return a}return i}isReliablePlaylist_(e,t){return e!=null&&Array.isArray(t)&&t.length}}class ZW extends _le{constructor(e){super(),this.parent_=e}calculateBaseTime_(e,t,i){if(!this.storage_.size){const r=this.parent_.getSyncInfoForMediaSequence(e);return r?r.segmentSyncInfo.start:0}return super.calculateBaseTime_(e,t,i)}}const uje=86400,XP=[{name:"VOD",run:(n,e,t,i,r)=>t!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(n,e,t,i,r,s)=>{const a=n.getMediaSequenceSync(s);if(!a||!a.isReliable)return null;const o=a.getSyncInfoForTime(r);return o?{time:o.start,partIndex:o.partIndex,segmentIndex:o.segmentIndex}:null}},{name:"ProgramDateTime",run:(n,e,t,i,r)=>{if(!Object.keys(n.timelineToDatetimeMappings).length)return null;let s=null,a=null;const o=R8(e);r=r||0;for(let l=0;l<o.length;l++){const u=e.endList||r===0?l:o.length-(l+1),c=o[u],d=c.segment,f=n.timelineToDatetimeMappings[d.timeline];if(!f||!d.dateTimeObject)continue;let p=d.dateTimeObject.getTime()/1e3+f;if(d.parts&&typeof c.partIndex=="number")for(let g=0;g<c.partIndex;g++)p+=d.parts[g].duration;const m=Math.abs(r-p);if(a!==null&&(m===0||a<m))break;a=m,s={time:p,segmentIndex:c.segmentIndex,partIndex:c.partIndex}}return s}},{name:"Segment",run:(n,e,t,i,r)=>{let s=null,a=null;r=r||0;const o=R8(e);for(let l=0;l<o.length;l++){const u=e.endList||r===0?l:o.length-(l+1),c=o[u],d=c.segment,f=c.part&&c.part.start||d&&d.start;if(d.timeline===i&&typeof f<"u"){const h=Math.abs(r-f);if(a!==null&&a<h)break;(!s||a===null||a>=h)&&(a=h,s={time:f,segmentIndex:c.segmentIndex,partIndex:c.partIndex})}}return s}},{name:"Discontinuity",run:(n,e,t,i,r)=>{let s=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length){let a=null;for(let o=0;o<e.discontinuityStarts.length;o++){const l=e.discontinuityStarts[o],u=e.discontinuitySequence+o+1,c=n.discontinuities[u];if(c){const d=Math.abs(r-c.time);if(a!==null&&a<d)break;(!s||a===null||a>=d)&&(a=d,s={time:c.time,segmentIndex:l,partIndex:null})}}}return s}},{name:"Playlist",run:(n,e,t,i,r)=>e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}];class cje extends $t.EventTarget{constructor(e={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const t=new _le,i=new ZW(t),r=new ZW(t);this.mediaSequenceStorage_={main:t,audio:i,vtt:r},this.logger_=pc("SyncController")}getMediaSequenceSync(e){return this.mediaSequenceStorage_[e]||null}getSyncPoint(e,t,i,r,s){if(t!==1/0)return XP.find(({name:l})=>l==="VOD").run(this,e,t);const a=this.runStrategies_(e,t,i,r,s);if(!a.length)return null;for(const o of a){const{syncPoint:l,strategy:u}=o,{segmentIndex:c,time:d}=l;if(c<0)continue;const f=e.segments[c],h=d,p=h+f.duration;if(this.logger_(`Strategy: ${u}. Current time: ${r}. selected segment: ${c}. Time: [${h} -> ${p}]}`),r>=h&&r<p)return this.logger_("Found sync point with exact match: ",l),l}return this.selectSyncPoint_(a,{key:"time",value:r})}getExpiredTime(e,t){if(!e||!e.segments)return null;const i=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!i.length)return null;const r=this.selectSyncPoint_(i,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+r2({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))}runStrategies_(e,t,i,r,s){const a=[];for(let o=0;o<XP.length;o++){const l=XP[o],u=l.run(this,e,t,i,r,s);u&&(u.strategy=l.name,a.push({strategy:l.name,syncPoint:u}))}return a}selectSyncPoint_(e,t){let i=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),s=e[0].strategy;for(let a=1;a<e.length;a++){const o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,i=e[a].syncPoint,s=e[a].strategy)}return this.logger_(`syncPoint for [${t.key}: ${t.value}] chosen with strategy [${s}]: [time:${i.time}, segmentIndex:${i.segmentIndex}`+(typeof i.partIndex=="number"?`,partIndex:${i.partIndex}`:"")+"]"),i}saveExpiredSegmentInfo(e,t){const i=t.mediaSequence-e.mediaSequence;if(i>uje){$t.log.warn(`Not saving expired segment info. Media sequence gap ${i} is too large.`);return}for(let r=i-1;r>=0;r--){const s=e.segments[r];if(s&&typeof s.start<"u"){t.syncInfo={mediaSequence:e.mediaSequence+r,time:s.start},this.logger_(`playlist refresh sync: [time:${t.syncInfo.time}, mediaSequence: ${t.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){const t=e.segments[0],i=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-i}}saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:t}){const i=this.calculateSegmentTimeMapping_(e,e.timingInfo,t),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));const s=r.dateTimeObject;r.discontinuity&&t&&s&&(this.timelineToDatetimeMappings[r.timeline]=-(s.getTime()/1e3))}timestampOffsetForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time}mappingForTimeline(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping}calculateSegmentTimeMapping_(e,t,i){const r=e.segment,s=e.part;let a=this.timelines[e.timeline],o,l;if(typeof e.timestampOffset=="number")a={time:e.startOfSegment,mapping:e.startOfSegment-t.start},i&&(this.timelines[e.timeline]=a,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${e.timeline}: [time: ${a.time}] [mapping: ${a.mapping}]`)),o=e.startOfSegment,l=t.end+a.mapping;else if(a)o=t.start+a.mapping,l=t.end+a.mapping;else return!1;return s&&(s.start=o,s.end=l),(!r.start||o<r.start)&&(r.start=o),r.end=l,!0}saveDiscontinuitySyncInfo_(e){const t=e.playlist,i=e.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(let r=0;r<t.discontinuityStarts.length;r++){const s=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=s-e.mediaIndex,l=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>l){let u;o<0?u=i.start-r2({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:s}):u=i.end+r2({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:s}),this.discontinuities[a]={time:u,accuracy:l}}}}dispose(){this.trigger("dispose"),this.off()}}class dje extends $t.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:e,from:t,to:i}){return typeof t=="number"&&typeof i=="number"&&(this.pendingTimelineChanges_[e]={type:e,from:t,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]}lastTimelineChange({type:e,from:t,to:i}){if(typeof t=="number"&&typeof i=="number"){this.lastTimelineChanges_[e]={type:e,from:t,to:i},delete this.pendingTimelineChanges_[e];const r={timelineChangeInfo:{from:t,to:i}};this.trigger({type:"timelinechange",metadata:r})}return this.lastTimelineChanges_[e]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const fje=ile(rle(function(){var n=function(){function m(){this.listeners={}}var g=m.prototype;return g.on=function(_,y){this.listeners[_]||(this.listeners[_]=[]),this.listeners[_].push(y)},g.off=function(_,y){if(!this.listeners[_])return!1;var b=this.listeners[_].indexOf(y);return this.listeners[_]=this.listeners[_].slice(0),this.listeners[_].splice(b,1),b>-1},g.trigger=function(_){var y=this.listeners[_];if(y)if(arguments.length===2)for(var b=y.length,x=0;x<b;++x)y[x].call(this,arguments[1]);else for(var w=Array.prototype.slice.call(arguments,1),A=y.length,T=0;T<A;++T)y[T].apply(this,w)},g.dispose=function(){this.listeners={}},g.pipe=function(_){this.on("data",function(y){_.push(y)})},m}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function e(m){return m.subarray(0,m.byteLength-m[m.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const t=function(){const m=[[[],[],[],[],[]],[[],[],[],[],[]]],g=m[0],v=m[1],_=g[4],y=v[4];let b,x,w;const A=[],T=[];let C,E,I,k,O,U;for(b=0;b<256;b++)T[(A[b]=b<<1^(b>>7)*283)^b]=b;for(x=w=0;!_[x];x^=C||1,w=T[w]||1)for(k=w^w<<1^w<<2^w<<3^w<<4,k=k>>8^k&255^99,_[x]=k,y[k]=x,I=A[E=A[C=A[x]]],U=I*16843009^E*65537^C*257^x*16843008,O=A[k]*257^k*16843008,b=0;b<4;b++)g[b][x]=O=O<<24^O>>>8,v[b][k]=U=U<<24^U>>>8;for(b=0;b<5;b++)g[b]=g[b].slice(0),v[b]=v[b].slice(0);return m};let i=null;class r{constructor(g){i||(i=t()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];let v,_,y;const b=this._tables[0][4],x=this._tables[1],w=g.length;let A=1;if(w!==4&&w!==6&&w!==8)throw new Error("Invalid aes key size");const T=g.slice(0),C=[];for(this._key=[T,C],v=w;v<4*w+28;v++)y=T[v-1],(v%w===0||w===8&&v%w===4)&&(y=b[y>>>24]<<24^b[y>>16&255]<<16^b[y>>8&255]<<8^b[y&255],v%w===0&&(y=y<<8^y>>>24^A<<24,A=A<<1^(A>>7)*283)),T[v]=T[v-w]^y;for(_=0;v;_++,v--)y=T[_&3?v:v-4],v<=4||_<4?C[_]=y:C[_]=x[0][b[y>>>24]]^x[1][b[y>>16&255]]^x[2][b[y>>8&255]]^x[3][b[y&255]]}decrypt(g,v,_,y,b,x){const w=this._key[1];let A=g^w[0],T=y^w[1],C=_^w[2],E=v^w[3],I,k,O;const U=w.length/4-2;let z,L=4;const G=this._tables[1],H=G[0],F=G[1],X=G[2],te=G[3],re=G[4];for(z=0;z<U;z++)I=H[A>>>24]^F[T>>16&255]^X[C>>8&255]^te[E&255]^w[L],k=H[T>>>24]^F[C>>16&255]^X[E>>8&255]^te[A&255]^w[L+1],O=H[C>>>24]^F[E>>16&255]^X[A>>8&255]^te[T&255]^w[L+2],E=H[E>>>24]^F[A>>16&255]^X[T>>8&255]^te[C&255]^w[L+3],L+=4,A=I,T=k,C=O;for(z=0;z<4;z++)b[(3&-z)+x]=re[A>>>24]<<24^re[T>>16&255]<<16^re[C>>8&255]<<8^re[E&255]^w[L++],I=A,A=T,T=C,C=E,E=I}}class s extends n{constructor(){super(n),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(g){this.jobs.push(g),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const a=function(m){return m<<24|(m&65280)<<8|(m&16711680)>>8|m>>>24},o=function(m,g,v){const _=new Int32Array(m.buffer,m.byteOffset,m.byteLength>>2),y=new r(Array.prototype.slice.call(g)),b=new Uint8Array(m.byteLength),x=new Int32Array(b.buffer);let w,A,T,C,E,I,k,O,U;for(w=v[0],A=v[1],T=v[2],C=v[3],U=0;U<_.length;U+=4)E=a(_[U]),I=a(_[U+1]),k=a(_[U+2]),O=a(_[U+3]),y.decrypt(E,I,k,O,x,U),x[U]=a(x[U]^w),x[U+1]=a(x[U+1]^A),x[U+2]=a(x[U+2]^T),x[U+3]=a(x[U+3]^C),w=E,A=I,T=k,C=O;return b};class l{constructor(g,v,_,y){const b=l.STEP,x=new Int32Array(g.buffer),w=new Uint8Array(g.byteLength);let A=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(x.subarray(A,A+b),v,_,w)),A=b;A<x.length;A+=b)_=new Uint32Array([a(x[A-4]),a(x[A-3]),a(x[A-2]),a(x[A-1])]),this.asyncStream_.push(this.decryptChunk_(x.subarray(A,A+b),v,_,w));this.asyncStream_.push(function(){y(null,e(w))})}static get STEP(){return 32e3}decryptChunk_(g,v,_,y){return function(){const b=o(g,v,_);y.set(b,g.byteOffset)}}}var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},c;typeof window<"u"?c=window:typeof u<"u"?c=u:typeof self<"u"?c=self:c={};var d=c,f=function(g){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(g):g&&g.buffer instanceof ArrayBuffer},h=d.BigInt||Number;h("0x1"),h("0x100"),h("0x10000"),h("0x1000000"),h("0x100000000"),h("0x10000000000"),h("0x1000000000000"),h("0x100000000000000"),h("0x10000000000000000"),function(){var m=new Uint16Array([65484]),g=new Uint8Array(m.buffer,m.byteOffset,m.byteLength);return g[0]===255?"big":g[0]===204?"little":"unknown"}();const p=function(m){const g={};return Object.keys(m).forEach(v=>{const _=m[v];f(_)?g[v]={bytes:_.buffer,byteOffset:_.byteOffset,byteLength:_.byteLength}:g[v]=_}),g};self.onmessage=function(m){const g=m.data,v=new Uint8Array(g.encrypted.bytes,g.encrypted.byteOffset,g.encrypted.byteLength),_=new Uint32Array(g.key.bytes,g.key.byteOffset,g.key.byteLength/4),y=new Uint32Array(g.iv.bytes,g.iv.byteOffset,g.iv.byteLength/4);new l(v,_,y,function(b,x){self.postMessage(p({source:g.source,decrypted:x}),[x.buffer])})}}));var hje=nle(fje);const pje=n=>{let e=n.default?"main":"alternative";return n.characteristics&&n.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},ble=(n,e)=>{n.abort(),n.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},V8=(n,e)=>{e.activePlaylistLoader=n,n.load()},mje=(n,e)=>()=>{const{segmentLoaders:{[n]:t,main:i},mediaTypes:{[n]:r}}=e,s=r.activeTrack(),a=r.getActiveGroup(),o=r.activePlaylistLoader,l=r.lastGroup_;if(!(a&&l&&a.id===l.id)&&(r.lastGroup_=a,r.lastTrack_=s,ble(t,r),!(!a||a.isMainPlaylist))){if(!a.playlistLoader){o&&i.resetEverything();return}t.resyncLoader(),V8(a.playlistLoader,r)}},gje=(n,e)=>()=>{const{segmentLoaders:{[n]:t},mediaTypes:{[n]:i}}=e;i.lastGroup_=null,t.abort(),t.pause()},vje=(n,e)=>()=>{const{mainPlaylistLoader:t,segmentLoaders:{[n]:i,main:r},mediaTypes:{[n]:s}}=e,a=s.activeTrack(),o=s.getActiveGroup(),l=s.activePlaylistLoader,u=s.lastTrack_;if(!(u&&a&&u.id===a.id)&&(s.lastGroup_=o,s.lastTrack_=a,ble(i,s),!!o)){if(o.isMainPlaylist){if(!a||!u||a.id===u.id)return;const c=e.vhs.playlistController_,d=c.selectPlaylist();if(c.media()===d)return;s.logger_(`track change. Switching main audio from ${u.id} to ${a.id}`),t.pause(),r.resetEverything(),c.fastQualityChange_(d);return}if(n==="AUDIO"){if(!o.playlistLoader){r.setAudio(!0),r.resetEverything();return}i.setAudio(!0),r.setAudio(!1)}if(l===o.playlistLoader){V8(o.playlistLoader,s);return}i.track&&i.track(a),i.resetEverything(),V8(o.playlistLoader,s)}},v4={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:t},excludePlaylist:i}=e,r=t.activeTrack(),s=t.activeGroup(),a=(s.filter(l=>l.default)[0]||s[0]).id,o=t.tracks[a];if(r===o){i({error:{message:"Problem encountered loading the default audio track."}});return}$t.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const l in t.tracks)t.tracks[l].enabled=t.tracks[l]===o;t.onTrackChanged()},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:t}}=e;$t.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const i=t.activeTrack();i&&(i.mode="disabled"),t.onTrackChanged()}},JW={AUDIO:(n,e,t)=>{if(!e)return;const{tech:i,requestOptions:r,segmentLoaders:{[n]:s}}=t;e.on("loadedmetadata",()=>{const a=e.media();s.playlist(a,r),(!i.paused()||a.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",v4[n](n,t))},SUBTITLES:(n,e,t)=>{const{tech:i,requestOptions:r,segmentLoaders:{[n]:s},mediaTypes:{[n]:a}}=t;e.on("loadedmetadata",()=>{const o=e.media();s.playlist(o,r),s.track(a.activeTrack()),(!i.paused()||o.endList&&i.preload()!=="none")&&s.load()}),e.on("loadedplaylist",()=>{s.playlist(e.media(),r),i.paused()||s.load()}),e.on("error",v4[n](n,t))}},yje={AUDIO:(n,e)=>{const{vhs:t,sourceType:i,segmentLoaders:{[n]:r},requestOptions:s,main:{mediaGroups:a},mediaTypes:{[n]:{groups:o,tracks:l,logger_:u}},mainPlaylistLoader:c}=e,d=PT(c.main);(!a[n]||Object.keys(a[n]).length===0)&&(a[n]={main:{default:{default:!0}}},d&&(a[n].main.default.playlists=c.main.playlists));for(const f in a[n]){o[f]||(o[f]=[]);for(const h in a[n][f]){let p=a[n][f][h],m;if(d?(u(`AUDIO group '${f}' label '${h}' is a main playlist`),p.isMainPlaylist=!0,m=null):i==="vhs-json"&&p.playlists?m=new h1(p.playlists[0],t,s):p.resolvedUri?m=new h1(p.resolvedUri,t,s):p.playlists&&i==="dash"?m=new B8(p.playlists[0],t,s,c):m=null,p=Fr({id:h,playlistLoader:m},p),JW[n](n,p.playlistLoader,e),o[f].push(p),typeof l[h]>"u"){const g=new $t.AudioTrack({id:h,kind:pje(p),enabled:!1,language:p.language,default:p.default,label:h});l[h]=g}}}r.on("error",v4[n](n,e))},SUBTITLES:(n,e)=>{const{tech:t,vhs:i,sourceType:r,segmentLoaders:{[n]:s},requestOptions:a,main:{mediaGroups:o},mediaTypes:{[n]:{groups:l,tracks:u}},mainPlaylistLoader:c}=e;for(const d in o[n]){l[d]||(l[d]=[]);for(const f in o[n][d]){if(!i.options_.useForcedSubtitles&&o[n][d][f].forced)continue;let h=o[n][d][f],p;if(r==="hls")p=new h1(h.resolvedUri,i,a);else if(r==="dash"){if(!h.playlists.filter(g=>g.excludeUntil!==1/0).length)return;p=new B8(h.playlists[0],i,a,c)}else r==="vhs-json"&&(p=new h1(h.playlists?h.playlists[0]:h.resolvedUri,i,a));if(h=Fr({id:f,playlistLoader:p},h),JW[n](n,h.playlistLoader,e),l[d].push(h),typeof u[f]>"u"){const m=t.addRemoteTextTrack({id:f,kind:"subtitles",default:h.default&&h.autoselect,language:h.language,label:f},!1).track;u[f]=m}}}s.on("error",v4[n](n,e))},"CLOSED-CAPTIONS":(n,e)=>{const{tech:t,main:{mediaGroups:i},mediaTypes:{[n]:{groups:r,tracks:s}}}=e;for(const a in i[n]){r[a]||(r[a]=[]);for(const o in i[n][a]){const l=i[n][a][o];if(!/^(?:CC|SERVICE)/.test(l.instreamId))continue;const u=t.options_.vhs&&t.options_.vhs.captionServices||{};let c={label:o,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=Fr(c,u[c.instreamId])),c.default===void 0&&delete c.default,r[a].push(Fr({id:o},l)),typeof s[o]>"u"){const d=t.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[o]=d}}}}},Sle=(n,e)=>{for(let t=0;t<n.length;t++)if(b9(e,n[t])||n[t].playlists&&Sle(n[t].playlists,e))return!0;return!1},_je=(n,e)=>t=>{const{mainPlaylistLoader:i,mediaTypes:{[n]:{groups:r}}}=e,s=i.media();if(!s)return null;let a=null;s.attributes[n]&&(a=r[s.attributes[n]]);const o=Object.keys(r);if(!a)if(n==="AUDIO"&&o.length>1&&PT(e.main))for(let l=0;l<o.length;l++){const u=r[o[l]];if(Sle(u,s)){a=u;break}}else r.main?a=r.main:o.length===1&&(a=r[o[0]]);return typeof t>"u"?a:t===null||!a?null:a.filter(l=>l.id===t.id)[0]||null},bje={AUDIO:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].enabled)return t[i];return null},SUBTITLES:(n,e)=>()=>{const{mediaTypes:{[n]:{tracks:t}}}=e;for(const i in t)if(t[i].mode==="showing"||t[i].mode==="hidden")return t[i];return null}},Sje=(n,{mediaTypes:e})=>()=>{const t=e[n].activeTrack();return t?e[n].activeGroup(t):null},xje=n=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(u=>{yje[u](u,n)});const{mediaTypes:e,mainPlaylistLoader:t,tech:i,vhs:r,segmentLoaders:{["AUDIO"]:s,main:a}}=n;["AUDIO","SUBTITLES"].forEach(u=>{e[u].activeGroup=_je(u,n),e[u].activeTrack=bje[u](u,n),e[u].onGroupChanged=mje(u,n),e[u].onGroupChanging=gje(u,n),e[u].onTrackChanged=vje(u,n),e[u].getActiveGroup=Sje(u,n)});const o=e.AUDIO.activeGroup();if(o){const u=(o.filter(d=>d.default)[0]||o[0]).id;e.AUDIO.tracks[u].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(a.setAudio(!1),s.setAudio(!0)):a.setAudio(!0)}t.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanged())}),t.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(u=>e[u].onGroupChanging())});const l=()=>{e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};i.audioTracks().addEventListener("change",l),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",()=>{i.audioTracks().removeEventListener("change",l),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),i.clearTracks("audio");for(const u in e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[u])},wje=()=>{const n={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Vf,activeTrack:Vf,getActiveGroup:Vf,onGroupChanged:Vf,onTrackChanged:Vf,lastTrack_:null,logger_:pc(`MediaGroups[${e}]`)}}),n};class eq{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(e){e===1&&(this.version_=e)}set ttl(e){this.ttl_=e||300}set reloadUri(e){e&&(this.reloadUri_=gl(this.reloadUri_,e))}set priority(e){e&&e.length&&(this.priority_=e)}set pathwayClones(e){e&&e.length&&(this.pathwayClones_=new Map(e.map(t=>[t.ID,t])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class Tje extends $t.EventTarget{constructor(e,t){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new eq,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=pc("Content Steering"),this.xhr_=e,this.getBandwidth_=t}assignTagProperties(e,t){this.manifestType_=t.serverUri?"HLS":"DASH";const i=t.serverUri||t.serverURL;if(!i){this.logger_(`steering manifest URL is ${i}, cannot request steering manifest.`),this.trigger("error");return}if(i.startsWith("data:")){this.decodeDataUriManifest_(i.substring(i.indexOf(",")+1));return}this.steeringManifest.reloadUri=gl(e,i),this.defaultPathway=t.pathwayId||t.defaultServiceLocation,this.queryBeforeStart=t.queryBeforeStart,this.proxyServerUrl_=t.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(e){const t=this.steeringManifest.reloadUri;if(!t)return;const i=e?t:this.getRequestURI(t);if(!i){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const r={contentSteeringInfo:{uri:i}};this.trigger({type:"contentsteeringloadstart",metadata:r}),this.request_=this.xhr_({uri:i,requestType:"content-steering-manifest"},(s,a)=>{if(s){if(a.status===410){this.logger_(`manifest request 410 ${s}.`),this.logger_(`There will be no more content steering requests to ${i} this session.`),this.excludedSteeringManifestURLs.add(i);return}if(a.status===429){const u=a.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${s}.`),this.logger_(`content steering will retry in ${u} seconds.`),this.startTTLTimeout_(parseInt(u,10));return}this.logger_(`manifest failed to load ${s}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:r});let o;try{o=JSON.parse(this.request_.responseText)}catch(u){const c={errorType:$t.Error.StreamingContentSteeringParserError,error:u};this.trigger({type:"error",metadata:c})}this.assignSteeringProperties_(o);const l={contentSteeringInfo:r.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:l}),this.startTTLTimeout_()})}setProxyServerUrl_(e){const t=new ht.URL(e),i=new ht.URL(this.proxyServerUrl_);return i.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(i.toString())}decodeDataUriManifest_(e){const t=JSON.parse(ht.atob(e));this.assignSteeringProperties_(t)}setSteeringParams_(e){const t=new ht.URL(e),i=this.getPathway(),r=this.getBandwidth_();if(i){const s=`_${this.manifestType_}_pathway`;t.searchParams.set(s,i)}if(r){const s=`_${this.manifestType_}_throughput`;t.searchParams.set(s,r)}return t.toString()}assignSteeringProperties_(e){if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${e.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=e["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const i=(r=>{for(const s of r)if(this.availablePathways_.has(s))return s;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==i&&(this.currentPathway=i,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(e){if(!e)return null;const t=r=>this.excludedSteeringManifestURLs.has(r);if(this.proxyServerUrl_){const r=this.setProxyServerUrl_(e);if(!t(r))return r}const i=this.setSteeringParams_(e);return t(i)?null:i}startTTLTimeout_(e=this.steeringManifest.ttl){const t=e*1e3;this.ttlTimeout_=ht.setTimeout(()=>{this.requestSteeringManifest()},t)}clearTTLTimeout_(){ht.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new eq}addAvailablePathway(e){e&&this.availablePathways_.add(e)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(e){return this.availablePathways_.delete(e)}didDASHTagChange(e,t){return!t&&this.steeringManifest.reloadUri||t&&(gl(e,t.serverURL)!==this.steeringManifest.reloadUri||t.defaultServiceLocation!==this.defaultPathway||t.queryBeforeStart!==this.queryBeforeStart||t.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const Cje=(n,e)=>{let t=null;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{n.apply(null,i)},e)}},Aje=10;let $h;const Eje=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Mje=function(n){return this.audioSegmentLoader_[n]+this.mainSegmentLoader_[n]},Ije=function({currentPlaylist:n,buffered:e,currentTime:t,nextPlaylist:i,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:a,bufferBasedABR:o,log:l}){if(!i)return $t.log.warn("We received no playlist to switch to. Please check your stream."),!1;const u=`allowing switch ${n&&n.id||"null"} -> ${i.id}`;if(!n)return l(`${u} as current playlist is not set`),!0;if(i.id===n.id)return!1;const c=!!f1(e,t).length;if(!n.endList)return!c&&typeof n.partTargetDuration=="number"?(l(`not ${u} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(l(`${u} as current playlist is live`),!0);const d=v9(e,t),f=o?Ma.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ma.MAX_BUFFER_LOW_WATER_LINE;if(a<f)return l(`${u} as duration < max low water line (${a} < ${f})`),!0;const h=i.attributes.BANDWIDTH,p=n.attributes.BANDWIDTH;if(h<p&&(!o||d<s)){let m=`${u} as next bandwidth < current bandwidth (${h} < ${p})`;return o&&(m+=` and forwardBuffer < bufferHighWaterLine (${d} < ${s})`),l(m),!0}if((!o||h>p)&&d>=r){let m=`${u} as forwardBuffer >= bufferLowWaterLine (${d} >= ${r})`;return o&&(m+=` and next bandwidth > current bandwidth (${h} > ${p})`),l(m),!0}return l(`not ${u} as no switching criteria met`),!1};class Dje extends $t.EventTarget{constructor(e){super(),this.fastQualityChange_=Cje(this.fastQualityChange_.bind(this),100);const{src:t,withCredentials:i,tech:r,bandwidth:s,externVhs:a,useCueTags:o,playlistExclusionDuration:l,enableLowInitialPlaylist:u,sourceType:c,cacheEncryptionKeys:d,bufferBasedABR:f,leastPixelDiffSelector:h,captionServices:p,experimentalUseMMS:m}=e;if(!t)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:g}=e;(g===null||typeof g>"u")&&(g=1/0),$h=a,this.bufferBasedABR=!!f,this.leastPixelDiffSelector=!!h,this.withCredentials=i,this.tech_=r,this.vhs_=r.vhs,this.player_=e.player_,this.sourceType_=c,this.useCueTags_=o,this.playlistExclusionDuration=l,this.maxPlaylistRetries=g,this.enableLowInitialPlaylist=u,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:i,maxPlaylistRetries:g,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=wje(),m&&ht.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new ht.ManagedMediaSource,this.usingManagedMediaSource_=!0,$t.log("Using ManagedMediaSource")):ht.MediaSource&&(this.mediaSource=new ht.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=Pa(),this.hasPlayed_=!1,this.syncController_=new cje(e),this.segmentMetadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=new hje,this.sourceUpdater_=new yle(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new dje,this.keyStatusMap_=new Map;const v={vhs:this.vhs_,parse708captions:e.parse708captions,useDtsForTimestampOffset:e.useDtsForTimestampOffset,captionServices:p,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:s,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:d,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:e.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new B8(t,this.vhs_,Fr(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new h1(t,this.vhs_,Fr(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new z8(Fr(v,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new z8(Fr(v,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new sje(Fr(v,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((b,x)=>{function w(){r.off("vttjserror",A),b()}function A(){r.off("vttjsloaded",w),x()}r.one("vttjsloaded",w),r.one("vttjserror",A),r.addWebVttScript_()})}),e);const _=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new Tje(this.vhs_.xhr,_),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),Eje.forEach(b=>{this[b+"_"]=Mje.bind(this,b)}),this.logger_=pc("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const y=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(y,()=>{const b=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-b,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return e===-1||t===-1?-1:e+t}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(e="abr"){const t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}switchMedia_(e,t,i){const r=this.media(),s=r&&(r.id||r.uri),a=e&&(e.id||e.uri);if(s&&s!==a){this.logger_(`switch media ${s} -> ${a} from ${t}`);const o={renditionInfo:{id:a,bandwidth:e.attributes.BANDWIDTH,resolution:e.attributes.RESOLUTION,codecs:e.attributes.CODECS},cause:t};this.trigger({type:"renditionselected",metadata:o}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${t}`})}this.mainPlaylistLoader_.media(e,i)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(e=>{const t=this.mediaTypes_[e],i=t?t.activeGroup():null,r=this.contentSteeringController_.getPathway();if(i&&r){const a=(i.length?i[0].playlists:i.playlists).filter(o=>o.attributes.serviceLocation===r);a.length&&this.mediaTypes_[e].activePlaylistLoader.media(a[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=ht.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(ht.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;const i=e.mediaGroups.AUDIO,r=Object.keys(i);let s;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)s=this.mediaTypes_.AUDIO.activeTrack();else{const o=i.main||r.length&&i[r[0]];for(const l in o)if(o[l].default){s={label:l};break}}if(!s)return t;const a=[];for(const o in i)if(i[o][s.label]){const l=i[o][s.label];if(l.playlists&&l.playlists.length)a.push.apply(a,l.playlists);else if(l.uri)a.push(l);else if(e.playlists.length)for(let u=0;u<e.playlists.length;u++){const c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===o&&a.push(c)}}return a.length?a:t}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;P8(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,t.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.mainSegmentLoader_.load()),xje({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),t),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let t=this.mainPlaylistLoader_.media();if(!t){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let i;if(this.enableLowInitialPlaylist&&(i=this.selectInitialPlaylist()),i||(i=this.selectPlaylist()),!i||!this.shouldSwitchToMedia_(i)||(this.initialMedia_=i,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;t=this.initialMedia_}this.handleUpdatedMediaPlaylist(t)}),this.mainPlaylistLoader_.on("error",()=>{const t=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:t.playlist,error:t})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const t=this.mainPlaylistLoader_.media(),i=t.targetDuration*1.5*1e3;P8(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=i,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const t=this.mainPlaylistLoader_.media();if(t.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(t)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(t=>{this.mainPlaylistLoader_.on(t,i=>{this.player_.trigger(Ds({},i))})})}handleUpdatedMediaPlaylist(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(e,t){const i=e.mediaGroups||{};let r=!0;const s=Object.keys(i.AUDIO);for(const a in i.AUDIO)for(const o in i.AUDIO[a])i.AUDIO[a][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(i.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),$h.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),s.length&&Object.keys(i.AUDIO[s[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(e){const t=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,i=this.tech_.currentTime(),r=this.bufferLowWaterLine(),s=this.bufferHighWaterLine(),a=this.tech_.buffered();return Ije({buffered:a,currentTime:i,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:s,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const i=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:i.playlist,error:i})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const i=this.audioSegmentLoader_.pendingSegment_;if(!i||!i.segment||!i.segment.syncInfo)return;const r=i.segment.syncInfo.end+.01;this.tech_.setCurrentTime(r)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",i=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:Aje}))});const e=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const i=this.getCodecsOrExclude_();i&&this.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(i=>{this.mainSegmentLoader_.on(i,r=>{this.player_.trigger(Ds({},r))}),this.audioSegmentLoader_.on(i,r=>{this.player_.trigger(Ds({},r))}),this.subtitleSegmentLoader_.on(i,r=>{this.player_.trigger(Ds({},r))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(e=this.selectPlaylist()){if(e&&e===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}setupFirstPlay(){const e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){const t=this.seekable();if(!t.length)return!1;const i=t.end(0);let r=i;if(e.start){const s=e.start.timeOffset;s<0?r=Math.max(i+s,t.start(0)):r=Math.min(i,s)}this.trigger("firstplay"),this.tech_.setCurrentTime(r)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,t=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const e=this.inbandTextTracks_.metadataTrack_.cues;if(!e||!e.length)return;const t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const t=this.mainSegmentLoader_.getCurrentMediaInfo_();!t||t.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(e){if(!this.seekable().length)return!1;const i=this.syncController_.getExpiredTime(e,this.duration());if(i===null)return!1;const r=$h.Playlist.playlistEnd(e,i),s=this.tech_.currentTime(),a=this.tech_.buffered();if(!a.length)return r-s<=Id;const o=a.end(a.length-1);return o-s<=Id&&r-o<=Id}excludePlaylist({playlistToExclude:e=this.mainPlaylistLoader_.media(),error:t={},playlistExclusionDuration:i}){if(e=e||this.mainPlaylistLoader_.media(),i=i||t.playlistExclusionDuration||this.playlistExclusionDuration,!e){this.error=t,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}e.playlistErrors_++;const r=this.mainPlaylistLoader_.main.playlists,s=r.filter(ND),a=s.length===1&&s[0]===e;if(r.length===1&&i!==1/0)return $t.log.warn(`Problem encountered with playlist ${e.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(a);if(a){if(this.main().contentSteering){const p=this.pathwayAttribute_(e),m=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(p),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(p)},m);return}let h=!1;r.forEach(p=>{if(p===e)return;const m=p.excludeUntil;typeof m<"u"&&m!==1/0&&(h=!0,delete p.excludeUntil)}),h&&($t.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let o;e.playlistErrors_>this.maxPlaylistRetries?o=1/0:o=Date.now()+i*1e3,e.excludeUntil=o,t.reason&&(e.lastExcludeReason_=t.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const l=this.selectPlaylist();if(!l){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const u=t.internal?this.logger_:$t.log.warn,c=t.message?" "+t.message:"";u(`${t.internal?"Internal problem":"Problem"} encountered with playlist ${e.id}.${c} Switching to playlist ${l.id}.`),l.attributes.AUDIO!==e.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),l.attributes.SUBTITLES!==e.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const d=l.targetDuration/2*1e3||5*1e3,f=typeof l.lastRequest=="number"&&Date.now()-l.lastRequest<=d;return this.switchMedia_(l,"exclude",a||f)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(e,t){const i=[],r=e==="all";(r||e==="main")&&i.push(this.mainPlaylistLoader_);const s=[];(r||e==="audio")&&s.push("AUDIO"),(r||e==="subtitle")&&(s.push("CLOSED-CAPTIONS"),s.push("SUBTITLES")),s.forEach(a=>{const o=this.mediaTypes_[a]&&this.mediaTypes_[a].activePlaylistLoader;o&&i.push(o)}),["main","audio","subtitle"].forEach(a=>{const o=this[`${a}SegmentLoader_`];o&&(e===a||e==="all")&&i.push(o)}),i.forEach(a=>t.forEach(o=>{typeof a[o]=="function"&&a[o]()}))}setCurrentTime(e){const t=f1(this.tech_.buffered(),e);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(t&&t.length)return e;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const e=this.mainPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:$h.Playlist.duration(e):1/0:0}seekable(){return this.seekable_}getSeekableRange_(e,t){const i=e.media();if(!i)return null;const r=this.syncController_.getMediaSequenceSync(t);if(r&&r.isReliable){const o=r.start,l=r.end;if(!isFinite(o)||!isFinite(l))return null;const u=$h.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i),c=Math.max(0,l-u);return c<o?null:Pa([[o,c]])}const s=this.syncController_.getExpiredTime(i,this.duration());if(s===null)return null;const a=$h.Playlist.seekable(i,s,$h.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,i));return a.length?a:null}computeFinalSeekable_(e,t){if(!t)return e;const i=e.start(0),r=e.end(0),s=t.start(0),a=t.end(0);return s>r||i>a?e:Pa([[Math.max(i,s),Math.min(r,a)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const e=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!e)return;let t;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!t))return;const i=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(e,t),!this.seekable_||i&&i.length&&this.seekable_.length&&i.start(0)===this.seekable_.start(0)&&i.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${Poe(this.seekable_)}]`);const r={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:r}),this.tech_.trigger("seekablechanged")}updateDuration(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){const r=this.seekable();if(!r.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<r.end(r.length-1))&&this.sourceUpdater_.setDuration(r.end(r.length-1));return}const t=this.tech_.buffered();let i=$h.Playlist.duration(this.mainPlaylistLoader_.media());t.length>0&&(i=Math.max(i,t.end(t.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(e=>{const t=this.mediaTypes_[e].groups;for(const i in t)t[i].forEach(r=>{r.playlistLoader&&r.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),i=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!t||!i)}getCodecsOrExclude_(){const e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},t=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();e.video=e.main;const i=s2(this.main(),t),r={},s=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(r.video=i.video||e.main.videoCodec||qHe),e.main.isMuxed&&(r.video+=`,${i.audio||e.main.audioCodec||OG}`),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||s)&&(r.audio=i.audio||e.main.audioCodec||e.audio.audioCodec||OG,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),!r.audio&&!r.video){this.excludePlaylist({playlistToExclude:t,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const a=(u,c)=>u?e2(c,this.usingManagedMediaSource_):PP(c),o={};let l;if(["video","audio"].forEach(function(u){if(r.hasOwnProperty(u)&&!a(e[u].isFmp4,r[u])){const c=e[u].isFmp4?"browser":"muxer";o[c]=o[c]||[],o[c].push(r[u]),u==="audio"&&(l=c)}}),s&&l&&t.attributes.AUDIO){const u=t.attributes.AUDIO;this.main().playlists.forEach(c=>{(c.attributes&&c.attributes.AUDIO)===u&&c!==t&&(c.excludeUntil=1/0)}),this.logger_(`excluding audio group ${u} as ${l} does not support codec(s): "${r.audio}"`)}if(Object.keys(o).length){const u=Object.keys(o).reduce((c,d)=>(c&&(c+=", "),c+=`${d} does not support codec(s): "${o[d].join(",")}"`,c),"")+".";this.excludePlaylist({playlistToExclude:t,error:{internal:!0,message:u},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const u=[];if(["video","audio"].forEach(c=>{const d=(md(this.sourceUpdater_.codecs[c]||"")[0]||{}).type,f=(md(r[c]||"")[0]||{}).type;d&&f&&d.toLowerCase()!==f.toLowerCase()&&u.push(`"${this.sourceUpdater_.codecs[c]}" -> "${r[c]}"`)}),u.length){this.excludePlaylist({playlistToExclude:t,error:{message:`Codec switching not supported: ${u.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return r}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const e=this.getCodecsOrExclude_();if(!e)return;this.sourceUpdater_.createSourceBuffers(e);const t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}excludeUnsupportedVariants_(){const e=this.main().playlists,t=[];Object.keys(e).forEach(i=>{const r=e[i];if(t.indexOf(r.id)!==-1)return;t.push(r.id);const s=s2(this.main,r),a=[];s.audio&&!PP(s.audio)&&!e2(s.audio,this.usingManagedMediaSource_)&&a.push(`audio codec ${s.audio}`),s.video&&!PP(s.video)&&!e2(s.video,this.usingManagedMediaSource_)&&a.push(`video codec ${s.video}`),s.text&&s.text==="stpp.ttml.im1t"&&a.push(`text codec ${s.text}`),a.length&&(r.excludeUntil=1/0,this.logger_(`excluding ${r.id} for unsupported: ${a.join(", ")}`))})}excludeIncompatibleVariants_(e){const t=[],i=this.main().playlists,r=m4(md(e)),s=HW(r),a=r.video&&md(r.video)[0]||null,o=r.audio&&md(r.audio)[0]||null;Object.keys(i).forEach(l=>{const u=i[l];if(t.indexOf(u.id)!==-1||u.excludeUntil===1/0)return;t.push(u.id);const c=[],d=s2(this.mainPlaylistLoader_.main,u),f=HW(d);if(!(!d.audio&&!d.video)){if(f!==s&&c.push(`codec count "${f}" !== "${s}"`),!this.sourceUpdater_.canChangeType()){const h=d.video&&md(d.video)[0]||null,p=d.audio&&md(d.audio)[0]||null;h&&a&&h.type.toLowerCase()!==a.type.toLowerCase()&&c.push(`video codec "${h.type}" !== "${a.type}"`),p&&o&&p.type.toLowerCase()!==o.type.toLowerCase()&&c.push(`audio codec "${p.type}" !== "${o.type}"`)}c.length&&(u.excludeUntil=1/0,this.logger_(`excluding ${u.id}: ${c.join(" && ")}`))}})}updateAdCues_(e){let t=0;const i=this.seekable();i.length&&(t=i.start(0)),oje(e,this.cueTagsTrack_,t)}goalBufferLength(){const e=this.tech_.currentTime(),t=Ma.GOAL_BUFFER_LENGTH,i=Ma.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Ma.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,r)}bufferLowWaterLine(){const e=this.tech_.currentTime(),t=Ma.BUFFER_LOW_WATER_LINE,i=Ma.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Ma.MAX_BUFFER_LOW_WATER_LINE),s=Math.max(t,Ma.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*i,this.bufferBasedABR?s:r)}bufferHighWaterLine(){return Ma.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(e){GW(this.inbandTextTracks_,"com.apple.streaming",this.tech_),zqe({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}addMetadataToTextTrack(e,t,i){const r=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();GW(this.inbandTextTracks_,e,this.tech_),Bqe({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:i})}pathwayAttribute_(e){return e.attributes["PATHWAY-ID"]||e.attributes.serviceLocation}initContentSteeringController_(){const e=this.main();if(e.contentSteering){for(const t of e.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(t));if(this.contentSteeringController_.assignTagProperties(e.uri,e.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(t=>{this.contentSteeringController_.on(t,i=>{this.trigger(Ds({},i))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const t=this.main();(this.contentSteeringController_.didDASHTagChange(t.uri,t.contentSteering)||(()=>{const s=this.contentSteeringController_.getAvailablePathways(),a=[];for(const o of t.playlists){const l=o.attributes.serviceLocation;if(l&&(a.push(l),!s.has(l)))return!0}return!!(!a.length&&s.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const e=this.contentSteeringController_.getPathway();if(!e)return;this.handlePathwayClones_();const i=this.main().playlists,r=new Set;let s=!1;Object.keys(i).forEach(a=>{const o=i[a],l=this.pathwayAttribute_(o),u=l&&e!==l;o.excludeUntil===1/0&&o.lastExcludeReason_==="content-steering"&&!u&&(delete o.excludeUntil,delete o.lastExcludeReason_,s=!0);const d=!o.excludeUntil&&o.excludeUntil!==1/0;!r.has(o.id)&&u&&d&&(r.add(o.id),o.excludeUntil=1/0,o.lastExcludeReason_="content-steering",this.logger_(`excluding ${o.id} for ${o.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(a=>{const o=this.mediaTypes_[a];if(o.activePlaylistLoader){const l=o.activePlaylistLoader.media_;l&&l.attributes.serviceLocation!==e&&(s=!0)}}),s&&this.changeSegmentPathway_()}handlePathwayClones_(){const t=this.main().playlists,i=this.contentSteeringController_.currentPathwayClones,r=this.contentSteeringController_.nextPathwayClones;if(i&&i.size||r&&r.size){for(const[a,o]of i.entries())r.get(a)||(this.mainPlaylistLoader_.updateOrDeleteClone(o),this.contentSteeringController_.excludePathway(a));for(const[a,o]of r.entries()){const l=i.get(a);if(!l){t.filter(c=>c.attributes["PATHWAY-ID"]===o["BASE-ID"]).forEach(c=>{this.mainPlaylistLoader_.addClonePathway(o,c)}),this.contentSteeringController_.addAvailablePathway(a);continue}this.equalPathwayClones_(l,o)||(this.mainPlaylistLoader_.updateOrDeleteClone(o,!0),this.contentSteeringController_.addAvailablePathway(a))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...r])))}}equalPathwayClones_(e,t){if(e["BASE-ID"]!==t["BASE-ID"]||e.ID!==t.ID||e["URI-REPLACEMENT"].HOST!==t["URI-REPLACEMENT"].HOST)return!1;const i=e["URI-REPLACEMENT"].PARAMS,r=t["URI-REPLACEMENT"].PARAMS;for(const s in i)if(i[s]!==r[s])return!1;for(const s in r)if(i[s]!==r[s])return!1;return!0}changeSegmentPathway_(){const e=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let e=0;const t="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=this.mainPlaylistLoader_.getKeyIdSet(i);!r||!r.size||r.forEach(s=>{const a="usable",o=this.keyStatusMap_.has(s)&&this.keyStatusMap_.get(s)===a,l=i.lastExcludeReason_===t&&i.excludeUntil===1/0;o?o&&l&&(delete i.excludeUntil,delete i.lastExcludeReason_,this.logger_(`enabling playlist ${i.id} because key ID ${s} is ${a}`)):(i.excludeUntil!==1/0&&i.lastExcludeReason_!==t&&(i.excludeUntil=1/0,i.lastExcludeReason_=t,this.logger_(`excluding playlist ${i.id} because the key ID ${s} doesn't exist in the keyStatusMap or is not ${a}`)),e++)})}),e>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(i=>{const r=i&&i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.height<720,s=i.excludeUntil===1/0&&i.lastExcludeReason_===t;r&&s&&(delete i.excludeUntil,$t.log.warn(`enabling non-HD playlist ${i.id} because all playlists were excluded due to ${t} key IDs`))})}addKeyStatus_(e,t){const s=(typeof e=="string"?e:ije(e)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${t}' with key ID ${s} added to the keyStatusMap`),this.keyStatusMap_.set(s,t)}updatePlaylistByKeyStatus(e,t){this.addKeyStatus_(e,t),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const Rje=(n,e,t)=>i=>{const r=n.main.playlists[e],s=_9(r),a=ND(r);if(typeof i>"u")return a;i?delete r.disabled:r.disabled=!0;const o={renditionInfo:{id:e,bandwidth:r.attributes.BANDWIDTH,resolution:r.attributes.RESOLUTION,codecs:r.attributes.CODECS},cause:"fast-quality"};return i!==a&&!s&&(i?(t(r),n.trigger({type:"renditionenabled",metadata:o})):n.trigger({type:"renditiondisabled",metadata:o})),i};class Pje{constructor(e,t,i){const{playlistController_:r}=e,s=r.fastQualityChange_.bind(r);if(t.attributes){const a=t.attributes.RESOLUTION;this.width=a&&a.width,this.height=a&&a.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=s2(r.main(),t),this.playlist=t,this.id=i,this.enabled=Rje(e.playlists,t.id,s)}}const kje=function(n){n.representations=()=>{const e=n.playlistController_.main(),t=PT(e)?n.playlistController_.getAudioTrackPlaylists_():e.playlists;return t?t.filter(i=>!_9(i)).map((i,r)=>new Pje(n,i,i.id)):[]}},tq=["seeking","seeked","pause","playing","error"];class Lje extends $t.EventTarget{constructor(e){super(),this.playlistController_=e.playlistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=pc("PlaybackWatcher"),this.logger_("initialize");const t=()=>this.monitorCurrentTime_(),i=()=>this.monitorCurrentTime_(),r=()=>this.techWaiting_(),s=()=>this.resetTimeUpdate_(),a=this.playlistController_,o=["main","subtitle","audio"],l={};o.forEach(c=>{l[c]={reset:()=>this.resetSegmentDownloads_(c),updateend:()=>this.checkSegmentDownloads_(c)},a[`${c}SegmentLoader_`].on("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].on("playlistupdate",l[c].reset),this.tech_.on(["seeked","seeking"],l[c].reset)});const u=c=>{["main","audio"].forEach(d=>{a[`${d}SegmentLoader_`][c]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),u("off"))},this.clearSeekingAppendCheck_=()=>u("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),u("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(tq,s),this.tech_.on("canplay",i),this.tech_.one("play",t),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",r),this.tech_.off(tq,s),this.tech_.off("canplay",i),this.tech_.off("play",t),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),o.forEach(c=>{a[`${c}SegmentLoader_`].off("appendsdone",l[c].updateend),a[`${c}SegmentLoader_`].off("playlistupdate",l[c].reset),this.tech_.off(["seeked","seeking"],l[c].reset)}),this.checkCurrentTimeTimeout_&&ht.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&ht.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=ht.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(e){const t=this.playlistController_[`${e}SegmentLoader_`];this[`${e}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${e} loader`),this[`${e}StalledDownloads_`]=0,this[`${e}Buffered_`]=t.buffered_()}checkSegmentDownloads_(e){const t=this.playlistController_,i=t[`${e}SegmentLoader_`],r=i.buffered_(),s=yWe(this[`${e}Buffered_`],r);if(this[`${e}Buffered_`]=r,s){const a={bufferedRanges:r};t.trigger({type:"bufferedrangeschanged",metadata:a}),this.resetSegmentDownloads_(e);return}this[`${e}StalledDownloads_`]++,this.logger_(`found #${this[`${e}StalledDownloads_`]} ${e} appends that did not increase buffer (possible stalled download)`,{playlistId:i.playlist_&&i.playlist_.id,buffered:ig(r)}),!(this[`${e}StalledDownloads_`]<10)&&(this.logger_(`${e} loader stalled download exclusion`),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:`vhs-${e}-download-exclusion`}),e!=="subtitle"&&t.excludePlaylist({error:{message:`Excessive ${e} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Id>=t.end(t.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&e===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(e===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push(Pa([this.lastRecordedTime,e]));const i={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:i}),this.consecutiveUpdates=0,this.lastRecordedTime=e}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const t=this.seekable(),i=this.tech_.currentTime(),r=this.afterSeekableWindow_(t,i,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let s;if(r&&(s=t.end(t.length-1)),this.beforeSeekableWindow_(t,i)){const p=t.start(0);s=p+(p===t.end(0)?0:Id)}if(typeof s<"u")return this.logger_(`Trying to seek outside of seekable at time ${i} with seekable range ${Poe(t)}. Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0;const a=this.playlistController_.sourceUpdater_,o=this.tech_.buffered(),l=a.audioBuffer?a.audioBuffered():null,u=a.videoBuffer?a.videoBuffered():null,c=this.media(),d=c.partTargetDuration?c.partTargetDuration:(c.targetDuration-Md)*2,f=[l,u];for(let p=0;p<f.length;p++){if(!f[p])continue;if(v9(f[p],i)<d)return!1}const h=fA(o,i);return h.length===0?!1:(s=h.start(0)+Id,this.logger_(`Buffered region starts (${h.start(0)})  just beyond seek point (${i}). Seeking to ${s}.`),this.tech_.setCurrentTime(s),!0)}waiting_(){if(this.techWaiting_())return;const e=this.tech_.currentTime(),t=this.tech_.buffered(),i=f1(t,e);if(i.length&&e+3<=i.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(e),this.logger_(`Stopped at ${e} while inside a buffered region [${i.start(0)} -> ${i.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(e,t)){const o=e.end(e.length-1);return this.logger_(`Fell out of live window at time ${t}. Seeking to live point (seekable end) ${o}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(o),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const i=this.tech_.vhs.playlistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const a=fA(r,t);return a.length>0?(this.logger_(`Stopped at ${t} and seeking to ${a.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(t),!0):!1}afterSeekableWindow_(e,t,i,r=!1){if(!e.length)return!1;let s=e.end(e.length-1)+Id;const a=!i.endList,o=typeof i.partTargetDuration=="number";return a&&(o||r)&&(s=e.end(e.length-1)+i.targetDuration*3),t>s}beforeSeekableWindow_(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:e,audioBuffered:t,currentTime:i}){if(!e)return;let r;if(e.length&&t.length){const s=f1(e,i-3),a=f1(e,i),o=f1(t,i);o.length&&!a.length&&s.length&&(r={start:s.end(0),end:o.end(0)})}else fA(e,i).length||(r=this.gapFromVideoUnderflow_(e,i));return r?(this.logger_(`Encountered a gap in video from ${r.start} to ${r.end}. Seeking to current time ${i}`),!0):!1}skipTheGap_(e){const t=this.tech_.buffered(),i=this.tech_.currentTime(),r=fA(t,i);if(this.resetTimeUpdate_(),r.length===0||i!==e)return;this.logger_("skipTheGap_:","currentTime:",i,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Md);const s={gapInfo:{from:i,to:r.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:s}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(e,t){const i=mWe(e);for(let r=0;r<i.length;r++){const s=i.start(r),a=i.end(r);if(t-s<4&&t-s>2)return{start:s,end:a}}return null}}const Oje={errorInterval:30,getSource(n){const t=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return n(t)}},xle=function(n,e){let t=0,i=0;const r=Fr(Oje,e);n.ready(()=>{n.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const s=function(){i&&n.currentTime(i)},a=function(c){c!=null&&(i=n.duration()!==1/0&&n.currentTime()||0,n.one("loadedmetadata",s),n.src(c),n.trigger({type:"usage",name:"vhs-error-reload"}),n.play())},o=function(){if(Date.now()-t<r.errorInterval*1e3){n.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!r.getSource||typeof r.getSource!="function"){$t.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return t=Date.now(),r.getSource.call(n,a)},l=function(){n.off("loadedmetadata",s),n.off("error",o),n.off("dispose",l)},u=function(c){l(),xle(n,c)};n.on("error",o),n.on("dispose",l),n.reloadSourceOnError=u},Nje=function(n){xle(this,n)};var wle="3.16.2",Bje="7.1.0",Fje="1.3.1",Uje="7.2.0",zje="4.0.2";const Ss={PlaylistLoader:h1,Playlist:yl,utils:VWe,STANDARD_PLAYLIST_SELECTOR:$W,INITIAL_PLAYLIST_SELECTOR:Pqe,lastBandwidthSelector:$W,movingAverageBandwidthSelector:Dqe,comparePlaylistBandwidth:x9,comparePlaylistResolution:Iqe,xhr:Xoe()};Object.keys(Ma).forEach(n=>{Object.defineProperty(Ss,n,{get(){return $t.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),Ma[n]},set(e){if($t.log.warn(`using Vhs.${n} is UNSAFE be sure you know what you are doing`),typeof e!="number"||e<0){$t.log.warn(`value of Vhs.${n} must be greater than or equal to 0`);return}Ma[n]=e}})});const Tle="videojs-vhs",Cle=function(n,e){const t=e.media();let i=-1;for(let r=0;r<n.length;r++)if(n[r].id===t.id){i=r;break}n.selectedIndex_=i,n.trigger({selectedIndex:i,type:"change"})},Hje=function(n,e){e.representations().forEach(t=>{n.addQualityLevel(t)}),Cle(n,e.playlists)};Ss.canPlaySource=function(){return $t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const Vje=(n,e,t)=>{if(!n)return n;let i={};e&&e.attributes&&e.attributes.CODECS&&(i=m4(md(e.attributes.CODECS))),t&&t.attributes&&t.attributes.CODECS&&(i.audio=t.attributes.CODECS);const r=x_(i.video),s=x_(i.audio),a={};for(const o in n)a[o]={},s&&(a[o].audioContentType=s),r&&(a[o].videoContentType=r),e.contentProtection&&e.contentProtection[o]&&e.contentProtection[o].pssh&&(a[o].pssh=e.contentProtection[o].pssh),typeof n[o]=="string"&&(a[o].url=n[o]);return Fr(n,a)},$je=(n,e)=>n.reduce((t,i)=>{if(!i.contentProtection)return t;const r=e.reduce((s,a)=>{const o=i.contentProtection[a];return o&&o.pssh&&(s[a]={pssh:o.pssh}),s},{});return Object.keys(r).length&&t.push(r),t},[]),Gje=({player:n,sourceKeySystems:e,audioMedia:t,mainPlaylists:i})=>{if(!n.eme.initializeMediaKeys)return Promise.resolve();const r=t?i.concat([t]):i,s=$je(r,Object.keys(e)),a=[],o=[];return s.forEach(l=>{o.push(new Promise((u,c)=>{n.tech_.one("keysessioncreated",u)})),a.push(new Promise((u,c)=>{n.eme.initializeMediaKeys({keySystems:l},d=>{if(d){c(d);return}u()})}))}),Promise.race([Promise.all(a),Promise.race(o)])},Wje=({player:n,sourceKeySystems:e,media:t,audioMedia:i})=>{const r=Vje(e,t,i);return r?(n.currentSource().keySystems=r,r&&!n.eme?($t.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Ale=()=>{if(!ht.localStorage)return null;const n=ht.localStorage.getItem(Tle);if(!n)return null;try{return JSON.parse(n)}catch{return null}},qje=n=>{if(!ht.localStorage)return!1;let e=Ale();e=e?Fr(e,n):n;try{ht.localStorage.setItem(Tle,JSON.stringify(e))}catch{return!1}return e},jje=n=>n.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(n.substring(n.indexOf(",")+1)):n,Ele=(n,e)=>{n._requestCallbackSet||(n._requestCallbackSet=new Set),n._requestCallbackSet.add(e)},Mle=(n,e)=>{n._responseCallbackSet||(n._responseCallbackSet=new Set),n._responseCallbackSet.add(e)},Ile=(n,e)=>{n._requestCallbackSet&&(n._requestCallbackSet.delete(e),n._requestCallbackSet.size||delete n._requestCallbackSet)},Dle=(n,e)=>{n._responseCallbackSet&&(n._responseCallbackSet.delete(e),n._responseCallbackSet.size||delete n._responseCallbackSet)};Ss.supportsNativeHls=function(){if(!Tn||!Tn.createElement)return!1;const n=Tn.createElement("video");return $t.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(t){return/maybe|probably/i.test(n.canPlayType(t))}):!1}();Ss.supportsNativeDash=function(){return!Tn||!Tn.createElement||!$t.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Tn.createElement("video").canPlayType("application/dash+xml"))}();Ss.supportsTypeNatively=n=>n==="hls"?Ss.supportsNativeHls:n==="dash"?Ss.supportsNativeDash:!1;Ss.isSupported=function(){return $t.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ss.xhr.onRequest=function(n){Ele(Ss.xhr,n)};Ss.xhr.onResponse=function(n){Mle(Ss.xhr,n)};Ss.xhr.offRequest=function(n){Ile(Ss.xhr,n)};Ss.xhr.offResponse=function(n){Dle(Ss.xhr,n)};const Kje=$t.getComponent("Component");class Rle extends Kje{constructor(e,t,i){if(super(t,i.vhs),typeof i.initialBandwidth=="number"&&(this.options_.bandwidth=i.initialBandwidth),this.logger_=pc("VhsHandler"),t.options_&&t.options_.playerId){const r=$t.getPlayer(t.options_.playerId);this.player_=r}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(Tn,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],r=>{const s=Tn.fullscreenElement||Tn.webkitFullscreenElement||Tn.mozFullScreenElement||Tn.msFullscreenElement;s&&s.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(e={}){if(this.options_=Fr(this.options_,e),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const i=Ale();i&&i.bandwidth&&(this.options_.bandwidth=i.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),i&&i.throughput&&(this.options_.throughput=i.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Ma.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ma.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(i=>{typeof this.source_[i]<"u"&&(this.options_[i]=this.source_[i])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio;const t=this.options_.customPixelRatio;typeof t=="number"&&t>=0&&(this.customPixelRatio=t)}setOptions(e={}){this.setOptions_(e)}src(e,t){if(!e)return;this.setOptions_(),this.options_.src=jje(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ss,this.options_.sourceType=xse(t),this.options_.seekTo=s=>{this.tech_.setCurrentTime(s)},this.options_.player_=this.player_,this.playlistController_=new Dje(this.options_);const i=Fr({liveRangeSafeTimeDelta:Id},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new Lje(i),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const s=$t.players[this.tech_.options_.playerId];let a=this.playlistController_.error;typeof a=="object"&&!a.code?a.code=3:typeof a=="string"&&(a={message:a,code:3}),s.error(a)});const r=this.options_.bufferBasedABR?Ss.movingAverageBandwidthSelector(.55):Ss.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):r.bind(this),this.playlistController_.selectInitialPlaylist=Ss.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(s){this.playlistController_.selectPlaylist=s.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(s){this.playlistController_.mainSegmentLoader_.throughput.rate=s,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let s=this.playlistController_.mainSegmentLoader_.bandwidth;const a=ht.navigator.connection||ht.navigator.mozConnection||ht.navigator.webkitConnection,o=1e7;if(this.options_.useNetworkInformationApi&&a){const l=a.downlink*1e3*1e3;l>=o&&s>=o?s=Math.max(s,l):s=l}return s},set(s){this.playlistController_.mainSegmentLoader_.bandwidth=s,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const s=1/(this.bandwidth||1);let a;return this.throughput>0?a=1/this.throughput:a=0,Math.floor(1/(s+a))},set(){$t.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>ig(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>ig(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&qje({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{kje(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=ht.URL.createObjectURL(this.playlistController_.mediaSource),($t.browser.IS_ANY_SAFARI||$t.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),Gje({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(t=>{this.logger_("error while creating EME key session",t),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const e=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,t=Wje({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});if(this.player_.tech_.on("keystatuschange",i=>{this.playlistController_.updatePlaylistByKeyStatus(i.keyId,i.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!t){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const e=$t.players[this.tech_.options_.playerId];!e||!e.qualityLevels||this.qualityLevels_||(this.qualityLevels_=e.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{Hje(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{Cle(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":wle,"mux.js":Bje,"mpd-parser":Fje,"m3u8-parser":Uje,"aes-decrypter":zje}}version(){return this.constructor.version()}canChangeType(){return yle.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(e){this.playlistController_.setCurrentTime(e)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&ht.URL.revokeObjectURL&&(ht.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(e,t){return XWe({playlist:this.playlistController_.media(),time:e,callback:t})}seekToProgramTime(e,t,i=!0,r=2){return ele({programTime:e,playlist:this.playlistController_.media(),retryCount:r,pauseAfterSeek:i,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}setupXhrHooks_(){this.xhr.onRequest=e=>{Ele(this.xhr,e)},this.xhr.onResponse=e=>{Mle(this.xhr,e)},this.xhr.offRequest=e=>{Ile(this.xhr,e)},this.xhr.offResponse=e=>{Dle(this.xhr,e)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const e=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],t=["gapjumped","playedrangeschanged"];e.forEach(i=>{this.playlistController_.on(i,r=>{this.player_.trigger(Ds({},r))})}),t.forEach(i=>{this.playbackWatcher_.on(i,r=>{this.player_.trigger(Ds({},r))})})}}const y4={name:"videojs-http-streaming",VERSION:wle,canHandleSource(n,e={}){const t=Fr($t.options,e);return!t.vhs.experimentalUseMMS&&!e2("avc1.4d400d,mp4a.40.2",!1)?!1:y4.canPlayType(n.type,t)},handleSource(n,e,t={}){const i=Fr($t.options,t);return e.vhs=new Rle(n,e,i),e.vhs.xhr=Xoe(),e.vhs.setupXhrHooks_(),e.vhs.src(n.src,n.type),e.vhs},canPlayType(n,e){const t=xse(n);if(!t)return"";const i=y4.getOverrideNative(e);return!Ss.supportsTypeNatively(t)||i?"maybe":""},getOverrideNative(n={}){const{vhs:e={}}=n,t=!($t.browser.IS_ANY_SAFARI||$t.browser.IS_IOS),{overrideNative:i=t}=e;return i}},Xje=()=>e2("avc1.4d400d,mp4a.40.2",!0);Xje()&&$t.getTech("Html5").registerSourceHandler(y4,0);$t.VhsHandler=Rle;$t.VhsSourceHandler=y4;$t.Vhs=Ss;$t.use||$t.registerComponent("Vhs",Ss);$t.options.vhs=$t.options.vhs||{};(!$t.getPlugin||!$t.getPlugin("reloadSourceOnError"))&&$t.registerPlugin("reloadSourceOnError",Nje);const Ple=n=>(cc("data-v-d1e5e940"),n=n(),dc(),n),Yje=Ple(()=>Te("h1",{class:"section-title"},"Explainer Video",-1)),Qje=Ple(()=>Te("iframe",{src:"//player.bilibili.com/player.html?isOutside=true&aid=802517980&bvid=BV1qy4y1x7VV&cid=325180260&p=1",scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:"true"},null,-1)),Zje={__name:"Video",setup(n){const e=ae(null),t=ae(null);return Ln(()=>{t.value=$t(e.value,{poster:"",autoplay:!0,controls:!0,muted:!0,fluid:!0,preload:"auto",sources:[{src:"./video/video.mp4",type:"video/mp4"}],playbackRates:[.5,1,1.5,2],controlBar:{skipButtons:{forward:5,backward:5}}})}),yh(()=>{t.value&&t.value.dispose()}),(i,r)=>{const s=Ht("el-divider"),a=Ht("el-row"),o=Ht("el-container"),l=Ht("el-col");return j(),_e("div",null,[he(s),he(a,{justify:"center"},{default:Ae(()=>[Yje]),_:1}),he(a,{justify:"center"},{default:Ae(()=>[he(l,{xs:24,sm:20,md:16,lg:12,xl:10},{default:Ae(()=>[he(o,{class:"video-container"},{default:Ae(()=>[Qje]),_:1})]),_:1})]),_:1}),he(a,{justify:"center"},{default:Ae(()=>[he(l,{xs:24,sm:20,md:16,lg:12,xl:10},{default:Ae(()=>[he(o,{class:"video-container"},{default:Ae(()=>[Te("video",{ref_key:"videoPlayer",ref:e,class:"video-js"},null,512)]),_:1})]),_:1})]),_:1})])}}},Jje=Fa(Zje,[["__scopeId","data-v-d1e5e940"]]),eKe={data(){return{sliderValue:0,inputImageRootPath:"./image_slider/huaqiang/input/",outputImageRootPath:"./image_slider/huaqiang/output/",inputImagePath:"",outputImagePath:"",inputLoading:!0,outputLoading:!0,minValue:0,maxValue:9}},beforeMount(){this.loadImage(this.sliderValue,this.inputImageRootPath,"input"),this.loadImage(this.sliderValue,this.outputImageRootPath,"output")},methods:{handleChange(n){this.loadImage(n,this.inputImageRootPath,"input"),this.loadImage(n,this.outputImageRootPath,"output")},loadImage(n,e,t){t=="input"?this.inputLoading=!0:this.outputLoading=!0;const i=`${e}${n}.png`,r=new Image;r.src=i,r.onload=()=>{t=="input"?(this.inputImagePath=i,this.inputLoading=!1):(this.outputImagePath=i,this.outputLoading=!1)}}}},tKe=n=>(cc("data-v-0dd1ab15"),n=n(),dc(),n),nKe=tKe(()=>Te("h1",{class:"section-title"},"Qualitative Results",-1)),iKe={class:"demo-image"},rKe={class:"block"},sKe={class:"demonstration"},aKe={class:"demo-image"},oKe={class:"block"},lKe={class:"demonstration"};function uKe(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("el-skeleton-item"),u=Ht("el-image"),c=Ht("el-skeleton"),d=Ht("el-col"),f=Ht("el-slider");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[nKe]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(d,null,{default:Ae(()=>[he(o,{justify:"center",gutter:20},{default:Ae(()=>[he(d,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Ae(()=>[Te("div",iKe,[Te("div",rKe,[he(c,{style:{width:"100%"},loading:r.inputLoading,animated:"",throttle:1e3},{template:Ae(()=>[he(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Ae(()=>[he(u,{src:r.inputImagePath,fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Te("span",sKe,"input: "+Lt(r.inputImagePath),1)])])]),_:1}),he(d,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Ae(()=>[Te("div",aKe,[Te("div",oKe,[he(c,{style:{width:"100%"},loading:r.outputLoading,animated:"",throttle:1e3},{template:Ae(()=>[he(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Ae(()=>[he(u,{src:r.outputImagePath,fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Te("span",lKe,"output: "+Lt(r.outputImagePath),1)])])]),_:1})]),_:1})]),_:1})]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(d,{span:12},{default:Ae(()=>[he(f,{modelValue:r.sliderValue,"onUpdate:modelValue":e[0]||(e[0]=h=>r.sliderValue=h),min:r.minValue,max:r.maxValue,onInput:s.handleChange},null,8,["modelValue","min","max","onInput"])]),_:1})]),_:1})])}const cKe=Fa(eKe,[["render",uKe],["__scopeId","data-v-0dd1ab15"]]),dKe=["innerHTML"],fKe=["id"],hKe=["alt","src"],pKe=["alt","src"],mKe=["innerHTML"],gKe=Ne({__name:"VueCompareImage",props:{aspectRatio:{default:"wider"},handle:{type:[String,Number,Boolean]},handleSize:{default:40},hover:{type:Boolean,default:!1},slideOnClick:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!1},keyboardStep:{default:.01},leftImage:{},leftImageAlt:{},leftImageCss:{},leftImageLabel:{},onSliderPositionChange:{type:Function,default:()=>{}},rightImage:{},rightImageAlt:{},rightImageCss:{},rightImageLabel:{},skeleton:{type:[String,Number,Boolean]},sliderLineColor:{default:"#ffffff"},sliderLineWidth:{default:2},sliderPositionPercentage:{default:.5},vertical:{type:Boolean,default:!1}},emits:["slideStart","slideEnd","isSliding"],setup(n,{emit:e}){const t=n,{aspectRatio:i,leftImage:r,leftImageAlt:s,leftImageLabel:a,leftImageCss:o,rightImage:l,rightImageAlt:u,rightImageLabel:c,rightImageCss:d,hover:f,handle:h,handleSize:p,sliderLineWidth:m,sliderPositionPercentage:g,skeleton:v,sliderLineColor:_,vertical:y,onSliderPositionChange:b,slideOnClick:x,keyboard:w,keyboardStep:A}=js(t),T=Math.random().toString(36).substr(2,9),C=!y.value,E=ae(),I=ae(null),k=ae(null),O=ae(g.value),U=ae(0),z=ae(0),L=ae(!1),G=ae(!1),H=ae(!1),F=W(()=>L.value&&G.value),X=W(()=>O.value),te=W(()=>1-O.value),re=W(()=>({display:F.value?"flex":"none",height:`${z.value}px`})),ie=W(()=>({clipPath:C?`inset(0px 0px 0px ${U.value*X.value}px)`:`inset(${z.value*X.value}px 0px 0px 0px)`,...d})),le=W(()=>({clipPath:C?`inset(0px ${U.value*te.value}px 0px 0px)`:`inset(0px 0px ${z.value*te.value}px 0px)`,...o})),ge=W(()=>({cursor:!f.value&&C?"ew-resize !important":!f.value&&!C?"ns-resize !important":void 0,flexDirection:C?"column":"row",height:C?"100%":`${p.value}px`,left:C?`${U.value*O.value-p.value/2}px`:"0",top:C?"0":`${z.value*O.value-p.value/2}px`,width:C?`${p.value}px`:"100%"})),pe=W(()=>({background:_.value,height:C?"100%":`${m.value}px`,width:C?`${m.value}px`:"100%"})),ye=W(()=>({border:`${m.value}px solid ${_.value}`,height:`${p.value}px`,width:`${p.value}px`,transform:C?"none":"rotate(90deg)"})),Oe=W(()=>({border:`inset ${p.value*.15}px rgba(0,0,0,0)`,borderRight:`${p.value*.15}px solid ${_.value}`,marginLeft:`-${p.value*.25}px`,marginRight:`${p.value*.25}px`})),Be=W(()=>({border:`inset ${p.value*.15}px rgba(0,0,0,0)`,borderLeft:`${p.value*.15}px solid ${_.value}`,marginRight:`-${p.value*.25}px`})),Ye=W(()=>({left:C?"5%":"50%",opacity:H.value?0:1,top:C?"50%":"3%",transform:C?"translate(0,-50%)":"translate(-50%, 0)"})),Ze=W(()=>({opacity:H.value?0:1,left:C?"unset":"50%",right:C?"5%":"unset",top:C?"50%":"unset",bottom:C?"unset":"3%",transform:C?"translate(0,-50%)":"translate(-50%, 0)"})),Q=W(()=>({clip:C?`rect(auto, ${U.value*O.value}px, auto, auto)`:`rect(auto, auto, ${z.value*O.value}px, auto)`})),me=W(()=>({clipPath:C?`inset(0px 0px 0px ${U.value*X.value}px)`:`inset(${z.value*X.value}px 0px 0px 0px)`}));function ce(ne){const Se=ne,ze=Se.touches?Se.touches[0].pageX:Se.pageX,Je=Se.touches?Se.touches[0].pageY:Se.pageY,Tt=ze-window.pageXOffset,At=Je-window.pageYOffset,Re=I.value.getBoundingClientRect();let wt=C?Tt-Re.left:At-Re.top;const vt=0+m.value/2,q=C?U.value-m.value/2:z.value-m.value/2;wt<vt&&(wt=vt),wt>q&&(wt=q),O.value=C?wt/U.value:wt/z.value,b.value&&b.value(C?wt/U.value:wt/z.value)}function je(ne){H.value=!0,e("slideStart",O.value),e("isSliding",H.value),C&&"touches"in ne||ne.preventDefault(),x.value&&ce(ne),window.addEventListener("mousemove",ce),window.addEventListener("touchmove",ce),window.addEventListener("mouseup",Fe),window.addEventListener("touchend",Fe)}function Fe(){H.value=!1,e("slideEnd",O.value),e("isSliding",H.value),window.removeEventListener("mousemove",ce),window.removeEventListener("touchmove",ce),window.removeEventListener("mouseup",Fe),window.removeEventListener("touchend",Fe)}function nt(){w.value&&window.addEventListener("keydown",be)}function We(){w.value&&window.removeEventListener("keydown",be)}function Ke(){w.value&&window.addEventListener("keydown",be)}function it(ne){E.value&&!E.value.contains(ne.target)&&(E.value.blur(),window.removeEventListener("keydown",be))}function be(ne){ne.key==="ArrowDown"&&!C?(ne.preventDefault(),O.value+A.value>1?O.value=1:O.value+=A.value):ne.key==="ArrowUp"&&!C||ne.key==="ArrowLeft"&&C?(ne.preventDefault(),O.value-A.value<0?O.value=0:O.value-=A.value):ne.key==="ArrowRight"&&C&&(ne.preventDefault(),O.value+A.value>1?O.value=1:O.value+=A.value)}function K(){var ze;const ne=Qn();(ze=ne==null?void 0:ne.proxy)==null||ze.$forceUpdate();const Se=E.value;t.hover?(Se==null||Se.addEventListener("mousemove",je),Se==null||Se.addEventListener("mouseleave",Fe)):(Se==null||Se.removeEventListener("mousemove",je),Se==null||Se.removeEventListener("mouseleave",Fe),Se==null||Se.addEventListener("mouseup",Fe),Se==null||Se.addEventListener("touchend",Fe))}return Ln(()=>{const ne=E.value,Se=new ResizeObserver(([ze])=>{const Je=ze.target.getBoundingClientRect().width;U.value=Je});return Se.observe(ne),()=>Se.disconnect()}),Ln(()=>{const ne=E.value;t.hover&&(ne==null||ne.addEventListener("mousemove",je),ne==null||ne.addEventListener("mouseleave",Fe)),window.addEventListener("click",it)}),Vi(()=>{const ne=E.value;ne==null||ne.removeEventListener("mousemove",je),ne==null||ne.removeEventListener("mouseleave",Fe),window.removeEventListener("keydown",be),window.removeEventListener("click",it),window.removeEventListener("mousemove",ce),window.removeEventListener("touchmove",ce),window.removeEventListener("mouseup",Fe),window.removeEventListener("touchend",Fe)}),St(k,()=>{var ne;L.value=!1,(ne=k.value)!=null&&ne.complete&&(L.value=!0)}),St(I,()=>{var ne;G.value=!1,(ne=I.value)!=null&&ne.complete&&(G.value=!0)}),St(f,()=>{K()}),St([()=>U.value,()=>L.value,()=>G.value],()=>{const ne=k.value.naturalHeight/k.value.naturalWidth,Se=I.value.naturalHeight/I.value.naturalWidth,ze=i.value==="taller"?Math.max(ne,Se):Math.min(ne,Se),Je=U.value*ze;z.value=Je}),(ne,Se)=>S(v)&&!F.value?(j(),_e("div",{key:0,"data-testid":"skeleton",style:Jt(re.value),innerHTML:S(v)},null,12,dKe)):(j(),_e("div",{key:1,id:S(T),ref_key:"containerRef",ref:E,class:"vci--container",tabindex:"0","data-testid":"vci-container",style:Jt(re.value),onClick:Ke,onTouchstart:je,onTouchend:Fe,onFocusin:nt,onFocusout:We,onMousedown:je,onMouseup:Fe},[Te("img",{ref_key:"rightImageRef",ref:I,class:"vci--right-image",alt:S(u),"data-testid":"right-image",src:S(l),style:Jt(ie.value),onLoad:Se[0]||(Se[0]=ze=>G.value=!0)},null,44,hKe),Te("img",{ref_key:"leftImageRef",ref:k,class:"vci--left-image",alt:S(s),"data-testid":"left-image",src:S(r),style:Jt(le.value),onLoad:Se[1]||(Se[1]=ze=>L.value=!0)},null,44,pKe),Te("div",{class:"vci--slider",style:Jt(ge.value)},[Te("div",{class:"vci--slider-line",style:Jt(pe.value)},null,4),S(h)?(j(),_e("div",{key:0,class:"vci--custom-handle",innerHTML:S(h)},null,8,mKe)):(j(),_e("div",{key:1,class:"vci--default-handle",style:Jt(ye.value)},[Te("div",{class:"vci--left-arrow",style:Jt(Oe.value)},null,4),Te("div",{class:"vci--right-arrow",style:Jt(Be.value)},null,4)],4)),Te("div",{class:"vci--slider-line",style:Jt(pe.value)},null,4)],4),S(a)?(j(),_e("div",{key:0,class:"vci--left-label-container",style:Jt(Q.value)},[Te("div",{class:"vci--left-label","data-testid":"left-image-label",style:Jt(Ye.value)},Lt(S(a)),5)],4)):ot("",!0),S(c)?(j(),_e("div",{key:1,class:"vci--right-label-container",style:Jt(me.value)},[Te("div",{class:"vci--right-label","data-testid":"right-image-label",style:Jt(Ze.value)},Lt(S(c)),5)],4)):ot("",!0)],44,fKe))}}),vKe=Te("h1",{class:"section-title"},"Image Inner Comparison",-1),yKe="./image_inner/line.jpg",_Ke="./image_inner/real.jpg",bKe=Ne({__name:"ImageSliderInner",setup(n){return(e,t)=>{const i=Ht("el-divider"),r=Ht("el-row"),s=Ht("el-col");return j(),_e("div",null,[he(i),he(r,{justify:"center"},{default:Ae(()=>[vKe]),_:1}),he(r,{justify:"center"},{default:Ae(()=>[he(s,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[he(r,{style:{"margin-top":"20px"}},{default:Ae(()=>[he(S(gKe),{"left-image":yKe,"right-image":_Ke,hover:!0})]),_:1})]),_:1})]),_:1})])}}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $8=function(n,e){return $8=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])},$8(n,e)};function Mi(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");$8(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var SKe=function(){function n(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return n}(),xKe=function(){function n(){this.browser=new SKe,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return n}(),Rm=new xKe;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Rm.wxa=!0,Rm.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Rm.worker=!0:typeof navigator>"u"?(Rm.node=!0,Rm.svgSupported=!0):wKe(navigator.userAgent,Rm);function wKe(n,e){var t=e.browser,i=n.match(/Firefox\/([\d.]+)/),r=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),s=n.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(n);i&&(t.firefox=!0,t.version=i[1]),r&&(t.ie=!0,t.version=r[1]),s&&(t.edge=!0,t.version=s[1],t.newEdge=+s[1].split(".")[0]>18),a&&(t.weChat=!0),e.svgSupported=typeof SVGRect<"u",e.touchEventsSupported="ontouchstart"in window&&!t.ie&&!t.edge,e.pointerEventsSupported="onpointerdown"in window&&(t.edge||t.ie&&+t.version>=11),e.domSupported=typeof document<"u";var o=document.documentElement.style;e.transform3dSupported=(t.ie&&"transition"in o||t.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),e.transformSupported=e.transform3dSupported||t.ie&&+t.version>=9}const tr=Rm;var w9=12,TKe="sans-serif",$g=w9+"px "+TKe,CKe=20,AKe=100,EKe="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function MKe(n){var e={};if(typeof JSON>"u")return e;for(var t=0;t<n.length;t++){var i=String.fromCharCode(t+32),r=(n.charCodeAt(t)-CKe)/AKe;e[i]=r}return e}var IKe=MKe(EKe),Ab={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var n,e;return function(t,i){if(!n){var r=Ab.createCanvas();n=r&&r.getContext("2d")}if(n)return e!==i&&(e=n.font=i||$g),n.measureText(t);t=t||"",i=i||$g;var s=/(\d+)px/.exec(i),a=s&&+s[1]||w9,o=0;if(i.indexOf("mono")>=0)o=a*t.length;else for(var l=0;l<t.length;l++){var u=IKe[t[l]];o+=u==null?a:u*a}return{width:o}}}(),loadImage:function(n,e,t){var i=new Image;return i.onload=e,i.onerror=t,i.src=n,i}},kle=u0(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,e){return n["[object "+e+"]"]=!0,n},{}),Lle=u0(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,e){return n["[object "+e+"Array]"]=!0,n},{}),kT=Object.prototype.toString,BD=Array.prototype,DKe=BD.forEach,RKe=BD.filter,T9=BD.slice,PKe=BD.map,nq=(function(){}).constructor,mA=nq?nq.prototype:null,C9="__proto__",kKe=2311;function Ole(){return kKe++}function A9(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];typeof console<"u"&&console.error.apply(console,n)}function Cr(n){if(n==null||typeof n!="object")return n;var e=n,t=kT.call(n);if(t==="[object Array]"){if(!o2(n)){e=[];for(var i=0,r=n.length;i<r;i++)e[i]=Cr(n[i])}}else if(Lle[t]){if(!o2(n)){var s=n.constructor;if(s.from)e=s.from(n);else{e=new s(n.length);for(var i=0,r=n.length;i<r;i++)e[i]=n[i]}}}else if(!kle[t]&&!o2(n)&&!_4(n)){e={};for(var a in n)n.hasOwnProperty(a)&&a!==C9&&(e[a]=Cr(n[a]))}return e}function xs(n,e,t){if(!Ni(e)||!Ni(n))return t?Cr(e):n;for(var i in e)if(e.hasOwnProperty(i)&&i!==C9){var r=n[i],s=e[i];Ni(s)&&Ni(r)&&!vi(s)&&!vi(r)&&!_4(s)&&!_4(r)&&!iq(s)&&!iq(r)&&!o2(s)&&!o2(r)?xs(r,s,t):(t||!(i in n))&&(n[i]=Cr(e[i]))}return n}function Rn(n,e){if(Object.assign)Object.assign(n,e);else for(var t in e)e.hasOwnProperty(t)&&t!==C9&&(n[t]=e[t]);return n}function Cs(n,e,t){for(var i=Gs(e),r=0;r<i.length;r++){var s=i[r];(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}return n}function ls(n,e){if(n){if(n.indexOf)return n.indexOf(e);for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t}return-1}function LKe(n,e){var t=n.prototype;function i(){}i.prototype=e.prototype,n.prototype=new i;for(var r in t)t.hasOwnProperty(r)&&(n.prototype[r]=t[r]);n.prototype.constructor=n,n.superClass=e}function Ah(n,e,t){if(n="prototype"in n?n.prototype:n,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var s=i[r];s!=="constructor"&&(t?e[s]!=null:n[s]==null)&&(n[s]=e[s])}else Cs(n,e,t)}function kl(n){return!n||typeof n=="string"?!1:typeof n.length=="number"}function Nt(n,e,t){if(n&&e)if(n.forEach&&n.forEach===DKe)n.forEach(e,t);else if(n.length===+n.length)for(var i=0,r=n.length;i<r;i++)e.call(t,n[i],i,n);else for(var s in n)n.hasOwnProperty(s)&&e.call(t,n[s],s,n)}function Sr(n,e,t){if(!n)return[];if(!e)return E9(n);if(n.map&&n.map===PKe)return n.map(e,t);for(var i=[],r=0,s=n.length;r<s;r++)i.push(e.call(t,n[r],r,n));return i}function u0(n,e,t,i){if(n&&e){for(var r=0,s=n.length;r<s;r++)t=e.call(i,t,n[r],r,n);return t}}function Nu(n,e,t){if(!n)return[];if(!e)return E9(n);if(n.filter&&n.filter===RKe)return n.filter(e,t);for(var i=[],r=0,s=n.length;r<s;r++)e.call(t,n[r],r,n)&&i.push(n[r]);return i}function Gs(n){if(!n)return[];if(Object.keys)return Object.keys(n);var e=[];for(var t in n)n.hasOwnProperty(t)&&e.push(t);return e}function OKe(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return function(){return n.apply(e,t.concat(T9.call(arguments)))}}var us=mA&&$r(mA.bind)?mA.call.bind(mA.bind):OKe;function pa(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return function(){return n.apply(this,e.concat(T9.call(arguments)))}}function vi(n){return Array.isArray?Array.isArray(n):kT.call(n)==="[object Array]"}function $r(n){return typeof n=="function"}function ki(n){return typeof n=="string"}function G8(n){return kT.call(n)==="[object String]"}function Ws(n){return typeof n=="number"}function Ni(n){var e=typeof n;return e==="function"||!!n&&e==="object"}function iq(n){return!!kle[kT.call(n)]}function mu(n){return!!Lle[kT.call(n)]}function _4(n){return typeof n=="object"&&typeof n.nodeType=="number"&&typeof n.ownerDocument=="object"}function FD(n){return n.colorStops!=null}function NKe(n){return n.image!=null}function BKe(n){return n!==n}function bw(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var t=0,i=n.length;t<i;t++)if(n[t]!=null)return n[t]}function yr(n,e){return n??e}function a2(n,e,t){return n??e??t}function E9(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return T9.apply(n,e)}function Nle(n){if(typeof n=="number")return[n,n,n,n];var e=n.length;return e===2?[n[0],n[1],n[0],n[1]]:e===3?[n[0],n[1],n[2],n[1]]:n}function dh(n,e){if(!n)throw new Error(e)}function Rd(n){return n==null?null:typeof n.trim=="function"?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Ble="__ec_primitive__";function W8(n){n[Ble]=!0}function o2(n){return n[Ble]}var FKe=function(){function n(){this.data={}}return n.prototype.delete=function(e){var t=this.has(e);return t&&delete this.data[e],t},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){return this.data[e]=t,this},n.prototype.keys=function(){return Gs(this.data)},n.prototype.forEach=function(e){var t=this.data;for(var i in t)t.hasOwnProperty(i)&&e(t[i],i)},n}(),Fle=typeof Map=="function";function UKe(){return Fle?new Map:new FKe}var zKe=function(){function n(e){var t=vi(e);this.data=UKe();var i=this;e instanceof n?e.each(r):e&&Nt(e,r);function r(s,a){t?i.set(s,a):i.set(a,s)}}return n.prototype.hasKey=function(e){return this.data.has(e)},n.prototype.get=function(e){return this.data.get(e)},n.prototype.set=function(e,t){return this.data.set(e,t),t},n.prototype.each=function(e,t){this.data.forEach(function(i,r){e.call(t,i,r)})},n.prototype.keys=function(){var e=this.data.keys();return Fle?Array.from(e):e},n.prototype.removeKey=function(e){this.data.delete(e)},n}();function _r(n){return new zKe(n)}function HKe(n,e){for(var t=new n.constructor(n.length+e.length),i=0;i<n.length;i++)t[i]=n[i];for(var r=n.length,i=0;i<e.length;i++)t[i+r]=e[i];return t}function UD(n,e){var t;if(Object.create)t=Object.create(n);else{var i=function(){};i.prototype=n,t=new i}return e&&Rn(t,e),t}function Ule(n){var e=n.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function O_(n,e){return n.hasOwnProperty(e)}function Al(){}var VKe=180/Math.PI;function Eb(n,e){return n==null&&(n=0),e==null&&(e=0),[n,e]}function $Ke(n){return[n[0],n[1]]}function rq(n,e,t){return n[0]=e[0]+t[0],n[1]=e[1]+t[1],n}function GKe(n,e,t){return n[0]=e[0]-t[0],n[1]=e[1]-t[1],n}function WKe(n){return Math.sqrt(qKe(n))}function qKe(n){return n[0]*n[0]+n[1]*n[1]}function YP(n,e,t){return n[0]=e[0]*t,n[1]=e[1]*t,n}function jKe(n,e){var t=WKe(e);return t===0?(n[0]=0,n[1]=0):(n[0]=e[0]/t,n[1]=e[1]/t),n}function q8(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}var j8=q8;function KKe(n,e){return(n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])}var G1=KKe;function QP(n,e,t,i){return n[0]=e[0]+i*(t[0]-e[0]),n[1]=e[1]+i*(t[1]-e[1]),n}function zd(n,e,t){var i=e[0],r=e[1];return n[0]=t[0]*i+t[2]*r+t[4],n[1]=t[1]*i+t[3]*r+t[5],n}function p1(n,e,t){return n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n}function m1(n,e,t){return n[0]=Math.max(e[0],t[0]),n[1]=Math.max(e[1],t[1]),n}var Kv=function(){function n(e,t){this.target=e,this.topTarget=t&&t.topTarget}return n}(),XKe=function(){function n(e){this.handler=e,e.on("mousedown",this._dragStart,this),e.on("mousemove",this._drag,this),e.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent||t.__hostTarget;t&&(this._draggingTarget=t,t.dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.handler.dispatchToElement(new Kv(t,e),"dragstart",e.event))},n.prototype._drag=function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,r=e.offsetY,s=i-this._x,a=r-this._y;this._x=i,this._y=r,t.drift(s,a,e),this.handler.dispatchToElement(new Kv(t,e),"drag",e.event);var o=this.handler.findHover(i,r,t).target,l=this._dropTarget;this._dropTarget=o,t!==o&&(l&&o!==l&&this.handler.dispatchToElement(new Kv(l,e),"dragleave",e.event),o&&o!==l&&this.handler.dispatchToElement(new Kv(o,e),"dragenter",e.event))}},n.prototype._dragEnd=function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.handler.dispatchToElement(new Kv(t,e),"dragend",e.event),this._dropTarget&&this.handler.dispatchToElement(new Kv(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null},n}();const YKe=XKe;var QKe=function(){function n(e){e&&(this._$eventProcessor=e)}return n.prototype.on=function(e,t,i,r){this._$handlers||(this._$handlers={});var s=this._$handlers;if(typeof t=="function"&&(r=i,i=t,t=null),!i||!e)return this;var a=this._$eventProcessor;t!=null&&a&&a.normalizeQuery&&(t=a.normalizeQuery(t)),s[e]||(s[e]=[]);for(var o=0;o<s[e].length;o++)if(s[e][o].h===i)return this;var l={h:i,query:t,ctx:r||this,callAtLast:i.zrEventfulCallAtLast},u=s[e].length-1,c=s[e][u];return c&&c.callAtLast?s[e].splice(u,0,l):s[e].push(l),this},n.prototype.isSilent=function(e){var t=this._$handlers;return!t||!t[e]||!t[e].length},n.prototype.off=function(e,t){var i=this._$handlers;if(!i)return this;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var r=[],s=0,a=i[e].length;s<a;s++)i[e][s].h!==t&&r.push(i[e][s]);i[e]=r}i[e]&&i[e].length===0&&delete i[e]}else delete i[e];return this},n.prototype.trigger=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=r.length,l=0;l<o;l++){var u=r[l];if(!(s&&s.filter&&u.query!=null&&!s.filter(e,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,t[0]);break;case 2:u.h.call(u.ctx,t[0],t[1]);break;default:u.h.apply(u.ctx,t);break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n.prototype.triggerWithContext=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(!this._$handlers)return this;var r=this._$handlers[e],s=this._$eventProcessor;if(r)for(var a=t.length,o=t[a-1],l=r.length,u=0;u<l;u++){var c=r[u];if(!(s&&s.filter&&c.query!=null&&!s.filter(e,c.query)))switch(a){case 0:c.h.call(o);break;case 1:c.h.call(o,t[0]);break;case 2:c.h.call(o,t[0],t[1]);break;default:c.h.apply(o,t.slice(1,a-1));break}}return s&&s.afterTrigger&&s.afterTrigger(e),this},n}();const sf=QKe;var ZKe=Math.log(2);function K8(n,e,t,i,r,s){var a=i+"-"+r,o=n.length;if(s.hasOwnProperty(a))return s[a];if(e===1){var l=Math.round(Math.log((1<<o)-1&~r)/ZKe);return n[t][l]}for(var u=i|1<<t,c=t+1;i&1<<c;)c++;for(var d=0,f=0,h=0;f<o;f++){var p=1<<f;p&r||(d+=(h%2?-1:1)*n[t][f]*K8(n,e-1,c,u,r|p,s),h++)}return s[a]=d,d}function sq(n,e){var t=[[n[0],n[1],1,0,0,0,-e[0]*n[0],-e[0]*n[1]],[0,0,0,n[0],n[1],1,-e[1]*n[0],-e[1]*n[1]],[n[2],n[3],1,0,0,0,-e[2]*n[2],-e[2]*n[3]],[0,0,0,n[2],n[3],1,-e[3]*n[2],-e[3]*n[3]],[n[4],n[5],1,0,0,0,-e[4]*n[4],-e[4]*n[5]],[0,0,0,n[4],n[5],1,-e[5]*n[4],-e[5]*n[5]],[n[6],n[7],1,0,0,0,-e[6]*n[6],-e[6]*n[7]],[0,0,0,n[6],n[7],1,-e[7]*n[6],-e[7]*n[7]]],i={},r=K8(t,8,0,0,0,i);if(r!==0){for(var s=[],a=0;a<8;a++)for(var o=0;o<8;o++)s[o]==null&&(s[o]=0),s[o]+=((a+o)%2?-1:1)*K8(t,7,a===0?1:0,1<<a,1<<o,i)/r*e[a];return function(l,u,c){var d=u*s[6]+c*s[7]+1;l[0]=(u*s[0]+c*s[1]+s[2])/d,l[1]=(u*s[3]+c*s[4]+s[5])/d}}}var aq="___zrEVENTSAVED",ZP=[];function JKe(n,e,t,i,r){return X8(ZP,e,i,r,!0)&&X8(n,t,ZP[0],ZP[1])}function X8(n,e,t,i,r){if(e.getBoundingClientRect&&tr.domSupported&&!zle(e)){var s=e[aq]||(e[aq]={}),a=eXe(e,s),o=tXe(a,s,r);if(o)return o(n,t,i),!0}return!1}function eXe(n,e){var t=e.markers;if(t)return t;t=e.markers=[];for(var i=["left","right"],r=["top","bottom"],s=0;s<4;s++){var a=document.createElement("div"),o=a.style,l=s%2,u=(s>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[u]+":0",i[1-l]+":auto",r[1-u]+":auto",""].join("!important;"),n.appendChild(a),t.push(a)}return t}function tXe(n,e,t){for(var i=t?"invTrans":"trans",r=e[i],s=e.srcCoords,a=[],o=[],l=!0,u=0;u<4;u++){var c=n[u].getBoundingClientRect(),d=2*u,f=c.left,h=c.top;a.push(f,h),l=l&&s&&f===s[d]&&h===s[d+1],o.push(n[u].offsetLeft,n[u].offsetTop)}return l&&r?r:(e.srcCoords=a,e[i]=t?sq(o,a):sq(a,o))}function zle(n){return n.nodeName.toUpperCase()==="CANVAS"}var nXe=/([&<>"'])/g,iXe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Bu(n){return n==null?"":(n+"").replace(nXe,function(e,t){return iXe[t]})}var rXe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,JP=[],sXe=tr.browser.firefox&&+tr.browser.version.split(".")[0]<39;function Y8(n,e,t,i){return t=t||{},i?oq(n,e,t):sXe&&e.layerX!=null&&e.layerX!==e.offsetX?(t.zrX=e.layerX,t.zrY=e.layerY):e.offsetX!=null?(t.zrX=e.offsetX,t.zrY=e.offsetY):oq(n,e,t),t}function oq(n,e,t){if(tr.domSupported&&n.getBoundingClientRect){var i=e.clientX,r=e.clientY;if(zle(n)){var s=n.getBoundingClientRect();t.zrX=i-s.left,t.zrY=r-s.top;return}else if(X8(JP,n,i,r)){t.zrX=JP[0],t.zrY=JP[1];return}}t.zrX=t.zrY=0}function M9(n){return n||window.event}function Du(n,e,t){if(e=M9(e),e.zrX!=null)return e;var i=e.type,r=i&&i.indexOf("touch")>=0;if(r){var a=i!=="touchend"?e.targetTouches[0]:e.changedTouches[0];a&&Y8(n,a,e,t)}else{Y8(n,e,e,t);var s=aXe(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var o=e.button;return e.which==null&&o!==void 0&&rXe.test(e.type)&&(e.which=o&1?1:o&2?3:o&4?2:0),e}function aXe(n){var e=n.wheelDelta;if(e)return e;var t=n.deltaX,i=n.deltaY;if(t==null||i==null)return e;var r=Math.abs(i!==0?i:t),s=i>0?-1:i<0?1:t>0?-1:1;return 3*r*s}function oXe(n,e,t,i){n.addEventListener(e,t,i)}function lXe(n,e,t,i){n.removeEventListener(e,t,i)}var Hle=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0},uXe=function(){function n(){this._track=[]}return n.prototype.recognize=function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(e,t,i){var r=e.touches;if(r){for(var s={points:[],touches:[],target:t,event:e},a=0,o=r.length;a<o;a++){var l=r[a],u=Y8(i,l,{});s.points.push([u.zrX,u.zrY]),s.touches.push(l)}this._track.push(s)}},n.prototype._recognize=function(e){for(var t in e5)if(e5.hasOwnProperty(t)){var i=e5[t](this._track,e);if(i)return i}},n}();function lq(n){var e=n[1][0]-n[0][0],t=n[1][1]-n[0][1];return Math.sqrt(e*e+t*t)}function cXe(n){return[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]}var e5={pinch:function(n,e){var t=n.length;if(t){var i=(n[t-1]||{}).points,r=(n[t-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var s=lq(i)/lq(r);!isFinite(s)&&(s=1),e.pinchScale=s;var a=cXe(i);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:n[0].target,event:e}}}}};function Sw(){return[1,0,0,1,0,0]}function I9(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function dXe(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4],n[5]=e[5],n}function W1(n,e,t){var i=e[0]*t[0]+e[2]*t[1],r=e[1]*t[0]+e[3]*t[1],s=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],o=e[0]*t[4]+e[2]*t[5]+e[4],l=e[1]*t[4]+e[3]*t[5]+e[5];return n[0]=i,n[1]=r,n[2]=s,n[3]=a,n[4]=o,n[5]=l,n}function Q8(n,e,t){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n[4]=e[4]+t[0],n[5]=e[5]+t[1],n}function D9(n,e,t){var i=e[0],r=e[2],s=e[4],a=e[1],o=e[3],l=e[5],u=Math.sin(t),c=Math.cos(t);return n[0]=i*c+a*u,n[1]=-i*u+a*c,n[2]=r*c+o*u,n[3]=-r*u+c*o,n[4]=c*s+u*l,n[5]=c*l-u*s,n}function fXe(n,e,t){var i=t[0],r=t[1];return n[0]=e[0]*i,n[1]=e[1]*r,n[2]=e[2]*i,n[3]=e[3]*r,n[4]=e[4]*i,n[5]=e[5]*r,n}function Vle(n,e){var t=e[0],i=e[2],r=e[4],s=e[1],a=e[3],o=e[5],l=t*a-s*i;return l?(l=1/l,n[0]=a*l,n[1]=-s*l,n[2]=-i*l,n[3]=t*l,n[4]=(i*o-a*r)*l,n[5]=(s*r-t*o)*l,n):null}var hXe=function(){function n(e,t){this.x=e||0,this.y=t||0}return n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(e,t){return this.x=e,this.y=t,this},n.prototype.equal=function(e){return e.x===this.x&&e.y===this.y},n.prototype.add=function(e){return this.x+=e.x,this.y+=e.y,this},n.prototype.scale=function(e){this.x*=e,this.y*=e},n.prototype.scaleAndAdd=function(e,t){this.x+=e.x*t,this.y+=e.y*t},n.prototype.sub=function(e){return this.x-=e.x,this.y-=e.y,this},n.prototype.dot=function(e){return this.x*e.x+this.y*e.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var e=this.len();return this.x/=e,this.y/=e,this},n.prototype.distance=function(e){var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},n.prototype.distanceSquare=function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(e){if(e){var t=this.x,i=this.y;return this.x=e[0]*t+e[2]*i+e[4],this.y=e[1]*t+e[3]*i+e[5],this}},n.prototype.toArray=function(e){return e[0]=this.x,e[1]=this.y,e},n.prototype.fromArray=function(e){this.x=e[0],this.y=e[1]},n.set=function(e,t,i){e.x=t,e.y=i},n.copy=function(e,t){e.x=t.x,e.y=t.y},n.len=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},n.lenSquare=function(e){return e.x*e.x+e.y*e.y},n.dot=function(e,t){return e.x*t.x+e.y*t.y},n.add=function(e,t,i){e.x=t.x+i.x,e.y=t.y+i.y},n.sub=function(e,t,i){e.x=t.x-i.x,e.y=t.y-i.y},n.scale=function(e,t,i){e.x=t.x*i,e.y=t.y*i},n.scaleAndAdd=function(e,t,i,r){e.x=t.x+i.x*r,e.y=t.y+i.y*r},n.lerp=function(e,t,i,r){var s=1-r;e.x=s*t.x+r*i.x,e.y=s*t.y+r*i.y},n}();const Fi=hXe;var gA=Math.min,vA=Math.max,J0=new Fi,em=new Fi,tm=new Fi,nm=new Fi,FS=new Fi,US=new Fi,pXe=function(){function n(e,t,i,r){i<0&&(e=e+i,i=-i),r<0&&(t=t+r,r=-r),this.x=e,this.y=t,this.width=i,this.height=r}return n.prototype.union=function(e){var t=gA(e.x,this.x),i=gA(e.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=vA(e.x+e.width,this.x+this.width)-t:this.width=e.width,isFinite(this.y)&&isFinite(this.height)?this.height=vA(e.y+e.height,this.y+this.height)-i:this.height=e.height,this.x=t,this.y=i},n.prototype.applyTransform=function(e){n.applyTransform(this,this,e)},n.prototype.calculateTransform=function(e){var t=this,i=e.width/t.width,r=e.height/t.height,s=Sw();return Q8(s,s,[-t.x,-t.y]),fXe(s,s,[i,r]),Q8(s,s,[e.x,e.y]),s},n.prototype.intersect=function(e,t){if(!e)return!1;e instanceof n||(e=n.create(e));var i=this,r=i.x,s=i.x+i.width,a=i.y,o=i.y+i.height,l=e.x,u=e.x+e.width,c=e.y,d=e.y+e.height,f=!(s<l||u<r||o<c||d<a);if(t){var h=1/0,p=0,m=Math.abs(s-l),g=Math.abs(u-r),v=Math.abs(o-c),_=Math.abs(d-a),y=Math.min(m,g),b=Math.min(v,_);s<l||u<r?y>p&&(p=y,m<g?Fi.set(US,-m,0):Fi.set(US,g,0)):y<h&&(h=y,m<g?Fi.set(FS,m,0):Fi.set(FS,-g,0)),o<c||d<a?b>p&&(p=b,v<_?Fi.set(US,0,-v):Fi.set(US,0,_)):y<h&&(h=y,v<_?Fi.set(FS,0,v):Fi.set(FS,0,-_))}return t&&Fi.copy(t,f?FS:US),f},n.prototype.contain=function(e,t){var i=this;return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(e){n.copy(this,e)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return this.width===0||this.height===0},n.create=function(e){return new n(e.x,e.y,e.width,e.height)},n.copy=function(e,t){e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},n.applyTransform=function(e,t,i){if(!i){e!==t&&n.copy(e,t);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],s=i[3],a=i[4],o=i[5];e.x=t.x*r+a,e.y=t.y*s+o,e.width=t.width*r,e.height=t.height*s,e.width<0&&(e.x+=e.width,e.width=-e.width),e.height<0&&(e.y+=e.height,e.height=-e.height);return}J0.x=tm.x=t.x,J0.y=nm.y=t.y,em.x=nm.x=t.x+t.width,em.y=tm.y=t.y+t.height,J0.transform(i),nm.transform(i),em.transform(i),tm.transform(i),e.x=gA(J0.x,em.x,tm.x,nm.x),e.y=gA(J0.y,em.y,tm.y,nm.y);var l=vA(J0.x,em.x,tm.x,nm.x),u=vA(J0.y,em.y,tm.y,nm.y);e.width=l-e.x,e.height=u-e.y},n}();const Qr=pXe;var $le="silent";function mXe(n,e,t){return{type:n,event:t,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:t.zrX,offsetY:t.zrY,gestureEvent:t.gestureEvent,pinchX:t.pinchX,pinchY:t.pinchY,pinchScale:t.pinchScale,wheelDelta:t.zrDelta,zrByTouch:t.zrByTouch,which:t.which,stop:gXe}}function gXe(){Hle(this.event)}var vXe=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.handler=null,t}return e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(sf),zS=function(){function n(e,t){this.x=e,this.y=t}return n}(),yXe=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t5=new Qr(0,0,0,0),Gle=function(n){Mi(e,n);function e(t,i,r,s,a){var o=n.call(this)||this;return o._hovered=new zS(0,0),o.storage=t,o.painter=i,o.painterRoot=s,o._pointerSize=a,r=r||new vXe,o.proxy=null,o.setHandlerProxy(r),o._draggingMgr=new YKe(o),o}return e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(Nt(yXe,function(i){t.on&&t.on(i,this[i],this)},this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var i=t.zrX,r=t.zrY,s=Wle(this,i,r),a=this._hovered,o=a.target;o&&!o.__zr&&(a=this.findHover(a.x,a.y),o=a.target);var l=this._hovered=s?new zS(i,r):this.findHover(i,r),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),o&&u!==o&&this.dispatchToElement(a,"mouseout",t),this.dispatchToElement(l,"mousemove",t),u&&u!==o&&this.dispatchToElement(l,"mouseover",t)},e.prototype.mouseout=function(t){var i=t.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",t),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new zS(0,0)},e.prototype.dispatch=function(t,i){var r=this[t];r&&r.call(this,i)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var i=this.proxy;i.setCursor&&i.setCursor(t)},e.prototype.dispatchToElement=function(t,i,r){t=t||{};var s=t.target;if(!(s&&s.silent)){for(var a="on"+i,o=mXe(i,t,r);s&&(s[a]&&(o.cancelBubble=!!s[a].call(s,o)),s.trigger(i,o),s=s.__hostTarget?s.__hostTarget:s.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(i,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,o),l.trigger&&l.trigger(i,o)}))}},e.prototype.findHover=function(t,i,r){var s=this.storage.getDisplayList(),a=new zS(t,i);if(uq(s,a,t,i,r),this._pointerSize&&!a.target){for(var o=[],l=this._pointerSize,u=l/2,c=new Qr(t-u,i-u,l,l),d=s.length-1;d>=0;d--){var f=s[d];f!==r&&!f.ignore&&!f.ignoreCoarsePointer&&(!f.parent||!f.parent.ignoreCoarsePointer)&&(t5.copy(f.getBoundingRect()),f.transform&&t5.applyTransform(f.transform),t5.intersect(c)&&o.push(f))}if(o.length)for(var h=4,p=Math.PI/12,m=Math.PI*2,g=0;g<u;g+=h)for(var v=0;v<m;v+=p){var _=t+g*Math.cos(v),y=i+g*Math.sin(v);if(uq(o,a,_,y,r),a.target)return a}}return a},e.prototype.processGesture=function(t,i){this._gestureMgr||(this._gestureMgr=new uXe);var r=this._gestureMgr;i==="start"&&r.clear();var s=r.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if(i==="end"&&r.clear(),s){var a=s.type;t.gestureEvent=a;var o=new zS;o.target=s.target,this.dispatchToElement(o,a,s.event)}},e}(sf);Nt(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Gle.prototype[n]=function(e){var t=e.zrX,i=e.zrY,r=Wle(this,t,i),s,a;if((n!=="mouseup"||!r)&&(s=this.findHover(t,i),a=s.target),n==="mousedown")this._downEl=a,this._downPoint=[e.zrX,e.zrY],this._upEl=a;else if(n==="mouseup")this._upEl=a;else if(n==="click"){if(this._downEl!==this._upEl||!this._downPoint||j8(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(s,n,e)}});function _Xe(n,e,t){if(n[n.rectHover?"rectContain":"contain"](e,t)){for(var i=n,r=void 0,s=!1;i;){if(i.ignoreClip&&(s=!0),!s){var a=i.getClipPath();if(a&&!a.contain(e,t))return!1;i.silent&&(r=!0)}var o=i.__hostTarget;i=o||i.parent}return r?$le:!0}return!1}function uq(n,e,t,i,r){for(var s=n.length-1;s>=0;s--){var a=n[s],o=void 0;if(a!==r&&!a.ignore&&(o=_Xe(a,t,i))&&(!e.topTarget&&(e.topTarget=a),o!==$le)){e.target=a;break}}}function Wle(n,e,t){var i=n.painter;return e<0||e>i.getWidth()||t<0||t>i.getHeight()}const bXe=Gle;var qle=32,HS=7;function SXe(n){for(var e=0;n>=qle;)e|=n&1,n>>=1;return n+e}function cq(n,e,t,i){var r=e+1;if(r===t)return 1;if(i(n[r++],n[e])<0){for(;r<t&&i(n[r],n[r-1])<0;)r++;xXe(n,e,r)}else for(;r<t&&i(n[r],n[r-1])>=0;)r++;return r-e}function xXe(n,e,t){for(t--;e<t;){var i=n[e];n[e++]=n[t],n[t--]=i}}function dq(n,e,t,i,r){for(i===e&&i++;i<t;i++){for(var s=n[i],a=e,o=i,l;a<o;)l=a+o>>>1,r(s,n[l])<0?o=l:a=l+1;var u=i-a;switch(u){case 3:n[a+3]=n[a+2];case 2:n[a+2]=n[a+1];case 1:n[a+1]=n[a];break;default:for(;u>0;)n[a+u]=n[a+u-1],u--}n[a]=s}}function n5(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])>0){for(o=i-r;l<o&&s(n,e[t+r+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}else{for(o=r+1;l<o&&s(n,e[t+r-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}for(a++;a<l;){var c=a+(l-a>>>1);s(n,e[t+c])>0?a=c+1:l=c}return l}function i5(n,e,t,i,r,s){var a=0,o=0,l=1;if(s(n,e[t+r])<0){for(o=r+1;l<o&&s(n,e[t+r-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o);var u=a;a=r-l,l=r-u}else{for(o=i-r;l<o&&s(n,e[t+r+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=o);l>o&&(l=o),a+=r,l+=r}for(a++;a<l;){var c=a+(l-a>>>1);s(n,e[t+c])<0?l=c:a=c+1}return l}function wXe(n,e){var t=HS,i,r,s=0;n.length;var a=[];i=[],r=[];function o(h,p){i[s]=h,r[s]=p,s+=1}function l(){for(;s>1;){var h=s-2;if(h>=1&&r[h-1]<=r[h]+r[h+1]||h>=2&&r[h-2]<=r[h]+r[h-1])r[h-1]<r[h+1]&&h--;else if(r[h]>r[h+1])break;c(h)}}function u(){for(;s>1;){var h=s-2;h>0&&r[h-1]<r[h+1]&&h--,c(h)}}function c(h){var p=i[h],m=r[h],g=i[h+1],v=r[h+1];r[h]=m+v,h===s-3&&(i[h+1]=i[h+2],r[h+1]=r[h+2]),s--;var _=i5(n[g],n,p,m,0,e);p+=_,m-=_,m!==0&&(v=n5(n[p+m-1],n,g,v,v-1,e),v!==0&&(m<=v?d(p,m,g,v):f(p,m,g,v)))}function d(h,p,m,g){var v=0;for(v=0;v<p;v++)a[v]=n[h+v];var _=0,y=m,b=h;if(n[b++]=n[y++],--g===0){for(v=0;v<p;v++)n[b+v]=a[_+v];return}if(p===1){for(v=0;v<g;v++)n[b+v]=n[y+v];n[b+g]=a[_];return}for(var x=t,w,A,T;;){w=0,A=0,T=!1;do if(e(n[y],a[_])<0){if(n[b++]=n[y++],A++,w=0,--g===0){T=!0;break}}else if(n[b++]=a[_++],w++,A=0,--p===1){T=!0;break}while((w|A)<x);if(T)break;do{if(w=i5(n[y],a,_,p,0,e),w!==0){for(v=0;v<w;v++)n[b+v]=a[_+v];if(b+=w,_+=w,p-=w,p<=1){T=!0;break}}if(n[b++]=n[y++],--g===0){T=!0;break}if(A=n5(a[_],n,y,g,0,e),A!==0){for(v=0;v<A;v++)n[b+v]=n[y+v];if(b+=A,y+=A,g-=A,g===0){T=!0;break}}if(n[b++]=a[_++],--p===1){T=!0;break}x--}while(w>=HS||A>=HS);if(T)break;x<0&&(x=0),x+=2}if(t=x,t<1&&(t=1),p===1){for(v=0;v<g;v++)n[b+v]=n[y+v];n[b+g]=a[_]}else{if(p===0)throw new Error;for(v=0;v<p;v++)n[b+v]=a[_+v]}}function f(h,p,m,g){var v=0;for(v=0;v<g;v++)a[v]=n[m+v];var _=h+p-1,y=g-1,b=m+g-1,x=0,w=0;if(n[b--]=n[_--],--p===0){for(x=b-(g-1),v=0;v<g;v++)n[x+v]=a[v];return}if(g===1){for(b-=p,_-=p,w=b+1,x=_+1,v=p-1;v>=0;v--)n[w+v]=n[x+v];n[b]=a[y];return}for(var A=t;;){var T=0,C=0,E=!1;do if(e(a[y],n[_])<0){if(n[b--]=n[_--],T++,C=0,--p===0){E=!0;break}}else if(n[b--]=a[y--],C++,T=0,--g===1){E=!0;break}while((T|C)<A);if(E)break;do{if(T=p-i5(a[y],n,h,p,p-1,e),T!==0){for(b-=T,_-=T,p-=T,w=b+1,x=_+1,v=T-1;v>=0;v--)n[w+v]=n[x+v];if(p===0){E=!0;break}}if(n[b--]=a[y--],--g===1){E=!0;break}if(C=g-n5(n[_],a,0,g,g-1,e),C!==0){for(b-=C,y-=C,g-=C,w=b+1,x=y+1,v=0;v<C;v++)n[w+v]=a[x+v];if(g<=1){E=!0;break}}if(n[b--]=n[_--],--p===0){E=!0;break}A--}while(T>=HS||C>=HS);if(E)break;A<0&&(A=0),A+=2}if(t=A,t<1&&(t=1),g===1){for(b-=p,_-=p,w=b+1,x=_+1,v=p-1;v>=0;v--)n[w+v]=n[x+v];n[b]=a[y]}else{if(g===0)throw new Error;for(x=b-(g-1),v=0;v<g;v++)n[x+v]=a[v]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:o}}function OM(n,e,t,i){t||(t=0),i||(i=n.length);var r=i-t;if(!(r<2)){var s=0;if(r<qle){s=cq(n,t,i,e),dq(n,t,i,t+s,e);return}var a=wXe(n,e),o=SXe(r);do{if(s=cq(n,t,i,e),s<o){var l=r;l>o&&(l=o),dq(n,t,t+l,t+s,e),s=l}a.pushRun(t,s),a.mergeRuns(),r-=s,t+=s}while(r!==0);a.forceMergeRuns()}}var nu=1,Px=2,Zy=4,fq=!1;function r5(){fq||(fq=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function hq(n,e){return n.zlevel===e.zlevel?n.z===e.z?n.z2-e.z2:n.z-e.z:n.zlevel-e.zlevel}var TXe=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=hq}return n.prototype.traverse=function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},n.prototype.getDisplayList=function(e,t){t=t||!1;var i=this._displayList;return(e||!i.length)&&this.updateDisplayList(t),i},n.prototype.updateDisplayList=function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,r=0,s=t.length;r<s;r++)this._updateAndAddDisplayable(t[r],null,e);i.length=this._displayListLen,OM(i,hq)},n.prototype._updateAndAddDisplayable=function(e,t,i){if(!(e.ignore&&!i)){e.beforeUpdate(),e.update(),e.afterUpdate();var r=e.getClipPath();if(e.ignoreClip)t=null;else if(r){t?t=t.slice():t=[];for(var s=r,a=e;s;)s.parent=a,s.updateTransform(),t.push(s),a=s,s=s.getClipPath()}if(e.childrenRef){for(var o=e.childrenRef(),l=0;l<o.length;l++){var u=o[l];e.__dirty&&(u.__dirty|=nu),this._updateAndAddDisplayable(u,t,i)}e.__dirty=0}else{var c=e;t&&t.length?c.__clipPaths=t:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(r5(),c.z=0),isNaN(c.z2)&&(r5(),c.z2=0),isNaN(c.zlevel)&&(r5(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var d=e.getDecalElement&&e.getDecalElement();d&&this._updateAndAddDisplayable(d,t,i);var f=e.getTextGuideLine();f&&this._updateAndAddDisplayable(f,t,i);var h=e.getTextContent();h&&this._updateAndAddDisplayable(h,t,i)}},n.prototype.addRoot=function(e){e.__zr&&e.__zr.storage===this||this._roots.push(e)},n.prototype.delRoot=function(e){if(e instanceof Array){for(var t=0,i=e.length;t<i;t++)this.delRoot(e[t]);return}var r=ls(this._roots,e);r>=0&&this._roots.splice(r,1)},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}();const CXe=TXe;var jle;jle=tr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)};const Z8=jle;var NM={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return .5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return n===0?0:Math.pow(1024,n-1)},exponentialOut:function(n){return n===1?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return n===0?0:n===1?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(-Math.pow(2,-10*(n-1))+2)},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),-(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)))},elasticOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),t*Math.pow(2,-10*n)*Math.sin((n-e)*(2*Math.PI)/i)+1)},elasticInOut:function(n){var e,t=.1,i=.4;return n===0?0:n===1?1:(!t||t<1?(t=1,e=i/4):e=i*Math.asin(1/t)/(2*Math.PI),(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-e)*(2*Math.PI)/i)*.5+1)},backIn:function(n){var e=1.70158;return n*n*((e+1)*n-e)},backOut:function(n){var e=1.70158;return--n*n*((e+1)*n+e)+1},backInOut:function(n){var e=2.5949095;return(n*=2)<1?.5*(n*n*((e+1)*n-e)):.5*((n-=2)*n*((e+1)*n+e)+2)},bounceIn:function(n){return 1-NM.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?NM.bounceIn(n*2)*.5:NM.bounceOut(n*2-1)*.5+.5}};const Kle=NM;var yA=Math.pow,zp=Math.sqrt,b4=1e-8,Xle=1e-4,pq=zp(3),_A=1/3,wd=Eb(),Fu=Eb(),q1=Eb();function Dp(n){return n>-b4&&n<b4}function Yle(n){return n>b4||n<-b4}function qa(n,e,t,i,r){var s=1-r;return s*s*(s*n+3*r*e)+r*r*(r*i+3*s*t)}function mq(n,e,t,i,r){var s=1-r;return 3*(((e-n)*s+2*(t-e)*r)*s+(i-t)*r*r)}function Qle(n,e,t,i,r,s){var a=i+3*(e-t)-n,o=3*(t-e*2+n),l=3*(e-n),u=n-r,c=o*o-3*a*l,d=o*l-9*a*u,f=l*l-3*o*u,h=0;if(Dp(c)&&Dp(d))if(Dp(o))s[0]=0;else{var p=-l/o;p>=0&&p<=1&&(s[h++]=p)}else{var m=d*d-4*c*f;if(Dp(m)){var g=d/c,p=-o/a+g,v=-g/2;p>=0&&p<=1&&(s[h++]=p),v>=0&&v<=1&&(s[h++]=v)}else if(m>0){var _=zp(m),y=c*o+1.5*a*(-d+_),b=c*o+1.5*a*(-d-_);y<0?y=-yA(-y,_A):y=yA(y,_A),b<0?b=-yA(-b,_A):b=yA(b,_A);var p=(-o-(y+b))/(3*a);p>=0&&p<=1&&(s[h++]=p)}else{var x=(2*c*o-3*a*d)/(2*zp(c*c*c)),w=Math.acos(x)/3,A=zp(c),T=Math.cos(w),p=(-o-2*A*T)/(3*a),v=(-o+A*(T+pq*Math.sin(w)))/(3*a),C=(-o+A*(T-pq*Math.sin(w)))/(3*a);p>=0&&p<=1&&(s[h++]=p),v>=0&&v<=1&&(s[h++]=v),C>=0&&C<=1&&(s[h++]=C)}}return h}function Zle(n,e,t,i,r){var s=6*t-12*e+6*n,a=9*e+3*i-3*n-9*t,o=3*e-3*n,l=0;if(Dp(a)){if(Yle(s)){var u=-o/s;u>=0&&u<=1&&(r[l++]=u)}}else{var c=s*s-4*a*o;if(Dp(c))r[0]=-s/(2*a);else if(c>0){var d=zp(c),u=(-s+d)/(2*a),f=(-s-d)/(2*a);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function S4(n,e,t,i,r,s){var a=(e-n)*r+n,o=(t-e)*r+e,l=(i-t)*r+t,u=(o-a)*r+a,c=(l-o)*r+o,d=(c-u)*r+u;s[0]=n,s[1]=a,s[2]=u,s[3]=d,s[4]=d,s[5]=c,s[6]=l,s[7]=i}function AXe(n,e,t,i,r,s,a,o,l,u,c){var d,f=.005,h=1/0,p,m,g,v;wd[0]=l,wd[1]=u;for(var _=0;_<1;_+=.05)Fu[0]=qa(n,t,r,a,_),Fu[1]=qa(e,i,s,o,_),g=G1(wd,Fu),g<h&&(d=_,h=g);h=1/0;for(var y=0;y<32&&!(f<Xle);y++)p=d-f,m=d+f,Fu[0]=qa(n,t,r,a,p),Fu[1]=qa(e,i,s,o,p),g=G1(Fu,wd),p>=0&&g<h?(d=p,h=g):(q1[0]=qa(n,t,r,a,m),q1[1]=qa(e,i,s,o,m),v=G1(q1,wd),m<=1&&v<h?(d=m,h=v):f*=.5);return c&&(c[0]=qa(n,t,r,a,d),c[1]=qa(e,i,s,o,d)),zp(h)}function EXe(n,e,t,i,r,s,a,o,l){for(var u=n,c=e,d=0,f=1/l,h=1;h<=l;h++){var p=h*f,m=qa(n,t,r,a,p),g=qa(e,i,s,o,p),v=m-u,_=g-c;d+=Math.sqrt(v*v+_*_),u=m,c=g}return d}function mo(n,e,t,i){var r=1-i;return r*(r*n+2*i*e)+i*i*t}function gq(n,e,t,i){return 2*((1-i)*(e-n)+i*(t-e))}function MXe(n,e,t,i,r){var s=n-2*e+t,a=2*(e-n),o=n-i,l=0;if(Dp(s)){if(Yle(a)){var u=-o/a;u>=0&&u<=1&&(r[l++]=u)}}else{var c=a*a-4*s*o;if(Dp(c)){var u=-a/(2*s);u>=0&&u<=1&&(r[l++]=u)}else if(c>0){var d=zp(c),u=(-a+d)/(2*s),f=(-a-d)/(2*s);u>=0&&u<=1&&(r[l++]=u),f>=0&&f<=1&&(r[l++]=f)}}return l}function Jle(n,e,t){var i=n+t-2*e;return i===0?.5:(n-e)/i}function x4(n,e,t,i,r){var s=(e-n)*i+n,a=(t-e)*i+e,o=(a-s)*i+s;r[0]=n,r[1]=s,r[2]=o,r[3]=o,r[4]=a,r[5]=t}function IXe(n,e,t,i,r,s,a,o,l){var u,c=.005,d=1/0;wd[0]=a,wd[1]=o;for(var f=0;f<1;f+=.05){Fu[0]=mo(n,t,r,f),Fu[1]=mo(e,i,s,f);var h=G1(wd,Fu);h<d&&(u=f,d=h)}d=1/0;for(var p=0;p<32&&!(c<Xle);p++){var m=u-c,g=u+c;Fu[0]=mo(n,t,r,m),Fu[1]=mo(e,i,s,m);var h=G1(Fu,wd);if(m>=0&&h<d)u=m,d=h;else{q1[0]=mo(n,t,r,g),q1[1]=mo(e,i,s,g);var v=G1(q1,wd);g<=1&&v<d?(u=g,d=v):c*=.5}}return l&&(l[0]=mo(n,t,r,u),l[1]=mo(e,i,s,u)),zp(d)}function DXe(n,e,t,i,r,s,a){for(var o=n,l=e,u=0,c=1/a,d=1;d<=a;d++){var f=d*c,h=mo(n,t,r,f),p=mo(e,i,s,f),m=h-o,g=p-l;u+=Math.sqrt(m*m+g*g),o=h,l=p}return u}var RXe=/cubic-bezier\(([0-9,\.e ]+)\)/;function eue(n){var e=n&&RXe.exec(n);if(e){var t=e[1].split(","),i=+Rd(t[0]),r=+Rd(t[1]),s=+Rd(t[2]),a=+Rd(t[3]);if(isNaN(i+r+s+a))return;var o=[];return function(l){return l<=0?0:l>=1?1:Qle(0,i,s,1,l,o)&&qa(0,r,a,1,o[0])}}}var PXe=function(){function n(e){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=e.life||1e3,this._delay=e.delay||0,this.loop=e.loop||!1,this.onframe=e.onframe||Al,this.ondestroy=e.ondestroy||Al,this.onrestart=e.onrestart||Al,e.easing&&this.setEasing(e.easing)}return n.prototype.step=function(e,t){if(this._inited||(this._startTime=e+this._delay,this._inited=!0),this._paused){this._pausedTime+=t;return}var i=this._life,r=e-this._startTime-this._pausedTime,s=r/i;s<0&&(s=0),s=Math.min(s,1);var a=this.easingFunc,o=a?a(s):s;if(this.onframe(o),s===1)if(this.loop){var l=r%i;this._startTime=e-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(e){this.easing=e,this.easingFunc=$r(e)?e:Kle[e]||eue(e)},n}();const kXe=PXe;var tue=function(){function n(e){this.value=e}return n}(),LXe=function(){function n(){this._len=0}return n.prototype.insert=function(e){var t=new tue(e);return this.insertEntry(t),t},n.prototype.insertEntry=function(e){this.head?(this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},n.prototype.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),OXe=function(){function n(e){this._list=new LXe,this._maxSize=10,this._map={},this._maxSize=e}return n.prototype.put=function(e,t){var i=this._list,r=this._map,s=null;if(r[e]==null){var a=i.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=i.head;i.remove(l),delete r[l.key],s=l.value,this._lastRemovedEntry=l}o?o.value=t:o=new tue(t),o.key=e,i.insertEntry(o),r[e]=o}return s},n.prototype.get=function(e){var t=this._map[e],i=this._list;if(t!=null)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}();const LT=OXe;var vq={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function l2(n){return n=Math.round(n),n<0?0:n>255?255:n}function yq(n){return n<0?0:n>1?1:n}function s5(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?l2(parseFloat(e)/100*255):l2(parseInt(e,10))}function u2(n){var e=n;return e.length&&e.charAt(e.length-1)==="%"?yq(parseFloat(e)/100):yq(parseFloat(e))}function a5(n,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?n+(e-n)*t*6:t*2<1?e:t*3<2?n+(e-n)*(2/3-t)*6:n}function Mu(n,e,t,i,r){return n[0]=e,n[1]=t,n[2]=i,n[3]=r,n}function J8(n,e){return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3],n}var nue=new LT(20),bA=null;function Xv(n,e){bA&&J8(bA,e),bA=nue.put(n,bA||e.slice())}function Cg(n,e){if(n){e=e||[];var t=nue.get(n);if(t)return J8(e,t);n=n+"";var i=n.replace(/ /g,"").toLowerCase();if(i in vq)return J8(e,vq[i]),Xv(n,e),e;var r=i.length;if(i.charAt(0)==="#"){if(r===4||r===5){var s=parseInt(i.slice(1,4),16);if(!(s>=0&&s<=4095)){Mu(e,0,0,0,1);return}return Mu(e,(s&3840)>>4|(s&3840)>>8,s&240|(s&240)>>4,s&15|(s&15)<<4,r===5?parseInt(i.slice(4),16)/15:1),Xv(n,e),e}else if(r===7||r===9){var s=parseInt(i.slice(1,7),16);if(!(s>=0&&s<=16777215)){Mu(e,0,0,0,1);return}return Mu(e,(s&16711680)>>16,(s&65280)>>8,s&255,r===9?parseInt(i.slice(7),16)/255:1),Xv(n,e),e}return}var a=i.indexOf("("),o=i.indexOf(")");if(a!==-1&&o+1===r){var l=i.substr(0,a),u=i.substr(a+1,o-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Mu(e,+u[0],+u[1],+u[2],1):Mu(e,0,0,0,1);c=u2(u.pop());case"rgb":if(u.length>=3)return Mu(e,s5(u[0]),s5(u[1]),s5(u[2]),u.length===3?c:u2(u[3])),Xv(n,e),e;Mu(e,0,0,0,1);return;case"hsla":if(u.length!==4){Mu(e,0,0,0,1);return}return u[3]=u2(u[3]),_q(u,e),Xv(n,e),e;case"hsl":if(u.length!==3){Mu(e,0,0,0,1);return}return _q(u,e),Xv(n,e),e;default:return}}Mu(e,0,0,0,1)}}function _q(n,e){var t=(parseFloat(n[0])%360+360)%360/360,i=u2(n[1]),r=u2(n[2]),s=r<=.5?r*(i+1):r+i-r*i,a=r*2-s;return e=e||[],Mu(e,l2(a5(a,s,t+1/3)*255),l2(a5(a,s,t)*255),l2(a5(a,s,t-1/3)*255),1),n.length===4&&(e[3]=n[3]),e}function bq(n,e){var t=Cg(n);if(t){for(var i=0;i<3;i++)e<0?t[i]=t[i]*(1-e)|0:t[i]=(255-t[i])*e+t[i]|0,t[i]>255?t[i]=255:t[i]<0&&(t[i]=0);return R9(t,t.length===4?"rgba":"rgb")}}function R9(n,e){if(!(!n||!n.length)){var t=n[0]+","+n[1]+","+n[2];return(e==="rgba"||e==="hsva"||e==="hsla")&&(t+=","+n[3]),e+"("+t+")"}}function w4(n,e){var t=Cg(n);return t?(.299*t[0]+.587*t[1]+.114*t[2])*t[3]/255+(1-t[3])*e:0}function NXe(n){return n.type==="linear"}function BXe(n){return n.type==="radial"}(function(){return tr.hasGlobalWindow&&$r(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:typeof Buffer<"u"?function(n){return Buffer.from(n).toString("base64")}:function(n){return null}})();var eO=Array.prototype.slice;function kf(n,e,t){return(e-n)*t+n}function o5(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=kf(e[s],t[s],i);return n}function FXe(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=kf(e[a][o],t[a][o],i)}return n}function SA(n,e,t,i){for(var r=e.length,s=0;s<r;s++)n[s]=e[s]+t[s]*i;return n}function Sq(n,e,t,i){for(var r=e.length,s=r&&e[0].length,a=0;a<r;a++){n[a]||(n[a]=[]);for(var o=0;o<s;o++)n[a][o]=e[a][o]+t[a][o]*i}return n}function UXe(n,e){for(var t=n.length,i=e.length,r=t>i?e:n,s=Math.min(t,i),a=r[s-1]||{color:[0,0,0,0],offset:0},o=s;o<Math.max(t,i);o++)r.push({offset:a.offset,color:a.color.slice()})}function zXe(n,e,t){var i=n,r=e;if(!(!i.push||!r.push)){var s=i.length,a=r.length;if(s!==a){var o=s>a;if(o)i.length=a;else for(var l=s;l<a;l++)i.push(t===1?r[l]:eO.call(r[l]))}for(var u=i[0]&&i[0].length,l=0;l<i.length;l++)if(t===1)isNaN(i[l])&&(i[l]=r[l]);else for(var c=0;c<u;c++)isNaN(i[l][c])&&(i[l][c]=r[l][c])}}function BM(n){if(kl(n)){var e=n.length;if(kl(n[0])){for(var t=[],i=0;i<e;i++)t.push(eO.call(n[i]));return t}return eO.call(n)}return n}function FM(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=n[3]==null?1:n[3],"rgba("+n.join(",")+")"}function HXe(n){return kl(n&&n[0])?2:1}var xA=0,UM=1,iue=2,kx=3,tO=4,nO=5,xq=6;function wq(n){return n===tO||n===nO}function wA(n){return n===UM||n===iue}var VS=[0,0,0,0],VXe=function(){function n(e){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=e}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(e,t,i){this._needsSort=!0;var r=this.keyframes,s=r.length,a=!1,o=xq,l=t;if(kl(t)){var u=HXe(t);o=u,(u===1&&!Ws(t[0])||u===2&&!Ws(t[0][0]))&&(a=!0)}else if(Ws(t)&&!BKe(t))o=xA;else if(ki(t))if(!isNaN(+t))o=xA;else{var c=Cg(t);c&&(l=c,o=kx)}else if(FD(t)){var d=Rn({},l);d.colorStops=Sr(t.colorStops,function(h){return{offset:h.offset,color:Cg(h.color)}}),NXe(t)?o=tO:BXe(t)&&(o=nO),l=d}s===0?this.valType=o:(o!==this.valType||o===xq)&&(a=!0),this.discrete=this.discrete||a;var f={time:e,value:l,rawValue:t,percent:0};return i&&(f.easing=i,f.easingFunc=$r(i)?i:Kle[i]||eue(i)),r.push(f),f},n.prototype.prepare=function(e,t){var i=this.keyframes;this._needsSort&&i.sort(function(m,g){return m.time-g.time});for(var r=this.valType,s=i.length,a=i[s-1],o=this.discrete,l=wA(r),u=wq(r),c=0;c<s;c++){var d=i[c],f=d.value,h=a.value;d.percent=d.time/e,o||(l&&c!==s-1?zXe(f,h,r):u&&UXe(f.colorStops,h.colorStops))}if(!o&&r!==nO&&t&&this.needsAnimate()&&t.needsAnimate()&&r===t.valType&&!t._finished){this._additiveTrack=t;for(var p=i[0].value,c=0;c<s;c++)r===xA?i[c].additiveValue=i[c].value-p:r===kx?i[c].additiveValue=SA([],i[c].value,p,-1):wA(r)&&(i[c].additiveValue=r===UM?SA([],i[c].value,p,-1):Sq([],i[c].value,p,-1))}},n.prototype.step=function(e,t){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,r=i?"additiveValue":"value",s=this.valType,a=this.keyframes,o=a.length,l=this.propName,u=s===kx,c,d=this._lastFr,f=Math.min,h,p;if(o===1)h=p=a[0];else{if(t<0)c=0;else if(t<this._lastFrP){var m=f(d+1,o-1);for(c=m;c>=0&&!(a[c].percent<=t);c--);c=f(c,o-2)}else{for(c=d;c<o&&!(a[c].percent>t);c++);c=f(c-1,o-2)}p=a[c+1],h=a[c]}if(h&&p){this._lastFr=c,this._lastFrP=t;var g=p.percent-h.percent,v=g===0?1:f((t-h.percent)/g,1);p.easingFunc&&(v=p.easingFunc(v));var _=i?this._additiveValue:u?VS:e[l];if((wA(s)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)e[l]=v<1?h.rawValue:p.rawValue;else if(wA(s))s===UM?o5(_,h[r],p[r],v):FXe(_,h[r],p[r],v);else if(wq(s)){var y=h[r],b=p[r],x=s===tO;e[l]={type:x?"linear":"radial",x:kf(y.x,b.x,v),y:kf(y.y,b.y,v),colorStops:Sr(y.colorStops,function(A,T){var C=b.colorStops[T];return{offset:kf(A.offset,C.offset,v),color:FM(o5([],A.color,C.color,v))}}),global:b.global},x?(e[l].x2=kf(y.x2,b.x2,v),e[l].y2=kf(y.y2,b.y2,v)):e[l].r=kf(y.r,b.r,v)}else if(u)o5(_,h[r],p[r],v),i||(e[l]=FM(_));else{var w=kf(h[r],p[r],v);i?this._additiveValue=w:e[l]=w}i&&this._addToTarget(e)}}},n.prototype._addToTarget=function(e){var t=this.valType,i=this.propName,r=this._additiveValue;t===xA?e[i]=e[i]+r:t===kx?(Cg(e[i],VS),SA(VS,VS,r,1),e[i]=FM(VS)):t===UM?SA(e[i],e[i],r,1):t===iue&&Sq(e[i],e[i],r,1)},n}(),$Xe=function(){function n(e,t,i,r){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=e,this._loop=t,t&&r){A9("Can' use additive animation on looped animation.");return}this._additiveAnimators=r,this._allowDiscrete=i}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(e){this._target=e},n.prototype.when=function(e,t,i){return this.whenWithKeys(e,t,Gs(t),i)},n.prototype.whenWithKeys=function(e,t,i,r){for(var s=this._tracks,a=0;a<i.length;a++){var o=i[a],l=s[o];if(!l){l=s[o]=new VXe(o);var u=void 0,c=this._getAdditiveTrack(o);if(c){var d=c.keyframes,f=d[d.length-1];u=f&&f.value,c.valType===kx&&u&&(u=FM(u))}else u=this._target[o];if(u==null)continue;e>0&&l.addKeyframe(0,BM(u),r),this._trackKeys.push(o)}l.addKeyframe(e,BM(t[o]),r)}return this._maxTime=Math.max(this._maxTime,e),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(e){return this._maxTime=e,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var e=this._doneCbs;if(e)for(var t=e.length,i=0;i<t;i++)e[i].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var e=this.animation,t=this._abortedCbs;if(e&&e.removeClip(this._clip),this._clip=null,t)for(var i=0;i<t.length;i++)t[i].call(this)},n.prototype._setTracksFinished=function(){for(var e=this._tracks,t=this._trackKeys,i=0;i<t.length;i++)e[t[i]].setFinished()},n.prototype._getAdditiveTrack=function(e){var t,i=this._additiveAnimators;if(i)for(var r=0;r<i.length;r++){var s=i[r].getTrack(e);s&&(t=s)}return t},n.prototype.start=function(e){if(!(this._started>0)){this._started=1;for(var t=this,i=[],r=this._maxTime||0,s=0;s<this._trackKeys.length;s++){var a=this._trackKeys[s],o=this._tracks[a],l=this._getAdditiveTrack(a),u=o.keyframes,c=u.length;if(o.prepare(r,l),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var d=u[c-1];d&&(t._target[o.propName]=d.rawValue),o.setFinished()}else i.push(o)}if(i.length||this._force){var f=new kXe({life:r,loop:this._loop,delay:this._delay||0,onframe:function(h){t._started=2;var p=t._additiveAnimators;if(p){for(var m=!1,g=0;g<p.length;g++)if(p[g]._clip){m=!0;break}m||(t._additiveAnimators=null)}for(var g=0;g<i.length;g++)i[g].step(t._target,h);var v=t._onframeCbs;if(v)for(var g=0;g<v.length;g++)v[g](t._target,h)},ondestroy:function(){t._doneCallback()}});this._clip=f,this.animation&&this.animation.addClip(f),e&&f.setEasing(e)}else this._doneCallback();return this}},n.prototype.stop=function(e){if(this._clip){var t=this._clip;e&&t.onframe(1),this._abortedCallback()}},n.prototype.delay=function(e){return this._delay=e,this},n.prototype.during=function(e){return e&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(e)),this},n.prototype.done=function(e){return e&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(e)),this},n.prototype.aborted=function(e){return e&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(e)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(e){return this._tracks[e]},n.prototype.getTracks=function(){var e=this;return Sr(this._trackKeys,function(t){return e._tracks[t]})},n.prototype.stopTracks=function(e,t){if(!e.length||!this._clip)return!0;for(var i=this._tracks,r=this._trackKeys,s=0;s<e.length;s++){var a=i[e[s]];a&&!a.isFinished()&&(t?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var o=!0,s=0;s<r.length;s++)if(!i[r[s]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},n.prototype.saveTo=function(e,t,i){if(e){t=t||this._trackKeys;for(var r=0;r<t.length;r++){var s=t[r],a=this._tracks[s];if(!(!a||a.isFinished())){var o=a.keyframes,l=o[i?0:o.length-1];l&&(e[s]=BM(l.rawValue))}}}},n.prototype.__changeFinalValue=function(e,t){t=t||Gs(e);for(var i=0;i<t.length;i++){var r=t[i],s=this._tracks[r];if(s){var a=s.keyframes;if(a.length>1){var o=a.pop();s.addKeyframe(o.time,e[r]),s.prepare(this._maxTime,s.getAdditiveTrack())}}}},n}();const P9=$Xe;function g1(){return new Date().getTime()}var GXe=function(n){Mi(e,n);function e(t){var i=n.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,t=t||{},i.stage=t.stage||{},i}return e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var i=t.getClip();i&&this.addClip(i)},e.prototype.removeClip=function(t){if(t.animation){var i=t.prev,r=t.next;i?i.next=r:this._head=r,r?r.prev=i:this._tail=i,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var i=t.getClip();i&&this.removeClip(i),t.animation=null},e.prototype.update=function(t){for(var i=g1()-this._pausedTime,r=i-this._time,s=this._head;s;){var a=s.next,o=s.step(i,r);o&&(s.ondestroy(),this.removeClip(s)),s=a}this._time=i,t||(this.trigger("frame",r),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0;function i(){t._running&&(Z8(i),!t._paused&&t.update())}Z8(i)},e.prototype.start=function(){this._running||(this._time=g1(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=g1(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=g1()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var i=t.next;t.prev=t.next=t.animation=null,t=i}this._head=this._tail=null},e.prototype.isFinished=function(){return this._head==null},e.prototype.animate=function(t,i){i=i||{},this.start();var r=new P9(t,i.loop);return this.addAnimator(r),r},e}(sf);const WXe=GXe;var qXe=300,l5=tr.domSupported,u5=function(){var n=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],t={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=Sr(n,function(r){var s=r.replace("mouse","pointer");return t.hasOwnProperty(s)?s:r});return{mouse:n,touch:e,pointer:i}}(),Tq={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},Cq=!1;function iO(n){var e=n.pointerType;return e==="pen"||e==="touch"}function jXe(n){n.touching=!0,n.touchTimer!=null&&(clearTimeout(n.touchTimer),n.touchTimer=null),n.touchTimer=setTimeout(function(){n.touching=!1,n.touchTimer=null},700)}function c5(n){n&&(n.zrByTouch=!0)}function KXe(n,e){return Du(n.dom,new XXe(n,e),!0)}function rue(n,e){for(var t=e,i=!1;t&&t.nodeType!==9&&!(i=t.domBelongToZr||t!==e&&t===n.painterRoot);)t=t.parentNode;return i}var XXe=function(){function n(e,t){this.stopPropagation=Al,this.stopImmediatePropagation=Al,this.preventDefault=Al,this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}return n}(),Ic={mousedown:function(n){n=Du(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=Du(this.dom,n);var e=this.__mayPointerCapture;e&&(n.zrX!==e[0]||n.zrY!==e[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=Du(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){n=Du(this.dom,n);var e=n.toElement||n.relatedTarget;rue(this,e)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){Cq=!0,n=Du(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){Cq||(n=Du(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){n=Du(this.dom,n),c5(n),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),Ic.mousemove.call(this,n),Ic.mousedown.call(this,n)},touchmove:function(n){n=Du(this.dom,n),c5(n),this.handler.processGesture(n,"change"),Ic.mousemove.call(this,n)},touchend:function(n){n=Du(this.dom,n),c5(n),this.handler.processGesture(n,"end"),Ic.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<qXe&&Ic.click.call(this,n)},pointerdown:function(n){Ic.mousedown.call(this,n)},pointermove:function(n){iO(n)||Ic.mousemove.call(this,n)},pointerup:function(n){Ic.mouseup.call(this,n)},pointerout:function(n){iO(n)||Ic.mouseout.call(this,n)}};Nt(["click","dblclick","contextmenu"],function(n){Ic[n]=function(e){e=Du(this.dom,e),this.trigger(n,e)}});var rO={pointermove:function(n){iO(n)||rO.mousemove.call(this,n)},pointerup:function(n){rO.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),e&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function YXe(n,e){var t=e.domHandlers;tr.pointerEventsSupported?Nt(u5.pointer,function(i){zM(e,i,function(r){t[i].call(n,r)})}):(tr.touchEventsSupported&&Nt(u5.touch,function(i){zM(e,i,function(r){t[i].call(n,r),jXe(e)})}),Nt(u5.mouse,function(i){zM(e,i,function(r){r=M9(r),e.touching||t[i].call(n,r)})}))}function QXe(n,e){tr.pointerEventsSupported?Nt(Tq.pointer,t):tr.touchEventsSupported||Nt(Tq.mouse,t);function t(i){function r(s){s=M9(s),rue(n,s.target)||(s=KXe(n,s),e.domHandlers[i].call(n,s))}zM(e,i,r,{capture:!0})}}function zM(n,e,t,i){n.mounted[e]=t,n.listenerOpts[e]=i,oXe(n.domTarget,e,t,i)}function d5(n){var e=n.mounted;for(var t in e)e.hasOwnProperty(t)&&lXe(n.domTarget,t,e[t],n.listenerOpts[t]);n.mounted={}}var Aq=function(){function n(e,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=e,this.domHandlers=t}return n}(),ZXe=function(n){Mi(e,n);function e(t,i){var r=n.call(this)||this;return r.__pointerCapturing=!1,r.dom=t,r.painterRoot=i,r._localHandlerScope=new Aq(t,Ic),l5&&(r._globalHandlerScope=new Aq(document,rO)),YXe(r,r._localHandlerScope),r}return e.prototype.dispose=function(){d5(this._localHandlerScope),l5&&d5(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,l5&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var i=this._globalHandlerScope;t?QXe(this,i):d5(i)}},e}(sf);const JXe=ZXe;var sue=1;tr.hasGlobalWindow&&(sue=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var T4=sue,sO=.4,aO="#333",oO="#ccc",eYe="#eee",Eq=I9,Mq=5e-5;function im(n){return n>Mq||n<-Mq}var rm=[],Yv=[],f5=Sw(),h5=Math.abs,tYe=function(){function n(){}return n.prototype.getLocalTransform=function(e){return n.getLocalTransform(this,e)},n.prototype.setPosition=function(e){this.x=e[0],this.y=e[1]},n.prototype.setScale=function(e){this.scaleX=e[0],this.scaleY=e[1]},n.prototype.setSkew=function(e){this.skewX=e[0],this.skewY=e[1]},n.prototype.setOrigin=function(e){this.originX=e[0],this.originY=e[1]},n.prototype.needLocalTransform=function(){return im(this.rotation)||im(this.x)||im(this.y)||im(this.scaleX-1)||im(this.scaleY-1)||im(this.skewX)||im(this.skewY)},n.prototype.updateTransform=function(){var e=this.parent&&this.parent.transform,t=this.needLocalTransform(),i=this.transform;if(!(t||e)){i&&(Eq(i),this.invTransform=null);return}i=i||Sw(),t?this.getLocalTransform(i):Eq(i),e&&(t?W1(i,e,i):dXe(i,e)),this.transform=i,this._resolveGlobalScaleRatio(i)},n.prototype._resolveGlobalScaleRatio=function(e){var t=this.globalScaleRatio;if(t!=null&&t!==1){this.getGlobalScale(rm);var i=rm[0]<0?-1:1,r=rm[1]<0?-1:1,s=((rm[0]-i)*t+i)/rm[0]||0,a=((rm[1]-r)*t+r)/rm[1]||0;e[0]*=s,e[1]*=s,e[2]*=a,e[3]*=a}this.invTransform=this.invTransform||Sw(),Vle(this.invTransform,e)},n.prototype.getComputedTransform=function(){for(var e=this,t=[];e;)t.push(e),e=e.parent;for(;e=t.pop();)e.updateTransform();return this.transform},n.prototype.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],i=e[2]*e[2]+e[3]*e[3],r=Math.atan2(e[1],e[0]),s=Math.PI/2+r-Math.atan2(e[3],e[2]);i=Math.sqrt(i)*Math.cos(s),t=Math.sqrt(t),this.skewX=s,this.skewY=0,this.rotation=-r,this.x=+e[4],this.y=+e[5],this.scaleX=t,this.scaleY=i,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(W1(Yv,e.invTransform,t),t=Yv);var i=this.originX,r=this.originY;(i||r)&&(f5[4]=i,f5[5]=r,W1(Yv,t,f5),Yv[4]-=i,Yv[5]-=r,t=Yv),this.setLocalTransform(t)}},n.prototype.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1]),e):(e[0]=1,e[1]=1,e)},n.prototype.transformCoordToLocal=function(e,t){var i=[e,t],r=this.invTransform;return r&&zd(i,i,r),i},n.prototype.transformCoordToGlobal=function(e,t){var i=[e,t],r=this.transform;return r&&zd(i,i,r),i},n.prototype.getLineScale=function(){var e=this.transform;return e&&h5(e[0]-1)>1e-10&&h5(e[3]-1)>1e-10?Math.sqrt(h5(e[0]*e[3]-e[2]*e[1])):1},n.prototype.copyTransform=function(e){nYe(this,e)},n.getLocalTransform=function(e,t){t=t||[];var i=e.originX||0,r=e.originY||0,s=e.scaleX,a=e.scaleY,o=e.anchorX,l=e.anchorY,u=e.rotation||0,c=e.x,d=e.y,f=e.skewX?Math.tan(e.skewX):0,h=e.skewY?Math.tan(-e.skewY):0;if(i||r||o||l){var p=i+o,m=r+l;t[4]=-p*s-f*m*a,t[5]=-m*a-h*p*s}else t[4]=t[5]=0;return t[0]=s,t[3]=a,t[1]=h*s,t[2]=f*a,u&&D9(t,t,u),t[4]+=i+c,t[5]+=r+d,t},n.initDefaultProps=function(){var e=n.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),n}(),xw=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function nYe(n,e){for(var t=0;t<xw.length;t++){var i=xw[t];n[i]=e[i]}}const k9=tYe;var Iq={};function lu(n,e){e=e||$g;var t=Iq[e];t||(t=Iq[e]=new LT(500));var i=t.get(n);return i==null&&(i=Ab.measureText(n,e).width,t.put(n,i)),i}function Dq(n,e,t,i){var r=lu(n,e),s=L9(e),a=Lx(0,r,t),o=Jy(0,s,i),l=new Qr(a,o,r,s);return l}function aue(n,e,t,i){var r=((n||"")+"").split(`
`),s=r.length;if(s===1)return Dq(r[0],e,t,i);for(var a=new Qr(0,0,0,0),o=0;o<r.length;o++){var l=Dq(r[o],e,t,i);o===0?a.copy(l):a.union(l)}return a}function Lx(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Jy(n,e,t){return t==="middle"?n-=e/2:t==="bottom"&&(n-=e),n}function L9(n){return lu("国",n)}function N_(n,e){return typeof n=="string"?n.lastIndexOf("%")>=0?parseFloat(n)/100*e:parseFloat(n):n}function oue(n,e,t){var i=e.position||"inside",r=e.distance!=null?e.distance:5,s=t.height,a=t.width,o=s/2,l=t.x,u=t.y,c="left",d="top";if(i instanceof Array)l+=N_(i[0],t.width),u+=N_(i[1],t.height),c=null,d=null;else switch(i){case"left":l-=r,u+=o,c="right",d="middle";break;case"right":l+=r+a,u+=o,d="middle";break;case"top":l+=a/2,u-=r,c="center",d="bottom";break;case"bottom":l+=a/2,u+=s+r,c="center";break;case"inside":l+=a/2,u+=o,c="center",d="middle";break;case"insideLeft":l+=r,u+=o,d="middle";break;case"insideRight":l+=a-r,u+=o,c="right",d="middle";break;case"insideTop":l+=a/2,u+=r,c="center";break;case"insideBottom":l+=a/2,u+=s-r,c="center",d="bottom";break;case"insideTopLeft":l+=r,u+=r;break;case"insideTopRight":l+=a-r,u+=r,c="right";break;case"insideBottomLeft":l+=r,u+=s-r,d="bottom";break;case"insideBottomRight":l+=a-r,u+=s-r,c="right",d="bottom";break}return n=n||{},n.x=l,n.y=u,n.align=c,n.verticalAlign=d,n}var p5="__zr_normal__",m5=xw.concat(["ignore"]),iYe=u0(xw,function(n,e){return n[e]=!0,n},{ignore:!1}),Qv={},rYe=new Qr(0,0,0,0),O9=function(){function n(e){this.id=Ole(),this.animators=[],this.currentStates=[],this.states={},this._init(e)}return n.prototype._init=function(e){this.attr(e)},n.prototype.drift=function(e,t,i){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0;break}var r=this.transform;r||(r=this.transform=[1,0,0,1,0,0]),r[4]+=e,r[5]+=t,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(e){var t=this._textContent;if(t&&(!t.ignore||e)){this.textConfig||(this.textConfig={});var i=this.textConfig,r=i.local,s=t.innerTransformable,a=void 0,o=void 0,l=!1;s.parent=r?this:null;var u=!1;if(s.copyTransform(t),i.position!=null){var c=rYe;i.layoutRect?c.copy(i.layoutRect):c.copy(this.getBoundingRect()),r||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Qv,i,c):oue(Qv,i,c),s.x=Qv.x,s.y=Qv.y,a=Qv.align,o=Qv.verticalAlign;var d=i.origin;if(d&&i.rotation!=null){var f=void 0,h=void 0;d==="center"?(f=c.width*.5,h=c.height*.5):(f=N_(d[0],c.width),h=N_(d[1],c.height)),u=!0,s.originX=-s.x+f+(r?0:c.x),s.originY=-s.y+h+(r?0:c.y)}}i.rotation!=null&&(s.rotation=i.rotation);var p=i.offset;p&&(s.x+=p[0],s.y+=p[1],u||(s.originX=-p[0],s.originY=-p[1]));var m=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),v=void 0,_=void 0,y=void 0;m&&this.canBeInsideText()?(v=i.insideFill,_=i.insideStroke,(v==null||v==="auto")&&(v=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(v),y=!0)):(v=i.outsideFill,_=i.outsideStroke,(v==null||v==="auto")&&(v=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(v),y=!0)),v=v||"#000",(v!==g.fill||_!==g.stroke||y!==g.autoStroke||a!==g.align||o!==g.verticalAlign)&&(l=!0,g.fill=v,g.stroke=_,g.autoStroke=y,g.align=a,g.verticalAlign=o,t.setDefaultTextStyle(g)),t.__dirty|=nu,l&&t.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(e){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?oO:aO},n.prototype.getOutsideStroke=function(e){var t=this.__zr&&this.__zr.getBackgroundColor(),i=typeof t=="string"&&Cg(t);i||(i=[255,255,255,1]);for(var r=i[3],s=this.__zr.isDarkMode(),a=0;a<3;a++)i[a]=i[a]*r+(s?0:255)*(1-r);return i[3]=1,R9(i,"rgba")},n.prototype.traverse=function(e,t){},n.prototype.attrKV=function(e,t){e==="textConfig"?this.setTextConfig(t):e==="textContent"?this.setTextContent(t):e==="clipPath"?this.setClipPath(t):e==="extra"?(this.extra=this.extra||{},Rn(this.extra,t)):this[e]=t},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(e,t){if(typeof e=="string")this.attrKV(e,t);else if(Ni(e))for(var i=e,r=Gs(i),s=0;s<r.length;s++){var a=r[s];this.attrKV(a,e[a])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(e){this._innerSaveToNormal(e);for(var t=this._normalState,i=0;i<this.animators.length;i++){var r=this.animators[i],s=r.__fromStateTransition;if(!(r.getLoop()||s&&s!==p5)){var a=r.targetName,o=a?t[a]:t;r.saveTo(o)}}},n.prototype._innerSaveToNormal=function(e){var t=this._normalState;t||(t=this._normalState={}),e.textConfig&&!t.textConfig&&(t.textConfig=this.textConfig),this._savePrimaryToNormal(e,t,m5)},n.prototype._savePrimaryToNormal=function(e,t,i){for(var r=0;r<i.length;r++){var s=i[r];e[s]!=null&&!(s in t)&&(t[s]=this[s])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(e){return this.states[e]},n.prototype.ensureState=function(e){var t=this.states;return t[e]||(t[e]={}),t[e]},n.prototype.clearStates=function(e){this.useState(p5,!1,e)},n.prototype.useState=function(e,t,i,r){var s=e===p5,a=this.hasState();if(!(!a&&s)){var o=this.currentStates,l=this.stateTransition;if(!(ls(o,e)>=0&&(t||o.length===1))){var u;if(this.stateProxy&&!s&&(u=this.stateProxy(e)),u||(u=this.states&&this.states[e]),!u&&!s){A9("State "+e+" not exists.");return}s||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||r);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(e,u,this._normalState,t,!i&&!this.__inHover&&l&&l.duration>0,l);var d=this._textContent,f=this._textGuide;return d&&d.useState(e,t,i,c),f&&f.useState(e,t,i,c),s?(this.currentStates=[],this._normalState={}):t?this.currentStates.push(e):this.currentStates=[e],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~nu),u}}},n.prototype.useStates=function(e,t,i){if(!e.length)this.clearStates();else{var r=[],s=this.currentStates,a=e.length,o=a===s.length;if(o){for(var l=0;l<a;l++)if(e[l]!==s[l]){o=!1;break}}if(o)return;for(var l=0;l<a;l++){var u=e[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,e)),c||(c=this.states[u]),c&&r.push(c)}var d=r[a-1],f=!!(d&&d.hoverLayer||i);f&&this._toggleHoverLayerFlag(!0);var h=this._mergeStates(r),p=this.stateTransition;this.saveCurrentToNormalState(h),this._applyStateObj(e.join(","),h,this._normalState,!1,!t&&!this.__inHover&&p&&p.duration>0,p);var m=this._textContent,g=this._textGuide;m&&m.useStates(e,t,f),g&&g.useStates(e,t,f),this._updateAnimationTargets(),this.currentStates=e.slice(),this.markRedraw(),!f&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~nu)}},n.prototype._updateAnimationTargets=function(){for(var e=0;e<this.animators.length;e++){var t=this.animators[e];t.targetName&&t.changeTarget(this[t.targetName])}},n.prototype.removeState=function(e){var t=ls(this.currentStates,e);if(t>=0){var i=this.currentStates.slice();i.splice(t,1),this.useStates(i)}},n.prototype.replaceState=function(e,t,i){var r=this.currentStates.slice(),s=ls(r,e),a=ls(r,t)>=0;s>=0?a?r.splice(s,1):r[s]=t:i&&!a&&r.push(t),this.useStates(r)},n.prototype.toggleState=function(e,t){t?this.useState(e,!0):this.removeState(e)},n.prototype._mergeStates=function(e){for(var t={},i,r=0;r<e.length;r++){var s=e[r];Rn(t,s),s.textConfig&&(i=i||{},Rn(i,s.textConfig))}return i&&(t.textConfig=i),t},n.prototype._applyStateObj=function(e,t,i,r,s,a){var o=!(t&&r);t&&t.textConfig?(this.textConfig=Rn({},r?this.textConfig:i.textConfig),Rn(this.textConfig,t.textConfig)):o&&i.textConfig&&(this.textConfig=i.textConfig);for(var l={},u=!1,c=0;c<m5.length;c++){var d=m5[c],f=s&&iYe[d];t&&t[d]!=null?f?(u=!0,l[d]=t[d]):this[d]=t[d]:o&&i[d]!=null&&(f?(u=!0,l[d]=i[d]):this[d]=i[d])}if(!s)for(var c=0;c<this.animators.length;c++){var h=this.animators[c],p=h.targetName;h.getLoop()||h.__changeFinalValue(p?(t||i)[p]:t||i)}u&&this._transitionState(e,l,a)},n.prototype._attachComponent=function(e){if(!(e.__zr&&!e.__hostTarget)&&e!==this){var t=this.__zr;t&&e.addSelfToZr(t),e.__zr=t,e.__hostTarget=this}},n.prototype._detachComponent=function(e){e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(e){this._clipPath&&this._clipPath!==e&&this.removeClipPath(),this._attachComponent(e),this._clipPath=e,this.markRedraw()},n.prototype.removeClipPath=function(){var e=this._clipPath;e&&(this._detachComponent(e),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(e){var t=this._textContent;t!==e&&(t&&t!==e&&this.removeTextContent(),e.innerTransformable=new k9,this._attachComponent(e),this._textContent=e,this.markRedraw())},n.prototype.setTextConfig=function(e){this.textConfig||(this.textConfig={}),Rn(this.textConfig,e),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var e=this._textContent;e&&(e.innerTransformable=null,this._detachComponent(e),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(e){this._textGuide&&this._textGuide!==e&&this.removeTextGuideLine(),this._attachComponent(e),this._textGuide=e,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var e=this._textGuide;e&&(this._detachComponent(e),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=nu;var e=this.__zr;e&&(this.__inHover?e.refreshHover():e.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(e){this.__inHover=e;var t=this._textContent,i=this._textGuide;t&&(t.__inHover=e),i&&(i.__inHover=e)},n.prototype.addSelfToZr=function(e){if(this.__zr!==e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this._clipPath&&this._clipPath.addSelfToZr(e),this._textContent&&this._textContent.addSelfToZr(e),this._textGuide&&this._textGuide.addSelfToZr(e)}},n.prototype.removeSelfFromZr=function(e){if(this.__zr){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this._clipPath&&this._clipPath.removeSelfFromZr(e),this._textContent&&this._textContent.removeSelfFromZr(e),this._textGuide&&this._textGuide.removeSelfFromZr(e)}},n.prototype.animate=function(e,t,i){var r=e?this[e]:this,s=new P9(r,t,i);return e&&(s.targetName=e),this.addAnimator(s,e),s},n.prototype.addAnimator=function(e,t){var i=this.__zr,r=this;e.during(function(){r.updateDuringAnimation(t)}).done(function(){var s=r.animators,a=ls(s,e);a>=0&&s.splice(a,1)}),this.animators.push(e),i&&i.animation.addAnimator(e),i&&i.wakeUp()},n.prototype.updateDuringAnimation=function(e){this.markRedraw()},n.prototype.stopAnimation=function(e,t){for(var i=this.animators,r=i.length,s=[],a=0;a<r;a++){var o=i[a];!e||e===o.scope?o.stop(t):s.push(o)}return this.animators=s,this},n.prototype.animateTo=function(e,t,i){g5(this,e,t,i)},n.prototype.animateFrom=function(e,t,i){g5(this,e,t,i,!0)},n.prototype._transitionState=function(e,t,i,r){for(var s=g5(this,t,i,r),a=0;a<s.length;a++)s[a].__fromStateTransition=e},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var e=n.prototype;e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=nu;function t(i,r,s,a){Object.defineProperty(e,i,{get:function(){if(!this[r]){var l=this[r]=[];o(this,l)}return this[r]},set:function(l){this[s]=l[0],this[a]=l[1],this[r]=l,o(this,l)}});function o(l,u){Object.defineProperty(u,0,{get:function(){return l[s]},set:function(c){l[s]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(t("position","_legacyPos","x","y"),t("scale","_legacyScale","scaleX","scaleY"),t("origin","_legacyOrigin","originX","originY"))}(),n}();Ah(O9,sf);Ah(O9,k9);function g5(n,e,t,i,r){t=t||{};var s=[];lue(n,"",n,e,t,i,s,r);var a=s.length,o=!1,l=t.done,u=t.aborted,c=function(){o=!0,a--,a<=0&&(o?l&&l():u&&u())},d=function(){a--,a<=0&&(o?l&&l():u&&u())};a||l&&l(),s.length>0&&t.during&&s[0].during(function(p,m){t.during(m)});for(var f=0;f<s.length;f++){var h=s[f];c&&h.done(c),d&&h.aborted(d),t.force&&h.duration(t.duration),h.start(t.easing)}return s}function v5(n,e,t){for(var i=0;i<t;i++)n[i]=e[i]}function sYe(n){return kl(n[0])}function aYe(n,e,t){if(kl(e[t]))if(kl(n[t])||(n[t]=[]),mu(e[t])){var i=e[t].length;n[t].length!==i&&(n[t]=new e[t].constructor(i),v5(n[t],e[t],i))}else{var r=e[t],s=n[t],a=r.length;if(sYe(r))for(var o=r[0].length,l=0;l<a;l++)s[l]?v5(s[l],r[l],o):s[l]=Array.prototype.slice.call(r[l]);else v5(s,r,a);s.length=r.length}else n[t]=e[t]}function oYe(n,e){return n===e||kl(n)&&kl(e)&&lYe(n,e)}function lYe(n,e){var t=n.length;if(t!==e.length)return!1;for(var i=0;i<t;i++)if(n[i]!==e[i])return!1;return!0}function lue(n,e,t,i,r,s,a,o){for(var l=Gs(i),u=r.duration,c=r.delay,d=r.additive,f=r.setToFinal,h=!Ni(s),p=n.animators,m=[],g=0;g<l.length;g++){var v=l[g],_=i[v];if(_!=null&&t[v]!=null&&(h||s[v]))if(Ni(_)&&!kl(_)&&!FD(_)){if(e){o||(t[v]=_,n.updateDuringAnimation(e));continue}lue(n,v,t[v],_,r,s&&s[v],a,o)}else m.push(v);else o||(t[v]=_,n.updateDuringAnimation(e),m.push(v))}var y=m.length;if(!d&&y)for(var b=0;b<p.length;b++){var x=p[b];if(x.targetName===e){var w=x.stopTracks(m);if(w){var A=ls(p,x);p.splice(A,1)}}}if(r.force||(m=Nu(m,function(I){return!oYe(i[I],t[I])}),y=m.length),y>0||r.force&&!a.length){var T=void 0,C=void 0,E=void 0;if(o){C={},f&&(T={});for(var b=0;b<y;b++){var v=m[b];C[v]=t[v],f?T[v]=i[v]:t[v]=i[v]}}else if(f){E={};for(var b=0;b<y;b++){var v=m[b];E[v]=BM(t[v]),aYe(t,i,v)}}var x=new P9(t,!1,!1,d?Nu(p,function(k){return k.targetName===e}):null);x.targetName=e,r.scope&&(x.scope=r.scope),f&&T&&x.whenWithKeys(0,T,m),E&&x.whenWithKeys(0,E,m),x.whenWithKeys(u??500,o?C:i,m).delay(c||0),n.addAnimator(x,e),a.push(x)}}const uue=O9;var cue=function(n){Mi(e,n);function e(t){var i=n.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var i=this._children,r=0;r<i.length;r++)if(i[r].name===t)return i[r]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,i){if(t&&t!==this&&t.parent!==this&&i&&i.parent===this){var r=this._children,s=r.indexOf(i);s>=0&&(r.splice(s,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,i){var r=ls(this._children,t);return r>=0&&this.replaceAt(i,r),this},e.prototype.replaceAt=function(t,i){var r=this._children,s=r[i];if(t&&t!==this&&t.parent!==this&&t!==s){r[i]=t,s.parent=null;var a=this.__zr;a&&s.removeSelfFromZr(a),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var i=this.__zr;i&&i!==t.__zr&&t.addSelfToZr(i),i&&i.refresh()},e.prototype.remove=function(t){var i=this.__zr,r=this._children,s=ls(r,t);return s<0?this:(r.splice(s,1),t.parent=null,i&&t.removeSelfFromZr(i),i&&i.refresh(),this)},e.prototype.removeAll=function(){for(var t=this._children,i=this.__zr,r=0;r<t.length;r++){var s=t[r];i&&s.removeSelfFromZr(i),s.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,i){for(var r=this._children,s=0;s<r.length;s++){var a=r[s];t.call(i,a,s)}return this},e.prototype.traverse=function(t,i){for(var r=0;r<this._children.length;r++){var s=this._children[r],a=t.call(i,s);s.isGroup&&!a&&s.traverse(t,i)}return this},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++){var r=this._children[i];r.removeSelfFromZr(t)}},e.prototype.getBoundingRect=function(t){for(var i=new Qr(0,0,0,0),r=t||this._children,s=[],a=null,o=0;o<r.length;o++){var l=r[o];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(s);c?(Qr.applyTransform(i,u,c),a=a||i.clone(),a.union(i)):(a=a||u.clone(),a.union(u))}}return a||i},e}(uue);cue.prototype.type="group";const Yd=cue;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var HM={},due={};function uYe(n){delete due[n]}function cYe(n){if(!n)return!1;if(typeof n=="string")return w4(n,1)<sO;if(n.colorStops){for(var e=n.colorStops,t=0,i=e.length,r=0;r<i;r++)t+=w4(e[r].color,1);return t/=i,t<sO}return!1}var dYe=function(){function n(e,t,i){var r=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=t,this.id=e;var s=new CXe,a=i.renderer||"canvas";HM[a]||(a=Gs(HM)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var o=new HM[a](t,s,i,e),l=i.ssr||o.ssrOnly;this.storage=s,this.painter=o;var u=!tr.node&&!tr.worker&&!l?new JXe(o.getViewportRoot(),o.root):null,c=i.useCoarsePointer,d=c==null||c==="auto"?tr.touchEventsSupported:!!c,f=44,h;d&&(h=yr(i.pointerSize,f)),this.handler=new bXe(s,o,u,o.root,h),this.animation=new WXe({stage:{update:l?null:function(){return r._flush(!0)}}}),l||this.animation.start()}return n.prototype.add=function(e){e&&(this.storage.addRoot(e),e.addSelfToZr(this),this.refresh())},n.prototype.remove=function(e){e&&(this.storage.delRoot(e),e.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this.refresh()},n.prototype.setBackgroundColor=function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this.refresh(),this._backgroundColor=e,this._darkMode=cYe(e)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(e){this._darkMode=e},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(e){e||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(e){var t,i=g1();this._needsRefresh&&(t=!0,this.refreshImmediately(e)),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately());var r=g1();t?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:r-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(e){this._sleepAfterStill=e},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},n.prototype.resize=function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(e){this.handler.setCursorStyle(e)},n.prototype.findHover=function(e,t){return this.handler.findHover(e,t)},n.prototype.on=function(e,t,i){return this.handler.on(e,t,i),this},n.prototype.off=function(e,t){this.handler.off(e,t)},n.prototype.trigger=function(e,t){this.handler.trigger(e,t)},n.prototype.clear=function(){for(var e=this.storage.getRoots(),t=0;t<e.length;t++)e[t]instanceof Yd&&e[t].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,uYe(this.id)},n}();function Rq(n,e){var t=new dYe(Ole(),n,e);return due[t.id]=t,t}function fYe(n,e){HM[n]=e}var Pq=1e-4,fue=20;function hYe(n){return n.replace(/^\s+|\s+$/g,"")}function pYe(n,e,t,i){var r=e[0],s=e[1],a=t[0],o=t[1],l=s-r,u=o-a;if(l===0)return u===0?a:(a+o)/2;if(i)if(l>0){if(n<=r)return a;if(n>=s)return o}else{if(n>=r)return a;if(n<=s)return o}else{if(n===r)return a;if(n===s)return o}return(n-r)/l*u+a}function da(n,e){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%";break}return ki(n)?hYe(n).match(/%$/)?parseFloat(n)/100*e:parseFloat(n):n==null?NaN:+n}function mYe(n,e,t){return e==null&&(e=10),e=Math.min(Math.max(0,e),fue),n=(+n).toFixed(e),t?n:+n}function kq(n){if(n=+n,isNaN(n))return 0;if(n>1e-14){for(var e=1,t=0;t<15;t++,e*=10)if(Math.round(n*e)/e===n)return t}return gYe(n)}function gYe(n){var e=n.toString().toLowerCase(),t=e.indexOf("e"),i=t>0?+e.slice(t+1):0,r=t>0?t:e.length,s=e.indexOf("."),a=s<0?0:r-1-s;return Math.max(0,a-i)}function vYe(n,e){var t=u0(n,function(h,p){return h+(isNaN(p)?0:p)},0);if(t===0)return[];for(var i=Math.pow(10,e),r=Sr(n,function(h){return(isNaN(h)?0:h)/t*i*100}),s=i*100,a=Sr(r,function(h){return Math.floor(h)}),o=u0(a,function(h,p){return h+p},0),l=Sr(r,function(h,p){return h-a[p]});o<s;){for(var u=Number.NEGATIVE_INFINITY,c=null,d=0,f=l.length;d<f;++d)l[d]>u&&(u=l[d],c=d);++a[c],l[c]=0,++o}return Sr(a,function(h){return h/i})}function yYe(n,e){var t=Math.max(kq(n),kq(e)),i=n+e;return t>fue?i:mYe(i,t)}function hue(n){var e=Math.PI*2;return(n%e+e)%e}function C4(n){return n>-Pq&&n<Pq}var _Ye=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function zD(n){if(n instanceof Date)return n;if(ki(n)){var e=_Ye.exec(n);if(!e)return new Date(NaN);if(e[8]){var t=+e[4]||0;return e[8].toUpperCase()!=="Z"&&(t-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,t,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}else return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}else if(n==null)return new Date(NaN);return new Date(Math.round(n))}function A4(n){var e=parseFloat(n);return e==n&&(e!==0||!ki(n)||n.indexOf("x")<=0)?e:NaN}function bYe(n){return!isNaN(A4(n))}function pue(){return Math.round(Math.random()*9)}function mue(n,e){return e===0?n:mue(e,n%e)}function Lq(n,e){return n==null?e:e==null?n:n*e/mue(n,e)}function vl(n){throw new Error(n)}var gue="series\0",SYe="\0_ec_\0";function Zo(n){return n instanceof Array?n:n==null?[]:[n]}function lO(n,e,t){if(n){n[e]=n[e]||{},n.emphasis=n.emphasis||{},n.emphasis[e]=n.emphasis[e]||{};for(var i=0,r=t.length;i<r;i++){var s=t[i];!n.emphasis[e].hasOwnProperty(s)&&n[e].hasOwnProperty(s)&&(n.emphasis[e][s]=n[e][s])}}}var Oq=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function HD(n){return Ni(n)&&!vi(n)&&!(n instanceof Date)?n.value:n}function xYe(n){return Ni(n)&&!(n instanceof Array)}function wYe(n,e,t){var i=t==="normalMerge",r=t==="replaceMerge",s=t==="replaceAll";n=n||[],e=(e||[]).slice();var a=_r();Nt(e,function(l,u){if(!Ni(l)){e[u]=null;return}});var o=TYe(n,a,t);return(i||r)&&CYe(o,n,a,e),i&&AYe(o,e),i||r?EYe(o,e,r):s&&MYe(o,e),IYe(o),o}function TYe(n,e,t){var i=[];if(t==="replaceAll")return i;for(var r=0;r<n.length;r++){var s=n[r];s&&s.id!=null&&e.set(s.id,r),i.push({existing:t==="replaceMerge"||ww(s)?null:s,newOption:null,keyInfo:null,brandNew:null})}return i}function CYe(n,e,t,i){Nt(i,function(r,s){if(!(!r||r.id==null)){var a=c2(r.id),o=t.get(a);if(o!=null){var l=n[o];dh(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=e[o],i[s]=null}}})}function AYe(n,e){Nt(e,function(t,i){if(!(!t||t.name==null))for(var r=0;r<n.length;r++){var s=n[r].existing;if(!n[r].newOption&&s&&(s.id==null||t.id==null)&&!ww(t)&&!ww(s)&&vue("name",s,t)){n[r].newOption=t,e[i]=null;return}}})}function EYe(n,e,t){Nt(e,function(i){if(i){for(var r,s=0;(r=n[s])&&(r.newOption||ww(r.existing)||r.existing&&i.id!=null&&!vue("id",i,r.existing));)s++;r?(r.newOption=i,r.brandNew=t):n.push({newOption:i,brandNew:t,existing:null,keyInfo:null}),s++}})}function MYe(n,e){Nt(e,function(t){n.push({newOption:t,brandNew:!0,existing:null,keyInfo:null})})}function IYe(n){var e=_r();Nt(n,function(t){var i=t.existing;i&&e.set(i.id,t)}),Nt(n,function(t){var i=t.newOption;dh(!i||i.id==null||!e.get(i.id)||e.get(i.id)===t,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&e.set(i.id,t),!t.keyInfo&&(t.keyInfo={})}),Nt(n,function(t,i){var r=t.existing,s=t.newOption,a=t.keyInfo;if(Ni(s)){if(a.name=s.name!=null?c2(s.name):r?r.name:gue+i,r)a.id=c2(r.id);else if(s.id!=null)a.id=c2(s.id);else{var o=0;do a.id="\0"+a.name+"\0"+o++;while(e.get(a.id))}e.set(a.id,t)}})}function vue(n,e,t){var i=Hd(e[n],null),r=Hd(t[n],null);return i!=null&&r!=null&&i===r}function c2(n){return Hd(n,"")}function Hd(n,e){return n==null?e:ki(n)?n:Ws(n)||G8(n)?n+"":e}function N9(n){var e=n.name;return!!(e&&e.indexOf(gue))}function ww(n){return n&&n.id!=null&&c2(n.id).indexOf(SYe)===0}function DYe(n,e,t){Nt(n,function(i){var r=i.newOption;Ni(r)&&(i.keyInfo.mainType=e,i.keyInfo.subType=RYe(e,r,i.existing,t))})}function RYe(n,e,t,i){var r=e.type?e.type:t?t.subType:i.determineSubType(n,e);return r}function OT(n,e){if(e.dataIndexInside!=null)return e.dataIndexInside;if(e.dataIndex!=null)return vi(e.dataIndex)?Sr(e.dataIndex,function(t){return n.indexOfRawIndex(t)}):n.indexOfRawIndex(e.dataIndex);if(e.name!=null)return vi(e.name)?Sr(e.name,function(t){return n.indexOfName(t)}):n.indexOfName(e.name)}function Ua(){var n="__ec_inner_"+PYe++;return function(e){return e[n]||(e[n]={})}}var PYe=pue();function y5(n,e,t){var i=B9(e,t),r=i.mainTypeSpecified,s=i.queryOptionMap,a=i.others,o=a,l=t?t.defaultMainType:null;return!r&&l&&s.set(l,{}),s.each(function(u,c){var d=NT(n,c,u,{useDefault:l===c,enableAll:t&&t.enableAll!=null?t.enableAll:!0,enableNone:t&&t.enableNone!=null?t.enableNone:!0});o[c+"Models"]=d.models,o[c+"Model"]=d.models[0]}),o}function B9(n,e){var t;if(ki(n)){var i={};i[n+"Index"]=0,t=i}else t=n;var r=_r(),s={},a=!1;return Nt(t,function(o,l){if(l==="dataIndex"||l==="dataIndexInside"){s[l]=o;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],d=(u[2]||"").toLowerCase();if(!(!c||!d||e&&e.includeMainTypes&&ls(e.includeMainTypes,c)<0)){a=a||!!c;var f=r.get(c)||r.set(c,{});f[d]=o}}),{mainTypeSpecified:a,queryOptionMap:r,others:s}}var F9={useDefault:!0,enableAll:!1,enableNone:!1};function NT(n,e,t,i){i=i||F9;var r=t.index,s=t.id,a=t.name,o={models:null,specified:r!=null||s!=null||a!=null};if(!o.specified){var l=void 0;return o.models=i.useDefault&&(l=n.getComponent(e))?[l]:[],o}return r==="none"||r===!1?(dh(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(r==="all"&&(dh(i.enableAll,'`"all"` is not a valid value on index option.'),r=s=a=null),o.models=n.queryComponents({mainType:e,index:r,id:s,name:a}),o)}function yue(n,e,t){n.setAttribute?n.setAttribute(e,t):n[e]=t}function kYe(n,e){return n.getAttribute?n.getAttribute(e):n[e]}function LYe(n){return n==="auto"?tr.domSupported?"html":"richText":n||"html"}var OYe=".",sm="___EC__COMPONENT__CONTAINER___",_ue="___EC__EXTENDED_CLASS___";function Pd(n){var e={main:"",sub:""};if(n){var t=n.split(OYe);e.main=t[0]||"",e.sub=t[1]||""}return e}function NYe(n){dh(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n),'componentType "'+n+'" illegal')}function BYe(n){return!!(n&&n[_ue])}function U9(n,e){n.$constructor=n,n.extend=function(t){var i=this,r;return FYe(i)?r=function(s){Mi(a,s);function a(){return s.apply(this,arguments)||this}return a}(i):(r=function(){(t.$constructor||i).apply(this,arguments)},LKe(r,this)),Rn(r.prototype,t),r[_ue]=!0,r.extend=this.extend,r.superCall=HYe,r.superApply=VYe,r.superClass=i,r}}function FYe(n){return $r(n)&&/^class\s/.test(Function.prototype.toString.call(n))}function bue(n,e){n.extend=e.extend}var UYe=Math.round(Math.random()*10);function zYe(n){var e=["__\0is_clz",UYe++].join("_");n.prototype[e]=!0,n.isInstance=function(t){return!!(t&&t[e])}}function HYe(n,e){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];return this.superClass.prototype[e].apply(n,t)}function VYe(n,e,t){return this.superClass.prototype[e].apply(n,t)}function z9(n){var e={};n.registerClass=function(i){var r=i.type||i.prototype.type;if(r){NYe(r),i.prototype.type=r;var s=Pd(r);if(!s.sub)e[s.main]=i;else if(s.sub!==sm){var a=t(s);a[s.sub]=i}}return i},n.getClass=function(i,r,s){var a=e[i];if(a&&a[sm]&&(a=r?a[r]:null),s&&!a)throw new Error(r?"Component "+i+"."+(r||"")+" is used but not imported.":i+".type should be specified.");return a},n.getClassesByMainType=function(i){var r=Pd(i),s=[],a=e[r.main];return a&&a[sm]?Nt(a,function(o,l){l!==sm&&s.push(o)}):s.push(a),s},n.hasClass=function(i){var r=Pd(i);return!!e[r.main]},n.getAllClassMainTypes=function(){var i=[];return Nt(e,function(r,s){i.push(s)}),i},n.hasSubTypes=function(i){var r=Pd(i),s=e[r.main];return s&&s[sm]};function t(i){var r=e[i.main];return(!r||!r[sm])&&(r=e[i.main]={},r[sm]=!0),r}}function Tw(n,e){for(var t=0;t<n.length;t++)n[t][1]||(n[t][1]=n[t][0]);return e=e||!1,function(i,r,s){for(var a={},o=0;o<n.length;o++){var l=n[o][1];if(!(r&&ls(r,l)>=0||s&&ls(s,l)<0)){var u=i.getShallow(l,e);u!=null&&(a[n[o][0]]=u)}}return a}}var $Ye=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],GYe=Tw($Ye),WYe=function(){function n(){}return n.prototype.getAreaStyle=function(e,t){return GYe(this,e,t)},n}(),uO=new LT(50);function qYe(n){if(typeof n=="string"){var e=uO.get(n);return e&&e.image}else return n}function Sue(n,e,t,i,r){if(n)if(typeof n=="string"){if(e&&e.__zrImageSrc===n||!t)return e;var s=uO.get(n),a={hostEl:t,cb:i,cbPayload:r};return s?(e=s.image,!VD(e)&&s.pending.push(a)):(e=Ab.loadImage(n,Nq,Nq),e.__zrImageSrc=n,uO.put(n,e.__cachedImgObj={image:e,pending:[a]})),e}else return n;else return e}function Nq(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<n.pending.length;e++){var t=n.pending[e],i=t.cb;i&&i(this,t.cbPayload),t.hostEl.dirty()}n.pending.length=0}function VD(n){return n&&n.width&&n.height}var _5=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function jYe(n,e,t,i,r){if(!e)return"";var s=(n+"").split(`
`);r=xue(e,t,i,r);for(var a=0,o=s.length;a<o;a++)s[a]=wue(s[a],r);return s.join(`
`)}function xue(n,e,t,i){i=i||{};var r=Rn({},i);r.font=e,t=yr(t,"..."),r.maxIterations=yr(i.maxIterations,2);var s=r.minChar=yr(i.minChar,0);r.cnCharWidth=lu("国",e);var a=r.ascCharWidth=lu("a",e);r.placeholder=yr(i.placeholder,"");for(var o=n=Math.max(0,n-1),l=0;l<s&&o>=a;l++)o-=a;var u=lu(t,e);return u>o&&(t="",u=0),o=n-u,r.ellipsis=t,r.ellipsisWidth=u,r.contentWidth=o,r.containerWidth=n,r}function wue(n,e){var t=e.containerWidth,i=e.font,r=e.contentWidth;if(!t)return"";var s=lu(n,i);if(s<=t)return n;for(var a=0;;a++){if(s<=r||a>=e.maxIterations){n+=e.ellipsis;break}var o=a===0?KYe(n,r,e.ascCharWidth,e.cnCharWidth):s>0?Math.floor(n.length*r/s):0;n=n.substr(0,o),s=lu(n,i)}return n===""&&(n=e.placeholder),n}function KYe(n,e,t,i){for(var r=0,s=0,a=n.length;s<a&&r<e;s++){var o=n.charCodeAt(s);r+=0<=o&&o<=127?t:i}return s}function XYe(n,e){n!=null&&(n+="");var t=e.overflow,i=e.padding,r=e.font,s=t==="truncate",a=L9(r),o=yr(e.lineHeight,a),l=!!e.backgroundColor,u=e.lineOverflow==="truncate",c=e.width,d;c!=null&&(t==="break"||t==="breakAll")?d=n?Tue(n,e.font,c,t==="breakAll",0).lines:[]:d=n?n.split(`
`):[];var f=d.length*o,h=yr(e.height,f);if(f>h&&u){var p=Math.floor(h/o);d=d.slice(0,p)}if(n&&s&&c!=null)for(var m=xue(c,r,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),g=0;g<d.length;g++)d[g]=wue(d[g],m);for(var v=h,_=0,g=0;g<d.length;g++)_=Math.max(lu(d[g],r),_);c==null&&(c=_);var y=_;return i&&(v+=i[0]+i[2],y+=i[1]+i[3],c+=i[1]+i[3]),l&&(y=c),{lines:d,height:h,outerWidth:y,outerHeight:v,lineHeight:o,calculatedLineHeight:a,contentWidth:_,contentHeight:f,width:c}}var YYe=function(){function n(){}return n}(),Bq=function(){function n(e){this.tokens=[],e&&(this.tokens=e)}return n}(),QYe=function(){function n(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return n}();function ZYe(n,e){var t=new QYe;if(n!=null&&(n+=""),!n)return t;for(var i=e.width,r=e.height,s=e.overflow,a=(s==="break"||s==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:s==="breakAll"}:null,o=_5.lastIndex=0,l;(l=_5.exec(n))!=null;){var u=l.index;u>o&&b5(t,n.substring(o,u),e,a),b5(t,l[2],e,a,l[1]),o=_5.lastIndex}o<n.length&&b5(t,n.substring(o,n.length),e,a);var c=[],d=0,f=0,h=e.padding,p=s==="truncate",m=e.lineOverflow==="truncate";function g(H,F,X){H.width=F,H.lineHeight=X,d+=X,f=Math.max(f,F)}e:for(var v=0;v<t.lines.length;v++){for(var _=t.lines[v],y=0,b=0,x=0;x<_.tokens.length;x++){var w=_.tokens[x],A=w.styleName&&e.rich[w.styleName]||{},T=w.textPadding=A.padding,C=T?T[1]+T[3]:0,E=w.font=A.font||e.font;w.contentHeight=L9(E);var I=yr(A.height,w.contentHeight);if(w.innerHeight=I,T&&(I+=T[0]+T[2]),w.height=I,w.lineHeight=a2(A.lineHeight,e.lineHeight,I),w.align=A&&A.align||e.align,w.verticalAlign=A&&A.verticalAlign||"middle",m&&r!=null&&d+w.lineHeight>r){x>0?(_.tokens=_.tokens.slice(0,x),g(_,b,y),t.lines=t.lines.slice(0,v+1)):t.lines=t.lines.slice(0,v);break e}var k=A.width,O=k==null||k==="auto";if(typeof k=="string"&&k.charAt(k.length-1)==="%")w.percentWidth=k,c.push(w),w.contentWidth=lu(w.text,E);else{if(O){var U=A.backgroundColor,z=U&&U.image;z&&(z=qYe(z),VD(z)&&(w.width=Math.max(w.width,z.width*I/z.height)))}var L=p&&i!=null?i-b:null;L!=null&&L<w.width?!O||L<C?(w.text="",w.width=w.contentWidth=0):(w.text=jYe(w.text,L-C,E,e.ellipsis,{minChar:e.truncateMinChar}),w.width=w.contentWidth=lu(w.text,E)):w.contentWidth=lu(w.text,E)}w.width+=C,b+=w.width,A&&(y=Math.max(y,w.lineHeight))}g(_,b,y)}t.outerWidth=t.width=yr(i,f),t.outerHeight=t.height=yr(r,d),t.contentHeight=d,t.contentWidth=f,h&&(t.outerWidth+=h[1]+h[3],t.outerHeight+=h[0]+h[2]);for(var v=0;v<c.length;v++){var w=c[v],G=w.percentWidth;w.width=parseInt(G,10)/100*t.width}return t}function b5(n,e,t,i,r){var s=e==="",a=r&&t.rich[r]||{},o=n.lines,l=a.font||t.font,u=!1,c,d;if(i){var f=a.padding,h=f?f[1]+f[3]:0;if(a.width!=null&&a.width!=="auto"){var p=N_(a.width,i.width)+h;o.length>0&&p+i.accumWidth>i.width&&(c=e.split(`
`),u=!0),i.accumWidth=p}else{var m=Tue(e,l,i.width,i.breakAll,i.accumWidth);i.accumWidth=m.accumWidth+h,d=m.linesWidths,c=m.lines}}else c=e.split(`
`);for(var g=0;g<c.length;g++){var v=c[g],_=new YYe;if(_.styleName=r,_.text=v,_.isLineHolder=!v&&!s,typeof a.width=="number"?_.width=a.width:_.width=d?d[g]:lu(v,l),!g&&!u){var y=(o[o.length-1]||(o[0]=new Bq)).tokens,b=y.length;b===1&&y[0].isLineHolder?y[0]=_:(v||!b||s)&&y.push(_)}else o.push(new Bq([_]))}}function JYe(n){var e=n.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}var eQe=u0(",&?/;] ".split(""),function(n,e){return n[e]=!0,n},{});function tQe(n){return JYe(n)?!!eQe[n]:!0}function Tue(n,e,t,i,r){for(var s=[],a=[],o="",l="",u=0,c=0,d=0;d<n.length;d++){var f=n.charAt(d);if(f===`
`){l&&(o+=l,c+=u),s.push(o),a.push(c),o="",l="",u=0,c=0;continue}var h=lu(f,e),p=i?!1:!tQe(f);if(s.length?c+h>t:r+c+h>t){c?(o||l)&&(p?(o||(o=l,l="",u=0,c=u),s.push(o),a.push(c-u),l+=f,u+=h,o="",c=u):(l&&(o+=l,l="",u=0),s.push(o),a.push(c),o=f,c=h)):p?(s.push(l),a.push(u),l=f,u=h):(s.push(f),a.push(h));continue}c+=h,p?(l+=f,u+=h):(l&&(o+=l,l="",u=0),o+=f)}return!s.length&&!o&&(o=n,l="",u=0),l&&(o+=l),o&&(s.push(o),a.push(c)),s.length===1&&(c+=r),{accumWidth:c,lines:s,linesWidths:a}}var cO="__zr_style_"+Math.round(Math.random()*10),Ag={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},$D={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};Ag[cO]=!0;var Fq=["z","z2","invisible"],nQe=["invisible"],iQe=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype._init=function(t){for(var i=Gs(t),r=0;r<i.length;r++){var s=i[r];s==="style"?this.useStyle(t[s]):n.prototype.attrKV.call(this,s,t[s])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,i,r,s){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&rQe(this,t,i)||a&&!a[0]&&!a[3])return!1;if(r&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(s&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},e.prototype.contain=function(t,i){return this.rectContain(t,i)},e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.rectContain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();return s.contain(r[0],r[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,r=this.getBoundingRect(),s=this.style,a=s.shadowBlur||0,o=s.shadowOffsetX||0,l=s.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Qr(0,0,0,0)),i?Qr.applyTransform(t,r,i):t.copy(r),(a||o||l)&&(t.width+=a*2+Math.abs(o),t.height+=a*2+Math.abs(l),t.x=Math.min(t.x,t.x+o-a),t.y=Math.min(t.y,t.y+l-a));var u=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-u),t.y=Math.floor(t.y-u),t.width=Math.ceil(t.width+1+u*2),t.height=Math.ceil(t.height+1+u*2))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Qr(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(t,i){t!=="style"?n.prototype.attrKV.call(this,t,i):this.style?this.setStyle(i):this.useStyle(i)},e.prototype.setStyle=function(t,i){return typeof t=="string"?this.style[t]=i:Rn(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=Px,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&Px)},e.prototype.styleUpdated=function(){this.__dirty&=~Px},e.prototype.createStyle=function(t){return UD(Ag,t)},e.prototype.useStyle=function(t){t[cO]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[cO]},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(t,i,Fq)},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),u;if(i&&i.style?a?s?u=i.style:(u=this._mergeStyle(this.createStyle(),r.style),this._mergeStyle(u,i.style)):(u=this._mergeStyle(this.createStyle(),s?this.style:r.style),this._mergeStyle(u,i.style)):l&&(u=r.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var d=Gs(c),f=0;f<d.length;f++){var h=d[f];h in u&&(u[h]=u[h],this.style[h]=c[h])}for(var p=Gs(u),f=0;f<p.length;f++){var h=p[f];this.style[h]=this.style[h]}this._transitionState(t,{style:u},o,this.getAnimationStyleProps())}else this.useStyle(u);for(var m=this.__inHover?nQe:Fq,f=0;f<m.length;f++){var h=m[f];i&&i[h]!=null?this[h]=i[h]:l&&r[h]!=null&&(this[h]=r[h])}},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.style&&(r=r||{},this._mergeStyle(r,a.style))}return r&&(i.style=r),i},e.prototype._mergeStyle=function(t,i){return Rn(t,i),t},e.prototype.getAnimationStyleProps=function(){return $D},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=nu|Px}(),e}(uue),S5=new Qr(0,0,0,0),x5=new Qr(0,0,0,0);function rQe(n,e,t){return S5.copy(n.getBoundingRect()),n.transform&&S5.applyTransform(n.transform),x5.width=e,x5.height=t,!S5.intersect(x5)}const BT=iQe;var Uu=Math.min,zu=Math.max,w5=Math.sin,T5=Math.cos,am=Math.PI*2,TA=Eb(),CA=Eb(),AA=Eb();function Uq(n,e,t,i,r,s){r[0]=Uu(n,t),r[1]=Uu(e,i),s[0]=zu(n,t),s[1]=zu(e,i)}var zq=[],Hq=[];function sQe(n,e,t,i,r,s,a,o,l,u){var c=Zle,d=qa,f=c(n,t,r,a,zq);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var h=0;h<f;h++){var p=d(n,t,r,a,zq[h]);l[0]=Uu(p,l[0]),u[0]=zu(p,u[0])}f=c(e,i,s,o,Hq);for(var h=0;h<f;h++){var m=d(e,i,s,o,Hq[h]);l[1]=Uu(m,l[1]),u[1]=zu(m,u[1])}l[0]=Uu(n,l[0]),u[0]=zu(n,u[0]),l[0]=Uu(a,l[0]),u[0]=zu(a,u[0]),l[1]=Uu(e,l[1]),u[1]=zu(e,u[1]),l[1]=Uu(o,l[1]),u[1]=zu(o,u[1])}function aQe(n,e,t,i,r,s,a,o){var l=Jle,u=mo,c=zu(Uu(l(n,t,r),1),0),d=zu(Uu(l(e,i,s),1),0),f=u(n,t,r,c),h=u(e,i,s,d);a[0]=Uu(n,r,f),a[1]=Uu(e,s,h),o[0]=zu(n,r,f),o[1]=zu(e,s,h)}function oQe(n,e,t,i,r,s,a,o,l){var u=p1,c=m1,d=Math.abs(r-s);if(d%am<1e-4&&d>1e-4){o[0]=n-t,o[1]=e-i,l[0]=n+t,l[1]=e+i;return}if(TA[0]=T5(r)*t+n,TA[1]=w5(r)*i+e,CA[0]=T5(s)*t+n,CA[1]=w5(s)*i+e,u(o,TA,CA),c(l,TA,CA),r=r%am,r<0&&(r=r+am),s=s%am,s<0&&(s=s+am),r>s&&!a?s+=am:r<s&&a&&(r+=am),a){var f=s;s=r,r=f}for(var h=0;h<s;h+=Math.PI/2)h>r&&(AA[0]=T5(h)*t+n,AA[1]=w5(h)*i+e,u(o,AA,o),c(l,AA,l))}var Lr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},om=[],lm=[],cd=[],Gh=[],dd=[],fd=[],C5=Math.min,A5=Math.max,um=Math.cos,cm=Math.sin,mf=Math.abs,dO=Math.PI,yp=dO*2,E5=typeof Float32Array<"u",$S=[];function M5(n){var e=Math.round(n/dO*1e8)/1e8;return e%2*dO}function lQe(n,e){var t=M5(n[0]);t<0&&(t+=yp);var i=t-n[0],r=n[1];r+=i,!e&&r-t>=yp?r=t+yp:e&&t-r>=yp?r=t-yp:!e&&t>r?r=t+(yp-M5(t-r)):e&&t<r&&(r=t-(yp-M5(r-t))),n[0]=t,n[1]=r}var uQe=function(){function n(e){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,e&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(e,t,i){i=i||0,i>0&&(this._ux=mf(i/T4/e)||0,this._uy=mf(i/T4/t)||0)},n.prototype.setDPR=function(e){this.dpr=e},n.prototype.setContext=function(e){this._ctx=e},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(e,t){return this._drawPendingPt(),this.addData(Lr.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},n.prototype.lineTo=function(e,t){var i=mf(e-this._xi),r=mf(t-this._yi),s=i>this._ux||r>this._uy;if(this.addData(Lr.L,e,t),this._ctx&&s&&this._ctx.lineTo(e,t),s)this._xi=e,this._yi=t,this._pendingPtDist=0;else{var a=i*i+r*r;a>this._pendingPtDist&&(this._pendingPtX=e,this._pendingPtY=t,this._pendingPtDist=a)}return this},n.prototype.bezierCurveTo=function(e,t,i,r,s,a){return this._drawPendingPt(),this.addData(Lr.C,e,t,i,r,s,a),this._ctx&&this._ctx.bezierCurveTo(e,t,i,r,s,a),this._xi=s,this._yi=a,this},n.prototype.quadraticCurveTo=function(e,t,i,r){return this._drawPendingPt(),this.addData(Lr.Q,e,t,i,r),this._ctx&&this._ctx.quadraticCurveTo(e,t,i,r),this._xi=i,this._yi=r,this},n.prototype.arc=function(e,t,i,r,s,a){this._drawPendingPt(),$S[0]=r,$S[1]=s,lQe($S,a),r=$S[0],s=$S[1];var o=s-r;return this.addData(Lr.A,e,t,i,i,r,o,0,a?0:1),this._ctx&&this._ctx.arc(e,t,i,r,s,a),this._xi=um(s)*i+e,this._yi=cm(s)*i+t,this},n.prototype.arcTo=function(e,t,i,r,s){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(e,t,i,r,s),this},n.prototype.rect=function(e,t,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.rect(e,t,i,r),this.addData(Lr.R,e,t,i,r),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(Lr.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&e.closePath(),this._xi=t,this._yi=i,this},n.prototype.fill=function(e){e&&e.fill(),this.toStatic()},n.prototype.stroke=function(e){e&&e.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(e){var t=e.length;!(this.data&&this.data.length===t)&&E5&&(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},n.prototype.appendPath=function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,r=this._len,s=0;s<t;s++)i+=e[s].len();E5&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+i));for(var s=0;s<t;s++)for(var a=e[s].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},n.prototype.addData=function(e,t,i,r,s,a,o,l,u){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var d=0;d<arguments.length;d++)c[this._len++]=arguments[d]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var e=this.data;e instanceof Array&&(e.length=this._len,E5&&this._len>11&&(this.data=new Float32Array(e)))}},n.prototype.getBoundingRect=function(){cd[0]=cd[1]=dd[0]=dd[1]=Number.MAX_VALUE,Gh[0]=Gh[1]=fd[0]=fd[1]=-Number.MAX_VALUE;var e=this.data,t=0,i=0,r=0,s=0,a;for(a=0;a<this._len;){var o=e[a++],l=a===1;switch(l&&(t=e[a],i=e[a+1],r=t,s=i),o){case Lr.M:t=r=e[a++],i=s=e[a++],dd[0]=r,dd[1]=s,fd[0]=r,fd[1]=s;break;case Lr.L:Uq(t,i,e[a],e[a+1],dd,fd),t=e[a++],i=e[a++];break;case Lr.C:sQe(t,i,e[a++],e[a++],e[a++],e[a++],e[a],e[a+1],dd,fd),t=e[a++],i=e[a++];break;case Lr.Q:aQe(t,i,e[a++],e[a++],e[a],e[a+1],dd,fd),t=e[a++],i=e[a++];break;case Lr.A:var u=e[a++],c=e[a++],d=e[a++],f=e[a++],h=e[a++],p=e[a++]+h;a+=1;var m=!e[a++];l&&(r=um(h)*d+u,s=cm(h)*f+c),oQe(u,c,d,f,h,p,m,dd,fd),t=um(p)*d+u,i=cm(p)*f+c;break;case Lr.R:r=t=e[a++],s=i=e[a++];var g=e[a++],v=e[a++];Uq(r,s,r+g,s+v,dd,fd);break;case Lr.Z:t=r,i=s;break}p1(cd,cd,dd),m1(Gh,Gh,fd)}return a===0&&(cd[0]=cd[1]=Gh[0]=Gh[1]=0),new Qr(cd[0],cd[1],Gh[0]-cd[0],Gh[1]-cd[1])},n.prototype._calculateLength=function(){var e=this.data,t=this._len,i=this._ux,r=this._uy,s=0,a=0,o=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,d=0,f=0;f<t;){var h=e[f++],p=f===1;p&&(s=e[f],a=e[f+1],o=s,l=a);var m=-1;switch(h){case Lr.M:s=o=e[f++],a=l=e[f++];break;case Lr.L:{var g=e[f++],v=e[f++],_=g-s,y=v-a;(mf(_)>i||mf(y)>r||f===t-1)&&(m=Math.sqrt(_*_+y*y),s=g,a=v);break}case Lr.C:{var b=e[f++],x=e[f++],g=e[f++],v=e[f++],w=e[f++],A=e[f++];m=EXe(s,a,b,x,g,v,w,A,10),s=w,a=A;break}case Lr.Q:{var b=e[f++],x=e[f++],g=e[f++],v=e[f++];m=DXe(s,a,b,x,g,v,10),s=g,a=v;break}case Lr.A:var T=e[f++],C=e[f++],E=e[f++],I=e[f++],k=e[f++],O=e[f++],U=O+k;f+=1,e[f++],p&&(o=um(k)*E+T,l=cm(k)*I+C),m=A5(E,I)*C5(yp,Math.abs(O)),s=um(U)*E+T,a=cm(U)*I+C;break;case Lr.R:{o=s=e[f++],l=a=e[f++];var z=e[f++],L=e[f++];m=z*2+L*2;break}case Lr.Z:{var _=o-s,y=l-a;m=Math.sqrt(_*_+y*y),s=o,a=l;break}}m>=0&&(u[d++]=m,c+=m)}return this._pathLen=c,c},n.prototype.rebuildPath=function(e,t){var i=this.data,r=this._ux,s=this._uy,a=this._len,o,l,u,c,d,f,h=t<1,p,m,g=0,v=0,_,y=0,b,x;if(!(h&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,m=this._pathLen,_=t*m,!_)))e:for(var w=0;w<a;){var A=i[w++],T=w===1;switch(T&&(u=i[w],c=i[w+1],o=u,l=c),A!==Lr.L&&y>0&&(e.lineTo(b,x),y=0),A){case Lr.M:o=u=i[w++],l=c=i[w++],e.moveTo(u,c);break;case Lr.L:{d=i[w++],f=i[w++];var C=mf(d-u),E=mf(f-c);if(C>r||E>s){if(h){var I=p[v++];if(g+I>_){var k=(_-g)/I;e.lineTo(u*(1-k)+d*k,c*(1-k)+f*k);break e}g+=I}e.lineTo(d,f),u=d,c=f,y=0}else{var O=C*C+E*E;O>y&&(b=d,x=f,y=O)}break}case Lr.C:{var U=i[w++],z=i[w++],L=i[w++],G=i[w++],H=i[w++],F=i[w++];if(h){var I=p[v++];if(g+I>_){var k=(_-g)/I;S4(u,U,L,H,k,om),S4(c,z,G,F,k,lm),e.bezierCurveTo(om[1],lm[1],om[2],lm[2],om[3],lm[3]);break e}g+=I}e.bezierCurveTo(U,z,L,G,H,F),u=H,c=F;break}case Lr.Q:{var U=i[w++],z=i[w++],L=i[w++],G=i[w++];if(h){var I=p[v++];if(g+I>_){var k=(_-g)/I;x4(u,U,L,k,om),x4(c,z,G,k,lm),e.quadraticCurveTo(om[1],lm[1],om[2],lm[2]);break e}g+=I}e.quadraticCurveTo(U,z,L,G),u=L,c=G;break}case Lr.A:var X=i[w++],te=i[w++],re=i[w++],ie=i[w++],le=i[w++],ge=i[w++],pe=i[w++],ye=!i[w++],Oe=re>ie?re:ie,Be=mf(re-ie)>.001,Ye=le+ge,Ze=!1;if(h){var I=p[v++];g+I>_&&(Ye=le+ge*(_-g)/I,Ze=!0),g+=I}if(Be&&e.ellipse?e.ellipse(X,te,re,ie,pe,le,Ye,ye):e.arc(X,te,Oe,le,Ye,ye),Ze)break e;T&&(o=um(le)*re+X,l=cm(le)*ie+te),u=um(Ye)*re+X,c=cm(Ye)*ie+te;break;case Lr.R:o=u=i[w],l=c=i[w+1],d=i[w++],f=i[w++];var Q=i[w++],me=i[w++];if(h){var I=p[v++];if(g+I>_){var ce=_-g;e.moveTo(d,f),e.lineTo(d+C5(ce,Q),f),ce-=Q,ce>0&&e.lineTo(d+Q,f+C5(ce,me)),ce-=me,ce>0&&e.lineTo(d+A5(Q-ce,0),f+me),ce-=Q,ce>0&&e.lineTo(d,f+A5(me-ce,0));break e}g+=I}e.rect(d,f,Q,me);break;case Lr.Z:if(h){var I=p[v++];if(g+I>_){var k=(_-g)/I;e.lineTo(u*(1-k)+o*k,c*(1-k)+l*k);break e}g+=I}e.closePath(),u=o,c=l}}},n.prototype.clone=function(){var e=new n,t=this.data;return e.data=t.slice?t.slice():Array.prototype.slice.call(t),e._len=this._len,e},n.CMD=Lr,n.initDefaultProps=function(){var e=n.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),n}();const Gg=uQe;function Zv(n,e,t,i,r,s,a){if(r===0)return!1;var o=r,l=0,u=n;if(a>e+o&&a>i+o||a<e-o&&a<i-o||s>n+o&&s>t+o||s<n-o&&s<t-o)return!1;if(n!==t)l=(e-i)/(n-t),u=(n*i-t*e)/(n-t);else return Math.abs(s-n)<=o/2;var c=l*s-a+u,d=c*c/(l*l+1);return d<=o/2*o/2}function cQe(n,e,t,i,r,s,a,o,l,u,c){if(l===0)return!1;var d=l;if(c>e+d&&c>i+d&&c>s+d&&c>o+d||c<e-d&&c<i-d&&c<s-d&&c<o-d||u>n+d&&u>t+d&&u>r+d&&u>a+d||u<n-d&&u<t-d&&u<r-d&&u<a-d)return!1;var f=AXe(n,e,t,i,r,s,a,o,u,c,null);return f<=d/2}function dQe(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var u=a;if(l>e+u&&l>i+u&&l>s+u||l<e-u&&l<i-u&&l<s-u||o>n+u&&o>t+u&&o>r+u||o<n-u&&o<t-u&&o<r-u)return!1;var c=IXe(n,e,t,i,r,s,o,l,null);return c<=u/2}var Vq=Math.PI*2;function EA(n){return n%=Vq,n<0&&(n+=Vq),n}var GS=Math.PI*2;function fQe(n,e,t,i,r,s,a,o,l){if(a===0)return!1;var u=a;o-=n,l-=e;var c=Math.sqrt(o*o+l*l);if(c-u>t||c+u<t)return!1;if(Math.abs(i-r)%GS<1e-4)return!0;if(s){var d=i;i=EA(r),r=EA(d)}else i=EA(i),r=EA(r);i>r&&(r+=GS);var f=Math.atan2(l,o);return f<0&&(f+=GS),f>=i&&f<=r||f+GS>=i&&f+GS<=r}function dm(n,e,t,i,r,s){if(s>e&&s>i||s<e&&s<i||i===e)return 0;var a=(s-e)/(i-e),o=i<e?1:-1;(a===1||a===0)&&(o=i<e?.5:-.5);var l=a*(t-n)+n;return l===r?1/0:l>r?o:0}var Wh=Gg.CMD,fm=Math.PI*2,hQe=1e-4;function pQe(n,e){return Math.abs(n-e)<hQe}var Vo=[-1,-1,-1],ku=[-1,-1];function mQe(){var n=ku[0];ku[0]=ku[1],ku[1]=n}function gQe(n,e,t,i,r,s,a,o,l,u){if(u>e&&u>i&&u>s&&u>o||u<e&&u<i&&u<s&&u<o)return 0;var c=Qle(e,i,s,o,u,Vo);if(c===0)return 0;for(var d=0,f=-1,h=void 0,p=void 0,m=0;m<c;m++){var g=Vo[m],v=g===0||g===1?.5:1,_=qa(n,t,r,a,g);_<l||(f<0&&(f=Zle(e,i,s,o,ku),ku[1]<ku[0]&&f>1&&mQe(),h=qa(e,i,s,o,ku[0]),f>1&&(p=qa(e,i,s,o,ku[1]))),f===2?g<ku[0]?d+=h<e?v:-v:g<ku[1]?d+=p<h?v:-v:d+=o<p?v:-v:g<ku[0]?d+=h<e?v:-v:d+=o<h?v:-v)}return d}function vQe(n,e,t,i,r,s,a,o){if(o>e&&o>i&&o>s||o<e&&o<i&&o<s)return 0;var l=MXe(e,i,s,o,Vo);if(l===0)return 0;var u=Jle(e,i,s);if(u>=0&&u<=1){for(var c=0,d=mo(e,i,s,u),f=0;f<l;f++){var h=Vo[f]===0||Vo[f]===1?.5:1,p=mo(n,t,r,Vo[f]);p<a||(Vo[f]<u?c+=d<e?h:-h:c+=s<d?h:-h)}return c}else{var h=Vo[0]===0||Vo[0]===1?.5:1,p=mo(n,t,r,Vo[0]);return p<a?0:s<e?h:-h}}function yQe(n,e,t,i,r,s,a,o){if(o-=e,o>t||o<-t)return 0;var l=Math.sqrt(t*t-o*o);Vo[0]=-l,Vo[1]=l;var u=Math.abs(i-r);if(u<1e-4)return 0;if(u>=fm-1e-4){i=0,r=fm;var c=s?1:-1;return a>=Vo[0]+n&&a<=Vo[1]+n?c:0}if(i>r){var d=i;i=r,r=d}i<0&&(i+=fm,r+=fm);for(var f=0,h=0;h<2;h++){var p=Vo[h];if(p+n>a){var m=Math.atan2(o,p),c=s?1:-1;m<0&&(m=fm+m),(m>=i&&m<=r||m+fm>=i&&m+fm<=r)&&(m>Math.PI/2&&m<Math.PI*1.5&&(c=-c),f+=c)}}return f}function Cue(n,e,t,i,r){for(var s=n.data,a=n.len(),o=0,l=0,u=0,c=0,d=0,f,h,p=0;p<a;){var m=s[p++],g=p===1;switch(m===Wh.M&&p>1&&(t||(o+=dm(l,u,c,d,i,r))),g&&(l=s[p],u=s[p+1],c=l,d=u),m){case Wh.M:c=s[p++],d=s[p++],l=c,u=d;break;case Wh.L:if(t){if(Zv(l,u,s[p],s[p+1],e,i,r))return!0}else o+=dm(l,u,s[p],s[p+1],i,r)||0;l=s[p++],u=s[p++];break;case Wh.C:if(t){if(cQe(l,u,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=gQe(l,u,s[p++],s[p++],s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],u=s[p++];break;case Wh.Q:if(t){if(dQe(l,u,s[p++],s[p++],s[p],s[p+1],e,i,r))return!0}else o+=vQe(l,u,s[p++],s[p++],s[p],s[p+1],i,r)||0;l=s[p++],u=s[p++];break;case Wh.A:var v=s[p++],_=s[p++],y=s[p++],b=s[p++],x=s[p++],w=s[p++];p+=1;var A=!!(1-s[p++]);f=Math.cos(x)*y+v,h=Math.sin(x)*b+_,g?(c=f,d=h):o+=dm(l,u,f,h,i,r);var T=(i-v)*b/y+v;if(t){if(fQe(v,_,b,x,x+w,A,e,T,r))return!0}else o+=yQe(v,_,b,x,x+w,A,T,r);l=Math.cos(x+w)*y+v,u=Math.sin(x+w)*b+_;break;case Wh.R:c=l=s[p++],d=u=s[p++];var C=s[p++],E=s[p++];if(f=c+C,h=d+E,t){if(Zv(c,d,f,d,e,i,r)||Zv(f,d,f,h,e,i,r)||Zv(f,h,c,h,e,i,r)||Zv(c,h,c,d,e,i,r))return!0}else o+=dm(f,d,f,h,i,r),o+=dm(c,h,c,d,i,r);break;case Wh.Z:if(t){if(Zv(l,u,c,d,e,i,r))return!0}else o+=dm(l,u,c,d,i,r);l=c,u=d;break}}return!t&&!pQe(u,d)&&(o+=dm(l,u,c,d,i,r)||0),o!==0}function _Qe(n,e,t){return Cue(n,0,!1,e,t)}function bQe(n,e,t,i){return Cue(n,e,!0,t,i)}var Aue=Cs({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},Ag),SQe={style:Cs({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},$D.style)},I5=xw.concat(["invisible","culling","z","z2","zlevel","parent"]),xQe=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.update=function(){var t=this;n.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(l){t.buildPath(l,t.shape)}),r.silent=!0;var s=r.style;for(var a in i)s[a]!==i[a]&&(s[a]=i[a]);s.fill=i.fill?i.decal:null,s.decal=null,s.shadowColor=null,i.strokeFirst&&(s.stroke=null);for(var o=0;o<I5.length;++o)r[I5[o]]=this[I5[o]];r.__dirty|=nu}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(t){var i=Gs(t);this.shape=this.getDefaultShape();var r=this.getDefaultStyle();r&&this.useStyle(r);for(var s=0;s<i.length;s++){var a=i[s],o=t[a];a==="style"?this.style?Rn(this.style,o):this.useStyle(o):a==="shape"?Rn(this.shape,o):n.prototype.attrKV.call(this,a,o)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if(t!=="none"){if(ki(t)){var i=w4(t,0);return i>.5?aO:i>.2?eYe:oO}else if(t)return oO}return aO},e.prototype.getInsideTextStroke=function(t){var i=this.style.fill;if(ki(i)){var r=this.__zr,s=!!(r&&r.isDarkMode()),a=w4(t,0)<sO;if(s===a)return i}},e.prototype.buildPath=function(t,i,r){},e.prototype.pathUpdated=function(){this.__dirty&=~Zy},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new Gg(!1)},e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return!(i==null||i==="none"||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.getBoundingRect=function(){var t=this._rect,i=this.style,r=!t;if(r){var s=!1;this.path||(s=!0,this.createPathProxy());var a=this.path;(s||this.__dirty&Zy)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),t=a.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||r){o.copy(t);var l=i.strokeNoScale?this.getLineScale():1,u=i.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c??4)}l>1e-10&&(o.width+=u/l,o.height+=u/l,o.x-=u/l/2,o.y-=u/l/2)}return o}return t},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect(),a=this.style;if(t=r[0],i=r[1],s.contain(t,i)){var o=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),bQe(o,l/u,t,i)))return!0}if(this.hasFill())return _Qe(o,t,i)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=Zy,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){t==="style"?this.dirtyStyle():t==="shape"?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(t,i){t==="shape"?this.setShape(i):n.prototype.attrKV.call(this,t,i)},e.prototype.setShape=function(t,i){var r=this.shape;return r||(r=this.shape={}),typeof t=="string"?r[t]=i:Rn(r,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&Zy)},e.prototype.createStyle=function(t){return UD(Aue,t)},e.prototype._innerSaveToNormal=function(t){n.prototype._innerSaveToNormal.call(this,t);var i=this._normalState;t.shape&&!i.shape&&(i.shape=Rn({},this.shape))},e.prototype._applyStateObj=function(t,i,r,s,a,o){n.prototype._applyStateObj.call(this,t,i,r,s,a,o);var l=!(i&&s),u;if(i&&i.shape?a?s?u=i.shape:(u=Rn({},r.shape),Rn(u,i.shape)):(u=Rn({},s?this.shape:r.shape),Rn(u,i.shape)):l&&(u=r.shape),u)if(a){this.shape=Rn({},this.shape);for(var c={},d=Gs(u),f=0;f<d.length;f++){var h=d[f];typeof u[h]=="object"?this.shape[h]=u[h]:c[h]=u[h]}this._transitionState(t,{shape:c},o)}else this.shape=u,this.dirtyShape()},e.prototype._mergeStates=function(t){for(var i=n.prototype._mergeStates.call(this,t),r,s=0;s<t.length;s++){var a=t[s];a.shape&&(r=r||{},this._mergeStyle(r,a.shape))}return r&&(i.shape=r),i},e.prototype.getAnimationStyleProps=function(){return SQe},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var i=function(s){Mi(a,s);function a(o){var l=s.call(this,o)||this;return t.init&&t.init.call(l,o),l}return a.prototype.getDefaultStyle=function(){return Cr(t.style)},a.prototype.getDefaultShape=function(){return Cr(t.shape)},a}(e);for(var r in t)typeof t[r]=="function"&&(i.prototype[r]=t[r]);return i},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=nu|Px|Zy}(),e}(BT);const ds=xQe;var wQe=Cs({strokeFirst:!0,font:$g,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Aue),Eue=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.hasStroke=function(){var t=this.style,i=t.stroke;return i!=null&&i!=="none"&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,i=t.fill;return i!=null&&i!=="none"},e.prototype.createStyle=function(t){return UD(wQe,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var i=t.text;i!=null?i+="":i="";var r=aue(i,t.font,t.textAlign,t.textBaseline);if(r.x+=t.x||0,r.y+=t.y||0,this.hasStroke()){var s=t.lineWidth;r.x-=s/2,r.y-=s/2,r.width+=s,r.height+=s}this._rect=r}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(BT);Eue.prototype.type="tspan";const fO=Eue;var TQe=Cs({x:0,y:0},Ag),CQe={style:Cs({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},$D.style)};function AQe(n){return!!(n&&typeof n!="string"&&n.width&&n.height)}var Mue=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.createStyle=function(t){return UD(TQe,t)},e.prototype._getSize=function(t){var i=this.style,r=i[t];if(r!=null)return r;var s=AQe(i.image)?i.image:this.__image;if(!s)return 0;var a=t==="width"?"height":"width",o=i[a];return o==null?s[t]:s[t]/s[a]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return CQe},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Qr(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(BT);Mue.prototype.type="image";const Mb=Mue;function EQe(n,e){var t=e.x,i=e.y,r=e.width,s=e.height,a=e.r,o,l,u,c;r<0&&(t=t+r,r=-r),s<0&&(i=i+s,s=-s),typeof a=="number"?o=l=u=c=a:a instanceof Array?a.length===1?o=l=u=c=a[0]:a.length===2?(o=u=a[0],l=c=a[1]):a.length===3?(o=a[0],l=c=a[1],u=a[2]):(o=a[0],l=a[1],u=a[2],c=a[3]):o=l=u=c=0;var d;o+l>r&&(d=o+l,o*=r/d,l*=r/d),u+c>r&&(d=u+c,u*=r/d,c*=r/d),l+u>s&&(d=l+u,l*=s/d,u*=s/d),o+c>s&&(d=o+c,o*=s/d,c*=s/d),n.moveTo(t+o,i),n.lineTo(t+r-l,i),l!==0&&n.arc(t+r-l,i+l,l,-Math.PI/2,0),n.lineTo(t+r,i+s-u),u!==0&&n.arc(t+r-u,i+s-u,u,0,Math.PI/2),n.lineTo(t+c,i+s),c!==0&&n.arc(t+c,i+s-c,c,Math.PI/2,Math.PI),n.lineTo(t,i+o),o!==0&&n.arc(t+o,i+o,o,Math.PI,Math.PI*1.5)}var v1=Math.round;function Iue(n,e,t){if(e){var i=e.x1,r=e.x2,s=e.y1,a=e.y2;n.x1=i,n.x2=r,n.y1=s,n.y2=a;var o=t&&t.lineWidth;return o&&(v1(i*2)===v1(r*2)&&(n.x1=n.x2=rg(i,o,!0)),v1(s*2)===v1(a*2)&&(n.y1=n.y2=rg(s,o,!0))),n}}function Due(n,e,t){if(e){var i=e.x,r=e.y,s=e.width,a=e.height;n.x=i,n.y=r,n.width=s,n.height=a;var o=t&&t.lineWidth;return o&&(n.x=rg(i,o,!0),n.y=rg(r,o,!0),n.width=Math.max(rg(i+s,o,!1)-n.x,s===0?0:1),n.height=Math.max(rg(r+a,o,!1)-n.y,a===0?0:1)),n}}function rg(n,e,t){if(!e)return n;var i=v1(n*2);return(i+v1(e))%2===0?i/2:(i+(t?1:-1))/2}var MQe=function(){function n(){this.x=0,this.y=0,this.width=0,this.height=0}return n}(),IQe={},Rue=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new MQe},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=Due(IQe,i,this.style);r=l.x,s=l.y,a=l.width,o=l.height,l.r=i.r,i=l}else r=i.x,s=i.y,a=i.width,o=i.height;i.r?EQe(t,i):t.rect(r,s,a,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(ds);Rue.prototype.type="rect";const El=Rue;var $q={fill:"#000"},Gq=2,DQe={style:Cs({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},$D.style)},Pue=function(n){Mi(e,n);function e(t){var i=n.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=$q,i.attr(t),i}return e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var t=0;t<this._children.length;t++){var i=this._children[t];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},e.prototype.updateTransform=function(){var t=this.innerTransformable;t?(t.updateTransform(),t.transform&&(this.transform=t.transform)):n.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(t){var i=this.innerTransformable;return i?i.getLocalTransform(t):n.prototype.getLocalTransform.call(this,t)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,OQe(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(t){n.prototype.addSelfToZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=t},e.prototype.removeSelfFromZr=function(t){n.prototype.removeSelfFromZr.call(this,t);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Qr(0,0,0,0),i=this._children,r=[],s=null,a=0;a<i.length;a++){var o=i[a],l=o.getBoundingRect(),u=o.getLocalTransform(r);u?(t.copy(l),t.applyTransform(u),s=s||t.clone(),s.union(t)):(s=s||l.clone(),s.union(l))}this._rect=s||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||$q},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,i){if(!i)return t;var r=i.rich,s=t.rich||r&&{};return Rn(t,i),r&&s?(this._mergeRich(s,r),t.rich=s):s&&(t.rich=s),t},e.prototype._mergeRich=function(t,i){for(var r=Gs(i),s=0;s<r.length;s++){var a=r[s];t[a]=t[a]||{},Rn(t[a],i[a])}},e.prototype.getAnimationStyleProps=function(){return DQe},e.prototype._getOrCreateChild=function(t){var i=this._children[this._childCursor];return(!i||!(i instanceof t))&&(i=new t),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},e.prototype._updatePlainTexts=function(){var t=this.style,i=t.font||$g,r=t.padding,s=Qq(t),a=XYe(s,t),o=D5(t),l=!!t.backgroundColor,u=a.outerHeight,c=a.outerWidth,d=a.contentWidth,f=a.lines,h=a.lineHeight,p=this._defaultStyle,m=t.x||0,g=t.y||0,v=t.align||p.align||"left",_=t.verticalAlign||p.verticalAlign||"top",y=m,b=Jy(g,a.contentHeight,_);if(o||r){var x=Lx(m,c,v),w=Jy(g,u,_);o&&this._renderBackground(t,t,x,w,c,u)}b+=h/2,r&&(y=Yq(m,v,r),_==="top"?b+=r[0]:_==="bottom"&&(b-=r[2]));for(var A=0,T=!1,C=Xq("fill"in t?t.fill:(T=!0,p.fill)),E=Kq("stroke"in t?t.stroke:!l&&(!p.autoStroke||T)?(A=Gq,p.stroke):null),I=t.textShadowBlur>0,k=t.width!=null&&(t.overflow==="truncate"||t.overflow==="break"||t.overflow==="breakAll"),O=a.calculatedLineHeight,U=0;U<f.length;U++){var z=this._getOrCreateChild(fO),L=z.createStyle();z.useStyle(L),L.text=f[U],L.x=y,L.y=b,v&&(L.textAlign=v),L.textBaseline="middle",L.opacity=t.opacity,L.strokeFirst=!0,I&&(L.shadowBlur=t.textShadowBlur||0,L.shadowColor=t.textShadowColor||"transparent",L.shadowOffsetX=t.textShadowOffsetX||0,L.shadowOffsetY=t.textShadowOffsetY||0),L.stroke=E,L.fill=C,E&&(L.lineWidth=t.lineWidth||A,L.lineDash=t.lineDash,L.lineDashOffset=t.lineDashOffset||0),L.font=i,qq(L,t),b+=h,k&&z.setBoundingRect(new Qr(Lx(L.x,t.width,L.textAlign),Jy(L.y,O,L.textBaseline),d,O))}},e.prototype._updateRichTexts=function(){var t=this.style,i=Qq(t),r=ZYe(i,t),s=r.width,a=r.outerWidth,o=r.outerHeight,l=t.padding,u=t.x||0,c=t.y||0,d=this._defaultStyle,f=t.align||d.align,h=t.verticalAlign||d.verticalAlign,p=Lx(u,a,f),m=Jy(c,o,h),g=p,v=m;l&&(g+=l[3],v+=l[0]);var _=g+s;D5(t)&&this._renderBackground(t,t,p,m,a,o);for(var y=!!t.backgroundColor,b=0;b<r.lines.length;b++){for(var x=r.lines[b],w=x.tokens,A=w.length,T=x.lineHeight,C=x.width,E=0,I=g,k=_,O=A-1,U=void 0;E<A&&(U=w[E],!U.align||U.align==="left");)this._placeToken(U,t,T,v,I,"left",y),C-=U.width,I+=U.width,E++;for(;O>=0&&(U=w[O],U.align==="right");)this._placeToken(U,t,T,v,k,"right",y),C-=U.width,k-=U.width,O--;for(I+=(s-(I-g)-(_-k)-C)/2;E<=O;)U=w[E],this._placeToken(U,t,T,v,I+U.width/2,"center",y),I+=U.width,E++;v+=T}},e.prototype._placeToken=function(t,i,r,s,a,o,l){var u=i.rich[t.styleName]||{};u.text=t.text;var c=t.verticalAlign,d=s+r/2;c==="top"?d=s+t.height/2:c==="bottom"&&(d=s+r-t.height/2);var f=!t.isLineHolder&&D5(u);f&&this._renderBackground(u,i,o==="right"?a-t.width:o==="center"?a-t.width/2:a,d-t.height/2,t.width,t.height);var h=!!u.backgroundColor,p=t.textPadding;p&&(a=Yq(a,o,p),d-=t.height/2-p[0]-t.innerHeight/2);var m=this._getOrCreateChild(fO),g=m.createStyle();m.useStyle(g);var v=this._defaultStyle,_=!1,y=0,b=Xq("fill"in u?u.fill:"fill"in i?i.fill:(_=!0,v.fill)),x=Kq("stroke"in u?u.stroke:"stroke"in i?i.stroke:!h&&!l&&(!v.autoStroke||_)?(y=Gq,v.stroke):null),w=u.textShadowBlur>0||i.textShadowBlur>0;g.text=t.text,g.x=a,g.y=d,w&&(g.shadowBlur=u.textShadowBlur||i.textShadowBlur||0,g.shadowColor=u.textShadowColor||i.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||i.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||i.textShadowOffsetY||0),g.textAlign=o,g.textBaseline="middle",g.font=t.font||$g,g.opacity=a2(u.opacity,i.opacity,1),qq(g,u),x&&(g.lineWidth=a2(u.lineWidth,i.lineWidth,y),g.lineDash=yr(u.lineDash,i.lineDash),g.lineDashOffset=i.lineDashOffset||0,g.stroke=x),b&&(g.fill=b);var A=t.contentWidth,T=t.contentHeight;m.setBoundingRect(new Qr(Lx(g.x,A,g.textAlign),Jy(g.y,T,g.textBaseline),A,T))},e.prototype._renderBackground=function(t,i,r,s,a,o){var l=t.backgroundColor,u=t.borderWidth,c=t.borderColor,d=l&&l.image,f=l&&!d,h=t.borderRadius,p=this,m,g;if(f||t.lineHeight||u&&c){m=this._getOrCreateChild(El),m.useStyle(m.createStyle()),m.style.fill=null;var v=m.shape;v.x=r,v.y=s,v.width=a,v.height=o,v.r=h,m.dirtyShape()}if(f){var _=m.style;_.fill=l||null,_.fillOpacity=yr(t.fillOpacity,1)}else if(d){g=this._getOrCreateChild(Mb),g.onload=function(){p.dirtyStyle()};var y=g.style;y.image=l.image,y.x=r,y.y=s,y.width=a,y.height=o}if(u&&c){var _=m.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=yr(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,m.strokeContainThreshold=0,m.hasFill()&&m.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var b=(m||g).style;b.shadowBlur=t.shadowBlur||0,b.shadowColor=t.shadowColor||"transparent",b.shadowOffsetX=t.shadowOffsetX||0,b.shadowOffsetY=t.shadowOffsetY||0,b.opacity=a2(t.opacity,i.opacity,1)},e.makeFont=function(t){var i="";return LQe(t)&&(i=[t.fontStyle,t.fontWeight,kQe(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),i&&Rd(i)||t.textFont||t.font},e}(BT),RQe={left:!0,right:1,center:1},PQe={top:1,bottom:1,middle:1},Wq=["fontStyle","fontWeight","fontSize","fontFamily"];function kQe(n){return typeof n=="string"&&(n.indexOf("px")!==-1||n.indexOf("rem")!==-1||n.indexOf("em")!==-1)?n:isNaN(+n)?w9+"px":n+"px"}function qq(n,e){for(var t=0;t<Wq.length;t++){var i=Wq[t],r=e[i];r!=null&&(n[i]=r)}}function LQe(n){return n.fontSize!=null||n.fontFamily||n.fontWeight}function OQe(n){return jq(n),Nt(n.rich,jq),n}function jq(n){if(n){n.font=Pue.makeFont(n);var e=n.align;e==="middle"&&(e="center"),n.align=e==null||RQe[e]?e:"left";var t=n.verticalAlign;t==="center"&&(t="middle"),n.verticalAlign=t==null||PQe[t]?t:"top";var i=n.padding;i&&(n.padding=Nle(n.padding))}}function Kq(n,e){return n==null||e<=0||n==="transparent"||n==="none"?null:n.image||n.colorStops?"#000":n}function Xq(n){return n==null||n==="none"?null:n.image||n.colorStops?"#000":n}function Yq(n,e,t){return e==="right"?n-t[1]:e==="center"?n+t[3]/2-t[1]/2:n+t[3]}function Qq(n){var e=n.text;return e!=null&&(e+=""),e}function D5(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}const nl=Pue;var Rs=Ua(),NQe=function(n,e,t,i){if(i){var r=Rs(i);r.dataIndex=t,r.dataType=e,r.seriesIndex=n,i.type==="group"&&i.traverse(function(s){var a=Rs(s);a.seriesIndex=n,a.dataIndex=t,a.dataType=e})}},Zq=1,Jq={},kue=Ua(),H9=Ua(),Lue=0,V9=1,$9=2,Qd=["emphasis","blur","select"],E4=["normal","emphasis","blur","select"],BQe=10,FQe=9,Eg="highlight",VM="downplay",d2="select",$M="unselect",f2="toggleSelect";function Jv(n){return n!=null&&n!=="none"}var ej=new LT(100);function tj(n){if(ki(n)){var e=ej.get(n);return e||(e=bq(n,-.1),ej.put(n,e)),e}else if(FD(n)){var t=Rn({},n);return t.colorStops=Sr(n.colorStops,function(i){return{offset:i.offset,color:bq(i.color,-.1)}}),t}return n}function GD(n,e,t){n.onHoverStateChange&&(n.hoverState||0)!==t&&n.onHoverStateChange(e),n.hoverState=t}function Oue(n){GD(n,"emphasis",$9)}function Nue(n){n.hoverState===$9&&GD(n,"normal",Lue)}function G9(n){GD(n,"blur",V9)}function Bue(n){n.hoverState===V9&&GD(n,"normal",Lue)}function UQe(n){n.selected=!0}function zQe(n){n.selected=!1}function nj(n,e,t){e(n,t)}function Eh(n,e,t){nj(n,e,t),n.isGroup&&n.traverse(function(i){nj(i,e,t)})}function HQe(n,e,t,i){for(var r=n.style,s={},a=0;a<e.length;a++){var o=e[a],l=r[o];s[o]=l??(i&&i[o])}for(var a=0;a<n.animators.length;a++){var u=n.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(t)<0&&u.targetName==="style"&&u.saveTo(s,e)}return s}function VQe(n,e,t,i){var r=t&&ls(t,"select")>=0,s=!1;if(n instanceof ds){var a=kue(n),o=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(Jv(o)||Jv(l)){i=i||{};var u=i.style||{};u.fill==="inherit"?(s=!0,i=Rn({},i),u=Rn({},u),u.fill=o):!Jv(u.fill)&&Jv(o)?(s=!0,i=Rn({},i),u=Rn({},u),u.fill=tj(o)):!Jv(u.stroke)&&Jv(l)&&(s||(i=Rn({},i),u=Rn({},u)),u.stroke=tj(l)),i.style=u}}if(i&&i.z2==null){s||(i=Rn({},i));var c=n.z2EmphasisLift;i.z2=n.z2+(c??BQe)}return i}function $Qe(n,e,t){if(t&&t.z2==null){t=Rn({},t);var i=n.z2SelectLift;t.z2=n.z2+(i??FQe)}return t}function GQe(n,e,t){var i=ls(n.currentStates,e)>=0,r=n.style.opacity,s=i?null:HQe(n,["opacity"],e,{opacity:1});t=t||{};var a=t.style||{};return a.opacity==null&&(t=Rn({},t),a=Rn({opacity:i?r:s.opacity*.1},a),t.style=a),t}function R5(n,e){var t=this.states[n];if(this.style){if(n==="emphasis")return VQe(this,n,e,t);if(n==="blur")return GQe(this,n,t);if(n==="select")return $Qe(this,n,t)}return t}function WQe(n){n.stateProxy=R5;var e=n.getTextContent(),t=n.getTextGuideLine();e&&(e.stateProxy=R5),t&&(t.stateProxy=R5)}function ij(n,e){!Hue(n,e)&&!n.__highByOuter&&Eh(n,Oue)}function rj(n,e){!Hue(n,e)&&!n.__highByOuter&&Eh(n,Nue)}function hO(n,e){n.__highByOuter|=1<<(e||0),Eh(n,Oue)}function pO(n,e){!(n.__highByOuter&=~(1<<(e||0)))&&Eh(n,Nue)}function qQe(n){Eh(n,G9)}function Fue(n){Eh(n,Bue)}function Uue(n){Eh(n,UQe)}function zue(n){Eh(n,zQe)}function Hue(n,e){return n.__highDownSilentOnTouch&&e.zrByTouch}function Vue(n){var e=n.getModel(),t=[],i=[];e.eachComponent(function(r,s){var a=H9(s),o=r==="series",l=o?n.getViewOfSeriesModel(s):n.getViewOfComponentModel(s);!o&&i.push(l),a.isBlured&&(l.group.traverse(function(u){Bue(u)}),o&&t.push(s)),a.isBlured=!1}),Nt(i,function(r){r&&r.toggleBlurSeries&&r.toggleBlurSeries(t,!1,e)})}function mO(n,e,t,i){var r=i.getModel();t=t||"coordinateSystem";function s(u,c){for(var d=0;d<c.length;d++){var f=u.getItemGraphicEl(c[d]);f&&Fue(f)}}if(n!=null&&!(!e||e==="none")){var a=r.getSeriesByIndex(n),o=a.coordinateSystem;o&&o.master&&(o=o.master);var l=[];r.eachSeries(function(u){var c=a===u,d=u.coordinateSystem;d&&d.master&&(d=d.master);var f=d&&o?d===o:c;if(!(t==="series"&&!c||t==="coordinateSystem"&&!f||e==="series"&&c)){var h=i.getViewOfSeriesModel(u);if(h.group.traverse(function(g){g.__highByOuter&&c&&e==="self"||G9(g)}),kl(e))s(u.getData(),e);else if(Ni(e))for(var p=Gs(e),m=0;m<p.length;m++)s(u.getData(p[m]),e[p[m]]);l.push(u),H9(u).isBlured=!0}}),r.eachComponent(function(u,c){if(u!=="series"){var d=i.getViewOfComponentModel(c);d&&d.toggleBlurSeries&&d.toggleBlurSeries(l,!0,r)}})}}function gO(n,e,t){if(!(n==null||e==null)){var i=t.getModel().getComponent(n,e);if(i){H9(i).isBlured=!0;var r=t.getViewOfComponentModel(i);!r||!r.focusBlurEnabled||r.group.traverse(function(s){G9(s)})}}}function jQe(n,e,t){var i=n.seriesIndex,r=n.getData(e.dataType);if(r){var s=OT(r,e);s=(vi(s)?s[0]:s)||0;var a=r.getItemGraphicEl(s);if(!a)for(var o=r.count(),l=0;!a&&l<o;)a=r.getItemGraphicEl(l++);if(a){var u=Rs(a);mO(i,u.focus,u.blurScope,t)}else{var c=n.get(["emphasis","focus"]),d=n.get(["emphasis","blurScope"]);c!=null&&mO(i,c,d,t)}}}function W9(n,e,t,i){var r={focusSelf:!1,dispatchers:null};if(n==null||n==="series"||e==null||t==null)return r;var s=i.getModel().getComponent(n,e);if(!s)return r;var a=i.getViewOfComponentModel(s);if(!a||!a.findHighDownDispatchers)return r;for(var o=a.findHighDownDispatchers(t),l,u=0;u<o.length;u++)if(Rs(o[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:o}}function KQe(n,e,t){var i=Rs(n),r=W9(i.componentMainType,i.componentIndex,i.componentHighDownName,t),s=r.dispatchers,a=r.focusSelf;s?(a&&gO(i.componentMainType,i.componentIndex,t),Nt(s,function(o){return ij(o,e)})):(mO(i.seriesIndex,i.focus,i.blurScope,t),i.focus==="self"&&gO(i.componentMainType,i.componentIndex,t),ij(n,e))}function XQe(n,e,t){Vue(t);var i=Rs(n),r=W9(i.componentMainType,i.componentIndex,i.componentHighDownName,t).dispatchers;r?Nt(r,function(s){return rj(s,e)}):rj(n,e)}function YQe(n,e,t){if(_O(e)){var i=e.dataType,r=n.getData(i),s=OT(r,e);vi(s)||(s=[s]),n[e.type===f2?"toggleSelect":e.type===d2?"select":"unselect"](s,i)}}function sj(n){var e=n.getAllData();Nt(e,function(t){var i=t.data,r=t.type;i.eachItemGraphicEl(function(s,a){n.isSelected(a,r)?Uue(s):zue(s)})})}function QQe(n){var e=[];return n.eachSeries(function(t){var i=t.getAllData();Nt(i,function(r){r.data;var s=r.type,a=t.getSelectedDataIndices();if(a.length>0){var o={dataIndex:a,seriesIndex:t.seriesIndex};s!=null&&(o.dataType=s),e.push(o)}})}),e}function vO(n,e,t){$ue(n,!0),Eh(n,WQe),eZe(n,e,t)}function ZQe(n){$ue(n,!1)}function JQe(n,e,t,i){i?ZQe(n):vO(n,e,t)}function eZe(n,e,t){var i=Rs(n);e!=null?(i.focus=e,i.blurScope=t):i.focus&&(i.focus=null)}var aj=["emphasis","blur","select"],tZe={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function nZe(n,e,t,i){t=t||"itemStyle";for(var r=0;r<aj.length;r++){var s=aj[r],a=e.getModel([s,t]),o=n.ensureState(s);o.style=i?i(a):a[tZe[t]]()}}function $ue(n,e){var t=e===!1,i=n;n.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=n.highDownSilentOnTouch),(!t||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!t)}function yO(n){return!!(n&&n.__highDownDispatcher)}function iZe(n){var e=Jq[n];return e==null&&Zq<=32&&(e=Jq[n]=Zq++),e}function _O(n){var e=n.type;return e===d2||e===$M||e===f2}function oj(n){var e=n.type;return e===Eg||e===VM}function rZe(n){var e=kue(n);e.normalFill=n.style.fill,e.normalStroke=n.style.stroke;var t=n.states.select||{};e.selectFill=t.style&&t.style.fill||null,e.selectStroke=t.style&&t.style.stroke||null}var ey=Gg.CMD,sZe=[[],[],[]],lj=Math.sqrt,aZe=Math.atan2;function oZe(n,e){if(e){var t=n.data,i=n.len(),r,s,a,o,l,u,c=ey.M,d=ey.C,f=ey.L,h=ey.R,p=ey.A,m=ey.Q;for(a=0,o=0;a<i;){switch(r=t[a++],o=a,s=0,r){case c:s=1;break;case f:s=1;break;case d:s=3;break;case m:s=2;break;case p:var g=e[4],v=e[5],_=lj(e[0]*e[0]+e[1]*e[1]),y=lj(e[2]*e[2]+e[3]*e[3]),b=aZe(-e[1]/y,e[0]/_);t[a]*=_,t[a++]+=g,t[a]*=y,t[a++]+=v,t[a++]*=_,t[a++]*=y,t[a++]+=b,t[a++]+=b,a+=2,o=a;break;case h:u[0]=t[a++],u[1]=t[a++],zd(u,u,e),t[o++]=u[0],t[o++]=u[1],u[0]+=t[a++],u[1]+=t[a++],zd(u,u,e),t[o++]=u[0],t[o++]=u[1]}for(l=0;l<s;l++){var x=sZe[l];x[0]=t[a++],x[1]=t[a++],zd(x,x,e),t[o++]=x[0],t[o++]=x[1]}}n.increaseVersion()}}var P5=Math.sqrt,MA=Math.sin,IA=Math.cos,WS=Math.PI;function uj(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function bO(n,e){return(n[0]*e[0]+n[1]*e[1])/(uj(n)*uj(e))}function cj(n,e){return(n[0]*e[1]<n[1]*e[0]?-1:1)*Math.acos(bO(n,e))}function dj(n,e,t,i,r,s,a,o,l,u,c){var d=l*(WS/180),f=IA(d)*(n-t)/2+MA(d)*(e-i)/2,h=-1*MA(d)*(n-t)/2+IA(d)*(e-i)/2,p=f*f/(a*a)+h*h/(o*o);p>1&&(a*=P5(p),o*=P5(p));var m=(r===s?-1:1)*P5((a*a*(o*o)-a*a*(h*h)-o*o*(f*f))/(a*a*(h*h)+o*o*(f*f)))||0,g=m*a*h/o,v=m*-o*f/a,_=(n+t)/2+IA(d)*g-MA(d)*v,y=(e+i)/2+MA(d)*g+IA(d)*v,b=cj([1,0],[(f-g)/a,(h-v)/o]),x=[(f-g)/a,(h-v)/o],w=[(-1*f-g)/a,(-1*h-v)/o],A=cj(x,w);if(bO(x,w)<=-1&&(A=WS),bO(x,w)>=1&&(A=0),A<0){var T=Math.round(A/WS*1e6)/1e6;A=WS*2+T%2*WS}c.addData(u,_,y,a,o,b,A,d,s)}var lZe=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,uZe=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function cZe(n){var e=new Gg;if(!n)return e;var t=0,i=0,r=t,s=i,a,o=Gg.CMD,l=n.match(lZe);if(!l)return e;for(var u=0;u<l.length;u++){for(var c=l[u],d=c.charAt(0),f=void 0,h=c.match(uZe)||[],p=h.length,m=0;m<p;m++)h[m]=parseFloat(h[m]);for(var g=0;g<p;){var v=void 0,_=void 0,y=void 0,b=void 0,x=void 0,w=void 0,A=void 0,T=t,C=i,E=void 0,I=void 0;switch(d){case"l":t+=h[g++],i+=h[g++],f=o.L,e.addData(f,t,i);break;case"L":t=h[g++],i=h[g++],f=o.L,e.addData(f,t,i);break;case"m":t+=h[g++],i+=h[g++],f=o.M,e.addData(f,t,i),r=t,s=i,d="l";break;case"M":t=h[g++],i=h[g++],f=o.M,e.addData(f,t,i),r=t,s=i,d="L";break;case"h":t+=h[g++],f=o.L,e.addData(f,t,i);break;case"H":t=h[g++],f=o.L,e.addData(f,t,i);break;case"v":i+=h[g++],f=o.L,e.addData(f,t,i);break;case"V":i=h[g++],f=o.L,e.addData(f,t,i);break;case"C":f=o.C,e.addData(f,h[g++],h[g++],h[g++],h[g++],h[g++],h[g++]),t=h[g-2],i=h[g-1];break;case"c":f=o.C,e.addData(f,h[g++]+t,h[g++]+i,h[g++]+t,h[g++]+i,h[g++]+t,h[g++]+i),t+=h[g-2],i+=h[g-1];break;case"S":v=t,_=i,E=e.len(),I=e.data,a===o.C&&(v+=t-I[E-4],_+=i-I[E-3]),f=o.C,T=h[g++],C=h[g++],t=h[g++],i=h[g++],e.addData(f,v,_,T,C,t,i);break;case"s":v=t,_=i,E=e.len(),I=e.data,a===o.C&&(v+=t-I[E-4],_+=i-I[E-3]),f=o.C,T=t+h[g++],C=i+h[g++],t+=h[g++],i+=h[g++],e.addData(f,v,_,T,C,t,i);break;case"Q":T=h[g++],C=h[g++],t=h[g++],i=h[g++],f=o.Q,e.addData(f,T,C,t,i);break;case"q":T=h[g++]+t,C=h[g++]+i,t+=h[g++],i+=h[g++],f=o.Q,e.addData(f,T,C,t,i);break;case"T":v=t,_=i,E=e.len(),I=e.data,a===o.Q&&(v+=t-I[E-4],_+=i-I[E-3]),t=h[g++],i=h[g++],f=o.Q,e.addData(f,v,_,t,i);break;case"t":v=t,_=i,E=e.len(),I=e.data,a===o.Q&&(v+=t-I[E-4],_+=i-I[E-3]),t+=h[g++],i+=h[g++],f=o.Q,e.addData(f,v,_,t,i);break;case"A":y=h[g++],b=h[g++],x=h[g++],w=h[g++],A=h[g++],T=t,C=i,t=h[g++],i=h[g++],f=o.A,dj(T,C,t,i,w,A,y,b,x,f,e);break;case"a":y=h[g++],b=h[g++],x=h[g++],w=h[g++],A=h[g++],T=t,C=i,t+=h[g++],i+=h[g++],f=o.A,dj(T,C,t,i,w,A,y,b,x,f,e);break}}(d==="z"||d==="Z")&&(f=o.Z,e.addData(f),t=r,i=s),a=f}return e.toStatic(),e}var Gue=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.applyTransform=function(t){},e}(ds);function Wue(n){return n.setData!=null}function que(n,e){var t=cZe(n),i=Rn({},e);return i.buildPath=function(r){if(Wue(r)){r.setData(t.data);var s=r.getContext();s&&r.rebuildPath(s,1)}else{var s=r;t.rebuildPath(s,1)}},i.applyTransform=function(r){oZe(t,r),this.dirtyShape()},i}function dZe(n,e){return new Gue(que(n,e))}function fZe(n,e){var t=que(n,e),i=function(r){Mi(s,r);function s(a){var o=r.call(this,a)||this;return o.applyTransform=t.applyTransform,o.buildPath=t.buildPath,o}return s}(Gue);return i}function hZe(n,e){for(var t=[],i=n.length,r=0;r<i;r++){var s=n[r];t.push(s.getUpdatedPathProxy(!0))}var a=new ds(e);return a.createPathProxy(),a.buildPath=function(o){if(Wue(o)){o.appendPath(t);var l=o.getContext();l&&o.rebuildPath(l,1)}},a}var pZe=function(){function n(){this.cx=0,this.cy=0,this.r=0}return n}(),jue=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new pZe},e.prototype.buildPath=function(t,i){t.moveTo(i.cx+i.r,i.cy),t.arc(i.cx,i.cy,i.r,0,Math.PI*2)},e}(ds);jue.prototype.type="circle";const q9=jue;var mZe=function(){function n(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return n}(),Kue=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new mZe},e.prototype.buildPath=function(t,i){var r=.5522848,s=i.cx,a=i.cy,o=i.rx,l=i.ry,u=o*r,c=l*r;t.moveTo(s-o,a),t.bezierCurveTo(s-o,a-c,s-u,a-l,s,a-l),t.bezierCurveTo(s+u,a-l,s+o,a-c,s+o,a),t.bezierCurveTo(s+o,a+c,s+u,a+l,s,a+l),t.bezierCurveTo(s-u,a+l,s-o,a+c,s-o,a),t.closePath()},e}(ds);Kue.prototype.type="ellipse";const Xue=Kue;var Yue=Math.PI,k5=Yue*2,hm=Math.sin,ty=Math.cos,gZe=Math.acos,so=Math.atan2,fj=Math.abs,h2=Math.sqrt,Ox=Math.max,hd=Math.min,Mc=1e-4;function vZe(n,e,t,i,r,s,a,o){var l=t-n,u=i-e,c=a-r,d=o-s,f=d*l-c*u;if(!(f*f<Mc))return f=(c*(e-s)-d*(n-r))/f,[n+f*l,e+f*u]}function DA(n,e,t,i,r,s,a){var o=n-t,l=e-i,u=(a?s:-s)/h2(o*o+l*l),c=u*l,d=-u*o,f=n+c,h=e+d,p=t+c,m=i+d,g=(f+p)/2,v=(h+m)/2,_=p-f,y=m-h,b=_*_+y*y,x=r-s,w=f*m-p*h,A=(y<0?-1:1)*h2(Ox(0,x*x*b-w*w)),T=(w*y-_*A)/b,C=(-w*_-y*A)/b,E=(w*y+_*A)/b,I=(-w*_+y*A)/b,k=T-g,O=C-v,U=E-g,z=I-v;return k*k+O*O>U*U+z*z&&(T=E,C=I),{cx:T,cy:C,x0:-c,y0:-d,x1:T*(r/x-1),y1:C*(r/x-1)}}function yZe(n){var e;if(vi(n)){var t=n.length;if(!t)return n;t===1?e=[n[0],n[0],0,0]:t===2?e=[n[0],n[0],n[1],n[1]]:t===3?e=n.concat(n[2]):e=n}else e=[n,n,n,n];return e}function _Ze(n,e){var t,i=Ox(e.r,0),r=Ox(e.r0||0,0),s=i>0,a=r>0;if(!(!s&&!a)){if(s||(i=r,r=0),r>i){var o=i;i=r,r=o}var l=e.startAngle,u=e.endAngle;if(!(isNaN(l)||isNaN(u))){var c=e.cx,d=e.cy,f=!!e.clockwise,h=fj(u-l),p=h>k5&&h%k5;if(p>Mc&&(h=p),!(i>Mc))n.moveTo(c,d);else if(h>k5-Mc)n.moveTo(c+i*ty(l),d+i*hm(l)),n.arc(c,d,i,l,u,!f),r>Mc&&(n.moveTo(c+r*ty(u),d+r*hm(u)),n.arc(c,d,r,u,l,f));else{var m=void 0,g=void 0,v=void 0,_=void 0,y=void 0,b=void 0,x=void 0,w=void 0,A=void 0,T=void 0,C=void 0,E=void 0,I=void 0,k=void 0,O=void 0,U=void 0,z=i*ty(l),L=i*hm(l),G=r*ty(u),H=r*hm(u),F=h>Mc;if(F){var X=e.cornerRadius;X&&(t=yZe(X),m=t[0],g=t[1],v=t[2],_=t[3]);var te=fj(i-r)/2;if(y=hd(te,v),b=hd(te,_),x=hd(te,m),w=hd(te,g),C=A=Ox(y,b),E=T=Ox(x,w),(A>Mc||T>Mc)&&(I=i*ty(u),k=i*hm(u),O=r*ty(l),U=r*hm(l),h<Yue)){var re=vZe(z,L,O,U,I,k,G,H);if(re){var ie=z-re[0],le=L-re[1],ge=I-re[0],pe=k-re[1],ye=1/hm(gZe((ie*ge+le*pe)/(h2(ie*ie+le*le)*h2(ge*ge+pe*pe)))/2),Oe=h2(re[0]*re[0]+re[1]*re[1]);C=hd(A,(i-Oe)/(ye+1)),E=hd(T,(r-Oe)/(ye-1))}}}if(!F)n.moveTo(c+z,d+L);else if(C>Mc){var Be=hd(v,C),Ye=hd(_,C),Ze=DA(O,U,z,L,i,Be,f),Q=DA(I,k,G,H,i,Ye,f);n.moveTo(c+Ze.cx+Ze.x0,d+Ze.cy+Ze.y0),C<A&&Be===Ye?n.arc(c+Ze.cx,d+Ze.cy,C,so(Ze.y0,Ze.x0),so(Q.y0,Q.x0),!f):(Be>0&&n.arc(c+Ze.cx,d+Ze.cy,Be,so(Ze.y0,Ze.x0),so(Ze.y1,Ze.x1),!f),n.arc(c,d,i,so(Ze.cy+Ze.y1,Ze.cx+Ze.x1),so(Q.cy+Q.y1,Q.cx+Q.x1),!f),Ye>0&&n.arc(c+Q.cx,d+Q.cy,Ye,so(Q.y1,Q.x1),so(Q.y0,Q.x0),!f))}else n.moveTo(c+z,d+L),n.arc(c,d,i,l,u,!f);if(!(r>Mc)||!F)n.lineTo(c+G,d+H);else if(E>Mc){var Be=hd(m,E),Ye=hd(g,E),Ze=DA(G,H,I,k,r,-Ye,f),Q=DA(z,L,O,U,r,-Be,f);n.lineTo(c+Ze.cx+Ze.x0,d+Ze.cy+Ze.y0),E<T&&Be===Ye?n.arc(c+Ze.cx,d+Ze.cy,E,so(Ze.y0,Ze.x0),so(Q.y0,Q.x0),!f):(Ye>0&&n.arc(c+Ze.cx,d+Ze.cy,Ye,so(Ze.y0,Ze.x0),so(Ze.y1,Ze.x1),!f),n.arc(c,d,r,so(Ze.cy+Ze.y1,Ze.cx+Ze.x1),so(Q.cy+Q.y1,Q.cx+Q.x1),f),Be>0&&n.arc(c+Q.cx,d+Q.cy,Be,so(Q.y1,Q.x1),so(Q.y0,Q.x0),!f))}else n.lineTo(c+G,d+H),n.arc(c,d,r,u,l,f)}n.closePath()}}}var bZe=function(){function n(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return n}(),Que=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new bZe},e.prototype.buildPath=function(t,i){_Ze(t,i)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(ds);Que.prototype.type="sector";const WD=Que;var SZe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return n}(),Zue=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new SZe},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.PI*2;t.moveTo(r+i.r,s),t.arc(r,s,i.r,0,a,!1),t.moveTo(r+i.r0,s),t.arc(r,s,i.r0,0,a,!0)},e}(ds);Zue.prototype.type="ring";const Jue=Zue;function xZe(n,e,t,i){var r=[],s=[],a=[],o=[],l,u,c,d;if(i){c=[1/0,1/0],d=[-1/0,-1/0];for(var f=0,h=n.length;f<h;f++)p1(c,c,n[f]),m1(d,d,n[f]);p1(c,c,i[0]),m1(d,d,i[1])}for(var f=0,h=n.length;f<h;f++){var p=n[f];if(t)l=n[f?f-1:h-1],u=n[(f+1)%h];else if(f===0||f===h-1){r.push($Ke(n[f]));continue}else l=n[f-1],u=n[f+1];GKe(s,u,l),YP(s,s,e);var m=q8(p,l),g=q8(p,u),v=m+g;v!==0&&(m/=v,g/=v),YP(a,s,-m),YP(o,s,g);var _=rq([],p,a),y=rq([],p,o);i&&(m1(_,_,c),p1(_,_,d),m1(y,y,c),p1(y,y,d)),r.push(_),r.push(y)}return t&&r.push(r.shift()),r}function ece(n,e,t){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i){var s=xZe(r,i,t,e.smoothConstraint);n.moveTo(r[0][0],r[0][1]);for(var a=r.length,o=0;o<(t?a:a-1);o++){var l=s[o*2],u=s[o*2+1],c=r[(o+1)%a];n.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{n.moveTo(r[0][0],r[0][1]);for(var o=1,d=r.length;o<d;o++)n.lineTo(r[o][0],r[o][1])}t&&n.closePath()}}var wZe=function(){function n(){this.points=null,this.smooth=0,this.smoothConstraint=null}return n}(),tce=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new wZe},e.prototype.buildPath=function(t,i){ece(t,i,!0)},e}(ds);tce.prototype.type="polygon";const nce=tce;var TZe=function(){function n(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return n}(),ice=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new TZe},e.prototype.buildPath=function(t,i){ece(t,i,!1)},e}(ds);ice.prototype.type="polyline";const qD=ice;var CZe={},AZe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return n}(),rce=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new AZe},e.prototype.buildPath=function(t,i){var r,s,a,o;if(this.subPixelOptimize){var l=Iue(CZe,i,this.style);r=l.x1,s=l.y1,a=l.x2,o=l.y2}else r=i.x1,s=i.y1,a=i.x2,o=i.y2;var u=i.percent;u!==0&&(t.moveTo(r,s),u<1&&(a=r*(1-u)+a*u,o=s*(1-u)+o*u),t.lineTo(a,o))},e.prototype.pointAt=function(t){var i=this.shape;return[i.x1*(1-t)+i.x2*t,i.y1*(1-t)+i.y2*t]},e}(ds);rce.prototype.type="line";const FT=rce;var cl=[],EZe=function(){function n(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return n}();function hj(n,e,t){var i=n.cpx2,r=n.cpy2;return i!=null||r!=null?[(t?mq:qa)(n.x1,n.cpx1,n.cpx2,n.x2,e),(t?mq:qa)(n.y1,n.cpy1,n.cpy2,n.y2,e)]:[(t?gq:mo)(n.x1,n.cpx1,n.x2,e),(t?gq:mo)(n.y1,n.cpy1,n.y2,e)]}var sce=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new EZe},e.prototype.buildPath=function(t,i){var r=i.x1,s=i.y1,a=i.x2,o=i.y2,l=i.cpx1,u=i.cpy1,c=i.cpx2,d=i.cpy2,f=i.percent;f!==0&&(t.moveTo(r,s),c==null||d==null?(f<1&&(x4(r,l,a,f,cl),l=cl[1],a=cl[2],x4(s,u,o,f,cl),u=cl[1],o=cl[2]),t.quadraticCurveTo(l,u,a,o)):(f<1&&(S4(r,l,c,a,f,cl),l=cl[1],c=cl[2],a=cl[3],S4(s,u,d,o,f,cl),u=cl[1],d=cl[2],o=cl[3]),t.bezierCurveTo(l,u,c,d,a,o)))},e.prototype.pointAt=function(t){return hj(this.shape,t,!1)},e.prototype.tangentAt=function(t){var i=hj(this.shape,t,!0);return jKe(i,i)},e}(ds);sce.prototype.type="bezier-curve";const ace=sce;var MZe=function(){function n(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return n}(),oce=function(n){Mi(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new MZe},e.prototype.buildPath=function(t,i){var r=i.cx,s=i.cy,a=Math.max(i.r,0),o=i.startAngle,l=i.endAngle,u=i.clockwise,c=Math.cos(o),d=Math.sin(o);t.moveTo(c*a+r,d*a+s),t.arc(r,s,a,o,l,!u)},e}(ds);oce.prototype.type="arc";const j9=oce;var IZe=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type="compound",t}return e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,i=this.shapeChanged(),r=0;r<t.length;r++)i=i||t[r].shapeChanged();i&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],i=this.getGlobalScale(),r=0;r<t.length;r++)t[r].path||t[r].createPathProxy(),t[r].path.setScale(i[0],i[1],t[r].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,i){for(var r=i.paths||[],s=0;s<r.length;s++)r[s].buildPath(t,r[s].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],i=0;i<t.length;i++)t[i].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ds.prototype.getBoundingRect.call(this)},e}(ds);const DZe=IZe;var RZe=function(){function n(e){this.colorStops=e||[]}return n.prototype.addColorStop=function(e,t){this.colorStops.push({offset:e,color:t})},n}();const lce=RZe;var PZe=function(n){Mi(e,n);function e(t,i,r,s,a,o){var l=n.call(this,a)||this;return l.x=t??0,l.y=i??0,l.x2=r??1,l.y2=s??0,l.type="linear",l.global=o||!1,l}return e}(lce);const kZe=PZe;var LZe=function(n){Mi(e,n);function e(t,i,r,s,a){var o=n.call(this,s)||this;return o.x=t??.5,o.y=i??.5,o.r=r??.5,o.type="radial",o.global=a||!1,o}return e}(lce);const OZe=LZe;var pm=[0,0],mm=[0,0],RA=new Fi,PA=new Fi,NZe=function(){function n(e,t){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new Fi;for(var i=0;i<2;i++)this._axes[i]=new Fi;e&&this.fromBoundingRect(e,t)}return n.prototype.fromBoundingRect=function(e,t){var i=this._corners,r=this._axes,s=e.x,a=e.y,o=s+e.width,l=a+e.height;if(i[0].set(s,a),i[1].set(o,a),i[2].set(o,l),i[3].set(s,l),t)for(var u=0;u<4;u++)i[u].transform(t);Fi.sub(r[0],i[1],i[0]),Fi.sub(r[1],i[3],i[0]),r[0].normalize(),r[1].normalize();for(var u=0;u<2;u++)this._origin[u]=r[u].dot(i[0])},n.prototype.intersect=function(e,t){var i=!0,r=!t;return RA.set(1/0,1/0),PA.set(0,0),!this._intersectCheckOneSide(this,e,RA,PA,r,1)&&(i=!1,r)||!this._intersectCheckOneSide(e,this,RA,PA,r,-1)&&(i=!1,r)||r||Fi.copy(t,i?RA:PA),i},n.prototype._intersectCheckOneSide=function(e,t,i,r,s,a){for(var o=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,e._corners,pm),this._getProjMinMaxOnAxis(l,t._corners,mm),pm[1]<mm[0]||pm[0]>mm[1]){if(o=!1,s)return o;var c=Math.abs(mm[0]-pm[1]),d=Math.abs(pm[0]-mm[1]);Math.min(c,d)>r.len()&&(c<d?Fi.scale(r,u,-c*a):Fi.scale(r,u,d*a))}else if(i){var c=Math.abs(mm[0]-pm[1]),d=Math.abs(pm[0]-mm[1]);Math.min(c,d)<i.len()&&(c<d?Fi.scale(i,u,c*a):Fi.scale(i,u,-d*a))}}return o},n.prototype._getProjMinMaxOnAxis=function(e,t,i){for(var r=this._axes[e],s=this._origin,a=t[0].dot(r)+s[e],o=a,l=a,u=1;u<t.length;u++){var c=t[u].dot(r)+s[e];o=Math.min(c,o),l=Math.max(c,l)}i[0]=o,i[1]=l},n}();const M4=NZe;var BZe=[],FZe=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.notClear=!0,t.incremental=!0,t._displayables=[],t._temporaryDisplayables=[],t._cursor=0,t}return e.prototype.traverse=function(t,i){t.call(i,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,i){i?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,i){i=i||!1;for(var r=0;r<t.length;r++)this.addDisplayable(t[r],i)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var i=this._cursor;i<this._displayables.length;i++)t&&t(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)t&&t(this._temporaryDisplayables[i])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var i=this._displayables[t];i.parent=this,i.update(),i.parent=null}for(var t=0;t<this._temporaryDisplayables.length;t++){var i=this._temporaryDisplayables[t];i.parent=this,i.update(),i.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Qr(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var r=this._displayables[i],s=r.getBoundingRect().clone();r.needLocalTransform()&&s.applyTransform(r.getLocalTransform(BZe)),t.union(s)}this._rect=t}return this._rect},e.prototype.contain=function(t,i){var r=this.transformCoordToLocal(t,i),s=this.getBoundingRect();if(s.contain(r[0],r[1]))for(var a=0;a<this._displayables.length;a++){var o=this._displayables[a];if(o.contain(t,i))return!0}return!1},e}(BT);const UZe=FZe;var zZe=Ua();function HZe(n,e,t,i,r){var s;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();s=a&&a.animation}var o=e&&e.isAnimationEnabled(),l=n==="update";if(o){var u=void 0,c=void 0,d=void 0;i?(u=yr(i.duration,200),c=yr(i.easing,"cubicOut"),d=0):(u=e.getShallow(l?"animationDurationUpdate":"animationDuration"),c=e.getShallow(l?"animationEasingUpdate":"animationEasing"),d=e.getShallow(l?"animationDelayUpdate":"animationDelay")),s&&(s.duration!=null&&(u=s.duration),s.easing!=null&&(c=s.easing),s.delay!=null&&(d=s.delay)),$r(d)&&(d=d(t,r)),$r(u)&&(u=u(t));var f={duration:u||0,delay:d,easing:c};return f}else return null}function K9(n,e,t,i,r,s,a){var o=!1,l;$r(r)?(a=s,s=r,r=null):Ni(r)&&(s=r.cb,a=r.during,o=r.isFrom,l=r.removeOpt,r=r.dataIndex);var u=n==="leave";u||e.stopAnimation("leave");var c=HZe(n,i,r,u?l||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null);if(c&&c.duration>0){var d=c.duration,f=c.delay,h=c.easing,p={duration:d,delay:f||0,easing:h,done:s,force:!!s||!!a,setToFinal:!u,scope:n,during:a};o?e.animateFrom(t,p):e.animateTo(t,p)}else e.stopAnimation(),!o&&e.attr(t),a&&a(1),s&&s()}function B_(n,e,t,i,r,s){K9("update",n,e,t,i,r,s)}function GM(n,e,t,i,r,s){K9("enter",n,e,t,i,r,s)}function p2(n){if(!n.__zr)return!0;for(var e=0;e<n.animators.length;e++){var t=n.animators[e];if(t.scope==="leave")return!0}return!1}function uce(n,e,t,i,r,s){p2(n)||K9("leave",n,e,t,i,r,s)}function pj(n,e,t,i){n.removeTextContent(),n.removeTextGuideLine(),uce(n,{style:{opacity:0}},e,t,i)}function cce(n,e,t){function i(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(r){r.isGroup||pj(r,e,t,i)}):pj(n,e,t,i)}function VZe(n){zZe(n).oldStyle=n.style}var I4=Math.max,D4=Math.min,SO={};function $Ze(n){return ds.extend(n)}var GZe=fZe;function WZe(n,e){return GZe(n,e)}function Zc(n,e){SO[n]=e}function qZe(n){if(SO.hasOwnProperty(n))return SO[n]}function X9(n,e,t,i){var r=dZe(n,e);return t&&(i==="center"&&(t=fce(t,r.getBoundingRect())),hce(r,t)),r}function dce(n,e,t){var i=new Mb({style:{image:n,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(r){if(t==="center"){var s={width:r.width,height:r.height};i.setStyle(fce(e,s))}}});return i}function fce(n,e){var t=e.width/e.height,i=n.height*t,r;i<=n.width?r=n.height:(i=n.width,r=i/t);var s=n.x+n.width/2,a=n.y+n.height/2;return{x:s-i/2,y:a-r/2,width:i,height:r}}var jZe=hZe;function hce(n,e){if(n.applyTransform){var t=n.getBoundingRect(),i=t.calculateTransform(e);n.applyTransform(i)}}function Y9(n,e){return Iue(n,n,{lineWidth:e}),n}function KZe(n){return Due(n.shape,n.shape,n.style),n}var XZe=rg;function YZe(n,e){for(var t=I9([]);n&&n!==e;)W1(t,n.getLocalTransform(),t),n=n.parent;return t}function Q9(n,e,t){return e&&!kl(e)&&(e=k9.getLocalTransform(e)),t&&(e=Vle([],e)),zd([],n,e)}function QZe(n,e,t){var i=e[4]===0||e[5]===0||e[0]===0?1:Math.abs(2*e[4]/e[0]),r=e[4]===0||e[5]===0||e[2]===0?1:Math.abs(2*e[4]/e[2]),s=[n==="left"?-i:n==="right"?i:0,n==="top"?-r:n==="bottom"?r:0];return s=Q9(s,e,t),Math.abs(s[0])>Math.abs(s[1])?s[0]>0?"right":"left":s[1]>0?"bottom":"top"}function mj(n){return!n.isGroup}function ZZe(n){return n.shape!=null}function JZe(n,e,t){if(!n||!e)return;function i(a){var o={};return a.traverse(function(l){mj(l)&&l.anid&&(o[l.anid]=l)}),o}function r(a){var o={x:a.x,y:a.y,rotation:a.rotation};return ZZe(a)&&(o.shape=Rn({},a.shape)),o}var s=i(n);e.traverse(function(a){if(mj(a)&&a.anid){var o=s[a.anid];if(o){var l=r(a);a.attr(r(o)),B_(a,l,t,Rs(a).dataIndex)}}})}function eJe(n,e){return Sr(n,function(t){var i=t[0];i=I4(i,e.x),i=D4(i,e.x+e.width);var r=t[1];return r=I4(r,e.y),r=D4(r,e.y+e.height),[i,r]})}function tJe(n,e){var t=I4(n.x,e.x),i=D4(n.x+n.width,e.x+e.width),r=I4(n.y,e.y),s=D4(n.y+n.height,e.y+e.height);if(i>=t&&s>=r)return{x:t,y:r,width:i-t,height:s-r}}function Z9(n,e,t){var i=Rn({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(t=t||{x:-1,y:-1,width:2,height:2},n)return n.indexOf("image://")===0?(r.image=n.slice(8),Cs(r,t),new Mb(i)):X9(n.replace("path://",""),i,t,"center")}function nJe(n,e,t,i,r){for(var s=0,a=r[r.length-1];s<r.length;s++){var o=r[s];if(pce(n,e,t,i,o[0],o[1],a[0],a[1]))return!0;a=o}}function pce(n,e,t,i,r,s,a,o){var l=t-n,u=i-e,c=a-r,d=o-s,f=L5(c,d,l,u);if(iJe(f))return!1;var h=n-r,p=e-s,m=L5(h,p,l,u)/f;if(m<0||m>1)return!1;var g=L5(h,p,c,d)/f;return!(g<0||g>1)}function L5(n,e,t,i){return n*i-t*e}function iJe(n){return n<=1e-6&&n>=-1e-6}function J9(n){var e=n.itemTooltipOption,t=n.componentModel,i=n.itemName,r=ki(e)?{formatter:e}:e,s=t.mainType,a=t.componentIndex,o={componentType:s,name:i,$vars:["name"]};o[s+"Index"]=a;var l=n.formatterParamsExtra;l&&Nt(Gs(l),function(c){O_(o,c)||(o[c]=l[c],o.$vars.push(c))});var u=Rs(n.el);u.componentMainType=s,u.componentIndex=a,u.tooltipConfig={name:i,option:Cs({content:i,formatterParams:o},r)}}function gj(n,e){var t;n.isGroup&&(t=e(n)),t||n.traverse(e)}function mce(n,e){if(n)if(vi(n))for(var t=0;t<n.length;t++)gj(n[t],e);else gj(n,e)}Zc("circle",q9);Zc("ellipse",Xue);Zc("sector",WD);Zc("ring",Jue);Zc("polygon",nce);Zc("polyline",qD);Zc("rect",El);Zc("line",FT);Zc("bezierCurve",ace);Zc("arc",j9);const rJe=Object.freeze(Object.defineProperty({__proto__:null,Arc:j9,BezierCurve:ace,BoundingRect:Qr,Circle:q9,CompoundPath:DZe,Ellipse:Xue,Group:Yd,Image:Mb,IncrementalDisplayable:UZe,Line:FT,LinearGradient:kZe,OrientedBoundingRect:M4,Path:ds,Point:Fi,Polygon:nce,Polyline:qD,RadialGradient:OZe,Rect:El,Ring:Jue,Sector:WD,Text:nl,applyTransform:Q9,clipPointsByRect:eJe,clipRectByRect:tJe,createIcon:Z9,extendPath:WZe,extendShape:$Ze,getShapeClass:qZe,getTransform:YZe,groupTransition:JZe,initProps:GM,isElementRemoved:p2,lineLineIntersect:pce,linePolygonIntersect:nJe,makeImage:dce,makePath:X9,mergePath:jZe,registerShape:Zc,removeElement:uce,removeElementWithFadeOut:cce,resizePath:hce,setTooltipConfig:J9,subPixelOptimize:XZe,subPixelOptimizeLine:Y9,subPixelOptimizeRect:KZe,transformDirection:QZe,traverseElements:mce,updateProps:B_},Symbol.toStringTag,{value:"Module"}));var jD={};function sJe(n,e){for(var t=0;t<Qd.length;t++){var i=Qd[t],r=e[i],s=n.ensureState(i);s.style=s.style||{},s.style.text=r}var a=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:e.normal}),n.useStates(a,!0)}function vj(n,e,t){var i=n.labelFetcher,r=n.labelDataIndex,s=n.labelDimIndex,a=e.normal,o;i&&(o=i.getFormattedLabel(r,"normal",null,s,a&&a.get("formatter"),t!=null?{interpolatedValue:t}:null)),o==null&&(o=$r(n.defaultText)?n.defaultText(r,n,t):n.defaultText);for(var l={normal:o},u=0;u<Qd.length;u++){var c=Qd[u],d=e[c];l[c]=yr(i?i.getFormattedLabel(r,c,null,s,d&&d.get("formatter")):null,o)}return l}function gce(n,e,t,i){t=t||jD;for(var r=n instanceof nl,s=!1,a=0;a<E4.length;a++){var o=e[E4[a]];if(o&&o.getShallow("show")){s=!0;break}}var l=r?n:n.getTextContent();if(s){r||(l||(l=new nl,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var u=vj(t,e),c=e.normal,d=!!c.getShallow("show"),f=c0(c,i&&i.normal,t,!1,!r);f.text=u.normal,r||n.setTextConfig(yj(c,t,!1));for(var a=0;a<Qd.length;a++){var h=Qd[a],o=e[h];if(o){var p=l.ensureState(h),m=!!yr(o.getShallow("show"),d);if(m!==d&&(p.ignore=!m),p.style=c0(o,i&&i[h],t,!0,!r),p.style.text=u[h],!r){var g=n.ensureState(h);g.textConfig=yj(o,t,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(f.x=l.style.x),l.style.y!=null&&(f.y=l.style.y),l.ignore=!d,l.useStyle(f),l.dirty(),t.enableTextSetter&&(cJe(l).setLabelText=function(v){var _=vj(t,e,v);sJe(l,_)})}else l&&(l.ignore=!0);n.dirty()}function aJe(n,e){e=e||"label";for(var t={normal:n.getModel(e)},i=0;i<Qd.length;i++){var r=Qd[i];t[r]=n.getModel([r,e])}return t}function c0(n,e,t,i,r){var s={};return oJe(s,n,t,i,r),e&&Rn(s,e),s}function yj(n,e,t){e=e||{};var i={},r,s=n.getShallow("rotate"),a=yr(n.getShallow("distance"),t?null:5),o=n.getShallow("offset");return r=n.getShallow("position")||(t?null:"inside"),r==="outside"&&(r=e.defaultOutsidePosition||"top"),r!=null&&(i.position=r),o!=null&&(i.offset=o),s!=null&&(s*=Math.PI/180,i.rotation=s),a!=null&&(i.distance=a),i.outsideFill=n.get("color")==="inherit"?e.inheritColor||null:"auto",i}function oJe(n,e,t,i,r){t=t||jD;var s=e.ecModel,a=s&&s.option.textStyle,o=lJe(e),l;if(o){l={};for(var u in o)if(o.hasOwnProperty(u)){var c=e.getModel(["rich",u]);xj(l[u]={},c,a,t,i,r,!1,!0)}}l&&(n.rich=l);var d=e.get("overflow");d&&(n.overflow=d);var f=e.get("minMargin");f!=null&&(n.margin=f),xj(n,e,a,t,i,r,!0,!1)}function lJe(n){for(var e;n&&n!==n.ecModel;){var t=(n.option||jD).rich;if(t){e=e||{};for(var i=Gs(t),r=0;r<i.length;r++){var s=i[r];e[s]=1}}n=n.parentModel}return e}var _j=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],bj=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Sj=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function xj(n,e,t,i,r,s,a,o){t=!r&&t||jD;var l=i&&i.inheritColor,u=e.getShallow("color"),c=e.getShallow("textBorderColor"),d=yr(e.getShallow("opacity"),t.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),s||(u=u||t.color,c=c||t.textBorderColor),u!=null&&(n.fill=u),c!=null&&(n.stroke=c);var f=yr(e.getShallow("textBorderWidth"),t.textBorderWidth);f!=null&&(n.lineWidth=f);var h=yr(e.getShallow("textBorderType"),t.textBorderType);h!=null&&(n.lineDash=h);var p=yr(e.getShallow("textBorderDashOffset"),t.textBorderDashOffset);p!=null&&(n.lineDashOffset=p),!r&&d==null&&!o&&(d=i&&i.defaultOpacity),d!=null&&(n.opacity=d),!r&&!s&&n.fill==null&&i.inheritColor&&(n.fill=i.inheritColor);for(var m=0;m<_j.length;m++){var g=_j[m],v=yr(e.getShallow(g),t[g]);v!=null&&(n[g]=v)}for(var m=0;m<bj.length;m++){var g=bj[m],v=e.getShallow(g);v!=null&&(n[g]=v)}if(n.verticalAlign==null){var _=e.getShallow("baseline");_!=null&&(n.verticalAlign=_)}if(!a||!i.disableBox){for(var m=0;m<Sj.length;m++){var g=Sj[m],v=e.getShallow(g);v!=null&&(n[g]=v)}var y=e.getShallow("borderType");y!=null&&(n.borderDash=y),(n.backgroundColor==="auto"||n.backgroundColor==="inherit")&&l&&(n.backgroundColor=l),(n.borderColor==="auto"||n.borderColor==="inherit")&&l&&(n.borderColor=l)}}function uJe(n,e){var t=e&&e.getModel("textStyle");return Rd([n.fontStyle||t&&t.getShallow("fontStyle")||"",n.fontWeight||t&&t.getShallow("fontWeight")||"",(n.fontSize||t&&t.getShallow("fontSize")||12)+"px",n.fontFamily||t&&t.getShallow("fontFamily")||"sans-serif"].join(" "))}var cJe=Ua(),dJe=["textStyle","color"],O5=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],N5=new nl,fJe=function(){function n(){}return n.prototype.getTextColor=function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(dJe):null)},n.prototype.getFont=function(){return uJe({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(e){for(var t={text:e,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<O5.length;i++)t[O5[i]]=this.getShallow(O5[i]);return N5.useStyle(t),N5.update(),N5.getBoundingRect()},n}();const hJe=fJe;var vce=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],pJe=Tw(vce),mJe=function(){function n(){}return n.prototype.getLineStyle=function(e){return pJe(this,e)},n}(),yce=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],gJe=Tw(yce),vJe=function(){function n(){}return n.prototype.getItemStyle=function(e,t){return gJe(this,e,t)},n}(),sv=function(){function n(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}return n.prototype.init=function(e,t,i){},n.prototype.mergeOption=function(e,t){xs(this.option,e,!0)},n.prototype.get=function(e,t){return e==null?this.option:this._doGet(this.parsePath(e),!t&&this.parentModel)},n.prototype.getShallow=function(e,t){var i=this.option,r=i==null?i:i[e];if(r==null&&!t){var s=this.parentModel;s&&(r=s.getShallow(e))}return r},n.prototype.getModel=function(e,t){var i=e!=null,r=i?this.parsePath(e):null,s=i?this._doGet(r):this.option;return t=t||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new n(s,t,this.ecModel)},n.prototype.isEmpty=function(){return this.option==null},n.prototype.restoreData=function(){},n.prototype.clone=function(){var e=this.constructor;return new e(Cr(this.option))},n.prototype.parsePath=function(e){return typeof e=="string"?e.split("."):e},n.prototype.resolveParentPath=function(e){return e},n.prototype.isAnimationEnabled=function(){if(!tr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(e,t){var i=this.option;if(!e)return i;for(var r=0;r<e.length&&!(e[r]&&(i=i&&typeof i=="object"?i[e[r]]:null,i==null));r++);return i==null&&t&&(i=t._doGet(this.resolveParentPath(e),t.parentModel)),i},n}();U9(sv);zYe(sv);Ah(sv,mJe);Ah(sv,vJe);Ah(sv,WYe);Ah(sv,hJe);const xo=sv;var yJe=Math.round(Math.random()*10);function KD(n){return[n||"",yJe++].join("_")}function _Je(n){var e={};n.registerSubTypeDefaulter=function(t,i){var r=Pd(t);e[r.main]=i},n.determineSubType=function(t,i){var r=i.type;if(!r){var s=Pd(t).main;n.hasSubTypes(t)&&e[s]&&(r=e[s](i))}return r}}function bJe(n,e){n.topologicalTravel=function(s,a,o,l){if(!s.length)return;var u=t(a),c=u.graph,d=u.noEntryList,f={};for(Nt(s,function(_){f[_]=!0});d.length;){var h=d.pop(),p=c[h],m=!!f[h];m&&(o.call(l,h,p.originalDeps.slice()),delete f[h]),Nt(p.successor,m?v:g)}Nt(f,function(){var _="";throw new Error(_)});function g(_){c[_].entryCount--,c[_].entryCount===0&&d.push(_)}function v(_){f[_]=!0,g(_)}};function t(s){var a={},o=[];return Nt(s,function(l){var u=i(a,l),c=u.originalDeps=e(l),d=r(c,s);u.entryCount=d.length,u.entryCount===0&&o.push(l),Nt(d,function(f){ls(u.predecessor,f)<0&&u.predecessor.push(f);var h=i(a,f);ls(h.successor,f)<0&&h.successor.push(l)})}),{graph:a,noEntryList:o}}function i(s,a){return s[a]||(s[a]={predecessor:[],successor:[]}),s[a]}function r(s,a){var o=[];return Nt(s,function(l){ls(a,l)>=0&&o.push(l)}),o}}function SJe(n,e){return xs(xs({},n,!0),e,!0)}const xJe={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},wJe={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var R4="ZH",eU="EN",Cw=eU,WM={},tU={},_ce=tr.domSupported?function(){var n=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return n.indexOf(R4)>-1?R4:Cw}():Cw;function bce(n,e){n=n.toUpperCase(),tU[n]=new xo(e),WM[n]=e}function TJe(n){if(ki(n)){var e=WM[n.toUpperCase()]||{};return n===R4||n===eU?Cr(e):xs(Cr(e),Cr(WM[Cw]),!1)}else return xs(Cr(n),Cr(WM[Cw]),!1)}function CJe(n){return tU[n]}function AJe(){return tU[Cw]}bce(eU,xJe);bce(R4,wJe);function qh(n,e){return n+="","0000".substr(0,e-n.length)+n}function Sce(n,e,t,i){var r=zD(n),s=r[EJe(t)](),a=r[MJe(t)]()+1,o=Math.floor((a-1)/3)+1,l=r[IJe(t)](),u=r["get"+(t?"UTC":"")+"Day"](),c=r[DJe(t)](),d=(c-1)%12+1,f=r[RJe(t)](),h=r[PJe(t)](),p=r[kJe(t)](),m=i instanceof xo?i:CJe(i||_ce)||AJe(),g=m.getModel("time"),v=g.get("month"),_=g.get("monthAbbr"),y=g.get("dayOfWeek"),b=g.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,s+"").replace(/{yy}/g,qh(s%100+"",2)).replace(/{Q}/g,o+"").replace(/{MMMM}/g,v[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,qh(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,qh(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[u]).replace(/{ee}/g,b[u]).replace(/{e}/g,u+"").replace(/{HH}/g,qh(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,qh(d+"",2)).replace(/{h}/g,d+"").replace(/{mm}/g,qh(f,2)).replace(/{m}/g,f+"").replace(/{ss}/g,qh(h,2)).replace(/{s}/g,h+"").replace(/{SSS}/g,qh(p,3)).replace(/{S}/g,p+"")}function EJe(n){return n?"getUTCFullYear":"getFullYear"}function MJe(n){return n?"getUTCMonth":"getMonth"}function IJe(n){return n?"getUTCDate":"getDate"}function DJe(n){return n?"getUTCHours":"getHours"}function RJe(n){return n?"getUTCMinutes":"getMinutes"}function PJe(n){return n?"getUTCSeconds":"getSeconds"}function kJe(n){return n?"getUTCMilliseconds":"getMilliseconds"}function LJe(n){if(!bYe(n))return ki(n)?n:"-";var e=(n+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function xce(n,e){return n=(n||"").toLowerCase().replace(/-(.)/g,function(t,i){return i.toUpperCase()}),e&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var XD=Nle;function xO(n,e,t){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function r(c){return c&&Rd(c)?c:"-"}function s(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=e==="time",o=n instanceof Date;if(a||o){var l=a?zD(n):n;if(isNaN(+l)){if(o)return"-"}else return Sce(l,i,t)}if(e==="ordinal")return G8(n)?r(n):Ws(n)&&s(n)?n+"":"-";var u=A4(n);return s(u)?LJe(u):G8(n)?r(n):typeof n=="boolean"?n+"":"-"}var wj=["a","b","c","d","e","f","g"],B5=function(n,e){return"{"+n+(e??"")+"}"};function wce(n,e,t){vi(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],s=0;s<r.length;s++){var a=wj[s];n=n.replace(B5(a),B5(a,0))}for(var o=0;o<i;o++)for(var l=0;l<r.length;l++){var u=e[o][r[l]];n=n.replace(B5(wj[l],o),t?Bu(u):u)}return n}function OJe(n,e){var t=ki(n)?{color:n,extraCssText:e}:n||{},i=t.color,r=t.type;e=t.extraCssText;var s=t.renderMode||"html";if(!i)return"";if(s==="html")return r==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Bu(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Bu(i)+";"+(e||"")+'"></span>';var a=t.markerId||"markerX";return{renderMode:s,content:"{"+a+"|}  ",style:r==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function Aw(n,e){return e=e||"transparent",ki(n)?n:Ni(n)&&n.colorStops&&(n.colorStops[0]||{}).color||e}function Tj(n,e){if(e==="_blank"||e==="blank"){var t=window.open();t.opener=null,t.location.href=n}else window.open(n,e)}var qM=Nt,NJe=["left","right","top","bottom","width","height"],kA=[["width","left","right"],["height","top","bottom"]];function nU(n,e,t,i,r){var s=0,a=0;i==null&&(i=1/0),r==null&&(r=1/0);var o=0;e.eachChild(function(l,u){var c=l.getBoundingRect(),d=e.childAt(u+1),f=d&&d.getBoundingRect(),h,p;if(n==="horizontal"){var m=c.width+(f?-f.x+c.x:0);h=s+m,h>i||l.newline?(s=0,h=m,a+=o+t,o=c.height):o=Math.max(o,c.height)}else{var g=c.height+(f?-f.y+c.y:0);p=a+g,p>r||l.newline?(s+=o+t,a=0,p=g,o=c.width):o=Math.max(o,c.width)}l.newline||(l.x=s,l.y=a,l.markRedraw(),n==="horizontal"?s=h+t:a=p+t)})}var m2=nU;pa(nU,"vertical");pa(nU,"horizontal");function Ew(n,e,t){t=XD(t||0);var i=e.width,r=e.height,s=da(n.left,i),a=da(n.top,r),o=da(n.right,i),l=da(n.bottom,r),u=da(n.width,i),c=da(n.height,r),d=t[2]+t[0],f=t[1]+t[3],h=n.aspect;switch(isNaN(u)&&(u=i-o-f-s),isNaN(c)&&(c=r-l-d-a),h!=null&&(isNaN(u)&&isNaN(c)&&(h>i/r?u=i*.8:c=r*.8),isNaN(u)&&(u=h*c),isNaN(c)&&(c=u/h)),isNaN(s)&&(s=i-o-u-f),isNaN(a)&&(a=r-l-c-d),n.left||n.right){case"center":s=i/2-u/2-t[3];break;case"right":s=i-u-f;break}switch(n.top||n.bottom){case"middle":case"center":a=r/2-c/2-t[0];break;case"bottom":a=r-c-d;break}s=s||0,a=a||0,isNaN(u)&&(u=i-f-s-(o||0)),isNaN(c)&&(c=r-d-a-(l||0));var p=new Qr(s+t[3],a+t[0],u,c);return p.margin=t,p}function P4(n){var e=n.layoutMode||n.constructor.layoutMode;return Ni(e)?e:e?{type:e}:null}function Mw(n,e,t){var i=t&&t.ignoreSize;!vi(i)&&(i=[i,i]);var r=a(kA[0],0),s=a(kA[1],1);u(kA[0],n,r),u(kA[1],n,s);function a(c,d){var f={},h=0,p={},m=0,g=2;if(qM(c,function(y){p[y]=n[y]}),qM(c,function(y){o(e,y)&&(f[y]=p[y]=e[y]),l(f,y)&&h++,l(p,y)&&m++}),i[d])return l(e,c[1])?p[c[2]]=null:l(e,c[2])&&(p[c[1]]=null),p;if(m===g||!h)return p;if(h>=g)return f;for(var v=0;v<c.length;v++){var _=c[v];if(!o(f,_)&&o(n,_)){f[_]=n[_];break}}return f}function o(c,d){return c.hasOwnProperty(d)}function l(c,d){return c[d]!=null&&c[d]!=="auto"}function u(c,d,f){qM(c,function(h){d[h]=f[h]})}}function iU(n){return BJe({},n)}function BJe(n,e){return e&&n&&qM(NJe,function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}var FJe=Ua(),Ib=function(n){Mi(e,n);function e(t,i,r){var s=n.call(this,t,i,r)||this;return s.uid=KD("ec_cpt_model"),s}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=P4(this),s=r?iU(t):{},a=i.getTheme();xs(t,a.get(this.mainType)),xs(t,this.getDefaultOption()),r&&Mw(t,s,r)},e.prototype.mergeOption=function(t,i){xs(this.option,t,!0);var r=P4(this);r&&Mw(this.option,t,r)},e.prototype.optionUpdated=function(t,i){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!BYe(t))return t.defaultOption;var i=FJe(this);if(!i.defaultOption){for(var r=[],s=t;s;){var a=s.prototype.defaultOption;a&&r.push(a),s=s.superClass}for(var o={},l=r.length-1;l>=0;l--)o=xs(o,r[l],!0);i.defaultOption=o}return i.defaultOption},e.prototype.getReferringComponents=function(t,i){var r=t+"Index",s=t+"Id";return NT(this.ecModel,t,{index:this.get(r,!0),id:this.get(s,!0)},i)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(xo);bue(Ib,xo);z9(Ib);_Je(Ib);bJe(Ib,UJe);function UJe(n){var e=[];return Nt(Ib.getClassesByMainType(n),function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])}),e=Sr(e,function(t){return Pd(t).main}),n!=="dataset"&&ls(e,"dataset")<=0&&e.unshift("dataset"),e}const Ms=Ib;var Tce="";typeof navigator<"u"&&(Tce=navigator.platform||"");var ny="rgba(0, 0, 0, 0.2)";const zJe={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:ny,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:ny,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:ny,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:ny,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:ny,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:ny,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Tce.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var Cce=_r(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),af="original",Ll="arrayRows",Jc="objectRows",of="keyedColumns",Hp="typedArray",Ace="unknown",Qf="column",Db="row",$a={Must:1,Might:2,Not:3},HJe=Ua();function VJe(n){HJe(n).datasetMap=_r()}function $Je(n,e,t){var i={},r=Ece(n);if(!r)return i;var s=e.sourceFormat,a=e.dimensionsDefine,o;(s===Jc||s===of)&&Nt(a,function(c,d){(Ni(c)?c.name:c)==="name"&&(o=d)});var l=function(){for(var c={},d={},f=[],h=0,p=Math.min(5,t);h<p;h++){var m=Ice(e.data,s,e.seriesLayoutBy,a,e.startIndex,h);f.push(m);var g=m===$a.Not;if(g&&c.v==null&&h!==o&&(c.v=h),(c.n==null||c.n===c.v||!g&&f[c.n]===$a.Not)&&(c.n=h),v(c)&&f[c.n]!==$a.Not)return c;g||(m===$a.Might&&d.v==null&&h!==o&&(d.v=h),(d.n==null||d.n===d.v)&&(d.n=h))}function v(_){return _.v!=null&&_.n!=null}return v(c)?c:v(d)?d:null}();if(l){i.value=[l.v];var u=o??l.n;i.itemName=[u],i.seriesName=[u]}return i}function Ece(n){var e=n.get("data",!0);if(!e)return NT(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},F9).models[0]}function GJe(n){return!n.get("transform",!0)&&!n.get("fromTransformResult",!0)?[]:NT(n.ecModel,"dataset",{index:n.get("fromDatasetIndex",!0),id:n.get("fromDatasetId",!0)},F9).models}function Mce(n,e){return Ice(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,e)}function Ice(n,e,t,i,r,s){var a,o=5;if(mu(n))return $a.Not;var l,u;if(i){var c=i[s];Ni(c)?(l=c.name,u=c.type):ki(c)&&(l=c)}if(u!=null)return u==="ordinal"?$a.Must:$a.Not;if(e===Ll){var d=n;if(t===Db){for(var f=d[s],h=0;h<(f||[]).length&&h<o;h++)if((a=b(f[r+h]))!=null)return a}else for(var h=0;h<d.length&&h<o;h++){var p=d[r+h];if(p&&(a=b(p[s]))!=null)return a}}else if(e===Jc){var m=n;if(!l)return $a.Not;for(var h=0;h<m.length&&h<o;h++){var g=m[h];if(g&&(a=b(g[l]))!=null)return a}}else if(e===of){var v=n;if(!l)return $a.Not;var f=v[l];if(!f||mu(f))return $a.Not;for(var h=0;h<f.length&&h<o;h++)if((a=b(f[h]))!=null)return a}else if(e===af)for(var _=n,h=0;h<_.length&&h<o;h++){var g=_[h],y=HD(g);if(!vi(y))return $a.Not;if((a=b(y[s]))!=null)return a}function b(x){var w=ki(x);if(x!=null&&isFinite(x)&&x!=="")return w?$a.Might:$a.Not;if(w&&x!=="-")return $a.Must}return $a.Not}var WJe=_r();function qJe(n,e,t){var i=WJe.get(e);if(!i)return t;var r=i(n);return r?t.concat(r):t}var Cj=Ua();Ua();var rU=function(){function n(){}return n.prototype.getColorFromPalette=function(e,t,i){var r=Zo(this.get("color",!0)),s=this.get("colorLayer",!0);return KJe(this,Cj,r,s,e,t,i)},n.prototype.clearColorPalette=function(){XJe(this,Cj)},n}();function jJe(n,e){for(var t=n.length,i=0;i<t;i++)if(n[i].length>e)return n[i];return n[t-1]}function KJe(n,e,t,i,r,s,a){s=s||n;var o=e(s),l=o.paletteIdx||0,u=o.paletteNameMap=o.paletteNameMap||{};if(u.hasOwnProperty(r))return u[r];var c=a==null||!i?t:jJe(i,a);if(c=c||t,!(!c||!c.length)){var d=c[l];return r&&(u[r]=d),o.paletteIdx=(l+1)%c.length,d}}function XJe(n,e){e(n).paletteIdx=0,e(n).paletteNameMap={}}var LA,qS,Aj,Ej="\0_ec_inner",YJe=1,Dce=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t,i,r,s,a,o){s=s||{},this.option=null,this._theme=new xo(s),this._locale=new xo(a),this._optionManager=o},e.prototype.setOption=function(t,i,r){var s=Dj(i);this._optionManager.setOption(t,r,s),this._resetOption(null,s)},e.prototype.resetOption=function(t,i){return this._resetOption(t,Dj(i))},e.prototype._resetOption=function(t,i){var r=!1,s=this._optionManager;if(!t||t==="recreate"){var a=s.mountOption(t==="recreate");!this.option||t==="recreate"?Aj(this,a):(this.restoreData(),this._mergeOption(a,i)),r=!0}if((t==="timeline"||t==="media")&&this.restoreData(),!t||t==="recreate"||t==="timeline"){var o=s.getTimelineOption(this);o&&(r=!0,this._mergeOption(o,i))}if(!t||t==="recreate"||t==="media"){var l=s.getMediaOption(this);l.length&&Nt(l,function(u){r=!0,this._mergeOption(u,i)},this)}return r},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,i){var r=this.option,s=this._componentsMap,a=this._componentsCount,o=[],l=_r(),u=i&&i.replaceMergeMainTypeMap;VJe(this),Nt(t,function(d,f){d!=null&&(Ms.hasClass(f)?f&&(o.push(f),l.set(f,!0)):r[f]=r[f]==null?Cr(d):xs(r[f],d,!0))}),u&&u.each(function(d,f){Ms.hasClass(f)&&!l.get(f)&&(o.push(f),l.set(f,!0))}),Ms.topologicalTravel(o,Ms.getAllClassMainTypes(),c,this);function c(d){var f=qJe(this,d,Zo(t[d])),h=s.get(d),p=h?u&&u.get(d)?"replaceMerge":"normalMerge":"replaceAll",m=wYe(h,f,p);DYe(m,d,Ms),r[d]=null,s.set(d,null),a.set(d,0);var g=[],v=[],_=0,y;Nt(m,function(b,x){var w=b.existing,A=b.newOption;if(!A)w&&(w.mergeOption({},this),w.optionUpdated({},!1));else{var T=d==="series",C=Ms.getClass(d,b.keyInfo.subType,!T);if(!C)return;if(d==="tooltip"){if(y)return;y=!0}if(w&&w.constructor===C)w.name=b.keyInfo.name,w.mergeOption(A,this),w.optionUpdated(A,!1);else{var E=Rn({componentIndex:x},b.keyInfo);w=new C(A,this,this,E),Rn(w,E),b.brandNew&&(w.__requireNewView=!0),w.init(A,this,this),w.optionUpdated(null,!0)}}w?(g.push(w.option),v.push(w),_++):(g.push(void 0),v.push(void 0))},this),r[d]=g,s.set(d,v),a.set(d,_),d==="series"&&LA(this)}this._seriesIndices||LA(this)},e.prototype.getOption=function(){var t=Cr(this.option);return Nt(t,function(i,r){if(Ms.hasClass(r)){for(var s=Zo(i),a=s.length,o=!1,l=a-1;l>=0;l--)s[l]&&!ww(s[l])?o=!0:(s[l]=null,!o&&a--);s.length=a,t[r]=s}}),delete t[Ej],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,i){var r=this._componentsMap.get(t);if(r){var s=r[i||0];if(s)return s;if(i==null){for(var a=0;a<r.length;a++)if(r[a])return r[a]}}},e.prototype.queryComponents=function(t){var i=t.mainType;if(!i)return[];var r=t.index,s=t.id,a=t.name,o=this._componentsMap.get(i);if(!o||!o.length)return[];var l;return r!=null?(l=[],Nt(Zo(r),function(u){o[u]&&l.push(o[u])})):s!=null?l=Mj("id",s,o):a!=null?l=Mj("name",a,o):l=Nu(o,function(u){return!!u}),Ij(l,t)},e.prototype.findComponents=function(t){var i=t.query,r=t.mainType,s=o(i),a=s?this.queryComponents(s):Nu(this._componentsMap.get(r),function(u){return!!u});return l(Ij(a,t));function o(u){var c=r+"Index",d=r+"Id",f=r+"Name";return u&&(u[c]!=null||u[d]!=null||u[f]!=null)?{mainType:r,index:u[c],id:u[d],name:u[f]}:null}function l(u){return t.filter?Nu(u,t.filter):u}},e.prototype.eachComponent=function(t,i,r){var s=this._componentsMap;if($r(t)){var a=i,o=t;s.each(function(d,f){for(var h=0;d&&h<d.length;h++){var p=d[h];p&&o.call(a,f,p,p.componentIndex)}})}else for(var l=ki(t)?s.get(t):Ni(t)?this.findComponents(t):null,u=0;l&&u<l.length;u++){var c=l[u];c&&i.call(r,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var i=Hd(t,null);return Nu(this._componentsMap.get("series"),function(r){return!!r&&i!=null&&r.name===i})},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Nu(this._componentsMap.get("series"),function(i){return!!i&&i.subType===t})},e.prototype.getSeries=function(){return Nu(this._componentsMap.get("series"),function(t){return!!t})},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,i){qS(this),Nt(this._seriesIndices,function(r){var s=this._componentsMap.get("series")[r];t.call(i,s,r)},this)},e.prototype.eachRawSeries=function(t,i){Nt(this._componentsMap.get("series"),function(r){r&&t.call(i,r,r.componentIndex)})},e.prototype.eachSeriesByType=function(t,i,r){qS(this),Nt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];a.subType===t&&i.call(r,a,s)},this)},e.prototype.eachRawSeriesByType=function(t,i,r){return Nt(this.getSeriesByType(t),i,r)},e.prototype.isSeriesFiltered=function(t){return qS(this),this._seriesIndicesMap.get(t.componentIndex)==null},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,i){qS(this);var r=[];Nt(this._seriesIndices,function(s){var a=this._componentsMap.get("series")[s];t.call(i,a,s)&&r.push(s)},this),this._seriesIndices=r,this._seriesIndicesMap=_r(r)},e.prototype.restoreData=function(t){LA(this);var i=this._componentsMap,r=[];i.each(function(s,a){Ms.hasClass(a)&&r.push(a)}),Ms.topologicalTravel(r,Ms.getAllClassMainTypes(),function(s){Nt(i.get(s),function(a){a&&(s!=="series"||!QJe(a,t))&&a.restoreData()})})},e.internalField=function(){LA=function(t){var i=t._seriesIndices=[];Nt(t._componentsMap.get("series"),function(r){r&&i.push(r.componentIndex)}),t._seriesIndicesMap=_r(i)},qS=function(t){},Aj=function(t,i){t.option={},t.option[Ej]=YJe,t._componentsMap=_r({series:[]}),t._componentsCount=_r();var r=i.aria;Ni(r)&&r.enabled==null&&(r.enabled=!0),ZJe(i,t._theme.option),xs(i,zJe,!1),t._mergeOption(i,null)}}(),e}(xo);function QJe(n,e){if(e){var t=e.seriesIndex,i=e.seriesId,r=e.seriesName;return t!=null&&n.componentIndex!==t||i!=null&&n.id!==i||r!=null&&n.name!==r}}function ZJe(n,e){var t=n.color&&!n.colorLayer;Nt(e,function(i,r){r==="colorLayer"&&t||Ms.hasClass(r)||(typeof i=="object"?n[r]=n[r]?xs(n[r],i,!1):Cr(i):n[r]==null&&(n[r]=i))})}function Mj(n,e,t){if(vi(e)){var i=_r();return Nt(e,function(s){if(s!=null){var a=Hd(s,null);a!=null&&i.set(s,!0)}}),Nu(t,function(s){return s&&i.get(s[n])})}else{var r=Hd(e,null);return Nu(t,function(s){return s&&r!=null&&s[n]===r})}}function Ij(n,e){return e.hasOwnProperty("subType")?Nu(n,function(t){return t&&t.subType===e.subType}):n}function Dj(n){var e=_r();return n&&Nt(Zo(n.replaceMerge),function(t){e.set(t,!0)}),{replaceMergeMainTypeMap:e}}Ah(Dce,rU);const Rce=Dce;var JJe=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],eet=function(){function n(e){Nt(JJe,function(t){this[t]=us(e[t],e)},this)}return n}();const Pce=eet;var F5={},tet=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(e,t){var i=[];Nt(F5,function(r,s){var a=r.create(e,t);i=i.concat(a||[])}),this._coordinateSystems=i},n.prototype.update=function(e,t){Nt(this._coordinateSystems,function(i){i.update&&i.update(e,t)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(e,t){F5[e]=t},n.get=function(e){return F5[e]},n}();const kce=tet;var net=/^(min|max)?(.+)$/,iet=function(){function n(e){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=e}return n.prototype.setOption=function(e,t,i){e&&(Nt(Zo(e.series),function(a){a&&a.data&&mu(a.data)&&W8(a.data)}),Nt(Zo(e.dataset),function(a){a&&a.source&&mu(a.source)&&W8(a.source)})),e=Cr(e);var r=this._optionBackup,s=ret(e,t,!r);this._newBaseOption=s.baseOption,r?(s.timelineOptions.length&&(r.timelineOptions=s.timelineOptions),s.mediaList.length&&(r.mediaList=s.mediaList),s.mediaDefault&&(r.mediaDefault=s.mediaDefault)):this._optionBackup=s},n.prototype.mountOption=function(e){var t=this._optionBackup;return this._timelineOptions=t.timelineOptions,this._mediaList=t.mediaList,this._mediaDefault=t.mediaDefault,this._currentMediaIndices=[],Cr(e?t.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(e){var t,i=this._timelineOptions;if(i.length){var r=e.getComponent("timeline");r&&(t=Cr(i[r.getCurrentIndex()]))}return t},n.prototype.getMediaOption=function(e){var t=this._api.getWidth(),i=this._api.getHeight(),r=this._mediaList,s=this._mediaDefault,a=[],o=[];if(!r.length&&!s)return o;for(var l=0,u=r.length;l<u;l++)set(r[l].query,t,i)&&a.push(l);return!a.length&&s&&(a=[-1]),a.length&&!oet(a,this._currentMediaIndices)&&(o=Sr(a,function(c){return Cr(c===-1?s.option:r[c].option)})),this._currentMediaIndices=a,o},n}();function ret(n,e,t){var i=[],r,s,a=n.baseOption,o=n.timeline,l=n.options,u=n.media,c=!!n.media,d=!!(l||o||a&&a.timeline);a?(s=a,s.timeline||(s.timeline=o)):((d||c)&&(n.options=n.media=null),s=n),c&&vi(u)&&Nt(u,function(h){h&&h.option&&(h.query?i.push(h):r||(r=h))}),f(s),Nt(l,function(h){return f(h)}),Nt(i,function(h){return f(h.option)});function f(h){Nt(e,function(p){p(h,t)})}return{baseOption:s,timelineOptions:l||[],mediaDefault:r,mediaList:i}}function set(n,e,t){var i={width:e,height:t,aspectratio:e/t},r=!0;return Nt(n,function(s,a){var o=a.match(net);if(!(!o||!o[1]||!o[2])){var l=o[1],u=o[2].toLowerCase();aet(i[u],s,l)||(r=!1)}}),r}function aet(n,e,t){return t==="min"?n>=e:t==="max"?n<=e:n===e}function oet(n,e){return n.join(",")===e.join(",")}const uet=iet;var _c=Nt,Iw=Ni,Rj=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function U5(n){var e=n&&n.itemStyle;if(e)for(var t=0,i=Rj.length;t<i;t++){var r=Rj[t],s=e.normal,a=e.emphasis;s&&s[r]&&(n[r]=n[r]||{},n[r].normal?xs(n[r].normal,s[r]):n[r].normal=s[r],s[r]=null),a&&a[r]&&(n[r]=n[r]||{},n[r].emphasis?xs(n[r].emphasis,a[r]):n[r].emphasis=a[r],a[r]=null)}}function go(n,e,t){if(n&&n[e]&&(n[e].normal||n[e].emphasis)){var i=n[e].normal,r=n[e].emphasis;i&&(t?(n[e].normal=n[e].emphasis=null,Cs(n[e],i)):n[e]=i),r&&(n.emphasis=n.emphasis||{},n.emphasis[e]=r,r.focus&&(n.emphasis.focus=r.focus),r.blurScope&&(n.emphasis.blurScope=r.blurScope))}}function Nx(n){go(n,"itemStyle"),go(n,"lineStyle"),go(n,"areaStyle"),go(n,"label"),go(n,"labelLine"),go(n,"upperLabel"),go(n,"edgeLabel")}function zs(n,e){var t=Iw(n)&&n[e],i=Iw(t)&&t.textStyle;if(i)for(var r=0,s=Oq.length;r<s;r++){var a=Oq[r];i.hasOwnProperty(a)&&(t[a]=i[a])}}function Ru(n){n&&(Nx(n),zs(n,"label"),n.emphasis&&zs(n.emphasis,"label"))}function cet(n){if(Iw(n)){U5(n),Nx(n),zs(n,"label"),zs(n,"upperLabel"),zs(n,"edgeLabel"),n.emphasis&&(zs(n.emphasis,"label"),zs(n.emphasis,"upperLabel"),zs(n.emphasis,"edgeLabel"));var e=n.markPoint;e&&(U5(e),Ru(e));var t=n.markLine;t&&(U5(t),Ru(t));var i=n.markArea;i&&Ru(i);var r=n.data;if(n.type==="graph"){r=r||n.nodes;var s=n.links||n.edges;if(s&&!mu(s))for(var a=0;a<s.length;a++)Ru(s[a]);Nt(n.categories,function(u){Nx(u)})}if(r&&!mu(r))for(var a=0;a<r.length;a++)Ru(r[a]);if(e=n.markPoint,e&&e.data)for(var o=e.data,a=0;a<o.length;a++)Ru(o[a]);if(t=n.markLine,t&&t.data)for(var l=t.data,a=0;a<l.length;a++)vi(l[a])?(Ru(l[a][0]),Ru(l[a][1])):Ru(l[a]);n.type==="gauge"?(zs(n,"axisLabel"),zs(n,"title"),zs(n,"detail")):n.type==="treemap"?(go(n.breadcrumb,"itemStyle"),Nt(n.levels,function(u){Nx(u)})):n.type==="tree"&&Nx(n.leaves)}}function gf(n){return vi(n)?n:n?[n]:[]}function Pj(n){return(vi(n)?n[0]:n)||{}}function det(n,e){_c(gf(n.series),function(i){Iw(i)&&cet(i)});var t=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&t.push("valueAxis","categoryAxis","logAxis","timeAxis"),_c(t,function(i){_c(gf(n[i]),function(r){r&&(zs(r,"axisLabel"),zs(r.axisPointer,"label"))})}),_c(gf(n.parallel),function(i){var r=i&&i.parallelAxisDefault;zs(r,"axisLabel"),zs(r&&r.axisPointer,"label")}),_c(gf(n.calendar),function(i){go(i,"itemStyle"),zs(i,"dayLabel"),zs(i,"monthLabel"),zs(i,"yearLabel")}),_c(gf(n.radar),function(i){zs(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),_c(gf(n.geo),function(i){Iw(i)&&(Ru(i),_c(gf(i.regions),function(r){Ru(r)}))}),_c(gf(n.timeline),function(i){Ru(i),go(i,"label"),go(i,"itemStyle"),go(i,"controlStyle",!0);var r=i.data;vi(r)&&Nt(r,function(s){Ni(s)&&(go(s,"label"),go(s,"itemStyle"))})}),_c(gf(n.toolbox),function(i){go(i,"iconStyle"),_c(i.feature,function(r){go(r,"iconStyle")})}),zs(Pj(n.axisPointer),"label"),zs(Pj(n.tooltip).axisPointer,"label")}function fet(n,e){for(var t=e.split(","),i=n,r=0;r<t.length&&(i=i&&i[t[r]],i!=null);r++);return i}function het(n,e,t,i){for(var r=e.split(","),s=n,a,o=0;o<r.length-1;o++)a=r[o],s[a]==null&&(s[a]={}),s=s[a];(i||s[r[o]]==null)&&(s[r[o]]=t)}function kj(n){n&&Nt(pet,function(e){e[0]in n&&!(e[1]in n)&&(n[e[1]]=n[e[0]])})}var pet=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],met=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],z5=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function jS(n){var e=n&&n.itemStyle;if(e)for(var t=0;t<z5.length;t++){var i=z5[t][1],r=z5[t][0];e[i]!=null&&(e[r]=e[i])}}function Lj(n){n&&n.alignTo==="edge"&&n.margin!=null&&n.edgeDistance==null&&(n.edgeDistance=n.margin)}function Oj(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function get(n){n&&n.focusNodeAdjacency!=null&&(n.emphasis=n.emphasis||{},n.emphasis.focus==null&&(n.emphasis.focus="adjacency"))}function Lce(n,e){if(n)for(var t=0;t<n.length;t++)e(n[t]),n[t]&&Lce(n[t].children,e)}function Oce(n,e){det(n,e),n.series=Zo(n.series),Nt(n.series,function(t){if(Ni(t)){var i=t.type;if(i==="line")t.clipOverflow!=null&&(t.clip=t.clipOverflow);else if(i==="pie"||i==="gauge"){t.clockWise!=null&&(t.clockwise=t.clockWise),Lj(t.label);var r=t.data;if(r&&!mu(r))for(var s=0;s<r.length;s++)Lj(r[s]);t.hoverOffset!=null&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if(i==="gauge"){var a=fet(t,"pointer.color");a!=null&&het(t,"itemStyle.color",a)}else if(i==="bar"){jS(t),jS(t.backgroundStyle),jS(t.emphasis);var r=t.data;if(r&&!mu(r))for(var s=0;s<r.length;s++)typeof r[s]=="object"&&(jS(r[s]),jS(r[s]&&r[s].emphasis))}else if(i==="sunburst"){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),Oj(t),Lce(t.data,Oj)}else i==="graph"||i==="sankey"?get(t):i==="map"&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Cs(t,t.mapLocation));t.hoverAnimation!=null&&(t.emphasis=t.emphasis||{},t.emphasis&&t.emphasis.scale==null&&(t.emphasis.scale=t.hoverAnimation)),kj(t)}}),n.dataRange&&(n.visualMap=n.dataRange),Nt(met,function(t){var i=n[t];i&&(vi(i)||(i=[i]),Nt(i,function(r){kj(r)}))})}function vet(n){var e=_r();n.eachSeries(function(t){var i=t.get("stack");if(i){var r=e.get(i)||e.set(i,[]),s=t.getData(),a={stackResultDimension:s.getCalculationInfo("stackResultDimension"),stackedOverDimension:s.getCalculationInfo("stackedOverDimension"),stackedDimension:s.getCalculationInfo("stackedDimension"),stackedByDimension:s.getCalculationInfo("stackedByDimension"),isStackedByIndex:s.getCalculationInfo("isStackedByIndex"),data:s,seriesModel:t};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;r.length&&s.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),e.each(yet)}function yet(n){Nt(n,function(e,t){var i=[],r=[NaN,NaN],s=[e.stackResultDimension,e.stackedOverDimension],a=e.data,o=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(s,function(u,c,d){var f=a.get(e.stackedDimension,d);if(isNaN(f))return r;var h,p;o?p=a.getRawIndex(d):h=a.get(e.stackedByDimension,d);for(var m=NaN,g=t-1;g>=0;g--){var v=n[g];if(o||(p=v.data.rawIndexOf(v.stackedByDimension,h)),p>=0){var _=v.data.getByRawIndex(v.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&f>=0&&_>0||l==="samesign"&&f<=0&&_<0){f=yYe(f,_),m=_;break}}}return i[0]=f,i[1]=m,i})})}var YD=function(){function n(e){this.data=e.data||(e.sourceFormat===of?{}:[]),this.sourceFormat=e.sourceFormat||Ace,this.seriesLayoutBy=e.seriesLayoutBy||Qf,this.startIndex=e.startIndex||0,this.dimensionsDetectedCount=e.dimensionsDetectedCount,this.metaRawOption=e.metaRawOption;var t=this.dimensionsDefine=e.dimensionsDefine;if(t)for(var i=0;i<t.length;i++){var r=t[i];r.type==null&&Mce(this,i)===$a.Must&&(r.type="ordinal")}}return n}();function sU(n){return n instanceof YD}function wO(n,e,t){t=t||Bce(n);var i=e.seriesLayoutBy,r=bet(n,t,i,e.sourceHeader,e.dimensions),s=new YD({data:n,sourceFormat:t,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:Cr(e)});return s}function Nce(n){return new YD({data:n,sourceFormat:mu(n)?Hp:af})}function _et(n){return new YD({data:n.data,sourceFormat:n.sourceFormat,seriesLayoutBy:n.seriesLayoutBy,dimensionsDefine:Cr(n.dimensionsDefine),startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount})}function Bce(n){var e=Ace;if(mu(n))e=Hp;else if(vi(n)){n.length===0&&(e=Ll);for(var t=0,i=n.length;t<i;t++){var r=n[t];if(r!=null){if(vi(r)){e=Ll;break}else if(Ni(r)){e=Jc;break}}}}else if(Ni(n)){for(var s in n)if(O_(n,s)&&kl(n[s])){e=of;break}}return e}function bet(n,e,t,i,r){var s,a;if(!n)return{dimensionsDefine:Nj(r),startIndex:a,dimensionsDetectedCount:s};if(e===Ll){var o=n;i==="auto"||i==null?Bj(function(u){u!=null&&u!=="-"&&(ki(u)?a==null&&(a=1):a=0)},t,o,10):a=Ws(i)?i:i?1:0,!r&&a===1&&(r=[],Bj(function(u,c){r[c]=u!=null?u+"":""},t,o,1/0)),s=r?r.length:t===Db?o.length:o[0]?o[0].length:null}else if(e===Jc)r||(r=xet(n));else if(e===of)r||(r=[],Nt(n,function(u,c){r.push(c)}));else if(e===af){var l=HD(n[0]);s=vi(l)&&l.length||1}return{startIndex:a,dimensionsDefine:Nj(r),dimensionsDetectedCount:s}}function xet(n){for(var e=0,t;e<n.length&&!(t=n[e++]););if(t)return Gs(t)}function Nj(n){if(n){var e=_r();return Sr(n,function(t,i){t=Ni(t)?t:{name:t};var r={name:t.name,displayName:t.displayName,type:t.type};if(r.name==null)return r;r.name+="",r.displayName==null&&(r.displayName=r.name);var s=e.get(r.name);return s?r.name+="-"+s.count++:e.set(r.name,{count:1}),r})}}function Bj(n,e,t,i){if(e===Db)for(var r=0;r<t.length&&r<i;r++)n(t[r]?t[r][0]:null,r);else for(var s=t[0]||[],r=0;r<s.length&&r<i;r++)n(s[r],r)}function Fce(n){var e=n.sourceFormat;return e===Jc||e===of}var gm,vm,ym,Fj,Uj,Uce=function(){function n(e,t){var i=sU(e)?e:Nce(e);this._source=i;var r=this._data=i.data;i.sourceFormat===Hp&&(this._offset=0,this._dimSize=t,this._data=r),Uj(this,r,i)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(e,t){},n.prototype.appendData=function(e){},n.prototype.clean=function(){},n.protoInitialize=function(){var e=n.prototype;e.pure=!1,e.persistent=!0}(),n.internalField=function(){var e;Uj=function(a,o,l){var u=l.sourceFormat,c=l.seriesLayoutBy,d=l.startIndex,f=l.dimensionsDefine,h=Fj[aU(u,c)];if(Rn(a,h),u===Hp)a.getItem=t,a.count=r,a.fillStorage=i;else{var p=zce(u,c);a.getItem=us(p,null,o,d,f);var m=Hce(u,c);a.count=us(m,null,o,d,f)}};var t=function(a,o){a=a-this._offset,o=o||[];for(var l=this._data,u=this._dimSize,c=u*a,d=0;d<u;d++)o[d]=l[c+d];return o},i=function(a,o,l,u){for(var c=this._data,d=this._dimSize,f=0;f<d;f++){for(var h=u[f],p=h[0]==null?1/0:h[0],m=h[1]==null?-1/0:h[1],g=o-a,v=l[f],_=0;_<g;_++){var y=c[_*d+f];v[a+_]=y,y<p&&(p=y),y>m&&(m=y)}h[0]=p,h[1]=m}},r=function(){return this._data?this._data.length/this._dimSize:0};Fj=(e={},e[Ll+"_"+Qf]={pure:!0,appendData:s},e[Ll+"_"+Db]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},e[Jc]={pure:!0,appendData:s},e[of]={pure:!0,appendData:function(a){var o=this._data;Nt(a,function(l,u){for(var c=o[u]||(o[u]=[]),d=0;d<(l||[]).length;d++)c.push(l[d])})}},e[af]={appendData:s},e[Hp]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},e);function s(a){for(var o=0;o<a.length;o++)this._data.push(a[o])}}(),n}(),zj=function(n,e,t,i){return n[i]},wet=(gm={},gm[Ll+"_"+Qf]=function(n,e,t,i){return n[i+e]},gm[Ll+"_"+Db]=function(n,e,t,i,r){i+=e;for(var s=r||[],a=n,o=0;o<a.length;o++){var l=a[o];s[o]=l?l[i]:null}return s},gm[Jc]=zj,gm[of]=function(n,e,t,i,r){for(var s=r||[],a=0;a<t.length;a++){var o=t[a].name,l=n[o];s[a]=l?l[i]:null}return s},gm[af]=zj,gm);function zce(n,e){var t=wet[aU(n,e)];return t}var Hj=function(n,e,t){return n.length},Tet=(vm={},vm[Ll+"_"+Qf]=function(n,e,t){return Math.max(0,n.length-e)},vm[Ll+"_"+Db]=function(n,e,t){var i=n[0];return i?Math.max(0,i.length-e):0},vm[Jc]=Hj,vm[of]=function(n,e,t){var i=t[0].name,r=n[i];return r?r.length:0},vm[af]=Hj,vm);function Hce(n,e){var t=Tet[aU(n,e)];return t}var H5=function(n,e,t){return n[e]},Cet=(ym={},ym[Ll]=H5,ym[Jc]=function(n,e,t){return n[t]},ym[of]=H5,ym[af]=function(n,e,t){var i=HD(n);return i instanceof Array?i[e]:i},ym[Hp]=H5,ym);function Vce(n){var e=Cet[n];return e}function aU(n,e){return n===Ll?n+"_"+e:n}function k4(n,e,t){if(n){var i=n.getRawDataItem(e);if(i!=null){var r=n.getStore(),s=r.getSource().sourceFormat;if(t!=null){var a=n.getDimensionIndex(t),o=r.getDimensionProperty(a);return Vce(s)(i,a,o)}else{var l=i;return s===af&&(l=HD(i)),l}}}}var Aet=/\{@(.+?)\}/g,Eet=function(){function n(){}return n.prototype.getDataParams=function(e,t){var i=this.getData(t),r=this.getRawValue(e,t),s=i.getRawIndex(e),a=i.getName(e),o=i.getRawDataItem(e),l=i.getItemVisual(e,"style"),u=l&&l[i.getItemVisual(e,"drawType")||"fill"],c=l&&l.stroke,d=this.mainType,f=d==="series",h=i.userOutput&&i.userOutput.get();return{componentType:d,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:f?this.subType:null,seriesIndex:this.seriesIndex,seriesId:f?this.id:null,seriesName:f?this.name:null,name:a,dataIndex:s,data:o,dataType:t,value:r,color:u,borderColor:c,dimensionNames:h?h.fullDimensions:null,encode:h?h.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(e,t,i,r,s,a){t=t||"normal";var o=this.getData(i),l=this.getDataParams(e,i);if(a&&(l.value=a.interpolatedValue),r!=null&&vi(l.value)&&(l.value=l.value[r]),!s){var u=o.getItemModel(e);s=u.get(t==="normal"?["label","formatter"]:[t,"label","formatter"])}if($r(s))return l.status=t,l.dimensionIndex=r,s(l);if(ki(s)){var c=wce(s,l);return c.replace(Aet,function(d,f){var h=f.length,p=f;p.charAt(0)==="["&&p.charAt(h-1)==="]"&&(p=+p.slice(1,h-1));var m=k4(o,e,p);if(a&&vi(a.interpolatedValue)){var g=o.getDimensionIndex(p);g>=0&&(m=a.interpolatedValue[g])}return m!=null?m+"":""})}},n.prototype.getRawValue=function(e,t){return k4(this.getData(t),e)},n.prototype.formatTooltip=function(e,t,i){},n}();function Vj(n){var e,t;return Ni(n)?n.type&&(t=n):e=n,{text:e,frag:t}}function g2(n){return new Met(n)}var Met=function(){function n(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}return n.prototype.perform=function(e){var t=this._upstream,i=e&&e.skip;if(this._dirty&&t){var r=this.context;r.data=r.outputData=t.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var s;this._plan&&!i&&(s=this._plan(this.context));var a=c(this._modBy),o=this._modDataCount||0,l=c(e&&e.modBy),u=e&&e.modDataCount||0;(a!==l||o!==u)&&(s="reset");function c(_){return!(_>=1)&&(_=1),_}var d;(this._dirty||s==="reset")&&(this._dirty=!1,d=this._doReset(i)),this._modBy=l,this._modDataCount=u;var f=e&&e.step;if(t?this._dueEnd=t._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var h=this._dueIndex,p=Math.min(f!=null?this._dueIndex+f:1/0,this._dueEnd);if(!i&&(d||h<p)){var m=this._progress;if(vi(m))for(var g=0;g<m.length;g++)this._doProgress(m[g],h,p,l,u);else this._doProgress(m,h,p,l,u)}this._dueIndex=p;var v=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(e,t,i,r,s){$j.reset(t,i,r,s),this._callingProgress=e,this._callingProgress({start:t,end:i,count:i-t,next:$j.next},this.context)},n.prototype._doReset=function(e){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var t,i;!e&&this._reset&&(t=this._reset(this.context),t&&t.progress&&(i=t.forceFirstProgress,t=t.progress),vi(t)&&!t.length&&(t=null)),this._progress=t,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),i},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(e){(this._downstream!==e||this._dirty)&&(this._downstream=e,e._upstream=this,e.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e},n}(),$j=function(){var n,e,t,i,r,s={reset:function(l,u,c,d){e=l,n=u,t=c,i=d,r=Math.ceil(i/t),s.next=t>1&&i>0?o:a}};return s;function a(){return e<n?e++:null}function o(){var l=e%r*t+Math.ceil(e/r),u=e>=n?null:l<i?l:e;return e++,u}}();function jM(n,e){var t=e&&e.type;return t==="ordinal"?n:(t==="time"&&!Ws(n)&&n!=null&&n!=="-"&&(n=+zD(n)),n==null||n===""?NaN:+n)}_r({number:function(n){return parseFloat(n)},time:function(n){return+zD(n)},trim:function(n){return ki(n)?Rd(n):n}});var Iet=function(){function n(e,t){var i=e==="desc";this._resultLT=i?1:-1,t==null&&(t=i?"min":"max"),this._incomparable=t==="min"?-1/0:1/0}return n.prototype.evaluate=function(e,t){var i=Ws(e)?e:A4(e),r=Ws(t)?t:A4(t),s=isNaN(i),a=isNaN(r);if(s&&(i=this._incomparable),a&&(r=this._incomparable),s&&a){var o=ki(e),l=ki(t);o&&(i=l?e:0),l&&(r=o?t:0)}return i<r?this._resultLT:i>r?-this._resultLT:0},n}(),Det=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(e){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(e){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(e,t){},n.prototype.retrieveValueFromItem=function(e,t){},n.prototype.convertValue=function(e,t){return jM(e,t)},n}();function Ret(n,e){var t=new Det,i=n.data,r=t.sourceFormat=n.sourceFormat,s=n.startIndex,a="";n.seriesLayoutBy!==Qf&&vl(a);var o=[],l={},u=n.dimensionsDefine;if(u)Nt(u,function(m,g){var v=m.name,_={index:g,name:v,displayName:m.displayName};if(o.push(_),v!=null){var y="";O_(l,v)&&vl(y),l[v]=_}});else for(var c=0;c<n.dimensionsDetectedCount;c++)o.push({index:c});var d=zce(r,Qf);e.__isBuiltIn&&(t.getRawDataItem=function(m){return d(i,s,o,m)},t.getRawData=us(Pet,null,n)),t.cloneRawData=us(ket,null,n);var f=Hce(r,Qf);t.count=us(f,null,i,s,o);var h=Vce(r);t.retrieveValue=function(m,g){var v=d(i,s,o,m);return p(v,g)};var p=t.retrieveValueFromItem=function(m,g){if(m!=null){var v=o[g];if(v)return h(m,g,v.name)}};return t.getDimensionInfo=us(Let,null,o,l),t.cloneAllDimensionInfo=us(Oet,null,o),t}function Pet(n){var e=n.sourceFormat;if(!oU(e)){var t="";vl(t)}return n.data}function ket(n){var e=n.sourceFormat,t=n.data;if(!oU(e)){var i="";vl(i)}if(e===Ll){for(var r=[],s=0,a=t.length;s<a;s++)r.push(t[s].slice());return r}else if(e===Jc){for(var r=[],s=0,a=t.length;s<a;s++)r.push(Rn({},t[s]));return r}}function Let(n,e,t){if(t!=null){if(Ws(t)||!isNaN(t)&&!O_(e,t))return n[t];if(O_(e,t))return e[t]}}function Oet(n){return Cr(n)}var $ce=_r();function Net(n){n=Cr(n);var e=n.type,t="";e||vl(t);var i=e.split(":");i.length!==2&&vl(t);var r=!1;i[0]==="echarts"&&(e=i[1],r=!0),n.__isBuiltIn=r,$ce.set(e,n)}function Bet(n,e,t){var i=Zo(n),r=i.length,s="";r||vl(s);for(var a=0,o=r;a<o;a++){var l=i[a];e=Fet(l,e),a!==o-1&&(e.length=Math.max(e.length,1))}return e}function Fet(n,e,t,i){var r="";e.length||vl(r),Ni(n)||vl(r);var s=n.type,a=$ce.get(s);a||vl(r);var o=Sr(e,function(u){return Ret(u,a)}),l=Zo(a.transform({upstream:o[0],upstreamList:o,config:Cr(n.config)}));return Sr(l,function(u,c){var d="";Ni(u)||vl(d),u.data||vl(d);var f=Bce(u.data);oU(f)||vl(d);var h,p=e[0];if(p&&c===0&&!u.dimensions){var m=p.startIndex;m&&(u.data=p.data.slice(0,m).concat(u.data)),h={seriesLayoutBy:Qf,sourceHeader:m,dimensions:p.metaRawOption.dimensions}}else h={seriesLayoutBy:Qf,sourceHeader:0,dimensions:u.dimensions};return wO(u.data,h,null)})}function oU(n){return n===Ll||n===Jc}var QD="undefined",Uet=typeof Uint32Array===QD?Array:Uint32Array,zet=typeof Uint16Array===QD?Array:Uint16Array,Gce=typeof Int32Array===QD?Array:Int32Array,Gj=typeof Float64Array===QD?Array:Float64Array,Wce={float:Gj,int:Gce,ordinal:Array,number:Array,time:Gj},V5;function KS(n){return n>65535?Uet:zet}function iy(){return[1/0,-1/0]}function Het(n){var e=n.constructor;return e===Array?n.slice():new e(n)}function Wj(n,e,t,i,r){var s=Wce[t||"float"];if(r){var a=n[e],o=a&&a.length;if(o!==i){for(var l=new s(i),u=0;u<o;u++)l[u]=a[u];n[e]=l}}else n[e]=new s(i)}var TO=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=_r()}return n.prototype.initData=function(e,t,i){this._provider=e,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var r=e.getSource(),s=this.defaultDimValueGetter=V5[r.sourceFormat];this._dimValueGetter=i||s,this._rawExtent=[],Fce(r),this._dimensions=Sr(t,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,e.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(e,t){var i=this._calcDimNameToIdx,r=this._dimensions,s=i.get(e);if(s!=null){if(r[s].type===t)return s}else s=r.length;return r[s]={type:t},i.set(e,s),this._chunks[s]=new Wce[t||"float"](this._rawCount),this._rawExtent[s]=iy(),s},n.prototype.collectOrdinalMeta=function(e,t){var i=this._chunks[e],r=this._dimensions[e],s=this._rawExtent,a=r.ordinalOffset||0,o=i.length;a===0&&(s[e]=iy());for(var l=s[e],u=a;u<o;u++){var c=i[u]=t.parseAndCollect(i[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}r.ordinalMeta=t,r.ordinalOffset=o,r.type="ordinal"},n.prototype.getOrdinalMeta=function(e){var t=this._dimensions[e],i=t.ordinalMeta;return i},n.prototype.getDimensionProperty=function(e){var t=this._dimensions[e];return t&&t.property},n.prototype.appendData=function(e){var t=this._provider,i=this.count();t.appendData(e);var r=t.count();return t.persistent||(r+=i),i<r&&this._initDataFromProvider(i,r,!0),[i,r]},n.prototype.appendValues=function(e,t){for(var i=this._chunks,r=this._dimensions,s=r.length,a=this._rawExtent,o=this.count(),l=o+Math.max(e.length,t||0),u=0;u<s;u++){var c=r[u];Wj(i,u,c.type,l,!0)}for(var d=[],f=o;f<l;f++)for(var h=f-o,p=0;p<s;p++){var c=r[p],m=V5.arrayRows.call(this,e[h]||d,c.property,h,p);i[p][f]=m;var g=a[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}return this._rawCount=this._count=l,{start:o,end:l}},n.prototype._initDataFromProvider=function(e,t,i){for(var r=this._provider,s=this._chunks,a=this._dimensions,o=a.length,l=this._rawExtent,u=Sr(a,function(_){return _.property}),c=0;c<o;c++){var d=a[c];l[c]||(l[c]=iy()),Wj(s,c,d.type,t,i)}if(r.fillStorage)r.fillStorage(e,t,s,l);else for(var f=[],h=e;h<t;h++){f=r.getItem(h,f);for(var p=0;p<o;p++){var m=s[p],g=this._dimValueGetter(f,u[p],h,p);m[h]=g;var v=l[p];g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}}!r.persistent&&r.clean&&r.clean(),this._rawCount=this._count=t,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(e,t){if(!(t>=0&&t<this._count))return NaN;var i=this._chunks[e];return i?i[this.getRawIndex(t)]:NaN},n.prototype.getValues=function(e,t){var i=[],r=[];if(t==null){t=e,e=[];for(var s=0;s<this._dimensions.length;s++)r.push(s)}else r=e;for(var s=0,a=r.length;s<a;s++)i.push(this.get(r[s],t));return i},n.prototype.getByRawIndex=function(e,t){if(!(t>=0&&t<this._rawCount))return NaN;var i=this._chunks[e];return i?i[t]:NaN},n.prototype.getSum=function(e){var t=this._chunks[e],i=0;if(t)for(var r=0,s=this.count();r<s;r++){var a=this.get(e,r);isNaN(a)||(i+=a)}return i},n.prototype.getMedian=function(e){var t=[];this.each([e],function(s){isNaN(s)||t.push(s)});var i=t.sort(function(s,a){return s-a}),r=this.count();return r===0?0:r%2===1?i[(r-1)/2]:(i[r/2]+i[r/2-1])/2},n.prototype.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,i=t[e];if(i!=null&&i<this._count&&i===e)return e;for(var r=0,s=this._count-1;r<=s;){var a=(r+s)/2|0;if(t[a]<e)r=a+1;else if(t[a]>e)s=a-1;else return a}return-1},n.prototype.indicesOfNearest=function(e,t,i){var r=this._chunks,s=r[e],a=[];if(!s)return a;i==null&&(i=1/0);for(var o=1/0,l=-1,u=0,c=0,d=this.count();c<d;c++){var f=this.getRawIndex(c),h=t-s[f],p=Math.abs(h);p<=i&&((p<o||p===o&&h>=0&&l<0)&&(o=p,l=h,u=0),h===l&&(a[u++]=c))}return a.length=u,a},n.prototype.getIndices=function(){var e,t=this._indices;if(t){var i=t.constructor,r=this._count;if(i===Array){e=new i(r);for(var s=0;s<r;s++)e[s]=t[s]}else e=new i(t.buffer,0,r)}else{var i=KS(this._rawCount);e=new i(this.count());for(var s=0;s<e.length;s++)e[s]=s}return e},n.prototype.filter=function(e,t){if(!this._count)return this;for(var i=this.clone(),r=i.count(),s=KS(i._rawCount),a=new s(r),o=[],l=e.length,u=0,c=e[0],d=i._chunks,f=0;f<r;f++){var h=void 0,p=i.getRawIndex(f);if(l===0)h=t(f);else if(l===1){var m=d[c][p];h=t(m,f)}else{for(var g=0;g<l;g++)o[g]=d[e[g]][p];o[g]=f,h=t.apply(null,o)}h&&(a[u++]=p)}return u<r&&(i._indices=a),i._count=u,i._extent=[],i._updateGetRawIdx(),i},n.prototype.selectRange=function(e){var t=this.clone(),i=t._count;if(!i)return this;var r=Gs(e),s=r.length;if(!s)return this;var a=t.count(),o=KS(t._rawCount),l=new o(a),u=0,c=r[0],d=e[c][0],f=e[c][1],h=t._chunks,p=!1;if(!t._indices){var m=0;if(s===1){for(var g=h[r[0]],v=0;v<i;v++){var _=g[v];(_>=d&&_<=f||isNaN(_))&&(l[u++]=m),m++}p=!0}else if(s===2){for(var g=h[r[0]],y=h[r[1]],b=e[r[1]][0],x=e[r[1]][1],v=0;v<i;v++){var _=g[v],w=y[v];(_>=d&&_<=f||isNaN(_))&&(w>=b&&w<=x||isNaN(w))&&(l[u++]=m),m++}p=!0}}if(!p)if(s===1)for(var v=0;v<a;v++){var A=t.getRawIndex(v),_=h[r[0]][A];(_>=d&&_<=f||isNaN(_))&&(l[u++]=A)}else for(var v=0;v<a;v++){for(var T=!0,A=t.getRawIndex(v),C=0;C<s;C++){var E=r[C],_=h[E][A];(_<e[E][0]||_>e[E][1])&&(T=!1)}T&&(l[u++]=t.getRawIndex(v))}return u<a&&(t._indices=l),t._count=u,t._extent=[],t._updateGetRawIdx(),t},n.prototype.map=function(e,t){var i=this.clone(e);return this._updateDims(i,e,t),i},n.prototype.modify=function(e,t){this._updateDims(this,e,t)},n.prototype._updateDims=function(e,t,i){for(var r=e._chunks,s=[],a=t.length,o=e.count(),l=[],u=e._rawExtent,c=0;c<t.length;c++)u[t[c]]=iy();for(var d=0;d<o;d++){for(var f=e.getRawIndex(d),h=0;h<a;h++)l[h]=r[t[h]][f];l[a]=d;var p=i&&i.apply(null,l);if(p!=null){typeof p!="object"&&(s[0]=p,p=s);for(var c=0;c<p.length;c++){var m=t[c],g=p[c],v=u[m],_=r[m];_&&(_[f]=g),g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}}}},n.prototype.lttbDownSample=function(e,t){var i=this.clone([e],!0),r=i._chunks,s=r[e],a=this.count(),o=0,l=Math.floor(1/t),u=this.getRawIndex(0),c,d,f,h=new(KS(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));h[o++]=u;for(var p=1;p<a-1;p+=l){for(var m=Math.min(p+l,a-1),g=Math.min(p+l*2,a),v=(g+m)/2,_=0,y=m;y<g;y++){var b=this.getRawIndex(y),x=s[b];isNaN(x)||(_+=x)}_/=g-m;var w=p,A=Math.min(p+l,a),T=p-1,C=s[u];c=-1,f=w;for(var E=-1,I=0,y=w;y<A;y++){var b=this.getRawIndex(y),x=s[b];if(isNaN(x)){I++,E<0&&(E=b);continue}d=Math.abs((T-v)*(x-C)-(T-y)*(_-C)),d>c&&(c=d,f=b)}I>0&&I<A-w&&(h[o++]=Math.min(E,f),f=Math.max(E,f)),h[o++]=f,u=f}return h[o++]=this.getRawIndex(a-1),i._count=o,i._indices=h,i.getRawIndex=this._getRawIdx,i},n.prototype.downSample=function(e,t,i,r){for(var s=this.clone([e],!0),a=s._chunks,o=[],l=Math.floor(1/t),u=a[e],c=this.count(),d=s._rawExtent[e]=iy(),f=new(KS(this._rawCount))(Math.ceil(c/l)),h=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,o.length=l);for(var m=0;m<l;m++){var g=this.getRawIndex(p+m);o[m]=u[g]}var v=i(o),_=this.getRawIndex(Math.min(p+r(o,v)||0,c-1));u[_]=v,v<d[0]&&(d[0]=v),v>d[1]&&(d[1]=v),f[h++]=_}return s._count=h,s._indices=f,s._updateGetRawIdx(),s},n.prototype.each=function(e,t){if(this._count)for(var i=e.length,r=this._chunks,s=0,a=this.count();s<a;s++){var o=this.getRawIndex(s);switch(i){case 0:t(s);break;case 1:t(r[e[0]][o],s);break;case 2:t(r[e[0]][o],r[e[1]][o],s);break;default:for(var l=0,u=[];l<i;l++)u[l]=r[e[l]][o];u[l]=s,t.apply(null,u)}}},n.prototype.getDataExtent=function(e){var t=this._chunks[e],i=iy();if(!t)return i;var r=this.count(),s=!this._indices,a;if(s)return this._rawExtent[e].slice();if(a=this._extent[e],a)return a.slice();a=i;for(var o=a[0],l=a[1],u=0;u<r;u++){var c=this.getRawIndex(u),d=t[c];d<o&&(o=d),d>l&&(l=d)}return a=[o,l],this._extent[e]=a,a},n.prototype.getRawDataItem=function(e){var t=this.getRawIndex(e);if(this._provider.persistent)return this._provider.getItem(t);for(var i=[],r=this._chunks,s=0;s<r.length;s++)i.push(r[s][t]);return i},n.prototype.clone=function(e,t){var i=new n,r=this._chunks,s=e&&u0(e,function(o,l){return o[l]=!0,o},{});if(s)for(var a=0;a<r.length;a++)i._chunks[a]=s[a]?Het(r[a]):r[a];else i._chunks=r;return this._copyCommonProps(i),t||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(e){e._count=this._count,e._rawCount=this._rawCount,e._provider=this._provider,e._dimensions=this._dimensions,e._extent=Cr(this._extent),e._rawExtent=Cr(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var e=this._indices.constructor,t=void 0;if(e===Array){var i=this._indices.length;t=new e(i);for(var r=0;r<i;r++)t[r]=this._indices[r]}else t=new e(this._indices);return t}return null},n.prototype._getRawIdxIdentity=function(e){return e},n.prototype._getRawIdx=function(e){return e<this._count&&e>=0?this._indices[e]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function e(t,i,r,s){return jM(t[s],this._dimensions[s])}V5={arrayRows:e,objectRows:function(t,i,r,s){return jM(t[i],this._dimensions[s])},keyedColumns:e,original:function(t,i,r,s){var a=t&&(t.value==null?t:t.value);return jM(a instanceof Array?a[s]:a,this._dimensions[s])},typedArray:function(t,i,r,s){return t[s]}}}(),n}(),Vet=function(){function n(e){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=e}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(e,t){this._sourceList=e,this._upstreamSignList=t,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var e=this._sourceHost,t=this._getUpstreamSourceManagers(),i=!!t.length,r,s;if(OA(e)){var a=e,o=void 0,l=void 0,u=void 0;if(i){var c=t[0];c.prepareSource(),u=c.getSource(),o=u.data,l=u.sourceFormat,s=[c._getVersionSign()]}else o=a.get("data",!0),l=mu(o)?Hp:af,s=[];var d=this._getSourceMetaRawOption()||{},f=u&&u.metaRawOption||{},h=yr(d.seriesLayoutBy,f.seriesLayoutBy)||null,p=yr(d.sourceHeader,f.sourceHeader),m=yr(d.dimensions,f.dimensions),g=h!==f.seriesLayoutBy||!!p!=!!f.sourceHeader||m;r=g?[wO(o,{seriesLayoutBy:h,sourceHeader:p,dimensions:m},l)]:[]}else{var v=e;if(i){var _=this._applyTransform(t);r=_.sourceList,s=_.upstreamSignList}else{var y=v.get("source",!0);r=[wO(y,this._getSourceMetaRawOption(),null)],s=[]}}this._setLocalSource(r,s)},n.prototype._applyTransform=function(e){var t=this._sourceHost,i=t.get("transform",!0),r=t.get("fromTransformResult",!0);if(r!=null){var s="";e.length!==1&&qj(s)}var a,o=[],l=[];return Nt(e,function(u){u.prepareSource();var c=u.getSource(r||0),d="";r!=null&&!c&&qj(d),o.push(c),l.push(u._getVersionSign())}),i?a=Bet(i,o,{datasetIndex:t.componentIndex}):r!=null&&(a=[_et(o[0])]),{sourceList:a,upstreamSignList:l}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var e=this._getUpstreamSourceManagers(),t=0;t<e.length;t++){var i=e[t];if(i._isDirty()||this._upstreamSignList[t]!==i._getVersionSign())return!0}},n.prototype.getSource=function(e){e=e||0;var t=this._sourceList[e];if(!t){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(e)}return t},n.prototype.getSharedDataStore=function(e){var t=e.makeStoreSchema();return this._innerGetDataStore(t.dimensions,e.source,t.hash)},n.prototype._innerGetDataStore=function(e,t,i){var r=0,s=this._storeList,a=s[r];a||(a=s[r]={});var o=a[i];if(!o){var l=this._getUpstreamSourceManagers()[0];OA(this._sourceHost)&&l?o=l._innerGetDataStore(e,t,i):(o=new TO,o.initData(new Uce(t,e.length),e)),a[i]=o}return o},n.prototype._getUpstreamSourceManagers=function(){var e=this._sourceHost;if(OA(e)){var t=Ece(e);return t?[t.getSourceManager()]:[]}else return Sr(GJe(e),function(i){return i.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var e=this._sourceHost,t,i,r;if(OA(e))t=e.get("seriesLayoutBy",!0),i=e.get("sourceHeader",!0),r=e.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var s=e;t=s.get("seriesLayoutBy",!0),i=s.get("sourceHeader",!0),r=s.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:i,dimensions:r}},n}();function OA(n){return n.mainType==="series"}function qj(n){throw new Error(n)}var qce="line-height:1";function jce(n,e){var t=n.color||"#6e7079",i=n.fontSize||12,r=n.fontWeight||"400",s=n.color||"#464646",a=n.fontSize||14,o=n.fontWeight||"900";return e==="html"?{nameStyle:"font-size:"+Bu(i+"")+"px;color:"+Bu(t)+";font-weight:"+Bu(r+""),valueStyle:"font-size:"+Bu(a+"")+"px;color:"+Bu(s)+";font-weight:"+Bu(o+"")}:{nameStyle:{fontSize:i,fill:t,fontWeight:r},valueStyle:{fontSize:a,fill:s,fontWeight:o}}}var $et=[0,10,20,30],Get=["",`
`,`

`,`


`];function Dw(n,e){return e.type=n,e}function CO(n){return n.type==="section"}function Kce(n){return CO(n)?Wet:qet}function Xce(n){if(CO(n)){var e=0,t=n.blocks.length,i=t>1||t>0&&!n.noHeader;return Nt(n.blocks,function(r){var s=Xce(r);s>=e&&(e=s+ +(i&&(!s||CO(r)&&!r.noHeader)))}),e}return 0}function Wet(n,e,t,i){var r=e.noHeader,s=jet(Xce(e)),a=[],o=e.blocks||[];dh(!o||vi(o)),o=o||[];var l=n.orderMode;if(e.sortBlocks&&l){o=o.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(O_(u,l)){var c=new Iet(u[l],null);o.sort(function(p,m){return c.evaluate(p.sortParam,m.sortParam)})}else l==="seriesDesc"&&o.reverse()}Nt(o,function(p,m){var g=e.valueFormatter,v=Kce(p)(g?Rn(Rn({},n),{valueFormatter:g}):n,p,m>0?s.html:0,i);v!=null&&a.push(v)});var d=n.renderMode==="richText"?a.join(s.richText):AO(a.join(""),r?t:s.html);if(r)return d;var f=xO(e.header,"ordinal",n.useUTC),h=jce(i,n.renderMode).nameStyle;return n.renderMode==="richText"?Yce(n,f,h)+s.richText+d:AO('<div style="'+h+";"+qce+';">'+Bu(f)+"</div>"+d,t)}function qet(n,e,t,i){var r=n.renderMode,s=e.noName,a=e.noValue,o=!e.markerType,l=e.name,u=n.useUTC,c=e.valueFormatter||n.valueFormatter||function(b){return b=vi(b)?b:[b],Sr(b,function(x,w){return xO(x,vi(h)?h[w]:h,u)})};if(!(s&&a)){var d=o?"":n.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),f=s?"":xO(l,"ordinal",u),h=e.valueType,p=a?[]:c(e.value),m=!o||!s,g=!o&&s,v=jce(i,r),_=v.nameStyle,y=v.valueStyle;return r==="richText"?(o?"":d)+(s?"":Yce(n,f,_))+(a?"":Yet(n,p,m,g,y)):AO((o?"":d)+(s?"":Ket(f,!o,_))+(a?"":Xet(p,m,g,y)),t)}}function jj(n,e,t,i,r,s){if(n){var a=Kce(n),o={useUTC:r,renderMode:t,orderMode:i,markupStyleCreator:e,valueFormatter:n.valueFormatter};return a(o,n,0,s)}}function jet(n){return{html:$et[n],richText:Get[n]}}function AO(n,e){var t='<div style="clear:both"></div>',i="margin: "+e+"px 0 0";return'<div style="'+i+";"+qce+';">'+n+t+"</div>"}function Ket(n,e,t){var i=e?"margin-left:2px":"";return'<span style="'+t+";"+i+'">'+Bu(n)+"</span>"}function Xet(n,e,t,i){var r=t?"10px":"20px",s=e?"float:right;margin-left:"+r:"";return n=vi(n)?n:[n],'<span style="'+s+";"+i+'">'+Sr(n,function(a){return Bu(a)}).join("&nbsp;&nbsp;")+"</span>"}function Yce(n,e,t){return n.markupStyleCreator.wrapRichTextStyle(e,t)}function Yet(n,e,t,i,r){var s=[r],a=i?10:20;return t&&s.push({padding:[0,0,0,a],align:"right"}),n.markupStyleCreator.wrapRichTextStyle(vi(e)?e.join("  "):e,s)}function Qet(n,e){var t=n.getData().getItemVisual(e,"style"),i=t[n.visualDrawType];return Aw(i)}function Qce(n,e){var t=n.get("padding");return t??(e==="richText"?[8,10]:10)}var $5=function(){function n(){this.richTextStyles={},this._nextStyleNameId=pue()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(e,t,i){var r=i==="richText"?this._generateStyleName():null,s=OJe({color:t,type:e,renderMode:i,markerId:r});return ki(s)?s:(this.richTextStyles[r]=s.style,s.content)},n.prototype.wrapRichTextStyle=function(e,t){var i={};vi(t)?Nt(t,function(s){return Rn(i,s)}):Rn(i,t);var r=this._generateStyleName();return this.richTextStyles[r]=i,"{"+r+"|"+e+"}"},n}();function Zet(n){var e=n.series,t=n.dataIndex,i=n.multipleSeries,r=e.getData(),s=r.mapDimensionsAll("defaultedTooltip"),a=s.length,o=e.getRawValue(t),l=vi(o),u=Qet(e,t),c,d,f,h;if(a>1||l&&!a){var p=Jet(o,e,t,s,u);c=p.inlineValues,d=p.inlineValueTypes,f=p.blocks,h=p.inlineValues[0]}else if(a){var m=r.getDimensionInfo(s[0]);h=c=k4(r,t,s[0]),d=m.type}else h=c=l?o[0]:o;var g=N9(e),v=g&&e.name||"",_=r.getName(t),y=i?v:_;return Dw("section",{header:v,noHeader:i||!g,sortParam:h,blocks:[Dw("nameValue",{markerType:"item",markerColor:u,name:y,noName:!Rd(y),value:c,valueType:d})].concat(f||[])})}function Jet(n,e,t,i,r){var s=e.getData(),a=u0(n,function(d,f,h){var p=s.getDimensionInfo(h);return d=d||p&&p.tooltip!==!1&&p.displayName!=null},!1),o=[],l=[],u=[];i.length?Nt(i,function(d){c(k4(s,t,d),d)}):Nt(n,c);function c(d,f){var h=s.getDimensionInfo(f);!h||h.otherDims.tooltip===!1||(a?u.push(Dw("nameValue",{markerType:"subItem",markerColor:r,name:h.displayName,value:d,valueType:h.type})):(o.push(d),l.push(h.type)))}return{inlineValues:o,inlineValueTypes:l,blocks:u}}var jh=Ua();function NA(n,e){return n.getName(e)||n.getId(e)}var ett="__universalTransitionEnabled",ZD=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._selectedDataIndicesMap={},t}return e.prototype.init=function(t,i,r){this.seriesIndex=this.componentIndex,this.dataTask=g2({count:ntt,reset:itt}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,r);var s=jh(this).sourceManager=new Vet(this);s.prepareSource();var a=this.getInitialData(t,r);Xj(a,this),this.dataTask.context.data=a,jh(this).dataBeforeProcessed=a,Kj(this),this._initSelectedMapFromData(a)},e.prototype.mergeDefaultAndTheme=function(t,i){var r=P4(this),s=r?iU(t):{},a=this.subType;Ms.hasClass(a)&&(a+="Series"),xs(t,i.getTheme().get(this.subType)),xs(t,this.getDefaultOption()),lO(t,"label",["show"]),this.fillDataTextStyle(t.data),r&&Mw(t,s,r)},e.prototype.mergeOption=function(t,i){t=xs(this.option,t,!0),this.fillDataTextStyle(t.data);var r=P4(this);r&&Mw(this.option,t,r);var s=jh(this).sourceManager;s.dirty(),s.prepareSource();var a=this.getInitialData(t,i);Xj(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,jh(this).dataBeforeProcessed=a,Kj(this),this._initSelectedMapFromData(a)},e.prototype.fillDataTextStyle=function(t){if(t&&!mu(t))for(var i=["show"],r=0;r<t.length;r++)t[r]&&t[r].label&&lO(t[r],"label",i)},e.prototype.getInitialData=function(t,i){},e.prototype.appendData=function(t){var i=this.getRawData();i.appendData(t.data)},e.prototype.getData=function(t){var i=EO(this);if(i){var r=i.context.data;return t==null?r:r.getLinkedData(t)}else return jh(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var i=EO(this);if(i){var r=i.context;r.outputData=t,i!==this.dataTask&&(r.data=t)}jh(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return _r(t)},e.prototype.getSourceManager=function(){return jh(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return jh(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,i,r){return Zet({series:this,dataIndex:t,multipleSeries:i})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(tr.node&&!(t&&t.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,i,r){var s=this.ecModel,a=rU.prototype.getColorFromPalette.call(this,t,i,r);return a||(a=s.getColorFromPalette(t,i,r)),a},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,i){this._innerSelect(this.getData(i),t)},e.prototype.unselect=function(t,i){var r=this.option.selectedMap;if(r){var s=this.option.selectedMode,a=this.getData(i);if(s==="series"||r==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<t.length;o++){var l=t[o],u=NA(a,l);r[u]=!1,this._selectedDataIndicesMap[u]=-1}}},e.prototype.toggleSelect=function(t,i){for(var r=[],s=0;s<t.length;s++)r[0]=t[s],this.isSelected(t[s],i)?this.unselect(r,i):this.select(r,i)},e.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,i=Gs(t),r=[],s=0;s<i.length;s++){var a=t[i[s]];a>=0&&r.push(a)}return r},e.prototype.isSelected=function(t,i){var r=this.option.selectedMap;if(!r)return!1;var s=this.getData(i);return(r==="all"||r[NA(s,t)])&&!s.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[ett])return!0;var t=this.option.universalTransition;return t?t===!0?!0:t&&t.enabled:!1},e.prototype._innerSelect=function(t,i){var r,s,a=this.option,o=a.selectedMode,l=i.length;if(!(!o||!l)){if(o==="series")a.selectedMap="all";else if(o==="multiple"){Ni(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var d=i[c],f=NA(t,d);u[f]=!0,this._selectedDataIndicesMap[f]=t.getRawIndex(d)}}else if(o==="single"||o===!0){var h=i[l-1],f=NA(t,h);a.selectedMap=(r={},r[f]=!0,r),this._selectedDataIndicesMap=(s={},s[f]=t.getRawIndex(h),s)}}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var i=[];t.hasItemOption&&t.each(function(r){var s=t.getRawDataItem(r);s&&s.selected&&i.push(r)}),i.length>0&&this._innerSelect(t,i)}},e.registerClass=function(t){return Ms.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Ms);Ah(ZD,Eet);Ah(ZD,rU);bue(ZD,Ms);function Kj(n){var e=n.name;N9(n)||(n.name=ttt(n)||e)}function ttt(n){var e=n.getRawData(),t=e.mapDimensionsAll("seriesName"),i=[];return Nt(t,function(r){var s=e.getDimensionInfo(r);s.displayName&&i.push(s.displayName)}),i.join(" ")}function ntt(n){return n.model.getRawData().count()}function itt(n){var e=n.model;return e.setData(e.getRawData().cloneShallow()),rtt}function rtt(n,e){e.outputData&&n.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function Xj(n,e){Nt(HKe(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(t){n.wrapMethod(t,pa(stt,e))})}function stt(n,e){var t=EO(n);return t&&t.setOutputEnd((e||this).count()),e}function EO(n){var e=(n.ecModel||{}).scheduler,t=e&&e.getPipeline(n.uid);if(t){var i=t.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(n.uid))}return i}}const Rw=ZD;var lU=function(){function n(){this.group=new Yd,this.uid=KD("viewComponent")}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){},n.prototype.updateLayout=function(e,t,i,r){},n.prototype.updateVisual=function(e,t,i,r){},n.prototype.toggleBlurSeries=function(e,t,i){},n.prototype.eachRendered=function(e){var t=this.group;t&&t.traverse(e)},n}();U9(lU);z9(lU);const d0=lU;function att(){var n=Ua();return function(e){var t=n(e),i=e.pipelineContext,r=!!t.large,s=!!t.progressiveRender,a=t.large=!!(i&&i.large),o=t.progressiveRender=!!(i&&i.progressiveRender);return(r!==a||s!==o)&&"reset"}}var Zce=Ua(),ott=att(),uU=function(){function n(){this.group=new Yd,this.uid=KD("viewChart"),this.renderTask=g2({plan:ltt,reset:utt}),this.renderTask.context={view:this}}return n.prototype.init=function(e,t){},n.prototype.render=function(e,t,i,r){},n.prototype.highlight=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&Qj(s,r,"emphasis")},n.prototype.downplay=function(e,t,i,r){var s=e.getData(r&&r.dataType);s&&Qj(s,r,"normal")},n.prototype.remove=function(e,t){this.group.removeAll()},n.prototype.dispose=function(e,t){},n.prototype.updateView=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateLayout=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.updateVisual=function(e,t,i,r){this.render(e,t,i,r)},n.prototype.eachRendered=function(e){mce(this.group,e)},n.markUpdateMethod=function(e,t){Zce(e).updateMethod=t},n.protoInitialize=function(){var e=n.prototype;e.type="chart"}(),n}();function Yj(n,e,t){n&&yO(n)&&(e==="emphasis"?hO:pO)(n,t)}function Qj(n,e,t){var i=OT(n,e),r=e&&e.highlightKey!=null?iZe(e.highlightKey):null;i!=null?Nt(Zo(i),function(s){Yj(n.getItemGraphicEl(s),t,r)}):n.eachItemGraphicEl(function(s){Yj(s,t,r)})}U9(uU);z9(uU);function ltt(n){return ott(n.model)}function utt(n){var e=n.model,t=n.ecModel,i=n.api,r=n.payload,s=e.pipelineContext.progressiveRender,a=n.view,o=r&&Zce(r).updateMethod,l=s?"incrementalPrepareRender":o&&a[o]?o:"render";return l!=="render"&&a[l](e,t,i,r),ctt[l]}var ctt={incrementalPrepareRender:{progress:function(n,e){e.view.incrementalRender(n,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(n,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};const j1=uU;var L4="\0__throttleOriginMethod",Zj="\0__throttleRate",Jj="\0__throttleType";function cU(n,e,t){var i,r=0,s=0,a=null,o,l,u,c;e=e||0;function d(){s=new Date().getTime(),a=null,n.apply(l,u||[])}var f=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];i=new Date().getTime(),l=this,u=h;var m=c||e,g=c||t;c=null,o=i-(g?r:s)-m,clearTimeout(a),g?a=setTimeout(d,m):o>=0?d():a=setTimeout(d,-o),r=i};return f.clear=function(){a&&(clearTimeout(a),a=null)},f.debounceNextCall=function(h){c=h},f}function Jce(n,e,t,i){var r=n[e];if(r){var s=r[L4]||r,a=r[Jj],o=r[Zj];if(o!==t||a!==i){if(t==null||!i)return n[e]=s;r=n[e]=cU(s,t,i==="debounce"),r[L4]=s,r[Jj]=i,r[Zj]=t}return r}}function MO(n,e){var t=n[e];t&&t[L4]&&(t.clear&&t.clear(),n[e]=t[L4])}var eK=Ua(),tK={itemStyle:Tw(yce,!0),lineStyle:Tw(vce,!0)},dtt={lineStyle:"stroke",itemStyle:"fill"};function ede(n,e){var t=n.visualStyleMapper||tK[e];return t||(console.warn("Unknown style type '"+e+"'."),tK.itemStyle)}function tde(n,e){var t=n.visualDrawType||dtt[e];return t||(console.warn("Unknown style type '"+e+"'."),"fill")}var ftt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=n.getModel(i),s=ede(n,i),a=s(r),o=r.getShallow("decal");o&&(t.setVisual("decal",o),o.dirty=!0);var l=tde(n,i),u=a[l],c=$r(u)?u:null,d=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||d){var f=n.getColorFromPalette(n.name,null,e.getSeriesCount());a[l]||(a[l]=f,t.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||$r(a.fill)?f:a.fill,a.stroke=a.stroke==="auto"||$r(a.stroke)?f:a.stroke}if(t.setVisual("style",a),t.setVisual("drawType",l),!e.isSeriesFiltered(n)&&c)return t.setVisual("colorFromPalette",!1),{dataEach:function(h,p){var m=n.getDataParams(p),g=Rn({},a);g[l]=c(m),h.setItemVisual(p,"style",g)}}}},XS=new xo,htt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!(n.ignoreStyleOnData||e.isSeriesFiltered(n))){var t=n.getData(),i=n.visualStyleAccessPath||"itemStyle",r=ede(n,i),s=t.getVisual("drawType");return{dataEach:t.hasItemOption?function(a,o){var l=a.getRawDataItem(o);if(l&&l[i]){XS.option=l[i];var u=r(XS),c=a.ensureUniqueItemVisual(o,"style");Rn(c,u),XS.option.decal&&(a.setItemVisual(o,"decal",XS.option.decal),XS.option.decal.dirty=!0),s in u&&a.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},ptt={performRawSeries:!0,overallReset:function(n){var e=_r();n.eachSeries(function(t){var i=t.getColorBy();if(!t.isColorBySeries()){var r=t.type+"-"+i,s=e.get(r);s||(s={},e.set(r,s)),eK(t).scope=s}}),n.eachSeries(function(t){if(!(t.isColorBySeries()||n.isSeriesFiltered(t))){var i=t.getRawData(),r={},s=t.getData(),a=eK(t).scope,o=t.visualStyleAccessPath||"itemStyle",l=tde(t,o);s.each(function(u){var c=s.getRawIndex(u);r[c]=u}),i.each(function(u){var c=r[u],d=s.getItemVisual(c,"colorFromPalette");if(d){var f=s.ensureUniqueItemVisual(c,"style"),h=i.getName(u)||u+"",p=i.count();f[l]=t.getColorFromPalette(h,a,p)}})}})}},BA=Math.PI;function mtt(n,e){e=e||{},Cs(e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var t=new Yd,i=new El({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});t.add(i);var r=new nl({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new El({style:{fill:"none"},textContent:r,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});t.add(s);var a;return e.showSpinner&&(a=new j9({shape:{startAngle:-BA/2,endAngle:-BA/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:BA*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:BA*3/2}).delay(300).start("circularInOut"),t.add(a)),t.resize=function(){var o=r.getBoundingRect().width,l=e.showSpinner?e.spinnerRadius:0,u=(n.getWidth()-l*2-(e.showSpinner&&o?10:0)-o)/2-(e.showSpinner&&o?0:5+o/2)+(e.showSpinner?0:o/2)+(o?0:l),c=n.getHeight()/2;e.showSpinner&&a.setShape({cx:u,cy:c}),s.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),i.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}var gtt=function(){function n(e,t,i,r){this._stageTaskMap=_r(),this.ecInstance=e,this.api=t,i=this._dataProcessorHandlers=i.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=i.concat(r)}return n.prototype.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(i){var r=i.overallTask;r&&r.dirty()})},n.prototype.getPerformArgs=function(e,t){if(e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),r=i.context,s=!t&&i.progressiveEnabled&&(!r||r.progressiveRender)&&e.__idxInPipeline>i.blockIndex,a=s?i.step:null,o=r&&r.modDataCount,l=o!=null?Math.ceil(o/a):null;return{step:a,modBy:l,modDataCount:o}}},n.prototype.getPipeline=function(e){return this._pipelineMap.get(e)},n.prototype.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),r=e.getData(),s=r.count(),a=i.progressiveEnabled&&t.incrementalPrepareRender&&s>=i.threshold,o=e.get("large")&&s>=e.get("largeThreshold"),l=e.get("progressiveChunkMode")==="mod"?s:null;e.pipelineContext=i.context={progressiveRender:a,modDataCount:l,large:o}},n.prototype.restorePipelines=function(e){var t=this,i=t._pipelineMap=_r();e.eachSeries(function(r){var s=r.getProgressive(),a=r.uid;i.set(a,{id:a,head:null,tail:null,threshold:r.getProgressiveThreshold(),progressiveEnabled:s&&!(r.preventIncremental&&r.preventIncremental()),blockIndex:-1,step:Math.round(s||700),count:0}),t._pipe(r,r.dataTask)})},n.prototype.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.api.getModel(),i=this.api;Nt(this._allHandlers,function(r){var s=e.get(r.uid)||e.set(r.uid,{}),a="";dh(!(r.reset&&r.overallReset),a),r.reset&&this._createSeriesStageTask(r,s,t,i),r.overallReset&&this._createOverallStageTask(r,s,t,i)},this)},n.prototype.prepareView=function(e,t,i,r){var s=e.renderTask,a=s.context;a.model=t,a.ecModel=i,a.api=r,s.__block=!e.incrementalPrepareRender,this._pipe(t,s)},n.prototype.performDataProcessorTasks=function(e,t){this._performStageTasks(this._dataProcessorHandlers,e,t,{block:!0})},n.prototype.performVisualTasks=function(e,t,i){this._performStageTasks(this._visualHandlers,e,t,i)},n.prototype._performStageTasks=function(e,t,i,r){r=r||{};var s=!1,a=this;Nt(e,function(l,u){if(!(r.visualType&&r.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),d=c.seriesTaskMap,f=c.overallTask;if(f){var h,p=f.agentStubMap;p.each(function(g){o(r,g)&&(g.dirty(),h=!0)}),h&&f.dirty(),a.updatePayload(f,i);var m=a.getPerformArgs(f,r.block);p.each(function(g){g.perform(m)}),f.perform(m)&&(s=!0)}else d&&d.each(function(g,v){o(r,g)&&g.dirty();var _=a.getPerformArgs(g,r.block);_.skip=!l.performRawSeries&&t.isSeriesFiltered(g.context.model),a.updatePayload(g,i),g.perform(_)&&(s=!0)})}});function o(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=s||this.unfinished},n.prototype.performSeriesTasks=function(e){var t;e.eachSeries(function(i){t=i.dataTask.perform()||t}),this.unfinished=t||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})},n.prototype.updatePayload=function(e,t){t!=="remain"&&(e.context.payload=t)},n.prototype._createSeriesStageTask=function(e,t,i,r){var s=this,a=t.seriesTaskMap,o=t.seriesTaskMap=_r(),l=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?i.eachRawSeries(c):l?i.eachRawSeriesByType(l,c):u&&u(i,r).each(c);function c(d){var f=d.uid,h=o.set(f,a&&a.get(f)||g2({plan:Stt,reset:xtt,count:Ttt}));h.context={model:d,ecModel:i,api:r,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:s},s._pipe(d,h)}},n.prototype._createOverallStageTask=function(e,t,i,r){var s=this,a=t.overallTask=t.overallTask||g2({reset:vtt});a.context={ecModel:i,api:r,overallReset:e.overallReset,scheduler:s};var o=a.agentStubMap,l=a.agentStubMap=_r(),u=e.seriesType,c=e.getTargetSeries,d=!0,f=!1,h="";dh(!e.createOnAllSeries,h),u?i.eachRawSeriesByType(u,p):c?c(i,r).each(p):(d=!1,Nt(i.getSeries(),p));function p(m){var g=m.uid,v=l.set(g,o&&o.get(g)||(f=!0,g2({reset:ytt,onDirty:btt})));v.context={model:m,overallProgress:d},v.agent=a,v.__block=d,s._pipe(m,v)}f&&a.dirty()},n.prototype._pipe=function(e,t){var i=e.uid,r=this._pipelineMap.get(i);!r.head&&(r.head=t),r.tail&&r.tail.pipe(t),r.tail=t,t.__idxInPipeline=r.count++,t.__pipeline=r},n.wrapStageHandler=function(e,t){return $r(e)&&(e={overallReset:e,seriesType:Ctt(e)}),e.uid=KD("stageHandler"),t&&(e.visualType=t),e},n}();function vtt(n){n.overallReset(n.ecModel,n.api,n.payload)}function ytt(n){return n.overallProgress&&_tt}function _tt(){this.agent.dirty(),this.getDownstream().dirty()}function btt(){this.agent&&this.agent.dirty()}function Stt(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function xtt(n){n.useClearVisual&&n.data.clearAllVisual();var e=n.resetDefines=Zo(n.reset(n.model,n.ecModel,n.api,n.payload));return e.length>1?Sr(e,function(t,i){return nde(i)}):wtt}var wtt=nde(0);function nde(n){return function(e,t){var i=t.data,r=t.resetDefines[n];if(r&&r.dataEach)for(var s=e.start;s<e.end;s++)r.dataEach(i,s);else r&&r.progress&&r.progress(e,i)}}function Ttt(n){return n.data.count()}function Ctt(n){O4=null;try{n(Pw,ide)}catch{}return O4}var Pw={},ide={},O4;rde(Pw,Rce);rde(ide,Pce);Pw.eachSeriesByType=Pw.eachRawSeriesByType=function(n){O4=n};Pw.eachComponent=function(n){n.mainType==="series"&&n.subType&&(O4=n.subType)};function rde(n,e){for(var t in e.prototype)n[t]=Al}const sde=gtt;var nK=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const Att={color:nK,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],nK]};var Uo="#B9B8CE",iK="#100C2A",FA=function(){return{axisLine:{lineStyle:{color:Uo}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},rK=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],ade={darkMode:!0,color:rK,backgroundColor:iK,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Uo}},textStyle:{color:Uo},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Uo}},dataZoom:{borderColor:"#71708A",textStyle:{color:Uo},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Uo}},timeline:{lineStyle:{color:Uo},label:{color:Uo},controlStyle:{color:Uo,borderColor:Uo}},calendar:{itemStyle:{color:iK},dayLabel:{color:Uo},monthLabel:{color:Uo},yearLabel:{color:Uo}},timeAxis:FA(),logAxis:FA(),valueAxis:FA(),categoryAxis:FA(),line:{symbol:"circle"},graph:{color:rK},gauge:{title:{color:Uo},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Uo},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};ade.categoryAxis.splitLine.show=!1;const Ett=ade;var Mtt=function(){function n(){}return n.prototype.normalizeQuery=function(e){var t={},i={},r={};if(ki(e)){var s=Pd(e);t.mainType=s.main||null,t.subType=s.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Nt(e,function(l,u){for(var c=!1,d=0;d<a.length;d++){var f=a[d],h=u.lastIndexOf(f);if(h>0&&h===u.length-f.length){var p=u.slice(0,h);p!=="data"&&(t.mainType=p,t[f.toLowerCase()]=l,c=!0)}}o.hasOwnProperty(u)&&(i[u]=l,c=!0),c||(r[u]=l)})}return{cptQuery:t,dataQuery:i,otherQuery:r}},n.prototype.filter=function(e,t){var i=this.eventInfo;if(!i)return!0;var r=i.targetEl,s=i.packedEvent,a=i.model,o=i.view;if(!a||!o)return!0;var l=t.cptQuery,u=t.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,s,"name")&&c(u,s,"dataIndex")&&c(u,s,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(e,t.otherQuery,r,s));function c(d,f,h,p){return d[h]==null||f[p||h]===d[h]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),IO=["symbol","symbolSize","symbolRotate","symbolOffset"],sK=IO.concat(["symbolKeepAspect"]),Itt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){var t=n.getData();if(n.legendIcon&&t.setVisual("legendIcon",n.legendIcon),!n.hasSymbolVisual)return;for(var i={},r={},s=!1,a=0;a<IO.length;a++){var o=IO[a],l=n.get(o);$r(l)?(s=!0,r[o]=l):i[o]=l}if(i.symbol=i.symbol||n.defaultSymbol,t.setVisual(Rn({legendIcon:n.legendIcon||i.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},i)),e.isSeriesFiltered(n))return;var u=Gs(r);function c(d,f){for(var h=n.getRawValue(f),p=n.getDataParams(f),m=0;m<u.length;m++){var g=u[m];d.setItemVisual(f,g,r[g](h,p))}}return{dataEach:s?c:null}}},Dtt={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,e){if(!n.hasSymbolVisual||e.isSeriesFiltered(n))return;var t=n.getData();function i(r,s){for(var a=r.getItemModel(s),o=0;o<sK.length;o++){var l=sK[o],u=a.getShallow(l,!0);u!=null&&r.setItemVisual(s,l,u)}}return{dataEach:t.hasItemOption?i:null}}};function Rtt(n,e,t){switch(t){case"color":var i=n.getItemVisual(e,"style");return i[n.getVisual("drawType")];case"opacity":return n.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(e,t)}}function Ptt(n,e){switch(e){case"color":var t=n.getVisual("style");return t[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(e)}}function ktt(n,e){function t(i,r){var s=[];return i.eachComponent({mainType:"series",subType:n,query:r},function(a){s.push(a.seriesIndex)}),s}Nt([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(i){e(i[0],function(r,s,a){r=Rn({},r),a.dispatchAction(Rn(r,{type:i[1],seriesIndex:t(s,r)}))})})}function ry(n,e,t,i,r){var s=n+e;t.isSilent(s)||i.eachComponent({mainType:"series",subType:"pie"},function(a){for(var o=a.seriesIndex,l=a.option.selectedMap,u=r.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===o){var d=a.getData(),f=OT(d,r.fromActionPayload);t.trigger(s,{type:s,seriesId:a.id,name:vi(f)?d.getName(f[0]):d.getName(f),selected:ki(l)?l:Rn({},l)})}})}function Ltt(n,e,t){n.on("selectchanged",function(i){var r=t.getModel();i.isFromClick?(ry("map","selectchanged",e,r,i),ry("pie","selectchanged",e,r,i)):i.fromAction==="select"?(ry("map","selected",e,r,i),ry("pie","selected",e,r,i)):i.fromAction==="unselect"&&(ry("map","unselected",e,r,i),ry("pie","unselected",e,r,i))})}function Bx(n,e,t){for(var i;n&&!(e(n)&&(i=n,t));)n=n.__hostTarget||n.parent;return i}var Ott=Math.round(Math.random()*9),Ntt=typeof Object.defineProperty=="function",Btt=function(){function n(){this._id="__ec_inner_"+Ott++}return n.prototype.get=function(e){return this._guard(e)[this._id]},n.prototype.set=function(e,t){var i=this._guard(e);return Ntt?Object.defineProperty(i,this._id,{value:t,enumerable:!1,configurable:!0}):i[this._id]=t,this},n.prototype.delete=function(e){return this.has(e)?(delete this._guard(e)[this._id],!0):!1},n.prototype.has=function(e){return!!this._guard(e)[this._id]},n.prototype._guard=function(e){if(e!==Object(e))throw TypeError("Value of WeakMap is not a non-null object.");return e},n}();const Ftt=Btt;var Utt=ds.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i+s),n.lineTo(t-r,i+s),n.closePath()}}),ztt=ds.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,e){var t=e.cx,i=e.cy,r=e.width/2,s=e.height/2;n.moveTo(t,i-s),n.lineTo(t+r,i),n.lineTo(t,i+s),n.lineTo(t-r,i),n.closePath()}}),Htt=ds.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.x,i=e.y,r=e.width/5*3,s=Math.max(r,e.height),a=r/2,o=a*a/(s-a),l=i-s+a+o,u=Math.asin(o/a),c=Math.cos(u)*a,d=Math.sin(u),f=Math.cos(u),h=a*.6,p=a*.7;n.moveTo(t-c,l+o),n.arc(t,l,a,Math.PI-u,Math.PI*2+u),n.bezierCurveTo(t+c-d*h,l+o+f*h,t,i-p,t,i),n.bezierCurveTo(t,i-p,t-c+d*h,l+o+f*h,t-c,l+o),n.closePath()}}),Vtt=ds.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,e){var t=e.height,i=e.width,r=e.x,s=e.y,a=i/3*2;n.moveTo(r,s),n.lineTo(r+a,s+t),n.lineTo(r,s+t/4*3),n.lineTo(r-a,s+t),n.lineTo(r,s),n.closePath()}}),$tt={line:FT,rect:El,roundRect:El,square:El,circle:q9,diamond:ztt,pin:Htt,arrow:Vtt,triangle:Utt},Gtt={line:function(n,e,t,i,r){r.x1=n,r.y1=e+i/2,r.x2=n+t,r.y2=e+i/2},rect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i},roundRect:function(n,e,t,i,r){r.x=n,r.y=e,r.width=t,r.height=i,r.r=Math.min(t,i)/4},square:function(n,e,t,i,r){var s=Math.min(t,i);r.x=n,r.y=e,r.width=s,r.height=s},circle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.r=Math.min(t,i)/2},diamond:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i},pin:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},arrow:function(n,e,t,i,r){r.x=n+t/2,r.y=e+i/2,r.width=t,r.height=i},triangle:function(n,e,t,i,r){r.cx=n+t/2,r.cy=e+i/2,r.width=t,r.height=i}},DO={};Nt($tt,function(n,e){DO[e]=new n});var Wtt=ds.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,e,t){var i=oue(n,e,t),r=this.shape;return r&&r.symbolType==="pin"&&e.position==="inside"&&(i.y=t.y+t.height*.4),i},buildPath:function(n,e,t){var i=e.symbolType;if(i!=="none"){var r=DO[i];r||(i="rect",r=DO[i]),Gtt[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(n,r.shape,t)}}});function qtt(n,e){if(this.type!=="image"){var t=this.style;this.__isEmptyBrush?(t.stroke=n,t.fill=e||"#fff",t.lineWidth=2):this.shape.symbolType==="line"?t.stroke=n:t.fill=n,this.markRedraw()}}function dU(n,e,t,i,r,s,a){var o=n.indexOf("empty")===0;o&&(n=n.substr(5,1).toLowerCase()+n.substr(6));var l;return n.indexOf("image://")===0?l=dce(n.slice(8),new Qr(e,t,i,r),a?"center":"cover"):n.indexOf("path://")===0?l=X9(n.slice(7),{},new Qr(e,t,i,r),a?"center":"cover"):l=new Wtt({shape:{symbolType:n,x:e,y:t,width:i,height:r}}),l.__isEmptyBrush=o,l.setColor=qtt,s&&l.setColor(s),l}function jtt(n,e){if(n!=null)return vi(n)||(n=[n,n]),[da(n[0],e[0])||0,da(yr(n[1],n[0]),e[1])||0]}function sg(n){return isFinite(n)}function Ktt(n,e,t){var i=e.x==null?0:e.x,r=e.x2==null?1:e.x2,s=e.y==null?0:e.y,a=e.y2==null?0:e.y2;e.global||(i=i*t.width+t.x,r=r*t.width+t.x,s=s*t.height+t.y,a=a*t.height+t.y),i=sg(i)?i:0,r=sg(r)?r:1,s=sg(s)?s:0,a=sg(a)?a:0;var o=n.createLinearGradient(i,s,r,a);return o}function Xtt(n,e,t){var i=t.width,r=t.height,s=Math.min(i,r),a=e.x==null?.5:e.x,o=e.y==null?.5:e.y,l=e.r==null?.5:e.r;e.global||(a=a*i+t.x,o=o*r+t.y,l=l*s),a=sg(a)?a:.5,o=sg(o)?o:.5,l=l>=0&&sg(l)?l:.5;var u=n.createRadialGradient(a,o,0,a,o,l);return u}function RO(n,e,t){for(var i=e.type==="radial"?Xtt(n,e,t):Ktt(n,e,t),r=e.colorStops,s=0;s<r.length;s++)i.addColorStop(r[s].offset,r[s].color);return i}function Ytt(n,e){if(n===e||!n&&!e)return!1;if(!n||!e||n.length!==e.length)return!0;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!0;return!1}function UA(n){return parseInt(n,10)}function zA(n,e,t){var i=["width","height"][e],r=["clientWidth","clientHeight"][e],s=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(t[i]!=null&&t[i]!=="auto")return parseFloat(t[i]);var o=document.defaultView.getComputedStyle(n);return(n[r]||UA(o[i])||UA(n.style[i]))-(UA(o[s])||0)-(UA(o[a])||0)|0}function Qtt(n,e){return!n||n==="solid"||!(e>0)?null:n==="dashed"?[4*e,2*e]:n==="dotted"?[e]:Ws(n)?[n]:vi(n)?n:null}function ode(n){var e=n.style,t=e.lineDash&&e.lineWidth>0&&Qtt(e.lineDash,e.lineWidth),i=e.lineDashOffset;if(t){var r=e.strokeNoScale&&n.getLineScale?n.getLineScale():1;r&&r!==1&&(t=Sr(t,function(s){return s/r}),i/=r)}return[t,i]}var Ztt=new Gg(!0);function N4(n){var e=n.stroke;return!(e==null||e==="none"||!(n.lineWidth>0))}function aK(n){return typeof n=="string"&&n!=="none"}function B4(n){var e=n.fill;return e!=null&&e!=="none"}function oK(n,e){if(e.fillOpacity!=null&&e.fillOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.fillOpacity*e.opacity,n.fill(),n.globalAlpha=t}else n.fill()}function lK(n,e){if(e.strokeOpacity!=null&&e.strokeOpacity!==1){var t=n.globalAlpha;n.globalAlpha=e.strokeOpacity*e.opacity,n.stroke(),n.globalAlpha=t}else n.stroke()}function PO(n,e,t){var i=Sue(e.image,e.__image,t);if(VD(i)){var r=n.createPattern(i,e.repeat||"repeat");if(typeof DOMMatrix=="function"&&r&&r.setTransform){var s=new DOMMatrix;s.translateSelf(e.x||0,e.y||0),s.rotateSelf(0,0,(e.rotation||0)*VKe),s.scaleSelf(e.scaleX||1,e.scaleY||1),r.setTransform(s)}return r}}function Jtt(n,e,t,i){var r,s=N4(t),a=B4(t),o=t.strokePercent,l=o<1,u=!e.path;(!e.silent||l)&&u&&e.createPathProxy();var c=e.path||Ztt,d=e.__dirty;if(!i){var f=t.fill,h=t.stroke,p=a&&!!f.colorStops,m=s&&!!h.colorStops,g=a&&!!f.image,v=s&&!!h.image,_=void 0,y=void 0,b=void 0,x=void 0,w=void 0;(p||m)&&(w=e.getBoundingRect()),p&&(_=d?RO(n,f,w):e.__canvasFillGradient,e.__canvasFillGradient=_),m&&(y=d?RO(n,h,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=y),g&&(b=d||!e.__canvasFillPattern?PO(n,f,e):e.__canvasFillPattern,e.__canvasFillPattern=b),v&&(x=d||!e.__canvasStrokePattern?PO(n,h,e):e.__canvasStrokePattern,e.__canvasStrokePattern=b),p?n.fillStyle=_:g&&(b?n.fillStyle=b:a=!1),m?n.strokeStyle=y:v&&(x?n.strokeStyle=x:s=!1)}var A=e.getGlobalScale();c.setScale(A[0],A[1],e.segmentIgnoreThreshold);var T,C;n.setLineDash&&t.lineDash&&(r=ode(e),T=r[0],C=r[1]);var E=!0;(u||d&Zy)&&(c.setDPR(n.dpr),l?c.setContext(null):(c.setContext(n),E=!1),c.reset(),e.buildPath(c,e.shape,i),c.toStatic(),e.pathUpdated()),E&&c.rebuildPath(n,l?o:1),T&&(n.setLineDash(T),n.lineDashOffset=C),i||(t.strokeFirst?(s&&lK(n,t),a&&oK(n,t)):(a&&oK(n,t),s&&lK(n,t))),T&&n.setLineDash([])}function ent(n,e,t){var i=e.__image=Sue(t.image,e.__image,e,e.onload);if(!(!i||!VD(i))){var r=t.x||0,s=t.y||0,a=e.getWidth(),o=e.getHeight(),l=i.width/i.height;if(a==null&&o!=null?a=o*l:o==null&&a!=null?o=a/l:a==null&&o==null&&(a=i.width,o=i.height),t.sWidth&&t.sHeight){var u=t.sx||0,c=t.sy||0;n.drawImage(i,u,c,t.sWidth,t.sHeight,r,s,a,o)}else if(t.sx&&t.sy){var u=t.sx,c=t.sy,d=a-u,f=o-c;n.drawImage(i,u,c,d,f,r,s,a,o)}else n.drawImage(i,r,s,a,o)}}function tnt(n,e,t){var i,r=t.text;if(r!=null&&(r+=""),r){n.font=t.font||$g,n.textAlign=t.textAlign,n.textBaseline=t.textBaseline;var s=void 0,a=void 0;n.setLineDash&&t.lineDash&&(i=ode(e),s=i[0],a=i[1]),s&&(n.setLineDash(s),n.lineDashOffset=a),t.strokeFirst?(N4(t)&&n.strokeText(r,t.x,t.y),B4(t)&&n.fillText(r,t.x,t.y)):(B4(t)&&n.fillText(r,t.x,t.y),N4(t)&&n.strokeText(r,t.x,t.y)),s&&n.setLineDash([])}}var uK=["shadowBlur","shadowOffsetX","shadowOffsetY"],cK=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function lde(n,e,t,i,r){var s=!1;if(!i&&(t=t||{},e===t))return!1;if(i||e.opacity!==t.opacity){_l(n,r),s=!0;var a=Math.max(Math.min(e.opacity,1),0);n.globalAlpha=isNaN(a)?Ag.opacity:a}(i||e.blend!==t.blend)&&(s||(_l(n,r),s=!0),n.globalCompositeOperation=e.blend||Ag.blend);for(var o=0;o<uK.length;o++){var l=uK[o];(i||e[l]!==t[l])&&(s||(_l(n,r),s=!0),n[l]=n.dpr*(e[l]||0))}return(i||e.shadowColor!==t.shadowColor)&&(s||(_l(n,r),s=!0),n.shadowColor=e.shadowColor||Ag.shadowColor),s}function dK(n,e,t,i,r){var s=kw(e,r.inHover),a=i?null:t&&kw(t,r.inHover)||{};if(s===a)return!1;var o=lde(n,s,a,i,r);if((i||s.fill!==a.fill)&&(o||(_l(n,r),o=!0),aK(s.fill)&&(n.fillStyle=s.fill)),(i||s.stroke!==a.stroke)&&(o||(_l(n,r),o=!0),aK(s.stroke)&&(n.strokeStyle=s.stroke)),(i||s.opacity!==a.opacity)&&(o||(_l(n,r),o=!0),n.globalAlpha=s.opacity==null?1:s.opacity),e.hasStroke()){var l=s.lineWidth,u=l/(s.strokeNoScale&&e.getLineScale?e.getLineScale():1);n.lineWidth!==u&&(o||(_l(n,r),o=!0),n.lineWidth=u)}for(var c=0;c<cK.length;c++){var d=cK[c],f=d[0];(i||s[f]!==a[f])&&(o||(_l(n,r),o=!0),n[f]=s[f]||d[1])}return o}function nnt(n,e,t,i,r){return lde(n,kw(e,r.inHover),t&&kw(t,r.inHover),i,r)}function ude(n,e){var t=e.transform,i=n.dpr||1;t?n.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):n.setTransform(i,0,0,i,0,0)}function int(n,e,t){for(var i=!1,r=0;r<n.length;r++){var s=n[r];i=i||s.isZeroArea(),ude(e,s),e.beginPath(),s.buildPath(e,s.shape),e.clip()}t.allClipped=i}function rnt(n,e){return n&&e?n[0]!==e[0]||n[1]!==e[1]||n[2]!==e[2]||n[3]!==e[3]||n[4]!==e[4]||n[5]!==e[5]:!(!n&&!e)}var fK=1,hK=2,pK=3,mK=4;function snt(n){var e=B4(n),t=N4(n);return!(n.lineDash||!(+e^+t)||e&&typeof n.fill!="string"||t&&typeof n.stroke!="string"||n.strokePercent<1||n.strokeOpacity<1||n.fillOpacity<1)}function _l(n,e){e.batchFill&&n.fill(),e.batchStroke&&n.stroke(),e.batchFill="",e.batchStroke=""}function kw(n,e){return e&&n.__hoverStyle||n.style}function cde(n,e){ag(n,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ag(n,e,t,i){var r=e.transform;if(!e.shouldBePainted(t.viewWidth,t.viewHeight,!1,!1)){e.__dirty&=~nu,e.__isRendered=!1;return}var s=e.__clipPaths,a=t.prevElClipPaths,o=!1,l=!1;if((!a||Ytt(s,a))&&(a&&a.length&&(_l(n,t),n.restore(),l=o=!0,t.prevElClipPaths=null,t.allClipped=!1,t.prevEl=null),s&&s.length&&(_l(n,t),n.save(),int(s,n,t),o=!0),t.prevElClipPaths=s),t.allClipped){e.__isRendered=!1;return}e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=t.prevEl;u||(l=o=!0);var c=e instanceof ds&&e.autoBatch&&snt(e.style);o||rnt(r,u.transform)?(_l(n,t),ude(n,e)):c||_l(n,t);var d=kw(e,t.inHover);e instanceof ds?(t.lastDrawType!==fK&&(l=!0,t.lastDrawType=fK),dK(n,e,u,l,t),(!c||!t.batchFill&&!t.batchStroke)&&n.beginPath(),Jtt(n,e,d,c),c&&(t.batchFill=d.fill||"",t.batchStroke=d.stroke||"")):e instanceof fO?(t.lastDrawType!==pK&&(l=!0,t.lastDrawType=pK),dK(n,e,u,l,t),tnt(n,e,d)):e instanceof Mb?(t.lastDrawType!==hK&&(l=!0,t.lastDrawType=hK),nnt(n,e,u,l,t),ent(n,e,d)):e.getTemporalDisplayables&&(t.lastDrawType!==mK&&(l=!0,t.lastDrawType=mK),ant(n,e,t)),c&&i&&_l(n,t),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),t.prevEl=e,e.__dirty=0,e.__isRendered=!0}function ant(n,e,t){var i=e.getDisplayables(),r=e.getTemporalDisplayables();n.save();var s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:t.viewWidth,viewHeight:t.viewHeight,inHover:t.inHover},a,o;for(a=e.getCursor(),o=i.length;a<o;a++){var l=i[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ag(n,l,s,a===o-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var u=0,c=r.length;u<c;u++){var l=r[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),ag(n,l,s,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,n.restore()}var G5=new Ftt,gK=new LT(100),vK=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function kO(n,e){if(n==="none")return null;var t=e.getDevicePixelRatio(),i=e.getZr(),r=i.painter.type==="svg";n.dirty&&G5.delete(n);var s=G5.get(n);if(s)return s;var a=Cs(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var o={repeat:"repeat"};return l(o),o.rotation=a.rotation,o.scaleX=o.scaleY=r?1:1/t,G5.set(n,o),n.dirty=!1,o;function l(u){for(var c=[t],d=!0,f=0;f<vK.length;++f){var h=a[vK[f]];if(h!=null&&!vi(h)&&!ki(h)&&!Ws(h)&&typeof h!="boolean"){d=!1;break}c.push(h)}var p;if(d){p=c.join(",")+(r?"-svg":"");var m=gK.get(p);m&&(r?u.svgElement=m:u.image=m)}var g=fde(a.dashArrayX),v=ont(a.dashArrayY),_=dde(a.symbol),y=lnt(g),b=hde(v),x=!r&&Ab.createCanvas(),w=r&&{tag:"g",attrs:{},key:"dcl",children:[]},A=C(),T;x&&(x.width=A.width*t,x.height=A.height*t,T=x.getContext("2d")),E(),d&&gK.put(p,x||w),u.image=x,u.svgElement=w,u.svgWidth=A.width,u.svgHeight=A.height;function C(){for(var I=1,k=0,O=y.length;k<O;++k)I=Lq(I,y[k]);for(var U=1,k=0,O=_.length;k<O;++k)U=Lq(U,_[k].length);I*=U;var z=b*y.length*_.length;return{width:Math.max(1,Math.min(I,a.maxTileWidth)),height:Math.max(1,Math.min(z,a.maxTileHeight))}}function E(){T&&(T.clearRect(0,0,x.width,x.height),a.backgroundColor&&(T.fillStyle=a.backgroundColor,T.fillRect(0,0,x.width,x.height)));for(var I=0,k=0;k<v.length;++k)I+=v[k];if(I<=0)return;for(var O=-b,U=0,z=0,L=0;O<A.height;){if(U%2===0){for(var G=z/2%_.length,H=0,F=0,X=0;H<A.width*2;){for(var te=0,k=0;k<g[L].length;++k)te+=g[L][k];if(te<=0)break;if(F%2===0){var re=(1-a.symbolSize)*.5,ie=H+g[L][F]*re,le=O+v[U]*re,ge=g[L][F]*a.symbolSize,pe=v[U]*a.symbolSize,ye=X/2%_[G].length;Oe(ie,le,ge,pe,_[G][ye])}H+=g[L][F],++X,++F,F===g[L].length&&(F=0)}++L,L===g.length&&(L=0)}O+=v[U],++z,++U,U===v.length&&(U=0)}function Oe(Be,Ye,Ze,Q,me){var ce=r?1:t,je=dU(me,Be*ce,Ye*ce,Ze*ce,Q*ce,a.color,a.symbolKeepAspect);if(r){var Fe=i.painter.renderOneToVNode(je);Fe&&w.children.push(Fe)}else cde(T,je)}}}}function dde(n){if(!n||n.length===0)return[["rect"]];if(ki(n))return[[n]];for(var e=!0,t=0;t<n.length;++t)if(!ki(n[t])){e=!1;break}if(e)return dde([n]);for(var i=[],t=0;t<n.length;++t)ki(n[t])?i.push([n[t]]):i.push(n[t]);return i}function fde(n){if(!n||n.length===0)return[[0,0]];if(Ws(n)){var e=Math.ceil(n);return[[e,e]]}for(var t=!0,i=0;i<n.length;++i)if(!Ws(n[i])){t=!1;break}if(t)return fde([n]);for(var r=[],i=0;i<n.length;++i)if(Ws(n[i])){var e=Math.ceil(n[i]);r.push([e,e])}else{var e=Sr(n[i],function(o){return Math.ceil(o)});e.length%2===1?r.push(e.concat(e)):r.push(e)}return r}function ont(n){if(!n||typeof n=="object"&&n.length===0)return[0,0];if(Ws(n)){var e=Math.ceil(n);return[e,e]}var t=Sr(n,function(i){return Math.ceil(i)});return n.length%2?t.concat(t):t}function lnt(n){return Sr(n,function(e){return hde(e)})}function hde(n){for(var e=0,t=0;t<n.length;++t)e+=n[t];return n.length%2===1?e*2:e}function unt(n,e){n.eachRawSeries(function(t){if(!n.isSeriesFiltered(t)){var i=t.getData();i.hasItemVisual()&&i.each(function(a){var o=i.getItemVisual(a,"decal");if(o){var l=i.ensureUniqueItemVisual(a,"style");l.decal=kO(o,e)}});var r=i.getVisual("decal");if(r){var s=i.getVisual("style");s.decal=kO(r,e)}}})}var cnt=new sf;const Dc=cnt;var pde={};function dnt(n,e){pde[n]=e}function fnt(n){return pde[n]}var hnt=1,pnt=800,mnt=900,gnt=1e3,vnt=2e3,ynt=5e3,mde=1e3,_nt=1100,fU=2e3,gde=3e3,bnt=4e3,JD=4500,Snt=4600,xnt=5e3,wnt=6e3,vde=7e3,Tnt={PROCESSOR:{FILTER:gnt,SERIES_FILTER:pnt,STATISTIC:ynt},VISUAL:{LAYOUT:mde,PROGRESSIVE_LAYOUT:_nt,GLOBAL:fU,CHART:gde,POST_CHART_LAYOUT:Snt,COMPONENT:bnt,BRUSH:xnt,CHART_ITEM:JD,ARIA:wnt,DECAL:vde}},ao="__flagInMainProcess",dl="__pendingUpdate",W5="__needsUpdateStatus",yK=/^[a-zA-Z0-9_]+$/,q5="__connectUpdateStatus",_K=0,Cnt=1,Ant=2;function yde(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.isDisposed()){this.id;return}return bde(this,n,e)}}function _de(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return bde(this,n,e)}}function bde(n,e,t){return t[0]=t[0]&&t[0].toLowerCase(),sf.prototype[e].apply(n,t)}var Sde=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(sf),xde=Sde.prototype;xde.on=_de("on");xde.off=_de("off");var sy,j5,HA,Kh,K5,X5,Y5,YS,QS,bK,SK,Q5,xK,VA,wK,wde,xu,TK,Tde=function(n){Mi(e,n);function e(t,i,r){var s=n.call(this,new Mtt)||this;s._chartsViews=[],s._chartsMap={},s._componentsViews=[],s._componentsMap={},s._pendingActions=[],r=r||{},ki(i)&&(i=Cde[i]),s._dom=t;var a="canvas",o="auto",l=!1,u=s._zr=Rq(t,{renderer:r.renderer||a,devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height,ssr:r.ssr,useDirtyRect:yr(r.useDirtyRect,l),useCoarsePointer:yr(r.useCoarsePointer,o),pointerSize:r.pointerSize});s._ssr=r.ssr,s._throttledZrFlush=cU(us(u.flush,u),17),i=Cr(i),i&&Oce(i,!0),s._theme=i,s._locale=TJe(r.locale||_ce),s._coordSysMgr=new kce;var c=s._api=wK(s);function d(f,h){return f.__prio-h.__prio}return OM(U4,d),OM(LO,d),s._scheduler=new sde(s,c,LO,U4),s._messageCenter=new Sde,s._initEvents(),s.resize=us(s.resize,s),u.animation.on("frame",s._onframe,s),bK(u,s),SK(u,s),W8(s),s}return e.prototype._onframe=function(){if(!this._disposed){TK(this);var t=this._scheduler;if(this[dl]){var i=this[dl].silent;this[ao]=!0;try{sy(this),Kh.update.call(this,null,this[dl].updateParams)}catch(l){throw this[ao]=!1,this[dl]=null,l}this._zr.flush(),this[ao]=!1,this[dl]=null,YS.call(this,i),QS.call(this,i)}else if(t.unfinished){var r=hnt,s=this._model,a=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(s),t.performDataProcessorTasks(s),X5(this,s),t.performVisualTasks(s),VA(this,this._model,a,"remain",{}),r-=+new Date-o}while(r>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,i,r){if(!this[ao]){if(this._disposed){this.id;return}var s,a,o;if(Ni(i)&&(r=i.lazyUpdate,s=i.silent,a=i.replaceMerge,o=i.transition,i=i.notMerge),this[ao]=!0,!this._model||i){var l=new uet(this._api),u=this._theme,c=this._model=new Rce;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(t,{replaceMerge:a},OO);var d={seriesTransition:o,optionChanged:!0};if(r)this[dl]={silent:s,updateParams:d},this[ao]=!1,this.getZr().wakeUp();else{try{sy(this),Kh.update.call(this,null,d)}catch(f){throw this[dl]=null,this[ao]=!1,f}this._ssr||this._zr.flush(),this[dl]=null,this[ao]=!1,YS.call(this,s),QS.call(this,s)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||tr.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){t=t||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){t=t||{};var i=this._zr.painter;return i.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(tr.svgSupported){var t=this._zr,i=t.storage.getDisplayList();return Nt(i,function(r){r.stopAnimation(null,!0)}),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(this._disposed){this.id;return}t=t||{};var i=t.excludeComponents,r=this._model,s=[],a=this;Nt(i,function(l){r.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(s.push(c),c.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Nt(s,function(l){l.group.ignore=!1}),o},e.prototype.getConnectedDataURL=function(t){if(this._disposed){this.id;return}var i=t.type==="svg",r=this.group,s=Math.min,a=Math.max,o=1/0;if(CK[r]){var l=o,u=o,c=-o,d=-o,f=[],h=t&&t.pixelRatio||this.getDevicePixelRatio();Nt(y2,function(y,b){if(y.group===r){var x=i?y.getZr().painter.getSvgDom().innerHTML:y.renderToCanvas(Cr(t)),w=y.getDom().getBoundingClientRect();l=s(w.left,l),u=s(w.top,u),c=a(w.right,c),d=a(w.bottom,d),f.push({dom:x,left:w.left,top:w.top})}}),l*=h,u*=h,c*=h,d*=h;var p=c-l,m=d-u,g=Ab.createCanvas(),v=Rq(g,{renderer:i?"svg":"canvas"});if(v.resize({width:p,height:m}),i){var _="";return Nt(f,function(y){var b=y.left-l,x=y.top-u;_+='<g transform="translate('+b+","+x+')">'+y.dom+"</g>"}),v.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&v.painter.setBackgroundColor(t.connectedBackgroundColor),v.refreshImmediately(),v.painter.toDataURL()}else return t.connectedBackgroundColor&&v.add(new El({shape:{x:0,y:0,width:p,height:m},style:{fill:t.connectedBackgroundColor}})),Nt(f,function(y){var b=new Mb({style:{x:y.left*h-l,y:y.top*h-u,image:y.dom}});v.add(b)}),v.refreshImmediately(),g.toDataURL("image/"+(t&&t.type||"png"))}else return this.getDataURL(t)},e.prototype.convertToPixel=function(t,i){return K5(this,"convertToPixel",t,i)},e.prototype.convertFromPixel=function(t,i){return K5(this,"convertFromPixel",t,i)},e.prototype.containPixel=function(t,i){if(this._disposed){this.id;return}var r=this._model,s,a=y5(r,t);return Nt(a,function(o,l){l.indexOf("Models")>=0&&Nt(o,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)s=s||!!c.containPoint(i);else if(l==="seriesModels"){var d=this._chartsMap[u.__viewId];d&&d.containPoint&&(s=s||d.containPoint(i,u))}},this)},this),!!s},e.prototype.getVisual=function(t,i){var r=this._model,s=y5(r,t,{defaultMainType:"series"}),a=s.seriesModel,o=a.getData(),l=s.hasOwnProperty("dataIndexInside")?s.dataIndexInside:s.hasOwnProperty("dataIndex")?o.indexOfRawIndex(s.dataIndex):null;return l!=null?Rtt(o,l,i):Ptt(o,i)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Nt(Ent,function(i){var r=function(s){var a=t.getModel(),o=s.target,l,u=i==="globalout";if(u?l={}:o&&Bx(o,function(p){var m=Rs(p);if(m&&m.dataIndex!=null){var g=m.dataModel||a.getSeriesByIndex(m.seriesIndex);return l=g&&g.getDataParams(m.dataIndex,m.dataType,o)||{},!0}else if(m.eventData)return l=Rn({},m.eventData),!0},!0),l){var c=l.componentType,d=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",d=l.seriesIndex);var f=c&&d!=null&&a.getComponent(c,d),h=f&&t[f.mainType==="series"?"_chartsMap":"_componentsMap"][f.__viewId];l.event=s,l.type=i,t._$eventProcessor.eventInfo={targetEl:o,packedEvent:l,model:f,view:h},t.trigger(i,l)}};r.zrEventfulCallAtLast=!0,t._zr.on(i,r,t)}),Nt(v2,function(i,r){t._messageCenter.on(r,function(s){this.trigger(r,s)},t)}),Nt(["selectchanged"],function(i){t._messageCenter.on(i,function(r){this.trigger(i,r)},t)}),Ltt(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var t=this.getDom();t&&yue(this.getDom(),pU,"");var i=this,r=i._api,s=i._model;Nt(i._componentsViews,function(a){a.dispose(s,r)}),Nt(i._chartsViews,function(a){a.dispose(s,r)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete y2[i.id]},e.prototype.resize=function(t){if(!this[ao]){if(this._disposed){this.id;return}this._zr.resize(t);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var r=i.resetOption("media"),s=t&&t.silent;this[dl]&&(s==null&&(s=this[dl].silent),r=!0,this[dl]=null),this[ao]=!0;try{r&&sy(this),Kh.update.call(this,{type:"resize",animation:Rn({duration:0},t&&t.animation)})}catch(a){throw this[ao]=!1,a}this[ao]=!1,YS.call(this,s),QS.call(this,s)}}},e.prototype.showLoading=function(t,i){if(this._disposed){this.id;return}if(Ni(t)&&(i=t,t=""),t=t||"default",this.hideLoading(),!!NO[t]){var r=NO[t](this._api,i),s=this._zr;this._loadingFX=r,s.add(r)}},e.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},e.prototype.makeActionFromEvent=function(t){var i=Rn({},t);return i.type=v2[t.type],i},e.prototype.dispatchAction=function(t,i){if(this._disposed){this.id;return}if(Ni(i)||(i={silent:!!i}),!!F4[t.type]&&this._model){if(this[ao]){this._pendingActions.push(t);return}var r=i.silent;Y5.call(this,t,r);var s=i.flush;s?this._zr.flush():s!==!1&&tr.browser.weChat&&this._throttledZrFlush(),YS.call(this,r),QS.call(this,r)}},e.prototype.updateLabelLayout=function(){Dc.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed){this.id;return}var i=t.seriesIndex,r=this.getModel(),s=r.getSeriesByIndex(i);s.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()},e.internalField=function(){sy=function(d){var f=d._scheduler;f.restorePipelines(d._model),f.prepareStageTasks(),j5(d,!0),j5(d,!1),f.plan()},j5=function(d,f){for(var h=d._model,p=d._scheduler,m=f?d._componentsViews:d._chartsViews,g=f?d._componentsMap:d._chartsMap,v=d._zr,_=d._api,y=0;y<m.length;y++)m[y].__alive=!1;f?h.eachComponent(function(w,A){w!=="series"&&b(A)}):h.eachSeries(b);function b(w){var A=w.__requireNewView;w.__requireNewView=!1;var T="_ec_"+w.id+"_"+w.type,C=!A&&g[T];if(!C){var E=Pd(w.type),I=f?d0.getClass(E.main,E.sub):j1.getClass(E.sub);C=new I,C.init(h,_),g[T]=C,m.push(C),v.add(C.group)}w.__viewId=C.__id=T,C.__alive=!0,C.__model=w,C.group.__ecComponentInfo={mainType:w.mainType,index:w.componentIndex},!f&&p.prepareView(C,w,h,_)}for(var y=0;y<m.length;){var x=m[y];x.__alive?y++:(!f&&x.renderTask.dispose(),v.remove(x.group),x.dispose(h,_),m.splice(y,1),g[x.__id]===x&&delete g[x.__id],x.__id=x.group.__ecComponentInfo=null)}},HA=function(d,f,h,p,m){var g=d._model;if(g.setUpdatePayload(h),!p){Nt([].concat(d._componentsViews).concat(d._chartsViews),x);return}var v={};v[p+"Id"]=h[p+"Id"],v[p+"Index"]=h[p+"Index"],v[p+"Name"]=h[p+"Name"];var _={mainType:p,query:v};m&&(_.subType=m);var y=h.excludeSeriesId,b;y!=null&&(b=_r(),Nt(Zo(y),function(w){var A=Hd(w,null);A!=null&&b.set(A,!0)})),g&&g.eachComponent(_,function(w){var A=b&&b.get(w.id)!=null;if(!A)if(oj(h))if(w instanceof Rw)h.type===Eg&&!h.notBlur&&!w.get(["emphasis","disabled"])&&jQe(w,h,d._api);else{var T=W9(w.mainType,w.componentIndex,h.name,d._api),C=T.focusSelf,E=T.dispatchers;h.type===Eg&&C&&!h.notBlur&&gO(w.mainType,w.componentIndex,d._api),E&&Nt(E,function(I){h.type===Eg?hO(I):pO(I)})}else _O(h)&&w instanceof Rw&&(YQe(w,h,d._api),sj(w),xu(d))},d),g&&g.eachComponent(_,function(w){var A=b&&b.get(w.id)!=null;A||x(d[p==="series"?"_chartsMap":"_componentsMap"][w.__viewId])},d);function x(w){w&&w.__alive&&w[f]&&w[f](w.__model,g,d._api,h)}},Kh={prepareAndUpdate:function(d){sy(this),Kh.update.call(this,d,{optionChanged:d.newOption!=null})},update:function(d,f){var h=this._model,p=this._api,m=this._zr,g=this._coordSysMgr,v=this._scheduler;if(h){h.setUpdatePayload(d),v.restoreData(h,d),v.performSeriesTasks(h),g.create(h,p),v.performDataProcessorTasks(h,d),X5(this,h),g.update(h,p),t(h),v.performVisualTasks(h,d),Q5(this,h,p,d,f);var _=h.get("backgroundColor")||"transparent",y=h.get("darkMode");m.setBackgroundColor(_),y!=null&&y!=="auto"&&m.setDarkMode(y),Dc.trigger("afterupdate",h,p)}},updateTransform:function(d){var f=this,h=this._model,p=this._api;if(h){h.setUpdatePayload(d);var m=[];h.eachComponent(function(v,_){if(v!=="series"){var y=f.getViewOfComponentModel(_);if(y&&y.__alive)if(y.updateTransform){var b=y.updateTransform(_,h,p,d);b&&b.update&&m.push(y)}else m.push(y)}});var g=_r();h.eachSeries(function(v){var _=f._chartsMap[v.__viewId];if(_.updateTransform){var y=_.updateTransform(v,h,p,d);y&&y.update&&g.set(v.uid,1)}else g.set(v.uid,1)}),t(h),this._scheduler.performVisualTasks(h,d,{setDirty:!0,dirtyMap:g}),VA(this,h,p,d,{},g),Dc.trigger("afterupdate",h,p)}},updateView:function(d){var f=this._model;f&&(f.setUpdatePayload(d),j1.markUpdateMethod(d,"updateView"),t(f),this._scheduler.performVisualTasks(f,d,{setDirty:!0}),Q5(this,f,this._api,d,{}),Dc.trigger("afterupdate",f,this._api))},updateVisual:function(d){var f=this,h=this._model;h&&(h.setUpdatePayload(d),h.eachSeries(function(p){p.getData().clearAllVisual()}),j1.markUpdateMethod(d,"updateVisual"),t(h),this._scheduler.performVisualTasks(h,d,{visualType:"visual",setDirty:!0}),h.eachComponent(function(p,m){if(p!=="series"){var g=f.getViewOfComponentModel(m);g&&g.__alive&&g.updateVisual(m,h,f._api,d)}}),h.eachSeries(function(p){var m=f._chartsMap[p.__viewId];m.updateVisual(p,h,f._api,d)}),Dc.trigger("afterupdate",h,this._api))},updateLayout:function(d){Kh.update.call(this,d)}},K5=function(d,f,h,p){if(d._disposed){d.id;return}for(var m=d._model,g=d._coordSysMgr.getCoordinateSystems(),v,_=y5(m,h),y=0;y<g.length;y++){var b=g[y];if(b[f]&&(v=b[f](m,_,p))!=null)return v}},X5=function(d,f){var h=d._chartsMap,p=d._scheduler;f.eachSeries(function(m){p.updateStreamModes(m,h[m.__viewId])})},Y5=function(d,f){var h=this,p=this.getModel(),m=d.type,g=d.escapeConnect,v=F4[m],_=v.actionInfo,y=(_.update||"update").split(":"),b=y.pop(),x=y[0]!=null&&Pd(y[0]);this[ao]=!0;var w=[d],A=!1;d.batch&&(A=!0,w=Sr(d.batch,function(U){return U=Cs(Rn({},U),d),U.batch=null,U}));var T=[],C,E=_O(d),I=oj(d);if(I&&Vue(this._api),Nt(w,function(U){if(C=v.action(U,h._model,h._api),C=C||Rn({},U),C.type=_.event||C.type,T.push(C),I){var z=B9(d),L=z.queryOptionMap,G=z.mainTypeSpecified,H=G?L.keys()[0]:"series";HA(h,b,U,H),xu(h)}else E?(HA(h,b,U,"series"),xu(h)):x&&HA(h,b,U,x.main,x.sub)}),b!=="none"&&!I&&!E&&!x)try{this[dl]?(sy(this),Kh.update.call(this,d),this[dl]=null):Kh[b].call(this,d)}catch(U){throw this[ao]=!1,U}if(A?C={type:_.event||m,escapeConnect:g,batch:T}:C=T[0],this[ao]=!1,!f){var k=this._messageCenter;if(k.trigger(C.type,C),E){var O={type:"selectchanged",escapeConnect:g,selected:QQe(p),isFromClick:d.isFromClick||!1,fromAction:d.type,fromActionPayload:d};k.trigger(O.type,O)}}},YS=function(d){for(var f=this._pendingActions;f.length;){var h=f.shift();Y5.call(this,h,d)}},QS=function(d){!d&&this.trigger("updated")},bK=function(d,f){d.on("rendered",function(h){f.trigger("rendered",h),d.animation.isFinished()&&!f[dl]&&!f._scheduler.unfinished&&!f._pendingActions.length&&f.trigger("finished")})},SK=function(d,f){d.on("mouseover",function(h){var p=h.target,m=Bx(p,yO);m&&(KQe(m,h,f._api),xu(f))}).on("mouseout",function(h){var p=h.target,m=Bx(p,yO);m&&(XQe(m,h,f._api),xu(f))}).on("click",function(h){var p=h.target,m=Bx(p,function(_){return Rs(_).dataIndex!=null},!0);if(m){var g=m.selected?"unselect":"select",v=Rs(m);f._api.dispatchAction({type:g,dataType:v.dataType,dataIndexInside:v.dataIndex,seriesIndex:v.seriesIndex,isFromClick:!0})}})};function t(d){d.clearColorPalette(),d.eachSeries(function(f){f.clearColorPalette()})}function i(d){var f=[],h=[],p=!1;if(d.eachComponent(function(_,y){var b=y.get("zlevel")||0,x=y.get("z")||0,w=y.getZLevelKey();p=p||!!w,(_==="series"?h:f).push({zlevel:b,z:x,idx:y.componentIndex,type:_,key:w})}),p){var m=f.concat(h),g,v;OM(m,function(_,y){return _.zlevel===y.zlevel?_.z-y.z:_.zlevel-y.zlevel}),Nt(m,function(_){var y=d.getComponent(_.type,_.idx),b=_.zlevel,x=_.key;g!=null&&(b=Math.max(g,b)),x?(b===g&&x!==v&&b++,v=x):v&&(b===g&&b++,v=""),g=b,y.setZLevel(b)})}}Q5=function(d,f,h,p,m){i(f),xK(d,f,h,p,m),Nt(d._chartsViews,function(g){g.__alive=!1}),VA(d,f,h,p,m),Nt(d._chartsViews,function(g){g.__alive||g.remove(f,h)})},xK=function(d,f,h,p,m,g){Nt(g||d._componentsViews,function(v){var _=v.__model;u(_,v),v.render(_,f,h,p),o(_,v),c(_,v)})},VA=function(d,f,h,p,m,g){var v=d._scheduler;m=Rn(m||{},{updatedSeries:f.getSeries()}),Dc.trigger("series:beforeupdate",f,h,m);var _=!1;f.eachSeries(function(y){var b=d._chartsMap[y.__viewId];b.__alive=!0;var x=b.renderTask;v.updatePayload(x,p),u(y,b),g&&g.get(y.uid)&&x.dirty(),x.perform(v.getPerformArgs(x))&&(_=!0),b.group.silent=!!y.get("silent"),a(y,b),sj(y)}),v.unfinished=_||v.unfinished,Dc.trigger("series:layoutlabels",f,h,m),Dc.trigger("series:transition",f,h,m),f.eachSeries(function(y){var b=d._chartsMap[y.__viewId];o(y,b),c(y,b)}),s(d,f),Dc.trigger("series:afterupdate",f,h,m)},xu=function(d){d[W5]=!0,d.getZr().wakeUp()},TK=function(d){d[W5]&&(d.getZr().storage.traverse(function(f){p2(f)||r(f)}),d[W5]=!1)};function r(d){for(var f=[],h=d.currentStates,p=0;p<h.length;p++){var m=h[p];m==="emphasis"||m==="blur"||m==="select"||f.push(m)}d.selected&&d.states.select&&f.push("select"),d.hoverState===$9&&d.states.emphasis?f.push("emphasis"):d.hoverState===V9&&d.states.blur&&f.push("blur"),d.useStates(f)}function s(d,f){var h=d._zr,p=h.storage,m=0;p.traverse(function(g){g.isGroup||m++}),m>f.get("hoverLayerThreshold")&&!tr.node&&!tr.worker&&f.eachSeries(function(g){if(!g.preventUsingHoverLayer){var v=d._chartsMap[g.__viewId];v.__alive&&v.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(d,f){var h=d.get("blendMode")||null;f.eachRendered(function(p){p.isGroup||(p.style.blend=h)})}function o(d,f){if(!d.preventAutoZ){var h=d.get("z")||0,p=d.get("zlevel")||0;f.eachRendered(function(m){return l(m,h,p,-1/0),!0})}}function l(d,f,h,p){var m=d.getTextContent(),g=d.getTextGuideLine(),v=d.isGroup;if(v)for(var _=d.childrenRef(),y=0;y<_.length;y++)p=Math.max(l(_[y],f,h,p),p);else d.z=f,d.zlevel=h,p=Math.max(d.z2,p);if(m&&(m.z=f,m.zlevel=h,isFinite(p)&&(m.z2=p+2)),g){var b=d.textGuideLineConfig;g.z=f,g.zlevel=h,isFinite(p)&&(g.z2=p+(b&&b.showAbove?1:-1))}return p}function u(d,f){f.eachRendered(function(h){if(!p2(h)){var p=h.getTextContent(),m=h.getTextGuideLine();h.stateTransition&&(h.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),h.hasState()?(h.prevStates=h.currentStates,h.clearStates()):h.prevStates&&(h.prevStates=null)}})}function c(d,f){var h=d.getModel("stateAnimation"),p=d.isAnimationEnabled(),m=h.get("duration"),g=m>0?{duration:m,delay:h.get("delay"),easing:h.get("easing")}:null;f.eachRendered(function(v){if(v.states&&v.states.emphasis){if(p2(v))return;if(v instanceof ds&&rZe(v),v.__dirty){var _=v.prevStates;_&&v.useStates(_)}if(p){v.stateTransition=g;var y=v.getTextContent(),b=v.getTextGuideLine();y&&(y.stateTransition=g),b&&(b.stateTransition=g)}v.__dirty&&r(v)}})}wK=function(d){return new(function(f){Mi(h,f);function h(){return f!==null&&f.apply(this,arguments)||this}return h.prototype.getCoordinateSystems=function(){return d._coordSysMgr.getCoordinateSystems()},h.prototype.getComponentByElement=function(p){for(;p;){var m=p.__ecComponentInfo;if(m!=null)return d._model.getComponent(m.mainType,m.index);p=p.parent}},h.prototype.enterEmphasis=function(p,m){hO(p,m),xu(d)},h.prototype.leaveEmphasis=function(p,m){pO(p,m),xu(d)},h.prototype.enterBlur=function(p){qQe(p),xu(d)},h.prototype.leaveBlur=function(p){Fue(p),xu(d)},h.prototype.enterSelect=function(p){Uue(p),xu(d)},h.prototype.leaveSelect=function(p){zue(p),xu(d)},h.prototype.getModel=function(){return d.getModel()},h.prototype.getViewOfComponentModel=function(p){return d.getViewOfComponentModel(p)},h.prototype.getViewOfSeriesModel=function(p){return d.getViewOfSeriesModel(p)},h}(Pce))(d)},wde=function(d){function f(h,p){for(var m=0;m<h.length;m++){var g=h[m];g[q5]=p}}Nt(v2,function(h,p){d._messageCenter.on(p,function(m){if(CK[d.group]&&d[q5]!==_K){if(m&&m.escapeConnect)return;var g=d.makeActionFromEvent(m),v=[];Nt(y2,function(_){_!==d&&_.group===d.group&&v.push(_)}),f(v,_K),Nt(v,function(_){_[q5]!==Cnt&&_.dispatchAction(g)}),f(v,Ant)}})})}}(),e}(sf),hU=Tde.prototype;hU.on=yde("on");hU.off=yde("off");hU.one=function(n,e,t){var i=this;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];e&&e.apply&&e.apply(this,s),i.off(n,r)}this.on.call(this,n,r,t)};var Ent=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],F4={},v2={},LO=[],OO=[],U4=[],Cde={},NO={},y2={},CK={},Mnt=+new Date-0,pU="_echarts_instance_";function Int(n,e,t){var i=!(t&&t.ssr);if(i){var r=Dnt(n);if(r)return r}var s=new Tde(n,e,t);return s.id="ec_"+Mnt++,y2[s.id]=s,i&&yue(n,pU,s.id),wde(s),Dc.trigger("afterinit",s),s}function Dnt(n){return y2[kYe(n,pU)]}function Ade(n,e){Cde[n]=e}function Ede(n){ls(OO,n)<0&&OO.push(n)}function Mde(n,e){gU(LO,n,e,vnt)}function Rnt(n){mU("afterinit",n)}function Pnt(n){mU("afterupdate",n)}function mU(n,e){Dc.on(n,e)}function Rb(n,e,t){$r(e)&&(t=e,e="");var i=Ni(n)?n.type:[n,n={event:e}][0];n.event=(n.event||i).toLowerCase(),e=n.event,!v2[e]&&(dh(yK.test(i)&&yK.test(e)),F4[i]||(F4[i]={action:t,actionInfo:n}),v2[e]=i)}function knt(n,e){kce.register(n,e)}function Lnt(n,e){gU(U4,n,e,mde,"layout")}function av(n,e){gU(U4,n,e,gde,"visual")}var AK=[];function gU(n,e,t,i,r){if(($r(e)||Ni(e))&&(t=e,e=i),!(ls(AK,t)>=0)){AK.push(t);var s=sde.wrapStageHandler(t,r);s.__prio=e,s.__raw=t,n.push(s)}}function Ide(n,e){NO[n]=e}function Ont(n,e,t){var i=fnt("registerMap");i&&i(n,e,t)}var Nnt=Net;av(fU,ftt);av(JD,htt);av(JD,ptt);av(fU,Itt);av(JD,Dtt);av(vde,unt);Ede(Oce);Mde(mnt,vet);Ide("default",mtt);Rb({type:Eg,event:Eg,update:Eg},Al);Rb({type:VM,event:VM,update:VM},Al);Rb({type:d2,event:d2,update:d2},Al);Rb({type:$M,event:$M,update:$M},Al);Rb({type:f2,event:f2,update:f2},Al);Ade("light",Att);Ade("dark",Ett);function ZS(n){return n==null?0:n.length||1}function EK(n){return n}var Bnt=function(){function n(e,t,i,r,s,a){this._old=e,this._new=t,this._oldKeyGetter=i||EK,this._newKeyGetter=r||EK,this.context=s,this._diffModeMultiple=a==="multiple"}return n.prototype.add=function(e){return this._add=e,this},n.prototype.update=function(e){return this._update=e,this},n.prototype.updateManyToOne=function(e){return this._updateManyToOne=e,this},n.prototype.updateOneToMany=function(e){return this._updateOneToMany=e,this},n.prototype.updateManyToMany=function(e){return this._updateManyToMany=e,this},n.prototype.remove=function(e){return this._remove=e,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var e=this._old,t=this._new,i={},r=new Array(e.length),s=new Array(t.length);this._initIndexMap(e,null,r,"_oldKeyGetter"),this._initIndexMap(t,i,s,"_newKeyGetter");for(var a=0;a<e.length;a++){var o=r[a],l=i[o],u=ZS(l);if(u>1){var c=l.shift();l.length===1&&(i[o]=l[0]),this._update&&this._update(c,a)}else u===1?(i[o]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(s,i)},n.prototype._executeMultiple=function(){var e=this._old,t=this._new,i={},r={},s=[],a=[];this._initIndexMap(e,i,s,"_oldKeyGetter"),this._initIndexMap(t,r,a,"_newKeyGetter");for(var o=0;o<s.length;o++){var l=s[o],u=i[l],c=r[l],d=ZS(u),f=ZS(c);if(d>1&&f===1)this._updateManyToOne&&this._updateManyToOne(c,u),r[l]=null;else if(d===1&&f>1)this._updateOneToMany&&this._updateOneToMany(c,u),r[l]=null;else if(d===1&&f===1)this._update&&this._update(c,u),r[l]=null;else if(d>1&&f>1)this._updateManyToMany&&this._updateManyToMany(c,u),r[l]=null;else if(d>1)for(var h=0;h<d;h++)this._remove&&this._remove(u[h]);else this._remove&&this._remove(u)}this._performRestAdd(a,r)},n.prototype._performRestAdd=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],s=t[r],a=ZS(s);if(a>1)for(var o=0;o<a;o++)this._add&&this._add(s[o]);else a===1&&this._add&&this._add(s);t[r]=null}},n.prototype._initIndexMap=function(e,t,i,r){for(var s=this._diffModeMultiple,a=0;a<e.length;a++){var o="_ec_"+this[r](e[a],a);if(s||(i[a]=o),!!t){var l=t[o],u=ZS(l);u===0?(t[o]=a,s&&i.push(o)):u===1?t[o]=[l,a]:l.push(a)}}},n}();const Fnt=Bnt;var Unt=function(){function n(e,t){this._encode=e,this._schema=t}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function znt(n,e){var t={},i=t.encode={},r=_r(),s=[],a=[],o={};Nt(n.dimensions,function(f){var h=n.getDimensionInfo(f),p=h.coordDim;if(p){var m=h.coordDimIndex;Z5(i,p)[m]=f,h.isExtraCoord||(r.set(p,1),Hnt(h.type)&&(s[0]=f),Z5(o,p)[m]=n.getDimensionIndex(h.name)),h.defaultTooltip&&a.push(f)}Cce.each(function(g,v){var _=Z5(i,v),y=h.otherDims[v];y!=null&&y!==!1&&(_[y]=h.name)})});var l=[],u={};r.each(function(f,h){var p=i[h];u[h]=p[0],l=l.concat(p)}),t.dataDimsOnCoord=l,t.dataDimIndicesOnCoord=Sr(l,function(f){return n.getDimensionInfo(f).storeDimIndex}),t.encodeFirstDimNotExtra=u;var c=i.label;c&&c.length&&(s=c.slice());var d=i.tooltip;return d&&d.length?a=d.slice():a.length||(a=s.slice()),i.defaultedLabel=s,i.defaultedTooltip=a,t.userOutput=new Unt(o,e),t}function Z5(n,e){return n.hasOwnProperty(e)||(n[e]=[]),n[e]}function Hnt(n){return!(n==="ordinal"||n==="time")}var Vnt=function(){function n(e){this.otherDims={},e!=null&&Rn(this,e)}return n}();const KM=Vnt;var $nt=Ua(),Gnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Dde=function(){function n(e){this.dimensions=e.dimensions,this._dimOmitted=e.dimensionOmitted,this.source=e.source,this._fullDimCount=e.fullDimensionCount,this._updateDimOmitted(e.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(e){this._dimOmitted=e,e&&(this._dimNameMap||(this._dimNameMap=Pde(this.source)))},n.prototype.getSourceDimensionIndex=function(e){return yr(this._dimNameMap.get(e),-1)},n.prototype.getSourceDimension=function(e){var t=this.source.dimensionsDefine;if(t)return t[e]},n.prototype.makeStoreSchema=function(){for(var e=this._fullDimCount,t=Fce(this.source),i=!kde(e),r="",s=[],a=0,o=0;a<e;a++){var l=void 0,u=void 0,c=void 0,d=this.dimensions[o];if(d&&d.storeDimIndex===a)l=t?d.name:null,u=d.type,c=d.ordinalMeta,o++;else{var f=this.getSourceDimension(a);f&&(l=t?f.name:null,u=f.type)}s.push({property:l,type:u,ordinalMeta:c}),t&&l!=null&&(!d||!d.isCalculationCoord)&&(r+=i?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),r+="$",r+=Gnt[u]||"f",c&&(r+=c.uid),r+="$"}var h=this.source,p=[h.seriesLayoutBy,h.startIndex,r].join("$$");return{dimensions:s,hash:p}},n.prototype.makeOutputDimensionNames=function(){for(var e=[],t=0,i=0;t<this._fullDimCount;t++){var r=void 0,s=this.dimensions[i];if(s&&s.storeDimIndex===t)s.isCalculationCoord||(r=s.name),i++;else{var a=this.getSourceDimension(t);a&&(r=a.name)}e.push(r)}return e},n.prototype.appendCalculationDimension=function(e){this.dimensions.push(e),e.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function Wnt(n){return n instanceof Dde}function Rde(n){for(var e=_r(),t=0;t<(n||[]).length;t++){var i=n[t],r=Ni(i)?i.name:i;r!=null&&e.get(r)==null&&e.set(r,t)}return e}function Pde(n){var e=$nt(n);return e.dimNameMap||(e.dimNameMap=Rde(n.dimensionsDefine))}function kde(n){return n>30}var JS=Ni,Xh=Sr,qnt=typeof Int32Array>"u"?Array:Int32Array,jnt="e\0\0",MK=-1,Knt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Xnt=["_approximateExtent"],IK,$A,ex,tx,J5,GA,ek,Ynt=function(){function n(e,t){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,r=!1;Wnt(e)?(i=e.dimensions,this._dimOmitted=e.isDimensionOmitted(),this._schema=e):(r=!0,i=e),i=i||["x","y"];for(var s={},a=[],o={},l=!1,u={},c=0;c<i.length;c++){var d=i[c],f=ki(d)?new KM({name:d}):d instanceof KM?d:new KM(d),h=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=h,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};a.push(h),s[h]=f,u[h]!=null&&(l=!0),f.createInvertedIndices&&(o[h]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),r&&(f.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=s,this._initGetDimensionInfo(l),this.hostModel=t,this._invertedIndicesMap=o,this._dimOmitted){var m=this._dimIdxToName=_r();Nt(a,function(g){m.set(s[g].storeDimIndex,g)})}}return n.prototype.getDimension=function(e){var t=this._recognizeDimIndex(e);if(t==null)return e;if(t=e,!this._dimOmitted)return this.dimensions[t];var i=this._dimIdxToName.get(t);if(i!=null)return i;var r=this._schema.getSourceDimension(t);if(r)return r.name},n.prototype.getDimensionIndex=function(e){var t=this._recognizeDimIndex(e);if(t!=null)return t;if(e==null)return-1;var i=this._getDimInfo(e);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(e):-1},n.prototype._recognizeDimIndex=function(e){if(Ws(e)||e!=null&&!isNaN(e)&&!this._getDimInfo(e)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(e)<0))return+e},n.prototype._getStoreDimIndex=function(e){var t=this.getDimensionIndex(e);return t},n.prototype.getDimensionInfo=function(e){return this._getDimInfo(this.getDimension(e))},n.prototype._initGetDimensionInfo=function(e){var t=this._dimInfos;this._getDimInfo=e?function(i){return t.hasOwnProperty(i)?t[i]:void 0}:function(i){return t[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(e,t){var i=this._dimSummary;if(t==null)return i.encodeFirstDimNotExtra[e];var r=i.encode[e];return r?r[t]:null},n.prototype.mapDimensionsAll=function(e){var t=this._dimSummary,i=t.encode[e];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(e,t,i){var r=this,s;if(e instanceof TO&&(s=e),!s){var a=this.dimensions,o=sU(e)||kl(e)?new Uce(e,a.length):e;s=new TO;var l=Xh(a,function(u){return{type:r._dimInfos[u].type,property:u}});s.initData(o,l,i)}this._store=s,this._nameList=(t||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,s.count()),this._dimSummary=znt(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(e){var t=this._store.appendData(e);this._doInit(t[0],t[1])},n.prototype.appendValues=function(e,t){var i=this._store.appendValues(e,t.length),r=i.start,s=i.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),t)for(var o=r;o<s;o++){var l=o-r;this._nameList[o]=t[l],a&&ek(this,o)}},n.prototype._updateOrdinalMeta=function(){for(var e=this._store,t=this.dimensions,i=0;i<t.length;i++){var r=this._dimInfos[t[i]];r.ordinalMeta&&e.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var e=this._store.getProvider();return this._idDimIdx==null&&e.getSource().sourceFormat!==Hp&&!e.fillStorage},n.prototype._doInit=function(e,t){if(!(e>=t)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var s=this._nameList,a=this._idList,o=r.getSource().sourceFormat,l=o===af;if(l&&!r.pure)for(var u=[],c=e;c<t;c++){var d=r.getItem(c,u);if(!this.hasItemOption&&xYe(d)&&(this.hasItemOption=!0),d){var f=d.name;s[c]==null&&f!=null&&(s[c]=Hd(f,null));var h=d.id;a[c]==null&&h!=null&&(a[c]=Hd(h,null))}}if(this._shouldMakeIdFromName())for(var c=e;c<t;c++)ek(this,c);IK(this)}},n.prototype.getApproximateExtent=function(e){return this._approximateExtent[e]||this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},n.prototype.getCalculationInfo=function(e){return this._calculationInfo[e]},n.prototype.setCalculationInfo=function(e,t){JS(e)?Rn(this._calculationInfo,e):this._calculationInfo[e]=t},n.prototype.getName=function(e){var t=this.getRawIndex(e),i=this._nameList[t];return i==null&&this._nameDimIdx!=null&&(i=ex(this,this._nameDimIdx,t)),i==null&&(i=""),i},n.prototype._getCategory=function(e,t){var i=this._store.get(e,t),r=this._store.getOrdinalMeta(e);return r?r.categories[i]:i},n.prototype.getId=function(e){return $A(this,this.getRawIndex(e))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.get(r.storeDimIndex,t)},n.prototype.getByRawIndex=function(e,t){var i=this._store,r=this._dimInfos[e];if(r)return i.getByRawIndex(r.storeDimIndex,t)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(e){return this._store.getDataExtent(this._getStoreDimIndex(e))},n.prototype.getSum=function(e){return this._store.getSum(this._getStoreDimIndex(e))},n.prototype.getMedian=function(e){return this._store.getMedian(this._getStoreDimIndex(e))},n.prototype.getValues=function(e,t){var i=this,r=this._store;return vi(e)?r.getValues(Xh(e,function(s){return i._getStoreDimIndex(s)}),t):r.getValues(e)},n.prototype.hasValue=function(e){for(var t=this._dimSummary.dataDimIndicesOnCoord,i=0,r=t.length;i<r;i++)if(isNaN(this._store.get(t[i],e)))return!1;return!0},n.prototype.indexOfName=function(e){for(var t=0,i=this._store.count();t<i;t++)if(this.getName(t)===e)return t;return-1},n.prototype.getRawIndex=function(e){return this._store.getRawIndex(e)},n.prototype.indexOfRawIndex=function(e){return this._store.indexOfRawIndex(e)},n.prototype.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e],r=i[t];return r==null||isNaN(r)?MK:r},n.prototype.indicesOfNearest=function(e,t,i){return this._store.indicesOfNearest(this._getStoreDimIndex(e),t,i)},n.prototype.each=function(e,t,i){$r(e)&&(i=t,t=e,e=[]);var r=i||this,s=Xh(tx(e),this._getStoreDimIndex,this);this._store.each(s,r?us(t,r):t)},n.prototype.filterSelf=function(e,t,i){$r(e)&&(i=t,t=e,e=[]);var r=i||this,s=Xh(tx(e),this._getStoreDimIndex,this);return this._store=this._store.filter(s,r?us(t,r):t),this},n.prototype.selectRange=function(e){var t=this,i={},r=Gs(e);return Nt(r,function(s){var a=t._getStoreDimIndex(s);i[a]=e[s]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(e,t,i){$r(e)&&(i=t,t=e,e=[]),i=i||this;var r=[];return this.each(e,function(){r.push(t&&t.apply(this,arguments))},i),r},n.prototype.map=function(e,t,i,r){var s=i||r||this,a=Xh(tx(e),this._getStoreDimIndex,this),o=GA(this);return o._store=this._store.map(a,s?us(t,s):t),o},n.prototype.modify=function(e,t,i,r){var s=i||r||this,a=Xh(tx(e),this._getStoreDimIndex,this);this._store.modify(a,s?us(t,s):t)},n.prototype.downSample=function(e,t,i,r){var s=GA(this);return s._store=this._store.downSample(this._getStoreDimIndex(e),t,i,r),s},n.prototype.lttbDownSample=function(e,t){var i=GA(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(e),t),i},n.prototype.getRawDataItem=function(e){return this._store.getRawDataItem(e)},n.prototype.getItemModel=function(e){var t=this.hostModel,i=this.getRawDataItem(e);return new xo(i,t,t&&t.ecModel)},n.prototype.diff=function(e){var t=this;return new Fnt(e?e.getStore().getIndices():[],this.getStore().getIndices(),function(i){return $A(e,i)},function(i){return $A(t,i)})},n.prototype.getVisual=function(e){var t=this._visual;return t&&t[e]},n.prototype.setVisual=function(e,t){this._visual=this._visual||{},JS(e)?Rn(this._visual,e):this._visual[e]=t},n.prototype.getItemVisual=function(e,t){var i=this._itemVisuals[e],r=i&&i[t];return r??this.getVisual(t)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(e,t){var i=this._itemVisuals,r=i[e];r||(r=i[e]={});var s=r[t];return s==null&&(s=this.getVisual(t),vi(s)?s=s.slice():JS(s)&&(s=Rn({},s)),r[t]=s),s},n.prototype.setItemVisual=function(e,t,i){var r=this._itemVisuals[e]||{};this._itemVisuals[e]=r,JS(t)?Rn(r,t):r[t]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(e,t){JS(e)?Rn(this._layout,e):this._layout[e]=t},n.prototype.getLayout=function(e){return this._layout[e]},n.prototype.getItemLayout=function(e){return this._itemLayouts[e]},n.prototype.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?Rn(this._itemLayouts[e]||{},t):t},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(e,t){var i=this.hostModel&&this.hostModel.seriesIndex;NQe(i,this.dataType,e,t),this._graphicEls[e]=t},n.prototype.getItemGraphicEl=function(e){return this._graphicEls[e]},n.prototype.eachItemGraphicEl=function(e,t){Nt(this._graphicEls,function(i,r){i&&e&&e.call(t,i,r)})},n.prototype.cloneShallow=function(e){return e||(e=new n(this._schema?this._schema:Xh(this.dimensions,this._getDimInfo,this),this.hostModel)),J5(e,this),e._store=this._store,e},n.prototype.wrapMethod=function(e,t){var i=this[e];$r(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var r=i.apply(this,arguments);return t.apply(this,[r].concat(E9(arguments)))})},n.internalField=function(){IK=function(e){var t=e._invertedIndicesMap;Nt(t,function(i,r){var s=e._dimInfos[r],a=s.ordinalMeta,o=e._store;if(a){i=t[r]=new qnt(a.categories.length);for(var l=0;l<i.length;l++)i[l]=MK;for(var l=0;l<o.count();l++)i[o.get(s.storeDimIndex,l)]=l}})},ex=function(e,t,i){return Hd(e._getCategory(t,i),null)},$A=function(e,t){var i=e._idList[t];return i==null&&e._idDimIdx!=null&&(i=ex(e,e._idDimIdx,t)),i==null&&(i=jnt+t),i},tx=function(e){return vi(e)||(e=e!=null?[e]:[]),e},GA=function(e){var t=new n(e._schema?e._schema:Xh(e.dimensions,e._getDimInfo,e),e.hostModel);return J5(t,e),t},J5=function(e,t){Nt(Knt.concat(t.__wrappedMethods||[]),function(i){t.hasOwnProperty(i)&&(e[i]=t[i])}),e.__wrappedMethods=t.__wrappedMethods,Nt(Xnt,function(i){e[i]=Cr(t[i])}),e._calculationInfo=Rn({},t._calculationInfo)},ek=function(e,t){var i=e._nameList,r=e._idList,s=e._nameDimIdx,a=e._idDimIdx,o=i[t],l=r[t];if(o==null&&s!=null&&(i[t]=o=ex(e,s,t)),l==null&&a!=null&&(r[t]=l=ex(e,a,t)),l==null&&o!=null){var u=e._nameRepeatCount,c=u[o]=(u[o]||0)+1;l=o,c>1&&(l+="__ec__"+c),r[t]=l}}}(),n}();const Qnt=Ynt;function Znt(n,e){sU(n)||(n=Nce(n)),e=e||{};var t=e.coordDimensions||[],i=e.dimensionsDefine||n.dimensionsDefine||[],r=_r(),s=[],a=eit(n,t,i,e.dimensionsCount),o=e.canOmitUnusedDimensions&&kde(a),l=i===n.dimensionsDefine,u=l?Pde(n):Rde(i),c=e.encodeDefine;!c&&e.encodeDefaulter&&(c=e.encodeDefaulter(n,a));for(var d=_r(c),f=new Gce(a),h=0;h<f.length;h++)f[h]=-1;function p(C){var E=f[C];if(E<0){var I=i[C],k=Ni(I)?I:{name:I},O=new KM,U=k.name;U!=null&&u.get(U)!=null&&(O.name=O.displayName=U),k.type!=null&&(O.type=k.type),k.displayName!=null&&(O.displayName=k.displayName);var z=s.length;return f[C]=z,O.storeDimIndex=C,s.push(O),O}return s[E]}if(!o)for(var h=0;h<a;h++)p(h);d.each(function(C,E){var I=Zo(C).slice();if(I.length===1&&!ki(I[0])&&I[0]<0){d.set(E,!1);return}var k=d.set(E,[]);Nt(I,function(O,U){var z=ki(O)?u.get(O):O;z!=null&&z<a&&(k[U]=z,g(p(z),E,U))})});var m=0;Nt(t,function(C){var E,I,k,O;if(ki(C))E=C,O={};else{O=C,E=O.name;var U=O.ordinalMeta;O.ordinalMeta=null,O=Rn({},O),O.ordinalMeta=U,I=O.dimsDef,k=O.otherDims,O.name=O.coordDim=O.coordDimIndex=O.dimsDef=O.otherDims=null}var z=d.get(E);if(z!==!1){if(z=Zo(z),!z.length)for(var L=0;L<(I&&I.length||1);L++){for(;m<a&&p(m).coordDim!=null;)m++;m<a&&z.push(m++)}Nt(z,function(G,H){var F=p(G);if(l&&O.type!=null&&(F.type=O.type),g(Cs(F,O),E,H),F.name==null&&I){var X=I[H];!Ni(X)&&(X={name:X}),F.name=F.displayName=X.name,F.defaultTooltip=X.defaultTooltip}k&&Cs(F.otherDims,k)})}});function g(C,E,I){Cce.get(E)!=null?C.otherDims[E]=I:(C.coordDim=E,C.coordDimIndex=I,r.set(E,!0))}var v=e.generateCoord,_=e.generateCoordCount,y=_!=null;_=v?_||1:0;var b=v||"value";function x(C){C.name==null&&(C.name=C.coordDim)}if(o)Nt(s,function(C){x(C)}),s.sort(function(C,E){return C.storeDimIndex-E.storeDimIndex});else for(var w=0;w<a;w++){var A=p(w),T=A.coordDim;T==null&&(A.coordDim=tit(b,r,y),A.coordDimIndex=0,(!v||_<=0)&&(A.isExtraCoord=!0),_--),x(A),A.type==null&&(Mce(n,w)===$a.Must||A.isExtraCoord&&(A.otherDims.itemName!=null||A.otherDims.seriesName!=null))&&(A.type="ordinal")}return Jnt(s),new Dde({source:n,dimensions:s,fullDimensionCount:a,dimensionOmitted:o})}function Jnt(n){for(var e=_r(),t=0;t<n.length;t++){var i=n[t],r=i.name,s=e.get(r)||0;s>0&&(i.name=r+(s-1)),s++,e.set(r,s)}}function eit(n,e,t,i){var r=Math.max(n.dimensionsDetectedCount||1,e.length,t.length,i||0);return Nt(e,function(s){var a;Ni(s)&&(a=s.dimsDef)&&(r=Math.max(r,a.length))}),r}function tit(n,e,t){if(t||e.hasKey(n)){for(var i=0;e.hasKey(n+i);)i++;n+=i}return e.set(n,!0),n}function Lde(n,e){return n.type==="category"?n.scale.getLabel(e):e.value}function nit(n){var e=n.get("interval");return e??"auto"}function iit(n){return n.type==="category"&&nit(n.getLabelModel())===0}var DK=[],rit={registerPreprocessor:Ede,registerProcessor:Mde,registerPostInit:Rnt,registerPostUpdate:Pnt,registerUpdateLifecycle:mU,registerAction:Rb,registerCoordinateSystem:knt,registerLayout:Lnt,registerVisual:av,registerTransform:Nnt,registerLoading:Ide,registerMap:Ont,registerImpl:dnt,PRIORITY:Tnt,ComponentModel:Ms,ComponentView:d0,SeriesModel:Rw,ChartView:j1,registerComponentModel:function(n){Ms.registerClass(n)},registerComponentView:function(n){d0.registerClass(n)},registerSeriesModel:function(n){Rw.registerClass(n)},registerChartView:function(n){j1.registerClass(n)},registerSubTypeDefaulter:function(n,e){Ms.registerSubTypeDefaulter(n,e)},registerPainter:function(n,e){fYe(n,e)}};function F_(n){if(vi(n)){Nt(n,function(e){F_(e)});return}ls(DK,n)>=0||(DK.push(n),$r(n)&&(n={install:n}),n.install(rit))}Gg.CMD;function Ode(n,e,t,i,r,s,a,o){var l=r-n,u=s-e,c=t-n,d=i-e,f=Math.sqrt(c*c+d*d);c/=f,d/=f;var h=l*c+u*d,p=h/f;o&&(p=Math.min(Math.max(p,0),1)),p*=f;var m=a[0]=n+p*c,g=a[1]=e+p*d;return Math.sqrt((m-r)*(m-r)+(g-s)*(g-s))}var Rp=new Fi,As=new Fi,Wa=new Fi,Pp=new Fi,Td=new Fi,z4=[],$o=new Fi;function sit(n,e){if(e<=180&&e>0){e=e/180*Math.PI,Rp.fromArray(n[0]),As.fromArray(n[1]),Wa.fromArray(n[2]),Fi.sub(Pp,Rp,As),Fi.sub(Td,Wa,As);var t=Pp.len(),i=Td.len();if(!(t<.001||i<.001)){Pp.scale(1/t),Td.scale(1/i);var r=Pp.dot(Td),s=Math.cos(e);if(s<r){var a=Ode(As.x,As.y,Wa.x,Wa.y,Rp.x,Rp.y,z4,!1);$o.fromArray(z4),$o.scaleAndAdd(Td,a/Math.tan(Math.PI-e));var o=Wa.x!==As.x?($o.x-As.x)/(Wa.x-As.x):($o.y-As.y)/(Wa.y-As.y);if(isNaN(o))return;o<0?Fi.copy($o,As):o>1&&Fi.copy($o,Wa),$o.toArray(n[1])}}}}function ait(n,e,t){if(t<=180&&t>0){t=t/180*Math.PI,Rp.fromArray(n[0]),As.fromArray(n[1]),Wa.fromArray(n[2]),Fi.sub(Pp,As,Rp),Fi.sub(Td,Wa,As);var i=Pp.len(),r=Td.len();if(!(i<.001||r<.001)){Pp.scale(1/i),Td.scale(1/r);var s=Pp.dot(e),a=Math.cos(t);if(s<a){var o=Ode(As.x,As.y,Wa.x,Wa.y,Rp.x,Rp.y,z4,!1);$o.fromArray(z4);var l=Math.PI/2,u=Math.acos(Td.dot(e)),c=l+u-t;if(c>=l)Fi.copy($o,Wa);else{$o.scaleAndAdd(Td,o/Math.tan(Math.PI/2-c));var d=Wa.x!==As.x?($o.x-As.x)/(Wa.x-As.x):($o.y-As.y)/(Wa.y-As.y);if(isNaN(d))return;d<0?Fi.copy($o,As):d>1&&Fi.copy($o,Wa)}$o.toArray(n[1])}}}}function RK(n,e,t,i){var r=t==="normal",s=r?n:n.ensureState(t);s.ignore=e;var a=i.get("smooth");a&&a===!0&&(a=.3),s.shape=s.shape||{},a>0&&(s.shape.smooth=a);var o=i.getModel("lineStyle").getLineStyle();r?n.useStyle(o):s.style=o}function oit(n,e){var t=e.smooth,i=e.points;if(i)if(n.moveTo(i[0][0],i[0][1]),t>0&&i.length>=3){var r=j8(i[0],i[1]),s=j8(i[1],i[2]);if(!r||!s){n.lineTo(i[1][0],i[1][1]),n.lineTo(i[2][0],i[2][1]);return}var a=Math.min(r,s)*t,o=QP([],i[1],i[0],a/r),l=QP([],i[1],i[2],a/s),u=QP([],o,l,.5);n.bezierCurveTo(o[0],o[1],o[0],o[1],u[0],u[1]),n.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var c=1;c<i.length;c++)n.lineTo(i[c][0],i[c][1])}function lit(n,e,t){var i=n.getTextGuideLine(),r=n.getTextContent();if(!r){i&&n.removeTextGuideLine();return}for(var s=e.normal,a=s.get("show"),o=r.ignore,l=0;l<E4.length;l++){var u=E4[l],c=e[u],d=u==="normal";if(c){var f=c.get("show"),h=d?o:yr(r.states[u]&&r.states[u].ignore,o);if(h||!yr(f,a)){var p=d?i:i&&i.states[u];p&&(p.ignore=!0);continue}i||(i=new qD,n.setTextGuideLine(i),!d&&(o||!a)&&RK(i,!0,"normal",e.normal),n.stateProxy&&(i.stateProxy=n.stateProxy)),RK(i,!1,u,c)}}if(i){Cs(i.style,t),i.style.fill=null;var m=s.get("showAbove"),g=n.textGuideLineConfig=n.textGuideLineConfig||{};g.showAbove=m||!1,i.buildPath=oit}}function uit(n,e){e=e||"labelLine";for(var t={normal:n.getModel(e)},i=0;i<Qd.length;i++){var r=Qd[i];t[r]=n.getModel([r,e])}return t}function cit(n){for(var e=[],t=0;t<n.length;t++){var i=n[t];if(!i.defaultAttr.ignore){var r=i.label,s=r.getComputedTransform(),a=r.getBoundingRect(),o=!s||s[1]<1e-5&&s[2]<1e-5,l=r.style.margin||0,u=a.clone();u.applyTransform(s),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=o?new M4(a,s):null;e.push({label:r,labelLine:i.labelLine,rect:u,localRect:a,obb:c,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:s})}}return e}function dit(n,e,t,i,r,s){var a=n.length;if(a<2)return;n.sort(function(T,C){return T.rect[e]-C.rect[e]});for(var o=0,l,u=!1,c=0,d=0;d<a;d++){var f=n[d],h=f.rect;l=h[e]-o,l<0&&(h[e]-=l,f.label[e]-=l,u=!0);var p=Math.max(-l,0);c+=p,o=h[e]+h[t]}c>0&&s&&x(-c/a,0,a);var m=n[0],g=n[a-1],v,_;y(),v<0&&w(-v,.8),_<0&&w(_,.8),y(),b(v,_,1),b(_,v,-1),y(),v<0&&A(-v),_<0&&A(_);function y(){v=m.rect[e]-i,_=r-g.rect[e]-g.rect[t]}function b(T,C,E){if(T<0){var I=Math.min(C,-T);if(I>0){x(I*E,0,a);var k=I+T;k<0&&w(-k*E,1)}else w(-T*E,1)}}function x(T,C,E){T!==0&&(u=!0);for(var I=C;I<E;I++){var k=n[I],O=k.rect;O[e]+=T,k.label[e]+=T}}function w(T,C){for(var E=[],I=0,k=1;k<a;k++){var O=n[k-1].rect,U=Math.max(n[k].rect[e]-O[e]-O[t],0);E.push(U),I+=U}if(I){var z=Math.min(Math.abs(T)/I,C);if(T>0)for(var k=0;k<a-1;k++){var L=E[k]*z;x(L,0,k+1)}else for(var k=a-1;k>0;k--){var L=E[k-1]*z;x(-L,k,a)}}}function A(T){var C=T<0?-1:1;T=Math.abs(T);for(var E=Math.ceil(T/(a-1)),I=0;I<a-1;I++)if(C>0?x(E,0,I+1):x(-E,a-I-1,a),T-=E,T<=0)return}return u}function fit(n,e,t,i){return dit(n,"y","height",e,t,i)}function hit(n){var e=[];n.sort(function(m,g){return g.priority-m.priority});var t=new Qr(0,0,0,0);function i(m){if(!m.ignore){var g=m.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}m.ignore=!0}for(var r=0;r<n.length;r++){var s=n[r],a=s.axisAligned,o=s.localRect,l=s.transform,u=s.label,c=s.labelLine;t.copy(s.rect),t.width-=.1,t.height-=.1,t.x+=.05,t.y+=.05;for(var d=s.obb,f=!1,h=0;h<e.length;h++){var p=e[h];if(t.intersect(p.rect)){if(a&&p.axisAligned){f=!0;break}if(p.obb||(p.obb=new M4(p.localRect,p.transform)),d||(d=new M4(o,l)),d.intersect(p.obb)){f=!0;break}}}f?(i(u),c&&i(c)):(u.attr("ignore",s.defaultAttr.ignore),c&&c.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}function PK(n,e,t){var i=Ab.createCanvas(),r=e.getWidth(),s=e.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=s+"px",i.setAttribute("data-zr-dom-id",n)),i.width=r*t,i.height=s*t,i}var pit=function(n){Mi(e,n);function e(t,i,r){var s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null;var a;r=r||T4,typeof t=="string"?a=PK(t,i,r):Ni(t)&&(a=t,t=a.id),s.id=t,s.dom=a;var o=a.style;return o&&(Ule(a),a.onselectstart=function(){return!1},o.padding="0",o.margin="0",o.borderWidth="0"),s.painter=i,s.dpr=r,s}return e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=PK("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),t!==1&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,i,r,s){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],o=this.maxRepaintRectCount,l=!1,u=new Qr(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var y=new Qr(0,0,0,0);y.copy(_),a.push(y)}else{for(var b=!1,x=1/0,w=0,A=0;A<a.length;++A){var T=a[A];if(T.intersect(_)){var C=new Qr(0,0,0,0);C.copy(T),C.union(_),a[A]=C,b=!0;break}else if(l){u.copy(_),u.union(T);var E=_.width*_.height,I=T.width*T.height,k=u.width*u.height,O=k-E-I;O<x&&(x=O,w=A)}}if(l&&(a[w].union(_),b=!0),!b){var y=new Qr(0,0,0,0);y.copy(_),a.push(y)}l||(l=a.length>=o)}}for(var d=this.__startIndex;d<this.__endIndex;++d){var f=t[d];if(f){var h=f.shouldBePainted(r,s,!0,!0),p=f.__isRendered&&(f.__dirty&nu||!h)?f.getPrevPaintRect():null;p&&c(p);var m=h&&(f.__dirty&nu||!f.__isRendered)?f.getPaintRect():null;m&&c(m)}}for(var d=this.__prevStartIndex;d<this.__prevEndIndex;++d){var f=i[d],h=f.shouldBePainted(r,s,!0,!0);if(f&&(!h||!f.__zr)&&f.__isRendered){var p=f.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var d=0;d<a.length;){if(a[d].isZero()){a.splice(d,1);continue}for(var v=d+1;v<a.length;)a[d].intersect(a[v])?(g=!0,a[d].union(a[v]),a.splice(v,1)):v++;d++}}while(g);return this._paintRects=a,a},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,i){var r=this.dpr,s=this.dom,a=s.style,o=this.domBack;a&&(a.width=t+"px",a.height=i+"px"),s.width=t*r,s.height=i*r,o&&(o.width=t*r,o.height=i*r,r!==1&&this.ctxBack.scale(r,r))},e.prototype.clear=function(t,i,r){var s=this.dom,a=this.ctx,o=s.width,l=s.height;i=i||this.clearColor;var u=this.motionBlur&&!t,c=this.lastFrameAlpha,d=this.dpr,f=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(s,0,0,o/d,l/d));var h=this.domBack;function p(m,g,v,_){if(a.clearRect(m,g,v,_),i&&i!=="transparent"){var y=void 0;if(FD(i)){var b=i.global||i.__width===v&&i.__height===_;y=b&&i.__canvasGradient||RO(a,i,{x:0,y:0,width:v,height:_}),i.__canvasGradient=y,i.__width=v,i.__height=_}else NKe(i)&&(i.scaleX=i.scaleX||d,i.scaleY=i.scaleY||d,y=PO(a,i,{dirty:function(){f.setUnpainted(),f.__painter.refresh()}}));a.save(),a.fillStyle=y||i,a.fillRect(m,g,v,_),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(h,m,g,v,_),a.restore())}!r||u?p(0,0,o,l):r.length&&Nt(r,function(m){p(m.x*d,m.y*d,m.width*d,m.height*d)})},e}(sf);const tk=pit;var kK=1e5,_m=314159,WA=.01,mit=.001;function git(n){return n?n.__builtin__?!0:!(typeof n.resize!="function"||typeof n.refresh!="function"):!1}function vit(n,e){var t=document.createElement("div");return t.style.cssText=["position:relative","width:"+n+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",t}var yit=function(){function n(e,t,i,r){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var s=!e.nodeName||e.nodeName.toUpperCase()==="CANVAS";this._opts=i=Rn({},i||{}),this.dpr=i.devicePixelRatio||T4,this._singleCanvas=s,this.root=e;var a=e.style;a&&(Ule(e),e.innerHTML=""),this.storage=t;var o=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(s){var c=e,d=c.width,f=c.height;i.width!=null&&(d=i.width),i.height!=null&&(f=i.height),this.dpr=i.devicePixelRatio||1,c.width=d*this.dpr,c.height=f*this.dpr,this._width=d,this._height=f;var h=new tk(c,this,this.dpr);h.__builtin__=!0,h.initContext(),l[_m]=h,h.zlevel=_m,o.push(_m),this._domRoot=e}else{this._width=zA(e,0,i),this._height=zA(e,1,i);var u=this._domRoot=vit(this._width,this._height);e.appendChild(u)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},n.prototype.refresh=function(e){var t=this.storage.getDisplayList(!0),i=this._prevDisplayList,r=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,i,e,this._redrawId);for(var s=0;s<r.length;s++){var a=r[s],o=this._layers[a];if(!o.__builtin__&&o.refresh){var l=s===0?this._backgroundColor:null;o.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=t.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(e){var t=e.length,i=this._hoverlayer;if(i&&i.clear(),!!t){for(var r={inHover:!0,viewWidth:this._width,viewHeight:this._height},s,a=0;a<t;a++){var o=e[a];o.__inHover&&(i||(i=this._hoverlayer=this.getLayer(kK)),s||(s=i.ctx,s.save()),ag(s,o,r,a===t-1))}s&&s.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(kK)},n.prototype.paintOne=function(e,t){cde(e,t)},n.prototype._paintList=function(e,t,i,r){if(this._redrawId===r){i=i||!1,this._updateLayerStatus(e);var s=this._doPaintList(e,t,i),a=s.finished,o=s.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),o&&this._paintHoverList(e),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;Z8(function(){l._paintList(e,t,i,r)})}}},n.prototype._compositeManually=function(){var e=this.getLayer(_m).ctx,t=this._domRoot.width,i=this._domRoot.height;e.clearRect(0,0,t,i),this.eachBuiltinLayer(function(r){r.virtual&&e.drawImage(r.dom,0,0,t,i)})},n.prototype._doPaintList=function(e,t,i){for(var r=this,s=[],a=this._opts.useDirtyRect,o=0;o<this._zlevelList.length;o++){var l=this._zlevelList[o],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||i)&&s.push(u)}for(var c=!0,d=!1,f=function(m){var g=s[m],v=g.ctx,_=a&&g.createRepaintRects(e,t,h._width,h._height),y=i?g.__startIndex:g.__drawIndex,b=!i&&g.incremental&&Date.now,x=b&&Date.now(),w=g.zlevel===h._zlevelList[0]?h._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,w,_);else if(y===g.__startIndex){var A=e[y];(!A.incremental||!A.notClear||i)&&g.clear(!1,w,_)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=g.__startIndex);var T,C=function(O){var U={inHover:!1,allClipped:!1,prevEl:null,viewWidth:r._width,viewHeight:r._height};for(T=y;T<g.__endIndex;T++){var z=e[T];if(z.__inHover&&(d=!0),r._doPaintEl(z,g,a,O,U,T===g.__endIndex-1),b){var L=Date.now()-x;if(L>15)break}}U.prevElClipPaths&&v.restore()};if(_)if(_.length===0)T=g.__endIndex;else for(var E=h.dpr,I=0;I<_.length;++I){var k=_[I];v.save(),v.beginPath(),v.rect(k.x*E,k.y*E,k.width*E,k.height*E),v.clip(),C(k),v.restore()}else v.save(),C(),v.restore();g.__drawIndex=T,g.__drawIndex<g.__endIndex&&(c=!1)},h=this,p=0;p<s.length;p++)f(p);return tr.wxa&&Nt(this._layers,function(m){m&&m.ctx&&m.ctx.draw&&m.ctx.draw()}),{finished:c,needsRefreshHover:d}},n.prototype._doPaintEl=function(e,t,i,r,s,a){var o=t.ctx;if(i){var l=e.getPaintRect();(!r||l&&l.intersect(r))&&(ag(o,e,s,a),e.setPrevPaintRect(l))}else ag(o,e,s,a)},n.prototype.getLayer=function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=_m);var i=this._layers[e];return i||(i=new tk("zr_"+e,this,this.dpr),i.zlevel=e,i.__builtin__=!0,this._layerConfig[e]?xs(i,this._layerConfig[e],!0):this._layerConfig[e-WA]&&xs(i,this._layerConfig[e-WA],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},n.prototype.insertLayer=function(e,t){var i=this._layers,r=this._zlevelList,s=r.length,a=this._domRoot,o=null,l=-1;if(!i[e]&&git(t)){if(s>0&&e>r[0]){for(l=0;l<s-1&&!(r[l]<e&&r[l+1]>e);l++);o=i[r[l]]}if(r.splice(l+1,0,e),i[e]=t,!t.virtual)if(o){var u=o.dom;u.nextSibling?a.insertBefore(t.dom,u.nextSibling):a.appendChild(t.dom)}else a.firstChild?a.insertBefore(t.dom,a.firstChild):a.appendChild(t.dom);t.__painter=this}},n.prototype.eachLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r];e.call(t,this._layers[s],s)}},n.prototype.eachBuiltinLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__&&e.call(t,a,s)}},n.prototype.eachOtherLayer=function(e,t){for(var i=this._zlevelList,r=0;r<i.length;r++){var s=i[r],a=this._layers[s];a.__builtin__||e.call(t,a,s)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(e){this.eachBuiltinLayer(function(d,f){d.__dirty=d.__used=!1});function t(d){s&&(s.__endIndex!==d&&(s.__dirty=!0),s.__endIndex=d)}if(this._singleCanvas)for(var i=1;i<e.length;i++){var r=e[i];if(r.zlevel!==e[i-1].zlevel||r.incremental){this._needsManuallyCompositing=!0;break}}var s=null,a=0,o,l;for(l=0;l<e.length;l++){var r=e[l],u=r.zlevel,c=void 0;o!==u&&(o=u,a=0),r.incremental?(c=this.getLayer(u+mit,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?WA:0),this._needsManuallyCompositing),c.__builtin__||A9("ZLevel "+u+" has been used by unkown layer "+c.id),c!==s&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,t(l),s=c),r.__dirty&nu&&!r.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}t(l),this.eachBuiltinLayer(function(d,f){!d.__used&&d.getElementCount()>0&&(d.__dirty=!0,d.__startIndex=d.__endIndex=d.__drawIndex=0),d.__dirty&&d.__drawIndex<0&&(d.__drawIndex=d.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(e){e.clear()},n.prototype.setBackgroundColor=function(e){this._backgroundColor=e,Nt(this._layers,function(t){t.setUnpainted()})},n.prototype.configLayer=function(e,t){if(t){var i=this._layerConfig;i[e]?xs(i[e],t,!0):i[e]=t;for(var r=0;r<this._zlevelList.length;r++){var s=this._zlevelList[r];if(s===e||s===e+WA){var a=this._layers[s];xs(a,i[e],!0)}}}},n.prototype.delLayer=function(e){var t=this._layers,i=this._zlevelList,r=t[e];r&&(r.dom.parentNode.removeChild(r.dom),delete t[e],i.splice(ls(i,e),1))},n.prototype.resize=function(e,t){if(this._domRoot.style){var i=this._domRoot;i.style.display="none";var r=this._opts,s=this.root;if(e!=null&&(r.width=e),t!=null&&(r.height=t),e=zA(s,0,r),t=zA(s,1,r),i.style.display="",this._width!==e||t!==this._height){i.style.width=e+"px",i.style.height=t+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);this.refresh(!0)}this._width=e,this._height=t}else{if(e==null||t==null)return;this._width=e,this._height=t,this.getLayer(_m).resize(e,t)}return this},n.prototype.clearLayer=function(e){var t=this._layers[e];t&&t.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[_m].dom;var t=new tk("image",this,e.pixelRatio||this.dpr);t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor);var i=t.ctx;if(e.pixelRatio<=this.dpr){this.refresh();var r=t.dom.width,s=t.dom.height;this.eachLayer(function(d){d.__builtin__?i.drawImage(d.dom,0,0,r,s):d.renderToCanvas&&(i.save(),d.renderToCanvas(i),i.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},o=this.storage.getDisplayList(!0),l=0,u=o.length;l<u;l++){var c=o[l];ag(i,c,a,l===u-1)}return t.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}();const _it=yit;function bit(n){n.registerPainter("canvas",_it)}function qA(n,e,t){var i=n.get("borderRadius");if(i==null)return t?{cornerRadius:0}:null;vi(i)||(i=[i,i,i,i]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:Sr(i,function(s){return N_(s,r)})}}var jA=Math.PI*2,LK=Math.PI/180;function Nde(n,e){return Ew(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Bde(n,e){var t=Nde(n,e),i=n.get("center"),r=n.get("radius");vi(r)||(r=[0,r]);var s=da(t.width,e.getWidth()),a=da(t.height,e.getHeight()),o=Math.min(s,a),l=da(r[0],o/2),u=da(r[1],o/2),c,d,f=n.coordinateSystem;if(f){var h=f.dataToPoint(i);c=h[0]||0,d=h[1]||0}else vi(i)||(i=[i,i]),c=da(i[0],s)+t.x,d=da(i[1],a)+t.y;return{cx:c,cy:d,r0:l,r:u}}function Sit(n,e,t){e.eachSeriesByType(n,function(i){var r=i.getData(),s=r.mapDimension("value"),a=Nde(i,t),o=Bde(i,t),l=o.cx,u=o.cy,c=o.r,d=o.r0,f=-i.get("startAngle")*LK,h=i.get("minAngle")*LK,p=0;r.each(s,function(E){!isNaN(E)&&p++});var m=r.getSum(s),g=Math.PI/(m||p)*2,v=i.get("clockwise"),_=i.get("roseType"),y=i.get("stillShowZeroSum"),b=r.getDataExtent(s);b[0]=0;var x=jA,w=0,A=f,T=v?1:-1;if(r.setLayout({viewRect:a,r:c}),r.each(s,function(E,I){var k;if(isNaN(E)){r.setItemLayout(I,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:l,cy:u,r0:d,r:_?NaN:c});return}_!=="area"?k=m===0&&y?g:E*g:k=jA/p,k<h?(k=h,x-=h):w+=E;var O=A+T*k;r.setItemLayout(I,{angle:k,startAngle:A,endAngle:O,clockwise:v,cx:l,cy:u,r0:d,r:_?pYe(E,b,[d,c]):c}),A=O}),x<jA&&p)if(x<=.001){var C=jA/p;r.each(s,function(E,I){if(!isNaN(E)){var k=r.getItemLayout(I);k.angle=C,k.startAngle=f+T*I*C,k.endAngle=f+T*(I+1)*C}})}else g=x/w,A=f,r.each(s,function(E,I){if(!isNaN(E)){var k=r.getItemLayout(I),O=k.angle===h?h:E*g;k.startAngle=A,k.endAngle=A+T*O,A+=T*O}})})}function xit(n){return{seriesType:n,reset:function(e,t){var i=t.findComponents({mainType:"legend"});if(!(!i||!i.length)){var r=e.getData();r.filterSelf(function(s){for(var a=r.getName(s),o=0;o<i.length;o++)if(!i[o].isSelected(a))return!1;return!0})}}}}var wit=Math.PI/180;function OK(n,e,t,i,r,s,a,o,l,u){if(n.length<2)return;function c(m){for(var g=m.rB,v=g*g,_=0;_<m.list.length;_++){var y=m.list[_],b=Math.abs(y.label.y-t),x=i+y.len,w=x*x,A=Math.sqrt((1-Math.abs(b*b/v))*w),T=e+(A+y.len2)*r,C=T-y.label.x,E=y.targetTextWidth-C*r;Fde(y,E,!0),y.label.x=T}}function d(m){for(var g={list:[],maxY:0},v={list:[],maxY:0},_=0;_<m.length;_++)if(m[_].labelAlignTo==="none"){var y=m[_],b=y.label.y>t?v:g,x=Math.abs(y.label.y-t);if(x>=b.maxY){var w=y.label.x-e-y.len2*r,A=i+y.len,T=Math.abs(w)<A?Math.sqrt(x*x/(1-w*w/A/A)):A;b.rB=T,b.maxY=x}b.list.push(y)}c(g),c(v)}for(var f=n.length,h=0;h<f;h++)if(n[h].position==="outer"&&n[h].labelAlignTo==="labelLine"){var p=n[h].label.x-u;n[h].linePoints[1][0]+=p,n[h].label.x=u}fit(n,l,l+a)&&d(n)}function Tit(n,e,t,i,r,s,a,o){for(var l=[],u=[],c=Number.MAX_VALUE,d=-Number.MAX_VALUE,f=0;f<n.length;f++){var h=n[f].label;nk(n[f])||(h.x<e?(c=Math.min(c,h.x),l.push(n[f])):(d=Math.max(d,h.x),u.push(n[f])))}for(var f=0;f<n.length;f++){var p=n[f];if(!nk(p)&&p.linePoints){if(p.labelStyleWidth!=null)continue;var h=p.label,m=p.linePoints,g=void 0;p.labelAlignTo==="edge"?h.x<e?g=m[2][0]-p.labelDistance-a-p.edgeDistance:g=a+r-p.edgeDistance-m[2][0]-p.labelDistance:p.labelAlignTo==="labelLine"?h.x<e?g=c-a-p.bleedMargin:g=a+r-d-p.bleedMargin:h.x<e?g=h.x-a-p.bleedMargin:g=a+r-h.x-p.bleedMargin,p.targetTextWidth=g,Fde(p,g)}}OK(u,e,t,i,1,r,s,a,o,d),OK(l,e,t,i,-1,r,s,a,o,c);for(var f=0;f<n.length;f++){var p=n[f];if(!nk(p)&&p.linePoints){var h=p.label,m=p.linePoints,v=p.labelAlignTo==="edge",_=h.style.padding,y=_?_[1]+_[3]:0,b=h.style.backgroundColor?0:y,x=p.rect.width+b,w=m[1][0]-m[2][0];v?h.x<e?m[2][0]=a+p.edgeDistance+x+p.labelDistance:m[2][0]=a+r-p.edgeDistance-x-p.labelDistance:(h.x<e?m[2][0]=h.x+p.labelDistance:m[2][0]=h.x-p.labelDistance,m[1][0]=m[2][0]+w),m[1][1]=m[2][1]=h.y}}}function Fde(n,e,t){if(t===void 0&&(t=!1),n.labelStyleWidth==null){var i=n.label,r=i.style,s=n.rect,a=r.backgroundColor,o=r.padding,l=o?o[1]+o[3]:0,u=r.overflow,c=s.width+(a?0:l);if(e<c||t){var d=s.height;if(u&&u.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-l);var f=i.getBoundingRect();i.setStyle("width",Math.ceil(f.width)),i.setStyle("backgroundColor",a)}else{var h=e-l,p=e<c?h:t?h>n.unconstrainedWidth?null:h:null;i.setStyle("width",p)}var m=i.getBoundingRect();s.width=m.width;var g=(i.style.margin||0)+2.1;s.height=m.height+g,s.y-=(s.height-d)/2}}}function nk(n){return n.position==="center"}function Cit(n){var e=n.getData(),t=[],i,r,s=!1,a=(n.get("minShowLabelAngle")||0)*wit,o=e.getLayout("viewRect"),l=e.getLayout("r"),u=o.width,c=o.x,d=o.y,f=o.height;function h(w){w.ignore=!0}function p(w){if(!w.ignore)return!0;for(var A in w.states)if(w.states[A].ignore===!1)return!0;return!1}e.each(function(w){var A=e.getItemGraphicEl(w),T=A.shape,C=A.getTextContent(),E=A.getTextGuideLine(),I=e.getItemModel(w),k=I.getModel("label"),O=k.get("position")||I.get(["emphasis","label","position"]),U=k.get("distanceToLabelLine"),z=k.get("alignTo"),L=da(k.get("edgeDistance"),u),G=k.get("bleedMargin"),H=I.getModel("labelLine"),F=H.get("length");F=da(F,u);var X=H.get("length2");if(X=da(X,u),Math.abs(T.endAngle-T.startAngle)<a){Nt(C.states,h),C.ignore=!0,E&&(Nt(E.states,h),E.ignore=!0);return}if(p(C)){var te=(T.startAngle+T.endAngle)/2,re=Math.cos(te),ie=Math.sin(te),le,ge,pe,ye;i=T.cx,r=T.cy;var Oe=O==="inside"||O==="inner";if(O==="center")le=T.cx,ge=T.cy,ye="center";else{var Be=(Oe?(T.r+T.r0)/2*re:T.r*re)+i,Ye=(Oe?(T.r+T.r0)/2*ie:T.r*ie)+r;if(le=Be+re*3,ge=Ye+ie*3,!Oe){var Ze=Be+re*(F+l-T.r),Q=Ye+ie*(F+l-T.r),me=Ze+(re<0?-1:1)*X,ce=Q;z==="edge"?le=re<0?c+L:c+u-L:le=me+(re<0?-U:U),ge=ce,pe=[[Be,Ye],[Ze,Q],[me,ce]]}ye=Oe?"center":z==="edge"?re>0?"right":"left":re>0?"left":"right"}var je=Math.PI,Fe=0,nt=k.get("rotate");if(Ws(nt))Fe=nt*(je/180);else if(O==="center")Fe=0;else if(nt==="radial"||nt===!0){var We=re<0?-te+je:-te;Fe=We}else if(nt==="tangential"&&O!=="outside"&&O!=="outer"){var Ke=Math.atan2(re,ie);Ke<0&&(Ke=je*2+Ke);var it=ie>0;it&&(Ke=je+Ke),Fe=Ke-je}if(s=!!Fe,C.x=le,C.y=ge,C.rotation=Fe,C.setStyle({verticalAlign:"middle"}),Oe){C.setStyle({align:ye});var ne=C.states.select;ne&&(ne.x+=C.x,ne.y+=C.y)}else{var be=C.getBoundingRect().clone();be.applyTransform(C.getComputedTransform());var K=(C.style.margin||0)+2.1;be.y-=K/2,be.height+=K,t.push({label:C,labelLine:E,position:O,len:F,len2:X,minTurnAngle:H.get("minTurnAngle"),maxSurfaceAngle:H.get("maxSurfaceAngle"),surfaceNormal:new Fi(re,ie),linePoints:pe,textAlign:ye,labelDistance:U,labelAlignTo:z,edgeDistance:L,bleedMargin:G,rect:be,unconstrainedWidth:be.width,labelStyleWidth:C.style.width})}A.setTextConfig({inside:Oe})}}),!s&&n.get("avoidLabelOverlap")&&Tit(t,i,r,l,u,f,c,d);for(var m=0;m<t.length;m++){var g=t[m],v=g.label,_=g.labelLine,y=isNaN(v.x)||isNaN(v.y);if(v){v.setStyle({align:g.textAlign}),y&&(Nt(v.states,h),v.ignore=!0);var b=v.states.select;b&&(b.x+=v.x,b.y+=v.y)}if(_){var x=g.linePoints;y||!x?(Nt(_.states,h),_.ignore=!0):(sit(x,g.minTurnAngle),ait(x,g.surfaceNormal,g.maxSurfaceAngle),_.setShape({points:x}),v.__hostTarget.textGuideLineConfig={anchor:new Fi(x[0][0],x[0][1])})}}}var Ait=function(n){Mi(e,n);function e(t,i,r){var s=n.call(this)||this;s.z2=2;var a=new nl;return s.setTextContent(a),s.updateData(t,i,r,!0),s}return e.prototype.updateData=function(t,i,r,s){var a=this,o=t.hostModel,l=t.getItemModel(i),u=l.getModel("emphasis"),c=t.getItemLayout(i),d=Rn(qA(l.getModel("itemStyle"),c,!0),c);if(isNaN(d.startAngle)){a.setShape(d);return}if(s){a.setShape(d);var f=o.getShallow("animationType");o.ecModel.ssr?(GM(a,{scaleX:0,scaleY:0},o,{dataIndex:i,isFrom:!0}),a.originX=d.cx,a.originY=d.cy):f==="scale"?(a.shape.r=c.r0,GM(a,{shape:{r:c.r}},o,i)):r!=null?(a.setShape({startAngle:r,endAngle:r}),GM(a,{shape:{startAngle:c.startAngle,endAngle:c.endAngle}},o,i)):(a.shape.endAngle=c.startAngle,B_(a,{shape:{endAngle:c.endAngle}},o,i))}else VZe(a),B_(a,{shape:d},o,i);a.useStyle(t.getItemVisual(i,"style")),nZe(a,l);var h=(c.startAngle+c.endAngle)/2,p=o.get("selectedOffset"),m=Math.cos(h)*p,g=Math.sin(h)*p,v=l.getShallow("cursor");v&&a.attr("cursor",v),this._updateLabel(o,t,i),a.ensureState("emphasis").shape=Rn({r:c.r+(u.get("scale")&&u.get("scaleSize")||0)},qA(u.getModel("itemStyle"),c)),Rn(a.ensureState("select"),{x:m,y:g,shape:qA(l.getModel(["select","itemStyle"]),c)}),Rn(a.ensureState("blur"),{shape:qA(l.getModel(["blur","itemStyle"]),c)});var _=a.getTextGuideLine(),y=a.getTextContent();_&&Rn(_.ensureState("select"),{x:m,y:g}),Rn(y.ensureState("select"),{x:m,y:g}),JQe(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype._updateLabel=function(t,i,r){var s=this,a=i.getItemModel(r),o=a.getModel("labelLine"),l=i.getItemVisual(r,"style"),u=l&&l.fill,c=l&&l.opacity;gce(s,aJe(a),{labelFetcher:i.hostModel,labelDataIndex:r,inheritColor:u,defaultOpacity:c,defaultText:t.getFormattedLabel(r,"normal")||i.getName(r)});var d=s.getTextContent();s.setTextConfig({position:null,rotation:null}),d.attr({z2:10});var f=t.get(["label","position"]);if(f!=="outside"&&f!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new qD,this.setTextGuideLine(h)),lit(this,uit(a),{stroke:u,opacity:a2(o.get(["lineStyle","opacity"]),c,1)})}},e}(WD),Eit=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return e.prototype.render=function(t,i,r,s){var a=t.getData(),o=this._data,l=this.group,u;if(!o&&a.count()>0){for(var c=a.getItemLayout(0),d=1;isNaN(c&&c.startAngle)&&d<a.count();++d)c=a.getItemLayout(d);c&&(u=c.startAngle)}if(this._emptyCircleSector&&l.remove(this._emptyCircleSector),a.count()===0&&t.get("showEmptyCircle")){var f=new WD({shape:Bde(t,r)});f.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=f,l.add(f)}a.diff(o).add(function(h){var p=new Ait(a,h,u);a.setItemGraphicEl(h,p),l.add(p)}).update(function(h,p){var m=o.getItemGraphicEl(p);m.updateData(a,h,u),m.off("click"),l.add(m),a.setItemGraphicEl(h,m)}).remove(function(h){var p=o.getItemGraphicEl(h);cce(p,t,h)}).execute(),Cit(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,i){var r=i.getData(),s=r.getItemLayout(0);if(s){var a=t[0]-s.cx,o=t[1]-s.cy,l=Math.sqrt(a*a+o*o);return l<=s.r&&l>=s.r0}},e.type="pie",e}(j1);const Mit=Eit;function Iit(n,e,t){e=vi(e)&&{coordDimensions:e}||Rn({encodeDefine:n.getEncode()},e);var i=n.getSource(),r=Znt(i,e).dimensions,s=new Qnt(r,n);return s.initData(i,t),s}var Dit=function(){function n(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return n.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},n.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},n.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},n.prototype.getItemVisual=function(e,t){var i=this._getDataWithEncodedVisual();return i.getItemVisual(e,t)},n}();const Rit=Dit;var Pit=Ua(),kit=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(t){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new Rit(us(this.getData,this),us(this.getRawData,this)),this._defaultLabelLine(t)},e.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return Iit(this,{coordDimensions:["value"],encodeDefaulter:pa($Je,this)})},e.prototype.getDataParams=function(t){var i=this.getData(),r=Pit(i),s=r.seats;if(!s){var a=[];i.each(i.mapDimension("value"),function(l){a.push(l)}),s=r.seats=vYe(a,i.hostModel.get("percentPrecision"))}var o=n.prototype.getDataParams.call(this,t);return o.percent=s[t]||0,o.$vars.push("percent"),o},e.prototype._defaultLabelLine=function(t){lO(t,"labelLine",["show"]);var i=t.labelLine,r=t.emphasis.labelLine;i.show=i.show&&t.label.show,r.show=r.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Rw);const Lit=kit;function Oit(n){return{seriesType:n,reset:function(e,t){var i=e.getData();i.filterSelf(function(r){var s=i.mapDimension("value"),a=i.get(s,r);return!(Ws(a)&&!isNaN(a)&&a<0)})}}}function Nit(n){n.registerChartView(Mit),n.registerSeriesModel(Lit),ktt("pie",n.registerAction),n.registerLayout(pa(Sit,"pie")),n.registerProcessor(xit("pie")),n.registerProcessor(Oit("pie"))}function NK(n,e,t){t=t||{};var i=n.coordinateSystem,r=e.axis,s={},a=r.getAxesOnZeroOf()[0],o=r.position,l=a?"onZero":o,u=r.dim,c=i.getRect(),d=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},h=e.get("offset")||0,p=u==="x"?[d[2]-h,d[3]+h]:[d[0]-h,d[1]+h];if(a){var m=a.toGlobalCoord(a.dataToCoord(0));p[f.onZero]=Math.max(Math.min(m,p[1]),p[0])}s.position=[u==="y"?p[f[l]]:d[0],u==="x"?p[f[l]]:d[3]],s.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=g[o],s.labelOffset=a?p[f[o]]-p[f.onZero]:0,e.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),bw(t.labelInside,e.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var v=e.get(["axisLabel","rotate"]);return s.labelRotate=l==="top"?-v:v,s.z2=1,s}var kp=Math.PI,Mg=function(){function n(e,t){this.group=new Yd,this.opt=t,this.axisModel=e,Cs(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new Yd({x:t.position[0],y:t.position[1],rotation:t.rotation});i.updateTransform(),this._transformGroup=i}return n.prototype.hasBuilder=function(e){return!!BK[e]},n.prototype.add=function(e){BK[e](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(e,t,i){var r=hue(t-e),s,a;return C4(r)?(a=i>0?"top":"bottom",s="center"):C4(r-kp)?(a=i>0?"bottom":"top",s="center"):(a="middle",r>0&&r<kp?s=i>0?"right":"left":s=i>0?"left":"right"),{rotation:r,textAlign:s,textVerticalAlign:a}},n.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},n.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)},n}(),BK={axisLine:function(n,e,t,i){var r=e.get(["axisLine","show"]);if(r==="auto"&&n.handleAutoShown&&(r=n.handleAutoShown("axisLine")),!!r){var s=e.axis.getExtent(),a=i.transform,o=[s[0],0],l=[s[1],0],u=o[0]>l[0];a&&(zd(o,o,a),zd(l,l,a));var c=Rn({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),d=new FT({shape:{x1:o[0],y1:o[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});Y9(d.shape,d.style.lineWidth),d.anid="line",t.add(d);var f=e.get(["axisLine","symbol"]);if(f!=null){var h=e.get(["axisLine","symbolSize"]);ki(f)&&(f=[f,f]),(ki(h)||Ws(h))&&(h=[h,h]);var p=jtt(e.get(["axisLine","symbolOffset"])||0,h),m=h[0],g=h[1];Nt([{rotate:n.rotation+Math.PI/2,offset:p[0],r:0},{rotate:n.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((o[0]-l[0])*(o[0]-l[0])+(o[1]-l[1])*(o[1]-l[1]))}],function(v,_){if(f[_]!=="none"&&f[_]!=null){var y=dU(f[_],-m/2,-g/2,m,g,c.stroke,!0),b=v.r+v.offset,x=u?l:o;y.attr({rotation:v.rotate,x:x[0]+b*Math.cos(n.rotation),y:x[1]-b*Math.sin(n.rotation),silent:!0,z2:11}),t.add(y)}})}}},axisTickLabel:function(n,e,t,i){var r=Uit(t,i,e,n),s=Hit(t,i,e,n);if(Fit(e,s,r),zit(t,i,e,n.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=cit(Sr(s,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));hit(a)}},axisName:function(n,e,t,i){var r=bw(n.axisName,e.get("name"));if(r){var s=e.get("nameLocation"),a=n.nameDirection,o=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,u=e.axis.getExtent(),c=u[0]>u[1]?-1:1,d=[s==="start"?u[0]-c*l:s==="end"?u[1]+c*l:(u[0]+u[1])/2,UK(s)?n.labelOffset+a*l:0],f,h=e.get("nameRotate");h!=null&&(h=h*kp/180);var p;UK(s)?f=Mg.innerTextLayout(n.rotation,h??n.rotation,a):(f=Bit(n.rotation,s,h||0,u),p=n.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(f.rotation)),!isFinite(p)&&(p=null)));var m=o.getFont(),g=e.get("nameTruncate",!0)||{},v=g.ellipsis,_=bw(n.nameTruncateMaxWidth,g.maxWidth,p),y=new nl({x:d[0],y:d[1],rotation:f.rotation,silent:Mg.isLabelSilent(e),style:c0(o,{text:r,font:m,overflow:"truncate",width:_,ellipsis:v,fill:o.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:o.get("align")||f.textAlign,verticalAlign:o.get("verticalAlign")||f.textVerticalAlign}),z2:1});if(J9({el:y,componentModel:e,itemName:r}),y.__fullText=r,y.anid="name",e.get("triggerEvent")){var b=Mg.makeAxisEventDataBase(e);b.targetType="axisName",b.name=r,Rs(y).eventData=b}i.add(y),y.updateTransform(),t.add(y),y.decomposeTransform()}}};function Bit(n,e,t,i){var r=hue(t-n),s,a,o=i[0]>i[1],l=e==="start"&&!o||e!=="start"&&o;return C4(r-kp/2)?(a=l?"bottom":"top",s="center"):C4(r-kp*1.5)?(a=l?"top":"bottom",s="center"):(a="middle",r<kp*1.5&&r>kp/2?s=l?"left":"right":s=l?"right":"left"),{rotation:r,textAlign:s,textVerticalAlign:a}}function Fit(n,e,t){if(!iit(n.axis)){var i=n.get(["axisLabel","showMinLabel"]),r=n.get(["axisLabel","showMaxLabel"]);e=e||[],t=t||[];var s=e[0],a=e[1],o=e[e.length-1],l=e[e.length-2],u=t[0],c=t[1],d=t[t.length-1],f=t[t.length-2];i===!1?(wu(s),wu(u)):FK(s,a)&&(i?(wu(a),wu(c)):(wu(s),wu(u))),r===!1?(wu(o),wu(d)):FK(l,o)&&(r?(wu(l),wu(f)):(wu(o),wu(d)))}}function wu(n){n&&(n.ignore=!0)}function FK(n,e){var t=n&&n.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(!(!t||!i)){var r=I9([]);return D9(r,r,-n.rotation),t.applyTransform(W1([],r,n.getLocalTransform())),i.applyTransform(W1([],r,e.getLocalTransform())),t.intersect(i)}}function UK(n){return n==="middle"||n==="center"}function Ude(n,e,t,i,r){for(var s=[],a=[],o=[],l=0;l<n.length;l++){var u=n[l].coord;a[0]=u,a[1]=0,o[0]=u,o[1]=t,e&&(zd(a,a,e),zd(o,o,e));var c=new FT({shape:{x1:a[0],y1:a[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});Y9(c.shape,c.style.lineWidth),c.anid=r+"_"+n[l].tickValue,s.push(c)}return s}function Uit(n,e,t,i){var r=t.axis,s=t.getModel("axisTick"),a=s.get("show");if(a==="auto"&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),!(!a||r.scale.isBlank())){for(var o=s.getModel("lineStyle"),l=i.tickDirection*s.get("length"),u=r.getTicksCoords(),c=Ude(u,e.transform,l,Cs(o.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}),"ticks"),d=0;d<c.length;d++)n.add(c[d]);return c}}function zit(n,e,t,i){var r=t.axis,s=t.getModel("minorTick");if(!(!s.get("show")||r.scale.isBlank())){var a=r.getMinorTicksCoords();if(a.length)for(var o=s.getModel("lineStyle"),l=i*s.get("length"),u=Cs(o.getLineStyle(),Cs(t.getModel("axisTick").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var d=Ude(a[c],e.transform,l,u,"minorticks_"+c),f=0;f<d.length;f++)n.add(d[f])}}function Hit(n,e,t,i){var r=t.axis,s=bw(i.axisLabelShow,t.get(["axisLabel","show"]));if(!(!s||r.scale.isBlank())){var a=t.getModel("axisLabel"),o=a.get("margin"),l=r.getViewLabels(),u=(bw(i.labelRotate,a.get("rotate"))||0)*kp/180,c=Mg.innerTextLayout(i.rotation,u,i.labelDirection),d=t.getCategories&&t.getCategories(!0),f=[],h=Mg.isLabelSilent(t),p=t.get("triggerEvent");return Nt(l,function(m,g){var v=r.scale.type==="ordinal"?r.scale.getRawOrdinalNumber(m.tickValue):m.tickValue,_=m.formattedLabel,y=m.rawLabel,b=a;if(d&&d[v]){var x=d[v];Ni(x)&&x.textStyle&&(b=new xo(x.textStyle,a,t.ecModel))}var w=b.getTextColor()||t.get(["axisLine","lineStyle","color"]),A=r.dataToCoord(v),T=new nl({x:A,y:i.labelOffset+i.labelDirection*o,rotation:c.rotation,silent:h,z2:10+(m.level||0),style:c0(b,{text:_,align:b.getShallow("align",!0)||c.textAlign,verticalAlign:b.getShallow("verticalAlign",!0)||b.getShallow("baseline",!0)||c.textVerticalAlign,fill:$r(w)?w(r.type==="category"?y:r.type==="value"?v+"":v,g):w})});if(T.anid="label_"+v,p){var C=Mg.makeAxisEventDataBase(t);C.targetType="axisLabel",C.value=y,C.tickIndex=g,r.type==="category"&&(C.dataIndex=v),Rs(T).eventData=C}e.add(T),T.updateTransform(),f.push(T),n.add(T),T.decomposeTransform()}),f}}const Vit=Mg;function $it(n,e){var t={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Git(t,n,e),t.seriesInvolved&&qit(t,n),t}function Git(n,e,t){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),s=r.get("link",!0)||[],a=[];Nt(t.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var l=Lw(o.model),u=n.coordSysAxesInfo[l]={};n.coordSysMap[l]=o;var c=o.model,d=c.getModel("tooltip",i);if(Nt(o.getAxes(),pa(m,!1,null)),o.getTooltipAxes&&i&&d.get("show")){var f=d.get("trigger")==="axis",h=d.get(["axisPointer","type"])==="cross",p=o.getTooltipAxes(d.get(["axisPointer","axis"]));(f||h)&&Nt(p.baseAxes,pa(m,h?"cross":!0,f)),h&&Nt(p.otherAxes,pa(m,"cross",!1))}function m(g,v,_){var y=_.model.getModel("axisPointer",r),b=y.get("show");if(!(!b||b==="auto"&&!g&&!BO(y))){v==null&&(v=y.get("triggerTooltip")),y=g?Wit(_,d,r,e,g,v):y;var x=y.get("snap"),w=y.get("triggerEmphasis"),A=Lw(_.model),T=v||x||_.type==="category",C=n.axesInfo[A]={key:A,axis:_,coordSys:o,axisPointerModel:y,triggerTooltip:v,triggerEmphasis:w,involveSeries:T,snap:x,useHandle:BO(y),seriesModels:[],linkGroup:null};u[A]=C,n.seriesInvolved=n.seriesInvolved||T;var E=jit(s,_);if(E!=null){var I=a[E]||(a[E]={axesInfo:{}});I.axesInfo[A]=C,I.mapper=s[E].mapper,C.linkGroup=I}}}})}function Wit(n,e,t,i,r,s){var a=e.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Nt(o,function(f){l[f]=Cr(a.get(f))}),l.snap=n.type!=="category"&&!!s,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),r==="cross"){var c=a.get(["label","show"]);if(u.show=c??!0,!s){var d=l.lineStyle=a.get("crossStyle");d&&Cs(u,d.textStyle)}}return n.model.getModel("axisPointer",new xo(l,t,i))}function qit(n,e){e.eachSeries(function(t){var i=t.coordinateSystem,r=t.get(["tooltip","trigger"],!0),s=t.get(["tooltip","show"],!0);!i||r==="none"||r===!1||r==="item"||s===!1||t.get(["axisPointer","show"],!0)===!1||Nt(n.coordSysAxesInfo[Lw(i.model)],function(a){var o=a.axis;i.getAxis(o.dim)===o&&(a.seriesModels.push(t),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=t.getData().count())})})}function jit(n,e){for(var t=e.model,i=e.dim,r=0;r<n.length;r++){var s=n[r]||{};if(ik(s[i+"AxisId"],t.id)||ik(s[i+"AxisIndex"],t.componentIndex)||ik(s[i+"AxisName"],t.name))return r}}function ik(n,e){return n==="all"||vi(n)&&ls(n,e)>=0||n===e}function Kit(n){var e=vU(n);if(e){var t=e.axisPointerModel,i=e.axis.scale,r=t.option,s=t.get("status"),a=t.get("value");a!=null&&(a=i.parse(a));var o=BO(t);s==null&&(r.status=o?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,o&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function vU(n){var e=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Lw(n)]}function Xit(n){var e=vU(n);return e&&e.axisPointerModel}function BO(n){return!!n.get(["handle","show"])}function Lw(n){return n.type+"||"+n.id}var zK={},Yit=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r,s){this.axisPointerClass&&Kit(t),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(t,r,!0)},e.prototype.updateAxisPointer=function(t,i,r,s){this._doUpdateAxisPointerClass(t,r,!1)},e.prototype.remove=function(t,i){var r=this._axisPointer;r&&r.remove(i)},e.prototype.dispose=function(t,i){this._disposeAxisPointer(i),n.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,i,r){var s=e.getAxisPointerClass(this.axisPointerClass);if(s){var a=Xit(t);a?(this._axisPointer||(this._axisPointer=new s)).render(t,a,i,r):this._disposeAxisPointer(i)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,i){zK[t]=i},e.getAxisPointerClass=function(t){return t&&zK[t]},e.type="axis",e}(d0);const Qit=Yit;var Vm=Ua(),HK=Cr,rk=us,Zit=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(e,t,i,r){var s=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,!(!r&&this._lastValue===s&&this._lastStatus===a)){this._lastValue=s,this._lastStatus=a;var o=this._group,l=this._handle;if(!a||a==="hide"){o&&o.hide(),l&&l.hide();return}o&&o.show(),l&&l.show();var u={};this.makeElOption(u,s,e,t,i);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=c;var d=this._moveAnimation=this.determineAnimation(e,t);if(!o)o=this._group=new Yd,this.createPointerEl(o,u,e,t),this.createLabelEl(o,u,e,t),i.getZr().add(o);else{var f=pa(VK,t,d);this.updatePointerEl(o,u,f),this.updateLabelEl(o,u,f,t)}GK(o,t,!0),this._renderHandle(s)}},n.prototype.remove=function(e){this.clear(e)},n.prototype.dispose=function(e){this.clear(e)},n.prototype.determineAnimation=function(e,t){var i=t.get("animation"),r=e.axis,s=r.type==="category",a=t.get("snap");if(!a&&!s)return!1;if(i==="auto"||i==null){var o=this.animationThreshold;if(s&&r.getBandWidth()>o)return!0;if(a){var l=vU(e).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/l>o}return!1}return i===!0},n.prototype.makeElOption=function(e,t,i,r,s){},n.prototype.createPointerEl=function(e,t,i,r){var s=t.pointer;if(s){var a=Vm(e).pointerEl=new rJe[s.type](HK(t.pointer));e.add(a)}},n.prototype.createLabelEl=function(e,t,i,r){if(t.label){var s=Vm(e).labelEl=new nl(HK(t.label));e.add(s),$K(s,r)}},n.prototype.updatePointerEl=function(e,t,i){var r=Vm(e).pointerEl;r&&t.pointer&&(r.setStyle(t.pointer.style),i(r,{shape:t.pointer.shape}))},n.prototype.updateLabelEl=function(e,t,i,r){var s=Vm(e).labelEl;s&&(s.setStyle(t.label.style),i(s,{x:t.label.x,y:t.label.y}),$K(s,r))},n.prototype._renderHandle=function(e){if(!(this._dragging||!this.updateHandleTransform)){var t=this._axisPointerModel,i=this._api.getZr(),r=this._handle,s=t.getModel("handle"),a=t.get("status");if(!s.get("show")||!a||a==="hide"){r&&i.remove(r),this._handle=null;return}var o;this._handle||(o=!0,r=this._handle=Z9(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Hle(u.event)},onmousedown:rk(this._onHandleDragMove,this,0,0),drift:rk(this._onHandleDragMove,this),ondragend:rk(this._onHandleDragEnd,this)}),i.add(r)),GK(r,t,!1),r.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=s.get("size");vi(l)||(l=[l,l]),r.scaleX=l[0]/2,r.scaleY=l[1]/2,Jce(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,o)}},n.prototype._moveHandleToValue=function(e,t){VK(this._axisPointerModel,!t&&this._moveAnimation,this._handle,sk(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(e,t){var i=this._handle;if(i){this._dragging=!0;var r=this.updateHandleTransform(sk(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=r,i.stopAnimation(),i.attr(sk(r)),Vm(i).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){var e=this._handle;if(e){var t=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){this._dragging=!1;var e=this._handle;if(e){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,r=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),r&&t.remove(r),this._group=null,this._handle=null,this._payloadInfo=null),MO(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(e,t,i){return i=i||0,{x:e[i],y:e[1-i],width:t[i],height:t[1-i]}},n}();function VK(n,e,t,i){zde(Vm(t).lastProp,i)||(Vm(t).lastProp=i,e?B_(t,i,n):(t.stopAnimation(),t.attr(i)))}function zde(n,e){if(Ni(n)&&Ni(e)){var t=!0;return Nt(e,function(i,r){t=t&&zde(n[r],i)}),!!t}else return n===e}function $K(n,e){n[e.get(["label","show"])?"show":"hide"]()}function sk(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function GK(n,e,t){var i=e.get("z"),r=e.get("zlevel");n&&n.traverse(function(s){s.type!=="group"&&(i!=null&&(s.z=i),r!=null&&(s.zlevel=r),s.silent=t)})}const Jit=Zit;function ert(n){var e=n.get("type"),t=n.getModel(e+"Style"),i;return e==="line"?(i=t.getLineStyle(),i.fill=null):e==="shadow"&&(i=t.getAreaStyle(),i.stroke=null),i}function trt(n,e,t,i,r){var s=t.get("value"),a=Hde(s,e.axis,e.ecModel,t.get("seriesDataIndices"),{precision:t.get(["label","precision"]),formatter:t.get(["label","formatter"])}),o=t.getModel("label"),l=XD(o.get("padding")||0),u=o.getFont(),c=aue(a,u),d=r.position,f=c.width+l[1]+l[3],h=c.height+l[0]+l[2],p=r.align;p==="right"&&(d[0]-=f),p==="center"&&(d[0]-=f/2);var m=r.verticalAlign;m==="bottom"&&(d[1]-=h),m==="middle"&&(d[1]-=h/2),nrt(d,f,h,i);var g=o.get("backgroundColor");(!g||g==="auto")&&(g=e.get(["axisLine","lineStyle","color"])),n.label={x:d[0],y:d[1],style:c0(o,{text:a,font:u,fill:o.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function nrt(n,e,t,i){var r=i.getWidth(),s=i.getHeight();n[0]=Math.min(n[0]+e,r)-e,n[1]=Math.min(n[1]+t,s)-t,n[0]=Math.max(n[0],0),n[1]=Math.max(n[1],0)}function Hde(n,e,t,i,r){n=e.scale.parse(n);var s=e.scale.getLabel({value:n},{precision:r.precision}),a=r.formatter;if(a){var o={value:Lde(e,{value:n}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};Nt(i,function(l){var u=t.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,d=u&&u.getDataParams(c);d&&o.seriesData.push(d)}),ki(a)?s=a.replace("{value}",s):$r(a)&&(s=a(o))}return s}function Vde(n,e,t){var i=Sw();return D9(i,i,t.rotation),Q8(i,i,t.position),Q9([n.dataToCoord(e),(t.labelOffset||0)+(t.labelDirection||1)*(t.labelMargin||0)],i)}function irt(n,e,t,i,r,s){var a=Vit.innerTextLayout(t.rotation,0,t.labelDirection);t.labelMargin=r.get(["label","margin"]),trt(e,i,r,s,{position:Vde(i.axis,n,t),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function rrt(n,e,t){return t=t||0,{x1:n[t],y1:n[1-t],x2:e[t],y2:e[1-t]}}function srt(n,e,t){return t=t||0,{x:n[t],y:n[1-t],width:e[t],height:e[1-t]}}var art=function(n){Mi(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.makeElOption=function(t,i,r,s,a){var o=r.axis,l=o.grid,u=s.get("type"),c=WK(l,o).getOtherAxis(o).getGlobalExtent(),d=o.toGlobalCoord(o.dataToCoord(i,!0));if(u&&u!=="none"){var f=ert(s),h=ort[u](o,d,c);h.style=f,t.graphicKey=h.type,t.pointer=h}var p=NK(l.model,r);irt(i,t,p,r,s,a)},e.prototype.getHandleTransform=function(t,i,r){var s=NK(i.axis.grid.model,i,{labelInside:!1});s.labelMargin=r.get(["handle","margin"]);var a=Vde(i.axis,t,s);return{x:a[0],y:a[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,i,r,s){var a=r.axis,o=a.grid,l=a.getGlobalExtent(!0),u=WK(o,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,d=[t.x,t.y];d[c]+=i[c],d[c]=Math.min(l[1],d[c]),d[c]=Math.max(l[0],d[c]);var f=(u[1]+u[0])/2,h=[f,f];h[c]=d[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:d[0],y:d[1],rotation:t.rotation,cursorPoint:h,tooltipOption:p[c]}},e}(Jit);function WK(n,e){var t={};return t[e.dim+"AxisIndex"]=e.index,n.getCartesian(t)}var ort={line:function(n,e,t){var i=rrt([e,t[0]],[e,t[1]],qK(n));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(n,e,t){var i=Math.max(1,n.getBandWidth()),r=t[1]-t[0];return{type:"Rect",shape:srt([e-i/2,t[0]],[i,r],qK(n))}}};function qK(n){return n.dim==="x"?0:1}const lrt=art;var urt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Ms);const crt=urt;var Gf=Ua(),drt=Nt;function $de(n,e,t){if(!tr.node){var i=e.getZr();Gf(i).records||(Gf(i).records={}),frt(i,e);var r=Gf(i).records[n]||(Gf(i).records[n]={});r.handler=t}}function frt(n,e){if(Gf(n).initialized)return;Gf(n).initialized=!0,t("click",pa(jK,"click")),t("mousemove",pa(jK,"mousemove")),t("globalout",prt);function t(i,r){n.on(i,function(s){var a=mrt(e);drt(Gf(n).records,function(o){o&&r(o,s,a.dispatchAction)}),hrt(a.pendings,e)})}}function hrt(n,e){var t=n.showTip.length,i=n.hideTip.length,r;t?r=n.showTip[t-1]:i&&(r=n.hideTip[i-1]),r&&(r.dispatchAction=null,e.dispatchAction(r))}function prt(n,e,t){n.handler("leave",null,t)}function jK(n,e,t,i){e.handler(n,t,i)}function mrt(n){var e={showTip:[],hideTip:[]},t=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=t,n.dispatchAction(i))};return{dispatchAction:t,pendings:e}}function FO(n,e){if(!tr.node){var t=e.getZr(),i=(Gf(t).records||{})[n];i&&(Gf(t).records[n]=null)}}var grt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){var s=i.getComponent("tooltip"),a=t.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";$de("axisPointer",r,function(o,l,u){a!=="none"&&(o==="leave"||a.indexOf(o)>=0)&&u({type:"updateAxisPointer",currTrigger:o,x:l&&l.offsetX,y:l&&l.offsetY})})},e.prototype.remove=function(t,i){FO("axisPointer",i)},e.prototype.dispose=function(t,i){FO("axisPointer",i)},e.type="axisPointer",e}(d0);const vrt=grt;function Gde(n,e){var t=[],i=n.seriesIndex,r;if(i==null||!(r=e.getSeriesByIndex(i)))return{point:[]};var s=r.getData(),a=OT(s,n);if(a==null||a<0||vi(a))return{point:[]};var o=s.getItemGraphicEl(a),l=r.coordinateSystem;if(r.getTooltipPosition)t=r.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(n.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),d=c.dim,f=u.dim,h=d==="x"||d==="radius"?1:0,p=s.mapDimension(f),m=[];m[h]=s.get(p,a),m[1-h]=s.get(s.getCalculationInfo("stackResultDimension"),a),t=l.dataToPoint(m)||[]}else t=l.dataToPoint(s.getValues(Sr(l.dimensions,function(v){return s.mapDimension(v)}),a))||[];else if(o){var g=o.getBoundingRect().clone();g.applyTransform(o.transform),t=[g.x+g.width/2,g.y+g.height/2]}return{point:t,el:o}}var KK=Ua();function yrt(n,e,t){var i=n.currTrigger,r=[n.x,n.y],s=n,a=n.dispatchAction||us(t.dispatchAction,t),o=e.getComponent("axisPointer").coordSysAxesInfo;if(o){XM(r)&&(r=Gde({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},e).point);var l=XM(r),u=s.axesInfo,c=o.axesInfo,d=i==="leave"||XM(r),f={},h={},p={list:[],map:{}},m={showPointer:pa(brt,h),showTooltip:pa(Srt,p)};Nt(o.coordSysMap,function(v,_){var y=l||v.containPoint(r);Nt(o.coordSysAxesInfo[_],function(b,x){var w=b.axis,A=Crt(u,b);if(!d&&y&&(!u||A)){var T=A&&A.value;T==null&&!l&&(T=w.pointToData(r)),T!=null&&XK(b,T,m,!1,f)}})});var g={};return Nt(c,function(v,_){var y=v.linkGroup;y&&!h[_]&&Nt(y.axesInfo,function(b,x){var w=h[x];if(b!==v&&w){var A=w.value;y.mapper&&(A=v.axis.scale.parse(y.mapper(A,YK(b),YK(v)))),g[v.key]=A}})}),Nt(g,function(v,_){XK(c[_],v,m,!0,f)}),xrt(h,c,f),wrt(p,r,n,a),Trt(c,a,t),f}}function XK(n,e,t,i,r){var s=n.axis;if(!(s.scale.isBlank()||!s.containData(e))){if(!n.involveSeries){t.showPointer(n,e);return}var a=_rt(e,n),o=a.payloadBatch,l=a.snapToValue;o[0]&&r.seriesIndex==null&&Rn(r,o[0]),!i&&n.snap&&s.containData(l)&&l!=null&&(e=l),t.showPointer(n,e,o),t.showTooltip(n,a,l)}}function _rt(n,e){var t=e.axis,i=t.dim,r=n,s=[],a=Number.MAX_VALUE,o=-1;return Nt(e.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(i),d,f;if(l.getAxisTooltipData){var h=l.getAxisTooltipData(c,n,t);f=h.dataIndices,d=h.nestestValue}else{if(f=l.getData().indicesOfNearest(c[0],n,t.type==="category"?.5:null),!f.length)return;d=l.getData().get(c[0],f[0])}if(!(d==null||!isFinite(d))){var p=n-d,m=Math.abs(p);m<=a&&((m<a||p>=0&&o<0)&&(a=m,o=p,r=d,s.length=0),Nt(f,function(g){s.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:s,snapToValue:r}}function brt(n,e,t,i){n[e.key]={value:t,payloadBatch:i}}function Srt(n,e,t,i){var r=t.payloadBatch,s=e.axis,a=s.model,o=e.axisPointerModel;if(!(!e.triggerTooltip||!r.length)){var l=e.coordSys.model,u=Lw(l),c=n.map[u];c||(c=n.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},n.list.push(c)),c.dataByAxis.push({axisDim:s.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function xrt(n,e,t){var i=t.axesInfo=[];Nt(e,function(r,s){var a=r.axisPointerModel.option,o=n[s];o?(!r.useHandle&&(a.status="show"),a.value=o.value,a.seriesDataIndices=(o.payloadBatch||[]).slice()):!r.useHandle&&(a.status="hide"),a.status==="show"&&i.push({axisDim:r.axis.dim,axisIndex:r.axis.model.componentIndex,value:a.value})})}function wrt(n,e,t,i){if(XM(e)||!n.list.length){i({type:"hideTip"});return}var r=((n.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:t.tooltipOption,position:t.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:n.list})}function Trt(n,e,t){var i=t.getZr(),r="axisPointerLastHighlights",s=KK(i)[r]||{},a=KK(i)[r]={};Nt(n,function(u,c){var d=u.axisPointerModel.option;d.status==="show"&&u.triggerEmphasis&&Nt(d.seriesDataIndices,function(f){var h=f.seriesIndex+" | "+f.dataIndex;a[h]=f})});var o=[],l=[];Nt(s,function(u,c){!a[c]&&l.push(u)}),Nt(a,function(u,c){!s[c]&&o.push(u)}),l.length&&t.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),o.length&&t.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function Crt(n,e){for(var t=0;t<(n||[]).length;t++){var i=n[t];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function YK(n){var e=n.axis.model,t={},i=t.axisDim=n.axis.dim;return t.axisIndex=t[i+"AxisIndex"]=e.componentIndex,t.axisName=t[i+"AxisName"]=e.name,t.axisId=t[i+"AxisId"]=e.id,t}function XM(n){return!n||n[0]==null||isNaN(n[0])||n[1]==null||isNaN(n[1])}function Art(n){Qit.registerAxisPointerClass("CartesianAxisPointer",lrt),n.registerComponentModel(crt),n.registerComponentView(vrt),n.registerPreprocessor(function(e){if(e){(!e.axisPointer||e.axisPointer.length===0)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!vi(t)&&(e.axisPointer.link=[t])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=$it(e,t)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},yrt)}function Ert(n,e){var t=XD(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),n=new El({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1}),n}var Mrt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Ms);const Irt=Mrt;function Wde(n){var e=n.get("confine");return e!=null?!!e:n.get("renderMode")==="richText"}function qde(n){if(tr.domSupported){for(var e=document.documentElement.style,t=0,i=n.length;t<i;t++)if(n[t]in e)return n[t]}}var jde=qde(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Drt=qde(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function Kde(n,e){if(!n)return e;e=xce(e,!0);var t=n.indexOf(e);return n=t===-1?e:"-"+n.slice(0,t)+"-"+e,n.toLowerCase()}function Rrt(n,e){var t=n.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(n);return t?e?t[e]:t:null}var Prt=Kde(Drt,"transition"),yU=Kde(jde,"transform"),krt="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(tr.transform3dSupported?"will-change:transform;":"");function Lrt(n){return n=n==="left"?"right":n==="right"?"left":n==="top"?"bottom":"top",n}function Ort(n,e,t){if(!ki(t)||t==="inside")return"";var i=n.get("backgroundColor"),r=n.get("borderWidth");e=Aw(e);var s=Lrt(t),a=Math.max(Math.round(r)*1.5,6),o="",l=yU+":",u;ls(["left","right"],s)>-1?(o+="top:50%",l+="translateY(-50%) rotate("+(u=s==="left"?-225:-45)+"deg)"):(o+="left:50%",l+="translateX(-50%) rotate("+(u=s==="top"?225:45)+"deg)");var c=u*Math.PI/180,d=a+r,f=d*Math.abs(Math.cos(c))+d*Math.abs(Math.sin(c)),h=Math.round(((f-Math.SQRT2*r)/2+Math.SQRT2*r-(f-d)/2)*100)/100;o+=";"+s+":-"+h+"px";var p=e+" solid "+r+"px;",m=["position:absolute;width:"+a+"px;height:"+a+"px;z-index:-1;",o+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+i+";"];return'<div style="'+m.join("")+'"></div>'}function Nrt(n,e){var t="cubic-bezier(0.23,1,0.32,1)",i=" "+n/2+"s "+t,r="opacity"+i+",visibility"+i;return e||(i=" "+n+"s "+t,r+=tr.transformSupported?","+yU+i:",left"+i+",top"+i),Prt+":"+r}function QK(n,e,t){var i=n.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!tr.transformSupported)return t?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var s=tr.transform3dSupported,a="translate"+(s?"3d":"")+"("+i+","+r+(s?",0":"")+")";return t?"top:0;left:0;"+yU+":"+a+";":[["top",0],["left",0],[jde,a]]}function Brt(n){var e=[],t=n.get("fontSize"),i=n.getTextColor();i&&e.push("color:"+i),e.push("font:"+n.getFont()),t&&e.push("line-height:"+Math.round(t*3/2)+"px");var r=n.get("textShadowColor"),s=n.get("textShadowBlur")||0,a=n.get("textShadowOffsetX")||0,o=n.get("textShadowOffsetY")||0;return r&&s&&e.push("text-shadow:"+a+"px "+o+"px "+s+"px "+r),Nt(["decoration","align"],function(l){var u=n.get(l);u&&e.push("text-"+l+":"+u)}),e.join(";")}function Frt(n,e,t){var i=[],r=n.get("transitionDuration"),s=n.get("backgroundColor"),a=n.get("shadowBlur"),o=n.get("shadowColor"),l=n.get("shadowOffsetX"),u=n.get("shadowOffsetY"),c=n.getModel("textStyle"),d=Qce(n,"html"),f=l+"px "+u+"px "+a+"px "+o;return i.push("box-shadow:"+f),e&&r&&i.push(Nrt(r,t)),s&&i.push("background-color:"+s),Nt(["width","color","radius"],function(h){var p="border-"+h,m=xce(p),g=n.get(m);g!=null&&i.push(p+":"+g+(h==="color"?"":"px"))}),i.push(Brt(c)),d!=null&&i.push("padding:"+XD(d).join("px ")+"px"),i.join(";")+";"}function ZK(n,e,t,i,r){var s=e&&e.painter;if(t){var a=s&&s.getViewportRoot();a&&JKe(n,a,document.body,i,r)}else{n[0]=i,n[1]=r;var o=s&&s.getViewportRootOffset();o&&(n[0]+=o.offsetLeft,n[1]+=o.offsetTop)}n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}var Urt=function(){function n(e,t,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,tr.wxa)return null;var r=document.createElement("div");r.domBelongToZr=!0,this.el=r;var s=this._zr=t.getZr(),a=this._appendToBody=i&&i.appendToBody;ZK(this._styleCoord,s,a,t.getWidth()/2,t.getHeight()/2),a?document.body.appendChild(r):e.appendChild(r),this._container=e;var o=this;r.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},r.onmousemove=function(l){if(l=l||window.event,!o._enterable){var u=s.handler,c=s.painter.getViewportRoot();Du(c,l,!0),u.dispatch("mousemove",l)}},r.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return n.prototype.update=function(e){var t=this._container,i=Rrt(t,"position"),r=t.style;r.position!=="absolute"&&i!=="absolute"&&(r.position="relative");var s=e.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=e.get("className")||""},n.prototype.show=function(e,t){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,r=i.style,s=this._styleCoord;i.innerHTML?r.cssText=krt+Frt(e,!this._firstShow,this._longHide)+QK(s[0],s[1],!0)+("border-color:"+Aw(t)+";")+(e.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):r.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(e,t,i,r,s){var a=this.el;if(e==null){a.innerHTML="";return}var o="";if(ki(s)&&i.get("trigger")==="item"&&!Wde(i)&&(o=Ort(i,r,s)),ki(e))a.innerHTML=e+o;else if(e){a.innerHTML="",vi(e)||(e=[e]);for(var l=0;l<e.length;l++)_4(e[l])&&e[l].parentNode!==a&&a.appendChild(e[l]);if(o&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=o,a.appendChild(u)}}},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el;return[e.offsetWidth,e.offsetHeight]},n.prototype.moveTo=function(e,t){var i=this._styleCoord;if(ZK(i,this._zr,this._appendToBody,e,t),i[0]!=null&&i[1]!=null){var r=this.el.style,s=QK(i[0],i[1]);Nt(s,function(a){r[a[0]]=a[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){var e=this,t=this.el.style;t.visibility="hidden",t.opacity="0",tr.transform3dSupported&&(t.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return e._longHide=!0},500)},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(us(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}();const zrt=Urt;var Hrt=function(){function n(e){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=e.getZr(),eX(this._styleCoord,this._zr,e.getWidth()/2,e.getHeight()/2)}return n.prototype.update=function(e){var t=e.get("alwaysShowContent");t&&this._moveIfResized(),this._alwaysShowContent=t},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(e,t,i,r,s){var a=this;Ni(e)&&vl(""),this.el&&this._zr.remove(this.el);var o=i.getModel("textStyle");this.el=new nl({style:{rich:t.richTextStyles,text:e,lineHeight:22,borderWidth:1,borderColor:r,textShadowColor:o.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:Qce(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),Nt(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=i.get(u)}),Nt(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=o.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},n.prototype.setEnterable=function(e){this._enterable=e},n.prototype.getSize=function(){var e=this.el,t=this.el.getBoundingRect(),i=JK(e.style);return[t.width+i.left+i.right,t.height+i.top+i.bottom]},n.prototype.moveTo=function(e,t){var i=this.el;if(i){var r=this._styleCoord;eX(r,this._zr,e,t),e=r[0],t=r[1];var s=i.style,a=_p(s.borderWidth||0),o=JK(s);i.x=e+a+o.left,i.y=t+a+o.top,i.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[2],t=this._styleCoord[3];this.moveTo(e*this._zr.getWidth(),t*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(e){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(us(this.hide,this),e)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function _p(n){return Math.max(0,n)}function JK(n){var e=_p(n.shadowBlur||0),t=_p(n.shadowOffsetX||0),i=_p(n.shadowOffsetY||0);return{left:_p(e-t),right:_p(e+t),top:_p(e-i),bottom:_p(e+i)}}function eX(n,e,t,i){n[0]=t,n[1]=i,n[2]=n[0]/e.getWidth(),n[3]=n[1]/e.getHeight()}const Vrt=Hrt;var $rt=new El({shape:{x:-1,y:-1,width:2,height:2}}),Grt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.init=function(t,i){if(!(tr.node||!i.getDom())){var r=t.getComponent("tooltip"),s=this._renderMode=LYe(r.get("renderMode"));this._tooltipContent=s==="richText"?new Vrt(i):new zrt(i.getDom(),i,{appendToBody:r.get("appendToBody",!0)})}},e.prototype.render=function(t,i,r){if(!(tr.node||!r.getDom())){this.group.removeAll(),this._tooltipModel=t,this._ecModel=i,this._api=r;var s=this._tooltipContent;s.update(t),s.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&t.get("transitionDuration")?Jce(this,"_updatePosition",50,"fixRate"):MO(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,i=t.get("triggerOn");$de("itemTooltip",this._api,us(function(r,s,a){i!=="none"&&(i.indexOf(r)>=0?this._tryShow(s,a):r==="leave"&&this._hide(a))},this))},e.prototype._keepShow=function(){var t=this._tooltipModel,i=this._ecModel,r=this._api,s=t.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!r.isDisposed()&&a.manuallyShowTip(t,i,r,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},e.prototype.manuallyShowTip=function(t,i,r,s){if(!(s.from===this.uid||tr.node||!r.getDom())){var a=tX(s,r);this._ticket="";var o=s.dataByCoordSys,l=Krt(s,i,r);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:s.position,positionDefault:"bottom"},a)}else if(s.tooltip&&s.x!=null&&s.y!=null){var c=$rt;c.x=s.x,c.y=s.y,c.update(),Rs(c).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:c},a)}else if(o)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:o,tooltipOption:s.tooltipOption},a);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(t,i,r,s))return;var d=Gde(s,i),f=d.point[0],h=d.point[1];f!=null&&h!=null&&this._tryShow({offsetX:f,offsetY:h,target:d.el,position:s.position,positionDefault:"bottom"},a)}else s.x!=null&&s.y!=null&&(r.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:r.getZr().findHover(s.x,s.y).target},a))}},e.prototype.manuallyHideTip=function(t,i,r,s){var a=this._tooltipContent;this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(tX(s,r))},e.prototype._manuallyAxisShowTip=function(t,i,r,s){var a=s.seriesIndex,o=s.dataIndex,l=i.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||o==null||l==null)){var u=i.getSeriesByIndex(a);if(u){var c=u.getData(),d=nx([c.getItemModel(o),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(d.get("trigger")==="axis")return r.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:o,position:s.position}),!0}}},e.prototype._tryShow=function(t,i){var r=t.target,s=this._tooltipModel;if(s){this._lastX=t.offsetX,this._lastY=t.offsetY;var a=t.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,t);else if(r){this._lastDataByCoordSys=null;var o,l;Bx(r,function(u){if(Rs(u).dataIndex!=null)return o=u,!0;if(Rs(u).tooltipConfig!=null)return l=u,!0},!0),o?this._showSeriesItemTooltip(t,o,i):l?this._showComponentItemTooltip(t,l,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},e.prototype._showOrMove=function(t,i){var r=t.get("showDelay");i=us(i,this),clearTimeout(this._showTimout),r>0?this._showTimout=setTimeout(i,r):i()},e.prototype._showAxisTooltip=function(t,i){var r=this._ecModel,s=this._tooltipModel,a=[i.offsetX,i.offsetY],o=nx([i.tooltipOption],s),l=this._renderMode,u=[],c=Dw("section",{blocks:[],noHeader:!0}),d=[],f=new $5;Nt(t,function(_){Nt(_.dataByAxis,function(y){var b=r.getComponent(y.axisDim+"Axis",y.axisIndex),x=y.value;if(!(!b||x==null)){var w=Hde(x,b.axis,r,y.seriesDataIndices,y.valueLabelOpt),A=Dw("section",{header:w,noHeader:!Rd(w),sortBlocks:!0,blocks:[]});c.blocks.push(A),Nt(y.seriesDataIndices,function(T){var C=r.getSeriesByIndex(T.seriesIndex),E=T.dataIndexInside,I=C.getDataParams(E);if(!(I.dataIndex<0)){I.axisDim=y.axisDim,I.axisIndex=y.axisIndex,I.axisType=y.axisType,I.axisId=y.axisId,I.axisValue=Lde(b.axis,{value:x}),I.axisValueLabel=w,I.marker=f.makeTooltipMarker("item",Aw(I.color),l);var k=Vj(C.formatTooltip(E,!0,null)),O=k.frag;if(O){var U=nx([C],s).get("valueFormatter");A.blocks.push(U?Rn({valueFormatter:U},O):O)}k.text&&d.push(k.text),u.push(I)}})}})}),c.blocks.reverse(),d.reverse();var h=i.position,p=o.get("order"),m=jj(c,f,l,p,r.get("useUTC"),o.get("textStyle"));m&&d.unshift(m);var g=l==="richText"?`

`:"<br/>",v=d.join(g);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(t,u)?this._updatePosition(o,h,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(o,v,u,Math.random()+"",a[0],a[1],h,null,f)})},e.prototype._showSeriesItemTooltip=function(t,i,r){var s=this._ecModel,a=Rs(i),o=a.seriesIndex,l=s.getSeriesByIndex(o),u=a.dataModel||l,c=a.dataIndex,d=a.dataType,f=u.getData(d),h=this._renderMode,p=t.positionDefault,m=nx([f.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=m.get("trigger");if(!(g!=null&&g!=="item")){var v=u.getDataParams(c,d),_=new $5;v.marker=_.makeTooltipMarker("item",Aw(v.color),h);var y=Vj(u.formatTooltip(c,!1,d)),b=m.get("order"),x=m.get("valueFormatter"),w=y.frag,A=w?jj(x?Rn({valueFormatter:x},w):w,_,h,b,s.get("useUTC"),m.get("textStyle")):y.text,T="item_"+u.name+"_"+c;this._showOrMove(m,function(){this._showTooltipContent(m,A,v,T,t.offsetX,t.offsetY,t.position,t.target,_)}),r({type:"showTip",dataIndexInside:c,dataIndex:f.getRawIndex(c),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,i,r){var s=Rs(i),a=s.tooltipConfig,o=a.option||{};if(ki(o)){var l=o;o={content:l,formatter:l}}var u=[o],c=this._ecModel.getComponent(s.componentMainType,s.componentIndex);c&&u.push(c),u.push({formatter:o.content});var d=t.positionDefault,f=nx(u,this._tooltipModel,d?{position:d}:null),h=f.get("content"),p=Math.random()+"",m=new $5;this._showOrMove(f,function(){var g=Cr(f.get("formatterParams")||{});this._showTooltipContent(f,h,g,p,t.offsetX,t.offsetY,t.position,i,m)}),r({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,i,r,s,a,o,l,u,c){if(this._ticket="",!(!t.get("showContent")||!t.get("show"))){var d=this._tooltipContent;d.setEnterable(t.get("enterable"));var f=t.get("formatter");l=l||t.get("position");var h=i,p=this._getNearestPoint([a,o],r,t.get("trigger"),t.get("borderColor")),m=p.color;if(f)if(ki(f)){var g=t.ecModel.get("useUTC"),v=vi(r)?r[0]:r,_=v&&v.axisType&&v.axisType.indexOf("time")>=0;h=f,_&&(h=Sce(v.axisValue,h,g)),h=wce(h,r,!0)}else if($r(f)){var y=us(function(b,x){b===this._ticket&&(d.setContent(x,c,t,m,l),this._updatePosition(t,l,a,o,d,r,u))},this);this._ticket=s,h=f(r,s,y)}else h=f;d.setContent(h,c,t,m,l),d.show(t,m),this._updatePosition(t,l,a,o,d,r,u)}},e.prototype._getNearestPoint=function(t,i,r,s){if(r==="axis"||vi(i))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!vi(i))return{color:s||i.color||i.borderColor}},e.prototype._updatePosition=function(t,i,r,s,a,o,l){var u=this._api.getWidth(),c=this._api.getHeight();i=i||t.get("position");var d=a.getSize(),f=t.get("align"),h=t.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),$r(i)&&(i=i([r,s],o,a.el,p,{viewSize:[u,c],contentSize:d.slice()})),vi(i))r=da(i[0],u),s=da(i[1],c);else if(Ni(i)){var m=i;m.width=d[0],m.height=d[1];var g=Ew(m,{width:u,height:c});r=g.x,s=g.y,f=null,h=null}else if(ki(i)&&l){var v=jrt(i,p,d,t.get("borderWidth"));r=v[0],s=v[1]}else{var v=Wrt(r,s,a,u,c,f?null:20,h?null:20);r=v[0],s=v[1]}if(f&&(r-=nX(f)?d[0]/2:f==="right"?d[0]:0),h&&(s-=nX(h)?d[1]/2:h==="bottom"?d[1]:0),Wde(t)){var v=qrt(r,s,a,u,c);r=v[0],s=v[1]}a.moveTo(r,s)},e.prototype._updateContentNotChangedOnAxis=function(t,i){var r=this._lastDataByCoordSys,s=this._cbParamsList,a=!!r&&r.length===t.length;return a&&Nt(r,function(o,l){var u=o.dataByAxis||[],c=t[l]||{},d=c.dataByAxis||[];a=a&&u.length===d.length,a&&Nt(u,function(f,h){var p=d[h]||{},m=f.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&f.value===p.value&&f.axisType===p.axisType&&f.axisId===p.axisId&&m.length===g.length,a&&Nt(m,function(v,_){var y=g[_];a=a&&v.seriesIndex===y.seriesIndex&&v.dataIndex===y.dataIndex}),s&&Nt(f.seriesDataIndices,function(v){var _=v.seriesIndex,y=i[_],b=s[_];y&&b&&b.data!==y.data&&(a=!1)})})}),this._lastDataByCoordSys=t,this._cbParamsList=i,!!a},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,i){tr.node||!i.getDom()||(MO(this,"_updatePosition"),this._tooltipContent.dispose(),FO("itemTooltip",i))},e.type="tooltip",e}(d0);function nx(n,e,t){var i=e.ecModel,r;t?(r=new xo(t,i,i),r=new xo(e.option,r,i)):r=e;for(var s=n.length-1;s>=0;s--){var a=n[s];a&&(a instanceof xo&&(a=a.get("tooltip",!0)),ki(a)&&(a={formatter:a}),a&&(r=new xo(a,r,i)))}return r}function tX(n,e){return n.dispatchAction||us(e.dispatchAction,e)}function Wrt(n,e,t,i,r,s,a){var o=t.getSize(),l=o[0],u=o[1];return s!=null&&(n+l+s+2>i?n-=l+s:n+=s),a!=null&&(e+u+a>r?e-=u+a:e+=a),[n,e]}function qrt(n,e,t,i,r){var s=t.getSize(),a=s[0],o=s[1];return n=Math.min(n+a,i)-a,e=Math.min(e+o,r)-o,n=Math.max(n,0),e=Math.max(e,0),[n,e]}function jrt(n,e,t,i){var r=t[0],s=t[1],a=Math.ceil(Math.SQRT2*i)+8,o=0,l=0,u=e.width,c=e.height;switch(n){case"inside":o=e.x+u/2-r/2,l=e.y+c/2-s/2;break;case"top":o=e.x+u/2-r/2,l=e.y-s-a;break;case"bottom":o=e.x+u/2-r/2,l=e.y+c+a;break;case"left":o=e.x-r-a,l=e.y+c/2-s/2;break;case"right":o=e.x+u+a,l=e.y+c/2-s/2}return[o,l]}function nX(n){return n==="center"||n==="middle"}function Krt(n,e,t){var i=B9(n).queryOptionMap,r=i.keys()[0];if(!(!r||r==="series")){var s=NT(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=s.models[0];if(a){var o=t.getViewOfComponentModel(a),l;if(o.group.traverse(function(u){var c=Rs(u).tooltipConfig;if(c&&c.name===n.name)return l=u,!0}),l)return{componentMainType:r,componentIndex:a.componentIndex,el:l}}}}const Xrt=Grt;function Yrt(n){F_(Art),n.registerComponentModel(Irt),n.registerComponentView(Xrt),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Al),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Al)}var Qrt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Ms),Zrt=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,i,r){if(this.group.removeAll(),!!t.get("show")){var s=this.group,a=t.getModel("textStyle"),o=t.getModel("subtextStyle"),l=t.get("textAlign"),u=yr(t.get("textBaseline"),t.get("textVerticalAlign")),c=new nl({style:c0(a,{text:t.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),d=c.getBoundingRect(),f=t.get("subtext"),h=new nl({style:c0(o,{text:f,fill:o.getTextColor(),y:d.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=t.get("link"),m=t.get("sublink"),g=t.get("triggerEvent",!0);c.silent=!p&&!g,h.silent=!m&&!g,p&&c.on("click",function(){Tj(p,"_"+t.get("target"))}),m&&h.on("click",function(){Tj(m,"_"+t.get("subtarget"))}),Rs(c).eventData=Rs(h).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(c),f&&s.add(h);var v=s.getBoundingRect(),_=t.getBoxLayoutParams();_.width=v.width,_.height=v.height;var y=Ew(_,{width:r.getWidth(),height:r.getHeight()},t.get("padding"));l||(l=t.get("left")||t.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),u||(u=t.get("top")||t.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?y.y+=y.height:u==="middle"&&(y.y+=y.height/2),u=u||"top"),s.x=y.x,s.y=y.y,s.markRedraw();var b={align:l,verticalAlign:u};c.setStyle(b),h.setStyle(b),v=s.getBoundingRect();var x=y.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var A=new El({shape:{x:v.x-x[3],y:v.y-x[0],width:v.width+x[1]+x[3],height:v.height+x[0]+x[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});s.add(A)}},e.type="title",e}(d0);function Jrt(n){n.registerComponentModel(Qrt),n.registerComponentView(Zrt)}var est=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},tst=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,i,r){this.mergeDefaultAndTheme(t,r),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),this._updateSelector(t)},e.prototype._updateSelector=function(t){var i=t.selector,r=this.ecModel;i===!0&&(i=t.selector=["all","inverse"]),vi(i)&&Nt(i,function(s,a){ki(s)&&(s={type:s}),i[a]=xs(s,est(r,s.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var i=!1,r=0;r<t.length;r++){var s=t[r].get("name");if(this.isSelected(s)){this.select(s),i=!0;break}}!i&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var i=[],r=[];t.eachRawSeries(function(l){var u=l.name;r.push(u);var c;if(l.legendVisualProvider){var d=l.legendVisualProvider,f=d.getAllNames();t.isSeriesFiltered(l)||(r=r.concat(f)),f.length?i=i.concat(f):c=!0}else c=!0;c&&N9(l)&&i.push(l.name)}),this._availableNames=r;var s=this.get("data")||i,a=_r(),o=Sr(s,function(l){return(ki(l)||Ws(l))&&(l={name:l}),a.get(l.name)?null:(a.set(l.name,!0),new xo(l,this,this.ecModel))},this);this._data=Nu(o,function(l){return!!l})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var i=this.option.selected,r=this.get("selectedMode");if(r==="single"){var s=this._data;Nt(s,function(a){i[a.get("name")]=!1})}i[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var i=this.option.selected;i.hasOwnProperty(t)||(i[t]=!0),this[i[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,i=this.option.selected;Nt(t,function(r){i[r.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,i=this.option.selected;Nt(t,function(r){var s=r.get("name",!0);i.hasOwnProperty(s)||(i[s]=!0),i[s]=!i[s]})},e.prototype.isSelected=function(t){var i=this.option.selected;return!(i.hasOwnProperty(t)&&!i[t])&&ls(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Ms);const UO=tst;var ay=pa,zO=Nt,KA=Yd,nst=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new KA),this.group.add(this._selectorGroup=new KA),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,i,r){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var a=t.get("align"),o=t.get("orient");(!a||a==="auto")&&(a=t.get("left")==="right"&&o==="vertical"?"right":"left");var l=t.get("selector",!0),u=t.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=o==="horizontal"?"end":"start"),this.renderInner(a,t,i,r,l,o,u);var c=t.getBoxLayoutParams(),d={width:r.getWidth(),height:r.getHeight()},f=t.get("padding"),h=Ew(c,d,f),p=this.layoutInner(t,a,h,s,l,u),m=Ew(Cs({width:p.width,height:p.height},c),d,f);this.group.x=m.x-p.x,this.group.y=m.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Ert(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,i,r,s,a,o,l){var u=this.getContentGroup(),c=_r(),d=i.get("selectedMode"),f=[];r.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),zO(i.getData(),function(h,p){var m=h.get("name");if(!this.newlineDisabled&&(m===""||m===`
`)){var g=new KA;g.newline=!0,u.add(g);return}var v=r.getSeriesByName(m)[0];if(!c.get(m))if(v){var _=v.getData(),y=_.getVisual("legendLineStyle")||{},b=_.getVisual("legendIcon"),x=_.getVisual("style"),w=this._createItem(v,m,p,h,i,t,y,x,b,d,s);w.on("click",ay(iX,m,null,s,f)).on("mouseover",ay(HO,v.name,null,s,f)).on("mouseout",ay(VO,v.name,null,s,f)),c.set(m,!0)}else r.eachRawSeries(function(A){if(!c.get(m)&&A.legendVisualProvider){var T=A.legendVisualProvider;if(!T.containName(m))return;var C=T.indexOfName(m),E=T.getItemVisual(C,"style"),I=T.getItemVisual(C,"legendIcon"),k=Cg(E.fill);k&&k[3]===0&&(k[3]=.2,E=Rn(Rn({},E),{fill:R9(k,"rgba")}));var O=this._createItem(A,m,p,h,i,t,{},E,I,d,s);O.on("click",ay(iX,null,m,s,f)).on("mouseover",ay(HO,null,m,s,f)).on("mouseout",ay(VO,null,m,s,f)),c.set(m,!0)}},this)},this),a&&this._createSelector(a,i,s,o,l)},e.prototype._createSelector=function(t,i,r,s,a){var o=this.getSelectorGroup();zO(t,function(u){var c=u.type,d=new nl({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){r.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});o.add(d);var f=i.getModel("selectorLabel"),h=i.getModel(["emphasis","selectorLabel"]);gce(d,{normal:f,emphasis:h},{defaultText:u.title}),vO(d)})},e.prototype._createItem=function(t,i,r,s,a,o,l,u,c,d,f){var h=t.visualDrawType,p=a.get("itemWidth"),m=a.get("itemHeight"),g=a.isSelected(i),v=s.get("symbolRotate"),_=s.get("symbolKeepAspect"),y=s.get("icon");c=y||c||"roundRect";var b=ist(c,s,l,u,h,g,f),x=new KA,w=s.getModel("textStyle");if($r(t.getLegendIcon)&&(!y||y==="inherit"))x.add(t.getLegendIcon({itemWidth:p,itemHeight:m,icon:c,iconRotate:v,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:_}));else{var A=y==="inherit"&&t.getData().getVisual("symbol")?v==="inherit"?t.getData().getVisual("symbolRotate"):v:0;x.add(rst({itemWidth:p,itemHeight:m,icon:c,iconRotate:A,itemStyle:b.itemStyle,lineStyle:b.lineStyle,symbolKeepAspect:_}))}var T=o==="left"?p+5:-5,C=o,E=a.get("formatter"),I=i;ki(E)&&E?I=E.replace("{name}",i??""):$r(E)&&(I=E(i));var k=g?w.getTextColor():s.get("inactiveColor");x.add(new nl({style:c0(w,{text:I,x:T,y:m/2,fill:k,align:C,verticalAlign:"middle"},{inheritColor:k})}));var O=new El({shape:x.getBoundingRect(),invisible:!0}),U=s.getModel("tooltip");return U.get("show")&&J9({el:O,componentModel:a,itemName:i,itemTooltipOption:U.option}),x.add(O),x.eachChild(function(z){z.silent=!0}),O.silent=!d,this.getContentGroup().add(x),vO(x),x.__legendDataIndex=r,x},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getContentGroup(),u=this.getSelectorGroup();m2(t.get("orient"),l,t.get("itemGap"),r.width,r.height);var c=l.getBoundingRect(),d=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){m2("horizontal",u,t.get("selectorItemGap",!0));var f=u.getBoundingRect(),h=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),m=t.getOrient().index,g=m===0?"width":"height",v=m===0?"height":"width",_=m===0?"y":"x";o==="end"?h[m]+=c[g]+p:d[m]+=f[g]+p,h[1-m]+=c[v]/2-f[v]/2,u.x=h[0],u.y=h[1],l.x=d[0],l.y=d[1];var y={x:0,y:0};return y[g]=c[g]+p+f[g],y[v]=Math.max(c[v],f[v]),y[_]=Math.min(0,f[_]+h[1-m]),y}else return l.x=d[0],l.y=d[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(d0);function ist(n,e,t,i,r,s,a){function o(g,v){g.lineWidth==="auto"&&(g.lineWidth=v.lineWidth>0?2:0),zO(g,function(_,y){g[y]==="inherit"&&(g[y]=v[y])})}var l=e.getModel("itemStyle"),u=l.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",d=l.getShallow("decal");u.decal=!d||d==="inherit"?i.decal:kO(d,a),u.fill==="inherit"&&(u.fill=i[r]),u.stroke==="inherit"&&(u.stroke=i[c]),u.opacity==="inherit"&&(u.opacity=(r==="fill"?i:t).opacity),o(u,i);var f=e.getModel("lineStyle"),h=f.getLineStyle();if(o(h,t),u.fill==="auto"&&(u.fill=i.fill),u.stroke==="auto"&&(u.stroke=i.fill),h.stroke==="auto"&&(h.stroke=i.fill),!s){var p=e.get("inactiveBorderWidth"),m=u[c];u.lineWidth=p==="auto"?i.lineWidth>0&&m?2:0:u.lineWidth,u.fill=e.get("inactiveColor"),u.stroke=e.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:u,lineStyle:h}}function rst(n){var e=n.icon||"roundRect",t=dU(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function iX(n,e,t,i){VO(n,e,t,i),t.dispatchAction({type:"legendToggleSelect",name:n??e}),HO(n,e,t,i)}function Xde(n){for(var e=n.getZr().storage.getDisplayList(),t,i=0,r=e.length;i<r&&!(t=e[i].states.emphasis);)i++;return t&&t.hoverLayer}function HO(n,e,t,i){Xde(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:i})}function VO(n,e,t,i){Xde(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:i})}const Yde=nst;function sst(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var i=0;i<e.length;i++)if(!e[i].isSelected(t.name))return!1;return!0})}function ix(n,e,t){var i={},r=n==="toggleSelected",s;return t.eachComponent("legend",function(a){r&&s!=null?a[s?"select":"unSelect"](e.name):n==="allSelect"||n==="inverseSelect"?a[n]():(a[n](e.name),s=a.isSelected(e.name));var o=a.getData();Nt(o,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);i.hasOwnProperty(u)?i[u]=i[u]&&c:i[u]=c}})}),n==="allSelect"||n==="inverseSelect"?{selected:i}:{name:e.name,selected:i}}function ast(n){n.registerAction("legendToggleSelect","legendselectchanged",pa(ix,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",pa(ix,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",pa(ix,"inverseSelect")),n.registerAction("legendSelect","legendselected",pa(ix,"select")),n.registerAction("legendUnSelect","legendunselected",pa(ix,"unSelect"))}function Qde(n){n.registerComponentModel(UO),n.registerComponentView(Yde),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,sst),n.registerSubTypeDefaulter("legend",function(){return"plain"}),ast(n)}var ost=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,i,r){var s=iU(t);n.prototype.init.call(this,t,i,r),rX(this,t,s)},e.prototype.mergeOption=function(t,i){n.prototype.mergeOption.call(this,t,i),rX(this,this.option,t)},e.type="legend.scroll",e.defaultOption=SJe(UO.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(UO);function rX(n,e,t){var i=n.getOrient(),r=[1,1];r[i.index]=0,Mw(e,t,{type:"box",ignoreSize:!!r})}const lst=ost;var sX=Yd,ak=["width","height"],ok=["x","y"],ust=function(n){Mi(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new sX),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new sX)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,i,r,s,a,o,l){var u=this;n.prototype.renderInner.call(this,t,i,r,s,a,o,l);var c=this._controllerGroup,d=i.get("pageIconSize",!0),f=vi(d)?d:[d,d];p("pagePrev",0);var h=i.getModel("pageTextStyle");c.add(new nl({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(m,g){var v=m+"DataIndex",_=Z9(i.get("pageIcons",!0)[i.getOrient().name][g],{onclick:us(u._pageGo,u,v,i,s)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});_.name=m,c.add(_)}},e.prototype.layoutInner=function(t,i,r,s,a,o){var l=this.getSelectorGroup(),u=t.getOrient().index,c=ak[u],d=ok[u],f=ak[1-u],h=ok[1-u];a&&m2("horizontal",l,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),m=l.getBoundingRect(),g=[-m.x,-m.y],v=Cr(r);a&&(v[c]=r[c]-m[c]-p);var _=this._layoutContentAndController(t,s,v,u,c,f,h,d);if(a){if(o==="end")g[u]+=_[c]+p;else{var y=m[c]+p;g[u]-=y,_[d]-=y}_[c]+=m[c]+p,g[1-u]+=_[h]+_[f]/2-m[f]/2,_[f]=Math.max(_[f],m[f]),_[h]=Math.min(_[h],m[h]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return _},e.prototype._layoutContentAndController=function(t,i,r,s,a,o,l,u){var c=this.getContentGroup(),d=this._containerGroup,f=this._controllerGroup;m2(t.get("orient"),c,t.get("itemGap"),s?r.width:null,s?null:r.height),m2("horizontal",f,t.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),p=f.getBoundingRect(),m=this._showController=h[a]>r[a],g=[-h.x,-h.y];i||(g[s]=c[u]);var v=[0,0],_=[-p.x,-p.y],y=yr(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(m){var b=t.get("pageButtonPosition",!0);b==="end"?_[s]+=r[a]-p[a]:v[s]+=p[a]+y}_[1-s]+=h[o]/2-p[o]/2,c.setPosition(g),d.setPosition(v),f.setPosition(_);var x={x:0,y:0};if(x[a]=m?r[a]:h[a],x[o]=Math.max(h[o],p[o]),x[l]=Math.min(0,p[l]+_[1-s]),d.__rectSize=r[a],m){var w={x:0,y:0};w[a]=Math.max(r[a]-p[a]-y,0),w[o]=x[o],d.setClipPath(new El({shape:w})),d.__rectSize=w[a]}else f.eachChild(function(T){T.attr({invisible:!0,silent:!0})});var A=this._getPageInfo(t);return A.pageIndex!=null&&B_(c,{x:A.contentPosition[0],y:A.contentPosition[1]},m?t:null),this._updatePageInfoView(t,A),x},e.prototype._pageGo=function(t,i,r){var s=this._getPageInfo(i)[t];s!=null&&r.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:i.id})},e.prototype._updatePageInfoView=function(t,i){var r=this._controllerGroup;Nt(["pagePrev","pageNext"],function(c){var d=c+"DataIndex",f=i[d]!=null,h=r.childOfName(c);h&&(h.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var s=r.childOfName("pageText"),a=t.get("pageFormatter"),o=i.pageIndex,l=o!=null?o+1:0,u=i.pageCount;s&&a&&s.setStyle("text",ki(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},e.prototype._getPageInfo=function(t){var i=t.get("scrollDataIndex",!0),r=this.getContentGroup(),s=this._containerGroup.__rectSize,a=t.getOrient().index,o=ak[a],l=ok[a],u=this._findTargetItemIndex(i),c=r.children(),d=c[u],f=c.length,h=f?1:0,p={contentPosition:[r.x,r.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!d)return p;var m=b(d);p.contentPosition[a]=-m.s;for(var g=u+1,v=m,_=m,y=null;g<=f;++g)y=b(c[g]),(!y&&_.e>v.s+s||y&&!x(y,v.s))&&(_.i>v.i?v=_:v=y,v&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=v.i),++p.pageCount)),_=y;for(var g=u-1,v=m,_=m,y=null;g>=-1;--g)y=b(c[g]),(!y||!x(_,y.s))&&v.i<_.i&&(_=v,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=v.i),++p.pageCount,++p.pageIndex),v=y;return p;function b(w){if(w){var A=w.getBoundingRect(),T=A[l]+w[l];return{s:T,e:T+A[o],i:w.__legendDataIndex}}}function x(w,A){return w.e>=A&&w.s<=A+s}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var i,r=this.getContentGroup(),s;return r.eachChild(function(a,o){var l=a.__legendDataIndex;s==null&&l!=null&&(s=o),l===t&&(i=o)}),i??s},e.type="legend.scroll",e}(Yde);const cst=ust;function dst(n){n.registerAction("legendScroll","legendscroll",function(e,t){var i=e.scrollDataIndex;i!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(r){r.setScrollDataIndex(i)})})}function fst(n){F_(Qde),n.registerComponentModel(lst),n.registerComponentView(cst),dst(n)}function hst(n){F_(Qde),F_(fst)}var lk=null;function pst(n){return lk||(lk=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),lk(n)}var uk=null;function mst(n){uk||(uk=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),uk(n)}function gst(n){var e=document.createElement("style");return e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.querySelector("head")||document.body).appendChild(e),e}function XA(n,e){e===void 0&&(e={});var t=document.createElement(n);return Object.keys(e).forEach(function(i){t[i]=e[i]}),t}function Zde(n,e,t){var i=window.getComputedStyle(n,t||null)||{display:"none"};return i[e]}function $O(n){if(!document.documentElement.contains(n))return{detached:!0,rendered:!1};for(var e=n;e!==document;){if(Zde(e,"display")==="none")return{detached:!1,rendered:!1};e=e.parentNode}return{detached:!1,rendered:!0}}var vst='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',GO=0,YM=null;function yst(n,e){n.__resize_mutation_handler__||(n.__resize_mutation_handler__=Sst.bind(n));var t=n.__resize_listeners__;if(!t){if(n.__resize_listeners__=[],window.ResizeObserver){var i=n.offsetWidth,r=n.offsetHeight,s=new ResizeObserver(function(){!n.__resize_observer_triggered__&&(n.__resize_observer_triggered__=!0,n.offsetWidth===i&&n.offsetHeight===r)||H4(n)}),a=$O(n),o=a.detached,l=a.rendered;n.__resize_observer_triggered__=o===!1&&l===!1,n.__resize_observer__=s,s.observe(n)}else if(n.attachEvent&&n.addEventListener)n.__resize_legacy_resize_handler__=function(){H4(n)},n.attachEvent("onresize",n.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);else if(GO||(YM=gst(vst)),xst(n),n.__resize_rendered__=$O(n).rendered,window.MutationObserver){var u=new MutationObserver(n.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),n.__resize_mutation_observer__=u}}n.__resize_listeners__.push(e),GO++}function _st(n,e){var t=n.__resize_listeners__;if(t){if(e&&t.splice(t.indexOf(e),1),!t.length||!e){if(n.detachEvent&&n.removeEventListener){n.detachEvent("onresize",n.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",n.__resize_mutation_handler__);return}n.__resize_observer__?(n.__resize_observer__.unobserve(n),n.__resize_observer__.disconnect(),n.__resize_observer__=null):(n.__resize_mutation_observer__&&(n.__resize_mutation_observer__.disconnect(),n.__resize_mutation_observer__=null),n.removeEventListener("scroll",_U),n.removeChild(n.__resize_triggers__.triggers),n.__resize_triggers__=null),n.__resize_listeners__=null}!--GO&&YM&&YM.parentNode.removeChild(YM)}}function bst(n){var e=n.__resize_last__,t=e.width,i=e.height,r=n.offsetWidth,s=n.offsetHeight;return r!==t||s!==i?{width:r,height:s}:null}function Sst(){var n=$O(this),e=n.rendered,t=n.detached;e!==this.__resize_rendered__&&(!t&&this.__resize_triggers__&&(bU(this),this.addEventListener("scroll",_U,!0)),this.__resize_rendered__=e,H4(this))}function _U(){var n=this;bU(this),this.__resize_raf__&&mst(this.__resize_raf__),this.__resize_raf__=pst(function(){var e=bst(n);e&&(n.__resize_last__=e,H4(n))})}function H4(n){!n||!n.__resize_listeners__||n.__resize_listeners__.forEach(function(e){e.call(n,n)})}function xst(n){var e=Zde(n,"position");(!e||e==="static")&&(n.style.position="relative"),n.__resize_old_position__=e,n.__resize_last__={};var t=XA("div",{className:"resize-triggers"}),i=XA("div",{className:"resize-expand-trigger"}),r=XA("div"),s=XA("div",{className:"resize-contract-trigger"});i.appendChild(r),t.appendChild(i),t.appendChild(s),n.appendChild(t),n.__resize_triggers__={triggers:t,expand:i,expandChild:r,contract:s},bU(n),n.addEventListener("scroll",_U,!0),n.__resize_last__={width:n.offsetWidth,height:n.offsetHeight}}function bU(n){var e=n.__resize_triggers__,t=e.expand,i=e.expandChild,r=e.contract,s=r.scrollWidth,a=r.scrollHeight,o=t.offsetWidth,l=t.offsetHeight,u=t.scrollWidth,c=t.scrollHeight;r.scrollLeft=s,r.scrollTop=a,i.style.width=o+1+"px",i.style.height=l+1+"px",t.scrollLeft=u,t.scrollTop=c}var Lf=function(){return Lf=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++)for(var r in e=arguments[t])Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Lf.apply(this,arguments)},wst=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Tst(n){return e=Object.create(null),wst.forEach(function(t){e[t]=function(i){return function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(!n.value)throw new Error("ECharts is not initialized yet.");return n.value[i].apply(n.value,r)}}(t)}),e;var e}var Cst={autoresize:[Boolean,Object]},Ast=/^on[^a-z]/,Est=function(n){return Ast.test(n)};function YA(n,e){var t=S(n);return t&&typeof t=="object"&&"value"in t?t.value||e:t||e}var Mst="ecLoadingOptions",Ist={loading:Boolean,loadingOptions:Object},rx=null,Jde="x-vue-echarts",aX=[],sx=[];(function(n,e){if(n&&typeof document<"u"){var t,i=e.prepend===!0?"prepend":"append",r=e.singleTag===!0,s=typeof e.container=="string"?document.querySelector(e.container):document.getElementsByTagName("head")[0];if(r){var a=aX.indexOf(s);a===-1&&(a=aX.push(s)-1,sx[a]={}),t=sx[a]&&sx[a][i]?sx[a][i]:sx[a][i]=o()}else t=o();n.charCodeAt(0)===65279&&(n=n.substring(1)),t.styleSheet?t.styleSheet.cssText+=n:t.appendChild(document.createTextNode(n))}function o(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),e.attributes)for(var u=Object.keys(e.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],e.attributes[u[c]]);var d=i==="prepend"?"afterbegin":"beforeend";return s.insertAdjacentElement(d,l),l}})(`x-vue-echarts,.echarts-inner{display:block;width:100%;height:100%;min-width:0}
`,{});var Dst=function(){if(rx!=null)return rx;if(typeof HTMLElement>"u"||typeof customElements>"u")return rx=!1;try{new Function("tag",`class EChartsElement extends HTMLElement {
  __dispose = null;

  disconnectedCallback() {
    if (this.__dispose) {
      this.__dispose();
      this.__dispose = null;
    }
  }
}

if (customElements.get(tag) == null) {
  customElements.define(tag, EChartsElement);
}
`)(Jde)}catch{return rx=!1}return rx=!0}(),Rst="ecTheme",Pst="ecInitOptions",kst="ecUpdateOptions",Lst=Ne({name:"echarts",props:Lf(Lf({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},Cst),Ist),emits:{},inheritAttrs:!1,setup:function(n,e){var t=e.attrs,i=Ji(),r=Ji(),s=Ji(),a=Ji(),o=Zt(Rst,null),l=Zt(Pst,null),u=Zt(kst,null),c=js(n),d=c.autoresize,f=c.manualUpdate,h=c.loading,p=c.loadingOptions,m=W(function(){return a.value||n.option||null}),g=W(function(){return n.theme||YA(o,{})}),v=W(function(){return n.initOptions||YA(l,{})}),_=W(function(){return n.updateOptions||YA(u,{})}),y=W(function(){return function(C){var E={};for(var I in C)Est(I)||(E[I]=C[I]);return E}(t)}),b=Qn().proxy.$listeners;function x(C){if(r.value){var E=s.value=Int(r.value,g.value,v.value);n.group&&(E.group=n.group);var I=b;I||(I={},Object.keys(t).filter(function(O){return O.indexOf("on")===0&&O.length>2}).forEach(function(O){var U=O.charAt(2).toLowerCase()+O.slice(3);U.substring(U.length-4)==="Once"&&(U="~".concat(U.substring(0,U.length-4))),I[U]=t[O]})),Object.keys(I).forEach(function(O){var U=I[O];if(U){var z=O.toLowerCase();z.charAt(0)==="~"&&(z=z.substring(1),U.__once__=!0);var L=E;if(z.indexOf("zr:")===0&&(L=E.getZr(),z=z.substring(3)),U.__once__){delete U.__once__;var G=U;U=function(){for(var H=[],F=0;F<arguments.length;F++)H[F]=arguments[F];G.apply(void 0,H),L.off(z,U)}}L.on(z,U)}}),d.value?cn(function(){E&&!E.isDisposed()&&E.resize(),k()}):k()}function k(){var O=C||m.value;O&&E.setOption(O,_.value)}}function w(){s.value&&(s.value.dispose(),s.value=void 0)}var A=null;St(f,function(C){typeof A=="function"&&(A(),A=null),C||(A=St(function(){return n.option},function(E,I){E&&(s.value?s.value.setOption(E,Lf({notMerge:E!==I},_.value)):x())},{deep:!0}))},{immediate:!0}),St([g,v],function(){w(),x()},{deep:!0}),ya(function(){n.group&&s.value&&(s.value.group=n.group)});var T=Tst(s);return function(C,E,I){var k=Zt(Mst,{}),O=W(function(){return Lf(Lf({},YA(k,{})),I==null?void 0:I.value)});ya(function(){var U=C.value;U&&(E.value?U.showLoading(O.value):U.hideLoading())})}(s,h,p),function(C,E,I){var k=null;St([I,C,E],function(O,U,z){var L=O[0],G=O[1],H=O[2];if(L&&G&&H){var F=H===!0?{}:H,X=F.throttle,te=X===void 0?100:X,re=F.onResize,ie=function(){G.resize(),re==null||re()};k=te?cU(ie,te):ie,yst(L,k)}z(function(){L&&k&&_st(L,k)})})}(s,d,r),Ln(function(){x()}),Vi(function(){Dst&&i.value?i.value.__dispose=w:w()}),Lf({chart:s,root:i,inner:r,setOption:function(C,E){n.manualUpdate&&(a.value=C),s.value?s.value.setOption(C,E||{}):x(C)},nonEventAttrs:y},T)},render:function(){var n=Lf({},this.nonEventAttrs);return n.ref="root",n.class=n.class?["echarts"].concat(n.class):"echarts",ln(Jde,n,[ln("div",{ref:"inner",class:"echarts-inner"})])}});F_([bit,Nit,Jrt,Yrt,hst]);const Ost={components:{VChart:Lst},setup(){ui("THEME_KEY","light")},data(){return{option:{title:{text:"Traffic Sources",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"horizontal",left:"right",top:"bottom",data:["Direct","Email","Ad Networks","Video Ads","Search Engines"]},series:[{name:"Traffic Sources",type:"pie",radius:"50%",center:["50%","50%"],data:[{value:335,name:"Direct"},{value:310,name:"Email"},{value:234,name:"Ad Networks"},{value:135,name:"Video Ads"},{value:1548,name:"Search Engines"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]}}}},Nst=n=>(cc("data-v-053369da"),n=n(),dc(),n),Bst=Nst(()=>Te("h1",{class:"section-title"},"Quantitative Results",-1));function Fst(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("v-chart"),u=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[Bst]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(u,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[he(l,{class:"chart",option:r.option,autoresize:""},null,8,["option"])]),_:1})]),_:1})])}const Ust=Fa(Ost,[["render",Fst],["__scopeId","data-v-053369da"]]),zst=n=>(cc("data-v-a5ab50df"),n=n(),dc(),n),Hst=zst(()=>Te("h1",{class:"section-title"},"More Results",-1)),Vst=Ne({__name:"Table",setup(n){const e=[{model:"Model A",params:"10 B",value_a:"123",value_b:"321"},{model:"Model B",params:"30 B",value_a:"456",value_b:"654"},{model:"Model C",params:"20 B",value_a:"789",value_b:"987"},{model:"Model D",params:"5 B",value_a:"100",value_b:"200"}];return(t,i)=>{const r=Ht("el-divider"),s=Ht("el-row"),a=Ht("el-table-column"),o=Ht("el-table"),l=Ht("el-tab-pane"),u=Ht("el-tabs"),c=Ht("el-card"),d=Ht("el-col");return j(),_e("div",null,[he(r),he(s,{justify:"center"},{default:Ae(()=>[Hst]),_:1}),he(s,{justify:"center"},{default:Ae(()=>[he(d,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[he(c,{class:"card"},{default:Ae(()=>[he(u,{class:"demo-tabs","model-value":"Method A"},{default:Ae(()=>[he(l,{label:"Method A",name:"Method A"},{default:Ae(()=>[he(o,{data:e,"default-sort":{prop:"value_b",order:"descending"},"scrollbar-always-on":""},{default:Ae(()=>[he(a,{prop:"model",label:"Model",width:"100",sortable:""}),he(a,{prop:"params",label:"#Params","min-width":"120",sortable:""}),he(a,{prop:"value_a",label:"Value A","min-width":"120",sortable:""}),he(a,{prop:"value_b",label:"Value B","min-width":"120",sortable:""})]),_:1})]),_:1}),he(l,{label:"Method B",name:"Method B"},{default:Ae(()=>[An(" Method B ")]),_:1}),he(l,{label:"Method C",name:"Method C"},{default:Ae(()=>[An(" Method C ")]),_:1}),he(l,{label:"Method D",name:"Method D"},{default:Ae(()=>[An(" Method D ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}}),$st=Fa(Vst,[["__scopeId","data-v-a5ab50df"]]),Gst={},UT=n=>(cc("data-v-bb62af2c"),n=n(),dc(),n),Wst=UT(()=>Te("h1",{class:"section-title"},"Detail Discussion",-1)),qst=UT(()=>Te("div",null," Consistent with real life: in line with the process and logic of real life, and comply with languages and habits that the users are used to; ",-1)),jst=UT(()=>Te("div",null," Operation feedback: enable the users to clearly perceive their operations by style updates and interactive effects; ",-1)),Kst=UT(()=>Te("div",null," Simplify the process: keep operating process simple and intuitive; ",-1)),Xst=UT(()=>Te("div",null," Decision making: giving advices about operations is acceptable, but do not make decisions for the users; ",-1));function Yst(n,e){const t=Ht("el-divider"),i=Ht("el-row"),r=Ht("el-collapse-item"),s=Ht("el-collapse"),a=Ht("el-col");return j(),_e("div",null,[he(t),he(i,{justify:"center"},{default:Ae(()=>[Wst]),_:1}),he(i,{justify:"center"},{default:Ae(()=>[he(a,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[he(s,{"model-value":"1",class:"collapse",accordion:""},{default:Ae(()=>[he(r,{title:"Consistency",name:"1"},{default:Ae(()=>[qst]),_:1}),he(r,{title:"Feedback",name:"2"},{default:Ae(()=>[jst]),_:1}),he(r,{title:"Efficiency",name:"3"},{default:Ae(()=>[Kst]),_:1}),he(r,{title:"Controllability",name:"4"},{default:Ae(()=>[Xst]),_:1})]),_:1})]),_:1})]),_:1})])}const Qst=Fa(Gst,[["render",Yst],["__scopeId","data-v-bb62af2c"]]),Zst={data(){return{value1:"",value2:"",comparison1ImageRootPath:"",comparison2ImageRootPath:"",comparisonImageRootPath:"./image_comparison/",comparison1Loading:!0,comparison2Loading:!0,options:["bottle","box","clip","cup","duck","flim","glass","toy"]}},beforeMount(){this.handleChange1(this.options[0]),this.handleChange2(this.options[1])},methods:{handleChange1(n){this.loadImage1(n)},handleChange2(n){this.loadImage2(n)},loadImage1(n){this.comparison1Loading=!0;const e=`${this.comparisonImageRootPath}${n}.png`,t=new Image;t.src=e,t.onload=()=>{this.comparison1ImageRootPath=e,this.comparison1Loading=!1}},loadImage2(n){this.comparison2Loading=!0;const e=`${this.comparisonImageRootPath}${n}.png`,t=new Image;t.src=e,t.onload=()=>{this.comparison2ImageRootPath=e,this.comparison2Loading=!1}}}},Jst=n=>(cc("data-v-39564713"),n=n(),dc(),n),eat=Jst(()=>Te("h1",{class:"section-title"},"Comparison",-1)),tat={class:"demo-image"},nat={class:"block"},iat={class:"demonstration"},rat={class:"demo-image"},sat={class:"block"},aat={class:"demonstration"};function oat(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("el-skeleton-item"),u=Ht("el-image"),c=Ht("el-skeleton"),d=Ht("el-option"),f=Ht("el-select"),h=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[eat]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(h,null,{default:Ae(()=>[he(o,{justify:"center",gutter:20},{default:Ae(()=>[he(h,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Ae(()=>[Te("div",tat,[Te("div",nat,[he(c,{style:{width:"100%"},loading:r.comparison1Loading,animated:"",throttle:1e3},{template:Ae(()=>[he(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Ae(()=>[he(u,{src:r.comparison1ImageRootPath,style:{width:"100%",height:"100%"},fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Te("span",iat,"input: "+Lt(r.comparison1ImageRootPath),1)])]),he(o,{justify:"center"},{default:Ae(()=>[he(f,{class:"select",modelValue:r.value1,"onUpdate:modelValue":e[0]||(e[0]=p=>r.value1=p),placeholder:"Select",size:"large",onChange:s.handleChange1},{default:Ae(()=>[(j(!0),_e(an,null,ti(r.options,p=>(j(),gt(d,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),he(h,{xs:12,sm:10,md:8,lg:6,xl:6},{default:Ae(()=>[Te("div",rat,[Te("div",sat,[he(c,{style:{width:"100%"},loading:r.comparison2Loading,animated:"",throttle:1e3},{template:Ae(()=>[he(l,{variant:"image",style:{width:"100%",height:"100%"}})]),default:Ae(()=>[he(u,{src:r.comparison2ImageRootPath,style:{width:"100%",height:"100%"},fit:"scale-down"},null,8,["src"])]),_:1},8,["loading"]),Te("span",aat,"input: "+Lt(r.comparison2ImageRootPath),1)])]),he(o,{justify:"center"},{default:Ae(()=>[he(f,{class:"select",modelValue:r.value2,"onUpdate:modelValue":e[1]||(e[1]=p=>r.value2=p),placeholder:"Select",size:"large",onChange:s.handleChange2},{default:Ae(()=>[(j(!0),_e(an,null,ti(r.options,p=>(j(),gt(d,{key:p,label:p,value:p},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const lat=Fa(Zst,[["render",oat],["__scopeId","data-v-39564713"]]),uat={setup(){Ln(()=>{const n=document.createElement("script");n.src="./twikoo/twikoo.junyaohu.js",n.async=!0;const e=()=>{twikoo.init({envId:"https://blog-comment-nvoz-8o7dxhfbd-junyaohus-projects.vercel.app",el:"#twikoo",region:"",path:location.pathname,lang:"zh-CN"})};n.addEventListener("load",e),document.body.appendChild(n)})}},cat=Te("h1",{class:"section-title"},"💬 Comment",-1),dat=Te("div",{id:"twikoo"},null,-1);function fat(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[cat]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(l,{xs:24,sm:24,md:24,lg:16,xl:12},{default:Ae(()=>[dat]),_:1})]),_:1})])}const hat=Fa(uat,[["render",fat]]);var efe={exports:{}};(function(n,e){(function(i,r){n.exports=r()})(typeof self<"u"?self:Pl,function(){return function(){var t={};(function(){t.d=function(se,M){for(var D in M)t.o(M,D)&&!t.o(se,D)&&Object.defineProperty(se,D,{enumerable:!0,get:M[D]})}})(),function(){t.o=function(se,M){return Object.prototype.hasOwnProperty.call(se,M)}}();var i={};t.d(i,{default:function(){return Iv}});var r=function se(M,D){this.position=void 0;var P="KaTeX parse error: "+M,N,Y=D&&D.loc;if(Y&&Y.start<=Y.end){var oe=Y.lexer.input;N=Y.start;var Ce=Y.end;N===oe.length?P+=" at end of input: ":P+=" at position "+(N+1)+": ";var $e=oe.slice(N,Ce).replace(/[^]/g,"$&̲"),tt;N>15?tt="…"+oe.slice(N-15,N):tt=oe.slice(0,N);var bt;Ce+15<oe.length?bt=oe.slice(Ce,Ce+15)+"…":bt=oe.slice(Ce),P+=tt+$e+bt}var Gt=new Error(P);return Gt.name="ParseError",Gt.__proto__=se.prototype,Gt.position=N,Gt};r.prototype.__proto__=Error.prototype;var s=r,a=function(M,D){return M.indexOf(D)!==-1},o=function(M,D){return M===void 0?D:M},l=/([A-Z])/g,u=function(M){return M.replace(l,"-$1").toLowerCase()},c={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},d=/[&><"']/g;function f(se){return String(se).replace(d,function(M){return c[M]})}var h=function se(M){return M.type==="ordgroup"||M.type==="color"?M.body.length===1?se(M.body[0]):M:M.type==="font"?se(M.body):M},p=function(M){var D=h(M);return D.type==="mathord"||D.type==="textord"||D.type==="atom"},m=function(M){if(!M)throw new Error("Expected non-null, but got "+String(M));return M},g=function(M){var D=/^\s*([^\\/#]*?)(?::|&#0*58|&#x0*3a)/i.exec(M);return D!=null?D[1]:"_relative"},v={contains:a,deflt:o,escape:f,hyphenate:u,getBaseElem:h,isCharacterBox:p,protocolFromUrl:g},_=function(){function se(D){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,D=D||{},this.displayMode=v.deflt(D.displayMode,!1),this.output=v.deflt(D.output,"htmlAndMathml"),this.leqno=v.deflt(D.leqno,!1),this.fleqn=v.deflt(D.fleqn,!1),this.throwOnError=v.deflt(D.throwOnError,!0),this.errorColor=v.deflt(D.errorColor,"#cc0000"),this.macros=D.macros||{},this.minRuleThickness=Math.max(0,v.deflt(D.minRuleThickness,0)),this.colorIsTextColor=v.deflt(D.colorIsTextColor,!1),this.strict=v.deflt(D.strict,"warn"),this.trust=v.deflt(D.trust,!1),this.maxSize=Math.max(0,v.deflt(D.maxSize,1/0)),this.maxExpand=Math.max(0,v.deflt(D.maxExpand,1e3)),this.globalGroup=v.deflt(D.globalGroup,!1)}var M=se.prototype;return M.reportNonstrict=function(P,N,Y){var oe=this.strict;if(typeof oe=="function"&&(oe=oe(P,N,Y)),!(!oe||oe==="ignore")){if(oe===!0||oe==="error")throw new s("LaTeX-incompatible input and strict mode is set to 'error': "+(N+" ["+P+"]"),Y);oe==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(N+" ["+P+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+oe+"': "+N+" ["+P+"]"))}},M.useStrictBehavior=function(P,N,Y){var oe=this.strict;if(typeof oe=="function")try{oe=oe(P,N,Y)}catch{oe="error"}return!oe||oe==="ignore"?!1:oe===!0||oe==="error"?!0:oe==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(N+" ["+P+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+oe+"': "+N+" ["+P+"]")),!1)},M.isTrusted=function(P){P.url&&!P.protocol&&(P.protocol=v.protocolFromUrl(P.url));var N=typeof this.trust=="function"?this.trust(P):this.trust;return!!N},se}(),y=function(){function se(D,P,N){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=D,this.size=P,this.cramped=N}var M=se.prototype;return M.sup=function(){return k[O[this.id]]},M.sub=function(){return k[U[this.id]]},M.fracNum=function(){return k[z[this.id]]},M.fracDen=function(){return k[L[this.id]]},M.cramp=function(){return k[G[this.id]]},M.text=function(){return k[H[this.id]]},M.isTight=function(){return this.size>=2},se}(),b=0,x=1,w=2,A=3,T=4,C=5,E=6,I=7,k=[new y(b,0,!1),new y(x,0,!0),new y(w,1,!1),new y(A,1,!0),new y(T,2,!1),new y(C,2,!0),new y(E,3,!1),new y(I,3,!0)],O=[T,C,T,C,E,I,E,I],U=[C,C,C,C,I,I,I,I],z=[w,A,T,C,E,I,E,I],L=[A,A,C,C,I,I,I,I],G=[x,x,A,A,C,C,I,I],H=[b,x,w,A,w,A,w,A],F={DISPLAY:k[b],TEXT:k[w],SCRIPT:k[T],SCRIPTSCRIPT:k[E]},X=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function te(se){for(var M=0;M<X.length;M++)for(var D=X[M],P=0;P<D.blocks.length;P++){var N=D.blocks[P];if(se>=N[0]&&se<=N[1])return D.name}return null}var re=[];X.forEach(function(se){return se.blocks.forEach(function(M){return re.push.apply(re,M)})});function ie(se){for(var M=0;M<re.length;M+=2)if(se>=re[M]&&se<=re[M+1])return!0;return!1}var le=80,ge=function(M,D){return"M95,"+(622+M+D)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+M/2.075+" -"+M+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+M)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},pe=function(M,D){return"M263,"+(601+M+D)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+M/2.084+" -"+M+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+M)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},ye=function(M,D){return"M983 "+(10+M+D)+`
l`+M/3.13+" -"+M+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+M)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+M)+" "+D+"h400000v"+(40+M)+"h-400000z"},Oe=function(M,D){return"M424,"+(2398+M+D)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+M/4.223+" -"+M+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+M)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+M)+" "+D+`
h400000v`+(40+M)+"h-400000z"},Be=function(M,D){return"M473,"+(2713+M+D)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+M/5.298+" -"+M+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+M)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+M)+" "+D+"h400000v"+(40+M)+"H1017.7z"},Ye=function(M){var D=M/2;return"M400000 "+M+" H0 L"+D+" 0 l65 45 L145 "+(M-80)+" H400000z"},Ze=function(M,D,P){var N=P-54-D-M;return"M702 "+(M+D)+"H400000"+(40+M)+`
H742v`+N+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+D+"H400000v"+(40+M)+"H742z"},Q=function(M,D,P){D=1e3*D;var N="";switch(M){case"sqrtMain":N=ge(D,le);break;case"sqrtSize1":N=pe(D,le);break;case"sqrtSize2":N=ye(D,le);break;case"sqrtSize3":N=Oe(D,le);break;case"sqrtSize4":N=Be(D,le);break;case"sqrtTall":N=Ze(D,le,P)}return N},me=function(M,D){switch(M){case"⎜":return"M291 0 H417 V"+D+" H291z M291 0 H417 V"+D+" H291z";case"∣":return"M145 0 H188 V"+D+" H145z M145 0 H188 V"+D+" H145z";case"∥":return"M145 0 H188 V"+D+" H145z M145 0 H188 V"+D+" H145z"+("M367 0 H410 V"+D+" H367z M367 0 H410 V"+D+" H367z");case"⎟":return"M457 0 H583 V"+D+" H457z M457 0 H583 V"+D+" H457z";case"⎢":return"M319 0 H403 V"+D+" H319z M319 0 H403 V"+D+" H319z";case"⎥":return"M263 0 H347 V"+D+" H263z M263 0 H347 V"+D+" H263z";case"⎪":return"M384 0 H504 V"+D+" H384z M384 0 H504 V"+D+" H384z";case"⏐":return"M312 0 H355 V"+D+" H312z M312 0 H355 V"+D+" H312z";case"‖":return"M257 0 H300 V"+D+" H257z M257 0 H300 V"+D+" H257z"+("M478 0 H521 V"+D+" H478z M478 0 H521 V"+D+" H478z");default:return""}},ce={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},je=function(){function se(D){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=D,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}var M=se.prototype;return M.hasClass=function(P){return v.contains(this.classes,P)},M.toNode=function(){for(var P=document.createDocumentFragment(),N=0;N<this.children.length;N++)P.appendChild(this.children[N].toNode());return P},M.toMarkup=function(){for(var P="",N=0;N<this.children.length;N++)P+=this.children[N].toMarkup();return P},M.toText=function(){var P=function(Y){return Y.toText()};return this.children.map(P).join("")},se}(),Fe={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},nt={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},We={Å:"A",Ð:"D",Þ:"o",å:"a",ð:"d",þ:"o",А:"A",Б:"B",В:"B",Г:"F",Д:"A",Е:"E",Ж:"K",З:"3",И:"N",Й:"N",К:"K",Л:"N",М:"M",Н:"H",О:"O",П:"N",Р:"P",С:"C",Т:"T",У:"y",Ф:"O",Х:"X",Ц:"U",Ч:"h",Ш:"W",Щ:"W",Ъ:"B",Ы:"X",Ь:"B",Э:"3",Ю:"X",Я:"R",а:"a",б:"b",в:"a",г:"r",д:"y",е:"e",ж:"m",з:"e",и:"n",й:"n",к:"n",л:"n",м:"m",н:"n",о:"o",п:"n",р:"p",с:"c",т:"o",у:"y",ф:"b",х:"x",ц:"n",ч:"n",ш:"w",щ:"w",ъ:"a",ы:"m",ь:"a",э:"e",ю:"m",я:"r"};function Ke(se,M){Fe[se]=M}function it(se,M,D){if(!Fe[M])throw new Error("Font metrics not found for font: "+M+".");var P=se.charCodeAt(0),N=Fe[M][P];if(!N&&se[0]in We&&(P=We[se[0]].charCodeAt(0),N=Fe[M][P]),!N&&D==="text"&&ie(P)&&(N=Fe[M][77]),N)return{depth:N[0],height:N[1],italic:N[2],skew:N[3],width:N[4]}}var be={};function K(se){var M;if(se>=5?M=0:se>=3?M=1:M=2,!be[M]){var D=be[M]={cssEmPerMu:nt.quad[M]/18};for(var P in nt)nt.hasOwnProperty(P)&&(D[P]=nt[P][M])}return be[M]}var ne=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Se=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],ze=function(M,D){return D.size<2?M:ne[M-1][D.size-1]},Je=function(){function se(D){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=D.style,this.color=D.color,this.size=D.size||se.BASESIZE,this.textSize=D.textSize||this.size,this.phantom=!!D.phantom,this.font=D.font||"",this.fontFamily=D.fontFamily||"",this.fontWeight=D.fontWeight||"",this.fontShape=D.fontShape||"",this.sizeMultiplier=Se[this.size-1],this.maxSize=D.maxSize,this.minRuleThickness=D.minRuleThickness,this._fontMetrics=void 0}var M=se.prototype;return M.extend=function(P){var N={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var Y in P)P.hasOwnProperty(Y)&&(N[Y]=P[Y]);return new se(N)},M.havingStyle=function(P){return this.style===P?this:this.extend({style:P,size:ze(this.textSize,P)})},M.havingCrampedStyle=function(){return this.havingStyle(this.style.cramp())},M.havingSize=function(P){return this.size===P&&this.textSize===P?this:this.extend({style:this.style.text(),size:P,textSize:P,sizeMultiplier:Se[P-1]})},M.havingBaseStyle=function(P){P=P||this.style.text();var N=ze(se.BASESIZE,P);return this.size===N&&this.textSize===se.BASESIZE&&this.style===P?this:this.extend({style:P,size:N})},M.havingBaseSizing=function(){var P;switch(this.style.id){case 4:case 5:P=3;break;case 6:case 7:P=1;break;default:P=6}return this.extend({style:this.style.text(),size:P})},M.withColor=function(P){return this.extend({color:P})},M.withPhantom=function(){return this.extend({phantom:!0})},M.withFont=function(P){return this.extend({font:P})},M.withTextFontFamily=function(P){return this.extend({fontFamily:P,font:""})},M.withTextFontWeight=function(P){return this.extend({fontWeight:P,font:""})},M.withTextFontShape=function(P){return this.extend({fontShape:P,font:""})},M.sizingClasses=function(P){return P.size!==this.size?["sizing","reset-size"+P.size,"size"+this.size]:[]},M.baseSizingClasses=function(){return this.size!==se.BASESIZE?["sizing","reset-size"+this.size,"size"+se.BASESIZE]:[]},M.fontMetrics=function(){return this._fontMetrics||(this._fontMetrics=K(this.size)),this._fontMetrics},M.getColor=function(){return this.phantom?"transparent":this.color},se}();Je.BASESIZE=6;var Tt=Je,At={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},Re={ex:!0,em:!0,mu:!0},wt=function(M){return typeof M!="string"&&(M=M.unit),M in At||M in Re||M==="ex"},vt=function(M,D){var P;if(M.unit in At)P=At[M.unit]/D.fontMetrics().ptPerEm/D.sizeMultiplier;else if(M.unit==="mu")P=D.fontMetrics().cssEmPerMu;else{var N;if(D.style.isTight()?N=D.havingStyle(D.style.text()):N=D,M.unit==="ex")P=N.fontMetrics().xHeight;else if(M.unit==="em")P=N.fontMetrics().quad;else throw new s("Invalid unit: '"+M.unit+"'");N!==D&&(P*=N.sizeMultiplier/D.sizeMultiplier)}return Math.min(M.number*P,D.maxSize)},q=function(M){return+M.toFixed(4)+"em"},xe=function(M){return M.filter(function(D){return D}).join(" ")},ve=function(M,D,P){if(this.classes=M||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=P||{},D){D.style.isTight()&&this.classes.push("mtight");var N=D.getColor();N&&(this.style.color=N)}},ke=function(M){var D=document.createElement(M);D.className=xe(this.classes);for(var P in this.style)this.style.hasOwnProperty(P)&&(D.style[P]=this.style[P]);for(var N in this.attributes)this.attributes.hasOwnProperty(N)&&D.setAttribute(N,this.attributes[N]);for(var Y=0;Y<this.children.length;Y++)D.appendChild(this.children[Y].toNode());return D},we=function(M){var D="<"+M;this.classes.length&&(D+=' class="'+v.escape(xe(this.classes))+'"');var P="";for(var N in this.style)this.style.hasOwnProperty(N)&&(P+=v.hyphenate(N)+":"+this.style[N]+";");P&&(D+=' style="'+v.escape(P)+'"');for(var Y in this.attributes)this.attributes.hasOwnProperty(Y)&&(D+=" "+Y+'="'+v.escape(this.attributes[Y])+'"');D+=">";for(var oe=0;oe<this.children.length;oe++)D+=this.children[oe].toMarkup();return D+="</"+M+">",D},De=function(){function se(D,P,N,Y){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,ve.call(this,D,N,Y),this.children=P||[]}var M=se.prototype;return M.setAttribute=function(P,N){this.attributes[P]=N},M.hasClass=function(P){return v.contains(this.classes,P)},M.toNode=function(){return ke.call(this,"span")},M.toMarkup=function(){return we.call(this,"span")},se}(),xt=function(){function se(D,P,N,Y){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,ve.call(this,P,Y),this.children=N||[],this.setAttribute("href",D)}var M=se.prototype;return M.setAttribute=function(P,N){this.attributes[P]=N},M.hasClass=function(P){return v.contains(this.classes,P)},M.toNode=function(){return ke.call(this,"a")},M.toMarkup=function(){return we.call(this,"a")},se}(),Pe=function(){function se(D,P,N){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=P,this.src=D,this.classes=["mord"],this.style=N}var M=se.prototype;return M.hasClass=function(P){return v.contains(this.classes,P)},M.toNode=function(){var P=document.createElement("img");P.src=this.src,P.alt=this.alt,P.className="mord";for(var N in this.style)this.style.hasOwnProperty(N)&&(P.style[N]=this.style[N]);return P},M.toMarkup=function(){var P="<img  src='"+this.src+" 'alt='"+this.alt+"' ",N="";for(var Y in this.style)this.style.hasOwnProperty(Y)&&(N+=v.hyphenate(Y)+":"+this.style[Y]+";");return N&&(P+=' style="'+v.escape(N)+'"'),P+="'/>",P},se}(),Dt={î:"ı̂",ï:"ı̈",í:"ı́",ì:"ı̀"},dt=function(){function se(D,P,N,Y,oe,Ce,$e,tt){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=D,this.height=P||0,this.depth=N||0,this.italic=Y||0,this.skew=oe||0,this.width=Ce||0,this.classes=$e||[],this.style=tt||{},this.maxFontSize=0;var bt=te(this.text.charCodeAt(0));bt&&this.classes.push(bt+"_fallback"),/[îïíì]/.test(this.text)&&(this.text=Dt[this.text])}var M=se.prototype;return M.hasClass=function(P){return v.contains(this.classes,P)},M.toNode=function(){var P=document.createTextNode(this.text),N=null;this.italic>0&&(N=document.createElement("span"),N.style.marginRight=q(this.italic)),this.classes.length>0&&(N=N||document.createElement("span"),N.className=xe(this.classes));for(var Y in this.style)this.style.hasOwnProperty(Y)&&(N=N||document.createElement("span"),N.style[Y]=this.style[Y]);return N?(N.appendChild(P),N):P},M.toMarkup=function(){var P=!1,N="<span";this.classes.length&&(P=!0,N+=' class="',N+=v.escape(xe(this.classes)),N+='"');var Y="";this.italic>0&&(Y+="margin-right:"+this.italic+"em;");for(var oe in this.style)this.style.hasOwnProperty(oe)&&(Y+=v.hyphenate(oe)+":"+this.style[oe]+";");Y&&(P=!0,N+=' style="'+v.escape(Y)+'"');var Ce=v.escape(this.text);return P?(N+=">",N+=Ce,N+="</span>",N):Ce},se}(),Mt=function(){function se(D,P){this.children=void 0,this.attributes=void 0,this.children=D||[],this.attributes=P||{}}var M=se.prototype;return M.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"svg");for(var Y in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Y)&&N.setAttribute(Y,this.attributes[Y]);for(var oe=0;oe<this.children.length;oe++)N.appendChild(this.children[oe].toNode());return N},M.toMarkup=function(){var P='<svg xmlns="http://www.w3.org/2000/svg"';for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+"='"+this.attributes[N]+"'");P+=">";for(var Y=0;Y<this.children.length;Y++)P+=this.children[Y].toMarkup();return P+="</svg>",P},se}(),jt=function(){function se(D,P){this.pathName=void 0,this.alternate=void 0,this.pathName=D,this.alternate=P}var M=se.prototype;return M.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"path");return this.alternate?N.setAttribute("d",this.alternate):N.setAttribute("d",ce[this.pathName]),N},M.toMarkup=function(){return this.alternate?"<path d='"+this.alternate+"'/>":"<path d='"+ce[this.pathName]+"'/>"},se}(),Ft=function(){function se(D){this.attributes=void 0,this.attributes=D||{}}var M=se.prototype;return M.toNode=function(){var P="http://www.w3.org/2000/svg",N=document.createElementNS(P,"line");for(var Y in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,Y)&&N.setAttribute(Y,this.attributes[Y]);return N},M.toMarkup=function(){var P="<line";for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+"='"+this.attributes[N]+"'");return P+="/>",P},se}();function Sn(se){if(se instanceof dt)return se;throw new Error("Expected symbolNode but got "+String(se)+".")}function Pn(se){if(se instanceof De)return se;throw new Error("Expected span<HtmlDomNode> but got "+String(se)+".")}var Ti={bin:1,close:1,inner:1,open:1,punct:1,rel:1},jn={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},dr={math:{},text:{}},fi=dr;function J(se,M,D,P,N,Y){dr[se][N]={font:M,group:D,replace:P},Y&&P&&(dr[se][P]=dr[se][N])}var ue="math",en="text",Ie="main",de="ams",kt="accent-token",Ct="bin",Ut="close",ut="inner",Pt="mathord",Xt="op-token",kn="open",Kn="punct",rt="rel",ci="spacing",pt="textord";J(ue,Ie,rt,"≡","\\equiv",!0),J(ue,Ie,rt,"≺","\\prec",!0),J(ue,Ie,rt,"≻","\\succ",!0),J(ue,Ie,rt,"∼","\\sim",!0),J(ue,Ie,rt,"⊥","\\perp"),J(ue,Ie,rt,"⪯","\\preceq",!0),J(ue,Ie,rt,"⪰","\\succeq",!0),J(ue,Ie,rt,"≃","\\simeq",!0),J(ue,Ie,rt,"∣","\\mid",!0),J(ue,Ie,rt,"≪","\\ll",!0),J(ue,Ie,rt,"≫","\\gg",!0),J(ue,Ie,rt,"≍","\\asymp",!0),J(ue,Ie,rt,"∥","\\parallel"),J(ue,Ie,rt,"⋈","\\bowtie",!0),J(ue,Ie,rt,"⌣","\\smile",!0),J(ue,Ie,rt,"⊑","\\sqsubseteq",!0),J(ue,Ie,rt,"⊒","\\sqsupseteq",!0),J(ue,Ie,rt,"≐","\\doteq",!0),J(ue,Ie,rt,"⌢","\\frown",!0),J(ue,Ie,rt,"∋","\\ni",!0),J(ue,Ie,rt,"∝","\\propto",!0),J(ue,Ie,rt,"⊢","\\vdash",!0),J(ue,Ie,rt,"⊣","\\dashv",!0),J(ue,Ie,rt,"∋","\\owns"),J(ue,Ie,Kn,".","\\ldotp"),J(ue,Ie,Kn,"⋅","\\cdotp"),J(ue,Ie,pt,"#","\\#"),J(en,Ie,pt,"#","\\#"),J(ue,Ie,pt,"&","\\&"),J(en,Ie,pt,"&","\\&"),J(ue,Ie,pt,"ℵ","\\aleph",!0),J(ue,Ie,pt,"∀","\\forall",!0),J(ue,Ie,pt,"ℏ","\\hbar",!0),J(ue,Ie,pt,"∃","\\exists",!0),J(ue,Ie,pt,"∇","\\nabla",!0),J(ue,Ie,pt,"♭","\\flat",!0),J(ue,Ie,pt,"ℓ","\\ell",!0),J(ue,Ie,pt,"♮","\\natural",!0),J(ue,Ie,pt,"♣","\\clubsuit",!0),J(ue,Ie,pt,"℘","\\wp",!0),J(ue,Ie,pt,"♯","\\sharp",!0),J(ue,Ie,pt,"♢","\\diamondsuit",!0),J(ue,Ie,pt,"ℜ","\\Re",!0),J(ue,Ie,pt,"♡","\\heartsuit",!0),J(ue,Ie,pt,"ℑ","\\Im",!0),J(ue,Ie,pt,"♠","\\spadesuit",!0),J(ue,Ie,pt,"§","\\S",!0),J(en,Ie,pt,"§","\\S"),J(ue,Ie,pt,"¶","\\P",!0),J(en,Ie,pt,"¶","\\P"),J(ue,Ie,pt,"†","\\dag"),J(en,Ie,pt,"†","\\dag"),J(en,Ie,pt,"†","\\textdagger"),J(ue,Ie,pt,"‡","\\ddag"),J(en,Ie,pt,"‡","\\ddag"),J(en,Ie,pt,"‡","\\textdaggerdbl"),J(ue,Ie,Ut,"⎱","\\rmoustache",!0),J(ue,Ie,kn,"⎰","\\lmoustache",!0),J(ue,Ie,Ut,"⟯","\\rgroup",!0),J(ue,Ie,kn,"⟮","\\lgroup",!0),J(ue,Ie,Ct,"∓","\\mp",!0),J(ue,Ie,Ct,"⊖","\\ominus",!0),J(ue,Ie,Ct,"⊎","\\uplus",!0),J(ue,Ie,Ct,"⊓","\\sqcap",!0),J(ue,Ie,Ct,"∗","\\ast"),J(ue,Ie,Ct,"⊔","\\sqcup",!0),J(ue,Ie,Ct,"◯","\\bigcirc",!0),J(ue,Ie,Ct,"∙","\\bullet"),J(ue,Ie,Ct,"‡","\\ddagger"),J(ue,Ie,Ct,"≀","\\wr",!0),J(ue,Ie,Ct,"⨿","\\amalg"),J(ue,Ie,Ct,"&","\\And"),J(ue,Ie,rt,"⟵","\\longleftarrow",!0),J(ue,Ie,rt,"⇐","\\Leftarrow",!0),J(ue,Ie,rt,"⟸","\\Longleftarrow",!0),J(ue,Ie,rt,"⟶","\\longrightarrow",!0),J(ue,Ie,rt,"⇒","\\Rightarrow",!0),J(ue,Ie,rt,"⟹","\\Longrightarrow",!0),J(ue,Ie,rt,"↔","\\leftrightarrow",!0),J(ue,Ie,rt,"⟷","\\longleftrightarrow",!0),J(ue,Ie,rt,"⇔","\\Leftrightarrow",!0),J(ue,Ie,rt,"⟺","\\Longleftrightarrow",!0),J(ue,Ie,rt,"↦","\\mapsto",!0),J(ue,Ie,rt,"⟼","\\longmapsto",!0),J(ue,Ie,rt,"↗","\\nearrow",!0),J(ue,Ie,rt,"↩","\\hookleftarrow",!0),J(ue,Ie,rt,"↪","\\hookrightarrow",!0),J(ue,Ie,rt,"↘","\\searrow",!0),J(ue,Ie,rt,"↼","\\leftharpoonup",!0),J(ue,Ie,rt,"⇀","\\rightharpoonup",!0),J(ue,Ie,rt,"↙","\\swarrow",!0),J(ue,Ie,rt,"↽","\\leftharpoondown",!0),J(ue,Ie,rt,"⇁","\\rightharpoondown",!0),J(ue,Ie,rt,"↖","\\nwarrow",!0),J(ue,Ie,rt,"⇌","\\rightleftharpoons",!0),J(ue,de,rt,"≮","\\nless",!0),J(ue,de,rt,"","\\@nleqslant"),J(ue,de,rt,"","\\@nleqq"),J(ue,de,rt,"⪇","\\lneq",!0),J(ue,de,rt,"≨","\\lneqq",!0),J(ue,de,rt,"","\\@lvertneqq"),J(ue,de,rt,"⋦","\\lnsim",!0),J(ue,de,rt,"⪉","\\lnapprox",!0),J(ue,de,rt,"⊀","\\nprec",!0),J(ue,de,rt,"⋠","\\npreceq",!0),J(ue,de,rt,"⋨","\\precnsim",!0),J(ue,de,rt,"⪹","\\precnapprox",!0),J(ue,de,rt,"≁","\\nsim",!0),J(ue,de,rt,"","\\@nshortmid"),J(ue,de,rt,"∤","\\nmid",!0),J(ue,de,rt,"⊬","\\nvdash",!0),J(ue,de,rt,"⊭","\\nvDash",!0),J(ue,de,rt,"⋪","\\ntriangleleft"),J(ue,de,rt,"⋬","\\ntrianglelefteq",!0),J(ue,de,rt,"⊊","\\subsetneq",!0),J(ue,de,rt,"","\\@varsubsetneq"),J(ue,de,rt,"⫋","\\subsetneqq",!0),J(ue,de,rt,"","\\@varsubsetneqq"),J(ue,de,rt,"≯","\\ngtr",!0),J(ue,de,rt,"","\\@ngeqslant"),J(ue,de,rt,"","\\@ngeqq"),J(ue,de,rt,"⪈","\\gneq",!0),J(ue,de,rt,"≩","\\gneqq",!0),J(ue,de,rt,"","\\@gvertneqq"),J(ue,de,rt,"⋧","\\gnsim",!0),J(ue,de,rt,"⪊","\\gnapprox",!0),J(ue,de,rt,"⊁","\\nsucc",!0),J(ue,de,rt,"⋡","\\nsucceq",!0),J(ue,de,rt,"⋩","\\succnsim",!0),J(ue,de,rt,"⪺","\\succnapprox",!0),J(ue,de,rt,"≆","\\ncong",!0),J(ue,de,rt,"","\\@nshortparallel"),J(ue,de,rt,"∦","\\nparallel",!0),J(ue,de,rt,"⊯","\\nVDash",!0),J(ue,de,rt,"⋫","\\ntriangleright"),J(ue,de,rt,"⋭","\\ntrianglerighteq",!0),J(ue,de,rt,"","\\@nsupseteqq"),J(ue,de,rt,"⊋","\\supsetneq",!0),J(ue,de,rt,"","\\@varsupsetneq"),J(ue,de,rt,"⫌","\\supsetneqq",!0),J(ue,de,rt,"","\\@varsupsetneqq"),J(ue,de,rt,"⊮","\\nVdash",!0),J(ue,de,rt,"⪵","\\precneqq",!0),J(ue,de,rt,"⪶","\\succneqq",!0),J(ue,de,rt,"","\\@nsubseteqq"),J(ue,de,Ct,"⊴","\\unlhd"),J(ue,de,Ct,"⊵","\\unrhd"),J(ue,de,rt,"↚","\\nleftarrow",!0),J(ue,de,rt,"↛","\\nrightarrow",!0),J(ue,de,rt,"⇍","\\nLeftarrow",!0),J(ue,de,rt,"⇏","\\nRightarrow",!0),J(ue,de,rt,"↮","\\nleftrightarrow",!0),J(ue,de,rt,"⇎","\\nLeftrightarrow",!0),J(ue,de,rt,"△","\\vartriangle"),J(ue,de,pt,"ℏ","\\hslash"),J(ue,de,pt,"▽","\\triangledown"),J(ue,de,pt,"◊","\\lozenge"),J(ue,de,pt,"Ⓢ","\\circledS"),J(ue,de,pt,"®","\\circledR"),J(en,de,pt,"®","\\circledR"),J(ue,de,pt,"∡","\\measuredangle",!0),J(ue,de,pt,"∄","\\nexists"),J(ue,de,pt,"℧","\\mho"),J(ue,de,pt,"Ⅎ","\\Finv",!0),J(ue,de,pt,"⅁","\\Game",!0),J(ue,de,pt,"‵","\\backprime"),J(ue,de,pt,"▲","\\blacktriangle"),J(ue,de,pt,"▼","\\blacktriangledown"),J(ue,de,pt,"■","\\blacksquare"),J(ue,de,pt,"⧫","\\blacklozenge"),J(ue,de,pt,"★","\\bigstar"),J(ue,de,pt,"∢","\\sphericalangle",!0),J(ue,de,pt,"∁","\\complement",!0),J(ue,de,pt,"ð","\\eth",!0),J(en,Ie,pt,"ð","ð"),J(ue,de,pt,"╱","\\diagup"),J(ue,de,pt,"╲","\\diagdown"),J(ue,de,pt,"□","\\square"),J(ue,de,pt,"□","\\Box"),J(ue,de,pt,"◊","\\Diamond"),J(ue,de,pt,"¥","\\yen",!0),J(en,de,pt,"¥","\\yen",!0),J(ue,de,pt,"✓","\\checkmark",!0),J(en,de,pt,"✓","\\checkmark"),J(ue,de,pt,"ℶ","\\beth",!0),J(ue,de,pt,"ℸ","\\daleth",!0),J(ue,de,pt,"ℷ","\\gimel",!0),J(ue,de,pt,"ϝ","\\digamma",!0),J(ue,de,pt,"ϰ","\\varkappa"),J(ue,de,kn,"┌","\\@ulcorner",!0),J(ue,de,Ut,"┐","\\@urcorner",!0),J(ue,de,kn,"└","\\@llcorner",!0),J(ue,de,Ut,"┘","\\@lrcorner",!0),J(ue,de,rt,"≦","\\leqq",!0),J(ue,de,rt,"⩽","\\leqslant",!0),J(ue,de,rt,"⪕","\\eqslantless",!0),J(ue,de,rt,"≲","\\lesssim",!0),J(ue,de,rt,"⪅","\\lessapprox",!0),J(ue,de,rt,"≊","\\approxeq",!0),J(ue,de,Ct,"⋖","\\lessdot"),J(ue,de,rt,"⋘","\\lll",!0),J(ue,de,rt,"≶","\\lessgtr",!0),J(ue,de,rt,"⋚","\\lesseqgtr",!0),J(ue,de,rt,"⪋","\\lesseqqgtr",!0),J(ue,de,rt,"≑","\\doteqdot"),J(ue,de,rt,"≓","\\risingdotseq",!0),J(ue,de,rt,"≒","\\fallingdotseq",!0),J(ue,de,rt,"∽","\\backsim",!0),J(ue,de,rt,"⋍","\\backsimeq",!0),J(ue,de,rt,"⫅","\\subseteqq",!0),J(ue,de,rt,"⋐","\\Subset",!0),J(ue,de,rt,"⊏","\\sqsubset",!0),J(ue,de,rt,"≼","\\preccurlyeq",!0),J(ue,de,rt,"⋞","\\curlyeqprec",!0),J(ue,de,rt,"≾","\\precsim",!0),J(ue,de,rt,"⪷","\\precapprox",!0),J(ue,de,rt,"⊲","\\vartriangleleft"),J(ue,de,rt,"⊴","\\trianglelefteq"),J(ue,de,rt,"⊨","\\vDash",!0),J(ue,de,rt,"⊪","\\Vvdash",!0),J(ue,de,rt,"⌣","\\smallsmile"),J(ue,de,rt,"⌢","\\smallfrown"),J(ue,de,rt,"≏","\\bumpeq",!0),J(ue,de,rt,"≎","\\Bumpeq",!0),J(ue,de,rt,"≧","\\geqq",!0),J(ue,de,rt,"⩾","\\geqslant",!0),J(ue,de,rt,"⪖","\\eqslantgtr",!0),J(ue,de,rt,"≳","\\gtrsim",!0),J(ue,de,rt,"⪆","\\gtrapprox",!0),J(ue,de,Ct,"⋗","\\gtrdot"),J(ue,de,rt,"⋙","\\ggg",!0),J(ue,de,rt,"≷","\\gtrless",!0),J(ue,de,rt,"⋛","\\gtreqless",!0),J(ue,de,rt,"⪌","\\gtreqqless",!0),J(ue,de,rt,"≖","\\eqcirc",!0),J(ue,de,rt,"≗","\\circeq",!0),J(ue,de,rt,"≜","\\triangleq",!0),J(ue,de,rt,"∼","\\thicksim"),J(ue,de,rt,"≈","\\thickapprox"),J(ue,de,rt,"⫆","\\supseteqq",!0),J(ue,de,rt,"⋑","\\Supset",!0),J(ue,de,rt,"⊐","\\sqsupset",!0),J(ue,de,rt,"≽","\\succcurlyeq",!0),J(ue,de,rt,"⋟","\\curlyeqsucc",!0),J(ue,de,rt,"≿","\\succsim",!0),J(ue,de,rt,"⪸","\\succapprox",!0),J(ue,de,rt,"⊳","\\vartriangleright"),J(ue,de,rt,"⊵","\\trianglerighteq"),J(ue,de,rt,"⊩","\\Vdash",!0),J(ue,de,rt,"∣","\\shortmid"),J(ue,de,rt,"∥","\\shortparallel"),J(ue,de,rt,"≬","\\between",!0),J(ue,de,rt,"⋔","\\pitchfork",!0),J(ue,de,rt,"∝","\\varpropto"),J(ue,de,rt,"◀","\\blacktriangleleft"),J(ue,de,rt,"∴","\\therefore",!0),J(ue,de,rt,"∍","\\backepsilon"),J(ue,de,rt,"▶","\\blacktriangleright"),J(ue,de,rt,"∵","\\because",!0),J(ue,de,rt,"⋘","\\llless"),J(ue,de,rt,"⋙","\\gggtr"),J(ue,de,Ct,"⊲","\\lhd"),J(ue,de,Ct,"⊳","\\rhd"),J(ue,de,rt,"≂","\\eqsim",!0),J(ue,Ie,rt,"⋈","\\Join"),J(ue,de,rt,"≑","\\Doteq",!0),J(ue,de,Ct,"∔","\\dotplus",!0),J(ue,de,Ct,"∖","\\smallsetminus"),J(ue,de,Ct,"⋒","\\Cap",!0),J(ue,de,Ct,"⋓","\\Cup",!0),J(ue,de,Ct,"⩞","\\doublebarwedge",!0),J(ue,de,Ct,"⊟","\\boxminus",!0),J(ue,de,Ct,"⊞","\\boxplus",!0),J(ue,de,Ct,"⋇","\\divideontimes",!0),J(ue,de,Ct,"⋉","\\ltimes",!0),J(ue,de,Ct,"⋊","\\rtimes",!0),J(ue,de,Ct,"⋋","\\leftthreetimes",!0),J(ue,de,Ct,"⋌","\\rightthreetimes",!0),J(ue,de,Ct,"⋏","\\curlywedge",!0),J(ue,de,Ct,"⋎","\\curlyvee",!0),J(ue,de,Ct,"⊝","\\circleddash",!0),J(ue,de,Ct,"⊛","\\circledast",!0),J(ue,de,Ct,"⋅","\\centerdot"),J(ue,de,Ct,"⊺","\\intercal",!0),J(ue,de,Ct,"⋒","\\doublecap"),J(ue,de,Ct,"⋓","\\doublecup"),J(ue,de,Ct,"⊠","\\boxtimes",!0),J(ue,de,rt,"⇢","\\dashrightarrow",!0),J(ue,de,rt,"⇠","\\dashleftarrow",!0),J(ue,de,rt,"⇇","\\leftleftarrows",!0),J(ue,de,rt,"⇆","\\leftrightarrows",!0),J(ue,de,rt,"⇚","\\Lleftarrow",!0),J(ue,de,rt,"↞","\\twoheadleftarrow",!0),J(ue,de,rt,"↢","\\leftarrowtail",!0),J(ue,de,rt,"↫","\\looparrowleft",!0),J(ue,de,rt,"⇋","\\leftrightharpoons",!0),J(ue,de,rt,"↶","\\curvearrowleft",!0),J(ue,de,rt,"↺","\\circlearrowleft",!0),J(ue,de,rt,"↰","\\Lsh",!0),J(ue,de,rt,"⇈","\\upuparrows",!0),J(ue,de,rt,"↿","\\upharpoonleft",!0),J(ue,de,rt,"⇃","\\downharpoonleft",!0),J(ue,Ie,rt,"⊶","\\origof",!0),J(ue,Ie,rt,"⊷","\\imageof",!0),J(ue,de,rt,"⊸","\\multimap",!0),J(ue,de,rt,"↭","\\leftrightsquigarrow",!0),J(ue,de,rt,"⇉","\\rightrightarrows",!0),J(ue,de,rt,"⇄","\\rightleftarrows",!0),J(ue,de,rt,"↠","\\twoheadrightarrow",!0),J(ue,de,rt,"↣","\\rightarrowtail",!0),J(ue,de,rt,"↬","\\looparrowright",!0),J(ue,de,rt,"↷","\\curvearrowright",!0),J(ue,de,rt,"↻","\\circlearrowright",!0),J(ue,de,rt,"↱","\\Rsh",!0),J(ue,de,rt,"⇊","\\downdownarrows",!0),J(ue,de,rt,"↾","\\upharpoonright",!0),J(ue,de,rt,"⇂","\\downharpoonright",!0),J(ue,de,rt,"⇝","\\rightsquigarrow",!0),J(ue,de,rt,"⇝","\\leadsto"),J(ue,de,rt,"⇛","\\Rrightarrow",!0),J(ue,de,rt,"↾","\\restriction"),J(ue,Ie,pt,"‘","`"),J(ue,Ie,pt,"$","\\$"),J(en,Ie,pt,"$","\\$"),J(en,Ie,pt,"$","\\textdollar"),J(ue,Ie,pt,"%","\\%"),J(en,Ie,pt,"%","\\%"),J(ue,Ie,pt,"_","\\_"),J(en,Ie,pt,"_","\\_"),J(en,Ie,pt,"_","\\textunderscore"),J(ue,Ie,pt,"∠","\\angle",!0),J(ue,Ie,pt,"∞","\\infty",!0),J(ue,Ie,pt,"′","\\prime"),J(ue,Ie,pt,"△","\\triangle"),J(ue,Ie,pt,"Γ","\\Gamma",!0),J(ue,Ie,pt,"Δ","\\Delta",!0),J(ue,Ie,pt,"Θ","\\Theta",!0),J(ue,Ie,pt,"Λ","\\Lambda",!0),J(ue,Ie,pt,"Ξ","\\Xi",!0),J(ue,Ie,pt,"Π","\\Pi",!0),J(ue,Ie,pt,"Σ","\\Sigma",!0),J(ue,Ie,pt,"Υ","\\Upsilon",!0),J(ue,Ie,pt,"Φ","\\Phi",!0),J(ue,Ie,pt,"Ψ","\\Psi",!0),J(ue,Ie,pt,"Ω","\\Omega",!0),J(ue,Ie,pt,"A","Α"),J(ue,Ie,pt,"B","Β"),J(ue,Ie,pt,"E","Ε"),J(ue,Ie,pt,"Z","Ζ"),J(ue,Ie,pt,"H","Η"),J(ue,Ie,pt,"I","Ι"),J(ue,Ie,pt,"K","Κ"),J(ue,Ie,pt,"M","Μ"),J(ue,Ie,pt,"N","Ν"),J(ue,Ie,pt,"O","Ο"),J(ue,Ie,pt,"P","Ρ"),J(ue,Ie,pt,"T","Τ"),J(ue,Ie,pt,"X","Χ"),J(ue,Ie,pt,"¬","\\neg",!0),J(ue,Ie,pt,"¬","\\lnot"),J(ue,Ie,pt,"⊤","\\top"),J(ue,Ie,pt,"⊥","\\bot"),J(ue,Ie,pt,"∅","\\emptyset"),J(ue,de,pt,"∅","\\varnothing"),J(ue,Ie,Pt,"α","\\alpha",!0),J(ue,Ie,Pt,"β","\\beta",!0),J(ue,Ie,Pt,"γ","\\gamma",!0),J(ue,Ie,Pt,"δ","\\delta",!0),J(ue,Ie,Pt,"ϵ","\\epsilon",!0),J(ue,Ie,Pt,"ζ","\\zeta",!0),J(ue,Ie,Pt,"η","\\eta",!0),J(ue,Ie,Pt,"θ","\\theta",!0),J(ue,Ie,Pt,"ι","\\iota",!0),J(ue,Ie,Pt,"κ","\\kappa",!0),J(ue,Ie,Pt,"λ","\\lambda",!0),J(ue,Ie,Pt,"μ","\\mu",!0),J(ue,Ie,Pt,"ν","\\nu",!0),J(ue,Ie,Pt,"ξ","\\xi",!0),J(ue,Ie,Pt,"ο","\\omicron",!0),J(ue,Ie,Pt,"π","\\pi",!0),J(ue,Ie,Pt,"ρ","\\rho",!0),J(ue,Ie,Pt,"σ","\\sigma",!0),J(ue,Ie,Pt,"τ","\\tau",!0),J(ue,Ie,Pt,"υ","\\upsilon",!0),J(ue,Ie,Pt,"ϕ","\\phi",!0),J(ue,Ie,Pt,"χ","\\chi",!0),J(ue,Ie,Pt,"ψ","\\psi",!0),J(ue,Ie,Pt,"ω","\\omega",!0),J(ue,Ie,Pt,"ε","\\varepsilon",!0),J(ue,Ie,Pt,"ϑ","\\vartheta",!0),J(ue,Ie,Pt,"ϖ","\\varpi",!0),J(ue,Ie,Pt,"ϱ","\\varrho",!0),J(ue,Ie,Pt,"ς","\\varsigma",!0),J(ue,Ie,Pt,"φ","\\varphi",!0),J(ue,Ie,Ct,"∗","*",!0),J(ue,Ie,Ct,"+","+"),J(ue,Ie,Ct,"−","-",!0),J(ue,Ie,Ct,"⋅","\\cdot",!0),J(ue,Ie,Ct,"∘","\\circ"),J(ue,Ie,Ct,"÷","\\div",!0),J(ue,Ie,Ct,"±","\\pm",!0),J(ue,Ie,Ct,"×","\\times",!0),J(ue,Ie,Ct,"∩","\\cap",!0),J(ue,Ie,Ct,"∪","\\cup",!0),J(ue,Ie,Ct,"∖","\\setminus"),J(ue,Ie,Ct,"∧","\\land"),J(ue,Ie,Ct,"∨","\\lor"),J(ue,Ie,Ct,"∧","\\wedge",!0),J(ue,Ie,Ct,"∨","\\vee",!0),J(ue,Ie,pt,"√","\\surd"),J(ue,Ie,kn,"⟨","\\langle",!0),J(ue,Ie,kn,"∣","\\lvert"),J(ue,Ie,kn,"∥","\\lVert"),J(ue,Ie,Ut,"?","?"),J(ue,Ie,Ut,"!","!"),J(ue,Ie,Ut,"⟩","\\rangle",!0),J(ue,Ie,Ut,"∣","\\rvert"),J(ue,Ie,Ut,"∥","\\rVert"),J(ue,Ie,rt,"=","="),J(ue,Ie,rt,":",":"),J(ue,Ie,rt,"≈","\\approx",!0),J(ue,Ie,rt,"≅","\\cong",!0),J(ue,Ie,rt,"≥","\\ge"),J(ue,Ie,rt,"≥","\\geq",!0),J(ue,Ie,rt,"←","\\gets"),J(ue,Ie,rt,">","\\gt",!0),J(ue,Ie,rt,"∈","\\in",!0),J(ue,Ie,rt,"","\\@not"),J(ue,Ie,rt,"⊂","\\subset",!0),J(ue,Ie,rt,"⊃","\\supset",!0),J(ue,Ie,rt,"⊆","\\subseteq",!0),J(ue,Ie,rt,"⊇","\\supseteq",!0),J(ue,de,rt,"⊈","\\nsubseteq",!0),J(ue,de,rt,"⊉","\\nsupseteq",!0),J(ue,Ie,rt,"⊨","\\models"),J(ue,Ie,rt,"←","\\leftarrow",!0),J(ue,Ie,rt,"≤","\\le"),J(ue,Ie,rt,"≤","\\leq",!0),J(ue,Ie,rt,"<","\\lt",!0),J(ue,Ie,rt,"→","\\rightarrow",!0),J(ue,Ie,rt,"→","\\to"),J(ue,de,rt,"≱","\\ngeq",!0),J(ue,de,rt,"≰","\\nleq",!0),J(ue,Ie,ci," ","\\ "),J(ue,Ie,ci," ","\\space"),J(ue,Ie,ci," ","\\nobreakspace"),J(en,Ie,ci," ","\\ "),J(en,Ie,ci," "," "),J(en,Ie,ci," ","\\space"),J(en,Ie,ci," ","\\nobreakspace"),J(ue,Ie,ci,null,"\\nobreak"),J(ue,Ie,ci,null,"\\allowbreak"),J(ue,Ie,Kn,",",","),J(ue,Ie,Kn,";",";"),J(ue,de,Ct,"⊼","\\barwedge",!0),J(ue,de,Ct,"⊻","\\veebar",!0),J(ue,Ie,Ct,"⊙","\\odot",!0),J(ue,Ie,Ct,"⊕","\\oplus",!0),J(ue,Ie,Ct,"⊗","\\otimes",!0),J(ue,Ie,pt,"∂","\\partial",!0),J(ue,Ie,Ct,"⊘","\\oslash",!0),J(ue,de,Ct,"⊚","\\circledcirc",!0),J(ue,de,Ct,"⊡","\\boxdot",!0),J(ue,Ie,Ct,"△","\\bigtriangleup"),J(ue,Ie,Ct,"▽","\\bigtriangledown"),J(ue,Ie,Ct,"†","\\dagger"),J(ue,Ie,Ct,"⋄","\\diamond"),J(ue,Ie,Ct,"⋆","\\star"),J(ue,Ie,Ct,"◃","\\triangleleft"),J(ue,Ie,Ct,"▹","\\triangleright"),J(ue,Ie,kn,"{","\\{"),J(en,Ie,pt,"{","\\{"),J(en,Ie,pt,"{","\\textbraceleft"),J(ue,Ie,Ut,"}","\\}"),J(en,Ie,pt,"}","\\}"),J(en,Ie,pt,"}","\\textbraceright"),J(ue,Ie,kn,"{","\\lbrace"),J(ue,Ie,Ut,"}","\\rbrace"),J(ue,Ie,kn,"[","\\lbrack",!0),J(en,Ie,pt,"[","\\lbrack",!0),J(ue,Ie,Ut,"]","\\rbrack",!0),J(en,Ie,pt,"]","\\rbrack",!0),J(ue,Ie,kn,"(","\\lparen",!0),J(ue,Ie,Ut,")","\\rparen",!0),J(en,Ie,pt,"<","\\textless",!0),J(en,Ie,pt,">","\\textgreater",!0),J(ue,Ie,kn,"⌊","\\lfloor",!0),J(ue,Ie,Ut,"⌋","\\rfloor",!0),J(ue,Ie,kn,"⌈","\\lceil",!0),J(ue,Ie,Ut,"⌉","\\rceil",!0),J(ue,Ie,pt,"\\","\\backslash"),J(ue,Ie,pt,"∣","|"),J(ue,Ie,pt,"∣","\\vert"),J(en,Ie,pt,"|","\\textbar",!0),J(ue,Ie,pt,"∥","\\|"),J(ue,Ie,pt,"∥","\\Vert"),J(en,Ie,pt,"∥","\\textbardbl"),J(en,Ie,pt,"~","\\textasciitilde"),J(en,Ie,pt,"\\","\\textbackslash"),J(en,Ie,pt,"^","\\textasciicircum"),J(ue,Ie,rt,"↑","\\uparrow",!0),J(ue,Ie,rt,"⇑","\\Uparrow",!0),J(ue,Ie,rt,"↓","\\downarrow",!0),J(ue,Ie,rt,"⇓","\\Downarrow",!0),J(ue,Ie,rt,"↕","\\updownarrow",!0),J(ue,Ie,rt,"⇕","\\Updownarrow",!0),J(ue,Ie,Xt,"∐","\\coprod"),J(ue,Ie,Xt,"⋁","\\bigvee"),J(ue,Ie,Xt,"⋀","\\bigwedge"),J(ue,Ie,Xt,"⨄","\\biguplus"),J(ue,Ie,Xt,"⋂","\\bigcap"),J(ue,Ie,Xt,"⋃","\\bigcup"),J(ue,Ie,Xt,"∫","\\int"),J(ue,Ie,Xt,"∫","\\intop"),J(ue,Ie,Xt,"∬","\\iint"),J(ue,Ie,Xt,"∭","\\iiint"),J(ue,Ie,Xt,"∏","\\prod"),J(ue,Ie,Xt,"∑","\\sum"),J(ue,Ie,Xt,"⨂","\\bigotimes"),J(ue,Ie,Xt,"⨁","\\bigoplus"),J(ue,Ie,Xt,"⨀","\\bigodot"),J(ue,Ie,Xt,"∮","\\oint"),J(ue,Ie,Xt,"∯","\\oiint"),J(ue,Ie,Xt,"∰","\\oiiint"),J(ue,Ie,Xt,"⨆","\\bigsqcup"),J(ue,Ie,Xt,"∫","\\smallint"),J(en,Ie,ut,"…","\\textellipsis"),J(ue,Ie,ut,"…","\\mathellipsis"),J(en,Ie,ut,"…","\\ldots",!0),J(ue,Ie,ut,"…","\\ldots",!0),J(ue,Ie,ut,"⋯","\\@cdots",!0),J(ue,Ie,ut,"⋱","\\ddots",!0),J(ue,Ie,pt,"⋮","\\varvdots"),J(ue,Ie,kt,"ˊ","\\acute"),J(ue,Ie,kt,"ˋ","\\grave"),J(ue,Ie,kt,"¨","\\ddot"),J(ue,Ie,kt,"~","\\tilde"),J(ue,Ie,kt,"ˉ","\\bar"),J(ue,Ie,kt,"˘","\\breve"),J(ue,Ie,kt,"ˇ","\\check"),J(ue,Ie,kt,"^","\\hat"),J(ue,Ie,kt,"⃗","\\vec"),J(ue,Ie,kt,"˙","\\dot"),J(ue,Ie,kt,"˚","\\mathring"),J(ue,Ie,Pt,"","\\@imath"),J(ue,Ie,Pt,"","\\@jmath"),J(ue,Ie,pt,"ı","ı"),J(ue,Ie,pt,"ȷ","ȷ"),J(en,Ie,pt,"ı","\\i",!0),J(en,Ie,pt,"ȷ","\\j",!0),J(en,Ie,pt,"ß","\\ss",!0),J(en,Ie,pt,"æ","\\ae",!0),J(en,Ie,pt,"œ","\\oe",!0),J(en,Ie,pt,"ø","\\o",!0),J(en,Ie,pt,"Æ","\\AE",!0),J(en,Ie,pt,"Œ","\\OE",!0),J(en,Ie,pt,"Ø","\\O",!0),J(en,Ie,kt,"ˊ","\\'"),J(en,Ie,kt,"ˋ","\\`"),J(en,Ie,kt,"ˆ","\\^"),J(en,Ie,kt,"˜","\\~"),J(en,Ie,kt,"ˉ","\\="),J(en,Ie,kt,"˘","\\u"),J(en,Ie,kt,"˙","\\."),J(en,Ie,kt,"¸","\\c"),J(en,Ie,kt,"˚","\\r"),J(en,Ie,kt,"ˇ","\\v"),J(en,Ie,kt,"¨",'\\"'),J(en,Ie,kt,"˝","\\H"),J(en,Ie,kt,"◯","\\textcircled");var Le={"--":!0,"---":!0,"``":!0,"''":!0};J(en,Ie,pt,"–","--",!0),J(en,Ie,pt,"–","\\textendash"),J(en,Ie,pt,"—","---",!0),J(en,Ie,pt,"—","\\textemdash"),J(en,Ie,pt,"‘","`",!0),J(en,Ie,pt,"‘","\\textquoteleft"),J(en,Ie,pt,"’","'",!0),J(en,Ie,pt,"’","\\textquoteright"),J(en,Ie,pt,"“","``",!0),J(en,Ie,pt,"“","\\textquotedblleft"),J(en,Ie,pt,"”","''",!0),J(en,Ie,pt,"”","\\textquotedblright"),J(ue,Ie,pt,"°","\\degree",!0),J(en,Ie,pt,"°","\\degree"),J(en,Ie,pt,"°","\\textdegree",!0),J(ue,Ie,pt,"£","\\pounds"),J(ue,Ie,pt,"£","\\mathsterling",!0),J(en,Ie,pt,"£","\\pounds"),J(en,Ie,pt,"£","\\textsterling",!0),J(ue,de,pt,"✠","\\maltese"),J(en,de,pt,"✠","\\maltese");for(var Et='0123456789/@."',Xe=0;Xe<Et.length;Xe++){var _t=Et.charAt(Xe);J(ue,Ie,pt,_t,_t)}for(var mt='0123456789!@*()-=+";:?/.,',Ot=0;Ot<mt.length;Ot++){var gn=mt.charAt(Ot);J(en,Ie,pt,gn,gn)}for(var dn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",En=0;En<dn.length;En++){var ni=dn.charAt(En);J(ue,Ie,Pt,ni,ni),J(en,Ie,pt,ni,ni)}J(ue,de,pt,"C","ℂ"),J(en,de,pt,"C","ℂ"),J(ue,de,pt,"H","ℍ"),J(en,de,pt,"H","ℍ"),J(ue,de,pt,"N","ℕ"),J(en,de,pt,"N","ℕ"),J(ue,de,pt,"P","ℙ"),J(en,de,pt,"P","ℙ"),J(ue,de,pt,"Q","ℚ"),J(en,de,pt,"Q","ℚ"),J(ue,de,pt,"R","ℝ"),J(en,de,pt,"R","ℝ"),J(ue,de,pt,"Z","ℤ"),J(en,de,pt,"Z","ℤ"),J(ue,Ie,Pt,"h","ℎ"),J(en,Ie,Pt,"h","ℎ");for(var bn="",Un=0;Un<dn.length;Un++){var Bn=dn.charAt(Un);bn=String.fromCharCode(55349,56320+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56372+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56424+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56580+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56736+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56788+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56840+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56944+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),Un<26&&(bn=String.fromCharCode(55349,56632+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn),bn=String.fromCharCode(55349,56476+Un),J(ue,Ie,Pt,Bn,bn),J(en,Ie,pt,Bn,bn))}bn=String.fromCharCode(55349,56668),J(ue,Ie,Pt,"k",bn),J(en,Ie,pt,"k",bn);for(var yi=0;yi<10;yi++){var Qi=yi.toString();bn=String.fromCharCode(55349,57294+yi),J(ue,Ie,Pt,Qi,bn),J(en,Ie,pt,Qi,bn),bn=String.fromCharCode(55349,57314+yi),J(ue,Ie,Pt,Qi,bn),J(en,Ie,pt,Qi,bn),bn=String.fromCharCode(55349,57324+yi),J(ue,Ie,Pt,Qi,bn),J(en,Ie,pt,Qi,bn),bn=String.fromCharCode(55349,57334+yi),J(ue,Ie,Pt,Qi,bn),J(en,Ie,pt,Qi,bn)}for(var Ii="ÐÞþ",Di=0;Di<Ii.length;Di++){var Zn=Ii.charAt(Di);J(ue,Ie,Pt,Zn,Zn),J(en,Ie,pt,Zn,Zn)}var xr=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["","",""],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],rr=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wa=function(M,D){var P=M.charCodeAt(0),N=M.charCodeAt(1),Y=(P-55296)*1024+(N-56320)+65536,oe=D==="math"?0:1;if(119808<=Y&&Y<120484){var Ce=Math.floor((Y-119808)/26);return[xr[Ce][2],xr[Ce][oe]]}else if(120782<=Y&&Y<=120831){var $e=Math.floor((Y-120782)/10);return[rr[$e][2],rr[$e][oe]]}else{if(Y===120485||Y===120486)return[xr[0][2],xr[0][oe]];if(120486<Y&&Y<120782)return["",""];throw new s("Unsupported character: "+M)}},ro=function(M,D,P){return fi[P][M]&&fi[P][M].replace&&(M=fi[P][M].replace),{value:M,metrics:it(M,D,P)}},Li=function(M,D,P,N,Y){var oe=ro(M,D,P),Ce=oe.metrics;M=oe.value;var $e;if(Ce){var tt=Ce.italic;(P==="text"||N&&N.font==="mathit")&&(tt=0),$e=new dt(M,Ce.height,Ce.depth,tt,Ce.skew,Ce.width,Y)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+M+"' in style '"+D+"' and mode '"+P+"'")),$e=new dt(M,0,0,0,0,0,Y);if(N){$e.maxFontSize=N.sizeMultiplier,N.style.isTight()&&$e.classes.push("mtight");var bt=N.getColor();bt&&($e.style.color=bt)}return $e},Ys=function(M,D,P,N){return N===void 0&&(N=[]),P.font==="boldsymbol"&&ro(M,"Main-Bold",D).metrics?Li(M,"Main-Bold",D,P,N.concat(["mathbf"])):M==="\\"||fi[D][M].font==="main"?Li(M,"Main-Regular",D,P,N):Li(M,"AMS-Regular",D,P,N.concat(["amsrm"]))},wr=function(M,D,P,N,Y){return Y!=="textord"&&ro(M,"Math-BoldItalic",D).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},ra=function(M,D,P){var N=M.mode,Y=M.text,oe=["mord"],Ce=N==="math"||N==="text"&&D.font,$e=Ce?D.font:D.fontFamily;if(Y.charCodeAt(0)===55349){var tt=wa(Y,N),bt=tt[0],Gt=tt[1];return Li(Y,bt,N,D,oe.concat(Gt))}else if($e){var sn,fn;if($e==="boldsymbol"){var hn=wr(Y,N,D,oe,P);sn=hn.fontName,fn=[hn.fontClass]}else Ce?(sn=qt[$e].fontName,fn=[$e]):(sn=qe($e,D.fontWeight,D.fontShape),fn=[$e,D.fontWeight,D.fontShape]);if(ro(Y,sn,N).metrics)return Li(Y,sn,N,D,oe.concat(fn));if(Le.hasOwnProperty(Y)&&sn.substr(0,10)==="Typewriter"){for(var In=[],On=0;On<Y.length;On++)In.push(Li(Y[On],sn,N,D,oe.concat(fn)));return al(In)}}if(P==="mathord")return Li(Y,"Math-Italic",N,D,oe.concat(["mathnormal"]));if(P==="textord"){var ii=fi[N][Y]&&fi[N][Y].font;if(ii==="ams"){var hi=qe("amsrm",D.fontWeight,D.fontShape);return Li(Y,hi,N,D,oe.concat("amsrm",D.fontWeight,D.fontShape))}else if(ii==="main"||!ii){var bi=qe("textrm",D.fontWeight,D.fontShape);return Li(Y,bi,N,D,oe.concat(D.fontWeight,D.fontShape))}else{var Tr=qe(ii,D.fontWeight,D.fontShape);return Li(Y,Tr,N,D,oe.concat(Tr,D.fontWeight,D.fontShape))}}else throw new Error("unexpected type: "+P+" in makeOrd")},Os=function(M,D){if(xe(M.classes)!==xe(D.classes)||M.skew!==D.skew||M.maxFontSize!==D.maxFontSize)return!1;if(M.classes.length===1){var P=M.classes[0];if(P==="mbin"||P==="mord")return!1}for(var N in M.style)if(M.style.hasOwnProperty(N)&&M.style[N]!==D.style[N])return!1;for(var Y in D.style)if(D.style.hasOwnProperty(Y)&&M.style[Y]!==D.style[Y])return!1;return!0},is=function(M){for(var D=0;D<M.length-1;D++){var P=M[D],N=M[D+1];P instanceof dt&&N instanceof dt&&Os(P,N)&&(P.text+=N.text,P.height=Math.max(P.height,N.height),P.depth=Math.max(P.depth,N.depth),P.italic=N.italic,M.splice(D+1,1),D--)}return M},mr=function(M){for(var D=0,P=0,N=0,Y=0;Y<M.children.length;Y++){var oe=M.children[Y];oe.height>D&&(D=oe.height),oe.depth>P&&(P=oe.depth),oe.maxFontSize>N&&(N=oe.maxFontSize)}M.height=D,M.depth=P,M.maxFontSize=N},rs=function(M,D,P,N){var Y=new De(M,D,P,N);return mr(Y),Y},Ta=function(M,D,P,N){return new De(M,D,P,N)},uf=function(M,D,P){var N=rs([M],[],D);return N.height=Math.max(P||D.fontMetrics().defaultRuleThickness,D.minRuleThickness),N.style.borderBottomWidth=q(N.height),N.maxFontSize=1,N},_i=function(M,D,P,N){var Y=new xt(M,D,P,N);return mr(Y),Y},al=function(M){var D=new je(M);return mr(D),D},Me=function(M,D){return M instanceof je?rs([],[M],D):M},Ee=function(M){if(M.positionType==="individualShift"){for(var D=M.children,P=[D[0]],N=-D[0].shift-D[0].elem.depth,Y=N,oe=1;oe<D.length;oe++){var Ce=-D[oe].shift-Y-D[oe].elem.depth,$e=Ce-(D[oe-1].elem.height+D[oe-1].elem.depth);Y=Y+Ce,P.push({type:"kern",size:$e}),P.push(D[oe])}return{children:P,depth:N}}var tt;if(M.positionType==="top"){for(var bt=M.positionData,Gt=0;Gt<M.children.length;Gt++){var sn=M.children[Gt];bt-=sn.type==="kern"?sn.size:sn.elem.height+sn.elem.depth}tt=bt}else if(M.positionType==="bottom")tt=-M.positionData;else{var fn=M.children[0];if(fn.type!=="elem")throw new Error('First child must have type "elem".');if(M.positionType==="shift")tt=-fn.elem.depth-M.positionData;else if(M.positionType==="firstBaseline")tt=-fn.elem.depth;else throw new Error("Invalid positionType "+M.positionType+".")}return{children:M.children,depth:tt}},Ge=function(M,D){for(var P=Ee(M),N=P.children,Y=P.depth,oe=0,Ce=0;Ce<N.length;Ce++){var $e=N[Ce];if($e.type==="elem"){var tt=$e.elem;oe=Math.max(oe,tt.maxFontSize,tt.height)}}oe+=2;var bt=rs(["pstrut"],[]);bt.style.height=q(oe);for(var Gt=[],sn=Y,fn=Y,hn=Y,In=0;In<N.length;In++){var On=N[In];if(On.type==="kern")hn+=On.size;else{var ii=On.elem,hi=On.wrapperClasses||[],bi=On.wrapperStyle||{},Tr=rs(hi,[bt,ii],void 0,bi);Tr.style.top=q(-oe-hn-ii.depth),On.marginLeft&&(Tr.style.marginLeft=On.marginLeft),On.marginRight&&(Tr.style.marginRight=On.marginRight),Gt.push(Tr),hn+=ii.height+ii.depth}sn=Math.min(sn,hn),fn=Math.max(fn,hn)}var zr=rs(["vlist"],Gt);zr.style.height=q(fn);var fs;if(sn<0){var kr=rs([],[]),Hr=rs(["vlist"],[kr]);Hr.style.height=q(-sn);var Bs=rs(["vlist-s"],[new dt("​")]);fs=[rs(["vlist-r"],[zr,Bs]),rs(["vlist-r"],[Hr])]}else fs=[rs(["vlist-r"],[zr])];var Zr=rs(["vlist-t"],fs);return fs.length===2&&Zr.classes.push("vlist-t2"),Zr.height=fn,Zr.depth=-sn,Zr},Ue=function(M,D){var P=rs(["mspace"],[],D),N=vt(M,D);return P.style.marginRight=q(N),P},qe=function(M,D,P){var N="";switch(M){case"amsrm":N="AMS";break;case"textrm":N="Main";break;case"textsf":N="SansSerif";break;case"texttt":N="Typewriter";break;default:N=M}var Y;return D==="textbf"&&P==="textit"?Y="BoldItalic":D==="textbf"?Y="Bold":D==="textit"?Y="Italic":Y="Regular",N+"-"+Y},qt={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Qt={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Wn=function(M,D){var P=Qt[M],N=P[0],Y=P[1],oe=P[2],Ce=new jt(N),$e=new Mt([Ce],{width:q(Y),height:q(oe),style:"width:"+q(Y),viewBox:"0 0 "+1e3*Y+" "+1e3*oe,preserveAspectRatio:"xMinYMin"}),tt=Ta(["overlay"],[$e],D);return tt.height=oe,tt.style.height=q(oe),tt.style.width=q(Y),tt},yt={fontMap:qt,makeSymbol:Li,mathsym:Ys,makeSpan:rs,makeSvgSpan:Ta,makeLineSpan:uf,makeAnchor:_i,makeFragment:al,wrapFragment:Me,makeVList:Ge,makeOrd:ra,makeGlue:Ue,staticSvg:Wn,svgData:Qt,tryCombineChars:is},xn={number:3,unit:"mu"},Jn={number:4,unit:"mu"},mn={number:5,unit:"mu"},pi={mord:{mop:xn,mbin:Jn,mrel:mn,minner:xn},mop:{mord:xn,mop:xn,mrel:mn,minner:xn},mbin:{mord:Jn,mop:Jn,mopen:Jn,minner:Jn},mrel:{mord:mn,mop:mn,mopen:mn,minner:mn},mopen:{},mclose:{mop:xn,mbin:Jn,mrel:mn,minner:xn},mpunct:{mord:xn,mop:xn,mrel:mn,mopen:xn,mclose:xn,mpunct:xn,minner:xn},minner:{mord:xn,mop:xn,mbin:Jn,mrel:mn,mopen:xn,mpunct:xn,minner:xn}},Xn={mord:{mop:xn},mop:{mord:xn,mop:xn},mbin:{},mrel:{},mopen:{},mclose:{mop:xn},mpunct:{},minner:{mop:xn}},li={},ai={},Pr={};function vn(se){for(var M=se.type,D=se.names,P=se.props,N=se.handler,Y=se.htmlBuilder,oe=se.mathmlBuilder,Ce={type:M,numArgs:P.numArgs,argTypes:P.argTypes,allowedInArgument:!!P.allowedInArgument,allowedInText:!!P.allowedInText,allowedInMath:P.allowedInMath===void 0?!0:P.allowedInMath,numOptionalArgs:P.numOptionalArgs||0,infix:!!P.infix,primitive:!!P.primitive,handler:N},$e=0;$e<D.length;++$e)li[D[$e]]=Ce;M&&(Y&&(ai[M]=Y),oe&&(Pr[M]=oe))}function zi(se){var M=se.type,D=se.htmlBuilder,P=se.mathmlBuilder;vn({type:M,names:[],props:{numArgs:0},handler:function(){throw new Error("Should never be called.")},htmlBuilder:D,mathmlBuilder:P})}var Gi=function(M){return M.type==="ordgroup"&&M.body.length===1?M.body[0]:M},Ar=function(M){return M.type==="ordgroup"?M.body:[M]},Yr=yt.makeSpan,td=["leftmost","mbin","mopen","mrel","mop","mpunct"],Qb=["rightmost","mrel","mclose","mpunct"],hv={display:F.DISPLAY,text:F.TEXT,script:F.SCRIPT,scriptscript:F.SCRIPTSCRIPT},fR={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},sa=function(M,D,P,N){N===void 0&&(N=[null,null]);for(var Y=[],oe=0;oe<M.length;oe++){var Ce=gr(M[oe],D);if(Ce instanceof je){var $e=Ce.children;Y.push.apply(Y,$e)}else Y.push(Ce)}if(yt.tryCombineChars(Y),!P)return Y;var tt=D;if(M.length===1){var bt=M[0];bt.type==="sizing"?tt=D.havingSize(bt.size):bt.type==="styling"&&(tt=D.havingStyle(hv[bt.style]))}var Gt=Yr([N[0]||"leftmost"],[],D),sn=Yr([N[1]||"rightmost"],[],D),fn=P==="root";return jT(Y,function(hn,In){var On=In.classes[0],ii=hn.classes[0];On==="mbin"&&v.contains(Qb,ii)?In.classes[0]="mord":ii==="mbin"&&v.contains(td,On)&&(hn.classes[0]="mord")},{node:Gt},sn,fn),jT(Y,function(hn,In){var On=mv(In),ii=mv(hn),hi=On&&ii?hn.hasClass("mtight")?Xn[On][ii]:pi[On][ii]:null;if(hi)return yt.makeGlue(hi,tt)},{node:Gt},sn,fn),Y},jT=function se(M,D,P,N,Y){N&&M.push(N);for(var oe=0;oe<M.length;oe++){var Ce=M[oe],$e=pv(Ce);if($e){se($e.children,D,P,null,Y);continue}var tt=!Ce.hasClass("mspace");if(tt){var bt=D(Ce,P.node);bt&&(P.insertAfter?P.insertAfter(bt):(M.unshift(bt),oe++))}tt?P.node=Ce:Y&&Ce.hasClass("newline")&&(P.node=Yr(["leftmost"])),P.insertAfter=function(Gt){return function(sn){M.splice(Gt+1,0,sn),oe++}}(oe)}N&&M.pop()},pv=function(M){return M instanceof je||M instanceof xt||M instanceof De&&M.hasClass("enclosing")?M:null},hR=function se(M,D){var P=pv(M);if(P){var N=P.children;if(N.length){if(D==="right")return se(N[N.length-1],"right");if(D==="left")return se(N[0],"left")}}return M},mv=function(M,D){return M?(D&&(M=hR(M,D)),fR[M.classes[0]]||null):null},nd=function(M,D){var P=["nulldelimiter"].concat(M.baseSizingClasses());return Yr(D.concat(P))},gr=function(M,D,P){if(!M)return Yr();if(ai[M.type]){var N=ai[M.type](M,D);if(P&&D.size!==P.size){N=Yr(D.sizingClasses(P),[N],D);var Y=D.sizeMultiplier/P.sizeMultiplier;N.height*=Y,N.depth*=Y}return N}else throw new s("Got group of unknown type: '"+M.type+"'")};function gv(se,M){var D=Yr(["base"],se,M),P=Yr(["strut"]);return P.style.height=q(D.height+D.depth),D.depth&&(P.style.verticalAlign=q(-D.depth)),D.children.unshift(P),D}function Zb(se,M){var D=null;se.length===1&&se[0].type==="tag"&&(D=se[0].tag,se=se[0].body);var P=sa(se,M,"root"),N;P.length===2&&P[1].hasClass("tag")&&(N=P.pop());for(var Y=[],oe=[],Ce=0;Ce<P.length;Ce++)if(oe.push(P[Ce]),P[Ce].hasClass("mbin")||P[Ce].hasClass("mrel")||P[Ce].hasClass("allowbreak")){for(var $e=!1;Ce<P.length-1&&P[Ce+1].hasClass("mspace")&&!P[Ce+1].hasClass("newline");)Ce++,oe.push(P[Ce]),P[Ce].hasClass("nobreak")&&($e=!0);$e||(Y.push(gv(oe,M)),oe=[])}else P[Ce].hasClass("newline")&&(oe.pop(),oe.length>0&&(Y.push(gv(oe,M)),oe=[]),Y.push(P[Ce]));oe.length>0&&Y.push(gv(oe,M));var tt;D?(tt=gv(sa(D,M,!0)),tt.classes=["tag"],Y.push(tt)):N&&Y.push(N);var bt=Yr(["katex-html"],Y);if(bt.setAttribute("aria-hidden","true"),tt){var Gt=tt.children[0];Gt.style.height=q(bt.height+bt.depth),bt.depth&&(Gt.style.verticalAlign=q(-bt.depth))}return bt}function KT(se){return new je(se)}var ol=function(){function se(D,P,N){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=D,this.attributes={},this.children=P||[],this.classes=N||[]}var M=se.prototype;return M.setAttribute=function(P,N){this.attributes[P]=N},M.getAttribute=function(P){return this.attributes[P]},M.toNode=function(){var P=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&P.setAttribute(N,this.attributes[N]);this.classes.length>0&&(P.className=xe(this.classes));for(var Y=0;Y<this.children.length;Y++)P.appendChild(this.children[Y].toNode());return P},M.toMarkup=function(){var P="<"+this.type;for(var N in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,N)&&(P+=" "+N+'="',P+=v.escape(this.attributes[N]),P+='"');this.classes.length>0&&(P+=' class ="'+v.escape(xe(this.classes))+'"'),P+=">";for(var Y=0;Y<this.children.length;Y++)P+=this.children[Y].toMarkup();return P+="</"+this.type+">",P},M.toText=function(){return this.children.map(function(P){return P.toText()}).join("")},se}(),id=function(){function se(D){this.text=void 0,this.text=D}var M=se.prototype;return M.toNode=function(){return document.createTextNode(this.text)},M.toMarkup=function(){return v.escape(this.toText())},M.toText=function(){return this.text},se}(),D0=function(){function se(D){this.width=void 0,this.character=void 0,this.width=D,D>=.05555&&D<=.05556?this.character=" ":D>=.1666&&D<=.1667?this.character=" ":D>=.2222&&D<=.2223?this.character=" ":D>=.2777&&D<=.2778?this.character="  ":D>=-.05556&&D<=-.05555?this.character=" ⁣":D>=-.1667&&D<=-.1666?this.character=" ⁣":D>=-.2223&&D<=-.2222?this.character=" ⁣":D>=-.2778&&D<=-.2777?this.character=" ⁣":this.character=null}var M=se.prototype;return M.toNode=function(){if(this.character)return document.createTextNode(this.character);var P=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return P.setAttribute("width",q(this.width)),P},M.toMarkup=function(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+q(this.width)+'"/>'},M.toText=function(){return this.character?this.character:" "},se}(),_n={MathNode:ol,TextNode:id,SpaceNode:D0,newDocumentFragment:KT},za=function(M,D,P){return fi[D][M]&&fi[D][M].replace&&M.charCodeAt(0)!==55349&&!(Le.hasOwnProperty(M)&&P&&(P.fontFamily&&P.fontFamily.substr(4,2)==="tt"||P.font&&P.font.substr(4,2)==="tt"))&&(M=fi[D][M].replace),new _n.TextNode(M)},Ro=function(M){return M.length===1?M[0]:new _n.MathNode("mrow",M)},Bl=function(M,D){if(D.fontFamily==="texttt")return"monospace";if(D.fontFamily==="textsf")return D.fontShape==="textit"&&D.fontWeight==="textbf"?"sans-serif-bold-italic":D.fontShape==="textit"?"sans-serif-italic":D.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(D.fontShape==="textit"&&D.fontWeight==="textbf")return"bold-italic";if(D.fontShape==="textit")return"italic";if(D.fontWeight==="textbf")return"bold";var P=D.font;if(!P||P==="mathnormal")return null;var N=M.mode;if(P==="mathit")return"italic";if(P==="boldsymbol")return M.type==="textord"?"bold":"bold-italic";if(P==="mathbf")return"bold";if(P==="mathbb")return"double-struck";if(P==="mathfrak")return"fraktur";if(P==="mathscr"||P==="mathcal")return"script";if(P==="mathsf")return"sans-serif";if(P==="mathtt")return"monospace";var Y=M.text;if(v.contains(["\\imath","\\jmath"],Y))return null;fi[N][Y]&&fi[N][Y].replace&&(Y=fi[N][Y].replace);var oe=yt.fontMap[P].fontName;return it(Y,oe,N)?yt.fontMap[P].variant:null},Ca=function(M,D,P){if(M.length===1){var N=Ur(M[0],D);return P&&N instanceof ol&&N.type==="mo"&&(N.setAttribute("lspace","0em"),N.setAttribute("rspace","0em")),[N]}for(var Y=[],oe,Ce=0;Ce<M.length;Ce++){var $e=Ur(M[Ce],D);if($e instanceof ol&&oe instanceof ol){if($e.type==="mtext"&&oe.type==="mtext"&&$e.getAttribute("mathvariant")===oe.getAttribute("mathvariant")){var tt;(tt=oe.children).push.apply(tt,$e.children);continue}else if($e.type==="mn"&&oe.type==="mn"){var bt;(bt=oe.children).push.apply(bt,$e.children);continue}else if($e.type==="mi"&&$e.children.length===1&&oe.type==="mn"){var Gt=$e.children[0];if(Gt instanceof id&&Gt.text==="."){var sn;(sn=oe.children).push.apply(sn,$e.children);continue}}else if(oe.type==="mi"&&oe.children.length===1){var fn=oe.children[0];if(fn instanceof id&&fn.text==="̸"&&($e.type==="mo"||$e.type==="mi"||$e.type==="mn")){var hn=$e.children[0];hn instanceof id&&hn.text.length>0&&(hn.text=hn.text.slice(0,1)+"̸"+hn.text.slice(1),Y.pop())}}}Y.push($e),oe=$e}return Y},gc=function(M,D,P){return Ro(Ca(M,D,P))},Ur=function(M,D){if(!M)return new _n.MathNode("mrow");if(Pr[M.type]){var P=Pr[M.type](M,D);return P}else throw new s("Got group of unknown type: '"+M.type+"'")};function XT(se,M,D,P,N){var Y=Ca(se,D),oe;Y.length===1&&Y[0]instanceof ol&&v.contains(["mrow","mtable"],Y[0].type)?oe=Y[0]:oe=new _n.MathNode("mrow",Y);var Ce=new _n.MathNode("annotation",[new _n.TextNode(M)]);Ce.setAttribute("encoding","application/x-tex");var $e=new _n.MathNode("semantics",[oe,Ce]),tt=new _n.MathNode("math",[$e]);tt.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),P&&tt.setAttribute("display","block");var bt=N?"katex":"katex-mathml";return yt.makeSpan([bt],[tt])}var YT=function(M){return new Tt({style:M.displayMode?F.DISPLAY:F.TEXT,maxSize:M.maxSize,minRuleThickness:M.minRuleThickness})},QT=function(M,D){if(D.displayMode){var P=["katex-display"];D.leqno&&P.push("leqno"),D.fleqn&&P.push("fleqn"),M=yt.makeSpan(P,[M])}return M},Jb=function(M,D,P){var N=YT(P),Y;if(P.output==="mathml")return XT(M,D,N,P.displayMode,!0);if(P.output==="html"){var oe=Zb(M,N);Y=yt.makeSpan(["katex"],[oe])}else{var Ce=XT(M,D,N,P.displayMode,!1),$e=Zb(M,N);Y=yt.makeSpan(["katex"],[Ce,$e])}return QT(Y,P)},eS=function(M,D,P){var N=YT(P),Y=Zb(M,N),oe=yt.makeSpan(["katex"],[Y]);return QT(oe,P)},R0={widehat:"^",widecheck:"ˇ",widetilde:"~",utilde:"~",overleftarrow:"←",underleftarrow:"←",xleftarrow:"←",overrightarrow:"→",underrightarrow:"→",xrightarrow:"→",underbrace:"⏟",overbrace:"⏞",overgroup:"⏠",undergroup:"⏡",overleftrightarrow:"↔",underleftrightarrow:"↔",xleftrightarrow:"↔",Overrightarrow:"⇒",xRightarrow:"⇒",overleftharpoon:"↼",xleftharpoonup:"↼",overrightharpoon:"⇀",xrightharpoonup:"⇀",xLeftarrow:"⇐",xLeftrightarrow:"⇔",xhookleftarrow:"↩",xhookrightarrow:"↪",xmapsto:"↦",xrightharpoondown:"⇁",xleftharpoondown:"↽",xrightleftharpoons:"⇌",xleftrightharpoons:"⇋",xtwoheadleftarrow:"↞",xtwoheadrightarrow:"↠",xlongequal:"=",xtofrom:"⇄",xrightleftarrows:"⇄",xrightequilibrium:"⇌",xleftequilibrium:"⇋","\\cdrightarrow":"→","\\cdleftarrow":"←","\\cdlongequal":"="},Ih=function(M){var D=new _n.MathNode("mo",[new _n.TextNode(R0[M.replace(/^\\/,"")])]);return D.setAttribute("stretchy","true"),D},vv={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},cf=function(M){return M.type==="ordgroup"?M.body.length:1},pR=function(M,D){function P(){var $e=4e5,tt=M.label.substr(1);if(v.contains(["widehat","widecheck","widetilde","utilde"],tt)){var bt=M,Gt=cf(bt.base),sn,fn,hn;if(Gt>5)tt==="widehat"||tt==="widecheck"?(sn=420,$e=2364,hn=.42,fn=tt+"4"):(sn=312,$e=2340,hn=.34,fn="tilde4");else{var In=[1,1,2,2,3,3][Gt];tt==="widehat"||tt==="widecheck"?($e=[0,1062,2364,2364,2364][In],sn=[0,239,300,360,420][In],hn=[0,.24,.3,.3,.36,.42][In],fn=tt+In):($e=[0,600,1033,2339,2340][In],sn=[0,260,286,306,312][In],hn=[0,.26,.286,.3,.306,.34][In],fn="tilde"+In)}var On=new jt(fn),ii=new Mt([On],{width:"100%",height:q(hn),viewBox:"0 0 "+$e+" "+sn,preserveAspectRatio:"none"});return{span:yt.makeSvgSpan([],[ii],D),minWidth:0,height:hn}}else{var hi=[],bi=vv[tt],Tr=bi[0],zr=bi[1],fs=bi[2],kr=fs/1e3,Hr=Tr.length,Bs,Zr;if(Hr===1){var Hl=bi[3];Bs=["hide-tail"],Zr=[Hl]}else if(Hr===2)Bs=["halfarrow-left","halfarrow-right"],Zr=["xMinYMin","xMaxYMin"];else if(Hr===3)Bs=["brace-left","brace-center","brace-right"],Zr=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Hr+" children.");for(var Vl=0;Vl<Hr;Vl++){var Oh=new jt(Tr[Vl]),od=new Mt([Oh],{width:"400em",height:q(kr),viewBox:"0 0 "+$e+" "+fs,preserveAspectRatio:Zr[Vl]+" slice"}),$l=yt.makeSvgSpan([Bs[Vl]],[od],D);if(Hr===1)return{span:$l,minWidth:zr,height:kr};$l.style.height=q(kr),hi.push($l)}return{span:yt.makeSpan(["stretchy"],hi,D),minWidth:zr,height:kr}}}var N=P(),Y=N.span,oe=N.minWidth,Ce=N.height;return Y.height=Ce,Y.style.height=q(Ce),oe>0&&(Y.style.minWidth=q(oe)),Y},ZT=function(M,D,P,N,Y){var oe,Ce=M.height+M.depth+P+N;if(/fbox|color|angl/.test(D)){if(oe=yt.makeSpan(["stretchy",D],[],Y),D==="fbox"){var $e=Y.color&&Y.getColor();$e&&(oe.style.borderColor=$e)}}else{var tt=[];/^[bx]cancel$/.test(D)&&tt.push(new Ft({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(D)&&tt.push(new Ft({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var bt=new Mt(tt,{width:"100%",height:q(Ce)});oe=yt.makeSvgSpan([],[bt],Y)}return oe.height=Ce,oe.style.height=q(Ce),oe},vu={encloseSpan:ZT,mathMLnode:Ih,svgSpan:pR};function Bi(se,M){if(!se||se.type!==M)throw new Error("Expected node of type "+M+", but got "+(se?"node of type "+se.type:String(se)));return se}function tS(se){var M=yv(se);if(!M)throw new Error("Expected node of symbol group type, but got "+(se?"node of type "+se.type:String(se)));return M}function yv(se){return se&&(se.type==="atom"||jn.hasOwnProperty(se.type))?se:null}var nS=function(M,D){var P,N,Y;M&&M.type==="supsub"?(N=Bi(M.base,"accent"),P=N.base,M.base=P,Y=Pn(gr(M,D)),M.base=N):(N=Bi(M,"accent"),P=N.base);var oe=gr(P,D.havingCrampedStyle()),Ce=N.isShifty&&v.isCharacterBox(P),$e=0;if(Ce){var tt=v.getBaseElem(P),bt=gr(tt,D.havingCrampedStyle());$e=Sn(bt).skew}var Gt=N.label==="\\c",sn=Gt?oe.height+oe.depth:Math.min(oe.height,D.fontMetrics().xHeight),fn;if(N.isStretchy)fn=vu.svgSpan(N,D),fn=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:oe},{type:"elem",elem:fn,wrapperClasses:["svg-align"],wrapperStyle:$e>0?{width:"calc(100% - "+q(2*$e)+")",marginLeft:q(2*$e)}:void 0}]},D);else{var hn,In;N.label==="\\vec"?(hn=yt.staticSvg("vec",D),In=yt.svgData.vec[1]):(hn=yt.makeOrd({mode:N.mode,text:N.label},D,"textord"),hn=Sn(hn),hn.italic=0,In=hn.width,Gt&&(sn+=hn.depth)),fn=yt.makeSpan(["accent-body"],[hn]);var On=N.label==="\\textcircled";On&&(fn.classes.push("accent-full"),sn=oe.height);var ii=$e;On||(ii-=In/2),fn.style.left=q(ii),N.label==="\\textcircled"&&(fn.style.top=".2em"),fn=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:oe},{type:"kern",size:-sn},{type:"elem",elem:fn}]},D)}var hi=yt.makeSpan(["mord","accent"],[fn],D);return Y?(Y.children[0]=hi,Y.height=Math.max(hi.height,Y.height),Y.classes[0]="mord",Y):hi},P0=function(M,D){var P=M.isStretchy?vu.mathMLnode(M.label):new _n.MathNode("mo",[za(M.label,M.mode)]),N=new _n.MathNode("mover",[Ur(M.base,D),P]);return N.setAttribute("accent","true"),N},mR=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(function(se){return"\\"+se}).join("|"));vn({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:function(M,D){var P=Gi(D[0]),N=!mR.test(M.funcName),Y=!N||M.funcName==="\\widehat"||M.funcName==="\\widetilde"||M.funcName==="\\widecheck";return{type:"accent",mode:M.parser.mode,label:M.funcName,isStretchy:N,isShifty:Y,base:P}},htmlBuilder:nS,mathmlBuilder:P0}),vn({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:function(M,D){var P=D[0],N=M.parser.mode;return N==="math"&&(M.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+M.funcName+" works only in text mode"),N="text"),{type:"accent",mode:N,label:M.funcName,isStretchy:!1,isShifty:!0,base:P}},htmlBuilder:nS,mathmlBuilder:P0}),vn({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"accentUnder",mode:P.mode,label:N,base:Y}},htmlBuilder:function(M,D){var P=gr(M.base,D),N=vu.svgSpan(M,D),Y=M.label==="\\utilde"?.12:0,oe=yt.makeVList({positionType:"top",positionData:P.height,children:[{type:"elem",elem:N,wrapperClasses:["svg-align"]},{type:"kern",size:Y},{type:"elem",elem:P}]},D);return yt.makeSpan(["mord","accentunder"],[oe],D)},mathmlBuilder:function(M,D){var P=vu.mathMLnode(M.label),N=new _n.MathNode("munder",[Ur(M.base,D),P]);return N.setAttribute("accentunder","true"),N}});var Dh=function(M){var D=new _n.MathNode("mpadded",M?[M]:[]);return D.setAttribute("width","+0.6em"),D.setAttribute("lspace","0.3em"),D};vn({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler:function(M,D,P){var N=M.parser,Y=M.funcName;return{type:"xArrow",mode:N.mode,label:Y,body:D[0],below:P[0]}},htmlBuilder:function(M,D){var P=D.style,N=D.havingStyle(P.sup()),Y=yt.wrapFragment(gr(M.body,N,D),D),oe=M.label.slice(0,2)==="\\x"?"x":"cd";Y.classes.push(oe+"-arrow-pad");var Ce;M.below&&(N=D.havingStyle(P.sub()),Ce=yt.wrapFragment(gr(M.below,N,D),D),Ce.classes.push(oe+"-arrow-pad"));var $e=vu.svgSpan(M,D),tt=-D.fontMetrics().axisHeight+.5*$e.height,bt=-D.fontMetrics().axisHeight-.5*$e.height-.111;(Y.depth>.25||M.label==="\\xleftequilibrium")&&(bt-=Y.depth);var Gt;if(Ce){var sn=-D.fontMetrics().axisHeight+Ce.height+.5*$e.height+.111;Gt=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Y,shift:bt},{type:"elem",elem:$e,shift:tt},{type:"elem",elem:Ce,shift:sn}]},D)}else Gt=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:Y,shift:bt},{type:"elem",elem:$e,shift:tt}]},D);return Gt.children[0].children[0].children[1].classes.push("svg-align"),yt.makeSpan(["mrel","x-arrow"],[Gt],D)},mathmlBuilder:function(M,D){var P=vu.mathMLnode(M.label);P.setAttribute("minsize",M.label.charAt(0)==="x"?"1.75em":"3.0em");var N;if(M.body){var Y=Dh(Ur(M.body,D));if(M.below){var oe=Dh(Ur(M.below,D));N=new _n.MathNode("munderover",[P,oe,Y])}else N=new _n.MathNode("mover",[P,Y])}else if(M.below){var Ce=Dh(Ur(M.below,D));N=new _n.MathNode("munder",[P,Ce])}else N=Dh(),N=new _n.MathNode("mover",[P,N]);return N}});var gR={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},JT=function(){return{type:"styling",body:[],mode:"math",style:"display"}},iS=function(M){return M.type==="textord"&&M.text==="@"},_v=function(M,D){return(M.type==="mathord"||M.type==="atom")&&M.text===D};function vR(se,M,D){var P=gR[se];switch(P){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return D.callFunction(P,[M[0]],[M[1]]);case"\\uparrow":case"\\downarrow":{var N=D.callFunction("\\\\cdleft",[M[0]],[]),Y={type:"atom",text:P,mode:"math",family:"rel"},oe=D.callFunction("\\Big",[Y],[]),Ce=D.callFunction("\\\\cdright",[M[1]],[]),$e={type:"ordgroup",mode:"math",body:[N,oe,Ce]};return D.callFunction("\\\\cdparent",[$e],[])}case"\\\\cdlongequal":return D.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var tt={type:"textord",text:"\\Vert",mode:"math"};return D.callFunction("\\Big",[tt],[])}default:return{type:"textord",text:" ",mode:"math"}}}function yR(se){var M=[];for(se.gullet.beginGroup(),se.gullet.macros.set("\\cr","\\\\\\relax"),se.gullet.beginGroup();;){M.push(se.parseExpression(!1,"\\\\")),se.gullet.endGroup(),se.gullet.beginGroup();var D=se.fetch().text;if(D==="&"||D==="\\\\")se.consume();else if(D==="\\end"){M[M.length-1].length===0&&M.pop();break}else throw new s("Expected \\\\ or \\cr or \\end",se.nextToken)}for(var P=[],N=[P],Y=0;Y<M.length;Y++){for(var oe=M[Y],Ce=JT(),$e=0;$e<oe.length;$e++)if(!iS(oe[$e]))Ce.body.push(oe[$e]);else{P.push(Ce),$e+=1;var tt=tS(oe[$e]).text,bt=new Array(2);if(bt[0]={type:"ordgroup",mode:"math",body:[]},bt[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(tt)>-1))if("<>AV".indexOf(tt)>-1)for(var Gt=0;Gt<2;Gt++){for(var sn=!0,fn=$e+1;fn<oe.length;fn++){if(_v(oe[fn],tt)){sn=!1,$e=fn;break}if(iS(oe[fn]))throw new s("Missing a "+tt+" character to complete a CD arrow.",oe[fn]);bt[Gt].body.push(oe[fn])}if(sn)throw new s("Missing a "+tt+" character to complete a CD arrow.",oe[$e])}else throw new s('Expected one of "<>AV=|." after @',oe[$e]);var hn=vR(tt,bt,se),In={type:"styling",body:[hn],mode:"math",style:"display"};P.push(In),Ce=JT()}Y%2===0?P.push(Ce):P.shift(),P=[],N.push(P)}se.gullet.endGroup(),se.gullet.endGroup();var On=new Array(N[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:N,arraystretch:1,addJot:!0,rowGaps:[null],cols:On,colSeparationType:"CD",hLinesBeforeRow:new Array(N.length+1).fill([])}}vn({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=M.funcName;return{type:"cdlabel",mode:P.mode,side:N.slice(4),label:D[0]}},htmlBuilder:function(M,D){var P=D.havingStyle(D.style.sup()),N=yt.wrapFragment(gr(M.label,P,D),D);return N.classes.push("cd-label-"+M.side),N.style.bottom=q(.8-N.depth),N.height=0,N.depth=0,N},mathmlBuilder:function(M,D){var P=new _n.MathNode("mrow",[Ur(M.label,D)]);return P=new _n.MathNode("mpadded",[P]),P.setAttribute("width","0"),M.side==="left"&&P.setAttribute("lspace","-1width"),P.setAttribute("voffset","0.7em"),P=new _n.MathNode("mstyle",[P]),P.setAttribute("displaystyle","false"),P.setAttribute("scriptlevel","1"),P}}),vn({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler:function(M,D){var P=M.parser;return{type:"cdlabelparent",mode:P.mode,fragment:D[0]}},htmlBuilder:function(M,D){var P=yt.wrapFragment(gr(M.fragment,D),D);return P.classes.push("cd-vert-arrow"),P},mathmlBuilder:function(M,D){return new _n.MathNode("mrow",[Ur(M.fragment,D)])}}),vn({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){for(var P=M.parser,N=Bi(D[0],"ordgroup"),Y=N.body,oe="",Ce=0;Ce<Y.length;Ce++){var $e=Bi(Y[Ce],"textord");oe+=$e.text}var tt=parseInt(oe),bt;if(isNaN(tt))throw new s("\\@char has non-numeric argument "+oe);if(tt<0||tt>=1114111)throw new s("\\@char with invalid code point "+oe);return tt<=65535?bt=String.fromCharCode(tt):(tt-=65536,bt=String.fromCharCode((tt>>10)+55296,(tt&1023)+56320)),{type:"textord",mode:P.mode,text:bt}}});var eC=function(M,D){var P=sa(M.body,D.withColor(M.color),!1);return yt.makeFragment(P)},bv=function(M,D){var P=Ca(M.body,D.withColor(M.color)),N=new _n.MathNode("mstyle",P);return N.setAttribute("mathcolor",M.color),N};vn({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler:function(M,D){var P=M.parser,N=Bi(D[0],"color-token").color,Y=D[1];return{type:"color",mode:P.mode,color:N,body:Ar(Y)}},htmlBuilder:eC,mathmlBuilder:bv}),vn({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler:function(M,D){var P=M.parser,N=M.breakOnTokenText,Y=Bi(D[0],"color-token").color;P.gullet.macros.set("\\current@color",Y);var oe=P.parseExpression(!0,N);return{type:"color",mode:P.mode,color:Y,body:oe}},htmlBuilder:eC,mathmlBuilder:bv}),vn({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:1,argTypes:["size"],allowedInText:!0},handler:function(M,D,P){var N=M.parser,Y=P[0],oe=!N.settings.displayMode||!N.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:N.mode,newLine:oe,size:Y&&Bi(Y,"size").value}},htmlBuilder:function(M,D){var P=yt.makeSpan(["mspace"],[],D);return M.newLine&&(P.classes.push("newline"),M.size&&(P.style.marginTop=q(vt(M.size,D)))),P},mathmlBuilder:function(M,D){var P=new _n.MathNode("mspace");return M.newLine&&(P.setAttribute("linebreak","newline"),M.size&&P.setAttribute("height",q(vt(M.size,D)))),P}});var rS={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Sv=function(M){var D=M.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(D))throw new s("Expected a control sequence",M);return D},tC=function(M){var D=M.gullet.popToken();return D.text==="="&&(D=M.gullet.popToken(),D.text===" "&&(D=M.gullet.popToken())),D},nC=function(M,D,P,N){var Y=M.gullet.macros.get(P.text);Y==null&&(P.noexpand=!0,Y={tokens:[P],numArgs:0,unexpandable:!M.gullet.isExpandable(P.text)}),M.gullet.macros.set(D,Y,N)};vn({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler:function(M){var D=M.parser,P=M.funcName;D.consumeSpaces();var N=D.fetch();if(rS[N.text])return(P==="\\global"||P==="\\\\globallong")&&(N.text=rS[N.text]),Bi(D.parseFunction(),"internal");throw new s("Invalid token after macro prefix",N)}}),vn({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,P=M.funcName,N=D.gullet.popToken(),Y=N.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(Y))throw new s("Expected a control sequence",N);for(var oe=0,Ce,$e=[[]];D.gullet.future().text!=="{";)if(N=D.gullet.popToken(),N.text==="#"){if(D.gullet.future().text==="{"){Ce=D.gullet.future(),$e[oe].push("{");break}if(N=D.gullet.popToken(),!/^[1-9]$/.test(N.text))throw new s('Invalid argument number "'+N.text+'"');if(parseInt(N.text)!==oe+1)throw new s('Argument number "'+N.text+'" out of order');oe++,$e.push([])}else{if(N.text==="EOF")throw new s("Expected a macro definition");$e[oe].push(N.text)}var tt=D.gullet.consumeArg(),bt=tt.tokens;return Ce&&bt.unshift(Ce),(P==="\\edef"||P==="\\xdef")&&(bt=D.gullet.expandTokens(bt),bt.reverse()),D.gullet.macros.set(Y,{tokens:bt,numArgs:oe,delimiters:$e},P===rS[P]),{type:"internal",mode:D.mode}}}),vn({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,P=M.funcName,N=Sv(D.gullet.popToken());D.gullet.consumeSpaces();var Y=tC(D);return nC(D,N,Y,P==="\\\\globallet"),{type:"internal",mode:D.mode}}}),vn({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M){var D=M.parser,P=M.funcName,N=Sv(D.gullet.popToken()),Y=D.gullet.popToken(),oe=D.gullet.popToken();return nC(D,N,oe,P==="\\\\globalfuture"),D.gullet.pushToken(oe),D.gullet.pushToken(Y),{type:"internal",mode:D.mode}}});var k0=function(M,D,P){var N=fi.math[M]&&fi.math[M].replace,Y=it(N||M,D,P);if(!Y)throw new Error("Unsupported symbol "+M+" and font size "+D+".");return Y},sS=function(M,D,P,N){var Y=P.havingBaseStyle(D),oe=yt.makeSpan(N.concat(Y.sizingClasses(P)),[M],P),Ce=Y.sizeMultiplier/P.sizeMultiplier;return oe.height*=Ce,oe.depth*=Ce,oe.maxFontSize=Y.sizeMultiplier,oe},iC=function(M,D,P){var N=D.havingBaseStyle(P),Y=(1-D.sizeMultiplier/N.sizeMultiplier)*D.fontMetrics().axisHeight;M.classes.push("delimcenter"),M.style.top=q(Y),M.height-=Y,M.depth+=Y},rC=function(M,D,P,N,Y,oe){var Ce=yt.makeSymbol(M,"Main-Regular",Y,N),$e=sS(Ce,D,N,oe);return P&&iC($e,N,D),$e},_R=function(M,D,P,N){return yt.makeSymbol(M,"Size"+D+"-Regular",P,N)},aS=function(M,D,P,N,Y,oe){var Ce=_R(M,D,Y,N),$e=sS(yt.makeSpan(["delimsizing","size"+D],[Ce],N),F.TEXT,N,oe);return P&&iC($e,N,F.TEXT),$e},oS=function(M,D,P){var N;D==="Size1-Regular"?N="delim-size1":N="delim-size4";var Y=yt.makeSpan(["delimsizinginner",N],[yt.makeSpan([],[yt.makeSymbol(M,D,P)])]);return{type:"elem",elem:Y}},xv=function(M,D,P){var N=Fe["Size4-Regular"][M.charCodeAt(0)]?Fe["Size4-Regular"][M.charCodeAt(0)][4]:Fe["Size1-Regular"][M.charCodeAt(0)][4],Y=new jt("inner",me(M,Math.round(1e3*D))),oe=new Mt([Y],{width:q(N),height:q(D),style:"width:"+q(N),viewBox:"0 0 "+1e3*N+" "+Math.round(1e3*D),preserveAspectRatio:"xMinYMin"}),Ce=yt.makeSvgSpan([],[oe],P);return Ce.height=D,Ce.style.height=q(D),Ce.style.width=q(N),{type:"elem",elem:Ce}},Qs=.008,Rh={type:"kern",size:-1*Qs},ll=["|","\\lvert","\\rvert","\\vert"],L0=["\\|","\\lVert","\\rVert","\\Vert"],sC=function(M,D,P,N,Y,oe){var Ce,$e,tt,bt;Ce=tt=bt=M,$e=null;var Gt="Size1-Regular";M==="\\uparrow"?tt=bt="⏐":M==="\\Uparrow"?tt=bt="‖":M==="\\downarrow"?Ce=tt="⏐":M==="\\Downarrow"?Ce=tt="‖":M==="\\updownarrow"?(Ce="\\uparrow",tt="⏐",bt="\\downarrow"):M==="\\Updownarrow"?(Ce="\\Uparrow",tt="‖",bt="\\Downarrow"):v.contains(ll,M)?tt="∣":v.contains(L0,M)?tt="∥":M==="["||M==="\\lbrack"?(Ce="⎡",tt="⎢",bt="⎣",Gt="Size4-Regular"):M==="]"||M==="\\rbrack"?(Ce="⎤",tt="⎥",bt="⎦",Gt="Size4-Regular"):M==="\\lfloor"||M==="⌊"?(tt=Ce="⎢",bt="⎣",Gt="Size4-Regular"):M==="\\lceil"||M==="⌈"?(Ce="⎡",tt=bt="⎢",Gt="Size4-Regular"):M==="\\rfloor"||M==="⌋"?(tt=Ce="⎥",bt="⎦",Gt="Size4-Regular"):M==="\\rceil"||M==="⌉"?(Ce="⎤",tt=bt="⎥",Gt="Size4-Regular"):M==="("||M==="\\lparen"?(Ce="⎛",tt="⎜",bt="⎝",Gt="Size4-Regular"):M===")"||M==="\\rparen"?(Ce="⎞",tt="⎟",bt="⎠",Gt="Size4-Regular"):M==="\\{"||M==="\\lbrace"?(Ce="⎧",$e="⎨",bt="⎩",tt="⎪",Gt="Size4-Regular"):M==="\\}"||M==="\\rbrace"?(Ce="⎫",$e="⎬",bt="⎭",tt="⎪",Gt="Size4-Regular"):M==="\\lgroup"||M==="⟮"?(Ce="⎧",bt="⎩",tt="⎪",Gt="Size4-Regular"):M==="\\rgroup"||M==="⟯"?(Ce="⎫",bt="⎭",tt="⎪",Gt="Size4-Regular"):M==="\\lmoustache"||M==="⎰"?(Ce="⎧",bt="⎭",tt="⎪",Gt="Size4-Regular"):(M==="\\rmoustache"||M==="⎱")&&(Ce="⎫",bt="⎩",tt="⎪",Gt="Size4-Regular");var sn=k0(Ce,Gt,Y),fn=sn.height+sn.depth,hn=k0(tt,Gt,Y),In=hn.height+hn.depth,On=k0(bt,Gt,Y),ii=On.height+On.depth,hi=0,bi=1;if($e!==null){var Tr=k0($e,Gt,Y);hi=Tr.height+Tr.depth,bi=2}var zr=fn+ii+hi,fs=Math.max(0,Math.ceil((D-zr)/(bi*In))),kr=zr+fs*bi*In,Hr=N.fontMetrics().axisHeight;P&&(Hr*=N.sizeMultiplier);var Bs=kr/2-Hr,Zr=[];if(Zr.push(oS(bt,Gt,Y)),Zr.push(Rh),$e===null){var Hl=kr-fn-ii+2*Qs;Zr.push(xv(tt,Hl,N))}else{var Vl=(kr-fn-ii-hi)/2+2*Qs;Zr.push(xv(tt,Vl,N)),Zr.push(Rh),Zr.push(oS($e,Gt,Y)),Zr.push(Rh),Zr.push(xv(tt,Vl,N))}Zr.push(Rh),Zr.push(oS(Ce,Gt,Y));var Oh=N.havingBaseStyle(F.TEXT),od=yt.makeVList({positionType:"bottom",positionData:Bs,children:Zr},Oh);return sS(yt.makeSpan(["delimsizing","mult"],[od],Oh),F.TEXT,N,oe)},lS=80,yu=.08,wv=function(M,D,P,N,Y){var oe=Q(M,N,P),Ce=new jt(M,oe),$e=new Mt([Ce],{width:"400em",height:q(D),viewBox:"0 0 400000 "+P,preserveAspectRatio:"xMinYMin slice"});return yt.makeSvgSpan(["hide-tail"],[$e],Y)},bR=function(M,D){var P=D.havingBaseSizing(),N=uS("\\surd",M*P.sizeMultiplier,uC,P),Y=P.sizeMultiplier,oe=Math.max(0,D.minRuleThickness-D.fontMetrics().sqrtRuleThickness),Ce,$e=0,tt=0,bt=0,Gt;return N.type==="small"?(bt=1e3+1e3*oe+lS,M<1?Y=1:M<1.4&&(Y=.7),$e=(1+oe+yu)/Y,tt=(1+oe)/Y,Ce=wv("sqrtMain",$e,bt,oe,D),Ce.style.minWidth="0.853em",Gt=.833/Y):N.type==="large"?(bt=(1e3+lS)*O0[N.size],tt=(O0[N.size]+oe)/Y,$e=(O0[N.size]+oe+yu)/Y,Ce=wv("sqrtSize"+N.size,$e,bt,oe,D),Ce.style.minWidth="1.02em",Gt=1/Y):($e=M+oe+yu,tt=M+oe,bt=Math.floor(1e3*M+oe)+lS,Ce=wv("sqrtTall",$e,bt,oe,D),Ce.style.minWidth="0.742em",Gt=1.056),Ce.height=tt,Ce.style.height=q($e),{span:Ce,advanceWidth:Gt,ruleWidth:(D.fontMetrics().sqrtRuleThickness+oe)*Y}},aC=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","\\surd"],Tv=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱"],oC=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],O0=[0,1.2,1.8,2.4,3],SR=function(M,D,P,N,Y){if(M==="<"||M==="\\lt"||M==="⟨"?M="\\langle":(M===">"||M==="\\gt"||M==="⟩")&&(M="\\rangle"),v.contains(aC,M)||v.contains(oC,M))return aS(M,D,!1,P,N,Y);if(v.contains(Tv,M))return sC(M,O0[D],!1,P,N,Y);throw new s("Illegal delimiter: '"+M+"'")},xR=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],lC=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"stack"}],uC=[{type:"small",style:F.SCRIPTSCRIPT},{type:"small",style:F.SCRIPT},{type:"small",style:F.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],N0=function(M){if(M.type==="small")return"Main-Regular";if(M.type==="large")return"Size"+M.size+"-Regular";if(M.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+M.type+"' here.")},uS=function(M,D,P,N){for(var Y=Math.min(2,3-N.style.size),oe=Y;oe<P.length&&P[oe].type!=="stack";oe++){var Ce=k0(M,N0(P[oe]),"math"),$e=Ce.height+Ce.depth;if(P[oe].type==="small"){var tt=N.havingBaseStyle(P[oe].style);$e*=tt.sizeMultiplier}if($e>D)return P[oe]}return P[P.length-1]},B0=function(M,D,P,N,Y,oe){M==="<"||M==="\\lt"||M==="⟨"?M="\\langle":(M===">"||M==="\\gt"||M==="⟩")&&(M="\\rangle");var Ce;v.contains(oC,M)?Ce=xR:v.contains(aC,M)?Ce=uC:Ce=lC;var $e=uS(M,D,Ce,N);return $e.type==="small"?rC(M,$e.style,P,N,Y,oe):$e.type==="large"?aS(M,$e.size,P,N,Y,oe):sC(M,D,P,N,Y,oe)},F0=function(M,D,P,N,Y,oe){var Ce=N.fontMetrics().axisHeight*N.sizeMultiplier,$e=901,tt=5/N.fontMetrics().ptPerEm,bt=Math.max(D-Ce,P+Ce),Gt=Math.max(bt/500*$e,2*bt-tt);return B0(M,Gt,!0,N,Y,oe)},Dr={sqrtImage:bR,sizedDelim:SR,sizeToMaxHeight:O0,customSizedDelim:B0,leftRightDelim:F0},df={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},cS=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","⌊","⌋","\\lceil","\\rceil","⌈","⌉","<",">","\\langle","⟨","\\rangle","⟩","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","⟮","⟯","\\lmoustache","\\rmoustache","⎰","⎱","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Cv(se,M){var D=yv(se);if(D&&v.contains(cS,D.text))return D;throw D?new s("Invalid delimiter '"+D.text+"' after '"+M.funcName+"'",se):new s("Invalid delimiter type '"+se.type+"'",se)}vn({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:function(M,D){var P=Cv(D[0],M);return{type:"delimsizing",mode:M.parser.mode,size:df[M.funcName].size,mclass:df[M.funcName].mclass,delim:P.text}},htmlBuilder:function(M,D){return M.delim==="."?yt.makeSpan([M.mclass]):Dr.sizedDelim(M.delim,M.size,D,M.mode,[M.mclass])},mathmlBuilder:function(M){var D=[];M.delim!=="."&&D.push(za(M.delim,M.mode));var P=new _n.MathNode("mo",D);M.mclass==="mopen"||M.mclass==="mclose"?P.setAttribute("fence","true"):P.setAttribute("fence","false"),P.setAttribute("stretchy","true");var N=q(Dr.sizeToMaxHeight[M.size]);return P.setAttribute("minsize",N),P.setAttribute("maxsize",N),P}});function cC(se){if(!se.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}vn({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:function(M,D){var P=M.parser.gullet.macros.get("\\current@color");if(P&&typeof P!="string")throw new s("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:M.parser.mode,delim:Cv(D[0],M).text,color:P}}}),vn({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:function(M,D){var P=Cv(D[0],M),N=M.parser;++N.leftrightDepth;var Y=N.parseExpression(!1);--N.leftrightDepth,N.expect("\\right",!1);var oe=Bi(N.parseFunction(),"leftright-right");return{type:"leftright",mode:N.mode,body:Y,left:P.text,right:oe.delim,rightColor:oe.color}},htmlBuilder:function(M,D){cC(M);for(var P=sa(M.body,D,!0,["mopen","mclose"]),N=0,Y=0,oe=!1,Ce=0;Ce<P.length;Ce++)P[Ce].isMiddle?oe=!0:(N=Math.max(P[Ce].height,N),Y=Math.max(P[Ce].depth,Y));N*=D.sizeMultiplier,Y*=D.sizeMultiplier;var $e;if(M.left==="."?$e=nd(D,["mopen"]):$e=Dr.leftRightDelim(M.left,N,Y,D,M.mode,["mopen"]),P.unshift($e),oe)for(var tt=1;tt<P.length;tt++){var bt=P[tt],Gt=bt.isMiddle;Gt&&(P[tt]=Dr.leftRightDelim(Gt.delim,N,Y,Gt.options,M.mode,[]))}var sn;if(M.right===".")sn=nd(D,["mclose"]);else{var fn=M.rightColor?D.withColor(M.rightColor):D;sn=Dr.leftRightDelim(M.right,N,Y,fn,M.mode,["mclose"])}return P.push(sn),yt.makeSpan(["minner"],P,D)},mathmlBuilder:function(M,D){cC(M);var P=Ca(M.body,D);if(M.left!=="."){var N=new _n.MathNode("mo",[za(M.left,M.mode)]);N.setAttribute("fence","true"),P.unshift(N)}if(M.right!=="."){var Y=new _n.MathNode("mo",[za(M.right,M.mode)]);Y.setAttribute("fence","true"),M.rightColor&&Y.setAttribute("mathcolor",M.rightColor),P.push(Y)}return Ro(P)}}),vn({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:function(M,D){var P=Cv(D[0],M);if(!M.parser.leftrightDepth)throw new s("\\middle without preceding \\left",P);return{type:"middle",mode:M.parser.mode,delim:P.text}},htmlBuilder:function(M,D){var P;if(M.delim===".")P=nd(D,[]);else{P=Dr.sizedDelim(M.delim,1,D,M.mode,[]);var N={delim:M.delim,options:D};P.isMiddle=N}return P},mathmlBuilder:function(M,D){var P=M.delim==="\\vert"||M.delim==="|"?za("|","text"):za(M.delim,M.mode),N=new _n.MathNode("mo",[P]);return N.setAttribute("fence","true"),N.setAttribute("lspace","0.05em"),N.setAttribute("rspace","0.05em"),N}});var dS=function(M,D){var P=yt.wrapFragment(gr(M.body,D),D),N=M.label.substr(1),Y=D.sizeMultiplier,oe,Ce=0,$e=v.isCharacterBox(M.body);if(N==="sout")oe=yt.makeSpan(["stretchy","sout"]),oe.height=D.fontMetrics().defaultRuleThickness/Y,Ce=-.5*D.fontMetrics().xHeight;else if(N==="phase"){var tt=vt({number:.6,unit:"pt"},D),bt=vt({number:.35,unit:"ex"},D),Gt=D.havingBaseSizing();Y=Y/Gt.sizeMultiplier;var sn=P.height+P.depth+tt+bt;P.style.paddingLeft=q(sn/2+tt);var fn=Math.floor(1e3*sn*Y),hn=Ye(fn),In=new Mt([new jt("phase",hn)],{width:"400em",height:q(fn/1e3),viewBox:"0 0 400000 "+fn,preserveAspectRatio:"xMinYMin slice"});oe=yt.makeSvgSpan(["hide-tail"],[In],D),oe.style.height=q(sn),Ce=P.depth+tt+bt}else{/cancel/.test(N)?$e||P.classes.push("cancel-pad"):N==="angl"?P.classes.push("anglpad"):P.classes.push("boxpad");var On=0,ii=0,hi=0;/box/.test(N)?(hi=Math.max(D.fontMetrics().fboxrule,D.minRuleThickness),On=D.fontMetrics().fboxsep+(N==="colorbox"?0:hi),ii=On):N==="angl"?(hi=Math.max(D.fontMetrics().defaultRuleThickness,D.minRuleThickness),On=4*hi,ii=Math.max(0,.25-P.depth)):(On=$e?.2:0,ii=On),oe=vu.encloseSpan(P,N,On,ii,D),/fbox|boxed|fcolorbox/.test(N)?(oe.style.borderStyle="solid",oe.style.borderWidth=q(hi)):N==="angl"&&hi!==.049&&(oe.style.borderTopWidth=q(hi),oe.style.borderRightWidth=q(hi)),Ce=P.depth+ii,M.backgroundColor&&(oe.style.backgroundColor=M.backgroundColor,M.borderColor&&(oe.style.borderColor=M.borderColor))}var bi;if(M.backgroundColor)bi=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:oe,shift:Ce},{type:"elem",elem:P,shift:0}]},D);else{var Tr=/cancel|phase/.test(N)?["svg-align"]:[];bi=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:P,shift:0},{type:"elem",elem:oe,shift:Ce,wrapperClasses:Tr}]},D)}return/cancel/.test(N)&&(bi.height=P.height,bi.depth=P.depth),/cancel/.test(N)&&!$e?yt.makeSpan(["mord","cancel-lap"],[bi],D):yt.makeSpan(["mord"],[bi],D)},fS=function(M,D){var P=0,N=new _n.MathNode(M.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Ur(M.body,D)]);switch(M.label){case"\\cancel":N.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":N.setAttribute("notation","downdiagonalstrike");break;case"\\phase":N.setAttribute("notation","phasorangle");break;case"\\sout":N.setAttribute("notation","horizontalstrike");break;case"\\fbox":N.setAttribute("notation","box");break;case"\\angl":N.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(P=D.fontMetrics().fboxsep*D.fontMetrics().ptPerEm,N.setAttribute("width","+"+2*P+"pt"),N.setAttribute("height","+"+2*P+"pt"),N.setAttribute("lspace",P+"pt"),N.setAttribute("voffset",P+"pt"),M.label==="\\fcolorbox"){var Y=Math.max(D.fontMetrics().fboxrule,D.minRuleThickness);N.setAttribute("style","border: "+Y+"em solid "+String(M.borderColor))}break;case"\\xcancel":N.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return M.backgroundColor&&N.setAttribute("mathbackground",M.backgroundColor),N};vn({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler:function(M,D,P){var N=M.parser,Y=M.funcName,oe=Bi(D[0],"color-token").color,Ce=D[1];return{type:"enclose",mode:N.mode,label:Y,backgroundColor:oe,body:Ce}},htmlBuilder:dS,mathmlBuilder:fS}),vn({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler:function(M,D,P){var N=M.parser,Y=M.funcName,oe=Bi(D[0],"color-token").color,Ce=Bi(D[1],"color-token").color,$e=D[2];return{type:"enclose",mode:N.mode,label:Y,backgroundColor:Ce,borderColor:oe,body:$e}},htmlBuilder:dS,mathmlBuilder:fS}),vn({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler:function(M,D){var P=M.parser;return{type:"enclose",mode:P.mode,label:"\\fbox",body:D[0]}}}),vn({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"enclose",mode:P.mode,label:N,body:Y}},htmlBuilder:dS,mathmlBuilder:fS}),vn({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler:function(M,D){var P=M.parser;return{type:"enclose",mode:P.mode,label:"\\angl",body:D[0]}}});var hS={};function Fl(se){for(var M=se.type,D=se.names,P=se.props,N=se.handler,Y=se.htmlBuilder,oe=se.mathmlBuilder,Ce={type:M,numArgs:P.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:N},$e=0;$e<D.length;++$e)hS[D[$e]]=Ce;Y&&(ai[M]=Y),oe&&(Pr[M]=oe)}function pS(se){var M=[];se.consumeSpaces();for(var D=se.fetch().text;D==="\\hline"||D==="\\hdashline";)se.consume(),M.push(D==="\\hdashline"),se.consumeSpaces(),D=se.fetch().text;return M}var U0=function(M){var D=M.parser.settings;if(!D.displayMode)throw new s("{"+M.envName+"} can be used only in display mode.")};function vc(se,M,D){var P=M.hskipBeforeAndAfter,N=M.addJot,Y=M.cols,oe=M.arraystretch,Ce=M.colSeparationType,$e=M.addEqnNum,tt=M.singleRow,bt=M.emptySingleRow,Gt=M.maxNumCols,sn=M.leqno;if(se.gullet.beginGroup(),tt||se.gullet.macros.set("\\cr","\\\\\\relax"),!oe){var fn=se.gullet.expandMacroAsText("\\arraystretch");if(fn==null)oe=1;else if(oe=parseFloat(fn),!oe||oe<0)throw new s("Invalid \\arraystretch: "+fn)}se.gullet.beginGroup();var hn=[],In=[hn],On=[],ii=[];for(ii.push(pS(se));;){var hi=se.parseExpression(!1,tt?"\\end":"\\\\");se.gullet.endGroup(),se.gullet.beginGroup(),hi={type:"ordgroup",mode:se.mode,body:hi},D&&(hi={type:"styling",mode:se.mode,style:D,body:[hi]}),hn.push(hi);var bi=se.fetch().text;if(bi==="&"){if(Gt&&hn.length===Gt){if(tt||Ce)throw new s("Too many tab characters: &",se.nextToken);se.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}se.consume()}else if(bi==="\\end"){hn.length===1&&hi.type==="styling"&&hi.body[0].body.length===0&&(In.length>1||!bt)&&In.pop(),ii.length<In.length+1&&ii.push([]);break}else if(bi==="\\\\"){se.consume();var Tr=void 0;se.gullet.future().text!==" "&&(Tr=se.parseSizeGroup(!0)),On.push(Tr?Tr.value:null),ii.push(pS(se)),hn=[],In.push(hn)}else throw new s("Expected & or \\\\ or \\cr or \\end",se.nextToken)}return se.gullet.endGroup(),se.gullet.endGroup(),{type:"array",mode:se.mode,addJot:N,arraystretch:oe,body:In,cols:Y,rowGaps:On,hskipBeforeAndAfter:P,hLinesBeforeRow:ii,colSeparationType:Ce,addEqnNum:$e,leqno:sn}}function z0(se){return se.substr(0,1)==="d"?"display":"text"}var Ul=function(M,D){var P,N,Y=M.body.length,oe=M.hLinesBeforeRow,Ce=0,$e=new Array(Y),tt=[],bt=Math.max(D.fontMetrics().arrayRuleWidth,D.minRuleThickness),Gt=1/D.fontMetrics().ptPerEm,sn=5*Gt;if(M.colSeparationType&&M.colSeparationType==="small"){var fn=D.havingStyle(F.SCRIPT).sizeMultiplier;sn=.2778*(fn/D.sizeMultiplier)}var hn=M.colSeparationType==="CD"?vt({number:3,unit:"ex"},D):12*Gt,In=3*Gt,On=M.arraystretch*hn,ii=.7*On,hi=.3*On,bi=0;function Tr(zz){for(var PC=0;PC<zz.length;++PC)PC>0&&(bi+=.25),tt.push({pos:bi,isDashed:zz[PC]})}for(Tr(oe[0]),P=0;P<M.body.length;++P){var zr=M.body[P],fs=ii,kr=hi;Ce<zr.length&&(Ce=zr.length);var Hr=new Array(zr.length);for(N=0;N<zr.length;++N){var Bs=gr(zr[N],D);kr<Bs.depth&&(kr=Bs.depth),fs<Bs.height&&(fs=Bs.height),Hr[N]=Bs}var Zr=M.rowGaps[P],Hl=0;Zr&&(Hl=vt(Zr,D),Hl>0&&(Hl+=hi,kr<Hl&&(kr=Hl),Hl=0)),M.addJot&&(kr+=In),Hr.height=fs,Hr.depth=kr,bi+=fs,Hr.pos=bi,bi+=kr+Hl,$e[P]=Hr,Tr(oe[P+1])}var Vl=bi/2+D.fontMetrics().axisHeight,Oh=M.cols||[],od=[],$l,Dv,Oz=[];if(M.addEqnNum)for(P=0;P<Y;++P){var OR=$e[P],Epe=OR.pos-Vl,NR=yt.makeSpan(["eqn-num"],[],D);NR.depth=OR.depth,NR.height=OR.height,Oz.push({type:"elem",elem:NR,shift:Epe})}for(N=0,Dv=0;N<Ce||Dv<Oh.length;++N,++Dv){for(var hf=Oh[Dv]||{},Nz=!0;hf.type==="separator";){if(Nz||($l=yt.makeSpan(["arraycolsep"],[]),$l.style.width=q(D.fontMetrics().doubleRuleSep),od.push($l)),hf.separator==="|"||hf.separator===":"){var Mpe=hf.separator==="|"?"solid":"dashed",Rv=yt.makeSpan(["vertical-separator"],[],D);Rv.style.height=q(bi),Rv.style.borderRightWidth=q(bt),Rv.style.borderRightStyle=Mpe,Rv.style.margin="0 "+q(-bt/2);var Bz=bi-Vl;Bz&&(Rv.style.verticalAlign=q(-Bz)),od.push(Rv)}else throw new s("Invalid separator type: "+hf.separator);Dv++,hf=Oh[Dv]||{},Nz=!1}if(!(N>=Ce)){var Pv=void 0;(N>0||M.hskipBeforeAndAfter)&&(Pv=v.deflt(hf.pregap,sn),Pv!==0&&($l=yt.makeSpan(["arraycolsep"],[]),$l.style.width=q(Pv),od.push($l)));var kv=[];for(P=0;P<Y;++P){var DC=$e[P],RC=DC[N];if(RC){var Ipe=DC.pos-Vl;RC.depth=DC.depth,RC.height=DC.height,kv.push({type:"elem",elem:RC,shift:Ipe})}}kv=yt.makeVList({positionType:"individualShift",children:kv},D),kv=yt.makeSpan(["col-align-"+(hf.align||"c")],[kv]),od.push(kv),(N<Ce-1||M.hskipBeforeAndAfter)&&(Pv=v.deflt(hf.postgap,sn),Pv!==0&&($l=yt.makeSpan(["arraycolsep"],[]),$l.style.width=q(Pv),od.push($l)))}}if($e=yt.makeSpan(["mtable"],od),tt.length>0){for(var Dpe=yt.makeLineSpan("hline",D,bt),Rpe=yt.makeLineSpan("hdashline",D,bt),BR=[{type:"elem",elem:$e,shift:0}];tt.length>0;){var Fz=tt.pop(),Uz=Fz.pos-Vl;Fz.isDashed?BR.push({type:"elem",elem:Rpe,shift:Uz}):BR.push({type:"elem",elem:Dpe,shift:Uz})}$e=yt.makeVList({positionType:"individualShift",children:BR},D)}if(M.addEqnNum){var FR=yt.makeVList({positionType:"individualShift",children:Oz},D);return FR=yt.makeSpan(["tag"],[FR],D),yt.makeFragment([$e,FR])}else return yt.makeSpan(["mord"],[$e],D)},mS={c:"center ",l:"left ",r:"right "},_u=function(M,D){for(var P=[],N=new _n.MathNode("mtd",[],["mtr-glue"]),Y=new _n.MathNode("mtd",[],["mml-eqn-num"]),oe=0;oe<M.body.length;oe++){for(var Ce=M.body[oe],$e=[],tt=0;tt<Ce.length;tt++)$e.push(new _n.MathNode("mtd",[Ur(Ce[tt],D)]));M.addEqnNum&&($e.unshift(N),$e.push(N),M.leqno?$e.unshift(Y):$e.push(Y)),P.push(new _n.MathNode("mtr",$e))}var bt=new _n.MathNode("mtable",P),Gt=M.arraystretch===.5?.1:.16+M.arraystretch-1+(M.addJot?.09:0);bt.setAttribute("rowspacing",q(Gt));var sn="",fn="";if(M.cols&&M.cols.length>0){var hn=M.cols,In="",On=!1,ii=0,hi=hn.length;hn[0].type==="separator"&&(sn+="top ",ii=1),hn[hn.length-1].type==="separator"&&(sn+="bottom ",hi-=1);for(var bi=ii;bi<hi;bi++)hn[bi].type==="align"?(fn+=mS[hn[bi].align],On&&(In+="none "),On=!0):hn[bi].type==="separator"&&On&&(In+=hn[bi].separator==="|"?"solid ":"dashed ",On=!1);bt.setAttribute("columnalign",fn.trim()),/[sd]/.test(In)&&bt.setAttribute("columnlines",In.trim())}if(M.colSeparationType==="align"){for(var Tr=M.cols||[],zr="",fs=1;fs<Tr.length;fs++)zr+=fs%2?"0em ":"1em ";bt.setAttribute("columnspacing",zr.trim())}else M.colSeparationType==="alignat"||M.colSeparationType==="gather"?bt.setAttribute("columnspacing","0em"):M.colSeparationType==="small"?bt.setAttribute("columnspacing","0.2778em"):M.colSeparationType==="CD"?bt.setAttribute("columnspacing","0.5em"):bt.setAttribute("columnspacing","1em");var kr="",Hr=M.hLinesBeforeRow;sn+=Hr[0].length>0?"left ":"",sn+=Hr[Hr.length-1].length>0?"right ":"";for(var Bs=1;Bs<Hr.length-1;Bs++)kr+=Hr[Bs].length===0?"none ":Hr[Bs][0]?"dashed ":"solid ";return/[sd]/.test(kr)&&bt.setAttribute("rowlines",kr.trim()),sn!==""&&(bt=new _n.MathNode("menclose",[bt]),bt.setAttribute("notation",sn.trim())),M.arraystretch&&M.arraystretch<1&&(bt=new _n.MathNode("mstyle",[bt]),bt.setAttribute("scriptlevel","1")),bt},Ph=function(M,D){M.envName.indexOf("ed")===-1&&U0(M);var P=[],N=M.envName.indexOf("at")>-1?"alignat":"align",Y=vc(M.parser,{cols:P,addJot:!0,addEqnNum:M.envName==="align"||M.envName==="alignat",emptySingleRow:!0,colSeparationType:N,maxNumCols:M.envName==="split"?2:void 0,leqno:M.parser.settings.leqno},"display"),oe,Ce=0,$e={type:"ordgroup",mode:M.mode,body:[]};if(D[0]&&D[0].type==="ordgroup"){for(var tt="",bt=0;bt<D[0].body.length;bt++){var Gt=Bi(D[0].body[bt],"textord");tt+=Gt.text}oe=Number(tt),Ce=oe*2}var sn=!Ce;Y.body.forEach(function(On){for(var ii=1;ii<On.length;ii+=2){var hi=Bi(On[ii],"styling"),bi=Bi(hi.body[0],"ordgroup");bi.body.unshift($e)}if(sn)Ce<On.length&&(Ce=On.length);else{var Tr=On.length/2;if(oe<Tr)throw new s("Too many math in a row: "+("expected "+oe+", but got "+Tr),On[0])}});for(var fn=0;fn<Ce;++fn){var hn="r",In=0;fn%2===1?hn="l":fn>0&&sn&&(In=1),P[fn]={type:"align",align:hn,pregap:In,postgap:0}}return Y.colSeparationType=sn?"align":"alignat",Y};Fl({type:"array",names:["array","darray"],props:{numArgs:1},handler:function(M,D){var P=yv(D[0]),N=P?[D[0]]:Bi(D[0],"ordgroup").body,Y=N.map(function(Ce){var $e=tS(Ce),tt=$e.text;if("lcr".indexOf(tt)!==-1)return{type:"align",align:tt};if(tt==="|")return{type:"separator",separator:"|"};if(tt===":")return{type:"separator",separator:":"};throw new s("Unknown column alignment: "+tt,Ce)}),oe={cols:Y,hskipBeforeAndAfter:!0,maxNumCols:Y.length};return vc(M.parser,oe,z0(M.envName))},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler:function(M){var D={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[M.envName.replace("*","")],P="c",N={hskipBeforeAndAfter:!1,cols:[{type:"align",align:P}]};if(M.envName.charAt(M.envName.length-1)==="*"){var Y=M.parser;if(Y.consumeSpaces(),Y.fetch().text==="["){if(Y.consume(),Y.consumeSpaces(),P=Y.fetch().text,"lcr".indexOf(P)===-1)throw new s("Expected l or c or r",Y.nextToken);Y.consume(),Y.consumeSpaces(),Y.expect("]"),Y.consume(),N.cols=[{type:"align",align:P}]}}var oe=vc(M.parser,N,z0(M.envName)),Ce=Math.max.apply(Math,[0].concat(oe.body.map(function($e){return $e.length})));return oe.cols=new Array(Ce).fill({type:"align",align:P}),D?{type:"leftright",mode:M.mode,body:[oe],left:D[0],right:D[1],rightColor:void 0}:oe},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["smallmatrix"],props:{numArgs:0},handler:function(M){var D={arraystretch:.5},P=vc(M.parser,D,"script");return P.colSeparationType="small",P},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["subarray"],props:{numArgs:1},handler:function(M,D){var P=yv(D[0]),N=P?[D[0]]:Bi(D[0],"ordgroup").body,Y=N.map(function(Ce){var $e=tS(Ce),tt=$e.text;if("lc".indexOf(tt)!==-1)return{type:"align",align:tt};throw new s("Unknown column alignment: "+tt,Ce)});if(Y.length>1)throw new s("{subarray} can contain only one column");var oe={cols:Y,hskipBeforeAndAfter:!1,arraystretch:.5};if(oe=vc(M.parser,oe,"script"),oe.body.length>0&&oe.body[0].length>1)throw new s("{subarray} can contain only one column");return oe},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler:function(M){var D={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},P=vc(M.parser,D,z0(M.envName));return{type:"leftright",mode:M.mode,body:[P],left:M.envName.indexOf("r")>-1?".":"\\{",right:M.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Ph,htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler:function(M){v.contains(["gather","gather*"],M.envName)&&U0(M);var D={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",addEqnNum:M.envName==="gather",emptySingleRow:!0,leqno:M.parser.settings.leqno};return vc(M.parser,D,"display")},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Ph,htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["equation","equation*"],props:{numArgs:0},handler:function(M){U0(M);var D={addEqnNum:M.envName==="equation",emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:M.parser.settings.leqno};return vc(M.parser,D,"display")},htmlBuilder:Ul,mathmlBuilder:_u}),Fl({type:"array",names:["CD"],props:{numArgs:0},handler:function(M){return U0(M),yR(M.parser)},htmlBuilder:Ul,mathmlBuilder:_u}),vn({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler:function(M,D){throw new s(M.funcName+" valid only within array environment")}});var wR=hS,gS=wR;vn({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];if(Y.type!=="ordgroup")throw new s("Invalid environment name",Y);for(var oe="",Ce=0;Ce<Y.body.length;++Ce)oe+=Bi(Y.body[Ce],"textord").text;if(N==="\\begin"){if(!gS.hasOwnProperty(oe))throw new s("No such environment: "+oe,Y);var $e=gS[oe],tt=P.parseArguments("\\begin{"+oe+"}",$e),bt=tt.args,Gt=tt.optArgs,sn={mode:P.mode,envName:oe,parser:P},fn=$e.handler(sn,bt,Gt);P.expect("\\end",!1);var hn=P.nextToken,In=Bi(P.parseFunction(),"environment");if(In.name!==oe)throw new s("Mismatch: \\begin{"+oe+"} matched by \\end{"+In.name+"}",hn);return fn}return{type:"environment",mode:P.mode,name:oe,nameGroup:Y}}});var dC=yt.makeSpan;function fC(se,M){var D=sa(se.body,M,!0);return dC([se.mclass],D,M)}function hC(se,M){var D,P=Ca(se.body,M);return se.mclass==="minner"?_n.newDocumentFragment(P):(se.mclass==="mord"?se.isCharacterBox?(D=P[0],D.type="mi"):D=new _n.MathNode("mi",P):(se.isCharacterBox?(D=P[0],D.type="mo"):D=new _n.MathNode("mo",P),se.mclass==="mbin"?(D.attributes.lspace="0.22em",D.attributes.rspace="0.22em"):se.mclass==="mpunct"?(D.attributes.lspace="0em",D.attributes.rspace="0.17em"):(se.mclass==="mopen"||se.mclass==="mclose")&&(D.attributes.lspace="0em",D.attributes.rspace="0em")),D)}vn({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"mclass",mode:P.mode,mclass:"m"+N.substr(5),body:Ar(Y),isCharacterBox:v.isCharacterBox(Y)}},htmlBuilder:fC,mathmlBuilder:hC});var Av=function(M){var D=M.type==="ordgroup"&&M.body.length?M.body[0]:M;return D.type==="atom"&&(D.family==="bin"||D.family==="rel")?"m"+D.family:"mord"};vn({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler:function(M,D){var P=M.parser;return{type:"mclass",mode:P.mode,mclass:Av(D[0]),body:Ar(D[1]),isCharacterBox:v.isCharacterBox(D[1])}}}),vn({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[1],oe=D[0],Ce;N!=="\\stackrel"?Ce=Av(Y):Ce="mrel";var $e={type:"op",mode:Y.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:N!=="\\stackrel",body:Ar(Y)},tt={type:"supsub",mode:oe.mode,base:$e,sup:N==="\\underset"?null:oe,sub:N==="\\underset"?oe:null};return{type:"mclass",mode:P.mode,mclass:Ce,body:[tt],isCharacterBox:v.isCharacterBox(tt)}},htmlBuilder:fC,mathmlBuilder:hC});var pC=function(M,D){var P=M.font,N=D.withFont(P);return gr(M.body,N)},mC=function(M,D){var P=M.font,N=D.withFont(P);return Ur(M.body,N)},Ev={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};vn({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=Gi(D[0]),oe=N;return oe in Ev&&(oe=Ev[oe]),{type:"font",mode:P.mode,font:oe.slice(1),body:Y}},htmlBuilder:pC,mathmlBuilder:mC}),vn({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=D[0],Y=v.isCharacterBox(N);return{type:"mclass",mode:P.mode,mclass:Av(N),body:[{type:"font",mode:P.mode,font:"boldsymbol",body:N}],isCharacterBox:Y}}}),vn({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=M.breakOnTokenText,oe=P.mode,Ce=P.parseExpression(!0,Y),$e="math"+N.slice(1);return{type:"font",mode:oe,font:$e,body:{type:"ordgroup",mode:P.mode,body:Ce}}},htmlBuilder:pC,mathmlBuilder:mC});var gC=function(M,D){var P=D;return M==="display"?P=P.id>=F.SCRIPT.id?P.text():F.DISPLAY:M==="text"&&P.size===F.DISPLAY.size?P=F.TEXT:M==="script"?P=F.SCRIPT:M==="scriptscript"&&(P=F.SCRIPTSCRIPT),P},vS=function(M,D){var P=gC(M.size,D.style),N=P.fracNum(),Y=P.fracDen(),oe;oe=D.havingStyle(N);var Ce=gr(M.numer,oe,D);if(M.continued){var $e=8.5/D.fontMetrics().ptPerEm,tt=3.5/D.fontMetrics().ptPerEm;Ce.height=Ce.height<$e?$e:Ce.height,Ce.depth=Ce.depth<tt?tt:Ce.depth}oe=D.havingStyle(Y);var bt=gr(M.denom,oe,D),Gt,sn,fn;M.hasBarLine?(M.barSize?(sn=vt(M.barSize,D),Gt=yt.makeLineSpan("frac-line",D,sn)):Gt=yt.makeLineSpan("frac-line",D),sn=Gt.height,fn=Gt.height):(Gt=null,sn=0,fn=D.fontMetrics().defaultRuleThickness);var hn,In,On;P.size===F.DISPLAY.size||M.size==="display"?(hn=D.fontMetrics().num1,sn>0?In=3*fn:In=7*fn,On=D.fontMetrics().denom1):(sn>0?(hn=D.fontMetrics().num2,In=fn):(hn=D.fontMetrics().num3,In=3*fn),On=D.fontMetrics().denom2);var ii;if(Gt){var bi=D.fontMetrics().axisHeight;hn-Ce.depth-(bi+.5*sn)<In&&(hn+=In-(hn-Ce.depth-(bi+.5*sn))),bi-.5*sn-(bt.height-On)<In&&(On+=In-(bi-.5*sn-(bt.height-On)));var Tr=-(bi-.5*sn);ii=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:bt,shift:On},{type:"elem",elem:Gt,shift:Tr},{type:"elem",elem:Ce,shift:-hn}]},D)}else{var hi=hn-Ce.depth-(bt.height-On);hi<In&&(hn+=.5*(In-hi),On+=.5*(In-hi)),ii=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:bt,shift:On},{type:"elem",elem:Ce,shift:-hn}]},D)}oe=D.havingStyle(P),ii.height*=oe.sizeMultiplier/D.sizeMultiplier,ii.depth*=oe.sizeMultiplier/D.sizeMultiplier;var zr;P.size===F.DISPLAY.size?zr=D.fontMetrics().delim1:P.size===F.SCRIPTSCRIPT.size?zr=D.havingStyle(F.SCRIPT).fontMetrics().delim2:zr=D.fontMetrics().delim2;var fs,kr;return M.leftDelim==null?fs=nd(D,["mopen"]):fs=Dr.customSizedDelim(M.leftDelim,zr,!0,D.havingStyle(P),M.mode,["mopen"]),M.continued?kr=yt.makeSpan([]):M.rightDelim==null?kr=nd(D,["mclose"]):kr=Dr.customSizedDelim(M.rightDelim,zr,!0,D.havingStyle(P),M.mode,["mclose"]),yt.makeSpan(["mord"].concat(oe.sizingClasses(D)),[fs,yt.makeSpan(["mfrac"],[ii]),kr],D)},yS=function(M,D){var P=new _n.MathNode("mfrac",[Ur(M.numer,D),Ur(M.denom,D)]);if(!M.hasBarLine)P.setAttribute("linethickness","0px");else if(M.barSize){var N=vt(M.barSize,D);P.setAttribute("linethickness",q(N))}var Y=gC(M.size,D.style);if(Y.size!==D.style.size){P=new _n.MathNode("mstyle",[P]);var oe=Y.size===F.DISPLAY.size?"true":"false";P.setAttribute("displaystyle",oe),P.setAttribute("scriptlevel","0")}if(M.leftDelim!=null||M.rightDelim!=null){var Ce=[];if(M.leftDelim!=null){var $e=new _n.MathNode("mo",[new _n.TextNode(M.leftDelim.replace("\\",""))]);$e.setAttribute("fence","true"),Ce.push($e)}if(Ce.push(P),M.rightDelim!=null){var tt=new _n.MathNode("mo",[new _n.TextNode(M.rightDelim.replace("\\",""))]);tt.setAttribute("fence","true"),Ce.push(tt)}return Ro(Ce)}return P};vn({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0],oe=D[1],Ce,$e=null,tt=null,bt="auto";switch(N){case"\\dfrac":case"\\frac":case"\\tfrac":Ce=!0;break;case"\\\\atopfrac":Ce=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":Ce=!1,$e="(",tt=")";break;case"\\\\bracefrac":Ce=!1,$e="\\{",tt="\\}";break;case"\\\\brackfrac":Ce=!1,$e="[",tt="]";break;default:throw new Error("Unrecognized genfrac command")}switch(N){case"\\dfrac":case"\\dbinom":bt="display";break;case"\\tfrac":case"\\tbinom":bt="text";break}return{type:"genfrac",mode:P.mode,continued:!1,numer:Y,denom:oe,hasBarLine:Ce,leftDelim:$e,rightDelim:tt,size:bt,barSize:null}},htmlBuilder:vS,mathmlBuilder:yS}),vn({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:function(M,D){var P=M.parser;M.funcName;var N=D[0],Y=D[1];return{type:"genfrac",mode:P.mode,continued:!0,numer:N,denom:Y,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}}),vn({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler:function(M){var D=M.parser,P=M.funcName,N=M.token,Y;switch(P){case"\\over":Y="\\frac";break;case"\\choose":Y="\\binom";break;case"\\atop":Y="\\\\atopfrac";break;case"\\brace":Y="\\\\bracefrac";break;case"\\brack":Y="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:D.mode,replaceWith:Y,token:N}}});var vC=["display","text","script","scriptscript"],yC=function(M){var D=null;return M.length>0&&(D=M,D=D==="."?null:D),D};vn({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler:function(M,D){var P=M.parser,N=D[4],Y=D[5],oe=Gi(D[0]),Ce=oe.type==="atom"&&oe.family==="open"?yC(oe.text):null,$e=Gi(D[1]),tt=$e.type==="atom"&&$e.family==="close"?yC($e.text):null,bt=Bi(D[2],"size"),Gt,sn=null;bt.isBlank?Gt=!0:(sn=bt.value,Gt=sn.number>0);var fn="auto",hn=D[3];if(hn.type==="ordgroup"){if(hn.body.length>0){var In=Bi(hn.body[0],"textord");fn=vC[Number(In.text)]}}else hn=Bi(hn,"textord"),fn=vC[Number(hn.text)];return{type:"genfrac",mode:P.mode,numer:N,denom:Y,continued:!1,hasBarLine:Gt,barSize:sn,leftDelim:Ce,rightDelim:tt,size:fn}},htmlBuilder:vS,mathmlBuilder:yS}),vn({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler:function(M,D){var P=M.parser;M.funcName;var N=M.token;return{type:"infix",mode:P.mode,replaceWith:"\\\\abovefrac",size:Bi(D[0],"size").value,token:N}}}),vn({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:function(M,D){var P=M.parser;M.funcName;var N=D[0],Y=m(Bi(D[1],"infix").size),oe=D[2],Ce=Y.number>0;return{type:"genfrac",mode:P.mode,numer:N,denom:oe,continued:!1,hasBarLine:Ce,barSize:Y,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:vS,mathmlBuilder:yS});var _C=function(M,D){var P=D.style,N,Y;M.type==="supsub"?(N=M.sup?gr(M.sup,D.havingStyle(P.sup()),D):gr(M.sub,D.havingStyle(P.sub()),D),Y=Bi(M.base,"horizBrace")):Y=Bi(M,"horizBrace");var oe=gr(Y.base,D.havingBaseStyle(F.DISPLAY)),Ce=vu.svgSpan(Y,D),$e;if(Y.isOver?($e=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:oe},{type:"kern",size:.1},{type:"elem",elem:Ce}]},D),$e.children[0].children[0].children[1].classes.push("svg-align")):($e=yt.makeVList({positionType:"bottom",positionData:oe.depth+.1+Ce.height,children:[{type:"elem",elem:Ce},{type:"kern",size:.1},{type:"elem",elem:oe}]},D),$e.children[0].children[0].children[0].classes.push("svg-align")),N){var tt=yt.makeSpan(["mord",Y.isOver?"mover":"munder"],[$e],D);Y.isOver?$e=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:tt},{type:"kern",size:.2},{type:"elem",elem:N}]},D):$e=yt.makeVList({positionType:"bottom",positionData:tt.depth+.2+N.height+N.depth,children:[{type:"elem",elem:N},{type:"kern",size:.2},{type:"elem",elem:tt}]},D)}return yt.makeSpan(["mord",Y.isOver?"mover":"munder"],[$e],D)},TR=function(M,D){var P=vu.mathMLnode(M.label);return new _n.MathNode(M.isOver?"mover":"munder",[Ur(M.base,D),P])};vn({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=M.funcName;return{type:"horizBrace",mode:P.mode,label:N,isOver:/^\\over/.test(N),base:D[0]}},htmlBuilder:_C,mathmlBuilder:TR}),vn({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:function(M,D){var P=M.parser,N=D[1],Y=Bi(D[0],"url").url;return P.settings.isTrusted({command:"\\href",url:Y})?{type:"href",mode:P.mode,href:Y,body:Ar(N)}:P.formatUnsupportedCmd("\\href")},htmlBuilder:function(M,D){var P=sa(M.body,D,!1);return yt.makeAnchor(M.href,[],P,D)},mathmlBuilder:function(M,D){var P=gc(M.body,D);return P instanceof ol||(P=new ol("mrow",[P])),P.setAttribute("href",M.href),P}}),vn({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:function(M,D){var P=M.parser,N=Bi(D[0],"url").url;if(!P.settings.isTrusted({command:"\\url",url:N}))return P.formatUnsupportedCmd("\\url");for(var Y=[],oe=0;oe<N.length;oe++){var Ce=N[oe];Ce==="~"&&(Ce="\\textasciitilde"),Y.push({type:"textord",mode:"text",text:Ce})}var $e={type:"text",mode:P.mode,font:"\\texttt",body:Y};return{type:"href",mode:P.mode,href:N,body:Ar($e)}}}),vn({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler:function(M,D){var P=M.parser;return{type:"hbox",mode:P.mode,body:Ar(D[0])}},htmlBuilder:function(M,D){var P=sa(M.body,D,!1);return yt.makeFragment(P)},mathmlBuilder:function(M,D){return new _n.MathNode("mrow",Ca(M.body,D))}}),vn({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:function(M,D){var P=M.parser,N=M.funcName;M.token;var Y=Bi(D[0],"raw").string,oe=D[1];P.settings.strict&&P.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var Ce,$e={};switch(N){case"\\htmlClass":$e.class=Y,Ce={command:"\\htmlClass",class:Y};break;case"\\htmlId":$e.id=Y,Ce={command:"\\htmlId",id:Y};break;case"\\htmlStyle":$e.style=Y,Ce={command:"\\htmlStyle",style:Y};break;case"\\htmlData":{for(var tt=Y.split(","),bt=0;bt<tt.length;bt++){var Gt=tt[bt].split("=");if(Gt.length!==2)throw new s("Error parsing key-value for \\htmlData");$e["data-"+Gt[0].trim()]=Gt[1].trim()}Ce={command:"\\htmlData",attributes:$e};break}default:throw new Error("Unrecognized html command")}return P.settings.isTrusted(Ce)?{type:"html",mode:P.mode,attributes:$e,body:Ar(oe)}:P.formatUnsupportedCmd(N)},htmlBuilder:function(M,D){var P=sa(M.body,D,!1),N=["enclosing"];M.attributes.class&&N.push.apply(N,M.attributes.class.trim().split(/\s+/));var Y=yt.makeSpan(N,P,D);for(var oe in M.attributes)oe!=="class"&&M.attributes.hasOwnProperty(oe)&&Y.setAttribute(oe,M.attributes[oe]);return Y},mathmlBuilder:function(M,D){return gc(M.body,D)}}),vn({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:function(M,D){var P=M.parser;return{type:"htmlmathml",mode:P.mode,html:Ar(D[0]),mathml:Ar(D[1])}},htmlBuilder:function(M,D){var P=sa(M.html,D,!1);return yt.makeFragment(P)},mathmlBuilder:function(M,D){return gc(M.mathml,D)}});var _S=function(M){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(M))return{number:+M,unit:"bp"};var D=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(M);if(!D)throw new s("Invalid size: '"+M+"' in \\includegraphics");var P={number:+(D[1]+D[2]),unit:D[3]};if(!wt(P))throw new s("Invalid unit: '"+P.unit+"' in \\includegraphics.");return P};vn({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:function(M,D,P){var N=M.parser,Y={number:0,unit:"em"},oe={number:.9,unit:"em"},Ce={number:0,unit:"em"},$e="";if(P[0])for(var tt=Bi(P[0],"raw").string,bt=tt.split(","),Gt=0;Gt<bt.length;Gt++){var sn=bt[Gt].split("=");if(sn.length===2){var fn=sn[1].trim();switch(sn[0].trim()){case"alt":$e=fn;break;case"width":Y=_S(fn);break;case"height":oe=_S(fn);break;case"totalheight":Ce=_S(fn);break;default:throw new s("Invalid key: '"+sn[0]+"' in \\includegraphics.")}}}var hn=Bi(D[0],"url").url;return $e===""&&($e=hn,$e=$e.replace(/^.*[\\/]/,""),$e=$e.substring(0,$e.lastIndexOf("."))),N.settings.isTrusted({command:"\\includegraphics",url:hn})?{type:"includegraphics",mode:N.mode,alt:$e,width:Y,height:oe,totalheight:Ce,src:hn}:N.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:function(M,D){var P=vt(M.height,D),N=0;M.totalheight.number>0&&(N=vt(M.totalheight,D)-P);var Y=0;M.width.number>0&&(Y=vt(M.width,D));var oe={height:q(P+N)};Y>0&&(oe.width=q(Y)),N>0&&(oe.verticalAlign=q(-N));var Ce=new Pe(M.src,M.alt,oe);return Ce.height=P,Ce.depth=N,Ce},mathmlBuilder:function(M,D){var P=new _n.MathNode("mglyph",[]);P.setAttribute("alt",M.alt);var N=vt(M.height,D),Y=0;if(M.totalheight.number>0&&(Y=vt(M.totalheight,D)-N,P.setAttribute("valign",q(-Y))),P.setAttribute("height",q(N+Y)),M.width.number>0){var oe=vt(M.width,D);P.setAttribute("width",q(oe))}return P.setAttribute("src",M.src),P}}),vn({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=Bi(D[0],"size");if(P.settings.strict){var oe=N[1]==="m",Ce=Y.value.unit==="mu";oe?(Ce||P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" supports only mu units, "+("not "+Y.value.unit+" units")),P.mode!=="math"&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" works only in math mode")):Ce&&P.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+N+" doesn't support mu units")}return{type:"kern",mode:P.mode,dimension:Y.value}},htmlBuilder:function(M,D){return yt.makeGlue(M.dimension,D)},mathmlBuilder:function(M,D){var P=vt(M.dimension,D);return new _n.SpaceNode(P)}}),vn({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"lap",mode:P.mode,alignment:N.slice(5),body:Y}},htmlBuilder:function(M,D){var P;M.alignment==="clap"?(P=yt.makeSpan([],[gr(M.body,D)]),P=yt.makeSpan(["inner"],[P],D)):P=yt.makeSpan(["inner"],[gr(M.body,D)]);var N=yt.makeSpan(["fix"],[]),Y=yt.makeSpan([M.alignment],[P,N],D),oe=yt.makeSpan(["strut"]);return oe.style.height=q(Y.height+Y.depth),Y.depth&&(oe.style.verticalAlign=q(-Y.depth)),Y.children.unshift(oe),Y=yt.makeSpan(["thinbox"],[Y],D),yt.makeSpan(["mord","vbox"],[Y],D)},mathmlBuilder:function(M,D){var P=new _n.MathNode("mpadded",[Ur(M.body,D)]);if(M.alignment!=="rlap"){var N=M.alignment==="llap"?"-1":"-0.5";P.setAttribute("lspace",N+"width")}return P.setAttribute("width","0px"),P}}),vn({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(M,D){var P=M.funcName,N=M.parser,Y=N.mode;N.switchMode("math");var oe=P==="\\("?"\\)":"$",Ce=N.parseExpression(!1,oe);return N.expect(oe),N.switchMode(Y),{type:"styling",mode:N.mode,style:"text",body:Ce}}}),vn({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler:function(M,D){throw new s("Mismatched "+M.funcName)}});var bC=function(M,D){switch(D.style.size){case F.DISPLAY.size:return M.display;case F.TEXT.size:return M.text;case F.SCRIPT.size:return M.script;case F.SCRIPTSCRIPT.size:return M.scriptscript;default:return M.text}};vn({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:function(M,D){var P=M.parser;return{type:"mathchoice",mode:P.mode,display:Ar(D[0]),text:Ar(D[1]),script:Ar(D[2]),scriptscript:Ar(D[3])}},htmlBuilder:function(M,D){var P=bC(M,D),N=sa(P,D,!1);return yt.makeFragment(N)},mathmlBuilder:function(M,D){var P=bC(M,D);return gc(P,D)}});var SC=function(M,D,P,N,Y,oe,Ce){M=yt.makeSpan([],[M]);var $e=P&&v.isCharacterBox(P),tt,bt;if(D){var Gt=gr(D,N.havingStyle(Y.sup()),N);bt={elem:Gt,kern:Math.max(N.fontMetrics().bigOpSpacing1,N.fontMetrics().bigOpSpacing3-Gt.depth)}}if(P){var sn=gr(P,N.havingStyle(Y.sub()),N);tt={elem:sn,kern:Math.max(N.fontMetrics().bigOpSpacing2,N.fontMetrics().bigOpSpacing4-sn.height)}}var fn;if(bt&&tt){var hn=N.fontMetrics().bigOpSpacing5+tt.elem.height+tt.elem.depth+tt.kern+M.depth+Ce;fn=yt.makeVList({positionType:"bottom",positionData:hn,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:tt.elem,marginLeft:q(-oe)},{type:"kern",size:tt.kern},{type:"elem",elem:M},{type:"kern",size:bt.kern},{type:"elem",elem:bt.elem,marginLeft:q(oe)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else if(tt){var In=M.height-Ce;fn=yt.makeVList({positionType:"top",positionData:In,children:[{type:"kern",size:N.fontMetrics().bigOpSpacing5},{type:"elem",elem:tt.elem,marginLeft:q(-oe)},{type:"kern",size:tt.kern},{type:"elem",elem:M}]},N)}else if(bt){var On=M.depth+Ce;fn=yt.makeVList({positionType:"bottom",positionData:On,children:[{type:"elem",elem:M},{type:"kern",size:bt.kern},{type:"elem",elem:bt.elem,marginLeft:q(oe)},{type:"kern",size:N.fontMetrics().bigOpSpacing5}]},N)}else return M;var ii=[fn];if(tt&&oe!==0&&!$e){var hi=yt.makeSpan(["mspace"],[],N);hi.style.marginRight=q(oe),ii.unshift(hi)}return yt.makeSpan(["mop","op-limits"],ii,N)},xC=["\\smallint"],Po=function(M,D){var P,N,Y=!1,oe;M.type==="supsub"?(P=M.sup,N=M.sub,oe=Bi(M.base,"op"),Y=!0):oe=Bi(M,"op");var Ce=D.style,$e=!1;Ce.size===F.DISPLAY.size&&oe.symbol&&!v.contains(xC,oe.name)&&($e=!0);var tt;if(oe.symbol){var bt=$e?"Size2-Regular":"Size1-Regular",Gt="";if((oe.name==="\\oiint"||oe.name==="\\oiiint")&&(Gt=oe.name.substr(1),oe.name=Gt==="oiint"?"\\iint":"\\iiint"),tt=yt.makeSymbol(oe.name,bt,"math",D,["mop","op-symbol",$e?"large-op":"small-op"]),Gt.length>0){var sn=tt.italic,fn=yt.staticSvg(Gt+"Size"+($e?"2":"1"),D);tt=yt.makeVList({positionType:"individualShift",children:[{type:"elem",elem:tt,shift:0},{type:"elem",elem:fn,shift:$e?.08:0}]},D),oe.name="\\"+Gt,tt.classes.unshift("mop"),tt.italic=sn}}else if(oe.body){var hn=sa(oe.body,D,!0);hn.length===1&&hn[0]instanceof dt?(tt=hn[0],tt.classes[0]="mop"):tt=yt.makeSpan(["mop"],hn,D)}else{for(var In=[],On=1;On<oe.name.length;On++)In.push(yt.mathsym(oe.name[On],oe.mode,D));tt=yt.makeSpan(["mop"],In,D)}var ii=0,hi=0;return(tt instanceof dt||oe.name==="\\oiint"||oe.name==="\\oiiint")&&!oe.suppressBaseShift&&(ii=(tt.height-tt.depth)/2-D.fontMetrics().axisHeight,hi=tt.italic),Y?SC(tt,P,N,D,Ce,hi,ii):(ii&&(tt.style.position="relative",tt.style.top=q(ii)),tt)},H0=function(M,D){var P;if(M.symbol)P=new ol("mo",[za(M.name,M.mode)]),v.contains(xC,M.name)&&P.setAttribute("largeop","false");else if(M.body)P=new ol("mo",Ca(M.body,D));else{P=new ol("mi",[new id(M.name.slice(1))]);var N=new ol("mo",[za("⁡","text")]);M.parentIsSupSub?P=new ol("mrow",[P,N]):P=KT([P,N])}return P},CR={"∏":"\\prod","∐":"\\coprod","∑":"\\sum","⋀":"\\bigwedge","⋁":"\\bigvee","⋂":"\\bigcap","⋃":"\\bigcup","⨀":"\\bigodot","⨁":"\\bigoplus","⨂":"\\bigotimes","⨄":"\\biguplus","⨆":"\\bigsqcup"};vn({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","∏","∐","∑","⋀","⋁","⋂","⋃","⨀","⨁","⨂","⨄","⨆"],props:{numArgs:0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=N;return Y.length===1&&(Y=CR[Y]),{type:"op",mode:P.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:Y}},htmlBuilder:Po,mathmlBuilder:H0}),vn({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:function(M,D){var P=M.parser,N=D[0];return{type:"op",mode:P.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:Ar(N)}},htmlBuilder:Po,mathmlBuilder:H0});var AR={"∫":"\\int","∬":"\\iint","∭":"\\iiint","∮":"\\oint","∯":"\\oiint","∰":"\\oiiint"};vn({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler:function(M){var D=M.parser,P=M.funcName;return{type:"op",mode:D.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:Po,mathmlBuilder:H0}),vn({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler:function(M){var D=M.parser,P=M.funcName;return{type:"op",mode:D.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:P}},htmlBuilder:Po,mathmlBuilder:H0}),vn({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","∫","∬","∭","∮","∯","∰"],props:{numArgs:0},handler:function(M){var D=M.parser,P=M.funcName,N=P;return N.length===1&&(N=AR[N]),{type:"op",mode:D.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:N}},htmlBuilder:Po,mathmlBuilder:H0});var ER={};function He(se,M){ER[se]=M}var Mv=function(M,D){var P,N,Y=!1,oe;M.type==="supsub"?(P=M.sup,N=M.sub,oe=Bi(M.base,"operatorname"),Y=!0):oe=Bi(M,"operatorname");var Ce;if(oe.body.length>0){for(var $e=oe.body.map(function(sn){var fn=sn.text;return typeof fn=="string"?{type:"textord",mode:sn.mode,text:fn}:sn}),tt=sa($e,D.withFont("mathrm"),!0),bt=0;bt<tt.length;bt++){var Gt=tt[bt];Gt instanceof dt&&(Gt.text=Gt.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}Ce=yt.makeSpan(["mop"],tt,D)}else Ce=yt.makeSpan(["mop"],[],D);return Y?SC(Ce,P,N,D,D.style,0,0):Ce},wC=function(M,D){for(var P=Ca(M.body,D.withFont("mathrm")),N=!0,Y=0;Y<P.length;Y++){var oe=P[Y];if(!(oe instanceof _n.SpaceNode))if(oe instanceof _n.MathNode)switch(oe.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var Ce=oe.children[0];oe.children.length===1&&Ce instanceof _n.TextNode?Ce.text=Ce.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):N=!1;break}default:N=!1}else N=!1}if(N){var $e=P.map(function(Gt){return Gt.toText()}).join("");P=[new _n.TextNode($e)]}var tt=new _n.MathNode("mi",P);tt.setAttribute("mathvariant","normal");var bt=new _n.MathNode("mo",[za("⁡","text")]);return M.parentIsSupSub?new _n.MathNode("mrow",[tt,bt]):_n.newDocumentFragment([tt,bt])};vn({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"operatorname",mode:P.mode,body:Ar(Y),alwaysHandleSupSub:N==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Mv,mathmlBuilder:wC}),He("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@"),zi({type:"ordgroup",htmlBuilder:function(M,D){return M.semisimple?yt.makeFragment(sa(M.body,D,!1)):yt.makeSpan(["mord"],sa(M.body,D,!0),D)},mathmlBuilder:function(M,D){return gc(M.body,D,!0)}}),vn({type:"overline",names:["\\overline"],props:{numArgs:1},handler:function(M,D){var P=M.parser,N=D[0];return{type:"overline",mode:P.mode,body:N}},htmlBuilder:function(M,D){var P=gr(M.body,D.havingCrampedStyle()),N=yt.makeLineSpan("overline-line",D),Y=D.fontMetrics().defaultRuleThickness,oe=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P},{type:"kern",size:3*Y},{type:"elem",elem:N},{type:"kern",size:Y}]},D);return yt.makeSpan(["mord","overline"],[oe],D)},mathmlBuilder:function(M,D){var P=new _n.MathNode("mo",[new _n.TextNode("‾")]);P.setAttribute("stretchy","true");var N=new _n.MathNode("mover",[Ur(M.body,D),P]);return N.setAttribute("accent","true"),N}}),vn({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var P=M.parser,N=D[0];return{type:"phantom",mode:P.mode,body:Ar(N)}},htmlBuilder:function(M,D){var P=sa(M.body,D.withPhantom(),!1);return yt.makeFragment(P)},mathmlBuilder:function(M,D){var P=Ca(M.body,D);return new _n.MathNode("mphantom",P)}}),vn({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var P=M.parser,N=D[0];return{type:"hphantom",mode:P.mode,body:N}},htmlBuilder:function(M,D){var P=yt.makeSpan([],[gr(M.body,D.withPhantom())]);if(P.height=0,P.depth=0,P.children)for(var N=0;N<P.children.length;N++)P.children[N].height=0,P.children[N].depth=0;return P=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},D),yt.makeSpan(["mord"],[P],D)},mathmlBuilder:function(M,D){var P=Ca(Ar(M.body),D),N=new _n.MathNode("mphantom",P),Y=new _n.MathNode("mpadded",[N]);return Y.setAttribute("height","0px"),Y.setAttribute("depth","0px"),Y}}),vn({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var P=M.parser,N=D[0];return{type:"vphantom",mode:P.mode,body:N}},htmlBuilder:function(M,D){var P=yt.makeSpan(["inner"],[gr(M.body,D.withPhantom())]),N=yt.makeSpan(["fix"],[]);return yt.makeSpan(["mord","rlap"],[P,N],D)},mathmlBuilder:function(M,D){var P=Ca(Ar(M.body),D),N=new _n.MathNode("mphantom",P),Y=new _n.MathNode("mpadded",[N]);return Y.setAttribute("width","0px"),Y}}),vn({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler:function(M,D){var P=M.parser,N=Bi(D[0],"size").value,Y=D[1];return{type:"raisebox",mode:P.mode,dy:N,body:Y}},htmlBuilder:function(M,D){var P=gr(M.body,D),N=vt(M.dy,D);return yt.makeVList({positionType:"shift",positionData:-N,children:[{type:"elem",elem:P}]},D)},mathmlBuilder:function(M,D){var P=new _n.MathNode("mpadded",[Ur(M.body,D)]),N=M.dy.number+M.dy.unit;return P.setAttribute("voffset",N),P}}),vn({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler:function(M,D,P){var N=M.parser,Y=P[0],oe=Bi(D[0],"size"),Ce=Bi(D[1],"size");return{type:"rule",mode:N.mode,shift:Y&&Bi(Y,"size").value,width:oe.value,height:Ce.value}},htmlBuilder:function(M,D){var P=yt.makeSpan(["mord","rule"],[],D),N=vt(M.width,D),Y=vt(M.height,D),oe=M.shift?vt(M.shift,D):0;return P.style.borderRightWidth=q(N),P.style.borderTopWidth=q(Y),P.style.bottom=q(oe),P.width=N,P.height=Y+oe,P.depth=-oe,P.maxFontSize=Y*1.125*D.sizeMultiplier,P},mathmlBuilder:function(M,D){var P=vt(M.width,D),N=vt(M.height,D),Y=M.shift?vt(M.shift,D):0,oe=D.color&&D.getColor()||"black",Ce=new _n.MathNode("mspace");Ce.setAttribute("mathbackground",oe),Ce.setAttribute("width",q(P)),Ce.setAttribute("height",q(N));var $e=new _n.MathNode("mpadded",[Ce]);return Y>=0?$e.setAttribute("height",q(Y)):($e.setAttribute("height",q(Y)),$e.setAttribute("depth",q(-Y))),$e.setAttribute("voffset",q(Y)),$e}});function V0(se,M,D){for(var P=sa(se,M,!1),N=M.sizeMultiplier/D.sizeMultiplier,Y=0;Y<P.length;Y++){var oe=P[Y].classes.indexOf("sizing");oe<0?Array.prototype.push.apply(P[Y].classes,M.sizingClasses(D)):P[Y].classes[oe+1]==="reset-size"+M.size&&(P[Y].classes[oe+1]="reset-size"+D.size),P[Y].height*=N,P[Y].depth*=N}return yt.makeFragment(P)}var $0=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],MR=function(M,D){var P=D.havingSize(M.size);return V0(M.body,P,D)};vn({type:"sizing",names:$0,props:{numArgs:0,allowedInText:!0},handler:function(M,D){var P=M.breakOnTokenText,N=M.funcName,Y=M.parser,oe=Y.parseExpression(!1,P);return{type:"sizing",mode:Y.mode,size:$0.indexOf(N)+1,body:oe}},htmlBuilder:MR,mathmlBuilder:function(M,D){var P=D.havingSize(M.size),N=Ca(M.body,P),Y=new _n.MathNode("mstyle",N);return Y.setAttribute("mathsize",q(P.sizeMultiplier)),Y}}),vn({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:function(M,D,P){var N=M.parser,Y=!1,oe=!1,Ce=P[0]&&Bi(P[0],"ordgroup");if(Ce)for(var $e="",tt=0;tt<Ce.body.length;++tt){var bt=Ce.body[tt];if($e=bt.text,$e==="t")Y=!0;else if($e==="b")oe=!0;else{Y=!1,oe=!1;break}}else Y=!0,oe=!0;var Gt=D[0];return{type:"smash",mode:N.mode,body:Gt,smashHeight:Y,smashDepth:oe}},htmlBuilder:function(M,D){var P=yt.makeSpan([],[gr(M.body,D)]);if(!M.smashHeight&&!M.smashDepth)return P;if(M.smashHeight&&(P.height=0,P.children))for(var N=0;N<P.children.length;N++)P.children[N].height=0;if(M.smashDepth&&(P.depth=0,P.children))for(var Y=0;Y<P.children.length;Y++)P.children[Y].depth=0;var oe=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P}]},D);return yt.makeSpan(["mord"],[oe],D)},mathmlBuilder:function(M,D){var P=new _n.MathNode("mpadded",[Ur(M.body,D)]);return M.smashHeight&&P.setAttribute("height","0px"),M.smashDepth&&P.setAttribute("depth","0px"),P}}),vn({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler:function(M,D,P){var N=M.parser,Y=P[0],oe=D[0];return{type:"sqrt",mode:N.mode,body:oe,index:Y}},htmlBuilder:function(M,D){var P=gr(M.body,D.havingCrampedStyle());P.height===0&&(P.height=D.fontMetrics().xHeight),P=yt.wrapFragment(P,D);var N=D.fontMetrics(),Y=N.defaultRuleThickness,oe=Y;D.style.id<F.TEXT.id&&(oe=D.fontMetrics().xHeight);var Ce=Y+oe/4,$e=P.height+P.depth+Ce+Y,tt=Dr.sqrtImage($e,D),bt=tt.span,Gt=tt.ruleWidth,sn=tt.advanceWidth,fn=bt.height-Gt;fn>P.height+P.depth+Ce&&(Ce=(Ce+fn-P.height-P.depth)/2);var hn=bt.height-P.height-Ce-Gt;P.style.paddingLeft=q(sn);var In=yt.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:P,wrapperClasses:["svg-align"]},{type:"kern",size:-(P.height+hn)},{type:"elem",elem:bt},{type:"kern",size:Gt}]},D);if(M.index){var On=D.havingStyle(F.SCRIPTSCRIPT),ii=gr(M.index,On,D),hi=.6*(In.height-In.depth),bi=yt.makeVList({positionType:"shift",positionData:-hi,children:[{type:"elem",elem:ii}]},D),Tr=yt.makeSpan(["root"],[bi]);return yt.makeSpan(["mord","sqrt"],[Tr,In],D)}else return yt.makeSpan(["mord","sqrt"],[In],D)},mathmlBuilder:function(M,D){var P=M.body,N=M.index;return N?new _n.MathNode("mroot",[Ur(P,D),Ur(N,D)]):new _n.MathNode("msqrt",[Ur(P,D)])}});var TC={display:F.DISPLAY,text:F.TEXT,script:F.SCRIPT,scriptscript:F.SCRIPTSCRIPT};vn({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler:function(M,D){var P=M.breakOnTokenText,N=M.funcName,Y=M.parser,oe=Y.parseExpression(!0,P),Ce=N.slice(1,N.length-5);return{type:"styling",mode:Y.mode,style:Ce,body:oe}},htmlBuilder:function(M,D){var P=TC[M.style],N=D.havingStyle(P).withFont("");return V0(M.body,N,D)},mathmlBuilder:function(M,D){var P=TC[M.style],N=D.havingStyle(P),Y=Ca(M.body,N),oe=new _n.MathNode("mstyle",Y),Ce={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},$e=Ce[M.style];return oe.setAttribute("scriptlevel",$e[0]),oe.setAttribute("displaystyle",$e[1]),oe}});var IR=function(M,D){var P=M.base;if(P)if(P.type==="op"){var N=P.limits&&(D.style.size===F.DISPLAY.size||P.alwaysHandleSupSub);return N?Po:null}else if(P.type==="operatorname"){var Y=P.alwaysHandleSupSub&&(D.style.size===F.DISPLAY.size||P.limits);return Y?Mv:null}else{if(P.type==="accent")return v.isCharacterBox(P.base)?nS:null;if(P.type==="horizBrace"){var oe=!M.sub;return oe===P.isOver?_C:null}else return null}else return null};zi({type:"supsub",htmlBuilder:function(M,D){var P=IR(M,D);if(P)return P(M,D);var N=M.base,Y=M.sup,oe=M.sub,Ce=gr(N,D),$e,tt,bt=D.fontMetrics(),Gt=0,sn=0,fn=N&&v.isCharacterBox(N);if(Y){var hn=D.havingStyle(D.style.sup());$e=gr(Y,hn,D),fn||(Gt=Ce.height-hn.fontMetrics().supDrop*hn.sizeMultiplier/D.sizeMultiplier)}if(oe){var In=D.havingStyle(D.style.sub());tt=gr(oe,In,D),fn||(sn=Ce.depth+In.fontMetrics().subDrop*In.sizeMultiplier/D.sizeMultiplier)}var On;D.style===F.DISPLAY?On=bt.sup1:D.style.cramped?On=bt.sup3:On=bt.sup2;var ii=D.sizeMultiplier,hi=q(.5/bt.ptPerEm/ii),bi=null;if(tt){var Tr=M.base&&M.base.type==="op"&&M.base.name&&(M.base.name==="\\oiint"||M.base.name==="\\oiiint");(Ce instanceof dt||Tr)&&(bi=q(-Ce.italic))}var zr;if($e&&tt){Gt=Math.max(Gt,On,$e.depth+.25*bt.xHeight),sn=Math.max(sn,bt.sub2);var fs=bt.defaultRuleThickness,kr=4*fs;if(Gt-$e.depth-(tt.height-sn)<kr){sn=kr-(Gt-$e.depth)+tt.height;var Hr=.8*bt.xHeight-(Gt-$e.depth);Hr>0&&(Gt+=Hr,sn-=Hr)}var Bs=[{type:"elem",elem:tt,shift:sn,marginRight:hi,marginLeft:bi},{type:"elem",elem:$e,shift:-Gt,marginRight:hi}];zr=yt.makeVList({positionType:"individualShift",children:Bs},D)}else if(tt){sn=Math.max(sn,bt.sub1,tt.height-.8*bt.xHeight);var Zr=[{type:"elem",elem:tt,marginLeft:bi,marginRight:hi}];zr=yt.makeVList({positionType:"shift",positionData:sn,children:Zr},D)}else if($e)Gt=Math.max(Gt,On,$e.depth+.25*bt.xHeight),zr=yt.makeVList({positionType:"shift",positionData:-Gt,children:[{type:"elem",elem:$e,marginRight:hi}]},D);else throw new Error("supsub must have either sup or sub.");var Hl=mv(Ce,"right")||"mord";return yt.makeSpan([Hl],[Ce,yt.makeSpan(["msupsub"],[zr])],D)},mathmlBuilder:function(M,D){var P=!1,N,Y;M.base&&M.base.type==="horizBrace"&&(Y=!!M.sup,Y===M.base.isOver&&(P=!0,N=M.base.isOver)),M.base&&(M.base.type==="op"||M.base.type==="operatorname")&&(M.base.parentIsSupSub=!0);var oe=[Ur(M.base,D)];M.sub&&oe.push(Ur(M.sub,D)),M.sup&&oe.push(Ur(M.sup,D));var Ce;if(P)Ce=N?"mover":"munder";else if(M.sub)if(M.sup){var bt=M.base;bt&&bt.type==="op"&&bt.limits&&D.style===F.DISPLAY||bt&&bt.type==="operatorname"&&bt.alwaysHandleSupSub&&(D.style===F.DISPLAY||bt.limits)?Ce="munderover":Ce="msubsup"}else{var tt=M.base;tt&&tt.type==="op"&&tt.limits&&(D.style===F.DISPLAY||tt.alwaysHandleSupSub)||tt&&tt.type==="operatorname"&&tt.alwaysHandleSupSub&&(tt.limits||D.style===F.DISPLAY)?Ce="munder":Ce="msub"}else{var $e=M.base;$e&&$e.type==="op"&&$e.limits&&(D.style===F.DISPLAY||$e.alwaysHandleSupSub)||$e&&$e.type==="operatorname"&&$e.alwaysHandleSupSub&&($e.limits||D.style===F.DISPLAY)?Ce="mover":Ce="msup"}return new _n.MathNode(Ce,oe)}}),zi({type:"atom",htmlBuilder:function(M,D){return yt.mathsym(M.text,M.mode,D,["m"+M.family])},mathmlBuilder:function(M,D){var P=new _n.MathNode("mo",[za(M.text,M.mode)]);if(M.family==="bin"){var N=Bl(M,D);N==="bold-italic"&&P.setAttribute("mathvariant",N)}else M.family==="punct"?P.setAttribute("separator","true"):(M.family==="open"||M.family==="close")&&P.setAttribute("stretchy","false");return P}});var CC={mi:"italic",mn:"normal",mtext:"normal"};zi({type:"mathord",htmlBuilder:function(M,D){return yt.makeOrd(M,D,"mathord")},mathmlBuilder:function(M,D){var P=new _n.MathNode("mi",[za(M.text,M.mode,D)]),N=Bl(M,D)||"italic";return N!==CC[P.type]&&P.setAttribute("mathvariant",N),P}}),zi({type:"textord",htmlBuilder:function(M,D){return yt.makeOrd(M,D,"textord")},mathmlBuilder:function(M,D){var P=za(M.text,M.mode,D),N=Bl(M,D)||"normal",Y;return M.mode==="text"?Y=new _n.MathNode("mtext",[P]):/[0-9]/.test(M.text)?Y=new _n.MathNode("mn",[P]):M.text==="\\prime"?Y=new _n.MathNode("mo",[P]):Y=new _n.MathNode("mi",[P]),N!==CC[Y.type]&&Y.setAttribute("mathvariant",N),Y}});var bS={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},G0={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};zi({type:"spacing",htmlBuilder:function(M,D){if(G0.hasOwnProperty(M.text)){var P=G0[M.text].className||"";if(M.mode==="text"){var N=yt.makeOrd(M,D,"textord");return N.classes.push(P),N}else return yt.makeSpan(["mspace",P],[yt.mathsym(M.text,M.mode,D)],D)}else{if(bS.hasOwnProperty(M.text))return yt.makeSpan(["mspace",bS[M.text]],[],D);throw new s('Unknown type of space "'+M.text+'"')}},mathmlBuilder:function(M,D){var P;if(G0.hasOwnProperty(M.text))P=new _n.MathNode("mtext",[new _n.TextNode(" ")]);else{if(bS.hasOwnProperty(M.text))return new _n.MathNode("mspace");throw new s('Unknown type of space "'+M.text+'"')}return P}});var AC=function(){var M=new _n.MathNode("mtd",[]);return M.setAttribute("width","50%"),M};zi({type:"tag",mathmlBuilder:function(M,D){var P=new _n.MathNode("mtable",[new _n.MathNode("mtr",[AC(),new _n.MathNode("mtd",[gc(M.body,D)]),AC(),new _n.MathNode("mtd",[gc(M.tag,D)])])]);return P.setAttribute("width","100%"),P}});var EC={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},SS={"\\textbf":"textbf","\\textmd":"textmd"},kh={"\\textit":"textit","\\textup":"textup"},Er=function(M,D){var P=M.font;return P?EC[P]?D.withTextFontFamily(EC[P]):SS[P]?D.withTextFontWeight(SS[P]):D.withTextFontShape(kh[P]):D};vn({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler:function(M,D){var P=M.parser,N=M.funcName,Y=D[0];return{type:"text",mode:P.mode,body:Ar(Y),font:N}},htmlBuilder:function(M,D){var P=Er(M,D),N=sa(M.body,P,!0);return yt.makeSpan(["mord","text"],N,P)},mathmlBuilder:function(M,D){var P=Er(M,D);return gc(M.body,P)}}),vn({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler:function(M,D){var P=M.parser;return{type:"underline",mode:P.mode,body:D[0]}},htmlBuilder:function(M,D){var P=gr(M.body,D),N=yt.makeLineSpan("underline-line",D),Y=D.fontMetrics().defaultRuleThickness,oe=yt.makeVList({positionType:"top",positionData:P.height,children:[{type:"kern",size:Y},{type:"elem",elem:N},{type:"kern",size:3*Y},{type:"elem",elem:P}]},D);return yt.makeSpan(["mord","underline"],[oe],D)},mathmlBuilder:function(M,D){var P=new _n.MathNode("mo",[new _n.TextNode("‾")]);P.setAttribute("stretchy","true");var N=new _n.MathNode("munder",[Ur(M.body,D),P]);return N.setAttribute("accentunder","true"),N}}),vn({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler:function(M,D){var P=M.parser;return{type:"vcenter",mode:P.mode,body:D[0]}},htmlBuilder:function(M,D){var P=gr(M.body,D),N=D.fontMetrics().axisHeight,Y=.5*(P.height-N-(P.depth+N));return yt.makeVList({positionType:"shift",positionData:Y,children:[{type:"elem",elem:P}]},D)},mathmlBuilder:function(M,D){return new _n.MathNode("mpadded",[Ur(M.body,D)],["vcenter"])}}),vn({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler:function(M,D,P){throw new s("\\verb ended by end of line instead of matching delimiter")},htmlBuilder:function(M,D){for(var P=rd(M),N=[],Y=D.havingStyle(D.style.text()),oe=0;oe<P.length;oe++){var Ce=P[oe];Ce==="~"&&(Ce="\\textasciitilde"),N.push(yt.makeSymbol(Ce,"Typewriter-Regular",M.mode,Y,["mord","texttt"]))}return yt.makeSpan(["mord","text"].concat(Y.sizingClasses(D)),yt.tryCombineChars(N),Y)},mathmlBuilder:function(M,D){var P=new _n.TextNode(rd(M)),N=new _n.MathNode("mtext",[P]);return N.setAttribute("mathvariant","monospace"),N}});var rd=function(M){return M.body.replace(/ /g,M.star?"␣":" ")},Ha=li,aa=Ha,zl=function(){function se(M,D,P){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=M,this.start=D,this.end=P}return se.range=function(D,P){return P?!D||!D.loc||!P.loc||D.loc.lexer!==P.loc.lexer?null:new se(D.loc.lexer,D.loc.start,P.loc.end):D&&D.loc},se}(),sd=function(){function se(D,P){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=D,this.loc=P}var M=se.prototype;return M.range=function(P,N){return new se(N,zl.range(this,P))},se}(),MC=`[ \r
	]`,DR="\\\\[a-zA-Z@]+",RR="\\\\[^\uD800-\uDFFF]",PR="("+DR+")"+MC+"*",kR=`\\\\(
|[ \r	]+
?)[ \r	]*`,xS="[̀-ͯ]",LR=new RegExp(xS+"+$"),IC="("+MC+"+)|"+(kR+"|")+"([!-\\[\\]-‧‪-퟿豈-￿]"+(xS+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(xS+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+PR)+("|"+RR+")"),R=function(){function se(D,P){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=D,this.settings=P,this.tokenRegex=new RegExp(IC,"g"),this.catcodes={"%":14,"~":13}}var M=se.prototype;return M.setCatcode=function(P,N){this.catcodes[P]=N},M.lex=function(){var P=this.input,N=this.tokenRegex.lastIndex;if(N===P.length)return new sd("EOF",new zl(this,N,N));var Y=this.tokenRegex.exec(P);if(Y===null||Y.index!==N)throw new s("Unexpected character: '"+P[N]+"'",new sd(P[N],new zl(this,N,N+1)));var oe=Y[6]||Y[3]||(Y[2]?"\\ ":" ");if(this.catcodes[oe]===14){var Ce=P.indexOf(`
`,this.tokenRegex.lastIndex);return Ce===-1?(this.tokenRegex.lastIndex=P.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=Ce+1,this.lex()}return new sd(oe,new zl(this,N,this.tokenRegex.lastIndex))},se}(),B=function(){function se(D,P){D===void 0&&(D={}),P===void 0&&(P={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=P,this.builtins=D,this.undefStack=[]}var M=se.prototype;return M.beginGroup=function(){this.undefStack.push({})},M.endGroup=function(){if(this.undefStack.length===0)throw new s("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var P=this.undefStack.pop();for(var N in P)P.hasOwnProperty(N)&&(P[N]===void 0?delete this.current[N]:this.current[N]=P[N])},M.endGroups=function(){for(;this.undefStack.length>0;)this.endGroup()},M.has=function(P){return this.current.hasOwnProperty(P)||this.builtins.hasOwnProperty(P)},M.get=function(P){return this.current.hasOwnProperty(P)?this.current[P]:this.builtins[P]},M.set=function(P,N,Y){if(Y===void 0&&(Y=!1),Y){for(var oe=0;oe<this.undefStack.length;oe++)delete this.undefStack[oe][P];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][P]=N)}else{var Ce=this.undefStack[this.undefStack.length-1];Ce&&!Ce.hasOwnProperty(P)&&(Ce[P]=this.current[P])}this.current[P]=N},se}(),V=ER,$=V;He("\\noexpand",function(se){var M=se.popToken();return se.isExpandable(M.text)&&(M.noexpand=!0,M.treatAsRelax=!0),{tokens:[M],numArgs:0}}),He("\\expandafter",function(se){var M=se.popToken();return se.expandOnce(!0),{tokens:[M],numArgs:0}}),He("\\@firstoftwo",function(se){var M=se.consumeArgs(2);return{tokens:M[0],numArgs:0}}),He("\\@secondoftwo",function(se){var M=se.consumeArgs(2);return{tokens:M[1],numArgs:0}}),He("\\@ifnextchar",function(se){var M=se.consumeArgs(3);se.consumeSpaces();var D=se.future();return M[0].length===1&&M[0][0].text===D.text?{tokens:M[1],numArgs:0}:{tokens:M[2],numArgs:0}}),He("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}"),He("\\TextOrMath",function(se){var M=se.consumeArgs(2);return se.mode==="text"?{tokens:M[0],numArgs:0}:{tokens:M[1],numArgs:0}});var Z={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};He("\\char",function(se){var M=se.popToken(),D,P="";if(M.text==="'")D=8,M=se.popToken();else if(M.text==='"')D=16,M=se.popToken();else if(M.text==="`")if(M=se.popToken(),M.text[0]==="\\")P=M.text.charCodeAt(1);else{if(M.text==="EOF")throw new s("\\char` missing argument");P=M.text.charCodeAt(0)}else D=10;if(D){if(P=Z[M.text],P==null||P>=D)throw new s("Invalid base-"+D+" digit "+M.text);for(var N;(N=Z[se.future().text])!=null&&N<D;)P*=D,P+=N,se.popToken()}return"\\@char{"+P+"}"});var fe=function(M,D,P){var N=M.consumeArg().tokens;if(N.length!==1)throw new s("\\newcommand's first argument must be a macro name");var Y=N[0].text,oe=M.isDefined(Y);if(oe&&!D)throw new s("\\newcommand{"+Y+"} attempting to redefine "+(Y+"; use \\renewcommand"));if(!oe&&!P)throw new s("\\renewcommand{"+Y+"} when command "+Y+" does not yet exist; use \\newcommand");var Ce=0;if(N=M.consumeArg().tokens,N.length===1&&N[0].text==="["){for(var $e="",tt=M.expandNextToken();tt.text!=="]"&&tt.text!=="EOF";)$e+=tt.text,tt=M.expandNextToken();if(!$e.match(/^\s*[0-9]+\s*$/))throw new s("Invalid number of arguments: "+$e);Ce=parseInt($e),N=M.consumeArg().tokens}return M.macros.set(Y,{tokens:N,numArgs:Ce}),""};He("\\newcommand",function(se){return fe(se,!1,!0)}),He("\\renewcommand",function(se){return fe(se,!0,!1)}),He("\\providecommand",function(se){return fe(se,!0,!0)}),He("\\message",function(se){var M=se.consumeArgs(1)[0];return console.log(M.reverse().map(function(D){return D.text}).join("")),""}),He("\\errmessage",function(se){var M=se.consumeArgs(1)[0];return console.error(M.reverse().map(function(D){return D.text}).join("")),""}),He("\\show",function(se){var M=se.popToken(),D=M.text;return console.log(M,se.macros.get(D),aa[D],fi.math[D],fi.text[D]),""}),He("\\bgroup","{"),He("\\egroup","}"),He("~","\\nobreakspace"),He("\\lq","`"),He("\\rq","'"),He("\\aa","\\r a"),He("\\AA","\\r A"),He("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`©}"),He("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}"),He("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`®}"),He("ℬ","\\mathscr{B}"),He("ℰ","\\mathscr{E}"),He("ℱ","\\mathscr{F}"),He("ℋ","\\mathscr{H}"),He("ℐ","\\mathscr{I}"),He("ℒ","\\mathscr{L}"),He("ℳ","\\mathscr{M}"),He("ℛ","\\mathscr{R}"),He("ℭ","\\mathfrak{C}"),He("ℌ","\\mathfrak{H}"),He("ℨ","\\mathfrak{Z}"),He("\\Bbbk","\\Bbb{k}"),He("·","\\cdotp"),He("\\llap","\\mathllap{\\textrm{#1}}"),He("\\rlap","\\mathrlap{\\textrm{#1}}"),He("\\clap","\\mathclap{\\textrm{#1}}"),He("\\mathstrut","\\vphantom{(}"),He("\\underbar","\\underline{\\text{#1}}"),He("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}'),He("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`≠}}"),He("\\ne","\\neq"),He("≠","\\neq"),He("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`∉}}"),He("∉","\\notin"),He("≘","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`≘}}"),He("≙","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`≘}}"),He("≚","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`≚}}"),He("≛","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`≛}}"),He("≝","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`≝}}"),He("≞","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`≞}}"),He("≟","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`≟}}"),He("⟂","\\perp"),He("‼","\\mathclose{!\\mkern-0.8mu!}"),He("∌","\\notni"),He("⌜","\\ulcorner"),He("⌝","\\urcorner"),He("⌞","\\llcorner"),He("⌟","\\lrcorner"),He("©","\\copyright"),He("®","\\textregistered"),He("️","\\textregistered"),He("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}'),He("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}'),He("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}'),He("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}'),He("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}"),He("⋮","\\vdots"),He("\\varGamma","\\mathit{\\Gamma}"),He("\\varDelta","\\mathit{\\Delta}"),He("\\varTheta","\\mathit{\\Theta}"),He("\\varLambda","\\mathit{\\Lambda}"),He("\\varXi","\\mathit{\\Xi}"),He("\\varPi","\\mathit{\\Pi}"),He("\\varSigma","\\mathit{\\Sigma}"),He("\\varUpsilon","\\mathit{\\Upsilon}"),He("\\varPhi","\\mathit{\\Phi}"),He("\\varPsi","\\mathit{\\Psi}"),He("\\varOmega","\\mathit{\\Omega}"),He("\\substack","\\begin{subarray}{c}#1\\end{subarray}"),He("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu"),He("\\boxed","\\fbox{$\\displaystyle{#1}$}"),He("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;"),He("\\implies","\\DOTSB\\;\\Longrightarrow\\;"),He("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var Ve={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};He("\\dots",function(se){var M="\\dotso",D=se.expandAfterFuture().text;return D in Ve?M=Ve[D]:(D.substr(0,4)==="\\not"||D in fi.math&&v.contains(["bin","rel"],fi.math[D].group))&&(M="\\dotsb"),M});var Qe={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};He("\\dotso",function(se){var M=se.future().text;return M in Qe?"\\ldots\\,":"\\ldots"}),He("\\dotsc",function(se){var M=se.future().text;return M in Qe&&M!==","?"\\ldots\\,":"\\ldots"}),He("\\cdots",function(se){var M=se.future().text;return M in Qe?"\\@cdots\\,":"\\@cdots"}),He("\\dotsb","\\cdots"),He("\\dotsm","\\cdots"),He("\\dotsi","\\!\\cdots"),He("\\dotsx","\\ldots\\,"),He("\\DOTSI","\\relax"),He("\\DOTSB","\\relax"),He("\\DOTSX","\\relax"),He("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax"),He("\\,","\\tmspace+{3mu}{.1667em}"),He("\\thinspace","\\,"),He("\\>","\\mskip{4mu}"),He("\\:","\\tmspace+{4mu}{.2222em}"),He("\\medspace","\\:"),He("\\;","\\tmspace+{5mu}{.2777em}"),He("\\thickspace","\\;"),He("\\!","\\tmspace-{3mu}{.1667em}"),He("\\negthinspace","\\!"),He("\\negmedspace","\\tmspace-{4mu}{.2222em}"),He("\\negthickspace","\\tmspace-{5mu}{.277em}"),He("\\enspace","\\kern.5em "),He("\\enskip","\\hskip.5em\\relax"),He("\\quad","\\hskip1em\\relax"),He("\\qquad","\\hskip2em\\relax"),He("\\tag","\\@ifstar\\tag@literal\\tag@paren"),He("\\tag@paren","\\tag@literal{({#1})}"),He("\\tag@literal",function(se){if(se.macros.get("\\df@tag"))throw new s("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"}),He("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}"),He("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)"),He("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}"),He("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1"),He("\\pmb","\\html@mathml{\\@binrel{#1}{\\mathrlap{#1}\\kern0.5px#1}}{\\mathbf{#1}}"),He("\\newline","\\\\\\relax"),He("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var lt=q(Fe["Main-Regular"]["T".charCodeAt(0)][1]-.7*Fe["Main-Regular"]["A".charCodeAt(0)][1]);He("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+lt+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}"),He("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+lt+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}"),He("\\hspace","\\@ifstar\\@hspacer\\@hspace"),He("\\@hspace","\\hskip #1\\relax"),He("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax"),He("\\ordinarycolon",":"),He("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}"),He("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}'),He("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}'),He("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}'),He("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}'),He("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}'),He("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}'),He("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}'),He("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}'),He("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}'),He("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}'),He("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}'),He("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}'),He("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}'),He("∷","\\dblcolon"),He("∹","\\eqcolon"),He("≔","\\coloneqq"),He("≕","\\eqqcolon"),He("⩴","\\Coloneqq"),He("\\ratio","\\vcentcolon"),He("\\coloncolon","\\dblcolon"),He("\\colonequals","\\coloneqq"),He("\\coloncolonequals","\\Coloneqq"),He("\\equalscolon","\\eqqcolon"),He("\\equalscoloncolon","\\Eqqcolon"),He("\\colonminus","\\coloneq"),He("\\coloncolonminus","\\Coloneq"),He("\\minuscolon","\\eqcolon"),He("\\minuscoloncolon","\\Eqcolon"),He("\\coloncolonapprox","\\Colonapprox"),He("\\coloncolonsim","\\Colonsim"),He("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),He("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}"),He("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}"),He("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}"),He("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`∌}}"),He("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}"),He("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}"),He("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}"),He("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}"),He("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}"),He("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}"),He("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}"),He("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}"),He("\\gvertneqq","\\html@mathml{\\@gvertneqq}{≩}"),He("\\lvertneqq","\\html@mathml{\\@lvertneqq}{≨}"),He("\\ngeqq","\\html@mathml{\\@ngeqq}{≱}"),He("\\ngeqslant","\\html@mathml{\\@ngeqslant}{≱}"),He("\\nleqq","\\html@mathml{\\@nleqq}{≰}"),He("\\nleqslant","\\html@mathml{\\@nleqslant}{≰}"),He("\\nshortmid","\\html@mathml{\\@nshortmid}{∤}"),He("\\nshortparallel","\\html@mathml{\\@nshortparallel}{∦}"),He("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{⊈}"),He("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{⊉}"),He("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{⊊}"),He("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{⫋}"),He("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{⊋}"),He("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{⫌}"),He("\\imath","\\html@mathml{\\@imath}{ı}"),He("\\jmath","\\html@mathml{\\@jmath}{ȷ}"),He("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`⟦}}"),He("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`⟧}}"),He("⟦","\\llbracket"),He("⟧","\\rrbracket"),He("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`⦃}}"),He("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`⦄}}"),He("⦃","\\lBrace"),He("⦄","\\rBrace"),He("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`⦵}}"),He("⦵","\\minuso"),He("\\darr","\\downarrow"),He("\\dArr","\\Downarrow"),He("\\Darr","\\Downarrow"),He("\\lang","\\langle"),He("\\rang","\\rangle"),He("\\uarr","\\uparrow"),He("\\uArr","\\Uparrow"),He("\\Uarr","\\Uparrow"),He("\\N","\\mathbb{N}"),He("\\R","\\mathbb{R}"),He("\\Z","\\mathbb{Z}"),He("\\alef","\\aleph"),He("\\alefsym","\\aleph"),He("\\Alpha","\\mathrm{A}"),He("\\Beta","\\mathrm{B}"),He("\\bull","\\bullet"),He("\\Chi","\\mathrm{X}"),He("\\clubs","\\clubsuit"),He("\\cnums","\\mathbb{C}"),He("\\Complex","\\mathbb{C}"),He("\\Dagger","\\ddagger"),He("\\diamonds","\\diamondsuit"),He("\\empty","\\emptyset"),He("\\Epsilon","\\mathrm{E}"),He("\\Eta","\\mathrm{H}"),He("\\exist","\\exists"),He("\\harr","\\leftrightarrow"),He("\\hArr","\\Leftrightarrow"),He("\\Harr","\\Leftrightarrow"),He("\\hearts","\\heartsuit"),He("\\image","\\Im"),He("\\infin","\\infty"),He("\\Iota","\\mathrm{I}"),He("\\isin","\\in"),He("\\Kappa","\\mathrm{K}"),He("\\larr","\\leftarrow"),He("\\lArr","\\Leftarrow"),He("\\Larr","\\Leftarrow"),He("\\lrarr","\\leftrightarrow"),He("\\lrArr","\\Leftrightarrow"),He("\\Lrarr","\\Leftrightarrow"),He("\\Mu","\\mathrm{M}"),He("\\natnums","\\mathbb{N}"),He("\\Nu","\\mathrm{N}"),He("\\Omicron","\\mathrm{O}"),He("\\plusmn","\\pm"),He("\\rarr","\\rightarrow"),He("\\rArr","\\Rightarrow"),He("\\Rarr","\\Rightarrow"),He("\\real","\\Re"),He("\\reals","\\mathbb{R}"),He("\\Reals","\\mathbb{R}"),He("\\Rho","\\mathrm{P}"),He("\\sdot","\\cdot"),He("\\sect","\\S"),He("\\spades","\\spadesuit"),He("\\sub","\\subset"),He("\\sube","\\subseteq"),He("\\supe","\\supseteq"),He("\\Tau","\\mathrm{T}"),He("\\thetasym","\\vartheta"),He("\\weierp","\\wp"),He("\\Zeta","\\mathrm{Z}"),He("\\argmin","\\DOTSB\\operatorname*{arg\\,min}"),He("\\argmax","\\DOTSB\\operatorname*{arg\\,max}"),He("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits"),He("\\bra","\\mathinner{\\langle{#1}|}"),He("\\ket","\\mathinner{|{#1}\\rangle}"),He("\\braket","\\mathinner{\\langle{#1}\\rangle}"),He("\\Bra","\\left\\langle#1\\right|"),He("\\Ket","\\left|#1\\right\\rangle"),He("\\angln","{\\angl n}"),He("\\blue","\\textcolor{##6495ed}{#1}"),He("\\orange","\\textcolor{##ffa500}{#1}"),He("\\pink","\\textcolor{##ff00af}{#1}"),He("\\red","\\textcolor{##df0030}{#1}"),He("\\green","\\textcolor{##28ae7b}{#1}"),He("\\gray","\\textcolor{gray}{#1}"),He("\\purple","\\textcolor{##9d38bd}{#1}"),He("\\blueA","\\textcolor{##ccfaff}{#1}"),He("\\blueB","\\textcolor{##80f6ff}{#1}"),He("\\blueC","\\textcolor{##63d9ea}{#1}"),He("\\blueD","\\textcolor{##11accd}{#1}"),He("\\blueE","\\textcolor{##0c7f99}{#1}"),He("\\tealA","\\textcolor{##94fff5}{#1}"),He("\\tealB","\\textcolor{##26edd5}{#1}"),He("\\tealC","\\textcolor{##01d1c1}{#1}"),He("\\tealD","\\textcolor{##01a995}{#1}"),He("\\tealE","\\textcolor{##208170}{#1}"),He("\\greenA","\\textcolor{##b6ffb0}{#1}"),He("\\greenB","\\textcolor{##8af281}{#1}"),He("\\greenC","\\textcolor{##74cf70}{#1}"),He("\\greenD","\\textcolor{##1fab54}{#1}"),He("\\greenE","\\textcolor{##0d923f}{#1}"),He("\\goldA","\\textcolor{##ffd0a9}{#1}"),He("\\goldB","\\textcolor{##ffbb71}{#1}"),He("\\goldC","\\textcolor{##ff9c39}{#1}"),He("\\goldD","\\textcolor{##e07d10}{#1}"),He("\\goldE","\\textcolor{##a75a05}{#1}"),He("\\redA","\\textcolor{##fca9a9}{#1}"),He("\\redB","\\textcolor{##ff8482}{#1}"),He("\\redC","\\textcolor{##f9685d}{#1}"),He("\\redD","\\textcolor{##e84d39}{#1}"),He("\\redE","\\textcolor{##bc2612}{#1}"),He("\\maroonA","\\textcolor{##ffbde0}{#1}"),He("\\maroonB","\\textcolor{##ff92c6}{#1}"),He("\\maroonC","\\textcolor{##ed5fa6}{#1}"),He("\\maroonD","\\textcolor{##ca337c}{#1}"),He("\\maroonE","\\textcolor{##9e034e}{#1}"),He("\\purpleA","\\textcolor{##ddd7ff}{#1}"),He("\\purpleB","\\textcolor{##c6b9fc}{#1}"),He("\\purpleC","\\textcolor{##aa87ff}{#1}"),He("\\purpleD","\\textcolor{##7854ab}{#1}"),He("\\purpleE","\\textcolor{##543b78}{#1}"),He("\\mintA","\\textcolor{##f5f9e8}{#1}"),He("\\mintB","\\textcolor{##edf2df}{#1}"),He("\\mintC","\\textcolor{##e0e5cc}{#1}"),He("\\grayA","\\textcolor{##f6f7f7}{#1}"),He("\\grayB","\\textcolor{##f0f1f2}{#1}"),He("\\grayC","\\textcolor{##e3e5e6}{#1}"),He("\\grayD","\\textcolor{##d6d8da}{#1}"),He("\\grayE","\\textcolor{##babec2}{#1}"),He("\\grayF","\\textcolor{##888d93}{#1}"),He("\\grayG","\\textcolor{##626569}{#1}"),He("\\grayH","\\textcolor{##3b3e40}{#1}"),He("\\grayI","\\textcolor{##21242c}{#1}"),He("\\kaBlue","\\textcolor{##314453}{#1}"),He("\\kaGreen","\\textcolor{##71B307}{#1}");var ct={"\\relax":!0,"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0},It=function(){function se(D,P,N){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=P,this.expansionCount=0,this.feed(D),this.macros=new B($,P.macros),this.mode=N,this.stack=[]}var M=se.prototype;return M.feed=function(P){this.lexer=new R(P,this.settings)},M.switchMode=function(P){this.mode=P},M.beginGroup=function(){this.macros.beginGroup()},M.endGroup=function(){this.macros.endGroup()},M.endGroups=function(){this.macros.endGroups()},M.future=function(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]},M.popToken=function(){return this.future(),this.stack.pop()},M.pushToken=function(P){this.stack.push(P)},M.pushTokens=function(P){var N;(N=this.stack).push.apply(N,P)},M.scanArgument=function(P){var N,Y,oe;if(P){if(this.consumeSpaces(),this.future().text!=="[")return null;N=this.popToken();var Ce=this.consumeArg(["]"]);oe=Ce.tokens,Y=Ce.end}else{var $e=this.consumeArg();oe=$e.tokens,N=$e.start,Y=$e.end}return this.pushToken(new sd("EOF",Y.loc)),this.pushTokens(oe),N.range(Y,"")},M.consumeSpaces=function(){for(;;){var P=this.future();if(P.text===" ")this.stack.pop();else break}},M.consumeArg=function(P){var N=[],Y=P&&P.length>0;Y||this.consumeSpaces();var oe=this.future(),Ce,$e=0,tt=0;do{if(Ce=this.popToken(),N.push(Ce),Ce.text==="{")++$e;else if(Ce.text==="}"){if(--$e,$e===-1)throw new s("Extra }",Ce)}else if(Ce.text==="EOF")throw new s("Unexpected end of input in a macro argument, expected '"+(P&&Y?P[tt]:"}")+"'",Ce);if(P&&Y)if(($e===0||$e===1&&P[tt]==="{")&&Ce.text===P[tt]){if(++tt,tt===P.length){N.splice(-tt,tt);break}}else tt=0}while($e!==0||Y);return oe.text==="{"&&N[N.length-1].text==="}"&&(N.pop(),N.shift()),N.reverse(),{tokens:N,start:oe,end:Ce}},M.consumeArgs=function(P,N){if(N){if(N.length!==P+1)throw new s("The length of delimiters doesn't match the number of args!");for(var Y=N[0],oe=0;oe<Y.length;oe++){var Ce=this.popToken();if(Y[oe]!==Ce.text)throw new s("Use of the macro doesn't match its definition",Ce)}}for(var $e=[],tt=0;tt<P;tt++)$e.push(this.consumeArg(N&&N[tt+1]).tokens);return $e},M.expandOnce=function(P){var N=this.popToken(),Y=N.text,oe=N.noexpand?null:this._getExpansion(Y);if(oe==null||P&&oe.unexpandable){if(P&&oe==null&&Y[0]==="\\"&&!this.isDefined(Y))throw new s("Undefined control sequence: "+Y);return this.pushToken(N),N}if(this.expansionCount++,this.expansionCount>this.settings.maxExpand)throw new s("Too many expansions: infinite loop or need to increase maxExpand setting");var Ce=oe.tokens,$e=this.consumeArgs(oe.numArgs,oe.delimiters);if(oe.numArgs){Ce=Ce.slice();for(var tt=Ce.length-1;tt>=0;--tt){var bt=Ce[tt];if(bt.text==="#"){if(tt===0)throw new s("Incomplete placeholder at end of macro body",bt);if(bt=Ce[--tt],bt.text==="#")Ce.splice(tt+1,1);else if(/^[1-9]$/.test(bt.text)){var Gt;(Gt=Ce).splice.apply(Gt,[tt,2].concat($e[+bt.text-1]))}else throw new s("Not a valid argument number",bt)}}}return this.pushTokens(Ce),Ce},M.expandAfterFuture=function(){return this.expandOnce(),this.future()},M.expandNextToken=function(){for(;;){var P=this.expandOnce();if(P instanceof sd)if(P.text==="\\relax"||P.treatAsRelax)this.stack.pop();else return this.stack.pop()}throw new Error},M.expandMacro=function(P){return this.macros.has(P)?this.expandTokens([new sd(P)]):void 0},M.expandTokens=function(P){var N=[],Y=this.stack.length;for(this.pushTokens(P);this.stack.length>Y;){var oe=this.expandOnce(!0);oe instanceof sd&&(oe.treatAsRelax&&(oe.noexpand=!1,oe.treatAsRelax=!1),N.push(this.stack.pop()))}return N},M.expandMacroAsText=function(P){var N=this.expandMacro(P);return N&&N.map(function(Y){return Y.text}).join("")},M._getExpansion=function(P){var N=this.macros.get(P);if(N==null)return N;if(P.length===1){var Y=this.lexer.catcodes[P];if(Y!=null&&Y!==13)return}var oe=typeof N=="function"?N(this):N;if(typeof oe=="string"){var Ce=0;if(oe.indexOf("#")!==-1)for(var $e=oe.replace(/##/g,"");$e.indexOf("#"+(Ce+1))!==-1;)++Ce;for(var tt=new R(oe,this.settings),bt=[],Gt=tt.lex();Gt.text!=="EOF";)bt.push(Gt),Gt=tt.lex();bt.reverse();var sn={tokens:bt,numArgs:Ce};return sn}return oe},M.isDefined=function(P){return this.macros.has(P)||aa.hasOwnProperty(P)||fi.math.hasOwnProperty(P)||fi.text.hasOwnProperty(P)||ct.hasOwnProperty(P)},M.isExpandable=function(P){var N=this.macros.get(P);return N!=null?typeof N=="string"||typeof N=="function"||!N.unexpandable:aa.hasOwnProperty(P)&&!aa[P].primitive},se}(),Wt={"́":{text:"\\'",math:"\\acute"},"̀":{text:"\\`",math:"\\grave"},"̈":{text:'\\"',math:"\\ddot"},"̃":{text:"\\~",math:"\\tilde"},"̄":{text:"\\=",math:"\\bar"},"̆":{text:"\\u",math:"\\breve"},"̌":{text:"\\v",math:"\\check"},"̂":{text:"\\^",math:"\\hat"},"̇":{text:"\\.",math:"\\dot"},"̊":{text:"\\r",math:"\\mathring"},"̋":{text:"\\H"},"̧":{text:"\\c"}},Mn={á:"á",à:"à",ä:"ä",ǟ:"ǟ",ã:"ã",ā:"ā",ă:"ă",ắ:"ắ",ằ:"ằ",ẵ:"ẵ",ǎ:"ǎ",â:"â",ấ:"ấ",ầ:"ầ",ẫ:"ẫ",ȧ:"ȧ",ǡ:"ǡ",å:"å",ǻ:"ǻ",ḃ:"ḃ",ć:"ć",ḉ:"ḉ",č:"č",ĉ:"ĉ",ċ:"ċ",ç:"ç",ď:"ď",ḋ:"ḋ",ḑ:"ḑ",é:"é",è:"è",ë:"ë",ẽ:"ẽ",ē:"ē",ḗ:"ḗ",ḕ:"ḕ",ĕ:"ĕ",ḝ:"ḝ",ě:"ě",ê:"ê",ế:"ế",ề:"ề",ễ:"ễ",ė:"ė",ȩ:"ȩ",ḟ:"ḟ",ǵ:"ǵ",ḡ:"ḡ",ğ:"ğ",ǧ:"ǧ",ĝ:"ĝ",ġ:"ġ",ģ:"ģ",ḧ:"ḧ",ȟ:"ȟ",ĥ:"ĥ",ḣ:"ḣ",ḩ:"ḩ",í:"í",ì:"ì",ï:"ï",ḯ:"ḯ",ĩ:"ĩ",ī:"ī",ĭ:"ĭ",ǐ:"ǐ",î:"î",ǰ:"ǰ",ĵ:"ĵ",ḱ:"ḱ",ǩ:"ǩ",ķ:"ķ",ĺ:"ĺ",ľ:"ľ",ļ:"ļ",ḿ:"ḿ",ṁ:"ṁ",ń:"ń",ǹ:"ǹ",ñ:"ñ",ň:"ň",ṅ:"ṅ",ņ:"ņ",ó:"ó",ò:"ò",ö:"ö",ȫ:"ȫ",õ:"õ",ṍ:"ṍ",ṏ:"ṏ",ȭ:"ȭ",ō:"ō",ṓ:"ṓ",ṑ:"ṑ",ŏ:"ŏ",ǒ:"ǒ",ô:"ô",ố:"ố",ồ:"ồ",ỗ:"ỗ",ȯ:"ȯ",ȱ:"ȱ",ő:"ő",ṕ:"ṕ",ṗ:"ṗ",ŕ:"ŕ",ř:"ř",ṙ:"ṙ",ŗ:"ŗ",ś:"ś",ṥ:"ṥ",š:"š",ṧ:"ṧ",ŝ:"ŝ",ṡ:"ṡ",ş:"ş",ẗ:"ẗ",ť:"ť",ṫ:"ṫ",ţ:"ţ",ú:"ú",ù:"ù",ü:"ü",ǘ:"ǘ",ǜ:"ǜ",ǖ:"ǖ",ǚ:"ǚ",ũ:"ũ",ṹ:"ṹ",ū:"ū",ṻ:"ṻ",ŭ:"ŭ",ǔ:"ǔ",û:"û",ů:"ů",ű:"ű",ṽ:"ṽ",ẃ:"ẃ",ẁ:"ẁ",ẅ:"ẅ",ŵ:"ŵ",ẇ:"ẇ",ẘ:"ẘ",ẍ:"ẍ",ẋ:"ẋ",ý:"ý",ỳ:"ỳ",ÿ:"ÿ",ỹ:"ỹ",ȳ:"ȳ",ŷ:"ŷ",ẏ:"ẏ",ẙ:"ẙ",ź:"ź",ž:"ž",ẑ:"ẑ",ż:"ż",Á:"Á",À:"À",Ä:"Ä",Ǟ:"Ǟ",Ã:"Ã",Ā:"Ā",Ă:"Ă",Ắ:"Ắ",Ằ:"Ằ",Ẵ:"Ẵ",Ǎ:"Ǎ",Â:"Â",Ấ:"Ấ",Ầ:"Ầ",Ẫ:"Ẫ",Ȧ:"Ȧ",Ǡ:"Ǡ",Å:"Å",Ǻ:"Ǻ",Ḃ:"Ḃ",Ć:"Ć",Ḉ:"Ḉ",Č:"Č",Ĉ:"Ĉ",Ċ:"Ċ",Ç:"Ç",Ď:"Ď",Ḋ:"Ḋ",Ḑ:"Ḑ",É:"É",È:"È",Ë:"Ë",Ẽ:"Ẽ",Ē:"Ē",Ḗ:"Ḗ",Ḕ:"Ḕ",Ĕ:"Ĕ",Ḝ:"Ḝ",Ě:"Ě",Ê:"Ê",Ế:"Ế",Ề:"Ề",Ễ:"Ễ",Ė:"Ė",Ȩ:"Ȩ",Ḟ:"Ḟ",Ǵ:"Ǵ",Ḡ:"Ḡ",Ğ:"Ğ",Ǧ:"Ǧ",Ĝ:"Ĝ",Ġ:"Ġ",Ģ:"Ģ",Ḧ:"Ḧ",Ȟ:"Ȟ",Ĥ:"Ĥ",Ḣ:"Ḣ",Ḩ:"Ḩ",Í:"Í",Ì:"Ì",Ï:"Ï",Ḯ:"Ḯ",Ĩ:"Ĩ",Ī:"Ī",Ĭ:"Ĭ",Ǐ:"Ǐ",Î:"Î",İ:"İ",Ĵ:"Ĵ",Ḱ:"Ḱ",Ǩ:"Ǩ",Ķ:"Ķ",Ĺ:"Ĺ",Ľ:"Ľ",Ļ:"Ļ",Ḿ:"Ḿ",Ṁ:"Ṁ",Ń:"Ń",Ǹ:"Ǹ",Ñ:"Ñ",Ň:"Ň",Ṅ:"Ṅ",Ņ:"Ņ",Ó:"Ó",Ò:"Ò",Ö:"Ö",Ȫ:"Ȫ",Õ:"Õ",Ṍ:"Ṍ",Ṏ:"Ṏ",Ȭ:"Ȭ",Ō:"Ō",Ṓ:"Ṓ",Ṑ:"Ṑ",Ŏ:"Ŏ",Ǒ:"Ǒ",Ô:"Ô",Ố:"Ố",Ồ:"Ồ",Ỗ:"Ỗ",Ȯ:"Ȯ",Ȱ:"Ȱ",Ő:"Ő",Ṕ:"Ṕ",Ṗ:"Ṗ",Ŕ:"Ŕ",Ř:"Ř",Ṙ:"Ṙ",Ŗ:"Ŗ",Ś:"Ś",Ṥ:"Ṥ",Š:"Š",Ṧ:"Ṧ",Ŝ:"Ŝ",Ṡ:"Ṡ",Ş:"Ş",Ť:"Ť",Ṫ:"Ṫ",Ţ:"Ţ",Ú:"Ú",Ù:"Ù",Ü:"Ü",Ǘ:"Ǘ",Ǜ:"Ǜ",Ǖ:"Ǖ",Ǚ:"Ǚ",Ũ:"Ũ",Ṹ:"Ṹ",Ū:"Ū",Ṻ:"Ṻ",Ŭ:"Ŭ",Ǔ:"Ǔ",Û:"Û",Ů:"Ů",Ű:"Ű",Ṽ:"Ṽ",Ẃ:"Ẃ",Ẁ:"Ẁ",Ẅ:"Ẅ",Ŵ:"Ŵ",Ẇ:"Ẇ",Ẍ:"Ẍ",Ẋ:"Ẋ",Ý:"Ý",Ỳ:"Ỳ",Ÿ:"Ÿ",Ỹ:"Ỹ",Ȳ:"Ȳ",Ŷ:"Ŷ",Ẏ:"Ẏ",Ź:"Ź",Ž:"Ž",Ẑ:"Ẑ",Ż:"Ż",ά:"ά",ὰ:"ὰ",ᾱ:"ᾱ",ᾰ:"ᾰ",έ:"έ",ὲ:"ὲ",ή:"ή",ὴ:"ὴ",ί:"ί",ὶ:"ὶ",ϊ:"ϊ",ΐ:"ΐ",ῒ:"ῒ",ῑ:"ῑ",ῐ:"ῐ",ό:"ό",ὸ:"ὸ",ύ:"ύ",ὺ:"ὺ",ϋ:"ϋ",ΰ:"ΰ",ῢ:"ῢ",ῡ:"ῡ",ῠ:"ῠ",ώ:"ώ",ὼ:"ὼ",Ύ:"Ύ",Ὺ:"Ὺ",Ϋ:"Ϋ",Ῡ:"Ῡ",Ῠ:"Ῠ",Ώ:"Ώ",Ὼ:"Ὼ"},tn=function(){function se(D,P){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new It(D,P,this.mode),this.settings=P,this.leftrightDepth=0}var M=se.prototype;return M.expect=function(P,N){if(N===void 0&&(N=!0),this.fetch().text!==P)throw new s("Expected '"+P+"', got '"+this.fetch().text+"'",this.fetch());N&&this.consume()},M.consume=function(){this.nextToken=null},M.fetch=function(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken},M.switchMode=function(P){this.mode=P,this.gullet.switchMode(P)},M.parse=function(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var P=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),P}finally{this.gullet.endGroups()}},M.parseExpression=function(P,N){for(var Y=[];;){this.mode==="math"&&this.consumeSpaces();var oe=this.fetch();if(se.endOfExpression.indexOf(oe.text)!==-1||N&&oe.text===N||P&&aa[oe.text]&&aa[oe.text].infix)break;var Ce=this.parseAtom(N);if(Ce){if(Ce.type==="internal")continue}else break;Y.push(Ce)}return this.mode==="text"&&this.formLigatures(Y),this.handleInfixNodes(Y)},M.handleInfixNodes=function(P){for(var N=-1,Y,oe=0;oe<P.length;oe++)if(P[oe].type==="infix"){if(N!==-1)throw new s("only one infix operator per group",P[oe].token);N=oe,Y=P[oe].replaceWith}if(N!==-1&&Y){var Ce,$e,tt=P.slice(0,N),bt=P.slice(N+1);tt.length===1&&tt[0].type==="ordgroup"?Ce=tt[0]:Ce={type:"ordgroup",mode:this.mode,body:tt},bt.length===1&&bt[0].type==="ordgroup"?$e=bt[0]:$e={type:"ordgroup",mode:this.mode,body:bt};var Gt;return Y==="\\\\abovefrac"?Gt=this.callFunction(Y,[Ce,P[N],$e],[]):Gt=this.callFunction(Y,[Ce,$e],[]),[Gt]}else return P},M.handleSupSubscript=function(P){var N=this.fetch(),Y=N.text;this.consume(),this.consumeSpaces();var oe=this.parseGroup(P);if(!oe)throw new s("Expected group after '"+Y+"'",N);return oe},M.formatUnsupportedCmd=function(P){for(var N=[],Y=0;Y<P.length;Y++)N.push({type:"textord",mode:"text",text:P[Y]});var oe={type:"text",mode:this.mode,body:N},Ce={type:"color",mode:this.mode,color:this.settings.errorColor,body:[oe]};return Ce},M.parseAtom=function(P){var N=this.parseGroup("atom",P);if(this.mode==="text")return N;for(var Y,oe;;){this.consumeSpaces();var Ce=this.fetch();if(Ce.text==="\\limits"||Ce.text==="\\nolimits"){if(N&&N.type==="op"){var $e=Ce.text==="\\limits";N.limits=$e,N.alwaysHandleSupSub=!0}else if(N&&N.type==="operatorname")N.alwaysHandleSupSub&&(N.limits=Ce.text==="\\limits");else throw new s("Limit controls must follow a math operator",Ce);this.consume()}else if(Ce.text==="^"){if(Y)throw new s("Double superscript",Ce);Y=this.handleSupSubscript("superscript")}else if(Ce.text==="_"){if(oe)throw new s("Double subscript",Ce);oe=this.handleSupSubscript("subscript")}else if(Ce.text==="'"){if(Y)throw new s("Double superscript",Ce);var tt={type:"textord",mode:this.mode,text:"\\prime"},bt=[tt];for(this.consume();this.fetch().text==="'";)bt.push(tt),this.consume();this.fetch().text==="^"&&bt.push(this.handleSupSubscript("superscript")),Y={type:"ordgroup",mode:this.mode,body:bt}}else break}return Y||oe?{type:"supsub",mode:this.mode,base:N,sup:Y,sub:oe}:N},M.parseFunction=function(P,N){var Y=this.fetch(),oe=Y.text,Ce=aa[oe];if(!Ce)return null;if(this.consume(),N&&N!=="atom"&&!Ce.allowedInArgument)throw new s("Got function '"+oe+"' with no arguments"+(N?" as "+N:""),Y);if(this.mode==="text"&&!Ce.allowedInText)throw new s("Can't use function '"+oe+"' in text mode",Y);if(this.mode==="math"&&Ce.allowedInMath===!1)throw new s("Can't use function '"+oe+"' in math mode",Y);var $e=this.parseArguments(oe,Ce),tt=$e.args,bt=$e.optArgs;return this.callFunction(oe,tt,bt,Y,P)},M.callFunction=function(P,N,Y,oe,Ce){var $e={funcName:P,parser:this,token:oe,breakOnTokenText:Ce},tt=aa[P];if(tt&&tt.handler)return tt.handler($e,N,Y);throw new s("No function handler for "+P)},M.parseArguments=function(P,N){var Y=N.numArgs+N.numOptionalArgs;if(Y===0)return{args:[],optArgs:[]};for(var oe=[],Ce=[],$e=0;$e<Y;$e++){var tt=N.argTypes&&N.argTypes[$e],bt=$e<N.numOptionalArgs;(N.primitive&&tt==null||N.type==="sqrt"&&$e===1&&Ce[0]==null)&&(tt="primitive");var Gt=this.parseGroupOfType("argument to '"+P+"'",tt,bt);if(bt)Ce.push(Gt);else if(Gt!=null)oe.push(Gt);else throw new s("Null argument, please report this as a bug")}return{args:oe,optArgs:Ce}},M.parseGroupOfType=function(P,N,Y){switch(N){case"color":return this.parseColorGroup(Y);case"size":return this.parseSizeGroup(Y);case"url":return this.parseUrlGroup(Y);case"math":case"text":return this.parseArgumentGroup(Y,N);case"hbox":{var oe=this.parseArgumentGroup(Y,"text");return oe!=null?{type:"styling",mode:oe.mode,body:[oe],style:"text"}:null}case"raw":{var Ce=this.parseStringGroup("raw",Y);return Ce!=null?{type:"raw",mode:"text",string:Ce.text}:null}case"primitive":{if(Y)throw new s("A primitive argument cannot be optional");var $e=this.parseGroup(P);if($e==null)throw new s("Expected group as "+P,this.fetch());return $e}case"original":case null:case void 0:return this.parseArgumentGroup(Y);default:throw new s("Unknown group type as "+P,this.fetch())}},M.consumeSpaces=function(){for(;this.fetch().text===" ";)this.consume()},M.parseStringGroup=function(P,N){var Y=this.gullet.scanArgument(N);if(Y==null)return null;for(var oe="",Ce;(Ce=this.fetch()).text!=="EOF";)oe+=Ce.text,this.consume();return this.consume(),Y.text=oe,Y},M.parseRegexGroup=function(P,N){for(var Y=this.fetch(),oe=Y,Ce="",$e;($e=this.fetch()).text!=="EOF"&&P.test(Ce+$e.text);)oe=$e,Ce+=oe.text,this.consume();if(Ce==="")throw new s("Invalid "+N+": '"+Y.text+"'",Y);return Y.range(oe,Ce)},M.parseColorGroup=function(P){var N=this.parseStringGroup("color",P);if(N==null)return null;var Y=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(N.text);if(!Y)throw new s("Invalid color: '"+N.text+"'",N);var oe=Y[0];return/^[0-9a-f]{6}$/i.test(oe)&&(oe="#"+oe),{type:"color-token",mode:this.mode,color:oe}},M.parseSizeGroup=function(P){var N,Y=!1;if(this.gullet.consumeSpaces(),!P&&this.gullet.future().text!=="{"?N=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):N=this.parseStringGroup("size",P),!N)return null;!P&&N.text.length===0&&(N.text="0pt",Y=!0);var oe=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(N.text);if(!oe)throw new s("Invalid size: '"+N.text+"'",N);var Ce={number:+(oe[1]+oe[2]),unit:oe[3]};if(!wt(Ce))throw new s("Invalid unit: '"+Ce.unit+"'",N);return{type:"size",mode:this.mode,value:Ce,isBlank:Y}},M.parseUrlGroup=function(P){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var N=this.parseStringGroup("url",P);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),N==null)return null;var Y=N.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:Y}},M.parseArgumentGroup=function(P,N){var Y=this.gullet.scanArgument(P);if(Y==null)return null;var oe=this.mode;N&&this.switchMode(N),this.gullet.beginGroup();var Ce=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var $e={type:"ordgroup",mode:this.mode,loc:Y.loc,body:Ce};return N&&this.switchMode(oe),$e},M.parseGroup=function(P,N){var Y=this.fetch(),oe=Y.text,Ce;if(oe==="{"||oe==="\\begingroup"){this.consume();var $e=oe==="{"?"}":"\\endgroup";this.gullet.beginGroup();var tt=this.parseExpression(!1,$e),bt=this.fetch();this.expect($e),this.gullet.endGroup(),Ce={type:"ordgroup",mode:this.mode,loc:zl.range(Y,bt),body:tt,semisimple:oe==="\\begingroup"||void 0}}else if(Ce=this.parseFunction(N,P)||this.parseSymbol(),Ce==null&&oe[0]==="\\"&&!ct.hasOwnProperty(oe)){if(this.settings.throwOnError)throw new s("Undefined control sequence: "+oe,Y);Ce=this.formatUnsupportedCmd(oe),this.consume()}return Ce},M.formLigatures=function(P){for(var N=P.length-1,Y=0;Y<N;++Y){var oe=P[Y],Ce=oe.text;Ce==="-"&&P[Y+1].text==="-"&&(Y+1<N&&P[Y+2].text==="-"?(P.splice(Y,3,{type:"textord",mode:"text",loc:zl.range(oe,P[Y+2]),text:"---"}),N-=2):(P.splice(Y,2,{type:"textord",mode:"text",loc:zl.range(oe,P[Y+1]),text:"--"}),N-=1)),(Ce==="'"||Ce==="`")&&P[Y+1].text===Ce&&(P.splice(Y,2,{type:"textord",mode:"text",loc:zl.range(oe,P[Y+1]),text:Ce+Ce}),N-=1)}},M.parseSymbol=function(){var P=this.fetch(),N=P.text;if(/^\\verb[^a-zA-Z]/.test(N)){this.consume();var Y=N.slice(5),oe=Y.charAt(0)==="*";if(oe&&(Y=Y.slice(1)),Y.length<2||Y.charAt(0)!==Y.slice(-1))throw new s(`\\verb assertion failed --
                    please report what input caused this bug`);return Y=Y.slice(1,-1),{type:"verb",mode:"text",body:Y,star:oe}}Mn.hasOwnProperty(N[0])&&!fi[this.mode][N[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+N[0]+'" used in math mode',P),N=Mn[N[0]]+N.substr(1));var Ce=LR.exec(N);Ce&&(N=N.substring(0,Ce.index),N==="i"?N="ı":N==="j"&&(N="ȷ"));var $e;if(fi[this.mode][N]){this.settings.strict&&this.mode==="math"&&Ii.indexOf(N)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+N[0]+'" used in math mode',P);var tt=fi[this.mode][N].group,bt=zl.range(P),Gt;if(Ti.hasOwnProperty(tt)){var sn=tt;Gt={type:"atom",mode:this.mode,family:sn,loc:bt,text:N}}else Gt={type:tt,mode:this.mode,loc:bt,text:N};$e=Gt}else if(N.charCodeAt(0)>=128)this.settings.strict&&(ie(N.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+N[0]+'" used in math mode',P):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+N[0]+'"'+(" ("+N.charCodeAt(0)+")"),P)),$e={type:"textord",mode:"text",loc:zl.range(P),text:N};else return null;if(this.consume(),Ce)for(var fn=0;fn<Ce[0].length;fn++){var hn=Ce[0][fn];if(!Wt[hn])throw new s("Unknown accent ' "+hn+"'",P);var In=Wt[hn][this.mode]||Wt[hn].text;if(!In)throw new s("Accent "+hn+" unsupported in "+this.mode+" mode",P);$e={type:"accent",mode:this.mode,loc:zl.range(P),label:In,isStretchy:!1,isShifty:!0,base:$e}}return $e},se}();tn.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var gi=function(M,D){if(!(typeof M=="string"||M instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var P=new tn(M,D);delete P.gullet.macros.current["\\df@tag"];var N=P.parse();if(delete P.gullet.macros.current["\\current@color"],delete P.gullet.macros.current["\\color"],P.gullet.macros.get("\\df@tag")){if(!D.displayMode)throw new s("\\tag works only in display equations");P.gullet.feed("\\df@tag"),N=[{type:"tag",mode:"text",body:N,tag:P.parse()}]}return N},Ci=gi,Ns=function(M,D,P){D.textContent="";var N=ff(M,P).toNode();D.appendChild(N)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Ns=function(){throw new s("KaTeX doesn't work in quirks mode.")});var ko=function(M,D){var P=ff(M,D).toMarkup();return P},ad=function(M,D){var P=new _(D);return Ci(M,P)},Lh=function(M,D,P){if(P.throwOnError||!(M instanceof s))throw M;var N=yt.makeSpan(["katex-error"],[new dt(D)]);return N.setAttribute("title",M.toString()),N.setAttribute("style","color:"+P.errorColor),N},ff=function(M,D){var P=new _(D);try{var N=Ci(M,P);return Jb(N,M,P)}catch(Y){return Lh(Y,M,P)}},W0=function(M,D){var P=new _(D);try{var N=Ci(M,P);return eS(N,M,P)}catch(Y){return Lh(Y,M,P)}},q0={version:"0.13.24",render:Ns,renderToString:ko,ParseError:s,__parse:ad,__renderToDomTree:ff,__renderToHTMLTree:W0,__setFontMetrics:Ke,__defineSymbol:J,__defineMacro:He,__domTree:{Span:De,Anchor:xt,SymbolNode:dt,SvgNode:Mt,PathNode:jt,LineNode:Ft}},Iv=q0;return i=i.default,i}()})})(efe);var pat=efe.exports;const mat=sl(pat),gat=(n,e={},t)=>{const{props:i,domProps:r,on:s,...a}=e,o={...a,...i,...r,...(l=>l?Object.entries(l).reduce((u,[c,d])=>({...u,[c=`on${c=c.charAt(0).toUpperCase()+c.slice(1)}`]:d}),{}):null)(s)};return ln(n,o,t)};var QM=Ne({name:"VueLatex",props:{fontsize:{type:Number,default:16},expression:{type:String,required:!0},displayMode:{type:Boolean,default:!1},throwOnError:{type:Boolean,default:!1},errorColor:{type:String,default:void 0},minRuleThickness:{type:Number,default:.04},macros:{type:Object,default:void 0},colorIsTextColor:{type:Boolean,default:void 0},maxSize:{type:Number,default:void 0},maxExpand:{type:Number,default:void 0},allowedProtocols:{type:Array,default:void 0},strict:{type:[Boolean,String,Function],default:void 0}},setup:n=>({html:W(()=>mat.renderToString(n.expression,n))}),render(){return gat(this.displayMode?"div":"span",{domProps:{innerHTML:this.html},style:{"font-size":`${this.fontsize}px`}})}});QM.install=n=>{n.component(QM.name,QM)};const vat=Ne({components:{VueLatex:QM}}),SU=n=>(cc("data-v-2740b058"),n=n(),dc(),n),yat=SU(()=>Te("h1",{class:"section-title"},"Latex",-1)),_at=SU(()=>Te("a",{href:"https://katex.org/docs/options.html",target:"_blank"},"KaTex",-1)),bat=SU(()=>Te("a",{href:"https://github.com/Shimada666/VaTex",target:"_blank"},"VaTex",-1));function Sat(n,e,t,i,r,s){const a=Ht("el-divider"),o=Ht("el-row"),l=Ht("VueLatex"),u=Ht("el-col");return j(),_e("div",null,[he(a),he(o,{justify:"center"},{default:Ae(()=>[yat]),_:1}),he(o,{justify:"center"},{default:Ae(()=>[he(u,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[Te("p",null,[An(" Thanks to "),_at,An(" and "),bat,An(", now we can show an inline "),he(l,{expression:"\\LaTeX"}),An(" formula, like "),he(l,{expression:"1+1=2"}),An(". And we can show an interline formula like this: "),he(l,{expression:`
            D(x) = \\begin{cases}
            \\lim\\limits_{x \\to 0} \\frac{a^x}{b+c}, & x<3 \\\\
            \\pi, & x=3 \\\\
            \\int_a^{3b}x_{ij}+e^2 \\mathrm{d}x,& x>3 \\\\
            \\end{cases}
          `,"display-mode":""})])]),_:1})]),_:1})])}const xat=Fa(vat,[["render",Sat],["__scopeId","data-v-2740b058"]]);/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xU="143",oy={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ly={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},wat=0,oX=1,Tat=2,tfe=1,Cat=2,Fx=3,f0=0,Gc=1,h0=2,Aat=1,Vp=0,K1=1,lX=2,uX=3,cX=4,Eat=5,e1=100,Mat=101,Iat=102,dX=103,fX=104,Dat=200,Rat=201,Pat=202,kat=203,nfe=204,ife=205,Lat=206,Oat=207,Nat=208,Bat=209,Fat=210,Uat=0,zat=1,Hat=2,WO=3,Vat=4,$at=5,Gat=6,Wat=7,eR=0,qat=1,jat=2,Zf=0,Kat=1,Xat=2,Yat=3,Qat=4,Zat=5,wU=300,Wg=301,qg=302,Ow=303,V4=304,zT=306,Sl=1e3,ma=1001,Nw=1002,Ia=1003,$4=1004,G4=1005,ta=1006,TU=1007,Mh=1008,jg=1009,Jat=1010,eot=1011,rfe=1012,tot=1013,og=1014,Lp=1015,Bw=1016,not=1017,iot=1018,X1=1020,rot=1021,sot=1022,Wu=1023,aot=1024,oot=1025,Ig=1026,U_=1027,lot=1028,uot=1029,cot=1030,dot=1031,fot=1033,ZM=33776,ck=33777,JM=33778,e3=33779,hX=35840,pX=35841,mX=35842,gX=35843,sfe=36196,vX=37492,yX=37496,_X=37808,bX=37809,SX=37810,xX=37811,wX=37812,TX=37813,CX=37814,AX=37815,EX=37816,MX=37817,IX=37818,DX=37819,RX=37820,PX=37821,kX=36492,hot=2200,pot=2201,mot=2202,Fw=2300,z_=2301,dk=2302,y1=2400,_1=2401,W4=2402,CU=2500,got=2501,vot=1,afe=2,p0=3e3,Zi=3001,yot=3200,_ot=3201,ov=0,bot=1,Of="srgb",lg="srgb-linear",fk=7680,Sot=519,qO=35044,LX="300 es",jO=1035;let E0=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}};const oo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let OX=1234567;const Y1=Math.PI/180,Uw=180/Math.PI;function Qu(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(oo[n&255]+oo[n>>8&255]+oo[n>>16&255]+oo[n>>24&255]+"-"+oo[e&255]+oo[e>>8&255]+"-"+oo[e>>16&15|64]+oo[e>>24&255]+"-"+oo[t&63|128]+oo[t>>8&255]+"-"+oo[t>>16&255]+oo[t>>24&255]+oo[i&255]+oo[i>>8&255]+oo[i>>16&255]+oo[i>>24&255]).toLowerCase()}function fa(n,e,t){return Math.max(e,Math.min(t,n))}function AU(n,e){return(n%e+e)%e}function xot(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function wot(n,e,t){return n!==e?(t-n)/(e-n):0}function _2(n,e,t){return(1-t)*n+t*e}function Tot(n,e,t,i){return _2(n,e,1-Math.exp(-t*i))}function Cot(n,e=1){return e-Math.abs(AU(n,e*2)-e)}function Aot(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Eot(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Mot(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Iot(n,e){return n+Math.random()*(e-n)}function Dot(n){return n*(.5-Math.random())}function Rot(n){n!==void 0&&(OX=n);let e=OX+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Pot(n){return n*Y1}function kot(n){return n*Uw}function KO(n){return(n&n-1)===0&&n!==0}function ofe(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function q4(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Lot(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+i)/2),c=a((e+i)/2),d=s((e-i)/2),f=a((e-i)/2),h=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*c,l*d,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*d,o*u);break;case"ZXZ":n.set(l*d,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*h,o*u);break;case"YXY":n.set(l*h,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*h,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Oot(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Not(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var bo=Object.freeze({__proto__:null,DEG2RAD:Y1,RAD2DEG:Uw,generateUUID:Qu,clamp:fa,euclideanModulo:AU,mapLinear:xot,inverseLerp:wot,lerp:_2,damp:Tot,pingpong:Cot,smoothstep:Aot,smootherstep:Eot,randInt:Mot,randFloat:Iot,randFloatSpread:Dot,seededRandom:Rot,degToRad:Pot,radToDeg:kot,isPowerOfTwo:KO,ceilPowerOfTwo:ofe,floorPowerOfTwo:q4,setQuaternionFromProperEuler:Lot,normalize:Not,denormalize:Oot});let on=class lfe{constructor(e=0,t=0){lfe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},qu=class ufe{constructor(){ufe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],c=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],g=r[3],v=r[6],_=r[1],y=r[4],b=r[7],x=r[2],w=r[5],A=r[8];return s[0]=a*m+o*_+l*x,s[3]=a*g+o*y+l*w,s[6]=a*v+o*b+l*A,s[1]=u*m+c*_+d*x,s[4]=u*g+c*y+d*w,s[7]=u*v+c*b+d*A,s[2]=f*m+h*_+p*x,s[5]=f*g+h*y+p*w,s[8]=f*v+h*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-i*s*c+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*a-o*u,f=o*l-c*s,h=u*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*u-c*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(c*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-u*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],u=r[4],c=r[7];return r[0]=t*s+i*l,r[3]=t*a+i*u,r[6]=t*o+i*c,r[1]=-i*s+t*l,r[4]=-i*a+t*u,r[7]=-i*o+t*c,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};function cfe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>65535)return!0;return!1}const Bot={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function b1(n,e){return new Bot[n](e)}function zw(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Dg(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function t3(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const hk={[Of]:{[lg]:Dg},[lg]:{[Of]:t3}},bc={legacyMode:!0,get workingColorSpace(){return lg},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(hk[e]&&hk[e][t]!==void 0){const i=hk[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},dfe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},oa={r:0,g:0,b:0},Sc={h:0,s:0,l:0},QA={h:0,s:0,l:0};function pk(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function ZA(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}let Fn=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Of){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,bc.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=lg){return this.r=e,this.g=t,this.b=i,bc.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=lg){if(e=AU(e,1),t=fa(t,0,1),i=fa(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=pk(a,s,e+1/3),this.g=pk(a,s,e),this.b=pk(a,s,e-1/3)}return bc.toWorkingColorSpace(this,r),this}setStyle(e,t=Of){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,bc.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,bc.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,u=parseInt(s[2],10)/100,c=parseInt(s[3],10)/100;return i(s[4]),this.setHSL(l,u,c,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,bc.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,bc.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=Of){const i=dfe[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dg(e.r),this.g=Dg(e.g),this.b=Dg(e.b),this}copyLinearToSRGB(e){return this.r=t3(e.r),this.g=t3(e.g),this.b=t3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Of){return bc.fromWorkingColorSpace(ZA(this,oa),e),fa(oa.r*255,0,255)<<16^fa(oa.g*255,0,255)<<8^fa(oa.b*255,0,255)<<0}getHexString(e=Of){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=lg){bc.fromWorkingColorSpace(ZA(this,oa),t);const i=oa.r,r=oa.g,s=oa.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const d=a-o;switch(u=c<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=lg){return bc.fromWorkingColorSpace(ZA(this,oa),t),e.r=oa.r,e.g=oa.g,e.b=oa.b,e}getStyle(e=Of){return bc.fromWorkingColorSpace(ZA(this,oa),e),e!==Of?`color(${e} ${oa.r} ${oa.g} ${oa.b})`:`rgb(${oa.r*255|0},${oa.g*255|0},${oa.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(Sc),Sc.h+=e,Sc.s+=t,Sc.l+=i,this.setHSL(Sc.h,Sc.s,Sc.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Sc),e.getHSL(QA);const i=_2(Sc.h,QA.h,t),r=_2(Sc.s,QA.s,t),s=_2(Sc.l,QA.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};Fn.NAMES=dfe;let uy,ffe=class{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{uy===void 0&&(uy=zw("canvas")),uy.width=e.width,uy.height=e.height;const i=uy.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=uy}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=zw("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Dg(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Dg(t[i]/255)*255):t[i]=Dg(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},S1=class{constructor(e=null){this.isSource=!0,this.uuid=Qu(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(mk(r[a].image)):s.push(mk(r[a]))}else s=mk(r);i.url=s}return t||(e.images[this.uuid]=i),i}};function mk(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?ffe.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Fot=0,eo=class XO extends E0{constructor(e=XO.DEFAULT_IMAGE,t=XO.DEFAULT_MAPPING,i=ma,r=ma,s=ta,a=Mh,o=Wu,l=jg,u=1,c=p0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Fot++}),this.uuid=Qu(),this.name="",this.source=new S1(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new on(0,0),this.repeat=new on(1,1),this.center=new on(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new qu,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==wU)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Sl:e.x=e.x-Math.floor(e.x);break;case ma:e.x=e.x<0?0:1;break;case Nw:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Sl:e.y=e.y-Math.floor(e.y);break;case ma:e.y=e.y<0?0:1;break;case Nw:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}};eo.DEFAULT_IMAGE=null;eo.DEFAULT_MAPPING=wU;let Rr=class hfe{constructor(e=0,t=0,i=0,r=1){hfe.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(c-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(u+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(u+1)/2,b=(h+1)/2,x=(v+1)/2,w=(c+f)/4,A=(d+m)/4,T=(p+g)/4;return y>b&&y>x?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=A/i):b>x?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=w/r,s=T/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=A/s,r=T/s),this.set(i,r,s,t),this}let _=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(f-c)*(f-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(d-m)/_,this.z=(f-c)/_,this.w=Math.acos((u+h+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Kg=class extends E0{constructor(e,t,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Rr(0,0,e,t),this.scissorTest=!1,this.viewport=new Rr(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new eo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ta,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new S1(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},pfe=class extends eo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ia,this.minFilter=Ia,this.wrapR=ma,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Uot=class extends eo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ia,this.minFilter=Ia,this.wrapR=ma,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},Xa=class{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],u=i[r+1],c=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||u!==h||c!==p){let g=1-o;const v=l*f+u*h+c*p+d*m,_=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const x=Math.sqrt(y),w=Math.atan2(x,v*_);g=Math.sin(g*w)/x,o=Math.sin(o*w)/x}const b=o*_;if(l=l*g+f*b,u=u*g+h*b,c=c*g+p*b,d=d*g+m*b,g===1-o){const x=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=x,u*=x,c*=x,d*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],c=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+c*d+l*h-u*f,e[t+1]=l*p+c*f+u*d-o*h,e[t+2]=u*p+c*h+o*f-l*d,e[t+3]=c*p-o*d-l*f-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),c=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"YXZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"ZXY":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"ZYX":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"YZX":this._x=f*c*d+u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d-f*h*p;break;case"XZY":this._x=f*c*d-u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-u)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(c-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+u)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-u)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(fa(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-i*u,this._z=s*c+a*u+i*l-r*o,this._w=a*c-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},st=class mfe{constructor(e=0,t=0,i=0){mfe.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(NX.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(NX.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*t+a*r-o*i,c=l*i+o*t-s*r,d=l*r+s*i-a*t,f=-s*t-a*i-o*r;return this.x=u*l+f*-s+c*-o-d*-a,this.y=c*l+f*-a+d*-s-u*-o,this.z=d*l+f*-o+u*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return gk.copy(this).projectOnVector(e),this.sub(gk)}reflect(e){return this.sub(gk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(fa(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const gk=new st,NX=new Xa;let lv=class{constructor(e=new st(1/0,1/0,1/0),t=new st(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],d=e[l+1],f=e[l+2];c<t&&(t=c),d<i&&(i=d),f<r&&(r=f),c>s&&(s=c),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),d=e.getY(l),f=e.getZ(l);c<t&&(t=c),d<i&&(i=d),f<r&&(r=f),c>s&&(s=c),d>a&&(a=d),f>o&&(o=f)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=bm.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)bm.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(bm)}else i.boundingBox===null&&i.computeBoundingBox(),vk.copy(i.boundingBox),vk.applyMatrix4(e.matrixWorld),this.union(vk);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,bm),bm.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ax),JA.subVectors(this.max,ax),cy.subVectors(e.a,ax),dy.subVectors(e.b,ax),fy.subVectors(e.c,ax),Yh.subVectors(dy,cy),Qh.subVectors(fy,dy),Sm.subVectors(cy,fy);let t=[0,-Yh.z,Yh.y,0,-Qh.z,Qh.y,0,-Sm.z,Sm.y,Yh.z,0,-Yh.x,Qh.z,0,-Qh.x,Sm.z,0,-Sm.x,-Yh.y,Yh.x,0,-Qh.y,Qh.x,0,-Sm.y,Sm.x,0];return!yk(t,cy,dy,fy,JA)||(t=[1,0,0,0,1,0,0,0,1],!yk(t,cy,dy,fy,JA))?!1:(eE.crossVectors(Yh,Qh),t=[eE.x,eE.y,eE.z],yk(t,cy,dy,fy,JA))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return bm.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(bm).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};const vf=[new st,new st,new st,new st,new st,new st,new st,new st],bm=new st,vk=new lv,cy=new st,dy=new st,fy=new st,Yh=new st,Qh=new st,Sm=new st,ax=new st,JA=new st,eE=new st,xm=new st;function yk(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){xm.fromArray(n,s);const o=r.x*Math.abs(xm.x)+r.y*Math.abs(xm.y)+r.z*Math.abs(xm.z),l=e.dot(xm),u=t.dot(xm),c=i.dot(xm);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const zot=new lv,BX=new st,tE=new st,_k=new st;let uv=class{constructor(e=new st,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):zot.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){_k.subVectors(e,this.center);const t=_k.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.add(_k.multiplyScalar(r/i)),this.radius+=r}return this}union(e){return this.center.equals(e.center)===!0?tE.set(0,0,1).multiplyScalar(e.radius):tE.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(BX.copy(e.center).add(tE)),this.expandByPoint(BX.copy(e.center).sub(tE)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const yf=new st,bk=new st,nE=new st,Zh=new st,Sk=new st,iE=new st,xk=new st;let tR=class{constructor(e=new st,t=new st(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,yf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=yf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(yf.copy(this.direction).multiplyScalar(t).add(this.origin),yf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){bk.copy(e).add(t).multiplyScalar(.5),nE.copy(t).sub(e).normalize(),Zh.copy(this.origin).sub(bk);const s=e.distanceTo(t)*.5,a=-this.direction.dot(nE),o=Zh.dot(this.direction),l=-Zh.dot(nE),u=Zh.lengthSq(),c=Math.abs(1-a*a);let d,f,h,p;if(c>0)if(d=a*l-o,f=a*o-l,p=s*c,d>=0)if(f>=-p)if(f<=p){const m=1/c;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+u}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+u):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+u):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+u);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(d).add(this.origin),r&&r.copy(nE).multiplyScalar(f).add(bk),h}intersectSphere(e,t){yf.subVectors(e.center,this.origin);const i=yf.dot(this.direction),r=yf.dot(yf)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(i=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(i=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,a=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,a=(e.min.y-f.y)*c),i>a||s>r||((s>i||i!==i)&&(i=s),(a<r||r!==r)&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,yf)!==null}intersectTriangle(e,t,i,r,s){Sk.subVectors(t,e),iE.subVectors(i,e),xk.crossVectors(Sk,iE);let a=this.direction.dot(xk),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Zh.subVectors(this.origin,e);const l=o*this.direction.dot(iE.crossVectors(Zh,iE));if(l<0)return null;const u=o*this.direction.dot(Sk.cross(Zh));if(u<0||l+u>a)return null;const c=-o*Zh.dot(xk);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},ri=class YO{constructor(){YO.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=d,v[14]=f,v[3]=h,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new YO().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/hy.setFromMatrixColumn(e,0).length(),s=1/hy.setFromMatrixColumn(e,1).length(),a=1/hy.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*c,h=a*d,p=o*c,m=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=h+p*u,t[5]=f-m*u,t[9]=-o*l,t[2]=m-f*u,t[6]=p+h*u,t[10]=a*l}else if(e.order==="YXZ"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*u,t[1]=a*d,t[5]=a*c,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*c,t[9]=m-f*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*c,h=a*d,p=o*c,m=o*d;t[0]=l*c,t[4]=p*u-h,t[8]=f*u+m,t[1]=l*d,t[5]=m*u+f,t[9]=h*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*u,p=o*l,m=o*u;t[0]=l*c,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*u,p=o*l,m=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=f*d+m,t[5]=a*c,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*c,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Hot,e,Vot)}lookAt(e,t,i){const r=this.elements;return ql.subVectors(e,t),ql.lengthSq()===0&&(ql.z=1),ql.normalize(),Jh.crossVectors(i,ql),Jh.lengthSq()===0&&(Math.abs(i.z)===1?ql.x+=1e-4:ql.z+=1e-4,ql.normalize(),Jh.crossVectors(i,ql)),Jh.normalize(),rE.crossVectors(ql,Jh),r[0]=Jh.x,r[4]=rE.x,r[8]=ql.x,r[1]=Jh.y,r[5]=rE.y,r[9]=ql.y,r[2]=Jh.z,r[6]=rE.z,r[10]=ql.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],c=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],g=i[10],v=i[14],_=i[3],y=i[7],b=i[11],x=i[15],w=r[0],A=r[4],T=r[8],C=r[12],E=r[1],I=r[5],k=r[9],O=r[13],U=r[2],z=r[6],L=r[10],G=r[14],H=r[3],F=r[7],X=r[11],te=r[15];return s[0]=a*w+o*E+l*U+u*H,s[4]=a*A+o*I+l*z+u*F,s[8]=a*T+o*k+l*L+u*X,s[12]=a*C+o*O+l*G+u*te,s[1]=c*w+d*E+f*U+h*H,s[5]=c*A+d*I+f*z+h*F,s[9]=c*T+d*k+f*L+h*X,s[13]=c*C+d*O+f*G+h*te,s[2]=p*w+m*E+g*U+v*H,s[6]=p*A+m*I+g*z+v*F,s[10]=p*T+m*k+g*L+v*X,s[14]=p*C+m*O+g*G+v*te,s[3]=_*w+y*E+b*U+x*H,s[7]=_*A+y*I+b*z+x*F,s[11]=_*T+y*k+b*L+x*X,s[15]=_*C+y*O+b*G+x*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*d-r*u*d-s*o*f+i*u*f+r*o*h-i*l*h)+m*(+t*l*h-t*u*f+s*a*f-r*a*h+r*u*c-s*l*c)+g*(+t*u*d-t*o*h-s*a*d+i*a*h+s*o*c-i*u*c)+v*(-r*o*c-t*l*d+t*o*f+r*a*d-i*a*f+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=d*g*u-m*f*u+m*l*h-o*g*h-d*l*v+o*f*v,y=p*f*u-c*g*u-p*l*h+a*g*h+c*l*v-a*f*v,b=c*m*u-p*d*u+p*o*h-a*m*h-c*o*v+a*d*v,x=p*d*l-c*m*l-p*o*f+a*m*f+c*o*g-a*d*g,w=t*_+i*y+r*b+s*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=_*A,e[1]=(m*f*s-d*g*s-m*r*h+i*g*h+d*r*v-i*f*v)*A,e[2]=(o*g*s-m*l*s+m*r*u-i*g*u-o*r*v+i*l*v)*A,e[3]=(d*l*s-o*f*s-d*r*u+i*f*u+o*r*h-i*l*h)*A,e[4]=y*A,e[5]=(c*g*s-p*f*s+p*r*h-t*g*h-c*r*v+t*f*v)*A,e[6]=(p*l*s-a*g*s-p*r*u+t*g*u+a*r*v-t*l*v)*A,e[7]=(a*f*s-c*l*s+c*r*u-t*f*u-a*r*h+t*l*h)*A,e[8]=b*A,e[9]=(p*d*s-c*m*s-p*i*h+t*m*h+c*i*v-t*d*v)*A,e[10]=(a*m*s-p*o*s+p*i*u-t*m*u-a*i*v+t*o*v)*A,e[11]=(c*o*s-a*d*s-c*i*u+t*d*u+a*i*h-t*o*h)*A,e[12]=x*A,e[13]=(c*m*r-p*d*r+p*i*f-t*m*f-c*i*g+t*d*g)*A,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*g-t*o*g)*A,e[15]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*f+t*o*f)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+i,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,d=o+o,f=s*u,h=s*c,p=s*d,m=a*c,g=a*d,v=o*d,_=l*u,y=l*c,b=l*d,x=i.x,w=i.y,A=i.z;return r[0]=(1-(m+v))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(f+v))*w,r[6]=(g+_)*w,r[7]=0,r[8]=(p+y)*A,r[9]=(g-_)*A,r[10]=(1-(f+m))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=hy.set(r[0],r[1],r[2]).length();const a=hy.set(r[4],r[5],r[6]).length(),o=hy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],xc.copy(this);const u=1/s,c=1/a,d=1/o;return xc.elements[0]*=u,xc.elements[1]*=u,xc.elements[2]*=u,xc.elements[4]*=c,xc.elements[5]*=c,xc.elements[6]*=c,xc.elements[8]*=d,xc.elements[9]*=d,xc.elements[10]*=d,t.setFromRotationMatrix(xc),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){const o=this.elements,l=2*s/(t-e),u=2*s/(i-r),c=(t+e)/(t-e),d=(i+r)/(i-r),f=-(a+s)/(a-s),h=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=d,o[13]=0,o[2]=0,o[6]=0,o[10]=f,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),u=1/(i-r),c=1/(a-s),d=(t+e)*l,f=(i+r)*u,h=(a+s)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-d,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-f,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const hy=new st,xc=new ri,Hot=new st(0,0,0),Vot=new st(1,1,1),Jh=new st,rE=new st,ql=new st,FX=new ri,UX=new Xa;let Wf=class gfe{constructor(e=0,t=0,i=0,r=gfe.DefaultOrder){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(fa(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-fa(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(fa(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-fa(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(fa(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-fa(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return FX.makeRotationFromQuaternion(e),this.setFromRotationMatrix(FX,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return UX.setFromEuler(this),this.setFromQuaternion(UX,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}};Wf.DefaultOrder="XYZ";Wf.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];let EU=class{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},$ot=0;const zX=new st,py=new Xa,_f=new ri,sE=new st,ox=new st,Got=new st,Wot=new Xa,HX=new st(1,0,0),VX=new st(0,1,0),$X=new st(0,0,1),qot={type:"added"},GX={type:"removed"};let ys=class QO extends E0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:$ot++}),this.uuid=Qu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=QO.DefaultUp.clone();const e=new st,t=new Wf,i=new Xa,r=new st(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ri},normalMatrix:{value:new qu}}),this.matrix=new ri,this.matrixWorld=new ri,this.matrixAutoUpdate=QO.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new EU,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return py.setFromAxisAngle(e,t),this.quaternion.multiply(py),this}rotateOnWorldAxis(e,t){return py.setFromAxisAngle(e,t),this.quaternion.premultiply(py),this}rotateX(e){return this.rotateOnAxis(HX,e)}rotateY(e){return this.rotateOnAxis(VX,e)}rotateZ(e){return this.rotateOnAxis($X,e)}translateOnAxis(e,t){return zX.copy(e).applyQuaternion(this.quaternion),this.position.add(zX.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(HX,e)}translateY(e){return this.translateOnAxis(VX,e)}translateZ(e){return this.translateOnAxis($X,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(_f.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?sE.copy(e):sE.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),ox.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_f.lookAt(ox,sE,this.up):_f.lookAt(sE,ox,this.up),this.quaternion.setFromRotationMatrix(_f),r&&(_f.extractRotation(r.matrixWorld),py.setFromRotationMatrix(_f),this.quaternion.premultiply(py.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(qot)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(GX)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(GX)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_f.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_f.multiply(e.parent.matrixWorld)),e.applyMatrix4(_f),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ox,e,Got),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ox,Wot,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}};ys.DefaultUp=new st(0,1,0);ys.DefaultMatrixAutoUpdate=!0;const wc=new st,bf=new st,wk=new st,Sf=new st,my=new st,gy=new st,WX=new st,Tk=new st,Ck=new st,Ak=new st;let b2=class t1{constructor(e=new st,t=new st,i=new st){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),wc.subVectors(e,t),r.cross(wc);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){wc.subVectors(r,t),bf.subVectors(i,t),wk.subVectors(e,t);const a=wc.dot(wc),o=wc.dot(bf),l=wc.dot(wk),u=bf.dot(bf),c=bf.dot(wk),d=a*u-o*o;if(d===0)return s.set(-2,-1,-1);const f=1/d,h=(u*l-o*c)*f,p=(a*c-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Sf),Sf.x>=0&&Sf.y>=0&&Sf.x+Sf.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Sf),l.set(0,0),l.addScaledVector(s,Sf.x),l.addScaledVector(a,Sf.y),l.addScaledVector(o,Sf.z),l}static isFrontFacing(e,t,i,r){return wc.subVectors(i,t),bf.subVectors(e,t),wc.cross(bf).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wc.subVectors(this.c,this.b),bf.subVectors(this.a,this.b),wc.cross(bf).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return t1.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return t1.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return t1.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return t1.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return t1.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;my.subVectors(r,i),gy.subVectors(s,i),Tk.subVectors(e,i);const l=my.dot(Tk),u=gy.dot(Tk);if(l<=0&&u<=0)return t.copy(i);Ck.subVectors(e,r);const c=my.dot(Ck),d=gy.dot(Ck);if(c>=0&&d<=c)return t.copy(r);const f=l*d-c*u;if(f<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(i).addScaledVector(my,a);Ak.subVectors(e,s);const h=my.dot(Ak),p=gy.dot(Ak);if(p>=0&&h<=p)return t.copy(s);const m=h*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(i).addScaledVector(gy,o);const g=c*p-h*d;if(g<=0&&d-c>=0&&h-p>=0)return WX.subVectors(s,r),o=(d-c)/(d-c+(h-p)),t.copy(r).addScaledVector(WX,o);const v=1/(g+m+f);return a=m*v,o=f*v,t.copy(i).addScaledVector(my,a).addScaledVector(gy,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},jot=0,ia=class extends E0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jot++}),this.uuid=Qu(),this.name="",this.type="Material",this.blending=K1,this.side=f0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=nfe,this.blendDst=ife,this.blendEquation=e1,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=WO,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Sot,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fk,this.stencilZFail=fk,this.stencilZPass=fk,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=i===Aat;continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==K1&&(i.blending=this.blending),this.side!==f0&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Fc=class extends ia{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};const Zs=new st,aE=new on;let Ps=class{constructor(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i===!0,this.usage=qO,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Fn),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this}copyVector2sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new on),t[i++]=a.x,t[i++]=a.y}return this}copyVector3sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new st),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this}copyVector4sArray(e){const t=this.array;let i=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];a===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Rr),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)aE.fromBufferAttribute(this,t),aE.applyMatrix3(e),this.setXY(t,aE.x,aE.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Zs.fromBufferAttribute(this,t),Zs.applyMatrix3(e),this.setXYZ(t,Zs.x,Zs.y,Zs.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Zs.fromBufferAttribute(this,t),Zs.applyMatrix4(e),this.setXYZ(t,Zs.x,Zs.y,Zs.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zs.fromBufferAttribute(this,t),Zs.applyNormalMatrix(e),this.setXYZ(t,Zs.x,Zs.y,Zs.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zs.fromBufferAttribute(this,t),Zs.transformDirection(e),this.setXYZ(t,Zs.x,Zs.y,Zs.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qO&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}},MU=class extends Ps{constructor(e,t,i){super(new Uint16Array(e),t,i)}},vfe=class extends Ps{constructor(e,t,i){super(new Uint32Array(e),t,i)}},Gn=class extends Ps{constructor(e,t,i){super(new Float32Array(e),t,i)}},Kot=0;const Tu=new ri,Ek=new ys,vy=new st,jl=new lv,lx=new lv,Aa=new st;let cr=class yfe extends E0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Kot++}),this.uuid=Qu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(cfe(e)?vfe:MU)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new qu().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Tu.makeRotationFromQuaternion(e),this.applyMatrix4(Tu),this}rotateX(e){return Tu.makeRotationX(e),this.applyMatrix4(Tu),this}rotateY(e){return Tu.makeRotationY(e),this.applyMatrix4(Tu),this}rotateZ(e){return Tu.makeRotationZ(e),this.applyMatrix4(Tu),this}translate(e,t,i){return Tu.makeTranslation(e,t,i),this.applyMatrix4(Tu),this}scale(e,t,i){return Tu.makeScale(e,t,i),this.applyMatrix4(Tu),this}lookAt(e){return Ek.lookAt(e),Ek.updateMatrix(),this.applyMatrix4(Ek.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(vy).negate(),this.translate(vy.x,vy.y,vy.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Gn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new lv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new st(-1/0,-1/0,-1/0),new st(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];jl.setFromBufferAttribute(s),this.morphTargetsRelative?(Aa.addVectors(this.boundingBox.min,jl.min),this.boundingBox.expandByPoint(Aa),Aa.addVectors(this.boundingBox.max,jl.max),this.boundingBox.expandByPoint(Aa)):(this.boundingBox.expandByPoint(jl.min),this.boundingBox.expandByPoint(jl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new uv);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new st,1/0);return}if(e){const i=this.boundingSphere.center;if(jl.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];lx.setFromBufferAttribute(o),this.morphTargetsRelative?(Aa.addVectors(jl.min,lx.min),jl.expandByPoint(Aa),Aa.addVectors(jl.max,lx.max),jl.expandByPoint(Aa)):(jl.expandByPoint(lx.min),jl.expandByPoint(lx.max))}jl.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Aa.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Aa));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)Aa.fromBufferAttribute(o,u),l&&(vy.fromBufferAttribute(e,u),Aa.add(vy)),r=Math.max(r,i.distanceToSquared(Aa))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ps(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let E=0;E<o;E++)u[E]=new st,c[E]=new st;const d=new st,f=new st,h=new st,p=new on,m=new on,g=new on,v=new st,_=new st;function y(E,I,k){d.fromArray(r,E*3),f.fromArray(r,I*3),h.fromArray(r,k*3),p.fromArray(a,E*2),m.fromArray(a,I*2),g.fromArray(a,k*2),f.sub(d),h.sub(d),m.sub(p),g.sub(p);const O=1/(m.x*g.y-g.x*m.y);isFinite(O)&&(v.copy(f).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(O),_.copy(h).multiplyScalar(m.x).addScaledVector(f,-g.x).multiplyScalar(O),u[E].add(v),u[I].add(v),u[k].add(v),c[E].add(_),c[I].add(_),c[k].add(_))}let b=this.groups;b.length===0&&(b=[{start:0,count:i.length}]);for(let E=0,I=b.length;E<I;++E){const k=b[E],O=k.start,U=k.count;for(let z=O,L=O+U;z<L;z+=3)y(i[z+0],i[z+1],i[z+2])}const x=new st,w=new st,A=new st,T=new st;function C(E){A.fromArray(s,E*3),T.copy(A);const I=u[E];x.copy(I),x.sub(A.multiplyScalar(A.dot(I))).normalize(),w.crossVectors(T,I);const O=w.dot(c[E])<0?-1:1;l[E*4]=x.x,l[E*4+1]=x.y,l[E*4+2]=x.z,l[E*4+3]=O}for(let E=0,I=b.length;E<I;++E){const k=b[E],O=k.start,U=k.count;for(let z=O,L=O+U;z<L;z+=3)C(i[z+0]),C(i[z+1]),C(i[z+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ps(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new st,s=new st,a=new st,o=new st,l=new st,u=new st,c=new st,d=new st;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,g),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),u.fromBufferAttribute(i,g),o.add(c),l.add(c),u.add(c),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,u.x,u.y,u.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),i.setXYZ(f+0,c.x,c.y,c.z),i.setXYZ(f+1,c.x,c.y,c.z),i.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const i=this.attributes;for(const r in i){if(e.attributes[r]===void 0)continue;const a=i[r].array,o=e.attributes[r],l=o.array,u=o.itemSize*t,c=Math.min(l.length,a.length-u);for(let d=0,f=u;d<c;d++,f++)a[f]=l[d]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Aa.fromBufferAttribute(e,t),Aa.normalize(),e.setXYZ(t,Aa.x,Aa.y,Aa.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,f=new u.constructor(l.length*c);let h=0,p=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*c;for(let v=0;v<c;v++)f[p++]=u[h++]}return new Ps(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yfe,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,d=u.length;c<d;c++){const f=u[c],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d];c.push(h.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let f=0,h=d.length;f<h;f++)c.push(d[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const d=a[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}};const qX=new ri,yy=new tR,Mk=new uv,ep=new st,tp=new st,np=new st,Ik=new st,Dk=new st,Rk=new st,oE=new st,lE=new st,uE=new st,cE=new on,dE=new on,fE=new on,Pk=new st,hE=new st;let ga=class extends ys{constructor(e=new cr,t=new Fc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),Mk.copy(i.boundingSphere),Mk.applyMatrix4(s),e.ray.intersectsSphere(Mk)===!1)||(qX.copy(s).invert(),yy.copy(e.ray).applyMatrix4(qX),i.boundingBox!==null&&yy.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,u=i.morphAttributes.position,c=i.morphTargetsRelative,d=i.attributes.uv,f=i.attributes.uv2,h=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const v=h[m],_=r[v.materialIndex],y=Math.max(v.start,p.start),b=Math.min(o.count,Math.min(v.start+v.count,p.start+p.count));for(let x=y,w=b;x<w;x+=3){const A=o.getX(x),T=o.getX(x+1),C=o.getX(x+2);a=pE(this,_,e,yy,l,u,c,d,f,A,T,C),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=v.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),g=Math.min(o.count,p.start+p.count);for(let v=m,_=g;v<_;v+=3){const y=o.getX(v),b=o.getX(v+1),x=o.getX(v+2);a=pE(this,r,e,yy,l,u,c,d,f,y,b,x),a&&(a.faceIndex=Math.floor(v/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let m=0,g=h.length;m<g;m++){const v=h[m],_=r[v.materialIndex],y=Math.max(v.start,p.start),b=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let x=y,w=b;x<w;x+=3){const A=x,T=x+1,C=x+2;a=pE(this,_,e,yy,l,u,c,d,f,A,T,C),a&&(a.faceIndex=Math.floor(x/3),a.face.materialIndex=v.materialIndex,t.push(a))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let v=m,_=g;v<_;v+=3){const y=v,b=v+1,x=v+2;a=pE(this,r,e,yy,l,u,c,d,f,y,b,x),a&&(a.faceIndex=Math.floor(v/3),t.push(a))}}}};function Xot(n,e,t,i,r,s,a,o){let l;if(e.side===Gc?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==h0,o),l===null)return null;hE.copy(o),hE.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(hE);return u<t.near||u>t.far?null:{distance:u,point:hE.clone(),object:n}}function pE(n,e,t,i,r,s,a,o,l,u,c,d){ep.fromBufferAttribute(r,u),tp.fromBufferAttribute(r,c),np.fromBufferAttribute(r,d);const f=n.morphTargetInfluences;if(s&&f){oE.set(0,0,0),lE.set(0,0,0),uE.set(0,0,0);for(let p=0,m=s.length;p<m;p++){const g=f[p],v=s[p];g!==0&&(Ik.fromBufferAttribute(v,u),Dk.fromBufferAttribute(v,c),Rk.fromBufferAttribute(v,d),a?(oE.addScaledVector(Ik,g),lE.addScaledVector(Dk,g),uE.addScaledVector(Rk,g)):(oE.addScaledVector(Ik.sub(ep),g),lE.addScaledVector(Dk.sub(tp),g),uE.addScaledVector(Rk.sub(np),g)))}ep.add(oE),tp.add(lE),np.add(uE)}n.isSkinnedMesh&&(n.boneTransform(u,ep),n.boneTransform(c,tp),n.boneTransform(d,np));const h=Xot(n,e,t,i,ep,tp,np,Pk);if(h){o&&(cE.fromBufferAttribute(o,u),dE.fromBufferAttribute(o,c),fE.fromBufferAttribute(o,d),h.uv=b2.getUV(Pk,ep,tp,np,cE,dE,fE,new on)),l&&(cE.fromBufferAttribute(l,u),dE.fromBufferAttribute(l,c),fE.fromBufferAttribute(l,d),h.uv2=b2.getUV(Pk,ep,tp,np,cE,dE,fE,new on));const p={a:u,b:c,c:d,normal:new st,materialIndex:0};b2.getNormal(ep,tp,np,p.normal),h.face=p}return h}let Hw=class _fe extends cr{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Gn(u,3)),this.setAttribute("normal",new Gn(c,3)),this.setAttribute("uv",new Gn(d,2));function p(m,g,v,_,y,b,x,w,A,T,C){const E=b/A,I=x/T,k=b/2,O=x/2,U=w/2,z=A+1,L=T+1;let G=0,H=0;const F=new st;for(let X=0;X<L;X++){const te=X*I-O;for(let re=0;re<z;re++){const ie=re*E-k;F[m]=ie*_,F[g]=te*y,F[v]=U,u.push(F.x,F.y,F.z),F[m]=0,F[g]=0,F[v]=w>0?1:-1,c.push(F.x,F.y,F.z),d.push(re/A),d.push(1-X/T),G+=1}}for(let X=0;X<T;X++)for(let te=0;te<A;te++){const re=f+te+z*X,ie=f+te+z*(X+1),le=f+(te+1)+z*(X+1),ge=f+(te+1)+z*X;l.push(re,ie,ge),l.push(ie,le,ge),H+=6}o.addGroup(h,H,C),h+=H,f+=G}}static fromJSON(e){return new _fe(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function H_(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ho(n){const e={};for(let t=0;t<n.length;t++){const i=H_(n[t]);for(const r in i)e[r]=i[r]}return e}function Yot(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}const Qot={clone:H_,merge:ho};var Zot=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Jot=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;let fh=class extends ia{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Zot,this.fragmentShader=Jot,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=H_(e.uniforms),this.uniformsGroups=Yot(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}},bfe=class extends ys{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ri,this.projectionMatrix=new ri,this.projectionMatrixInverse=new ri}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ha=class extends bfe{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Uw*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Y1*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Uw*2*Math.atan(Math.tan(Y1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Y1*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/u,r*=a.width/l,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const _y=90,by=1;let elt=class extends ys{constructor(e,t,i){if(super(),this.type="CubeCamera",i.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=i;const r=new ha(_y,by,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new st(1,0,0)),this.add(r);const s=new ha(_y,by,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new st(-1,0,0)),this.add(s);const a=new ha(_y,by,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new st(0,1,0)),this.add(a);const o=new ha(_y,by,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new st(0,-1,0)),this.add(o);const l=new ha(_y,by,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new st(0,0,1)),this.add(l);const u=new ha(_y,by,e,t);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new st(0,0,-1)),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,u]=this.children,c=e.getRenderTarget(),d=e.toneMapping,f=e.xr.enabled;e.toneMapping=Zf,e.xr.enabled=!1;const h=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=h,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=d,e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}},IU=class extends eo{constructor(e,t,i,r,s,a,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Wg,super(e,t,i,r,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},tlt=class extends Kg{constructor(e,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new IU(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ta}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Hw(5,5,5),s=new fh({name:"CubemapFromEquirect",uniforms:H_(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Gc,blending:Vp});s.uniforms.tEquirect.value=t;const a=new ga(r,s),o=t.minFilter;return t.minFilter===Mh&&(t.minFilter=ta),new elt(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}};const kk=new st,nlt=new st,ilt=new qu;let Pm=class{constructor(e=new st(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=kk.subVectors(i,t).cross(nlt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(kk),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||ilt.getNormalMatrix(e),r=this.coplanarPoint(kk).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Sy=new uv,mE=new st;let DU=class{constructor(e=new Pm,t=new Pm,i=new Pm,r=new Pm,s=new Pm,a=new Pm){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],u=i[5],c=i[6],d=i[7],f=i[8],h=i[9],p=i[10],m=i[11],g=i[12],v=i[13],_=i[14],y=i[15];return t[0].setComponents(o-r,d-l,m-f,y-g).normalize(),t[1].setComponents(o+r,d+l,m+f,y+g).normalize(),t[2].setComponents(o+s,d+u,m+h,y+v).normalize(),t[3].setComponents(o-s,d-u,m-h,y-v).normalize(),t[4].setComponents(o-a,d-c,m-p,y-_).normalize(),t[5].setComponents(o+a,d+c,m+p,y+_).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Sy.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Sy)}intersectsSprite(e){return Sy.center.set(0,0,0),Sy.radius=.7071067811865476,Sy.applyMatrix4(e.matrixWorld),this.intersectsSphere(Sy)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(mE.x=r.normal.x>0?e.max.x:e.min.x,mE.y=r.normal.y>0?e.max.y:e.min.y,mE.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function Sfe(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function rlt(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,c){const d=u.array,f=u.usage,h=n.createBuffer();n.bindBuffer(c,h),n.bufferData(c,d,f),u.onUploadCallback();let p;if(d instanceof Float32Array)p=5126;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(d instanceof Int16Array)p=5122;else if(d instanceof Uint32Array)p=5125;else if(d instanceof Int32Array)p=5124;else if(d instanceof Int8Array)p=5120;else if(d instanceof Uint8Array)p=5121;else if(d instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:h,type:p,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,d){const f=c.array,h=c.updateRange;n.bindBuffer(d,u),h.count===-1?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f,h.offset,h.count):n.bufferSubData(d,h.offset*f.BYTES_PER_ELEMENT,f.subarray(h.offset,h.offset+h.count)),h.count=-1)}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(n.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=i.get(u);(!f||f.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const d=i.get(u);d===void 0?i.set(u,r(u,c)):d.version<u.version&&(s(d.buffer,u,c),d.version=u.version)}return{get:a,remove:o,update:l}}let ZO=class xfe extends cr{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,c=l+1,d=e/o,f=t/l,h=[],p=[],m=[],g=[];for(let v=0;v<c;v++){const _=v*f-a;for(let y=0;y<u;y++){const b=y*d-s;p.push(b,-_,0),m.push(0,0,1),g.push(y/o),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<o;_++){const y=_+u*v,b=_+u*(v+1),x=_+1+u*(v+1),w=_+1+u*v;h.push(y,b,w),h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new Gn(p,3)),this.setAttribute("normal",new Gn(m,3)),this.setAttribute("uv",new Gn(g,2))}static fromJSON(e){return new xfe(e.width,e.height,e.widthSegments,e.heightSegments)}};var slt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,alt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,olt=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,llt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ult=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,clt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,dlt="vec3 transformed = vec3( position );",flt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,hlt=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,plt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,mlt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,glt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,vlt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,ylt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_lt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,blt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Slt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,xlt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,wlt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Tlt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,Clt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Alt=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Elt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Mlt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Ilt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Dlt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Rlt="gl_FragColor = linearToOutputTexel( gl_FragColor );",Plt=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,klt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Llt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Olt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nlt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Blt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Flt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Ult=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,zlt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Hlt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Vlt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,$lt=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Glt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Wlt=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,qlt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,jlt=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Klt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Xlt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,Ylt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Qlt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Zlt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Jlt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,eut=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,tut=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,nut=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,iut=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,rut=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,sut=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,aut=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,out=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,lut=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,uut=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,cut=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,dut=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fut=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,hut=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,put=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,mut=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,gut=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,vut=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,yut=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,_ut=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,but=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Sut=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xut=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,wut=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Tut=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,Cut=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Aut=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Eut=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Mut=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Iut=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Dut=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Rut=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Put=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kut=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Lut=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Out=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Nut=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,But=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Fut=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Uut=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,zut=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Hut=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Vut=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$ut=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Gut=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Wut=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qut=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,jut=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,Kut=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,Xut=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,Yut=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Qut=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Zut=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Jut=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,ect=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,tct=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const nct=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,ict=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rct=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,sct=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,act=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,oct=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,lct=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,uct=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,cct=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,dct=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,fct=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hct=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,pct=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,mct=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gct=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vct=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yct=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_ct=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bct=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Sct=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xct=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,wct=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tct=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Cct=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Act=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ect=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mct=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Ict=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Dct=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rct=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Pct=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kct=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sr={alphamap_fragment:slt,alphamap_pars_fragment:alt,alphatest_fragment:olt,alphatest_pars_fragment:llt,aomap_fragment:ult,aomap_pars_fragment:clt,begin_vertex:dlt,beginnormal_vertex:flt,bsdfs:hlt,iridescence_fragment:plt,bumpmap_pars_fragment:mlt,clipping_planes_fragment:glt,clipping_planes_pars_fragment:vlt,clipping_planes_pars_vertex:ylt,clipping_planes_vertex:_lt,color_fragment:blt,color_pars_fragment:Slt,color_pars_vertex:xlt,color_vertex:wlt,common:Tlt,cube_uv_reflection_fragment:Clt,defaultnormal_vertex:Alt,displacementmap_pars_vertex:Elt,displacementmap_vertex:Mlt,emissivemap_fragment:Ilt,emissivemap_pars_fragment:Dlt,encodings_fragment:Rlt,encodings_pars_fragment:Plt,envmap_fragment:klt,envmap_common_pars_fragment:Llt,envmap_pars_fragment:Olt,envmap_pars_vertex:Nlt,envmap_physical_pars_fragment:jlt,envmap_vertex:Blt,fog_vertex:Flt,fog_pars_vertex:Ult,fog_fragment:zlt,fog_pars_fragment:Hlt,gradientmap_pars_fragment:Vlt,lightmap_fragment:$lt,lightmap_pars_fragment:Glt,lights_lambert_vertex:Wlt,lights_pars_begin:qlt,lights_toon_fragment:Klt,lights_toon_pars_fragment:Xlt,lights_phong_fragment:Ylt,lights_phong_pars_fragment:Qlt,lights_physical_fragment:Zlt,lights_physical_pars_fragment:Jlt,lights_fragment_begin:eut,lights_fragment_maps:tut,lights_fragment_end:nut,logdepthbuf_fragment:iut,logdepthbuf_pars_fragment:rut,logdepthbuf_pars_vertex:sut,logdepthbuf_vertex:aut,map_fragment:out,map_pars_fragment:lut,map_particle_fragment:uut,map_particle_pars_fragment:cut,metalnessmap_fragment:dut,metalnessmap_pars_fragment:fut,morphcolor_vertex:hut,morphnormal_vertex:put,morphtarget_pars_vertex:mut,morphtarget_vertex:gut,normal_fragment_begin:vut,normal_fragment_maps:yut,normal_pars_fragment:_ut,normal_pars_vertex:but,normal_vertex:Sut,normalmap_pars_fragment:xut,clearcoat_normal_fragment_begin:wut,clearcoat_normal_fragment_maps:Tut,clearcoat_pars_fragment:Cut,iridescence_pars_fragment:Aut,output_fragment:Eut,packing:Mut,premultiplied_alpha_fragment:Iut,project_vertex:Dut,dithering_fragment:Rut,dithering_pars_fragment:Put,roughnessmap_fragment:kut,roughnessmap_pars_fragment:Lut,shadowmap_pars_fragment:Out,shadowmap_pars_vertex:Nut,shadowmap_vertex:But,shadowmask_pars_fragment:Fut,skinbase_vertex:Uut,skinning_pars_vertex:zut,skinning_vertex:Hut,skinnormal_vertex:Vut,specularmap_fragment:$ut,specularmap_pars_fragment:Gut,tonemapping_fragment:Wut,tonemapping_pars_fragment:qut,transmission_fragment:jut,transmission_pars_fragment:Kut,uv_pars_fragment:Xut,uv_pars_vertex:Yut,uv_vertex:Qut,uv2_pars_fragment:Zut,uv2_pars_vertex:Jut,uv2_vertex:ect,worldpos_vertex:tct,background_vert:nct,background_frag:ict,cube_vert:rct,cube_frag:sct,depth_vert:act,depth_frag:oct,distanceRGBA_vert:lct,distanceRGBA_frag:uct,equirect_vert:cct,equirect_frag:dct,linedashed_vert:fct,linedashed_frag:hct,meshbasic_vert:pct,meshbasic_frag:mct,meshlambert_vert:gct,meshlambert_frag:vct,meshmatcap_vert:yct,meshmatcap_frag:_ct,meshnormal_vert:bct,meshnormal_frag:Sct,meshphong_vert:xct,meshphong_frag:wct,meshphysical_vert:Tct,meshphysical_frag:Cct,meshtoon_vert:Act,meshtoon_frag:Ect,points_vert:Mct,points_frag:Ict,shadow_vert:Dct,shadow_frag:Rct,sprite_vert:Pct,sprite_frag:kct},Hn={common:{diffuse:{value:new Fn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new qu},uv2Transform:{value:new qu},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new on(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new qu}},sprite:{diffuse:{value:new Fn(16777215)},opacity:{value:1},center:{value:new on(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new qu}}},_d={basic:{uniforms:ho([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.fog]),vertexShader:sr.meshbasic_vert,fragmentShader:sr.meshbasic_frag},lambert:{uniforms:ho([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.fog,Hn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:sr.meshlambert_vert,fragmentShader:sr.meshlambert_frag},phong:{uniforms:ho([Hn.common,Hn.specularmap,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,Hn.lights,{emissive:{value:new Fn(0)},specular:{value:new Fn(1118481)},shininess:{value:30}}]),vertexShader:sr.meshphong_vert,fragmentShader:sr.meshphong_frag},standard:{uniforms:ho([Hn.common,Hn.envmap,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.roughnessmap,Hn.metalnessmap,Hn.fog,Hn.lights,{emissive:{value:new Fn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sr.meshphysical_vert,fragmentShader:sr.meshphysical_frag},toon:{uniforms:ho([Hn.common,Hn.aomap,Hn.lightmap,Hn.emissivemap,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.gradientmap,Hn.fog,Hn.lights,{emissive:{value:new Fn(0)}}]),vertexShader:sr.meshtoon_vert,fragmentShader:sr.meshtoon_frag},matcap:{uniforms:ho([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,Hn.fog,{matcap:{value:null}}]),vertexShader:sr.meshmatcap_vert,fragmentShader:sr.meshmatcap_frag},points:{uniforms:ho([Hn.points,Hn.fog]),vertexShader:sr.points_vert,fragmentShader:sr.points_frag},dashed:{uniforms:ho([Hn.common,Hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sr.linedashed_vert,fragmentShader:sr.linedashed_frag},depth:{uniforms:ho([Hn.common,Hn.displacementmap]),vertexShader:sr.depth_vert,fragmentShader:sr.depth_frag},normal:{uniforms:ho([Hn.common,Hn.bumpmap,Hn.normalmap,Hn.displacementmap,{opacity:{value:1}}]),vertexShader:sr.meshnormal_vert,fragmentShader:sr.meshnormal_frag},sprite:{uniforms:ho([Hn.sprite,Hn.fog]),vertexShader:sr.sprite_vert,fragmentShader:sr.sprite_frag},background:{uniforms:{uvTransform:{value:new qu},t2D:{value:null}},vertexShader:sr.background_vert,fragmentShader:sr.background_frag},cube:{uniforms:ho([Hn.envmap,{opacity:{value:1}}]),vertexShader:sr.cube_vert,fragmentShader:sr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sr.equirect_vert,fragmentShader:sr.equirect_frag},distanceRGBA:{uniforms:ho([Hn.common,Hn.displacementmap,{referencePosition:{value:new st},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sr.distanceRGBA_vert,fragmentShader:sr.distanceRGBA_frag},shadow:{uniforms:ho([Hn.lights,Hn.fog,{color:{value:new Fn(0)},opacity:{value:1}}]),vertexShader:sr.shadow_vert,fragmentShader:sr.shadow_frag}};_d.physical={uniforms:ho([_d.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new on(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Fn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new on},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Fn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Fn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:sr.meshphysical_vert,fragmentShader:sr.meshphysical_frag};function Lct(n,e,t,i,r,s){const a=new Fn(0);let o=r===!0?0:1,l,u,c=null,d=0,f=null;function h(m,g){let v=!1,_=g.isScene===!0?g.background:null;_&&_.isTexture&&(_=e.get(_));const y=n.xr,b=y.getSession&&y.getSession();b&&b.environmentBlendMode==="additive"&&(_=null),_===null?p(a,o):_&&_.isColor&&(p(_,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===zT)?(u===void 0&&(u=new ga(new Hw(1,1,1),new fh({name:"BackgroundCubeMaterial",uniforms:H_(_d.cube.uniforms),vertexShader:_d.cube.vertexShader,fragmentShader:_d.cube.fragmentShader,side:Gc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(x,w,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(u)),u.material.uniforms.envMap.value=_,u.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,(c!==_||d!==_.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,c=_,d=_.version,f=n.toneMapping),u.layers.enableAll(),m.unshift(u,u.geometry,u.material,0,0,null)):_&&_.isTexture&&(l===void 0&&(l=new ga(new ZO(2,2),new fh({name:"BackgroundMaterial",uniforms:H_(_d.background.uniforms),vertexShader:_d.background.vertexShader,fragmentShader:_d.background.fragmentShader,side:f0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=_,_.matrixAutoUpdate===!0&&_.updateMatrix(),l.material.uniforms.uvTransform.value.copy(_.matrix),(c!==_||d!==_.version||f!==n.toneMapping)&&(l.material.needsUpdate=!0,c=_,d=_.version,f=n.toneMapping),l.layers.enableAll(),m.unshift(l,l.geometry,l.material,0,0,null))}function p(m,g){t.buffers.color.setClear(m.r,m.g,m.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(m,g=1){a.set(m),o=g,p(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(m){o=m,p(a,o)},render:h}}function Oct(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=g(null);let u=l,c=!1;function d(U,z,L,G,H){let F=!1;if(a){const X=m(G,L,z);u!==X&&(u=X,h(u.object)),F=v(U,G,L,H),F&&_(U,G,L,H)}else{const X=z.wireframe===!0;(u.geometry!==G.id||u.program!==L.id||u.wireframe!==X)&&(u.geometry=G.id,u.program=L.id,u.wireframe=X,F=!0)}H!==null&&t.update(H,34963),(F||c)&&(c=!1,T(U,z,L,G),H!==null&&n.bindBuffer(34963,t.get(H).buffer))}function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function h(U){return i.isWebGL2?n.bindVertexArray(U):s.bindVertexArrayOES(U)}function p(U){return i.isWebGL2?n.deleteVertexArray(U):s.deleteVertexArrayOES(U)}function m(U,z,L){const G=L.wireframe===!0;let H=o[U.id];H===void 0&&(H={},o[U.id]=H);let F=H[z.id];F===void 0&&(F={},H[z.id]=F);let X=F[G];return X===void 0&&(X=g(f()),F[G]=X),X}function g(U){const z=[],L=[],G=[];for(let H=0;H<r;H++)z[H]=0,L[H]=0,G[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:L,attributeDivisors:G,object:U,attributes:{},index:null}}function v(U,z,L,G){const H=u.attributes,F=z.attributes;let X=0;const te=L.getAttributes();for(const re in te)if(te[re].location>=0){const le=H[re];let ge=F[re];if(ge===void 0&&(re==="instanceMatrix"&&U.instanceMatrix&&(ge=U.instanceMatrix),re==="instanceColor"&&U.instanceColor&&(ge=U.instanceColor)),le===void 0||le.attribute!==ge||ge&&le.data!==ge.data)return!0;X++}return u.attributesNum!==X||u.index!==G}function _(U,z,L,G){const H={},F=z.attributes;let X=0;const te=L.getAttributes();for(const re in te)if(te[re].location>=0){let le=F[re];le===void 0&&(re==="instanceMatrix"&&U.instanceMatrix&&(le=U.instanceMatrix),re==="instanceColor"&&U.instanceColor&&(le=U.instanceColor));const ge={};ge.attribute=le,le&&le.data&&(ge.data=le.data),H[re]=ge,X++}u.attributes=H,u.attributesNum=X,u.index=G}function y(){const U=u.newAttributes;for(let z=0,L=U.length;z<L;z++)U[z]=0}function b(U){x(U,0)}function x(U,z){const L=u.newAttributes,G=u.enabledAttributes,H=u.attributeDivisors;L[U]=1,G[U]===0&&(n.enableVertexAttribArray(U),G[U]=1),H[U]!==z&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](U,z),H[U]=z)}function w(){const U=u.newAttributes,z=u.enabledAttributes;for(let L=0,G=z.length;L<G;L++)z[L]!==U[L]&&(n.disableVertexAttribArray(L),z[L]=0)}function A(U,z,L,G,H,F){i.isWebGL2===!0&&(L===5124||L===5125)?n.vertexAttribIPointer(U,z,L,H,F):n.vertexAttribPointer(U,z,L,G,H,F)}function T(U,z,L,G){if(i.isWebGL2===!1&&(U.isInstancedMesh||G.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;y();const H=G.attributes,F=L.getAttributes(),X=z.defaultAttributeValues;for(const te in F){const re=F[te];if(re.location>=0){let ie=H[te];if(ie===void 0&&(te==="instanceMatrix"&&U.instanceMatrix&&(ie=U.instanceMatrix),te==="instanceColor"&&U.instanceColor&&(ie=U.instanceColor)),ie!==void 0){const le=ie.normalized,ge=ie.itemSize,pe=t.get(ie);if(pe===void 0)continue;const ye=pe.buffer,Oe=pe.type,Be=pe.bytesPerElement;if(ie.isInterleavedBufferAttribute){const Ye=ie.data,Ze=Ye.stride,Q=ie.offset;if(Ye.isInstancedInterleavedBuffer){for(let me=0;me<re.locationSize;me++)x(re.location+me,Ye.meshPerAttribute);U.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let me=0;me<re.locationSize;me++)b(re.location+me);n.bindBuffer(34962,ye);for(let me=0;me<re.locationSize;me++)A(re.location+me,ge/re.locationSize,Oe,le,Ze*Be,(Q+ge/re.locationSize*me)*Be)}else{if(ie.isInstancedBufferAttribute){for(let Ye=0;Ye<re.locationSize;Ye++)x(re.location+Ye,ie.meshPerAttribute);U.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=ie.meshPerAttribute*ie.count)}else for(let Ye=0;Ye<re.locationSize;Ye++)b(re.location+Ye);n.bindBuffer(34962,ye);for(let Ye=0;Ye<re.locationSize;Ye++)A(re.location+Ye,ge/re.locationSize,Oe,le,ge*Be,ge/re.locationSize*Ye*Be)}}else if(X!==void 0){const le=X[te];if(le!==void 0)switch(le.length){case 2:n.vertexAttrib2fv(re.location,le);break;case 3:n.vertexAttrib3fv(re.location,le);break;case 4:n.vertexAttrib4fv(re.location,le);break;default:n.vertexAttrib1fv(re.location,le)}}}}w()}function C(){k();for(const U in o){const z=o[U];for(const L in z){const G=z[L];for(const H in G)p(G[H].object),delete G[H];delete z[L]}delete o[U]}}function E(U){if(o[U.id]===void 0)return;const z=o[U.id];for(const L in z){const G=z[L];for(const H in G)p(G[H].object),delete G[H];delete z[L]}delete o[U.id]}function I(U){for(const z in o){const L=o[z];if(L[U.id]===void 0)continue;const G=L[U.id];for(const H in G)p(G[H].object),delete G[H];delete L[U.id]}}function k(){O(),c=!0,u!==l&&(u=l,h(u.object))}function O(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:k,resetDefaultState:O,dispose:C,releaseStatesOfGeometry:E,releaseStatesOfProgram:I,initAttributes:y,enableAttribute:b,disableUnusedAttributes:w}}function Nct(n,e,t,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,d){if(d===0)return;let f,h;if(r)f=n,h="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),h="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[h](s,u,c,d),t.update(c,s,d)}this.setMode=a,this.render=o,this.renderInstances=l}function Bct(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){if(A==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=n.getParameter(34930),f=n.getParameter(35660),h=n.getParameter(3379),p=n.getParameter(34076),m=n.getParameter(34921),g=n.getParameter(36347),v=n.getParameter(36348),_=n.getParameter(36349),y=f>0,b=a||e.has("OES_texture_float"),x=y&&b,w=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}function Fct(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Pm,o=new qu,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f,h){const p=d.length!==0||f||i!==0||r;return r=f,t=c(d,h,0),i=d.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!r||p===null||p.length===0||s&&!g)s?c(null):u();else{const _=s?0:i,y=_*4;let b=v.clippingState||null;l.value=b,b=c(p,f,y,h);for(let x=0;x!==y;++x)b[x]=t[x];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(d,f,h,p){const m=d!==null?d.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=h+m*4,_=f.matrixWorldInverse;o.getNormalMatrix(_),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,b=h;y!==m;++y,b+=4)a.copy(d[y]).applyMatrix4(_,o),a.normal.toArray(g,b),g[b+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function Uct(n){let e=new WeakMap;function t(a,o){return o===Ow?a.mapping=Wg:o===V4&&(a.mapping=qg),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===Ow||o===V4)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new tlt(l.height/2);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}let Pb=class extends bfe{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}};const x1=4,jX=[.125,.215,.35,.446,.526,.582],$m=20,Lk=new Pb,KX=new Fn;let Ok=null;const km=(1+Math.sqrt(5))/2,xy=1/km,XX=[new st(1,1,1),new st(-1,1,1),new st(1,1,-1),new st(-1,1,-1),new st(0,km,xy),new st(0,km,-xy),new st(xy,0,km),new st(-xy,0,km),new st(km,xy,0),new st(-km,xy,0)];let YX=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Ok=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=JX(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=ZX(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Ok),e.scissorTest=!1,gE(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wg||e.mapping===qg?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Ok=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ta,minFilter:ta,generateMipmaps:!1,type:Bw,format:Wu,encoding:p0,depthBuffer:!1},r=QX(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=QX(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=zct(s)),this._blurMaterial=Hct(s,e,t)}return r}_compileMaterial(e){const t=new ga(this._lodPlanes[0],e);this._renderer.compile(t,Lk)}_sceneToCubeUV(e,t,i,r){const o=new ha(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,f=c.toneMapping;c.getClearColor(KX),c.toneMapping=Zf,c.autoClear=!1;const h=new Fc({name:"PMREM.Background",side:Gc,depthWrite:!1,depthTest:!1}),p=new ga(new Hw,h);let m=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,m=!0):(h.color.copy(KX),m=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(o.up.set(0,l[v],0),o.lookAt(u[v],0,0)):_===1?(o.up.set(0,0,l[v]),o.lookAt(0,u[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,u[v]));const y=this._cubeSize;gE(r,_*y,v>2?y:0,y,y),c.setRenderTarget(r),m&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=d,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Wg||e.mapping===qg;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=JX()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=ZX());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new ga(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;gE(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,Lk)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=XX[(r-1)%XX.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new ga(this._lodPlanes[r],u),f=u.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*$m-1),m=s/p,g=isFinite(s)?1+Math.floor(c*m):$m;g>$m&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${$m}`);const v=[];let _=0;for(let A=0;A<$m;++A){const T=A/m,C=Math.exp(-T*T/2);v.push(C),A===0?_+=C:A<g&&(_+=2*C)}for(let A=0;A<v.length;A++)v[A]=v[A]/_;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=v,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-i;const b=this._sizeLods[r],x=3*b*(r>y-x1?r-y+x1:0),w=4*(this._cubeSize-b);gE(t,x,w,3*b,2*b),l.setRenderTarget(t),l.render(d,Lk)}};function zct(n){const e=[],t=[],i=[];let r=n;const s=n-x1+1+jX.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-x1?l=jX[a-n+x1-1]:a===0&&(l=0),i.push(l);const u=1/(o-2),c=-u,d=1+u,f=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,g=2,v=1,_=new Float32Array(m*p*h),y=new Float32Array(g*p*h),b=new Float32Array(v*p*h);for(let w=0;w<h;w++){const A=w%3*2/3-1,T=w>2?0:-1,C=[A,T,0,A+2/3,T,0,A+2/3,T+1,0,A,T,0,A+2/3,T+1,0,A,T+1,0];_.set(C,m*p*w),y.set(f,g*p*w);const E=[w,w,w,w,w,w];b.set(E,v*p*w)}const x=new cr;x.setAttribute("position",new Ps(_,m)),x.setAttribute("uv",new Ps(y,g)),x.setAttribute("faceIndex",new Ps(b,v)),e.push(x),r>x1&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function QX(n,e,t){const i=new Kg(n,e,t);return i.texture.mapping=zT,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gE(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function Hct(n,e,t){const i=new Float32Array($m),r=new st(0,1,0);return new fh({name:"SphericalGaussianBlur",defines:{n:$m,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Vp,depthTest:!1,depthWrite:!1})}function ZX(){return new fh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Vp,depthTest:!1,depthWrite:!1})}function JX(){return new fh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:RU(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Vp,depthTest:!1,depthWrite:!1})}function RU(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Vct(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===Ow||l===V4,c=l===Wg||l===qg;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new YX(n)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(u&&d&&d.height>0||c&&d&&r(d)){t===null&&(t=new YX(n));const f=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",s),f.texture}else return null}}}return o}function r(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function $ct(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Gct(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const p in f)e.update(f[p],34962);const h=d.morphAttributes;for(const p in h){const m=h[p];for(let g=0,v=m.length;g<v;g++)e.update(m[g],34962)}}function u(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const _=h.array;m=h.version;for(let y=0,b=_.length;y<b;y+=3){const x=_[y+0],w=_[y+1],A=_[y+2];f.push(x,w,w,A,A,x)}}else{const _=p.array;m=p.version;for(let y=0,b=_.length/3-1;y<b;y+=3){const x=y+0,w=y+1,A=y+2;f.push(x,w,w,A,A,x)}}const g=new(cfe(f)?vfe:MU)(f,1);g.version=m;const v=s.get(d);v&&e.remove(v),s.set(d,g)}function c(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&u(d)}else u(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function Wct(n,e,t,i){const r=i.isWebGL2;let s;function a(f){s=f}let o,l;function u(f){o=f.type,l=f.bytesPerElement}function c(f,h){n.drawElements(s,h,o,f*l),t.update(h,s,1)}function d(f,h,p){if(p===0)return;let m,g;if(r)m=n,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,h,o,f*l,p),t.update(h,s,p)}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=d}function qct(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function jct(n,e){return n[0]-e[0]}function Kct(n,e){return Math.abs(e[1])-Math.abs(n[1])}function Nk(n,e){let t=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?t=127:i instanceof Uint8Array?t=255:i instanceof Uint16Array?t=65535:i instanceof Int16Array?t=32767:i instanceof Int32Array?t=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),n.divideScalar(t)}function Xct(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new Rr,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,d,f){const h=u.morphTargetInfluences;if(e.isWebGL2===!0){const p=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,m=p!==void 0?p.length:0;let g=s.get(c);if(g===void 0||g.count!==m){let y=function(){U.dispose(),s.delete(c),c.removeEventListener("dispose",y)};g!==void 0&&g.texture.dispose();const b=c.morphAttributes.position!==void 0,x=c.morphAttributes.normal!==void 0,w=c.morphAttributes.color!==void 0,A=c.morphAttributes.position||[],T=c.morphAttributes.normal||[],C=c.morphAttributes.color||[];let E=0;b===!0&&(E=1),x===!0&&(E=2),w===!0&&(E=3);let I=c.attributes.position.count*E,k=1;I>e.maxTextureSize&&(k=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const O=new Float32Array(I*k*4*m),U=new pfe(O,I,k,m);U.type=Lp,U.needsUpdate=!0;const z=E*4;for(let L=0;L<m;L++){const G=A[L],H=T[L],F=C[L],X=I*k*4*L;for(let te=0;te<G.count;te++){const re=te*z;b===!0&&(a.fromBufferAttribute(G,te),G.normalized===!0&&Nk(a,G),O[X+re+0]=a.x,O[X+re+1]=a.y,O[X+re+2]=a.z,O[X+re+3]=0),x===!0&&(a.fromBufferAttribute(H,te),H.normalized===!0&&Nk(a,H),O[X+re+4]=a.x,O[X+re+5]=a.y,O[X+re+6]=a.z,O[X+re+7]=0),w===!0&&(a.fromBufferAttribute(F,te),F.normalized===!0&&Nk(a,F),O[X+re+8]=a.x,O[X+re+9]=a.y,O[X+re+10]=a.z,O[X+re+11]=F.itemSize===4?a.w:1)}}g={count:m,texture:U,size:new on(I,k)},s.set(c,g),c.addEventListener("dispose",y)}let v=0;for(let y=0;y<h.length;y++)v+=h[y];const _=c.morphTargetsRelative?1:1-v;f.getUniforms().setValue(n,"morphTargetBaseInfluence",_),f.getUniforms().setValue(n,"morphTargetInfluences",h),f.getUniforms().setValue(n,"morphTargetsTexture",g.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",g.size)}else{const p=h===void 0?0:h.length;let m=i[c.id];if(m===void 0||m.length!==p){m=[];for(let b=0;b<p;b++)m[b]=[b,0];i[c.id]=m}for(let b=0;b<p;b++){const x=m[b];x[0]=b,x[1]=h[b]}m.sort(Kct);for(let b=0;b<8;b++)b<p&&m[b][1]?(o[b][0]=m[b][0],o[b][1]=m[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(jct);const g=c.morphAttributes.position,v=c.morphAttributes.normal;let _=0;for(let b=0;b<8;b++){const x=o[b],w=x[0],A=x[1];w!==Number.MAX_SAFE_INTEGER&&A?(g&&c.getAttribute("morphTarget"+b)!==g[w]&&c.setAttribute("morphTarget"+b,g[w]),v&&c.getAttribute("morphNormal"+b)!==v[w]&&c.setAttribute("morphNormal"+b,v[w]),r[b]=A,_+=A):(g&&c.hasAttribute("morphTarget"+b)===!0&&c.deleteAttribute("morphTarget"+b),v&&c.hasAttribute("morphNormal"+b)===!0&&c.deleteAttribute("morphNormal"+b),r[b]=0)}const y=c.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",y),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function Yct(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,d=e.get(l,c);return r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),d}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const wfe=new eo,Tfe=new pfe,Cfe=new Uot,Afe=new IU,eY=[],tY=[],nY=new Float32Array(16),iY=new Float32Array(9),rY=new Float32Array(4);function kb(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=eY[r];if(s===void 0&&(s=new Float32Array(r),eY[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function il(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function rl(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function nR(n,e){let t=tY[e];t===void 0&&(t=new Int32Array(e),tY[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Qct(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Zct(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(il(t,e))return;n.uniform2fv(this.addr,e),rl(t,e)}}function Jct(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(il(t,e))return;n.uniform3fv(this.addr,e),rl(t,e)}}function edt(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(il(t,e))return;n.uniform4fv(this.addr,e),rl(t,e)}}function tdt(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(il(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),rl(t,e)}else{if(il(t,i))return;rY.set(i),n.uniformMatrix2fv(this.addr,!1,rY),rl(t,i)}}function ndt(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(il(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),rl(t,e)}else{if(il(t,i))return;iY.set(i),n.uniformMatrix3fv(this.addr,!1,iY),rl(t,i)}}function idt(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(il(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),rl(t,e)}else{if(il(t,i))return;nY.set(i),n.uniformMatrix4fv(this.addr,!1,nY),rl(t,i)}}function rdt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function sdt(n,e){const t=this.cache;il(t,e)||(n.uniform2iv(this.addr,e),rl(t,e))}function adt(n,e){const t=this.cache;il(t,e)||(n.uniform3iv(this.addr,e),rl(t,e))}function odt(n,e){const t=this.cache;il(t,e)||(n.uniform4iv(this.addr,e),rl(t,e))}function ldt(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function udt(n,e){const t=this.cache;il(t,e)||(n.uniform2uiv(this.addr,e),rl(t,e))}function cdt(n,e){const t=this.cache;il(t,e)||(n.uniform3uiv(this.addr,e),rl(t,e))}function ddt(n,e){const t=this.cache;il(t,e)||(n.uniform4uiv(this.addr,e),rl(t,e))}function fdt(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||wfe,r)}function hdt(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Cfe,r)}function pdt(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Afe,r)}function mdt(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Tfe,r)}function gdt(n){switch(n){case 5126:return Qct;case 35664:return Zct;case 35665:return Jct;case 35666:return edt;case 35674:return tdt;case 35675:return ndt;case 35676:return idt;case 5124:case 35670:return rdt;case 35667:case 35671:return sdt;case 35668:case 35672:return adt;case 35669:case 35673:return odt;case 5125:return ldt;case 36294:return udt;case 36295:return cdt;case 36296:return ddt;case 35678:case 36198:case 36298:case 36306:case 35682:return fdt;case 35679:case 36299:case 36307:return hdt;case 35680:case 36300:case 36308:case 36293:return pdt;case 36289:case 36303:case 36311:case 36292:return mdt}}function vdt(n,e){n.uniform1fv(this.addr,e)}function ydt(n,e){const t=kb(e,this.size,2);n.uniform2fv(this.addr,t)}function _dt(n,e){const t=kb(e,this.size,3);n.uniform3fv(this.addr,t)}function bdt(n,e){const t=kb(e,this.size,4);n.uniform4fv(this.addr,t)}function Sdt(n,e){const t=kb(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xdt(n,e){const t=kb(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function wdt(n,e){const t=kb(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Tdt(n,e){n.uniform1iv(this.addr,e)}function Cdt(n,e){n.uniform2iv(this.addr,e)}function Adt(n,e){n.uniform3iv(this.addr,e)}function Edt(n,e){n.uniform4iv(this.addr,e)}function Mdt(n,e){n.uniform1uiv(this.addr,e)}function Idt(n,e){n.uniform2uiv(this.addr,e)}function Ddt(n,e){n.uniform3uiv(this.addr,e)}function Rdt(n,e){n.uniform4uiv(this.addr,e)}function Pdt(n,e,t){const i=e.length,r=nR(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2D(e[s]||wfe,r[s])}function kdt(n,e,t){const i=e.length,r=nR(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture3D(e[s]||Cfe,r[s])}function Ldt(n,e,t){const i=e.length,r=nR(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTextureCube(e[s]||Afe,r[s])}function Odt(n,e,t){const i=e.length,r=nR(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||Tfe,r[s])}function Ndt(n){switch(n){case 5126:return vdt;case 35664:return ydt;case 35665:return _dt;case 35666:return bdt;case 35674:return Sdt;case 35675:return xdt;case 35676:return wdt;case 5124:case 35670:return Tdt;case 35667:case 35671:return Cdt;case 35668:case 35672:return Adt;case 35669:case 35673:return Edt;case 5125:return Mdt;case 36294:return Idt;case 36295:return Ddt;case 36296:return Rdt;case 35678:case 36198:case 36298:case 36306:case 35682:return Pdt;case 35679:case 36299:case 36307:return kdt;case 35680:case 36300:case 36308:case 36293:return Ldt;case 36289:case 36303:case 36311:case 36292:return Odt}}let Bdt=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=gdt(t.type)}},Fdt=class{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Ndt(t.type)}},Udt=class{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}};const Bk=/(\w+)(\])?(\[|\.)?/g;function sY(n,e){n.seq.push(e),n.map[e.id]=e}function zdt(n,e,t){const i=n.name,r=i.length;for(Bk.lastIndex=0;;){const s=Bk.exec(i),a=Bk.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){sY(t,u===void 0?new Bdt(o,n,e):new Fdt(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new Udt(o),sY(t,d)),t=d}}}let n3=class{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);zdt(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}};function aY(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Hdt=0;function Vdt(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function $dt(n){switch(n){case p0:return["Linear","( value )"];case Zi:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function oY(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Vdt(n.getShaderSource(e),a)}else return r}function Gdt(n,e){const t=$dt(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Wdt(n,e){let t;switch(e){case Kat:t="Linear";break;case Xat:t="Reinhard";break;case Yat:t="OptimizedCineon";break;case Qat:t="ACESFilmic";break;case Zat:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function qdt(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ux).join(`
`)}function jdt(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Kdt(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function Ux(n){return n!==""}function lY(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function uY(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Xdt=/^[ \t]*#include +<([\w\d./]+)>/gm;function JO(n){return n.replace(Xdt,Ydt)}function Ydt(n,e){const t=sr[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return JO(t)}const Qdt=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Zdt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cY(n){return n.replace(Zdt,Efe).replace(Qdt,Jdt)}function Jdt(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Efe(n,e,t,i)}function Efe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function dY(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function eft(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===tfe?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Cat?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Fx&&(e="SHADOWMAP_TYPE_VSM"),e}function tft(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Wg:case qg:e="ENVMAP_TYPE_CUBE";break;case zT:e="ENVMAP_TYPE_CUBE_UV";break}return e}function nft(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qg:e="ENVMAP_MODE_REFRACTION";break}return e}function ift(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case eR:e="ENVMAP_BLENDING_MULTIPLY";break;case qat:e="ENVMAP_BLENDING_MIX";break;case jat:e="ENVMAP_BLENDING_ADD";break}return e}function rft(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function sft(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=eft(t),u=tft(t),c=nft(t),d=ift(t),f=rft(t),h=t.isWebGL2?"":qdt(t),p=jdt(s),m=r.createProgram();let g,v,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=[p].filter(Ux).join(`
`),g.length>0&&(g+=`
`),v=[h,p].filter(Ux).join(`
`),v.length>0&&(v+=`
`)):(g=[dY(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ux).join(`
`),v=[h,dY(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Zf?"#define TONE_MAPPING":"",t.toneMapping!==Zf?sr.tonemapping_pars_fragment:"",t.toneMapping!==Zf?Wdt("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",sr.encodings_pars_fragment,Gdt("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ux).join(`
`)),a=JO(a),a=lY(a,t),a=uY(a,t),o=JO(o),o=lY(o,t),o=uY(o,t),a=cY(a),o=cY(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===LX?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===LX?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const y=_+g+a,b=_+v+o,x=aY(r,35633,y),w=aY(r,35632,b);if(r.attachShader(m,x),r.attachShader(m,w),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),n.debug.checkShaderErrors){const C=r.getProgramInfoLog(m).trim(),E=r.getShaderInfoLog(x).trim(),I=r.getShaderInfoLog(w).trim();let k=!0,O=!0;if(r.getProgramParameter(m,35714)===!1){k=!1;const U=oY(r,x,"vertex"),z=oY(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+`

Program Info Log: `+C+`
`+U+`
`+z)}else C!==""?console.warn("THREE.WebGLProgram: Program Info Log:",C):(E===""||I==="")&&(O=!1);O&&(this.diagnostics={runnable:k,programLog:C,vertexShader:{log:E,prefix:g},fragmentShader:{log:I,prefix:v}})}r.deleteShader(x),r.deleteShader(w);let A;this.getUniforms=function(){return A===void 0&&(A=new n3(r,m)),A};let T;return this.getAttributes=function(){return T===void 0&&(T=Kdt(r,m)),T},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=t.shaderName,this.id=Hdt++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let aft=0,oft=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;return t.has(e)===!1&&t.set(e,new Set),t.get(e)}_getShaderStage(e){const t=this.shaderCache;if(t.has(e)===!1){const i=new lft(e);t.set(e,i)}return t.get(e)}},lft=class{constructor(e){this.id=aft++,this.code=e,this.usedTimes=0}};function uft(n,e,t,i,r,s,a){const o=new EU,l=new oft,u=[],c=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(T,C,E,I,k){const O=I.fog,U=k.geometry,z=T.isMeshStandardMaterial?I.environment:null,L=(T.isMeshStandardMaterial?t:e).get(T.envMap||z),G=L&&L.mapping===zT?L.image.height:null,H=p[T.type];T.precision!==null&&(h=r.getMaxPrecision(T.precision),h!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",h,"instead."));const F=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,X=F!==void 0?F.length:0;let te=0;U.morphAttributes.position!==void 0&&(te=1),U.morphAttributes.normal!==void 0&&(te=2),U.morphAttributes.color!==void 0&&(te=3);let re,ie,le,ge;if(H){const Ze=_d[H];re=Ze.vertexShader,ie=Ze.fragmentShader}else re=T.vertexShader,ie=T.fragmentShader,l.update(T),le=l.getVertexShaderID(T),ge=l.getFragmentShaderID(T);const pe=n.getRenderTarget(),ye=T.alphaTest>0,Oe=T.clearcoat>0,Be=T.iridescence>0;return{isWebGL2:c,shaderID:H,shaderName:T.type,vertexShader:re,fragmentShader:ie,defines:T.defines,customVertexShaderID:le,customFragmentShaderID:ge,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:h,instancing:k.isInstancedMesh===!0,instancingColor:k.isInstancedMesh===!0&&k.instanceColor!==null,supportsVertexTextures:f,outputEncoding:pe===null?n.outputEncoding:pe.isXRRenderTarget===!0?pe.texture.encoding:p0,map:!!T.map,matcap:!!T.matcap,envMap:!!L,envMapMode:L&&L.mapping,envMapCubeUVHeight:G,lightMap:!!T.lightMap,aoMap:!!T.aoMap,emissiveMap:!!T.emissiveMap,bumpMap:!!T.bumpMap,normalMap:!!T.normalMap,objectSpaceNormalMap:T.normalMapType===bot,tangentSpaceNormalMap:T.normalMapType===ov,decodeVideoTexture:!!T.map&&T.map.isVideoTexture===!0&&T.map.encoding===Zi,clearcoat:Oe,clearcoatMap:Oe&&!!T.clearcoatMap,clearcoatRoughnessMap:Oe&&!!T.clearcoatRoughnessMap,clearcoatNormalMap:Oe&&!!T.clearcoatNormalMap,iridescence:Be,iridescenceMap:Be&&!!T.iridescenceMap,iridescenceThicknessMap:Be&&!!T.iridescenceThicknessMap,displacementMap:!!T.displacementMap,roughnessMap:!!T.roughnessMap,metalnessMap:!!T.metalnessMap,specularMap:!!T.specularMap,specularIntensityMap:!!T.specularIntensityMap,specularColorMap:!!T.specularColorMap,opaque:T.transparent===!1&&T.blending===K1,alphaMap:!!T.alphaMap,alphaTest:ye,gradientMap:!!T.gradientMap,sheen:T.sheen>0,sheenColorMap:!!T.sheenColorMap,sheenRoughnessMap:!!T.sheenRoughnessMap,transmission:T.transmission>0,transmissionMap:!!T.transmissionMap,thicknessMap:!!T.thicknessMap,combine:T.combine,vertexTangents:!!T.normalMap&&!!U.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUvs:!!T.map||!!T.bumpMap||!!T.normalMap||!!T.specularMap||!!T.alphaMap||!!T.emissiveMap||!!T.roughnessMap||!!T.metalnessMap||!!T.clearcoatMap||!!T.clearcoatRoughnessMap||!!T.clearcoatNormalMap||!!T.iridescenceMap||!!T.iridescenceThicknessMap||!!T.displacementMap||!!T.transmissionMap||!!T.thicknessMap||!!T.specularIntensityMap||!!T.specularColorMap||!!T.sheenColorMap||!!T.sheenRoughnessMap,uvsVertexOnly:!(T.map||T.bumpMap||T.normalMap||T.specularMap||T.alphaMap||T.emissiveMap||T.roughnessMap||T.metalnessMap||T.clearcoatNormalMap||T.iridescenceMap||T.iridescenceThicknessMap||T.transmission>0||T.transmissionMap||T.thicknessMap||T.specularIntensityMap||T.specularColorMap||T.sheen>0||T.sheenColorMap||T.sheenRoughnessMap)&&!!T.displacementMap,fog:!!O,useFog:T.fog===!0,fogExp2:O&&O.isFogExp2,flatShading:!!T.flatShading,sizeAttenuation:T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:k.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:X,morphTextureStride:te,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&E.length>0,shadowMapType:n.shadowMap.type,toneMapping:T.toneMapped?n.toneMapping:Zf,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===h0,flipSided:T.side===Gc,useDepthPacking:!!T.depthPacking,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:T.extensions&&T.extensions.derivatives,extensionFragDepth:T.extensions&&T.extensions.fragDepth,extensionDrawBuffers:T.extensions&&T.extensions.drawBuffers,extensionShaderTextureLOD:T.extensions&&T.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function g(T){const C=[];if(T.shaderID?C.push(T.shaderID):(C.push(T.customVertexShaderID),C.push(T.customFragmentShaderID)),T.defines!==void 0)for(const E in T.defines)C.push(E),C.push(T.defines[E]);return T.isRawShaderMaterial===!1&&(v(C,T),_(C,T),C.push(n.outputEncoding)),C.push(T.customProgramCacheKey),C.join()}function v(T,C){T.push(C.precision),T.push(C.outputEncoding),T.push(C.envMapMode),T.push(C.envMapCubeUVHeight),T.push(C.combine),T.push(C.vertexUvs),T.push(C.fogExp2),T.push(C.sizeAttenuation),T.push(C.morphTargetsCount),T.push(C.morphAttributeCount),T.push(C.numDirLights),T.push(C.numPointLights),T.push(C.numSpotLights),T.push(C.numHemiLights),T.push(C.numRectAreaLights),T.push(C.numDirLightShadows),T.push(C.numPointLightShadows),T.push(C.numSpotLightShadows),T.push(C.shadowMapType),T.push(C.toneMapping),T.push(C.numClippingPlanes),T.push(C.numClipIntersection),T.push(C.depthPacking)}function _(T,C){o.disableAll(),C.isWebGL2&&o.enable(0),C.supportsVertexTextures&&o.enable(1),C.instancing&&o.enable(2),C.instancingColor&&o.enable(3),C.map&&o.enable(4),C.matcap&&o.enable(5),C.envMap&&o.enable(6),C.lightMap&&o.enable(7),C.aoMap&&o.enable(8),C.emissiveMap&&o.enable(9),C.bumpMap&&o.enable(10),C.normalMap&&o.enable(11),C.objectSpaceNormalMap&&o.enable(12),C.tangentSpaceNormalMap&&o.enable(13),C.clearcoat&&o.enable(14),C.clearcoatMap&&o.enable(15),C.clearcoatRoughnessMap&&o.enable(16),C.clearcoatNormalMap&&o.enable(17),C.iridescence&&o.enable(18),C.iridescenceMap&&o.enable(19),C.iridescenceThicknessMap&&o.enable(20),C.displacementMap&&o.enable(21),C.specularMap&&o.enable(22),C.roughnessMap&&o.enable(23),C.metalnessMap&&o.enable(24),C.gradientMap&&o.enable(25),C.alphaMap&&o.enable(26),C.alphaTest&&o.enable(27),C.vertexColors&&o.enable(28),C.vertexAlphas&&o.enable(29),C.vertexUvs&&o.enable(30),C.vertexTangents&&o.enable(31),C.uvsVertexOnly&&o.enable(32),C.fog&&o.enable(33),T.push(o.mask),o.disableAll(),C.useFog&&o.enable(0),C.flatShading&&o.enable(1),C.logarithmicDepthBuffer&&o.enable(2),C.skinning&&o.enable(3),C.morphTargets&&o.enable(4),C.morphNormals&&o.enable(5),C.morphColors&&o.enable(6),C.premultipliedAlpha&&o.enable(7),C.shadowMapEnabled&&o.enable(8),C.physicallyCorrectLights&&o.enable(9),C.doubleSided&&o.enable(10),C.flipSided&&o.enable(11),C.useDepthPacking&&o.enable(12),C.dithering&&o.enable(13),C.specularIntensityMap&&o.enable(14),C.specularColorMap&&o.enable(15),C.transmission&&o.enable(16),C.transmissionMap&&o.enable(17),C.thicknessMap&&o.enable(18),C.sheen&&o.enable(19),C.sheenColorMap&&o.enable(20),C.sheenRoughnessMap&&o.enable(21),C.decodeVideoTexture&&o.enable(22),C.opaque&&o.enable(23),T.push(o.mask)}function y(T){const C=p[T.type];let E;if(C){const I=_d[C];E=Qot.clone(I.uniforms)}else E=T.uniforms;return E}function b(T,C){let E;for(let I=0,k=u.length;I<k;I++){const O=u[I];if(O.cacheKey===C){E=O,++E.usedTimes;break}}return E===void 0&&(E=new sft(n,C,T,s),u.push(E)),E}function x(T){if(--T.usedTimes===0){const C=u.indexOf(T);u[C]=u[u.length-1],u.pop(),T.destroy()}}function w(T){l.remove(T)}function A(){l.dispose()}return{getParameters:m,getProgramCacheKey:g,getUniforms:y,acquireProgram:b,releaseProgram:x,releaseShaderCache:w,programs:u,dispose:A}}function cft(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function dft(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function fY(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function hY(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,g){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[e]=v):(v.id=d.id,v.object=d,v.geometry=f,v.material=h,v.groupOrder=p,v.renderOrder=d.renderOrder,v.z=m,v.group=g),e++,v}function o(d,f,h,p,m,g){const v=a(d,f,h,p,m,g);h.transmission>0?i.push(v):h.transparent===!0?r.push(v):t.push(v)}function l(d,f,h,p,m,g){const v=a(d,f,h,p,m,g);h.transmission>0?i.unshift(v):h.transparent===!0?r.unshift(v):t.unshift(v)}function u(d,f){t.length>1&&t.sort(d||dft),i.length>1&&i.sort(f||fY),r.length>1&&r.sort(f||fY)}function c(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:c,sort:u}}function fft(){let n=new WeakMap;function e(i,r){let s;return n.has(i)===!1?(s=new hY,n.set(i,[s])):r>=n.get(i).length?(s=new hY,n.get(i).push(s)):s=n.get(i)[r],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function hft(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new st,color:new Fn};break;case"SpotLight":t={position:new st,direction:new st,color:new Fn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new st,color:new Fn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new st,skyColor:new Fn,groundColor:new Fn};break;case"RectAreaLight":t={color:new Fn,position:new st,halfWidth:new st,halfHeight:new st};break}return n[e.id]=t,t}}}function pft(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new on,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let mft=0;function gft(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function vft(n,e){const t=new hft,i=pft(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)r.probe.push(new st);const s=new st,a=new ri,o=new ri;function l(c,d){let f=0,h=0,p=0;for(let C=0;C<9;C++)r.probe[C].set(0,0,0);let m=0,g=0,v=0,_=0,y=0,b=0,x=0,w=0;c.sort(gft);const A=d!==!0?Math.PI:1;for(let C=0,E=c.length;C<E;C++){const I=c[C],k=I.color,O=I.intensity,U=I.distance,z=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)f+=k.r*O*A,h+=k.g*O*A,p+=k.b*O*A;else if(I.isLightProbe)for(let L=0;L<9;L++)r.probe[L].addScaledVector(I.sh.coefficients[L],O);else if(I.isDirectionalLight){const L=t.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity*A),I.castShadow){const G=I.shadow,H=i.get(I);H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,r.directionalShadow[m]=H,r.directionalShadowMap[m]=z,r.directionalShadowMatrix[m]=I.shadow.matrix,b++}r.directional[m]=L,m++}else if(I.isSpotLight){const L=t.get(I);if(L.position.setFromMatrixPosition(I.matrixWorld),L.color.copy(k).multiplyScalar(O*A),L.distance=U,L.coneCos=Math.cos(I.angle),L.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),L.decay=I.decay,I.castShadow){const G=I.shadow,H=i.get(I);H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,r.spotShadow[v]=H,r.spotShadowMap[v]=z,r.spotShadowMatrix[v]=I.shadow.matrix,w++}r.spot[v]=L,v++}else if(I.isRectAreaLight){const L=t.get(I);L.color.copy(k).multiplyScalar(O),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),r.rectArea[_]=L,_++}else if(I.isPointLight){const L=t.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity*A),L.distance=I.distance,L.decay=I.decay,I.castShadow){const G=I.shadow,H=i.get(I);H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,H.shadowCameraNear=G.camera.near,H.shadowCameraFar=G.camera.far,r.pointShadow[g]=H,r.pointShadowMap[g]=z,r.pointShadowMatrix[g]=I.shadow.matrix,x++}r.point[g]=L,g++}else if(I.isHemisphereLight){const L=t.get(I);L.skyColor.copy(I.color).multiplyScalar(O*A),L.groundColor.copy(I.groundColor).multiplyScalar(O*A),r.hemi[y]=L,y++}}_>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Hn.LTC_FLOAT_1,r.rectAreaLTC2=Hn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Hn.LTC_HALF_1,r.rectAreaLTC2=Hn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=p;const T=r.hash;(T.directionalLength!==m||T.pointLength!==g||T.spotLength!==v||T.rectAreaLength!==_||T.hemiLength!==y||T.numDirectionalShadows!==b||T.numPointShadows!==x||T.numSpotShadows!==w)&&(r.directional.length=m,r.spot.length=v,r.rectArea.length=_,r.point.length=g,r.hemi.length=y,r.directionalShadow.length=b,r.directionalShadowMap.length=b,r.pointShadow.length=x,r.pointShadowMap.length=x,r.spotShadow.length=w,r.spotShadowMap.length=w,r.directionalShadowMatrix.length=b,r.pointShadowMatrix.length=x,r.spotShadowMatrix.length=w,T.directionalLength=m,T.pointLength=g,T.spotLength=v,T.rectAreaLength=_,T.hemiLength=y,T.numDirectionalShadows=b,T.numPointShadows=x,T.numSpotShadows=w,r.version=mft++)}function u(c,d){let f=0,h=0,p=0,m=0,g=0;const v=d.matrixWorldInverse;for(let _=0,y=c.length;_<y;_++){const b=c[_];if(b.isDirectionalLight){const x=r.directional[f];x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(v),f++}else if(b.isSpotLight){const x=r.spot[p];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),x.direction.setFromMatrixPosition(b.matrixWorld),s.setFromMatrixPosition(b.target.matrixWorld),x.direction.sub(s),x.direction.transformDirection(v),p++}else if(b.isRectAreaLight){const x=r.rectArea[m];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),o.identity(),a.copy(b.matrixWorld),a.premultiply(v),o.extractRotation(a),x.halfWidth.set(b.width*.5,0,0),x.halfHeight.set(0,b.height*.5,0),x.halfWidth.applyMatrix4(o),x.halfHeight.applyMatrix4(o),m++}else if(b.isPointLight){const x=r.point[h];x.position.setFromMatrixPosition(b.matrixWorld),x.position.applyMatrix4(v),h++}else if(b.isHemisphereLight){const x=r.hemi[g];x.direction.setFromMatrixPosition(b.matrixWorld),x.direction.transformDirection(v),g++}}}return{setup:l,setupView:u,state:r}}function pY(n,e){const t=new vft(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(d){i.push(d)}function o(d){r.push(d)}function l(d){t.setup(i,d)}function u(d){t.setupView(i,d)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function yft(n,e){let t=new WeakMap;function i(s,a=0){let o;return t.has(s)===!1?(o=new pY(n,e),t.set(s,[o])):a>=t.get(s).length?(o=new pY(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function r(){t=new WeakMap}return{get:i,dispose:r}}let Mfe=class extends ia{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yot,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},Ife=class extends ia{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new st,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}};const _ft=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,bft=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Sft(n,e,t){let i=new DU;const r=new on,s=new on,a=new Rr,o=new Mfe({depthPacking:_ot}),l=new Ife,u={},c=t.maxTextureSize,d={0:Gc,1:f0,2:h0},f=new fh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new on},radius:{value:4}},vertexShader:_ft,fragmentShader:bft}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new cr;p.setAttribute("position",new Ps(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new ga(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=tfe,this.render=function(b,x,w){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||b.length===0)return;const A=n.getRenderTarget(),T=n.getActiveCubeFace(),C=n.getActiveMipmapLevel(),E=n.state;E.setBlending(Vp),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(let I=0,k=b.length;I<k;I++){const O=b[I],U=O.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",O,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const z=U.getFrameExtents();if(r.multiply(z),s.copy(U.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/z.x),r.x=s.x*z.x,U.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/z.y),r.y=s.y*z.y,U.mapSize.y=s.y)),U.map===null){const G=this.type!==Fx?{minFilter:Ia,magFilter:Ia}:{};U.map=new Kg(r.x,r.y,G),U.map.texture.name=O.name+".shadowMap",U.camera.updateProjectionMatrix()}n.setRenderTarget(U.map),n.clear();const L=U.getViewportCount();for(let G=0;G<L;G++){const H=U.getViewport(G);a.set(s.x*H.x,s.y*H.y,s.x*H.z,s.y*H.w),E.viewport(a),U.updateMatrices(O,G),i=U.getFrustum(),y(x,w,U.camera,O,this.type)}U.isPointLightShadow!==!0&&this.type===Fx&&v(U,w),U.needsUpdate=!1}g.needsUpdate=!1,n.setRenderTarget(A,T,C)};function v(b,x){const w=e.update(m);f.defines.VSM_SAMPLES!==b.blurSamples&&(f.defines.VSM_SAMPLES=b.blurSamples,h.defines.VSM_SAMPLES=b.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),b.mapPass===null&&(b.mapPass=new Kg(r.x,r.y)),f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,n.setRenderTarget(b.mapPass),n.clear(),n.renderBufferDirect(x,null,w,f,m,null),h.uniforms.shadow_pass.value=b.mapPass.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,n.setRenderTarget(b.map),n.clear(),n.renderBufferDirect(x,null,w,h,m,null)}function _(b,x,w,A,T,C){let E=null;const I=w.isPointLight===!0?b.customDistanceMaterial:b.customDepthMaterial;if(I!==void 0?E=I:E=w.isPointLight===!0?l:o,n.localClippingEnabled&&x.clipShadows===!0&&Array.isArray(x.clippingPlanes)&&x.clippingPlanes.length!==0||x.displacementMap&&x.displacementScale!==0||x.alphaMap&&x.alphaTest>0){const k=E.uuid,O=x.uuid;let U=u[k];U===void 0&&(U={},u[k]=U);let z=U[O];z===void 0&&(z=E.clone(),U[O]=z),E=z}return E.visible=x.visible,E.wireframe=x.wireframe,C===Fx?E.side=x.shadowSide!==null?x.shadowSide:x.side:E.side=x.shadowSide!==null?x.shadowSide:d[x.side],E.alphaMap=x.alphaMap,E.alphaTest=x.alphaTest,E.clipShadows=x.clipShadows,E.clippingPlanes=x.clippingPlanes,E.clipIntersection=x.clipIntersection,E.displacementMap=x.displacementMap,E.displacementScale=x.displacementScale,E.displacementBias=x.displacementBias,E.wireframeLinewidth=x.wireframeLinewidth,E.linewidth=x.linewidth,w.isPointLight===!0&&E.isMeshDistanceMaterial===!0&&(E.referencePosition.setFromMatrixPosition(w.matrixWorld),E.nearDistance=A,E.farDistance=T),E}function y(b,x,w,A,T){if(b.visible===!1)return;if(b.layers.test(x.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&T===Fx)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(w.matrixWorldInverse,b.matrixWorld);const I=e.update(b),k=b.material;if(Array.isArray(k)){const O=I.groups;for(let U=0,z=O.length;U<z;U++){const L=O[U],G=k[L.materialIndex];if(G&&G.visible){const H=_(b,G,A,w.near,w.far,T);n.renderBufferDirect(w,null,I,H,b,L)}}}else if(k.visible){const O=_(b,k,A,w.near,w.far,T);n.renderBufferDirect(w,null,I,O,b,null)}}const E=b.children;for(let I=0,k=E.length;I<k;I++)y(E[I],x,w,A,T)}}function xft(n,e,t){const i=t.isWebGL2;function r(){let De=!1;const xt=new Rr;let Pe=null;const Dt=new Rr(0,0,0,0);return{setMask:function(dt){Pe!==dt&&!De&&(n.colorMask(dt,dt,dt,dt),Pe=dt)},setLocked:function(dt){De=dt},setClear:function(dt,Mt,jt,Ft,Sn){Sn===!0&&(dt*=Ft,Mt*=Ft,jt*=Ft),xt.set(dt,Mt,jt,Ft),Dt.equals(xt)===!1&&(n.clearColor(dt,Mt,jt,Ft),Dt.copy(xt))},reset:function(){De=!1,Pe=null,Dt.set(-1,0,0,0)}}}function s(){let De=!1,xt=null,Pe=null,Dt=null;return{setTest:function(dt){dt?ye(2929):Oe(2929)},setMask:function(dt){xt!==dt&&!De&&(n.depthMask(dt),xt=dt)},setFunc:function(dt){if(Pe!==dt){if(dt)switch(dt){case Uat:n.depthFunc(512);break;case zat:n.depthFunc(519);break;case Hat:n.depthFunc(513);break;case WO:n.depthFunc(515);break;case Vat:n.depthFunc(514);break;case $at:n.depthFunc(518);break;case Gat:n.depthFunc(516);break;case Wat:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);Pe=dt}},setLocked:function(dt){De=dt},setClear:function(dt){Dt!==dt&&(n.clearDepth(dt),Dt=dt)},reset:function(){De=!1,xt=null,Pe=null,Dt=null}}}function a(){let De=!1,xt=null,Pe=null,Dt=null,dt=null,Mt=null,jt=null,Ft=null,Sn=null;return{setTest:function(Pn){De||(Pn?ye(2960):Oe(2960))},setMask:function(Pn){xt!==Pn&&!De&&(n.stencilMask(Pn),xt=Pn)},setFunc:function(Pn,Ti,jn){(Pe!==Pn||Dt!==Ti||dt!==jn)&&(n.stencilFunc(Pn,Ti,jn),Pe=Pn,Dt=Ti,dt=jn)},setOp:function(Pn,Ti,jn){(Mt!==Pn||jt!==Ti||Ft!==jn)&&(n.stencilOp(Pn,Ti,jn),Mt=Pn,jt=Ti,Ft=jn)},setLocked:function(Pn){De=Pn},setClear:function(Pn){Sn!==Pn&&(n.clearStencil(Pn),Sn=Pn)},reset:function(){De=!1,xt=null,Pe=null,Dt=null,dt=null,Mt=null,jt=null,Ft=null,Sn=null}}}const o=new r,l=new s,u=new a,c=new WeakMap,d=new WeakMap;let f={},h={},p=new WeakMap,m=[],g=null,v=!1,_=null,y=null,b=null,x=null,w=null,A=null,T=null,C=!1,E=null,I=null,k=null,O=null,U=null;const z=n.getParameter(35661);let L=!1,G=0;const H=n.getParameter(7938);H.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(H)[1]),L=G>=1):H.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),L=G>=2);let F=null,X={};const te=n.getParameter(3088),re=n.getParameter(2978),ie=new Rr().fromArray(te),le=new Rr().fromArray(re);function ge(De,xt,Pe){const Dt=new Uint8Array(4),dt=n.createTexture();n.bindTexture(De,dt),n.texParameteri(De,10241,9728),n.texParameteri(De,10240,9728);for(let Mt=0;Mt<Pe;Mt++)n.texImage2D(xt+Mt,0,6408,1,1,0,6408,5121,Dt);return dt}const pe={};pe[3553]=ge(3553,3553,1),pe[34067]=ge(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),ye(2929),l.setFunc(WO),Fe(!1),nt(oX),ye(2884),ce(Vp);function ye(De){f[De]!==!0&&(n.enable(De),f[De]=!0)}function Oe(De){f[De]!==!1&&(n.disable(De),f[De]=!1)}function Be(De,xt){return h[De]!==xt?(n.bindFramebuffer(De,xt),h[De]=xt,i&&(De===36009&&(h[36160]=xt),De===36160&&(h[36009]=xt)),!0):!1}function Ye(De,xt){let Pe=m,Dt=!1;if(De)if(Pe=p.get(xt),Pe===void 0&&(Pe=[],p.set(xt,Pe)),De.isWebGLMultipleRenderTargets){const dt=De.texture;if(Pe.length!==dt.length||Pe[0]!==36064){for(let Mt=0,jt=dt.length;Mt<jt;Mt++)Pe[Mt]=36064+Mt;Pe.length=dt.length,Dt=!0}}else Pe[0]!==36064&&(Pe[0]=36064,Dt=!0);else Pe[0]!==1029&&(Pe[0]=1029,Dt=!0);Dt&&(t.isWebGL2?n.drawBuffers(Pe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Pe))}function Ze(De){return g!==De?(n.useProgram(De),g=De,!0):!1}const Q={[e1]:32774,[Mat]:32778,[Iat]:32779};if(i)Q[dX]=32775,Q[fX]=32776;else{const De=e.get("EXT_blend_minmax");De!==null&&(Q[dX]=De.MIN_EXT,Q[fX]=De.MAX_EXT)}const me={[Dat]:0,[Rat]:1,[Pat]:768,[nfe]:770,[Fat]:776,[Nat]:774,[Lat]:772,[kat]:769,[ife]:771,[Bat]:775,[Oat]:773};function ce(De,xt,Pe,Dt,dt,Mt,jt,Ft){if(De===Vp){v===!0&&(Oe(3042),v=!1);return}if(v===!1&&(ye(3042),v=!0),De!==Eat){if(De!==_||Ft!==C){if((y!==e1||w!==e1)&&(n.blendEquation(32774),y=e1,w=e1),Ft)switch(De){case K1:n.blendFuncSeparate(1,771,1,771);break;case lX:n.blendFunc(1,1);break;case uX:n.blendFuncSeparate(0,769,0,1);break;case cX:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",De);break}else switch(De){case K1:n.blendFuncSeparate(770,771,1,771);break;case lX:n.blendFunc(770,1);break;case uX:n.blendFuncSeparate(0,769,0,1);break;case cX:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",De);break}b=null,x=null,A=null,T=null,_=De,C=Ft}return}dt=dt||xt,Mt=Mt||Pe,jt=jt||Dt,(xt!==y||dt!==w)&&(n.blendEquationSeparate(Q[xt],Q[dt]),y=xt,w=dt),(Pe!==b||Dt!==x||Mt!==A||jt!==T)&&(n.blendFuncSeparate(me[Pe],me[Dt],me[Mt],me[jt]),b=Pe,x=Dt,A=Mt,T=jt),_=De,C=null}function je(De,xt){De.side===h0?Oe(2884):ye(2884);let Pe=De.side===Gc;xt&&(Pe=!Pe),Fe(Pe),De.blending===K1&&De.transparent===!1?ce(Vp):ce(De.blending,De.blendEquation,De.blendSrc,De.blendDst,De.blendEquationAlpha,De.blendSrcAlpha,De.blendDstAlpha,De.premultipliedAlpha),l.setFunc(De.depthFunc),l.setTest(De.depthTest),l.setMask(De.depthWrite),o.setMask(De.colorWrite);const Dt=De.stencilWrite;u.setTest(Dt),Dt&&(u.setMask(De.stencilWriteMask),u.setFunc(De.stencilFunc,De.stencilRef,De.stencilFuncMask),u.setOp(De.stencilFail,De.stencilZFail,De.stencilZPass)),Ke(De.polygonOffset,De.polygonOffsetFactor,De.polygonOffsetUnits),De.alphaToCoverage===!0?ye(32926):Oe(32926)}function Fe(De){E!==De&&(De?n.frontFace(2304):n.frontFace(2305),E=De)}function nt(De){De!==wat?(ye(2884),De!==I&&(De===oX?n.cullFace(1029):De===Tat?n.cullFace(1028):n.cullFace(1032))):Oe(2884),I=De}function We(De){De!==k&&(L&&n.lineWidth(De),k=De)}function Ke(De,xt,Pe){De?(ye(32823),(O!==xt||U!==Pe)&&(n.polygonOffset(xt,Pe),O=xt,U=Pe)):Oe(32823)}function it(De){De?ye(3089):Oe(3089)}function be(De){De===void 0&&(De=33984+z-1),F!==De&&(n.activeTexture(De),F=De)}function K(De,xt){F===null&&be();let Pe=X[F];Pe===void 0&&(Pe={type:void 0,texture:void 0},X[F]=Pe),(Pe.type!==De||Pe.texture!==xt)&&(n.bindTexture(De,xt||pe[De]),Pe.type=De,Pe.texture=xt)}function ne(){const De=X[F];De!==void 0&&De.type!==void 0&&(n.bindTexture(De.type,null),De.type=void 0,De.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function ze(){try{n.texSubImage2D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Je(){try{n.texSubImage3D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Tt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function At(){try{n.texStorage2D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Re(){try{n.texStorage3D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function wt(){try{n.texImage2D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function vt(){try{n.texImage3D.apply(n,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function q(De){ie.equals(De)===!1&&(n.scissor(De.x,De.y,De.z,De.w),ie.copy(De))}function xe(De){le.equals(De)===!1&&(n.viewport(De.x,De.y,De.z,De.w),le.copy(De))}function ve(De,xt){let Pe=d.get(xt);Pe===void 0&&(Pe=new WeakMap,d.set(xt,Pe));let Dt=Pe.get(De);Dt===void 0&&(Dt=n.getUniformBlockIndex(xt,De.name),Pe.set(De,Dt))}function ke(De,xt){const Dt=d.get(xt).get(De);c.get(De)!==Dt&&(n.uniformBlockBinding(xt,Dt,De.__bindingPointIndex),c.set(De,Dt))}function we(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},F=null,X={},h={},p=new WeakMap,m=[],g=null,v=!1,_=null,y=null,b=null,x=null,w=null,A=null,T=null,C=!1,E=null,I=null,k=null,O=null,U=null,ie.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:ye,disable:Oe,bindFramebuffer:Be,drawBuffers:Ye,useProgram:Ze,setBlending:ce,setMaterial:je,setFlipSided:Fe,setCullFace:nt,setLineWidth:We,setPolygonOffset:Ke,setScissorTest:it,activeTexture:be,bindTexture:K,unbindTexture:ne,compressedTexImage2D:Se,texImage2D:wt,texImage3D:vt,updateUBOMapping:ve,uniformBlockBinding:ke,texStorage2D:At,texStorage3D:Re,texSubImage2D:ze,texSubImage3D:Je,compressedTexSubImage2D:Tt,scissor:q,viewport:xe,reset:we}}function wft(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,h=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(K,ne){return v?new OffscreenCanvas(K,ne):zw("canvas")}function y(K,ne,Se,ze){let Je=1;if((K.width>ze||K.height>ze)&&(Je=ze/Math.max(K.width,K.height)),Je<1||ne===!0)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap){const Tt=ne?q4:Math.floor,At=Tt(Je*K.width),Re=Tt(Je*K.height);m===void 0&&(m=_(At,Re));const wt=Se?_(At,Re):m;return wt.width=At,wt.height=Re,wt.getContext("2d").drawImage(K,0,0,At,Re),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+K.width+"x"+K.height+") to ("+At+"x"+Re+")."),wt}else return"data"in K&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+K.width+"x"+K.height+")."),K;return K}function b(K){return KO(K.width)&&KO(K.height)}function x(K){return o?!1:K.wrapS!==ma||K.wrapT!==ma||K.minFilter!==Ia&&K.minFilter!==ta}function w(K,ne){return K.generateMipmaps&&ne&&K.minFilter!==Ia&&K.minFilter!==ta}function A(K){n.generateMipmap(K)}function T(K,ne,Se,ze,Je=!1){if(o===!1)return ne;if(K!==null){if(n[K]!==void 0)return n[K];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Tt=ne;return ne===6403&&(Se===5126&&(Tt=33326),Se===5131&&(Tt=33325),Se===5121&&(Tt=33321)),ne===33319&&(Se===5126&&(Tt=33328),Se===5131&&(Tt=33327),Se===5121&&(Tt=33323)),ne===6408&&(Se===5126&&(Tt=34836),Se===5131&&(Tt=34842),Se===5121&&(Tt=ze===Zi&&Je===!1?35907:32856),Se===32819&&(Tt=32854),Se===32820&&(Tt=32855)),(Tt===33325||Tt===33326||Tt===33327||Tt===33328||Tt===34842||Tt===34836)&&e.get("EXT_color_buffer_float"),Tt}function C(K,ne,Se){return w(K,Se)===!0||K.isFramebufferTexture&&K.minFilter!==Ia&&K.minFilter!==ta?Math.log2(Math.max(ne.width,ne.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?ne.mipmaps.length:1}function E(K){return K===Ia||K===$4||K===G4?9728:9729}function I(K){const ne=K.target;ne.removeEventListener("dispose",I),O(ne),ne.isVideoTexture&&p.delete(ne)}function k(K){const ne=K.target;ne.removeEventListener("dispose",k),z(ne)}function O(K){const ne=i.get(K);if(ne.__webglInit===void 0)return;const Se=K.source,ze=g.get(Se);if(ze){const Je=ze[ne.__cacheKey];Je.usedTimes--,Je.usedTimes===0&&U(K),Object.keys(ze).length===0&&g.delete(Se)}i.remove(K)}function U(K){const ne=i.get(K);n.deleteTexture(ne.__webglTexture);const Se=K.source,ze=g.get(Se);delete ze[ne.__cacheKey],a.memory.textures--}function z(K){const ne=K.texture,Se=i.get(K),ze=i.get(ne);if(ze.__webglTexture!==void 0&&(n.deleteTexture(ze.__webglTexture),a.memory.textures--),K.depthTexture&&K.depthTexture.dispose(),K.isWebGLCubeRenderTarget)for(let Je=0;Je<6;Je++)n.deleteFramebuffer(Se.__webglFramebuffer[Je]),Se.__webglDepthbuffer&&n.deleteRenderbuffer(Se.__webglDepthbuffer[Je]);else{if(n.deleteFramebuffer(Se.__webglFramebuffer),Se.__webglDepthbuffer&&n.deleteRenderbuffer(Se.__webglDepthbuffer),Se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Se.__webglMultisampledFramebuffer),Se.__webglColorRenderbuffer)for(let Je=0;Je<Se.__webglColorRenderbuffer.length;Je++)Se.__webglColorRenderbuffer[Je]&&n.deleteRenderbuffer(Se.__webglColorRenderbuffer[Je]);Se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Se.__webglDepthRenderbuffer)}if(K.isWebGLMultipleRenderTargets)for(let Je=0,Tt=ne.length;Je<Tt;Je++){const At=i.get(ne[Je]);At.__webglTexture&&(n.deleteTexture(At.__webglTexture),a.memory.textures--),i.remove(ne[Je])}i.remove(ne),i.remove(K)}let L=0;function G(){L=0}function H(){const K=L;return K>=l&&console.warn("THREE.WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+l),L+=1,K}function F(K){const ne=[];return ne.push(K.wrapS),ne.push(K.wrapT),ne.push(K.magFilter),ne.push(K.minFilter),ne.push(K.anisotropy),ne.push(K.internalFormat),ne.push(K.format),ne.push(K.type),ne.push(K.generateMipmaps),ne.push(K.premultiplyAlpha),ne.push(K.flipY),ne.push(K.unpackAlignment),ne.push(K.encoding),ne.join()}function X(K,ne){const Se=i.get(K);if(K.isVideoTexture&&it(K),K.isRenderTargetTexture===!1&&K.version>0&&Se.__version!==K.version){const ze=K.image;if(ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Oe(Se,K,ne);return}}t.activeTexture(33984+ne),t.bindTexture(3553,Se.__webglTexture)}function te(K,ne){const Se=i.get(K);if(K.version>0&&Se.__version!==K.version){Oe(Se,K,ne);return}t.activeTexture(33984+ne),t.bindTexture(35866,Se.__webglTexture)}function re(K,ne){const Se=i.get(K);if(K.version>0&&Se.__version!==K.version){Oe(Se,K,ne);return}t.activeTexture(33984+ne),t.bindTexture(32879,Se.__webglTexture)}function ie(K,ne){const Se=i.get(K);if(K.version>0&&Se.__version!==K.version){Be(Se,K,ne);return}t.activeTexture(33984+ne),t.bindTexture(34067,Se.__webglTexture)}const le={[Sl]:10497,[ma]:33071,[Nw]:33648},ge={[Ia]:9728,[$4]:9984,[G4]:9986,[ta]:9729,[TU]:9985,[Mh]:9987};function pe(K,ne,Se){if(Se?(n.texParameteri(K,10242,le[ne.wrapS]),n.texParameteri(K,10243,le[ne.wrapT]),(K===32879||K===35866)&&n.texParameteri(K,32882,le[ne.wrapR]),n.texParameteri(K,10240,ge[ne.magFilter]),n.texParameteri(K,10241,ge[ne.minFilter])):(n.texParameteri(K,10242,33071),n.texParameteri(K,10243,33071),(K===32879||K===35866)&&n.texParameteri(K,32882,33071),(ne.wrapS!==ma||ne.wrapT!==ma)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(K,10240,E(ne.magFilter)),n.texParameteri(K,10241,E(ne.minFilter)),ne.minFilter!==Ia&&ne.minFilter!==ta&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const ze=e.get("EXT_texture_filter_anisotropic");if(ne.type===Lp&&e.has("OES_texture_float_linear")===!1||o===!1&&ne.type===Bw&&e.has("OES_texture_half_float_linear")===!1)return;(ne.anisotropy>1||i.get(ne).__currentAnisotropy)&&(n.texParameterf(K,ze.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,r.getMaxAnisotropy())),i.get(ne).__currentAnisotropy=ne.anisotropy)}}function ye(K,ne){let Se=!1;K.__webglInit===void 0&&(K.__webglInit=!0,ne.addEventListener("dispose",I));const ze=ne.source;let Je=g.get(ze);Je===void 0&&(Je={},g.set(ze,Je));const Tt=F(ne);if(Tt!==K.__cacheKey){Je[Tt]===void 0&&(Je[Tt]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Se=!0),Je[Tt].usedTimes++;const At=Je[K.__cacheKey];At!==void 0&&(Je[K.__cacheKey].usedTimes--,At.usedTimes===0&&U(ne)),K.__cacheKey=Tt,K.__webglTexture=Je[Tt].texture}return Se}function Oe(K,ne,Se){let ze=3553;ne.isDataArrayTexture&&(ze=35866),ne.isData3DTexture&&(ze=32879);const Je=ye(K,ne),Tt=ne.source;if(t.activeTexture(33984+Se),t.bindTexture(ze,K.__webglTexture),Tt.version!==Tt.__currentVersion||Je===!0){n.pixelStorei(37440,ne.flipY),n.pixelStorei(37441,ne.premultiplyAlpha),n.pixelStorei(3317,ne.unpackAlignment),n.pixelStorei(37443,0);const At=x(ne)&&b(ne.image)===!1;let Re=y(ne.image,At,!1,c);Re=be(ne,Re);const wt=b(Re)||o,vt=s.convert(ne.format,ne.encoding);let q=s.convert(ne.type),xe=T(ne.internalFormat,vt,q,ne.encoding,ne.isVideoTexture);pe(ze,ne,wt);let ve;const ke=ne.mipmaps,we=o&&ne.isVideoTexture!==!0,De=Tt.__currentVersion===void 0||Je===!0,xt=C(ne,Re,wt);if(ne.isDepthTexture)xe=6402,o?ne.type===Lp?xe=36012:ne.type===og?xe=33190:ne.type===X1?xe=35056:xe=33189:ne.type===Lp&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ne.format===Ig&&xe===6402&&ne.type!==rfe&&ne.type!==og&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ne.type=og,q=s.convert(ne.type)),ne.format===U_&&xe===6402&&(xe=34041,ne.type!==X1&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ne.type=X1,q=s.convert(ne.type))),De&&(we?t.texStorage2D(3553,1,xe,Re.width,Re.height):t.texImage2D(3553,0,xe,Re.width,Re.height,0,vt,q,null));else if(ne.isDataTexture)if(ke.length>0&&wt){we&&De&&t.texStorage2D(3553,xt,xe,ke[0].width,ke[0].height);for(let Pe=0,Dt=ke.length;Pe<Dt;Pe++)ve=ke[Pe],we?t.texSubImage2D(3553,Pe,0,0,ve.width,ve.height,vt,q,ve.data):t.texImage2D(3553,Pe,xe,ve.width,ve.height,0,vt,q,ve.data);ne.generateMipmaps=!1}else we?(De&&t.texStorage2D(3553,xt,xe,Re.width,Re.height),t.texSubImage2D(3553,0,0,0,Re.width,Re.height,vt,q,Re.data)):t.texImage2D(3553,0,xe,Re.width,Re.height,0,vt,q,Re.data);else if(ne.isCompressedTexture){we&&De&&t.texStorage2D(3553,xt,xe,ke[0].width,ke[0].height);for(let Pe=0,Dt=ke.length;Pe<Dt;Pe++)ve=ke[Pe],ne.format!==Wu?vt!==null?we?t.compressedTexSubImage2D(3553,Pe,0,0,ve.width,ve.height,vt,ve.data):t.compressedTexImage2D(3553,Pe,xe,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):we?t.texSubImage2D(3553,Pe,0,0,ve.width,ve.height,vt,q,ve.data):t.texImage2D(3553,Pe,xe,ve.width,ve.height,0,vt,q,ve.data)}else if(ne.isDataArrayTexture)we?(De&&t.texStorage3D(35866,xt,xe,Re.width,Re.height,Re.depth),t.texSubImage3D(35866,0,0,0,0,Re.width,Re.height,Re.depth,vt,q,Re.data)):t.texImage3D(35866,0,xe,Re.width,Re.height,Re.depth,0,vt,q,Re.data);else if(ne.isData3DTexture)we?(De&&t.texStorage3D(32879,xt,xe,Re.width,Re.height,Re.depth),t.texSubImage3D(32879,0,0,0,0,Re.width,Re.height,Re.depth,vt,q,Re.data)):t.texImage3D(32879,0,xe,Re.width,Re.height,Re.depth,0,vt,q,Re.data);else if(ne.isFramebufferTexture){if(De)if(we)t.texStorage2D(3553,xt,xe,Re.width,Re.height);else{let Pe=Re.width,Dt=Re.height;for(let dt=0;dt<xt;dt++)t.texImage2D(3553,dt,xe,Pe,Dt,0,vt,q,null),Pe>>=1,Dt>>=1}}else if(ke.length>0&&wt){we&&De&&t.texStorage2D(3553,xt,xe,ke[0].width,ke[0].height);for(let Pe=0,Dt=ke.length;Pe<Dt;Pe++)ve=ke[Pe],we?t.texSubImage2D(3553,Pe,0,0,vt,q,ve):t.texImage2D(3553,Pe,xe,vt,q,ve);ne.generateMipmaps=!1}else we?(De&&t.texStorage2D(3553,xt,xe,Re.width,Re.height),t.texSubImage2D(3553,0,0,0,vt,q,Re)):t.texImage2D(3553,0,xe,vt,q,Re);w(ne,wt)&&A(ze),Tt.__currentVersion=Tt.version,ne.onUpdate&&ne.onUpdate(ne)}K.__version=ne.version}function Be(K,ne,Se){if(ne.image.length!==6)return;const ze=ye(K,ne),Je=ne.source;if(t.activeTexture(33984+Se),t.bindTexture(34067,K.__webglTexture),Je.version!==Je.__currentVersion||ze===!0){n.pixelStorei(37440,ne.flipY),n.pixelStorei(37441,ne.premultiplyAlpha),n.pixelStorei(3317,ne.unpackAlignment),n.pixelStorei(37443,0);const Tt=ne.isCompressedTexture||ne.image[0].isCompressedTexture,At=ne.image[0]&&ne.image[0].isDataTexture,Re=[];for(let Pe=0;Pe<6;Pe++)!Tt&&!At?Re[Pe]=y(ne.image[Pe],!1,!0,u):Re[Pe]=At?ne.image[Pe].image:ne.image[Pe],Re[Pe]=be(ne,Re[Pe]);const wt=Re[0],vt=b(wt)||o,q=s.convert(ne.format,ne.encoding),xe=s.convert(ne.type),ve=T(ne.internalFormat,q,xe,ne.encoding),ke=o&&ne.isVideoTexture!==!0,we=Je.__currentVersion===void 0||ze===!0;let De=C(ne,wt,vt);pe(34067,ne,vt);let xt;if(Tt){ke&&we&&t.texStorage2D(34067,De,ve,wt.width,wt.height);for(let Pe=0;Pe<6;Pe++){xt=Re[Pe].mipmaps;for(let Dt=0;Dt<xt.length;Dt++){const dt=xt[Dt];ne.format!==Wu?q!==null?ke?t.compressedTexSubImage2D(34069+Pe,Dt,0,0,dt.width,dt.height,q,dt.data):t.compressedTexImage2D(34069+Pe,Dt,ve,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ke?t.texSubImage2D(34069+Pe,Dt,0,0,dt.width,dt.height,q,xe,dt.data):t.texImage2D(34069+Pe,Dt,ve,dt.width,dt.height,0,q,xe,dt.data)}}}else{xt=ne.mipmaps,ke&&we&&(xt.length>0&&De++,t.texStorage2D(34067,De,ve,Re[0].width,Re[0].height));for(let Pe=0;Pe<6;Pe++)if(At){ke?t.texSubImage2D(34069+Pe,0,0,0,Re[Pe].width,Re[Pe].height,q,xe,Re[Pe].data):t.texImage2D(34069+Pe,0,ve,Re[Pe].width,Re[Pe].height,0,q,xe,Re[Pe].data);for(let Dt=0;Dt<xt.length;Dt++){const Mt=xt[Dt].image[Pe].image;ke?t.texSubImage2D(34069+Pe,Dt+1,0,0,Mt.width,Mt.height,q,xe,Mt.data):t.texImage2D(34069+Pe,Dt+1,ve,Mt.width,Mt.height,0,q,xe,Mt.data)}}else{ke?t.texSubImage2D(34069+Pe,0,0,0,q,xe,Re[Pe]):t.texImage2D(34069+Pe,0,ve,q,xe,Re[Pe]);for(let Dt=0;Dt<xt.length;Dt++){const dt=xt[Dt];ke?t.texSubImage2D(34069+Pe,Dt+1,0,0,q,xe,dt.image[Pe]):t.texImage2D(34069+Pe,Dt+1,ve,q,xe,dt.image[Pe])}}}w(ne,vt)&&A(34067),Je.__currentVersion=Je.version,ne.onUpdate&&ne.onUpdate(ne)}K.__version=ne.version}function Ye(K,ne,Se,ze,Je){const Tt=s.convert(Se.format,Se.encoding),At=s.convert(Se.type),Re=T(Se.internalFormat,Tt,At,Se.encoding);i.get(ne).__hasExternalTextures||(Je===32879||Je===35866?t.texImage3D(Je,0,Re,ne.width,ne.height,ne.depth,0,Tt,At,null):t.texImage2D(Je,0,Re,ne.width,ne.height,0,Tt,At,null)),t.bindFramebuffer(36160,K),Ke(ne)?f.framebufferTexture2DMultisampleEXT(36160,ze,Je,i.get(Se).__webglTexture,0,We(ne)):n.framebufferTexture2D(36160,ze,Je,i.get(Se).__webglTexture,0),t.bindFramebuffer(36160,null)}function Ze(K,ne,Se){if(n.bindRenderbuffer(36161,K),ne.depthBuffer&&!ne.stencilBuffer){let ze=33189;if(Se||Ke(ne)){const Je=ne.depthTexture;Je&&Je.isDepthTexture&&(Je.type===Lp?ze=36012:Je.type===og&&(ze=33190));const Tt=We(ne);Ke(ne)?f.renderbufferStorageMultisampleEXT(36161,Tt,ze,ne.width,ne.height):n.renderbufferStorageMultisample(36161,Tt,ze,ne.width,ne.height)}else n.renderbufferStorage(36161,ze,ne.width,ne.height);n.framebufferRenderbuffer(36160,36096,36161,K)}else if(ne.depthBuffer&&ne.stencilBuffer){const ze=We(ne);Se&&Ke(ne)===!1?n.renderbufferStorageMultisample(36161,ze,35056,ne.width,ne.height):Ke(ne)?f.renderbufferStorageMultisampleEXT(36161,ze,35056,ne.width,ne.height):n.renderbufferStorage(36161,34041,ne.width,ne.height),n.framebufferRenderbuffer(36160,33306,36161,K)}else{const ze=ne.isWebGLMultipleRenderTargets===!0?ne.texture:[ne.texture];for(let Je=0;Je<ze.length;Je++){const Tt=ze[Je],At=s.convert(Tt.format,Tt.encoding),Re=s.convert(Tt.type),wt=T(Tt.internalFormat,At,Re,Tt.encoding),vt=We(ne);Se&&Ke(ne)===!1?n.renderbufferStorageMultisample(36161,vt,wt,ne.width,ne.height):Ke(ne)?f.renderbufferStorageMultisampleEXT(36161,vt,wt,ne.width,ne.height):n.renderbufferStorage(36161,wt,ne.width,ne.height)}}n.bindRenderbuffer(36161,null)}function Q(K,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,K),!(ne.depthTexture&&ne.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),X(ne.depthTexture,0);const ze=i.get(ne.depthTexture).__webglTexture,Je=We(ne);if(ne.depthTexture.format===Ig)Ke(ne)?f.framebufferTexture2DMultisampleEXT(36160,36096,3553,ze,0,Je):n.framebufferTexture2D(36160,36096,3553,ze,0);else if(ne.depthTexture.format===U_)Ke(ne)?f.framebufferTexture2DMultisampleEXT(36160,33306,3553,ze,0,Je):n.framebufferTexture2D(36160,33306,3553,ze,0);else throw new Error("Unknown depthTexture format")}function me(K){const ne=i.get(K),Se=K.isWebGLCubeRenderTarget===!0;if(K.depthTexture&&!ne.__autoAllocateDepthBuffer){if(Se)throw new Error("target.depthTexture not supported in Cube render targets");Q(ne.__webglFramebuffer,K)}else if(Se){ne.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)t.bindFramebuffer(36160,ne.__webglFramebuffer[ze]),ne.__webglDepthbuffer[ze]=n.createRenderbuffer(),Ze(ne.__webglDepthbuffer[ze],K,!1)}else t.bindFramebuffer(36160,ne.__webglFramebuffer),ne.__webglDepthbuffer=n.createRenderbuffer(),Ze(ne.__webglDepthbuffer,K,!1);t.bindFramebuffer(36160,null)}function ce(K,ne,Se){const ze=i.get(K);ne!==void 0&&Ye(ze.__webglFramebuffer,K,K.texture,36064,3553),Se!==void 0&&me(K)}function je(K){const ne=K.texture,Se=i.get(K),ze=i.get(ne);K.addEventListener("dispose",k),K.isWebGLMultipleRenderTargets!==!0&&(ze.__webglTexture===void 0&&(ze.__webglTexture=n.createTexture()),ze.__version=ne.version,a.memory.textures++);const Je=K.isWebGLCubeRenderTarget===!0,Tt=K.isWebGLMultipleRenderTargets===!0,At=b(K)||o;if(Je){Se.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)Se.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(Se.__webglFramebuffer=n.createFramebuffer(),Tt)if(r.drawBuffers){const Re=K.texture;for(let wt=0,vt=Re.length;wt<vt;wt++){const q=i.get(Re[wt]);q.__webglTexture===void 0&&(q.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&K.samples>0&&Ke(K)===!1){const Re=Tt?ne:[ne];Se.__webglMultisampledFramebuffer=n.createFramebuffer(),Se.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Se.__webglMultisampledFramebuffer);for(let wt=0;wt<Re.length;wt++){const vt=Re[wt];Se.__webglColorRenderbuffer[wt]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Se.__webglColorRenderbuffer[wt]);const q=s.convert(vt.format,vt.encoding),xe=s.convert(vt.type),ve=T(vt.internalFormat,q,xe,vt.encoding),ke=We(K);n.renderbufferStorageMultisample(36161,ke,ve,K.width,K.height),n.framebufferRenderbuffer(36160,36064+wt,36161,Se.__webglColorRenderbuffer[wt])}n.bindRenderbuffer(36161,null),K.depthBuffer&&(Se.__webglDepthRenderbuffer=n.createRenderbuffer(),Ze(Se.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(36160,null)}}if(Je){t.bindTexture(34067,ze.__webglTexture),pe(34067,ne,At);for(let Re=0;Re<6;Re++)Ye(Se.__webglFramebuffer[Re],K,ne,36064,34069+Re);w(ne,At)&&A(34067),t.unbindTexture()}else if(Tt){const Re=K.texture;for(let wt=0,vt=Re.length;wt<vt;wt++){const q=Re[wt],xe=i.get(q);t.bindTexture(3553,xe.__webglTexture),pe(3553,q,At),Ye(Se.__webglFramebuffer,K,q,36064+wt,3553),w(q,At)&&A(3553)}t.unbindTexture()}else{let Re=3553;(K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(o?Re=K.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Re,ze.__webglTexture),pe(Re,ne,At),Ye(Se.__webglFramebuffer,K,ne,36064,Re),w(ne,At)&&A(Re),t.unbindTexture()}K.depthBuffer&&me(K)}function Fe(K){const ne=b(K)||o,Se=K.isWebGLMultipleRenderTargets===!0?K.texture:[K.texture];for(let ze=0,Je=Se.length;ze<Je;ze++){const Tt=Se[ze];if(w(Tt,ne)){const At=K.isWebGLCubeRenderTarget?34067:3553,Re=i.get(Tt).__webglTexture;t.bindTexture(At,Re),A(At),t.unbindTexture()}}}function nt(K){if(o&&K.samples>0&&Ke(K)===!1){const ne=K.isWebGLMultipleRenderTargets?K.texture:[K.texture],Se=K.width,ze=K.height;let Je=16384;const Tt=[],At=K.stencilBuffer?33306:36096,Re=i.get(K),wt=K.isWebGLMultipleRenderTargets===!0;if(wt)for(let vt=0;vt<ne.length;vt++)t.bindFramebuffer(36160,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+vt,36161,null),t.bindFramebuffer(36160,Re.__webglFramebuffer),n.framebufferTexture2D(36009,36064+vt,3553,null,0);t.bindFramebuffer(36008,Re.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Re.__webglFramebuffer);for(let vt=0;vt<ne.length;vt++){Tt.push(36064+vt),K.depthBuffer&&Tt.push(At);const q=Re.__ignoreDepthValues!==void 0?Re.__ignoreDepthValues:!1;if(q===!1&&(K.depthBuffer&&(Je|=256),K.stencilBuffer&&(Je|=1024)),wt&&n.framebufferRenderbuffer(36008,36064,36161,Re.__webglColorRenderbuffer[vt]),q===!0&&(n.invalidateFramebuffer(36008,[At]),n.invalidateFramebuffer(36009,[At])),wt){const xe=i.get(ne[vt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,xe,0)}n.blitFramebuffer(0,0,Se,ze,0,0,Se,ze,Je,9728),h&&n.invalidateFramebuffer(36008,Tt)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),wt)for(let vt=0;vt<ne.length;vt++){t.bindFramebuffer(36160,Re.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+vt,36161,Re.__webglColorRenderbuffer[vt]);const q=i.get(ne[vt]).__webglTexture;t.bindFramebuffer(36160,Re.__webglFramebuffer),n.framebufferTexture2D(36009,36064+vt,3553,q,0)}t.bindFramebuffer(36009,Re.__webglMultisampledFramebuffer)}}function We(K){return Math.min(d,K.samples)}function Ke(K){const ne=i.get(K);return o&&K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ne.__useRenderToTexture!==!1}function it(K){const ne=a.render.frame;p.get(K)!==ne&&(p.set(K,ne),K.update())}function be(K,ne){const Se=K.encoding,ze=K.format,Je=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||K.format===jO||Se!==p0&&(Se===Zi?o===!1?e.has("EXT_sRGB")===!0&&ze===Wu?(K.format=jO,K.minFilter=ta,K.generateMipmaps=!1):ne=ffe.sRGBToLinear(ne):(ze!==Wu||Je!==jg)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Se)),ne}this.allocateTextureUnit=H,this.resetTextureUnits=G,this.setTexture2D=X,this.setTexture2DArray=te,this.setTexture3D=re,this.setTextureCube=ie,this.rebindTextures=ce,this.setupRenderTarget=je,this.updateRenderTargetMipmap=Fe,this.updateMultisampleRenderTarget=nt,this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Ye,this.useMultisampledRTT=Ke}function Tft(n,e,t){const i=t.isWebGL2;function r(s,a=null){let o;if(s===jg)return 5121;if(s===not)return 32819;if(s===iot)return 32820;if(s===Jat)return 5120;if(s===eot)return 5122;if(s===rfe)return 5123;if(s===tot)return 5124;if(s===og)return 5125;if(s===Lp)return 5126;if(s===Bw)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===rot)return 6406;if(s===Wu)return 6408;if(s===aot)return 6409;if(s===oot)return 6410;if(s===Ig)return 6402;if(s===U_)return 34041;if(s===lot)return 6403;if(s===sot)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(s===jO)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===uot)return 36244;if(s===cot)return 33319;if(s===dot)return 33320;if(s===fot)return 36249;if(s===ZM||s===ck||s===JM||s===e3)if(a===Zi)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===ZM)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===ck)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===JM)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===e3)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===ZM)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===ck)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===JM)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===e3)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===hX||s===pX||s===mX||s===gX)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===hX)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===pX)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===mX)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===gX)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===sfe)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===vX||s===yX)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===vX)return a===Zi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===yX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===_X||s===bX||s===SX||s===xX||s===wX||s===TX||s===CX||s===AX||s===EX||s===MX||s===IX||s===DX||s===RX||s===PX)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===_X)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===bX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===SX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===xX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===wX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===TX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===CX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===AX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===EX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===MX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===IX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===DX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===RX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===PX)return a===Zi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===kX)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===kX)return a===Zi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return s===X1?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}let Cft=class extends ha{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},xl=class extends ys{constructor(){super(),this.isGroup=!0,this.type="Group"}};const Aft={type:"move"};let Fk=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new st,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new st),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new st,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new st),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i);if(u.joints[m.jointName]===void 0){const _=new xl;_.matrixAutoUpdate=!1,_.visible=!1,u.joints[m.jointName]=_,u.add(_)}const v=u.joints[m.jointName];g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=g.radius),v.visible=g!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=c.position.distanceTo(d.position),h=.02,p=.005;u.inputState.pinching&&f>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Aft)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}},Eft=class extends eo{constructor(e,t,i,r,s,a,o,l,u,c){if(c=c!==void 0?c:Ig,c!==Ig&&c!==U_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Ig&&(i=og),i===void 0&&c===U_&&(i=X1),super(null,r,s,a,o,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Ia,this.minFilter=l!==void 0?l:Ia,this.flipY=!1,this.generateMipmaps=!1}},Mft=class extends E0{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=null,u=null,c=null,d=null,f=null,h=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],_=[],y=new ha;y.layers.enable(1),y.viewport=new Rr;const b=new ha;b.layers.enable(2),b.viewport=new Rr;const x=[y,b],w=new Cft;w.layers.enable(1),w.layers.enable(2);let A=null,T=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(F){let X=v[F];return X===void 0&&(X=new Fk,v[F]=X),X.getTargetRaySpace()},this.getControllerGrip=function(F){let X=v[F];return X===void 0&&(X=new Fk,v[F]=X),X.getGripSpace()},this.getHand=function(F){let X=v[F];return X===void 0&&(X=new Fk,v[F]=X),X.getHandSpace()};function C(F){const X=_.indexOf(F.inputSource);if(X===-1)return;const te=v[X];te!==void 0&&te.dispatchEvent({type:F.type,data:F.inputSource})}function E(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",I);for(let F=0;F<v.length;F++){const X=_[F];X!==null&&(_[F]=null,v[F].disconnect(X))}A=null,T=null,e.setRenderTarget(m),f=null,d=null,c=null,r=null,g=null,H.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(F){s=F,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(F){o=F,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(F){l=F},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return c},this.getFrame=function(){return h},this.getSession=function(){return r},this.setSession=async function(F){if(r=F,r!==null){if(m=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",E),r.addEventListener("inputsourceschange",I),p.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const X={antialias:r.renderState.layers===void 0?p.antialias:!0,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,X),r.updateRenderState({baseLayer:f}),g=new Kg(f.framebufferWidth,f.framebufferHeight,{format:Wu,type:jg,encoding:e.outputEncoding})}else{let X=null,te=null,re=null;p.depth&&(re=p.stencil?35056:33190,X=p.stencil?U_:Ig,te=p.stencil?X1:og);const ie={colorFormat:32856,depthFormat:re,scaleFactor:s};c=new XRWebGLBinding(r,t),d=c.createProjectionLayer(ie),r.updateRenderState({layers:[d]}),g=new Kg(d.textureWidth,d.textureHeight,{format:Wu,type:jg,depthTexture:new Eft(d.textureWidth,d.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,X),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});const le=e.properties.get(g);le.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(1),l=null,a=await r.requestReferenceSpace(o),H.setContext(r),H.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function I(F){for(let X=0;X<F.removed.length;X++){const te=F.removed[X],re=_.indexOf(te);re>=0&&(_[re]=null,v[re].dispatchEvent({type:"disconnected",data:te}))}for(let X=0;X<F.added.length;X++){const te=F.added[X];let re=_.indexOf(te);if(re===-1){for(let le=0;le<v.length;le++)if(le>=_.length){_.push(te),re=le;break}else if(_[le]===null){_[le]=te,re=le;break}if(re===-1)break}const ie=v[re];ie&&ie.dispatchEvent({type:"connected",data:te})}}const k=new st,O=new st;function U(F,X,te){k.setFromMatrixPosition(X.matrixWorld),O.setFromMatrixPosition(te.matrixWorld);const re=k.distanceTo(O),ie=X.projectionMatrix.elements,le=te.projectionMatrix.elements,ge=ie[14]/(ie[10]-1),pe=ie[14]/(ie[10]+1),ye=(ie[9]+1)/ie[5],Oe=(ie[9]-1)/ie[5],Be=(ie[8]-1)/ie[0],Ye=(le[8]+1)/le[0],Ze=ge*Be,Q=ge*Ye,me=re/(-Be+Ye),ce=me*-Be;X.matrixWorld.decompose(F.position,F.quaternion,F.scale),F.translateX(ce),F.translateZ(me),F.matrixWorld.compose(F.position,F.quaternion,F.scale),F.matrixWorldInverse.copy(F.matrixWorld).invert();const je=ge+me,Fe=pe+me,nt=Ze-ce,We=Q+(re-ce),Ke=ye*pe/Fe*je,it=Oe*pe/Fe*je;F.projectionMatrix.makePerspective(nt,We,Ke,it,je,Fe)}function z(F,X){X===null?F.matrixWorld.copy(F.matrix):F.matrixWorld.multiplyMatrices(X.matrixWorld,F.matrix),F.matrixWorldInverse.copy(F.matrixWorld).invert()}this.updateCamera=function(F){if(r===null)return;w.near=b.near=y.near=F.near,w.far=b.far=y.far=F.far,(A!==w.near||T!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),A=w.near,T=w.far);const X=F.parent,te=w.cameras;z(w,X);for(let ie=0;ie<te.length;ie++)z(te[ie],X);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),F.position.copy(w.position),F.quaternion.copy(w.quaternion),F.scale.copy(w.scale),F.matrix.copy(w.matrix),F.matrixWorld.copy(w.matrixWorld);const re=F.children;for(let ie=0,le=re.length;ie<le;ie++)re[ie].updateMatrixWorld(!0);te.length===2?U(w,y,b):w.projectionMatrix.copy(y.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){if(d!==null)return d.fixedFoveation;if(f!==null)return f.fixedFoveation},this.setFoveation=function(F){d!==null&&(d.fixedFoveation=F),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=F)};let L=null;function G(F,X){if(u=X.getViewerPose(l||a),h=X,u!==null){const te=u.views;f!==null&&(e.setRenderTargetFramebuffer(g,f.framebuffer),e.setRenderTarget(g));let re=!1;te.length!==w.cameras.length&&(w.cameras.length=0,re=!0);for(let ie=0;ie<te.length;ie++){const le=te[ie];let ge=null;if(f!==null)ge=f.getViewport(le);else{const ye=c.getViewSubImage(d,le);ge=ye.viewport,ie===0&&(e.setRenderTargetTextures(g,ye.colorTexture,d.ignoreDepthValues?void 0:ye.depthStencilTexture),e.setRenderTarget(g))}let pe=x[ie];pe===void 0&&(pe=new ha,pe.layers.enable(ie),pe.viewport=new Rr,x[ie]=pe),pe.matrix.fromArray(le.transform.matrix),pe.projectionMatrix.fromArray(le.projectionMatrix),pe.viewport.set(ge.x,ge.y,ge.width,ge.height),ie===0&&w.matrix.copy(pe.matrix),re===!0&&w.cameras.push(pe)}}for(let te=0;te<v.length;te++){const re=_[te],ie=v[te];re!==null&&ie!==void 0&&ie.update(re,X,l||a)}L&&L(F,X),h=null}const H=new Sfe;H.setAnimationLoop(G),this.setAnimationLoop=function(F){L=F},this.dispose=function(){}}};function Ift(n,e){function t(m,g){m.fogColor.value.copy(g.color),g.isFog?(m.fogNear.value=g.near,m.fogFar.value=g.far):g.isFogExp2&&(m.fogDensity.value=g.density)}function i(m,g,v,_,y){g.isMeshBasicMaterial||g.isMeshLambertMaterial?r(m,g):g.isMeshToonMaterial?(r(m,g),c(m,g)):g.isMeshPhongMaterial?(r(m,g),u(m,g)):g.isMeshStandardMaterial?(r(m,g),d(m,g),g.isMeshPhysicalMaterial&&f(m,g,y)):g.isMeshMatcapMaterial?(r(m,g),h(m,g)):g.isMeshDepthMaterial?r(m,g):g.isMeshDistanceMaterial?(r(m,g),p(m,g)):g.isMeshNormalMaterial?r(m,g):g.isLineBasicMaterial?(s(m,g),g.isLineDashedMaterial&&a(m,g)):g.isPointsMaterial?o(m,g,v,_):g.isSpriteMaterial?l(m,g):g.isShadowMaterial?(m.color.value.copy(g.color),m.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function r(m,g){m.opacity.value=g.opacity,g.color&&m.diffuse.value.copy(g.color),g.emissive&&m.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.bumpMap&&(m.bumpMap.value=g.bumpMap,m.bumpScale.value=g.bumpScale,g.side===Gc&&(m.bumpScale.value*=-1)),g.displacementMap&&(m.displacementMap.value=g.displacementMap,m.displacementScale.value=g.displacementScale,m.displacementBias.value=g.displacementBias),g.emissiveMap&&(m.emissiveMap.value=g.emissiveMap),g.normalMap&&(m.normalMap.value=g.normalMap,m.normalScale.value.copy(g.normalScale),g.side===Gc&&m.normalScale.value.negate()),g.specularMap&&(m.specularMap.value=g.specularMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);const v=e.get(g).envMap;if(v&&(m.envMap.value=v,m.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,m.reflectivity.value=g.reflectivity,m.ior.value=g.ior,m.refractionRatio.value=g.refractionRatio),g.lightMap){m.lightMap.value=g.lightMap;const b=n.physicallyCorrectLights!==!0?Math.PI:1;m.lightMapIntensity.value=g.lightMapIntensity*b}g.aoMap&&(m.aoMap.value=g.aoMap,m.aoMapIntensity.value=g.aoMapIntensity);let _;g.map?_=g.map:g.specularMap?_=g.specularMap:g.displacementMap?_=g.displacementMap:g.normalMap?_=g.normalMap:g.bumpMap?_=g.bumpMap:g.roughnessMap?_=g.roughnessMap:g.metalnessMap?_=g.metalnessMap:g.alphaMap?_=g.alphaMap:g.emissiveMap?_=g.emissiveMap:g.clearcoatMap?_=g.clearcoatMap:g.clearcoatNormalMap?_=g.clearcoatNormalMap:g.clearcoatRoughnessMap?_=g.clearcoatRoughnessMap:g.iridescenceMap?_=g.iridescenceMap:g.iridescenceThicknessMap?_=g.iridescenceThicknessMap:g.specularIntensityMap?_=g.specularIntensityMap:g.specularColorMap?_=g.specularColorMap:g.transmissionMap?_=g.transmissionMap:g.thicknessMap?_=g.thicknessMap:g.sheenColorMap?_=g.sheenColorMap:g.sheenRoughnessMap&&(_=g.sheenRoughnessMap),_!==void 0&&(_.isWebGLRenderTarget&&(_=_.texture),_.matrixAutoUpdate===!0&&_.updateMatrix(),m.uvTransform.value.copy(_.matrix));let y;g.aoMap?y=g.aoMap:g.lightMap&&(y=g.lightMap),y!==void 0&&(y.isWebGLRenderTarget&&(y=y.texture),y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uv2Transform.value.copy(y.matrix))}function s(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity}function a(m,g){m.dashSize.value=g.dashSize,m.totalSize.value=g.dashSize+g.gapSize,m.scale.value=g.scale}function o(m,g,v,_){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.size.value=g.size*v,m.scale.value=_*.5,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let y;g.map?y=g.map:g.alphaMap&&(y=g.alphaMap),y!==void 0&&(y.matrixAutoUpdate===!0&&y.updateMatrix(),m.uvTransform.value.copy(y.matrix))}function l(m,g){m.diffuse.value.copy(g.color),m.opacity.value=g.opacity,m.rotation.value=g.rotation,g.map&&(m.map.value=g.map),g.alphaMap&&(m.alphaMap.value=g.alphaMap),g.alphaTest>0&&(m.alphaTest.value=g.alphaTest);let v;g.map?v=g.map:g.alphaMap&&(v=g.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),m.uvTransform.value.copy(v.matrix))}function u(m,g){m.specular.value.copy(g.specular),m.shininess.value=Math.max(g.shininess,1e-4)}function c(m,g){g.gradientMap&&(m.gradientMap.value=g.gradientMap)}function d(m,g){m.roughness.value=g.roughness,m.metalness.value=g.metalness,g.roughnessMap&&(m.roughnessMap.value=g.roughnessMap),g.metalnessMap&&(m.metalnessMap.value=g.metalnessMap),e.get(g).envMap&&(m.envMapIntensity.value=g.envMapIntensity)}function f(m,g,v){m.ior.value=g.ior,g.sheen>0&&(m.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),m.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(m.sheenColorMap.value=g.sheenColorMap),g.sheenRoughnessMap&&(m.sheenRoughnessMap.value=g.sheenRoughnessMap)),g.clearcoat>0&&(m.clearcoat.value=g.clearcoat,m.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(m.clearcoatMap.value=g.clearcoatMap),g.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap),g.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),m.clearcoatNormalMap.value=g.clearcoatNormalMap,g.side===Gc&&m.clearcoatNormalScale.value.negate())),g.iridescence>0&&(m.iridescence.value=g.iridescence,m.iridescenceIOR.value=g.iridescenceIOR,m.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(m.iridescenceMap.value=g.iridescenceMap),g.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=g.iridescenceThicknessMap)),g.transmission>0&&(m.transmission.value=g.transmission,m.transmissionSamplerMap.value=v.texture,m.transmissionSamplerSize.value.set(v.width,v.height),g.transmissionMap&&(m.transmissionMap.value=g.transmissionMap),m.thickness.value=g.thickness,g.thicknessMap&&(m.thicknessMap.value=g.thicknessMap),m.attenuationDistance.value=g.attenuationDistance,m.attenuationColor.value.copy(g.attenuationColor)),m.specularIntensity.value=g.specularIntensity,m.specularColor.value.copy(g.specularColor),g.specularIntensityMap&&(m.specularIntensityMap.value=g.specularIntensityMap),g.specularColorMap&&(m.specularColorMap.value=g.specularColorMap)}function h(m,g){g.matcap&&(m.matcap.value=g.matcap)}function p(m,g){m.referencePosition.value.copy(g.referencePosition),m.nearDistance.value=g.nearDistance,m.farDistance.value=g.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function Dft(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(_,y){const b=y.program;i.uniformBlockBinding(_,b)}function u(_,y){let b=r[_.id];b===void 0&&(p(_),b=c(_),r[_.id]=b,_.addEventListener("dispose",g));const x=y.program;i.updateUBOMapping(_,x);const w=e.render.frame;s[_.id]!==w&&(f(_),s[_.id]=w)}function c(_){const y=d();_.__bindingPointIndex=y;const b=n.createBuffer(),x=_.__size,w=_.usage;return n.bindBuffer(35345,b),n.bufferData(35345,x,w),n.bindBuffer(35345,null),n.bindBufferBase(35345,y,b),b}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const y=r[_.id],b=_.uniforms,x=_.__cache;n.bindBuffer(35345,y);for(let w=0,A=b.length;w<A;w++){const T=b[w];if(h(T,w,x)===!0){const C=T.value,E=T.__offset;typeof C=="number"?(T.__data[0]=C,n.bufferSubData(35345,E,T.__data)):(T.value.isMatrix3?(T.__data[0]=T.value.elements[0],T.__data[1]=T.value.elements[1],T.__data[2]=T.value.elements[2],T.__data[3]=T.value.elements[0],T.__data[4]=T.value.elements[3],T.__data[5]=T.value.elements[4],T.__data[6]=T.value.elements[5],T.__data[7]=T.value.elements[0],T.__data[8]=T.value.elements[6],T.__data[9]=T.value.elements[7],T.__data[10]=T.value.elements[8],T.__data[11]=T.value.elements[0]):C.toArray(T.__data),n.bufferSubData(35345,E,T.__data))}}n.bindBuffer(35345,null)}function h(_,y,b){const x=_.value;if(b[y]===void 0)return typeof x=="number"?b[y]=x:b[y]=x.clone(),!0;if(typeof x=="number"){if(b[y]!==x)return b[y]=x,!0}else{const w=b[y];if(w.equals(x)===!1)return w.copy(x),!0}return!1}function p(_){const y=_.uniforms;let b=0;const x=16;let w=0;for(let A=0,T=y.length;A<T;A++){const C=y[A],E=m(C);if(C.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=b,A>0){w=b%x;const I=x-w;w!==0&&I-E.boundary<0&&(b+=x-w,C.__offset=b)}b+=E.storage}return w=b%x,w>0&&(b+=x-w),_.__size=b,_.__cache={},this}function m(_){const y=_.value,b={boundary:0,storage:0};return typeof y=="number"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}function g(_){const y=_.target;y.removeEventListener("dispose",g);const b=a.indexOf(y.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function v(){for(const _ in r)n.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:l,update:u,dispose:v}}function Rft(){const n=zw("canvas");return n.style.display="block",n}function Dfe(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:Rft(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let d=null,f=null;const h=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=p0,this.physicallyCorrectLights=!1,this.toneMapping=Zf,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const m=this;let g=!1,v=0,_=0,y=null,b=-1,x=null;const w=new Rr,A=new Rr;let T=null,C=e.width,E=e.height,I=1,k=null,O=null;const U=new Rr(0,0,C,E),z=new Rr(0,0,C,E);let L=!1;const G=new DU;let H=!1,F=!1,X=null;const te=new ri,re=new on,ie=new st,le={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ge(){return y===null?I:1}let pe=t;function ye(de,kt){for(let Ct=0;Ct<de.length;Ct++){const Ut=de[Ct],ut=e.getContext(Ut,kt);if(ut!==null)return ut}return null}try{const de={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${xU}`),e.addEventListener("webglcontextlost",ve,!1),e.addEventListener("webglcontextrestored",ke,!1),e.addEventListener("webglcontextcreationerror",we,!1),pe===null){const kt=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&kt.shift(),pe=ye(kt,de),pe===null)throw ye(kt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}pe.getShaderPrecisionFormat===void 0&&(pe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(de){throw console.error("THREE.WebGLRenderer: "+de.message),de}let Oe,Be,Ye,Ze,Q,me,ce,je,Fe,nt,We,Ke,it,be,K,ne,Se,ze,Je,Tt,At,Re,wt,vt;function q(){Oe=new $ct(pe),Be=new Bct(pe,Oe,n),Oe.init(Be),Re=new Tft(pe,Oe,Be),Ye=new xft(pe,Oe,Be),Ze=new qct,Q=new cft,me=new wft(pe,Oe,Ye,Q,Be,Re,Ze),ce=new Uct(m),je=new Vct(m),Fe=new rlt(pe,Be),wt=new Oct(pe,Oe,Fe,Be),nt=new Gct(pe,Fe,Ze,wt),We=new Yct(pe,nt,Fe,Ze),Je=new Xct(pe,Be,me),ne=new Fct(Q),Ke=new uft(m,ce,je,Oe,Be,wt,ne),it=new Ift(m,Q),be=new fft,K=new yft(Oe,Be),ze=new Lct(m,ce,Ye,We,c,a),Se=new Sft(m,We,Be),vt=new Dft(pe,Ze,Be,Ye),Tt=new Nct(pe,Oe,Ze,Be),At=new Wct(pe,Oe,Ze,Be),Ze.programs=Ke.programs,m.capabilities=Be,m.extensions=Oe,m.properties=Q,m.renderLists=be,m.shadowMap=Se,m.state=Ye,m.info=Ze}q();const xe=new Mft(m,pe);this.xr=xe,this.getContext=function(){return pe},this.getContextAttributes=function(){return pe.getContextAttributes()},this.forceContextLoss=function(){const de=Oe.get("WEBGL_lose_context");de&&de.loseContext()},this.forceContextRestore=function(){const de=Oe.get("WEBGL_lose_context");de&&de.restoreContext()},this.getPixelRatio=function(){return I},this.setPixelRatio=function(de){de!==void 0&&(I=de,this.setSize(C,E,!1))},this.getSize=function(de){return de.set(C,E)},this.setSize=function(de,kt,Ct){if(xe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}C=de,E=kt,e.width=Math.floor(de*I),e.height=Math.floor(kt*I),Ct!==!1&&(e.style.width=de+"px",e.style.height=kt+"px"),this.setViewport(0,0,de,kt)},this.getDrawingBufferSize=function(de){return de.set(C*I,E*I).floor()},this.setDrawingBufferSize=function(de,kt,Ct){C=de,E=kt,I=Ct,e.width=Math.floor(de*Ct),e.height=Math.floor(kt*Ct),this.setViewport(0,0,de,kt)},this.getCurrentViewport=function(de){return de.copy(w)},this.getViewport=function(de){return de.copy(U)},this.setViewport=function(de,kt,Ct,Ut){de.isVector4?U.set(de.x,de.y,de.z,de.w):U.set(de,kt,Ct,Ut),Ye.viewport(w.copy(U).multiplyScalar(I).floor())},this.getScissor=function(de){return de.copy(z)},this.setScissor=function(de,kt,Ct,Ut){de.isVector4?z.set(de.x,de.y,de.z,de.w):z.set(de,kt,Ct,Ut),Ye.scissor(A.copy(z).multiplyScalar(I).floor())},this.getScissorTest=function(){return L},this.setScissorTest=function(de){Ye.setScissorTest(L=de)},this.setOpaqueSort=function(de){k=de},this.setTransparentSort=function(de){O=de},this.getClearColor=function(de){return de.copy(ze.getClearColor())},this.setClearColor=function(){ze.setClearColor.apply(ze,arguments)},this.getClearAlpha=function(){return ze.getClearAlpha()},this.setClearAlpha=function(){ze.setClearAlpha.apply(ze,arguments)},this.clear=function(de=!0,kt=!0,Ct=!0){let Ut=0;de&&(Ut|=16384),kt&&(Ut|=256),Ct&&(Ut|=1024),pe.clear(Ut)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ve,!1),e.removeEventListener("webglcontextrestored",ke,!1),e.removeEventListener("webglcontextcreationerror",we,!1),be.dispose(),K.dispose(),Q.dispose(),ce.dispose(),je.dispose(),We.dispose(),wt.dispose(),vt.dispose(),Ke.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Mt),xe.removeEventListener("sessionend",jt),X&&(X.dispose(),X=null),Ft.stop()};function ve(de){de.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const de=Ze.autoReset,kt=Se.enabled,Ct=Se.autoUpdate,Ut=Se.needsUpdate,ut=Se.type;q(),Ze.autoReset=de,Se.enabled=kt,Se.autoUpdate=Ct,Se.needsUpdate=Ut,Se.type=ut}function we(de){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",de.statusMessage)}function De(de){const kt=de.target;kt.removeEventListener("dispose",De),xt(kt)}function xt(de){Pe(de),Q.remove(de)}function Pe(de){const kt=Q.get(de).programs;kt!==void 0&&(kt.forEach(function(Ct){Ke.releaseProgram(Ct)}),de.isShaderMaterial&&Ke.releaseShaderCache(de))}this.renderBufferDirect=function(de,kt,Ct,Ut,ut,Pt){kt===null&&(kt=le);const Xt=ut.isMesh&&ut.matrixWorld.determinant()<0,kn=ue(de,kt,Ct,Ut,ut);Ye.setMaterial(Ut,Xt);let Kn=Ct.index;const rt=Ct.attributes.position;if(Kn===null){if(rt===void 0||rt.count===0)return}else if(Kn.count===0)return;let ci=1;Ut.wireframe===!0&&(Kn=nt.getWireframeAttribute(Ct),ci=2),wt.setup(ut,Ut,kn,Ct,Kn);let pt,Le=Tt;Kn!==null&&(pt=Fe.get(Kn),Le=At,Le.setIndex(pt));const Et=Kn!==null?Kn.count:rt.count,Xe=Ct.drawRange.start*ci,_t=Ct.drawRange.count*ci,mt=Pt!==null?Pt.start*ci:0,Ot=Pt!==null?Pt.count*ci:1/0,gn=Math.max(Xe,mt),dn=Math.min(Et,Xe+_t,mt+Ot)-1,En=Math.max(0,dn-gn+1);if(En!==0){if(ut.isMesh)Ut.wireframe===!0?(Ye.setLineWidth(Ut.wireframeLinewidth*ge()),Le.setMode(1)):Le.setMode(4);else if(ut.isLine){let ni=Ut.linewidth;ni===void 0&&(ni=1),Ye.setLineWidth(ni*ge()),ut.isLineSegments?Le.setMode(1):ut.isLineLoop?Le.setMode(2):Le.setMode(3)}else ut.isPoints?Le.setMode(0):ut.isSprite&&Le.setMode(4);if(ut.isInstancedMesh)Le.renderInstances(gn,En,ut.count);else if(Ct.isInstancedBufferGeometry){const ni=Math.min(Ct.instanceCount,Ct._maxInstanceCount);Le.renderInstances(gn,En,ni)}else Le.render(gn,En)}},this.compile=function(de,kt){f=K.get(de),f.init(),p.push(f),de.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(kt.layers)&&(f.pushLight(Ct),Ct.castShadow&&f.pushShadow(Ct))}),f.setupLights(m.physicallyCorrectLights),de.traverse(function(Ct){const Ut=Ct.material;if(Ut)if(Array.isArray(Ut))for(let ut=0;ut<Ut.length;ut++){const Pt=Ut[ut];fi(Pt,de,Ct)}else fi(Ut,de,Ct)}),p.pop(),f=null};let Dt=null;function dt(de){Dt&&Dt(de)}function Mt(){Ft.stop()}function jt(){Ft.start()}const Ft=new Sfe;Ft.setAnimationLoop(dt),typeof self<"u"&&Ft.setContext(self),this.setAnimationLoop=function(de){Dt=de,xe.setAnimationLoop(de),de===null?Ft.stop():Ft.start()},xe.addEventListener("sessionstart",Mt),xe.addEventListener("sessionend",jt),this.render=function(de,kt){if(kt!==void 0&&kt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(g===!0)return;de.autoUpdate===!0&&de.updateMatrixWorld(),kt.parent===null&&kt.updateMatrixWorld(),xe.enabled===!0&&xe.isPresenting===!0&&(xe.cameraAutoUpdate===!0&&xe.updateCamera(kt),kt=xe.getCamera()),de.isScene===!0&&de.onBeforeRender(m,de,kt,y),f=K.get(de,p.length),f.init(),p.push(f),te.multiplyMatrices(kt.projectionMatrix,kt.matrixWorldInverse),G.setFromProjectionMatrix(te),F=this.localClippingEnabled,H=ne.init(this.clippingPlanes,F,kt),d=be.get(de,h.length),d.init(),h.push(d),Sn(de,kt,0,m.sortObjects),d.finish(),m.sortObjects===!0&&d.sort(k,O),H===!0&&ne.beginShadows();const Ct=f.state.shadowsArray;if(Se.render(Ct,de,kt),H===!0&&ne.endShadows(),this.info.autoReset===!0&&this.info.reset(),ze.render(d,de),f.setupLights(m.physicallyCorrectLights),kt.isArrayCamera){const Ut=kt.cameras;for(let ut=0,Pt=Ut.length;ut<Pt;ut++){const Xt=Ut[ut];Pn(d,de,Xt,Xt.viewport)}}else Pn(d,de,kt);y!==null&&(me.updateMultisampleRenderTarget(y),me.updateRenderTargetMipmap(y)),de.isScene===!0&&de.onAfterRender(m,de,kt),wt.resetDefaultState(),b=-1,x=null,p.pop(),p.length>0?f=p[p.length-1]:f=null,h.pop(),h.length>0?d=h[h.length-1]:d=null};function Sn(de,kt,Ct,Ut){if(de.visible===!1)return;if(de.layers.test(kt.layers)){if(de.isGroup)Ct=de.renderOrder;else if(de.isLOD)de.autoUpdate===!0&&de.update(kt);else if(de.isLight)f.pushLight(de),de.castShadow&&f.pushShadow(de);else if(de.isSprite){if(!de.frustumCulled||G.intersectsSprite(de)){Ut&&ie.setFromMatrixPosition(de.matrixWorld).applyMatrix4(te);const Xt=We.update(de),kn=de.material;kn.visible&&d.push(de,Xt,kn,Ct,ie.z,null)}}else if((de.isMesh||de.isLine||de.isPoints)&&(de.isSkinnedMesh&&de.skeleton.frame!==Ze.render.frame&&(de.skeleton.update(),de.skeleton.frame=Ze.render.frame),!de.frustumCulled||G.intersectsObject(de))){Ut&&ie.setFromMatrixPosition(de.matrixWorld).applyMatrix4(te);const Xt=We.update(de),kn=de.material;if(Array.isArray(kn)){const Kn=Xt.groups;for(let rt=0,ci=Kn.length;rt<ci;rt++){const pt=Kn[rt],Le=kn[pt.materialIndex];Le&&Le.visible&&d.push(de,Xt,Le,Ct,ie.z,pt)}}else kn.visible&&d.push(de,Xt,kn,Ct,ie.z,null)}}const Pt=de.children;for(let Xt=0,kn=Pt.length;Xt<kn;Xt++)Sn(Pt[Xt],kt,Ct,Ut)}function Pn(de,kt,Ct,Ut){const ut=de.opaque,Pt=de.transmissive,Xt=de.transparent;f.setupLightsView(Ct),Pt.length>0&&Ti(ut,kt,Ct),Ut&&Ye.viewport(w.copy(Ut)),ut.length>0&&jn(ut,kt,Ct),Pt.length>0&&jn(Pt,kt,Ct),Xt.length>0&&jn(Xt,kt,Ct),Ye.buffers.depth.setTest(!0),Ye.buffers.depth.setMask(!0),Ye.buffers.color.setMask(!0),Ye.setPolygonOffset(!1)}function Ti(de,kt,Ct){const Ut=Be.isWebGL2;X===null&&(X=new Kg(1,1,{generateMipmaps:!0,type:Oe.has("EXT_color_buffer_half_float")?Bw:jg,minFilter:Mh,samples:Ut&&s===!0?4:0})),m.getDrawingBufferSize(re),Ut?X.setSize(re.x,re.y):X.setSize(q4(re.x),q4(re.y));const ut=m.getRenderTarget();m.setRenderTarget(X),m.clear();const Pt=m.toneMapping;m.toneMapping=Zf,jn(de,kt,Ct),m.toneMapping=Pt,me.updateMultisampleRenderTarget(X),me.updateRenderTargetMipmap(X),m.setRenderTarget(ut)}function jn(de,kt,Ct){const Ut=kt.isScene===!0?kt.overrideMaterial:null;for(let ut=0,Pt=de.length;ut<Pt;ut++){const Xt=de[ut],kn=Xt.object,Kn=Xt.geometry,rt=Ut===null?Xt.material:Ut,ci=Xt.group;kn.layers.test(Ct.layers)&&dr(kn,kt,Ct,Kn,rt,ci)}}function dr(de,kt,Ct,Ut,ut,Pt){de.onBeforeRender(m,kt,Ct,Ut,ut,Pt),de.modelViewMatrix.multiplyMatrices(Ct.matrixWorldInverse,de.matrixWorld),de.normalMatrix.getNormalMatrix(de.modelViewMatrix),ut.onBeforeRender(m,kt,Ct,Ut,de,Pt),ut.transparent===!0&&ut.side===h0?(ut.side=Gc,ut.needsUpdate=!0,m.renderBufferDirect(Ct,kt,Ut,ut,de,Pt),ut.side=f0,ut.needsUpdate=!0,m.renderBufferDirect(Ct,kt,Ut,ut,de,Pt),ut.side=h0):m.renderBufferDirect(Ct,kt,Ut,ut,de,Pt),de.onAfterRender(m,kt,Ct,Ut,ut,Pt)}function fi(de,kt,Ct){kt.isScene!==!0&&(kt=le);const Ut=Q.get(de),ut=f.state.lights,Pt=f.state.shadowsArray,Xt=ut.state.version,kn=Ke.getParameters(de,ut.state,Pt,kt,Ct),Kn=Ke.getProgramCacheKey(kn);let rt=Ut.programs;Ut.environment=de.isMeshStandardMaterial?kt.environment:null,Ut.fog=kt.fog,Ut.envMap=(de.isMeshStandardMaterial?je:ce).get(de.envMap||Ut.environment),rt===void 0&&(de.addEventListener("dispose",De),rt=new Map,Ut.programs=rt);let ci=rt.get(Kn);if(ci!==void 0){if(Ut.currentProgram===ci&&Ut.lightsStateVersion===Xt)return J(de,kn),ci}else kn.uniforms=Ke.getUniforms(de),de.onBuild(Ct,kn,m),de.onBeforeCompile(kn,m),ci=Ke.acquireProgram(kn,Kn),rt.set(Kn,ci),Ut.uniforms=kn.uniforms;const pt=Ut.uniforms;(!de.isShaderMaterial&&!de.isRawShaderMaterial||de.clipping===!0)&&(pt.clippingPlanes=ne.uniform),J(de,kn),Ut.needsLights=Ie(de),Ut.lightsStateVersion=Xt,Ut.needsLights&&(pt.ambientLightColor.value=ut.state.ambient,pt.lightProbe.value=ut.state.probe,pt.directionalLights.value=ut.state.directional,pt.directionalLightShadows.value=ut.state.directionalShadow,pt.spotLights.value=ut.state.spot,pt.spotLightShadows.value=ut.state.spotShadow,pt.rectAreaLights.value=ut.state.rectArea,pt.ltc_1.value=ut.state.rectAreaLTC1,pt.ltc_2.value=ut.state.rectAreaLTC2,pt.pointLights.value=ut.state.point,pt.pointLightShadows.value=ut.state.pointShadow,pt.hemisphereLights.value=ut.state.hemi,pt.directionalShadowMap.value=ut.state.directionalShadowMap,pt.directionalShadowMatrix.value=ut.state.directionalShadowMatrix,pt.spotShadowMap.value=ut.state.spotShadowMap,pt.spotShadowMatrix.value=ut.state.spotShadowMatrix,pt.pointShadowMap.value=ut.state.pointShadowMap,pt.pointShadowMatrix.value=ut.state.pointShadowMatrix);const Le=ci.getUniforms(),Et=n3.seqWithValue(Le.seq,pt);return Ut.currentProgram=ci,Ut.uniformsList=Et,ci}function J(de,kt){const Ct=Q.get(de);Ct.outputEncoding=kt.outputEncoding,Ct.instancing=kt.instancing,Ct.skinning=kt.skinning,Ct.morphTargets=kt.morphTargets,Ct.morphNormals=kt.morphNormals,Ct.morphColors=kt.morphColors,Ct.morphTargetsCount=kt.morphTargetsCount,Ct.numClippingPlanes=kt.numClippingPlanes,Ct.numIntersection=kt.numClipIntersection,Ct.vertexAlphas=kt.vertexAlphas,Ct.vertexTangents=kt.vertexTangents,Ct.toneMapping=kt.toneMapping}function ue(de,kt,Ct,Ut,ut){kt.isScene!==!0&&(kt=le),me.resetTextureUnits();const Pt=kt.fog,Xt=Ut.isMeshStandardMaterial?kt.environment:null,kn=y===null?m.outputEncoding:y.isXRRenderTarget===!0?y.texture.encoding:p0,Kn=(Ut.isMeshStandardMaterial?je:ce).get(Ut.envMap||Xt),rt=Ut.vertexColors===!0&&!!Ct.attributes.color&&Ct.attributes.color.itemSize===4,ci=!!Ut.normalMap&&!!Ct.attributes.tangent,pt=!!Ct.morphAttributes.position,Le=!!Ct.morphAttributes.normal,Et=!!Ct.morphAttributes.color,Xe=Ut.toneMapped?m.toneMapping:Zf,_t=Ct.morphAttributes.position||Ct.morphAttributes.normal||Ct.morphAttributes.color,mt=_t!==void 0?_t.length:0,Ot=Q.get(Ut),gn=f.state.lights;if(H===!0&&(F===!0||de!==x)){const Ii=de===x&&Ut.id===b;ne.setState(Ut,de,Ii)}let dn=!1;Ut.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==gn.state.version||Ot.outputEncoding!==kn||ut.isInstancedMesh&&Ot.instancing===!1||!ut.isInstancedMesh&&Ot.instancing===!0||ut.isSkinnedMesh&&Ot.skinning===!1||!ut.isSkinnedMesh&&Ot.skinning===!0||Ot.envMap!==Kn||Ut.fog===!0&&Ot.fog!==Pt||Ot.numClippingPlanes!==void 0&&(Ot.numClippingPlanes!==ne.numPlanes||Ot.numIntersection!==ne.numIntersection)||Ot.vertexAlphas!==rt||Ot.vertexTangents!==ci||Ot.morphTargets!==pt||Ot.morphNormals!==Le||Ot.morphColors!==Et||Ot.toneMapping!==Xe||Be.isWebGL2===!0&&Ot.morphTargetsCount!==mt)&&(dn=!0):(dn=!0,Ot.__version=Ut.version);let En=Ot.currentProgram;dn===!0&&(En=fi(Ut,kt,ut));let ni=!1,bn=!1,Un=!1;const Bn=En.getUniforms(),yi=Ot.uniforms;if(Ye.useProgram(En.program)&&(ni=!0,bn=!0,Un=!0),Ut.id!==b&&(b=Ut.id,bn=!0),ni||x!==de){if(Bn.setValue(pe,"projectionMatrix",de.projectionMatrix),Be.logarithmicDepthBuffer&&Bn.setValue(pe,"logDepthBufFC",2/(Math.log(de.far+1)/Math.LN2)),x!==de&&(x=de,bn=!0,Un=!0),Ut.isShaderMaterial||Ut.isMeshPhongMaterial||Ut.isMeshToonMaterial||Ut.isMeshStandardMaterial||Ut.envMap){const Ii=Bn.map.cameraPosition;Ii!==void 0&&Ii.setValue(pe,ie.setFromMatrixPosition(de.matrixWorld))}(Ut.isMeshPhongMaterial||Ut.isMeshToonMaterial||Ut.isMeshLambertMaterial||Ut.isMeshBasicMaterial||Ut.isMeshStandardMaterial||Ut.isShaderMaterial)&&Bn.setValue(pe,"isOrthographic",de.isOrthographicCamera===!0),(Ut.isMeshPhongMaterial||Ut.isMeshToonMaterial||Ut.isMeshLambertMaterial||Ut.isMeshBasicMaterial||Ut.isMeshStandardMaterial||Ut.isShaderMaterial||Ut.isShadowMaterial||ut.isSkinnedMesh)&&Bn.setValue(pe,"viewMatrix",de.matrixWorldInverse)}if(ut.isSkinnedMesh){Bn.setOptional(pe,ut,"bindMatrix"),Bn.setOptional(pe,ut,"bindMatrixInverse");const Ii=ut.skeleton;Ii&&(Be.floatVertexTextures?(Ii.boneTexture===null&&Ii.computeBoneTexture(),Bn.setValue(pe,"boneTexture",Ii.boneTexture,me),Bn.setValue(pe,"boneTextureSize",Ii.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Qi=Ct.morphAttributes;if((Qi.position!==void 0||Qi.normal!==void 0||Qi.color!==void 0&&Be.isWebGL2===!0)&&Je.update(ut,Ct,Ut,En),(bn||Ot.receiveShadow!==ut.receiveShadow)&&(Ot.receiveShadow=ut.receiveShadow,Bn.setValue(pe,"receiveShadow",ut.receiveShadow)),bn&&(Bn.setValue(pe,"toneMappingExposure",m.toneMappingExposure),Ot.needsLights&&en(yi,Un),Pt&&Ut.fog===!0&&it.refreshFogUniforms(yi,Pt),it.refreshMaterialUniforms(yi,Ut,I,E,X),n3.upload(pe,Ot.uniformsList,yi,me)),Ut.isShaderMaterial&&Ut.uniformsNeedUpdate===!0&&(n3.upload(pe,Ot.uniformsList,yi,me),Ut.uniformsNeedUpdate=!1),Ut.isSpriteMaterial&&Bn.setValue(pe,"center",ut.center),Bn.setValue(pe,"modelViewMatrix",ut.modelViewMatrix),Bn.setValue(pe,"normalMatrix",ut.normalMatrix),Bn.setValue(pe,"modelMatrix",ut.matrixWorld),Ut.isShaderMaterial||Ut.isRawShaderMaterial){const Ii=Ut.uniformsGroups;for(let Di=0,Zn=Ii.length;Di<Zn;Di++)if(Be.isWebGL2){const xr=Ii[Di];vt.update(xr,En),vt.bind(xr,En)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return En}function en(de,kt){de.ambientLightColor.needsUpdate=kt,de.lightProbe.needsUpdate=kt,de.directionalLights.needsUpdate=kt,de.directionalLightShadows.needsUpdate=kt,de.pointLights.needsUpdate=kt,de.pointLightShadows.needsUpdate=kt,de.spotLights.needsUpdate=kt,de.spotLightShadows.needsUpdate=kt,de.rectAreaLights.needsUpdate=kt,de.hemisphereLights.needsUpdate=kt}function Ie(de){return de.isMeshLambertMaterial||de.isMeshToonMaterial||de.isMeshPhongMaterial||de.isMeshStandardMaterial||de.isShadowMaterial||de.isShaderMaterial&&de.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return _},this.getRenderTarget=function(){return y},this.setRenderTargetTextures=function(de,kt,Ct){Q.get(de.texture).__webglTexture=kt,Q.get(de.depthTexture).__webglTexture=Ct;const Ut=Q.get(de);Ut.__hasExternalTextures=!0,Ut.__hasExternalTextures&&(Ut.__autoAllocateDepthBuffer=Ct===void 0,Ut.__autoAllocateDepthBuffer||Oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ut.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(de,kt){const Ct=Q.get(de);Ct.__webglFramebuffer=kt,Ct.__useDefaultFramebuffer=kt===void 0},this.setRenderTarget=function(de,kt=0,Ct=0){y=de,v=kt,_=Ct;let Ut=!0;if(de){const Kn=Q.get(de);Kn.__useDefaultFramebuffer!==void 0?(Ye.bindFramebuffer(36160,null),Ut=!1):Kn.__webglFramebuffer===void 0?me.setupRenderTarget(de):Kn.__hasExternalTextures&&me.rebindTextures(de,Q.get(de.texture).__webglTexture,Q.get(de.depthTexture).__webglTexture)}let ut=null,Pt=!1,Xt=!1;if(de){const Kn=de.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture)&&(Xt=!0);const rt=Q.get(de).__webglFramebuffer;de.isWebGLCubeRenderTarget?(ut=rt[kt],Pt=!0):Be.isWebGL2&&de.samples>0&&me.useMultisampledRTT(de)===!1?ut=Q.get(de).__webglMultisampledFramebuffer:ut=rt,w.copy(de.viewport),A.copy(de.scissor),T=de.scissorTest}else w.copy(U).multiplyScalar(I).floor(),A.copy(z).multiplyScalar(I).floor(),T=L;if(Ye.bindFramebuffer(36160,ut)&&Be.drawBuffers&&Ut&&Ye.drawBuffers(de,ut),Ye.viewport(w),Ye.scissor(A),Ye.setScissorTest(T),Pt){const Kn=Q.get(de.texture);pe.framebufferTexture2D(36160,36064,34069+kt,Kn.__webglTexture,Ct)}else if(Xt){const Kn=Q.get(de.texture),rt=kt||0;pe.framebufferTextureLayer(36160,36064,Kn.__webglTexture,Ct||0,rt)}b=-1},this.readRenderTargetPixels=function(de,kt,Ct,Ut,ut,Pt,Xt){if(!(de&&de.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kn=Q.get(de).__webglFramebuffer;if(de.isWebGLCubeRenderTarget&&Xt!==void 0&&(kn=kn[Xt]),kn){Ye.bindFramebuffer(36160,kn);try{const Kn=de.texture,rt=Kn.format,ci=Kn.type;if(rt!==Wu&&Re.convert(rt)!==pe.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const pt=ci===Bw&&(Oe.has("EXT_color_buffer_half_float")||Be.isWebGL2&&Oe.has("EXT_color_buffer_float"));if(ci!==jg&&Re.convert(ci)!==pe.getParameter(35738)&&!(ci===Lp&&(Be.isWebGL2||Oe.has("OES_texture_float")||Oe.has("WEBGL_color_buffer_float")))&&!pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}kt>=0&&kt<=de.width-Ut&&Ct>=0&&Ct<=de.height-ut&&pe.readPixels(kt,Ct,Ut,ut,Re.convert(rt),Re.convert(ci),Pt)}finally{const Kn=y!==null?Q.get(y).__webglFramebuffer:null;Ye.bindFramebuffer(36160,Kn)}}},this.copyFramebufferToTexture=function(de,kt,Ct=0){const Ut=Math.pow(2,-Ct),ut=Math.floor(kt.image.width*Ut),Pt=Math.floor(kt.image.height*Ut);me.setTexture2D(kt,0),pe.copyTexSubImage2D(3553,Ct,0,0,de.x,de.y,ut,Pt),Ye.unbindTexture()},this.copyTextureToTexture=function(de,kt,Ct,Ut=0){const ut=kt.image.width,Pt=kt.image.height,Xt=Re.convert(Ct.format),kn=Re.convert(Ct.type);me.setTexture2D(Ct,0),pe.pixelStorei(37440,Ct.flipY),pe.pixelStorei(37441,Ct.premultiplyAlpha),pe.pixelStorei(3317,Ct.unpackAlignment),kt.isDataTexture?pe.texSubImage2D(3553,Ut,de.x,de.y,ut,Pt,Xt,kn,kt.image.data):kt.isCompressedTexture?pe.compressedTexSubImage2D(3553,Ut,de.x,de.y,kt.mipmaps[0].width,kt.mipmaps[0].height,Xt,kt.mipmaps[0].data):pe.texSubImage2D(3553,Ut,de.x,de.y,Xt,kn,kt.image),Ut===0&&Ct.generateMipmaps&&pe.generateMipmap(3553),Ye.unbindTexture()},this.copyTextureToTexture3D=function(de,kt,Ct,Ut,ut=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pt=de.max.x-de.min.x+1,Xt=de.max.y-de.min.y+1,kn=de.max.z-de.min.z+1,Kn=Re.convert(Ut.format),rt=Re.convert(Ut.type);let ci;if(Ut.isData3DTexture)me.setTexture3D(Ut,0),ci=32879;else if(Ut.isDataArrayTexture)me.setTexture2DArray(Ut,0),ci=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}pe.pixelStorei(37440,Ut.flipY),pe.pixelStorei(37441,Ut.premultiplyAlpha),pe.pixelStorei(3317,Ut.unpackAlignment);const pt=pe.getParameter(3314),Le=pe.getParameter(32878),Et=pe.getParameter(3316),Xe=pe.getParameter(3315),_t=pe.getParameter(32877),mt=Ct.isCompressedTexture?Ct.mipmaps[0]:Ct.image;pe.pixelStorei(3314,mt.width),pe.pixelStorei(32878,mt.height),pe.pixelStorei(3316,de.min.x),pe.pixelStorei(3315,de.min.y),pe.pixelStorei(32877,de.min.z),Ct.isDataTexture||Ct.isData3DTexture?pe.texSubImage3D(ci,ut,kt.x,kt.y,kt.z,Pt,Xt,kn,Kn,rt,mt.data):Ct.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),pe.compressedTexSubImage3D(ci,ut,kt.x,kt.y,kt.z,Pt,Xt,kn,Kn,mt.data)):pe.texSubImage3D(ci,ut,kt.x,kt.y,kt.z,Pt,Xt,kn,Kn,rt,mt),pe.pixelStorei(3314,pt),pe.pixelStorei(32878,Le),pe.pixelStorei(3316,Et),pe.pixelStorei(3315,Xe),pe.pixelStorei(32877,_t),ut===0&&Ut.generateMipmaps&&pe.generateMipmap(ci),Ye.unbindTexture()},this.initTexture=function(de){de.isCubeTexture?me.setTextureCube(de,0):de.isData3DTexture?me.setTexture3D(de,0):de.isDataArrayTexture?me.setTexture2DArray(de,0):me.setTexture2D(de,0),Ye.unbindTexture()},this.resetState=function(){v=0,_=0,y=null,Ye.reset(),wt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class Pft extends Dfe{}Pft.prototype.isWebGL1Renderer=!0;class PU{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Fn(e),this.density=t}clone(){return new PU(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class kU{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Fn(e),this.near=t,this.far=i}clone(){return new kU(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let LU=class extends ys{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};class OU{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qO,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Qu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Bo=new st;class Xg{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Bo.fromBufferAttribute(this,t),Bo.applyMatrix4(e),this.setXYZ(t,Bo.x,Bo.y,Bo.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Bo.fromBufferAttribute(this,t),Bo.applyNormalMatrix(e),this.setXYZ(t,Bo.x,Bo.y,Bo.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Bo.fromBufferAttribute(this,t),Bo.transformDirection(e),this.setXYZ(t,Bo.x,Bo.y,Bo.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Ps(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Xg(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class NU extends ia{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let wy;const ux=new st,Ty=new st,Cy=new st,Ay=new on,cx=new on,Rfe=new ri,vE=new st,dx=new st,yE=new st,mY=new on,Uk=new on,gY=new on;class i3 extends ys{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",wy===void 0){wy=new cr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new OU(t,5);wy.setIndex([0,1,2,0,2,3]),wy.setAttribute("position",new Xg(i,3,0,!1)),wy.setAttribute("uv",new Xg(i,2,3,!1))}this.geometry=wy,this.material=e!==void 0?e:new NU,this.center=new on(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ty.setFromMatrixScale(this.matrixWorld),Rfe.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cy.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ty.multiplyScalar(-Cy.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;_E(vE.set(-.5,-.5,0),Cy,a,Ty,r,s),_E(dx.set(.5,-.5,0),Cy,a,Ty,r,s),_E(yE.set(.5,.5,0),Cy,a,Ty,r,s),mY.set(0,0),Uk.set(1,0),gY.set(1,1);let o=e.ray.intersectTriangle(vE,dx,yE,!1,ux);if(o===null&&(_E(dx.set(-.5,.5,0),Cy,a,Ty,r,s),Uk.set(0,1),o=e.ray.intersectTriangle(vE,yE,dx,!1,ux),o===null))return;const l=e.ray.origin.distanceTo(ux);l<e.near||l>e.far||t.push({distance:l,point:ux.clone(),uv:b2.getUV(ux,vE,dx,yE,mY,Uk,gY,new on),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function _E(n,e,t,i,r,s){Ay.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(cx.x=s*Ay.x-r*Ay.y,cx.y=r*Ay.x+s*Ay.y):cx.copy(Ay),n.copy(e),n.x+=cx.x,n.y+=cx.y,n.applyMatrix4(Rfe)}const bE=new st,vY=new st;class kft extends ys{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){bE.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(bE);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){bE.setFromMatrixPosition(e.matrixWorld),vY.setFromMatrixPosition(this.matrixWorld);const i=bE.distanceTo(vY)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s&&i>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}const yY=new st,_Y=new Rr,bY=new Rr,Lft=new st,SY=new ri;class iR extends ga{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ri,this.bindMatrixInverse=new ri}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Rr,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;_Y.fromBufferAttribute(r.attributes.skinIndex,e),bY.fromBufferAttribute(r.attributes.skinWeight,e),yY.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=bY.getComponent(s);if(a!==0){const o=_Y.getComponent(s);SY.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(Lft.copy(yY).applyMatrix4(SY),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class V_ extends ys{constructor(){super(),this.isBone=!0,this.type="Bone"}}let S2=class extends eo{constructor(e=null,t=1,i=1,r,s,a,o,l,u=Ia,c=Ia,d,f){super(null,a,o,l,u,c,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};const xY=new ri,Oft=new ri;class Lb{constructor(e=[],t=[]){this.uuid=Qu(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new ri)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new ri;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:Oft;xY.multiplyMatrices(o,t[s]),xY.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Lb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=ofe(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new S2(t,e,e,Wu,Lp);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new V_),this.bones.push(a),this.boneInverses.push(new ri().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}let Vw=class extends Ps{constructor(e,t,i,r=1){typeof i=="number"&&(r=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}};const wY=new ri,TY=new ri,SE=[],fx=new ga;class Nft extends ga{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Vw(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(fx.geometry=this.geometry,fx.material=this.material,fx.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,wY),TY.multiplyMatrices(i,wY),fx.matrixWorld=TY,fx.raycast(e,SE);for(let a=0,o=SE.length;a<o;a++){const l=SE[a];l.instanceId=s,l.object=this,t.push(l)}SE.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Vw(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Wc extends ia{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const CY=new st,AY=new st,EY=new ri,zk=new tR,xE=new uv;class Ob extends ys{constructor(e=new cr,t=new Wc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)CY.fromBufferAttribute(t,r-1),AY.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=CY.distanceTo(AY);e.setAttribute("lineDistance",new Gn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xE.copy(i.boundingSphere),xE.applyMatrix4(r),xE.radius+=s,e.ray.intersectsSphere(xE)===!1)return;EY.copy(r).invert(),zk.copy(e.ray).applyMatrix4(EY);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new st,c=new st,d=new st,f=new st,h=this.isLineSegments?2:1,p=i.index,g=i.attributes.position;if(p!==null){const v=Math.max(0,a.start),_=Math.min(p.count,a.start+a.count);for(let y=v,b=_-1;y<b;y+=h){const x=p.getX(y),w=p.getX(y+1);if(u.fromBufferAttribute(g,x),c.fromBufferAttribute(g,w),zk.distanceSqToSegment(u,c,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const T=e.ray.origin.distanceTo(f);T<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),_=Math.min(g.count,a.start+a.count);for(let y=v,b=_-1;y<b;y+=h){if(u.fromBufferAttribute(g,y),c.fromBufferAttribute(g,y+1),zk.distanceSqToSegment(u,c,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(f);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const MY=new st,IY=new st;class Yg extends Ob{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)MY.fromBufferAttribute(t,r),IY.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+MY.distanceTo(IY);e.setAttribute("lineDistance",new Gn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Pfe extends Ob{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ug extends ia{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const DY=new ri,eN=new tR,wE=new uv,TE=new st;class x2 extends ys{constructor(e=new cr,t=new ug){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),wE.copy(i.boundingSphere),wE.applyMatrix4(r),wE.radius+=s,e.ray.intersectsSphere(wE)===!1)return;DY.copy(r).invert(),eN.copy(e.ray).applyMatrix4(DY);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,d=i.attributes.position;if(u!==null){const f=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);for(let p=f,m=h;p<m;p++){const g=u.getX(p);TE.fromBufferAttribute(d,g),RY(TE,g,l,r,e,t,this)}}else{const f=Math.max(0,a.start),h=Math.min(d.count,a.start+a.count);for(let p=f,m=h;p<m;p++)TE.fromBufferAttribute(d,p),RY(TE,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function RY(n,e,t,i,r,s,a){const o=eN.distanceSqToPoint(n);if(o<t){const l=new st;eN.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class Bft extends eo{constructor(e,t,i,r,s,a,o,l,u,c,d,f){super(null,a,o,l,u,c,r,s,d,f),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ed{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-a,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const c=i[r],f=i[r+1]-c,h=(a-c)/f;return(r+h)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new on:new st);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new st,r=[],s=[],a=[],o=new st,l=new ri;for(let h=0;h<=e;h++){const p=h/e;r[h]=this.getTangentAt(p,new st)}s[0]=new st,a[0]=new st;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),d<=u&&(u=d,i.set(0,1,0)),f<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let h=1;h<=e;h++){if(s[h]=s[h-1].clone(),a[h]=a[h-1].clone(),o.crossVectors(r[h-1],r[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(fa(r[h-1].dot(r[h]),-1,1));s[h].applyMatrix4(l.makeRotationAxis(o,p))}a[h].crossVectors(r[h],s[h])}if(t===!0){let h=Math.acos(fa(s[0].dot(s[e]),-1,1));h/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(h=-h);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],h*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class BU extends ed{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new on,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,h=u-this.aY;l=f*c-h*d+this.aX,u=f*d+h*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Fft extends BU{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function FU(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,d){let f=(a-s)/u-(o-s)/(u+c)+(o-a)/c,h=(o-a)/c-(l-a)/(c+d)+(l-o)/d;f*=c,h*=c,r(a,o,f,h)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const CE=new st,Hk=new FU,Vk=new FU,$k=new FU;class Uft extends ed{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new st){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=r[(o-1)%s]:(CE.subVectors(r[0],r[1]).add(r[0]),u=CE);const d=r[o%s],f=r[(o+1)%s];if(this.closed||o+2<s?c=r[(o+2)%s]:(CE.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=CE),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(f),h),g=Math.pow(f.distanceToSquared(c),h);m<1e-4&&(m=1),p<1e-4&&(p=m),g<1e-4&&(g=m),Hk.initNonuniformCatmullRom(u.x,d.x,f.x,c.x,p,m,g),Vk.initNonuniformCatmullRom(u.y,d.y,f.y,c.y,p,m,g),$k.initNonuniformCatmullRom(u.z,d.z,f.z,c.z,p,m,g)}else this.curveType==="catmullrom"&&(Hk.initCatmullRom(u.x,d.x,f.x,c.x,this.tension),Vk.initCatmullRom(u.y,d.y,f.y,c.y,this.tension),$k.initCatmullRom(u.z,d.z,f.z,c.z,this.tension));return i.set(Hk.calc(l),Vk.calc(l),$k.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new st().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function PY(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function zft(n,e){const t=1-n;return t*t*e}function Hft(n,e){return 2*(1-n)*n*e}function Vft(n,e){return n*n*e}function w2(n,e,t,i){return zft(n,e)+Hft(n,t)+Vft(n,i)}function $ft(n,e){const t=1-n;return t*t*t*e}function Gft(n,e){const t=1-n;return 3*t*t*n*e}function Wft(n,e){return 3*(1-n)*n*n*e}function qft(n,e){return n*n*n*e}function T2(n,e,t,i,r){return $ft(n,e)+Gft(n,t)+Wft(n,i)+qft(n,r)}class kfe extends ed{constructor(e=new on,t=new on,i=new on,r=new on){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new on){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(T2(e,r.x,s.x,a.x,o.x),T2(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class jft extends ed{constructor(e=new st,t=new st,i=new st,r=new st){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new st){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(T2(e,r.x,s.x,a.x,o.x),T2(e,r.y,s.y,a.y,o.y),T2(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UU extends ed{constructor(e=new on,t=new on){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new on){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new on;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Kft extends ed{constructor(e=new st,t=new st){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new st){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Lfe extends ed{constructor(e=new on,t=new on,i=new on){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new on){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(w2(e,r.x,s.x,a.x),w2(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ofe extends ed{constructor(e=new st,t=new st,i=new st){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new st){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(w2(e,r.x,s.x,a.x),w2(e,r.y,s.y,a.y),w2(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nfe extends ed{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new on){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],d=r[a>r.length-3?r.length-1:a+2];return i.set(PY(o,l.x,u.x,c.x,d.x),PY(o,l.y,u.y,c.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new on().fromArray(r))}return this}}var zU=Object.freeze({__proto__:null,ArcCurve:Fft,CatmullRomCurve3:Uft,CubicBezierCurve:kfe,CubicBezierCurve3:jft,EllipseCurve:BU,LineCurve:UU,LineCurve3:Kft,QuadraticBezierCurve:Lfe,QuadraticBezierCurve3:Ofe,SplineCurve:Nfe});class Xft extends ed{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new UU(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new zU[r.type]().fromJSON(r))}return this}}class tN extends Xft{constructor(e){super(),this.type="Path",this.currentPoint=new on,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new UU(this.currentPoint.clone(),new on(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Lfe(this.currentPoint.clone(),new on(e,t),new on(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new kfe(this.currentPoint.clone(),new on(e,t),new on(i,r),new on(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Nfe(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const u=new BU(e,t,i,r,s,a,o,l);if(this.curves.length>0){const d=u.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class $w extends cr{constructor(e=[new on(0,-.5),new on(.5,0),new on(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=fa(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],c=1/t,d=new st,f=new on,h=new st,p=new st,m=new st;let g=0,v=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:g=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,h.x=v*1,h.y=-g,h.z=v*0,m.copy(h),h.normalize(),l.push(h.x,h.y,h.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[_+1].x-e[_].x,v=e[_+1].y-e[_].y,h.x=v*1,h.y=-g,h.z=v*0,p.copy(h),h.x+=m.x,h.y+=m.y,h.z+=m.z,h.normalize(),l.push(h.x,h.y,h.z),m.copy(p)}for(let _=0;_<=t;_++){const y=i+_*c*r,b=Math.sin(y),x=Math.cos(y);for(let w=0;w<=e.length-1;w++){d.x=e[w].x*b,d.y=e[w].y,d.z=e[w].x*x,a.push(d.x,d.y,d.z),f.x=_/t,f.y=w/(e.length-1),o.push(f.x,f.y);const A=l[3*w+0]*b,T=l[3*w+1],C=l[3*w+0]*x;u.push(A,T,C)}}for(let _=0;_<t;_++)for(let y=0;y<e.length-1;y++){const b=y+_*e.length,x=b,w=b+e.length,A=b+e.length+1,T=b+1;s.push(x,w,T),s.push(A,T,w)}this.setIndex(s),this.setAttribute("position",new Gn(a,3)),this.setAttribute("uv",new Gn(o,2)),this.setAttribute("normal",new Gn(u,3))}static fromJSON(e){return new $w(e.points,e.segments,e.phiStart,e.phiLength)}}class j4 extends $w{constructor(e=1,t=1,i=4,r=8){const s=new tN;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new j4(e.radius,e.length,e.capSegments,e.radialSegments)}}class K4 extends cr{constructor(e=1,t=8,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],u=new st,c=new on;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let d=0,f=3;d<=t;d++,f+=3){const h=i+d/t*r;u.x=e*Math.cos(h),u.y=e*Math.sin(h),a.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(a[f]/e+1)/2,c.y=(a[f+1]/e+1)/2,l.push(c.x,c.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Gn(a,3)),this.setAttribute("normal",new Gn(o,3)),this.setAttribute("uv",new Gn(l,2))}static fromJSON(e){return new K4(e.radius,e.segments,e.thetaStart,e.thetaLength)}}let nN=class Bfe extends cr{constructor(e=1,t=1,i=1,r=8,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],d=[],f=[],h=[];let p=0;const m=[],g=i/2;let v=0;_(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Gn(d,3)),this.setAttribute("normal",new Gn(f,3)),this.setAttribute("uv",new Gn(h,2));function _(){const b=new st,x=new st;let w=0;const A=(t-e)/i;for(let T=0;T<=s;T++){const C=[],E=T/s,I=E*(t-e)+e;for(let k=0;k<=r;k++){const O=k/r,U=O*l+o,z=Math.sin(U),L=Math.cos(U);x.x=I*z,x.y=-E*i+g,x.z=I*L,d.push(x.x,x.y,x.z),b.set(z,A,L).normalize(),f.push(b.x,b.y,b.z),h.push(O,1-E),C.push(p++)}m.push(C)}for(let T=0;T<r;T++)for(let C=0;C<s;C++){const E=m[C][T],I=m[C+1][T],k=m[C+1][T+1],O=m[C][T+1];c.push(E,I,O),c.push(I,k,O),w+=6}u.addGroup(v,w,0),v+=w}function y(b){const x=p,w=new on,A=new st;let T=0;const C=b===!0?e:t,E=b===!0?1:-1;for(let k=1;k<=r;k++)d.push(0,g*E,0),f.push(0,E,0),h.push(.5,.5),p++;const I=p;for(let k=0;k<=r;k++){const U=k/r*l+o,z=Math.cos(U),L=Math.sin(U);A.x=C*L,A.y=g*E,A.z=C*z,d.push(A.x,A.y,A.z),f.push(0,E,0),w.x=z*.5+.5,w.y=L*.5*E+.5,h.push(w.x,w.y),p++}for(let k=0;k<r;k++){const O=x+k,U=I+k;b===!0?c.push(U,U+1,O):c.push(U+1,U,O),T+=3}u.addGroup(v,T,b===!0?1:2),v+=T}}static fromJSON(e){return new Bfe(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},kY=class Ffe extends nN{constructor(e=1,t=1,i=8,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new Ffe(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};class m0 extends cr{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),u(i),c(),this.setAttribute("position",new Gn(s,3)),this.setAttribute("normal",new Gn(s.slice(),3)),this.setAttribute("uv",new Gn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(_){const y=new st,b=new st,x=new st;for(let w=0;w<t.length;w+=3)h(t[w+0],y),h(t[w+1],b),h(t[w+2],x),l(y,b,x,_)}function l(_,y,b,x){const w=x+1,A=[];for(let T=0;T<=w;T++){A[T]=[];const C=_.clone().lerp(b,T/w),E=y.clone().lerp(b,T/w),I=w-T;for(let k=0;k<=I;k++)k===0&&T===w?A[T][k]=C:A[T][k]=C.clone().lerp(E,k/I)}for(let T=0;T<w;T++)for(let C=0;C<2*(w-T)-1;C++){const E=Math.floor(C/2);C%2===0?(f(A[T][E+1]),f(A[T+1][E]),f(A[T][E])):(f(A[T][E+1]),f(A[T+1][E+1]),f(A[T+1][E]))}}function u(_){const y=new st;for(let b=0;b<s.length;b+=3)y.x=s[b+0],y.y=s[b+1],y.z=s[b+2],y.normalize().multiplyScalar(_),s[b+0]=y.x,s[b+1]=y.y,s[b+2]=y.z}function c(){const _=new st;for(let y=0;y<s.length;y+=3){_.x=s[y+0],_.y=s[y+1],_.z=s[y+2];const b=g(_)/2/Math.PI+.5,x=v(_)/Math.PI+.5;a.push(b,1-x)}p(),d()}function d(){for(let _=0;_<a.length;_+=6){const y=a[_+0],b=a[_+2],x=a[_+4],w=Math.max(y,b,x),A=Math.min(y,b,x);w>.9&&A<.1&&(y<.2&&(a[_+0]+=1),b<.2&&(a[_+2]+=1),x<.2&&(a[_+4]+=1))}}function f(_){s.push(_.x,_.y,_.z)}function h(_,y){const b=_*3;y.x=e[b+0],y.y=e[b+1],y.z=e[b+2]}function p(){const _=new st,y=new st,b=new st,x=new st,w=new on,A=new on,T=new on;for(let C=0,E=0;C<s.length;C+=9,E+=6){_.set(s[C+0],s[C+1],s[C+2]),y.set(s[C+3],s[C+4],s[C+5]),b.set(s[C+6],s[C+7],s[C+8]),w.set(a[E+0],a[E+1]),A.set(a[E+2],a[E+3]),T.set(a[E+4],a[E+5]),x.copy(_).add(y).add(b).divideScalar(3);const I=g(x);m(w,E+0,_,I),m(A,E+2,y,I),m(T,E+4,b,I)}}function m(_,y,b,x){x<0&&_.x===1&&(a[y]=_.x-1),b.x===0&&b.z===0&&(a[y]=x/2/Math.PI+.5)}function g(_){return Math.atan2(_.z,-_.x)}function v(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}static fromJSON(e){return new m0(e.vertices,e.indices,e.radius,e.details)}}class X4 extends m0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X4(e.radius,e.detail)}}const AE=new st,EE=new st,Gk=new st,ME=new b2;class Yft extends cr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Y1*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],c=["a","b","c"],d=new Array(3),f={},h=[];for(let p=0;p<l;p+=3){a?(u[0]=a.getX(p),u[1]=a.getX(p+1),u[2]=a.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:m,b:g,c:v}=ME;if(m.fromBufferAttribute(o,u[0]),g.fromBufferAttribute(o,u[1]),v.fromBufferAttribute(o,u[2]),ME.getNormal(Gk),d[0]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,d[1]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,d[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(d[0]===d[1]||d[1]===d[2]||d[2]===d[0]))for(let _=0;_<3;_++){const y=(_+1)%3,b=d[_],x=d[y],w=ME[c[_]],A=ME[c[y]],T=`${b}_${x}`,C=`${x}_${b}`;C in f&&f[C]?(Gk.dot(f[C].normal)<=s&&(h.push(w.x,w.y,w.z),h.push(A.x,A.y,A.z)),f[C]=null):T in f||(f[T]={index0:u[_],index1:u[y],normal:Gk.clone()})}}for(const p in f)if(f[p]){const{index0:m,index1:g}=f[p];AE.fromBufferAttribute(o,m),EE.fromBufferAttribute(o,g),h.push(AE.x,AE.y,AE.z),h.push(EE.x,EE.y,EE.z)}this.setAttribute("position",new Gn(h,3))}}}class HU extends tN{constructor(e){super(e),this.uuid=Qu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new tN().fromJSON(r))}return this}}const Qft={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Ufe(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,d,f,h;if(i&&(s=nht(n,e,s,t)),n.length>80*t){o=u=n[0],l=c=n[1];for(let p=t;p<r;p+=t)d=n[p],f=n[p+1],d<o&&(o=d),f<l&&(l=f),d>u&&(u=d),f>c&&(c=f);h=Math.max(u-o,c-l),h=h!==0?1/h:0}return Gw(s,a,t,o,l,h),a}};function Ufe(n,e,t,i,r){let s,a;if(r===hht(n,e,t,i)>0)for(s=e;s<t;s+=i)a=LY(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=LY(s,n[s],n[s+1],a);return a&&rR(a,a.next)&&(qw(a),a=a.next),a}function g0(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(rR(t,t.next)||_s(t.prev,t,t.next)===0)){if(qw(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Gw(n,e,t,i,r,s,a){if(!n)return;!a&&s&&oht(n,i,r,s);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?Jft(n,i,r,s):Zft(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),qw(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=eht(g0(n),e,t),Gw(n,e,t,i,r,s,2)):a===2&&tht(n,e,t,i,r,s):Gw(g0(n),e,t,i,r,s,1);break}}}function Zft(n){const e=n.prev,t=n,i=n.next;if(_s(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(w1(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&_s(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Jft(n,e,t,i){const r=n.prev,s=n,a=n.next;if(_s(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,u=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,c=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,d=iN(o,l,e,t,i),f=iN(u,c,e,t,i);let h=n.prevZ,p=n.nextZ;for(;h&&h.z>=d&&p&&p.z<=f;){if(h!==n.prev&&h!==n.next&&w1(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&_s(h.prev,h,h.next)>=0||(h=h.prevZ,p!==n.prev&&p!==n.next&&w1(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&_s(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==n.prev&&h!==n.next&&w1(r.x,r.y,s.x,s.y,a.x,a.y,h.x,h.y)&&_s(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==n.prev&&p!==n.next&&w1(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&_s(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function eht(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!rR(r,s)&&zfe(r,i,i.next,s)&&Ww(r,s)&&Ww(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),qw(i),qw(i.next),i=n=s),i=i.next}while(i!==n);return g0(i)}function tht(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&cht(a,o)){let l=Hfe(a,o);a=g0(a,a.next),l=g0(l,l.next),Gw(a,e,t,i,r,s),Gw(l,e,t,i,r,s);return}o=o.next}a=a.next}while(a!==n)}function nht(n,e,t,i){const r=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,u=Ufe(n,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(uht(u));for(r.sort(iht),s=0;s<r.length;s++)rht(r[s],t),t=g0(t,t.next);return t}function iht(n,e){return n.x-e.x}function rht(n,e){if(e=sht(n,e),e){const t=Hfe(e,n);g0(e,e.next),g0(t,t.next)}}function sht(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const f=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=i&&f>s){if(s=f,f===i){if(r===t.y)return t;if(r===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(i===s)return a;const o=a,l=a.x,u=a.y;let c=1/0,d;t=a;do i>=t.x&&t.x>=l&&i!==t.x&&w1(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),Ww(t,n)&&(d<c||d===c&&(t.x>a.x||t.x===a.x&&aht(a,t)))&&(a=t,c=d)),t=t.next;while(t!==o);return a}function aht(n,e){return _s(n.prev,n,e.prev)<0&&_s(e.next,n,n.next)<0}function oht(n,e,t,i){let r=n;do r.z===null&&(r.z=iN(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,lht(r)}function lht(n){let e,t,i,r,s,a,o,l,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return n}function iN(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function uht(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function w1(n,e,t,i,r,s,a,o){return(r-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(i-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(r-a)*(i-o)>=0}function cht(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!dht(n,e)&&(Ww(n,e)&&Ww(e,n)&&fht(n,e)&&(_s(n.prev,n,e.prev)||_s(n,e.prev,e))||rR(n,e)&&_s(n.prev,n,n.next)>0&&_s(e.prev,e,e.next)>0)}function _s(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function rR(n,e){return n.x===e.x&&n.y===e.y}function zfe(n,e,t,i){const r=DE(_s(n,e,t)),s=DE(_s(n,e,i)),a=DE(_s(t,i,n)),o=DE(_s(t,i,e));return!!(r!==s&&a!==o||r===0&&IE(n,t,e)||s===0&&IE(n,i,e)||a===0&&IE(t,n,i)||o===0&&IE(t,e,i))}function IE(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function DE(n){return n>0?1:n<0?-1:0}function dht(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&zfe(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Ww(n,e){return _s(n.prev,n,n.next)<0?_s(n,e,n.next)>=0&&_s(n,n.prev,e)>=0:_s(n,e,n.prev)<0||_s(n,n.next,e)<0}function fht(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Hfe(n,e){const t=new rN(n.i,n.x,n.y),i=new rN(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function LY(n,e,t,i){const r=new rN(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qw(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function rN(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function hht(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class $p{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return $p.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];OY(e),NY(i,e);let a=e.length;t.forEach(OY);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,NY(i,t[l]);const o=Qft.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function OY(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function NY(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Y4 extends cr{constructor(e=new HU([new on(.5,.5),new on(-.5,.5),new on(-.5,-.5),new on(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new Gn(r,3)),this.setAttribute("uv",new Gn(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,h=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:h-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:pht;let y,b=!1,x,w,A,T;v&&(y=v.getSpacedPoints(c),b=!0,f=!1,x=v.computeFrenetFrames(c,!1),w=new st,A=new st,T=new st),f||(g=0,h=0,p=0,m=0);const C=o.extractPoints(u);let E=C.shape;const I=C.holes;if(!$p.isClockWise(E)){E=E.reverse();for(let Q=0,me=I.length;Q<me;Q++){const ce=I[Q];$p.isClockWise(ce)&&(I[Q]=ce.reverse())}}const O=$p.triangulateShape(E,I),U=E;for(let Q=0,me=I.length;Q<me;Q++){const ce=I[Q];E=E.concat(ce)}function z(Q,me,ce){return me||console.error("THREE.ExtrudeGeometry: vec does not exist"),me.clone().multiplyScalar(ce).add(Q)}const L=E.length,G=O.length;function H(Q,me,ce){let je,Fe,nt;const We=Q.x-me.x,Ke=Q.y-me.y,it=ce.x-Q.x,be=ce.y-Q.y,K=We*We+Ke*Ke,ne=We*be-Ke*it;if(Math.abs(ne)>Number.EPSILON){const Se=Math.sqrt(K),ze=Math.sqrt(it*it+be*be),Je=me.x-Ke/Se,Tt=me.y+We/Se,At=ce.x-be/ze,Re=ce.y+it/ze,wt=((At-Je)*be-(Re-Tt)*it)/(We*be-Ke*it);je=Je+We*wt-Q.x,Fe=Tt+Ke*wt-Q.y;const vt=je*je+Fe*Fe;if(vt<=2)return new on(je,Fe);nt=Math.sqrt(vt/2)}else{let Se=!1;We>Number.EPSILON?it>Number.EPSILON&&(Se=!0):We<-Number.EPSILON?it<-Number.EPSILON&&(Se=!0):Math.sign(Ke)===Math.sign(be)&&(Se=!0),Se?(je=-Ke,Fe=We,nt=Math.sqrt(K)):(je=We,Fe=Ke,nt=Math.sqrt(K/2))}return new on(je/nt,Fe/nt)}const F=[];for(let Q=0,me=U.length,ce=me-1,je=Q+1;Q<me;Q++,ce++,je++)ce===me&&(ce=0),je===me&&(je=0),F[Q]=H(U[Q],U[ce],U[je]);const X=[];let te,re=F.concat();for(let Q=0,me=I.length;Q<me;Q++){const ce=I[Q];te=[];for(let je=0,Fe=ce.length,nt=Fe-1,We=je+1;je<Fe;je++,nt++,We++)nt===Fe&&(nt=0),We===Fe&&(We=0),te[je]=H(ce[je],ce[nt],ce[We]);X.push(te),re=re.concat(te)}for(let Q=0;Q<g;Q++){const me=Q/g,ce=h*Math.cos(me*Math.PI/2),je=p*Math.sin(me*Math.PI/2)+m;for(let Fe=0,nt=U.length;Fe<nt;Fe++){const We=z(U[Fe],F[Fe],je);ye(We.x,We.y,-ce)}for(let Fe=0,nt=I.length;Fe<nt;Fe++){const We=I[Fe];te=X[Fe];for(let Ke=0,it=We.length;Ke<it;Ke++){const be=z(We[Ke],te[Ke],je);ye(be.x,be.y,-ce)}}}const ie=p+m;for(let Q=0;Q<L;Q++){const me=f?z(E[Q],re[Q],ie):E[Q];b?(A.copy(x.normals[0]).multiplyScalar(me.x),w.copy(x.binormals[0]).multiplyScalar(me.y),T.copy(y[0]).add(A).add(w),ye(T.x,T.y,T.z)):ye(me.x,me.y,0)}for(let Q=1;Q<=c;Q++)for(let me=0;me<L;me++){const ce=f?z(E[me],re[me],ie):E[me];b?(A.copy(x.normals[Q]).multiplyScalar(ce.x),w.copy(x.binormals[Q]).multiplyScalar(ce.y),T.copy(y[Q]).add(A).add(w),ye(T.x,T.y,T.z)):ye(ce.x,ce.y,d/c*Q)}for(let Q=g-1;Q>=0;Q--){const me=Q/g,ce=h*Math.cos(me*Math.PI/2),je=p*Math.sin(me*Math.PI/2)+m;for(let Fe=0,nt=U.length;Fe<nt;Fe++){const We=z(U[Fe],F[Fe],je);ye(We.x,We.y,d+ce)}for(let Fe=0,nt=I.length;Fe<nt;Fe++){const We=I[Fe];te=X[Fe];for(let Ke=0,it=We.length;Ke<it;Ke++){const be=z(We[Ke],te[Ke],je);b?ye(be.x,be.y+y[c-1].y,y[c-1].x+ce):ye(be.x,be.y,d+ce)}}}le(),ge();function le(){const Q=r.length/3;if(f){let me=0,ce=L*me;for(let je=0;je<G;je++){const Fe=O[je];Oe(Fe[2]+ce,Fe[1]+ce,Fe[0]+ce)}me=c+g*2,ce=L*me;for(let je=0;je<G;je++){const Fe=O[je];Oe(Fe[0]+ce,Fe[1]+ce,Fe[2]+ce)}}else{for(let me=0;me<G;me++){const ce=O[me];Oe(ce[2],ce[1],ce[0])}for(let me=0;me<G;me++){const ce=O[me];Oe(ce[0]+L*c,ce[1]+L*c,ce[2]+L*c)}}i.addGroup(Q,r.length/3-Q,0)}function ge(){const Q=r.length/3;let me=0;pe(U,me),me+=U.length;for(let ce=0,je=I.length;ce<je;ce++){const Fe=I[ce];pe(Fe,me),me+=Fe.length}i.addGroup(Q,r.length/3-Q,1)}function pe(Q,me){let ce=Q.length;for(;--ce>=0;){const je=ce;let Fe=ce-1;Fe<0&&(Fe=Q.length-1);for(let nt=0,We=c+g*2;nt<We;nt++){const Ke=L*nt,it=L*(nt+1),be=me+je+Ke,K=me+Fe+Ke,ne=me+Fe+it,Se=me+je+it;Be(be,K,ne,Se)}}}function ye(Q,me,ce){l.push(Q),l.push(me),l.push(ce)}function Oe(Q,me,ce){Ye(Q),Ye(me),Ye(ce);const je=r.length/3,Fe=_.generateTopUV(i,r,je-3,je-2,je-1);Ze(Fe[0]),Ze(Fe[1]),Ze(Fe[2])}function Be(Q,me,ce,je){Ye(Q),Ye(me),Ye(je),Ye(me),Ye(ce),Ye(je);const Fe=r.length/3,nt=_.generateSideWallUV(i,r,Fe-6,Fe-3,Fe-2,Fe-1);Ze(nt[0]),Ze(nt[1]),Ze(nt[3]),Ze(nt[1]),Ze(nt[2]),Ze(nt[3])}function Ye(Q){r.push(l[Q*3+0]),r.push(l[Q*3+1]),r.push(l[Q*3+2])}function Ze(Q){s.push(Q.x),s.push(Q.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return mht(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new zU[r.type]().fromJSON(r)),new Y4(i,e.options)}}const pht={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new on(s,a),new on(o,l),new on(u,c)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[i*3],c=e[i*3+1],d=e[i*3+2],f=e[r*3],h=e[r*3+1],p=e[r*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(o-c)<Math.abs(a-u)?[new on(a,1-l),new on(u,1-d),new on(f,1-p),new on(m,1-v)]:[new on(o,1-l),new on(c,1-d),new on(h,1-p),new on(g,1-v)]}};function mht(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Q4 extends m0{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Q4(e.radius,e.detail)}}class Z4 extends m0{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Z4(e.radius,e.detail)}}class J4 extends cr{constructor(e=.5,t=1,i=8,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],c=[];let d=e;const f=(t-e)/r,h=new st,p=new on;for(let m=0;m<=r;m++){for(let g=0;g<=i;g++){const v=s+g/i*a;h.x=d*Math.cos(v),h.y=d*Math.sin(v),l.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(h.x/t+1)/2,p.y=(h.y/t+1)/2,c.push(p.x,p.y)}d+=f}for(let m=0;m<r;m++){const g=m*(i+1);for(let v=0;v<i;v++){const _=v+g,y=_,b=_+i+1,x=_+i+2,w=_+1;o.push(y,b,w),o.push(b,x,w)}}this.setIndex(o),this.setAttribute("position",new Gn(l,3)),this.setAttribute("normal",new Gn(u,3)),this.setAttribute("uv",new Gn(c,2))}static fromJSON(e){return new J4(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class eI extends cr{constructor(e=new HU([new on(0,.5),new on(-.5,-.5),new on(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Gn(r,3)),this.setAttribute("normal",new Gn(s,3)),this.setAttribute("uv",new Gn(a,2));function u(c){const d=r.length/3,f=c.extractPoints(t);let h=f.shape;const p=f.holes;$p.isClockWise(h)===!1&&(h=h.reverse());for(let g=0,v=p.length;g<v;g++){const _=p[g];$p.isClockWise(_)===!0&&(p[g]=_.reverse())}const m=$p.triangulateShape(h,p);for(let g=0,v=p.length;g<v;g++){const _=p[g];h=h.concat(_)}for(let g=0,v=h.length;g<v;g++){const _=h[g];r.push(_.x,_.y,0),s.push(0,0,1),a.push(_.x,_.y)}for(let g=0,v=m.length;g<v;g++){const _=m[g],y=_[0]+d,b=_[1]+d,x=_[2]+d;i.push(y,b,x),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return ght(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new eI(i,e.curveSegments)}}function ght(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}let BY=class Vfe extends cr{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const c=[],d=new st,f=new st,h=[],p=[],m=[],g=[];for(let v=0;v<=i;v++){const _=[],y=v/i;let b=0;v==0&&a==0?b=.5/t:v==i&&l==Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(r+w*s)*Math.sin(a+y*o),d.y=e*Math.cos(a+y*o),d.z=e*Math.sin(r+w*s)*Math.sin(a+y*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),g.push(w+b,1-y),_.push(u++)}c.push(_)}for(let v=0;v<i;v++)for(let _=0;_<t;_++){const y=c[v][_+1],b=c[v][_],x=c[v+1][_],w=c[v+1][_+1];(v!==0||a>0)&&h.push(y,b,w),(v!==i-1||l<Math.PI)&&h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new Gn(p,3)),this.setAttribute("normal",new Gn(m,3)),this.setAttribute("uv",new Gn(g,2))}static fromJSON(e){return new Vfe(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};class tI extends m0{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new tI(e.radius,e.detail)}}class nI extends cr{constructor(e=1,t=.4,i=8,r=6,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],u=[],c=new st,d=new st,f=new st;for(let h=0;h<=i;h++)for(let p=0;p<=r;p++){const m=p/r*s,g=h/i*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(m),d.y=(e+t*Math.cos(g))*Math.sin(m),d.z=t*Math.sin(g),o.push(d.x,d.y,d.z),c.x=e*Math.cos(m),c.y=e*Math.sin(m),f.subVectors(d,c).normalize(),l.push(f.x,f.y,f.z),u.push(p/r),u.push(h/i)}for(let h=1;h<=i;h++)for(let p=1;p<=r;p++){const m=(r+1)*h+p-1,g=(r+1)*(h-1)+p-1,v=(r+1)*(h-1)+p,_=(r+1)*h+p;a.push(m,g,_),a.push(g,v,_)}this.setIndex(a),this.setAttribute("position",new Gn(o,3)),this.setAttribute("normal",new Gn(l,3)),this.setAttribute("uv",new Gn(u,2))}static fromJSON(e){return new nI(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class iI extends cr{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],c=[],d=new st,f=new st,h=new st,p=new st,m=new st,g=new st,v=new st;for(let y=0;y<=i;++y){const b=y/i*s*Math.PI*2;_(b,s,a,e,h),_(b+.01,s,a,e,p),g.subVectors(p,h),v.addVectors(p,h),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let x=0;x<=r;++x){const w=x/r*Math.PI*2,A=-t*Math.cos(w),T=t*Math.sin(w);d.x=h.x+(A*v.x+T*m.x),d.y=h.y+(A*v.y+T*m.y),d.z=h.z+(A*v.z+T*m.z),l.push(d.x,d.y,d.z),f.subVectors(d,h).normalize(),u.push(f.x,f.y,f.z),c.push(y/i),c.push(x/r)}}for(let y=1;y<=i;y++)for(let b=1;b<=r;b++){const x=(r+1)*(y-1)+(b-1),w=(r+1)*y+(b-1),A=(r+1)*y+b,T=(r+1)*(y-1)+b;o.push(x,w,T),o.push(w,A,T)}this.setIndex(o),this.setAttribute("position",new Gn(l,3)),this.setAttribute("normal",new Gn(u,3)),this.setAttribute("uv",new Gn(c,2));function _(y,b,x,w,A){const T=Math.cos(y),C=Math.sin(y),E=x/b*y,I=Math.cos(E);A.x=w*(2+I)*.5*T,A.y=w*(2+I)*C*.5,A.z=w*Math.sin(E)*.5}}static fromJSON(e){return new iI(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class rI extends cr{constructor(e=new Ofe(new st(-1,-1,0),new st(-1,1,0),new st(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new st,l=new st,u=new on;let c=new st;const d=[],f=[],h=[],p=[];m(),this.setIndex(p),this.setAttribute("position",new Gn(d,3)),this.setAttribute("normal",new Gn(f,3)),this.setAttribute("uv",new Gn(h,2));function m(){for(let y=0;y<t;y++)g(y);g(s===!1?t:0),_(),v()}function g(y){c=e.getPointAt(y/t,c);const b=a.normals[y],x=a.binormals[y];for(let w=0;w<=r;w++){const A=w/r*Math.PI*2,T=Math.sin(A),C=-Math.cos(A);l.x=C*b.x+T*x.x,l.y=C*b.y+T*x.y,l.z=C*b.z+T*x.z,l.normalize(),f.push(l.x,l.y,l.z),o.x=c.x+i*l.x,o.y=c.y+i*l.y,o.z=c.z+i*l.z,d.push(o.x,o.y,o.z)}}function v(){for(let y=1;y<=t;y++)for(let b=1;b<=r;b++){const x=(r+1)*(y-1)+(b-1),w=(r+1)*y+(b-1),A=(r+1)*y+b,T=(r+1)*(y-1)+b;p.push(x,w,T),p.push(w,A,T)}}function _(){for(let y=0;y<=t;y++)for(let b=0;b<=r;b++)u.x=y/t,u.y=b/r,h.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new rI(new zU[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class vht extends cr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new st,s=new st;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const d=l[u],f=d.start,h=d.count;for(let p=f,m=f+h;p<m;p+=3)for(let g=0;g<3;g++){const v=o.getX(p+g),_=o.getX(p+(g+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,_),FY(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,d=3*o+(u+1)%3;r.fromBufferAttribute(a,c),s.fromBufferAttribute(a,d),FY(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Gn(t,3))}}}function FY(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var UY=Object.freeze({__proto__:null,BoxGeometry:Hw,BoxBufferGeometry:Hw,CapsuleGeometry:j4,CapsuleBufferGeometry:j4,CircleGeometry:K4,CircleBufferGeometry:K4,ConeGeometry:kY,ConeBufferGeometry:kY,CylinderGeometry:nN,CylinderBufferGeometry:nN,DodecahedronGeometry:X4,DodecahedronBufferGeometry:X4,EdgesGeometry:Yft,ExtrudeGeometry:Y4,ExtrudeBufferGeometry:Y4,IcosahedronGeometry:Q4,IcosahedronBufferGeometry:Q4,LatheGeometry:$w,LatheBufferGeometry:$w,OctahedronGeometry:Z4,OctahedronBufferGeometry:Z4,PlaneGeometry:ZO,PlaneBufferGeometry:ZO,PolyhedronGeometry:m0,PolyhedronBufferGeometry:m0,RingGeometry:J4,RingBufferGeometry:J4,ShapeGeometry:eI,ShapeBufferGeometry:eI,SphereGeometry:BY,SphereBufferGeometry:BY,TetrahedronGeometry:tI,TetrahedronBufferGeometry:tI,TorusGeometry:nI,TorusBufferGeometry:nI,TorusKnotGeometry:iI,TorusKnotBufferGeometry:iI,TubeGeometry:rI,TubeBufferGeometry:rI,WireframeGeometry:vht});class yht extends ia{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Fn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _ht extends fh{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Nb extends ia{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new on(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class M0 extends Nb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new on(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return fa(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new Fn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Jf extends ia{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Fn(16777215),this.specular=new Fn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new on(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bht extends ia{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new on(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Sht extends ia{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new on(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class VU extends ia{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Fn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eR,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class xht extends ia{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ov,this.normalScale=new on(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class wht extends Wc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ip(n,e,t){return $fe(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function RE(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function $fe(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Tht(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function zY(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function Gfe(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}class HT{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Cht extends HT{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:y1,endingEnd:y1}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case _1:s=e,o=2*t-i;break;case W4:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case _1:a=e,l=2*i-t;break;case W4:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const u=(i-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,h=this._weightNext,p=(i-t)/(r-t),m=p*p,g=m*p,v=-f*g+2*f*m-f*p,_=(1+f)*g+(-1.5-2*f)*m+(-.5+f)*p+1,y=(-1-h)*g+(1.5+h)*m+.5*p,b=h*g-h*m;for(let x=0;x!==o;++x)s[x]=v*a[c+x]+_*a[u+x]+y*a[l+x]+b*a[d+x];return s}}class Wfe extends HT{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(i-t)/(r-t),d=1-c;for(let f=0;f!==o;++f)s[f]=a[u+f]*d+a[l+f]*c;return s}}class Aht extends HT{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class lf{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=RE(t,this.TimeBufferType),this.values=RE(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:RE(e.times,Array),values:RE(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Aht(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Wfe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Cht(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Fw:t=this.InterpolantFactoryMethodDiscrete;break;case z_:t=this.InterpolantFactoryMethodLinear;break;case dk:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fw;case this.InterpolantFactoryMethodLinear:return z_;case this.InterpolantFactoryMethodSmooth:return dk}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=ip(i,s,a),this.values=ip(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&$fe(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=ip(this.times),t=ip(this.values),i=this.getValueSize(),r=this.getInterpolation()===dk,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(r)l=!0;else{const d=o*i,f=d-i,h=d+i;for(let p=0;p!==i;++p){const m=t[d+p];if(m!==t[f+p]||m!==t[h+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const d=o*i,f=a*i;for(let h=0;h!==i;++h)t[f+h]=t[d+h]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,u=0;u!==i;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=ip(e,0,a),this.values=ip(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=ip(this.times,0),t=ip(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}lf.prototype.TimeBufferType=Float32Array;lf.prototype.ValueBufferType=Float32Array;lf.prototype.DefaultInterpolation=z_;class Bb extends lf{}Bb.prototype.ValueTypeName="bool";Bb.prototype.ValueBufferType=Array;Bb.prototype.DefaultInterpolation=Fw;Bb.prototype.InterpolantFactoryMethodLinear=void 0;Bb.prototype.InterpolantFactoryMethodSmooth=void 0;class qfe extends lf{}qfe.prototype.ValueTypeName="color";class $_ extends lf{}$_.prototype.ValueTypeName="number";class Eht extends HT{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let u=e*o;for(let c=u+o;u!==c;u+=4)Xa.slerpFlat(s,0,a,u-o,a,u,l);return s}}class hh extends lf{InterpolantFactoryMethodLinear(e){return new Eht(this.times,this.values,this.getValueSize(),e)}}hh.prototype.ValueTypeName="quaternion";hh.prototype.DefaultInterpolation=z_;hh.prototype.InterpolantFactoryMethodSmooth=void 0;class Fb extends lf{}Fb.prototype.ValueTypeName="string";Fb.prototype.ValueBufferType=Array;Fb.prototype.DefaultInterpolation=Fw;Fb.prototype.InterpolantFactoryMethodLinear=void 0;Fb.prototype.InterpolantFactoryMethodSmooth=void 0;class v0 extends lf{}v0.prototype.ValueTypeName="vector";class Qg{constructor(e,t=-1,i,r=CU){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Qu(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(Iht(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(lf.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const c=Tht(l);l=zY(l,1,c),u=zY(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new $_(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(s);if(c&&c.length>1){const d=c[1];let f=r[d];f||(r[d]=f=[]),f.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,h,p,m){if(h.length!==0){const g=[],v=[];Gfe(h,g,v,p),g.length!==0&&m.push(new d(f,g,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let d=0;d<u.length;d++){const f=u[d].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let p;for(p=0;p<f.length;p++)if(f[p].morphTargets)for(let m=0;m<f[p].morphTargets.length;m++)h[f[p].morphTargets[m]]=-1;for(const m in h){const g=[],v=[];for(let _=0;_!==f[p].morphTargets.length;++_){const y=f[p];g.push(y.time),v.push(y.morphTarget===m?1:0)}r.push(new $_(".morphTargetInfluence["+m+"]",g,v))}l=h.length*a}else{const h=".bones["+t[d].name+"]";i(v0,h+".position",f,"pos",r),i(hh,h+".quaternion",f,"rot",r),i(v0,h+".scale",f,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Mht(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $_;case"vector":case"vector2":case"vector3":case"vector4":return v0;case"color":return qfe;case"quaternion":return hh;case"bool":case"boolean":return Bb;case"string":return Fb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Iht(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Mht(n.type);if(n.times===void 0){const t=[],i=[];Gfe(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const G_={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class jfe{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=u.length;d<f;d+=2){const h=u[d],p=u[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const Kfe=new jfe;class io{constructor(e){this.manager=e!==void 0?e:Kfe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const xf={};class Dht extends Error{constructor(e,t){super(e),this.response=t}}class Io extends io{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=G_.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(xf[e]!==void 0){xf[e].push({onLoad:t,onProgress:i,onError:r});return}xf[e]=[],xf[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=xf[e],d=u.body.getReader(),f=u.headers.get("Content-Length"),h=f?parseInt(f):0,p=h!==0;let m=0;const g=new ReadableStream({start(v){_();function _(){d.read().then(({done:y,value:b})=>{if(y)v.close();else{m+=b.byteLength;const x=new ProgressEvent("progress",{lengthComputable:p,loaded:m,total:h});for(let w=0,A=c.length;w<A;w++){const T=c[w];T.onProgress&&T.onProgress(x)}v.enqueue(b),_()}})}}});return new Response(g)}else throw new Dht(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o===void 0)return u.text();{const d=/charset="?([^;"\s]*)"?/i.exec(o),f=d&&d[1]?d[1].toLowerCase():void 0,h=new TextDecoder(f);return u.arrayBuffer().then(p=>h.decode(p))}}}).then(u=>{G_.add(e,u);const c=xf[e];delete xf[e];for(let d=0,f=c.length;d<f;d++){const h=c[d];h.onLoad&&h.onLoad(u)}}).catch(u=>{const c=xf[e];if(c===void 0)throw this.manager.itemError(e),u;delete xf[e];for(let d=0,f=c.length;d<f;d++){const h=c[d];h.onError&&h.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Rht extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new Bft,l=new Io(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(d){l.load(e[d],function(f){const h=s.parse(f,!0);a[d]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},u+=1,u===6&&(h.mipmapCount===1&&(o.minFilter=ta),o.image=a,o.format=h.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let d=0,f=e.length;d<f;++d)c(d);else l.load(e,function(d){const f=s.parse(d,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let p=0;p<h;p++){a[p]={mipmaps:[]};for(let m=0;m<f.mipmapCount;m++)a[p].mipmaps.push(f.mipmaps[p*f.mipmapCount+m]),a[p].format=f.format,a[p].width=f.width,a[p].height=f.height}o.image=a}else o.image.width=f.width,o.image.height=f.height,o.mipmaps=f.mipmaps;f.mipmapCount===1&&(o.minFilter=ta),o.format=f.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class sN extends io{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=G_.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=zw("img");function l(){c(),G_.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(d){c(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class Pht extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new S2,o=new Io(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:ma,a.wrapT=u.wrapT!==void 0?u.wrapT:ma,a.magFilter=u.magFilter!==void 0?u.magFilter:ta,a.minFilter=u.minFilter!==void 0?u.minFilter:ta,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Mh),u.mipmapCount===1&&(a.minFilter=ta),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u))},i,r),a}}class W_ extends io{constructor(e){super(e)}load(e,t,i,r){const s=new eo,a=new sN(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class cv extends ys{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Fn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class Xfe extends cv{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ys.DefaultUp),this.updateMatrix(),this.groundColor=new Fn(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const HY=new ri,VY=new st,$Y=new st;class $U{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new on(512,512),this.map=null,this.mapPass=null,this.matrix=new ri,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new DU,this._frameExtents=new on(1,1),this._viewportCount=1,this._viewports=[new Rr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;VY.setFromMatrixPosition(e.matrixWorld),t.position.copy(VY),$Y.setFromMatrixPosition(e.target.matrixWorld),t.lookAt($Y),t.updateMatrixWorld(),HY.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HY),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(t.projectionMatrix),i.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kht extends $U{constructor(){super(new ha(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Uw*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sR extends cv{constructor(e,t,i=0,r=Math.PI/3,s=0,a=1){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ys.DefaultUp),this.updateMatrix(),this.target=new ys,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.shadow=new kht}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const GY=new ri,hx=new st,Wk=new st;class Lht extends $U{constructor(){super(new ha(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new on(4,2),this._viewportCount=6,this._viewports=[new Rr(2,1,1,1),new Rr(0,1,1,1),new Rr(3,1,1,1),new Rr(1,1,1,1),new Rr(3,0,1,1),new Rr(1,0,1,1)],this._cubeDirections=[new st(1,0,0),new st(-1,0,0),new st(0,0,1),new st(0,0,-1),new st(0,1,0),new st(0,-1,0)],this._cubeUps=[new st(0,1,0),new st(0,1,0),new st(0,1,0),new st(0,1,0),new st(0,0,1),new st(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),hx.setFromMatrixPosition(e.matrixWorld),i.position.copy(hx),Wk.copy(i.position),Wk.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Wk),i.updateMatrixWorld(),r.makeTranslation(-hx.x,-hx.y,-hx.z),GY.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GY)}}class Zg extends cv{constructor(e,t,i=0,r=1){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Lht}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Oht extends $U{constructor(){super(new Pb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class VT extends cv{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ys.DefaultUp),this.updateMatrix(),this.target=new ys,this.shadow=new Oht}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class aR extends cv{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Nht extends cv{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Bht{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new st)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Fht extends cv{constructor(e=new Bht,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class GU extends io{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new Io(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=GU.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Fn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Fn().setHex(a.value);break;case"v2":r.uniforms[s].value=new on().fromArray(a.value);break;case"v3":r.uniforms[s].value=new st().fromArray(a.value);break;case"v4":r.uniforms[s].value=new Rr().fromArray(a.value);break;case"m3":r.uniforms[s].value=new qu().fromArray(a.value);break;case"m4":r.uniforms[s].value=new ri().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.shading!==void 0&&(r.flatShading=e.shading===1),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new on().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new on().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:yht,SpriteMaterial:NU,RawShaderMaterial:_ht,ShaderMaterial:fh,PointsMaterial:ug,MeshPhysicalMaterial:M0,MeshStandardMaterial:Nb,MeshPhongMaterial:Jf,MeshToonMaterial:bht,MeshNormalMaterial:Sht,MeshLambertMaterial:VU,MeshDepthMaterial:Mfe,MeshDistanceMaterial:Ife,MeshBasicMaterial:Fc,MeshMatcapMaterial:xht,LineDashedMaterial:wht,LineBasicMaterial:Wc,Material:ia};return new t[e]}}class Mo{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}let Uht=class extends cr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return new this.constructor().copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}};class zht extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Io(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(h,p){if(t[p]!==void 0)return t[p];const g=h.interleavedBuffers[p],v=s(h,g.buffer),_=b1(g.type,v),y=new OU(_,g.stride);return y.uuid=g.uuid,t[p]=y,y}function s(h,p){if(i[p]!==void 0)return i[p];const g=h.arrayBuffers[p],v=new Uint32Array(g).buffer;return i[p]=v,v}const a=e.isInstancedBufferGeometry?new Uht:new cr,o=e.data.index;if(o!==void 0){const h=b1(o.type,o.array);a.setIndex(new Ps(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let m;if(p.isInterleavedBufferAttribute){const g=r(e.data,p.data);m=new Xg(g,p.itemSize,p.offset,p.normalized)}else{const g=b1(p.type,p.array),v=p.isInstancedBufferAttribute?Vw:Ps;m=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),a.setAttribute(h,m)}const u=e.data.morphAttributes;if(u)for(const h in u){const p=u[h],m=[];for(let g=0,v=p.length;g<v;g++){const _=p[g];let y;if(_.isInterleavedBufferAttribute){const b=r(e.data,_.data);y=new Xg(b,_.itemSize,_.offset,_.normalized)}else{const b=b1(_.type,_.array);y=new Ps(b,_.itemSize,_.normalized)}_.name!==void 0&&(y.name=_.name),m.push(y)}a.morphAttributes[h]=m}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const d=e.data.groups||e.data.drawcalls||e.data.offsets;if(d!==void 0)for(let h=0,p=d.length;h!==p;++h){const m=d[h];a.addGroup(m.start,m.count,m.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new st;f.center!==void 0&&h.fromArray(f.center),a.boundingSphere=new uv(h,f.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class Hht extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Mo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new Io(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(d){r!==void 0&&r(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Mo.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Io(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let d=!1;for(const f in a)if(a[f].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new HU().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new Lb().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new zht;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:l.type in UY?o=UY[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new GU;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];if(l.type==="MultiMaterial"){const u=[];for(let c=0;c<l.materials.length;c++){const d=l.materials[c];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),u.push(i[d.uuid])}r[l.uuid]=u}else i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Qg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return a(c)}else return l.data?{data:b1(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new jfe(t);s=new sN(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const d=e[u],f=d.url;if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const g=f[p],v=o(g);v!==null&&(v instanceof HTMLImageElement?h.push(v):h.push(new S2(v.data,v.width,v.height)))}r[d.uuid]=new S1(h)}else{const h=o(d.url);r[d.uuid]=new S1(h)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:b1(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new sN(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d],p=await s(h);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new S2(p.data,p.width,p.height)))}i[l.uuid]=new S1(c)}else{const c=await s(l.url);i[l.uuid]=new S1(c)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new IU,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new S2:c=new eo,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=i(o.mapping,Vht)),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=i(o.wrap[0],WY),c.wrapT=i(o.wrap[1],WY)),o.format!==void 0&&(c.format=o.format),o.type!==void 0&&(c.type=o.type),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=i(o.minFilter,qY)),o.magFilter!==void 0&&(c.magFilter=i(o.magFilter,qY)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(e,t,i,r,s){let a;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const h=[];for(let p=0,m=f.length;p<m;p++){const g=f[p];i[g]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",g),h.push(i[g])}return h}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function u(f){return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),r[f]}let c,d;switch(e.type){case"Scene":a=new LU,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Fn(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new kU(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new PU(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new ha(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Pb(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new aR(e.color,e.intensity);break;case"DirectionalLight":a=new VT(e.color,e.intensity);break;case"PointLight":a=new Zg(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Nht(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new sR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Xfe(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Fht().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),d=l(e.material),a=new iR(c,d),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),d=l(e.material),a=new ga(c,d);break;case"InstancedMesh":c=o(e.geometry),d=l(e.material);const f=e.count,h=e.instanceMatrix,p=e.instanceColor;a=new Nft(c,d,f),a.instanceMatrix=new Vw(new Float32Array(h.array),16),p!==void 0&&(a.instanceColor=new Vw(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new kft;break;case"Line":a=new Ob(o(e.geometry),l(e.material));break;case"LineLoop":a=new Pfe(o(e.geometry),l(e.material));break;case"LineSegments":a=new Yg(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new x2(o(e.geometry),l(e.material));break;case"Sprite":a=new i3(l(e.material));break;case"Group":a=new xl;break;case"Bone":a=new V_;break;default:a=new ys}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let h=0;h<f.length;h++)a.add(this.parseObject(f[h],t,i,r,s))}if(e.animations!==void 0){const f=e.animations;for(let h=0;h<f.length;h++){const p=f[h];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const f=e.levels;for(let h=0;h<f.length;h++){const p=f[h],m=a.getObjectByProperty("uuid",p.object);m!==void 0&&a.addLevel(m,p.distance)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const Vht={UVMapping:wU,CubeReflectionMapping:Wg,CubeRefractionMapping:qg,EquirectangularReflectionMapping:Ow,EquirectangularRefractionMapping:V4,CubeUVReflectionMapping:zT},WY={RepeatWrapping:Sl,ClampToEdgeWrapping:ma,MirroredRepeatWrapping:Nw},qY={NearestFilter:Ia,NearestMipmapNearestFilter:$4,NearestMipmapLinearFilter:G4,LinearFilter:ta,LinearMipmapNearestFilter:TU,LinearMipmapLinearFilter:Mh};class $ht extends io{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=G_.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){G_.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class Ght{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jY(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jY();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jY(){return(typeof performance>"u"?Date:performance).now()}class Wht{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Xa.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Xa.multiplyQuaternionsFlat(e,a,e,t,e,i),Xa.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const WU="\\[\\]\\.:\\/",qht=new RegExp("["+WU+"]","g"),qU="[^"+WU+"]",jht="[^"+WU.replace("\\.","")+"]",Kht=/((?:WC+[\/:])*)/.source.replace("WC",qU),Xht=/(WCOD+)?/.source.replace("WCOD",jht),Yht=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qU),Qht=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qU),Zht=new RegExp("^"+Kht+Xht+Yht+Qht+"$"),Jht=["material","materials","bones"];class ept{constructor(e,t,i){const r=i||vr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class vr{constructor(e,t,i){this.path=t,this.parsedPath=i||vr.parseTrackName(t),this.node=vr.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new vr.Composite(e,t,i):new vr(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(qht,"")}static parseTrackName(e){const t=Zht.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Jht.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=vr.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vr.Composite=ept;vr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vr.prototype.GetterByBindingType=[vr.prototype._getValue_direct,vr.prototype._getValue_array,vr.prototype._getValue_arrayElement,vr.prototype._getValue_toArray];vr.prototype.SetterByBindingTypeAndVersioning=[[vr.prototype._setValue_direct,vr.prototype._setValue_direct_setNeedsUpdate,vr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_array,vr.prototype._setValue_array_setNeedsUpdate,vr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_arrayElement,vr.prototype._setValue_arrayElement_setNeedsUpdate,vr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_fromArray,vr.prototype._setValue_fromArray_setNeedsUpdate,vr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tpt{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:y1,endingEnd:y1};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=pot,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case got:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case CU:default:for(let c=0,d=l.length;c!==d;++c)l[c].evaluate(a),u[c].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===mot;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===hot){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=_1,r.endingEnd=_1):(e?r.endingStart=this.zeroSlopeAtStart?_1:y1:r.endingStart=W4,t?r.endingEnd=this.zeroSlopeAtEnd?_1:y1:r.endingEnd=W4)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const npt=new Float32Array(1);class qk extends E0{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let d=0;d!==s;++d){const f=r[d],h=f.name;let p=c[h];if(p!==void 0)++p.referenceCount,a[d]=p;else{if(p=a[d],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,h));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;p=new Wht(vr.create(i,h,m),f.ValueTypeName,f.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,h),a[d]=p}o[d].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const d=o.actionByRoot,f=(e._localRoot||this._root).uuid;delete d[f],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Wfe(new Float32Array(2),new Float32Array(2),1,npt),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?Qg.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(a!==null?i=a.blendMode:i=CU),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new tpt(this,a,t,i);return this._bindAction(c,u),this._addInactiveAction(c,o,s),c}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Qg.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const c=u._cacheIndex,d=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,d._cacheIndex=c,t[c]=d,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}let ipt=class{constructor(e,t,i=0,r=1/0){this.ray=new tR(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new EU,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return aN(e,this,i,t),i.sort(KY),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)aN(e[r],this,i,t);return i.sort(KY),i}};function KY(n,e){return n.distance-e.distance}function aN(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)aN(r[s],e,t,!0)}}let XY=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(fa(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};class rpt extends Yg{constructor(e=10,t=10,i=4473924,r=8947848){i=new Fn(i),r=new Fn(r);const s=t/2,a=e/t,o=e/2,l=[],u=[];for(let f=0,h=0,p=-o;f<=t;f++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const m=f===s?i:r;m.toArray(u,h),h+=3,m.toArray(u,h),h+=3,m.toArray(u,h),h+=3,m.toArray(u,h),h+=3}const c=new cr;c.setAttribute("position",new Gn(l,3)),c.setAttribute("color",new Gn(u,3));const d=new Wc({vertexColors:!0,toneMapped:!1});super(c,d),this.type="GridHelper"}}class spt extends Yg{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new cr;r.setAttribute("position",new Gn(t,3)),r.setAttribute("color",new Gn(i,3));const s=new Wc({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Fn,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xU}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xU);const YY={type:"change"},jk={type:"start"},QY={type:"end"};let apt=class extends E0{constructor(e,t){super(),t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new st,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:oy.ROTATE,MIDDLE:oy.DOLLY,RIGHT:oy.PAN},this.touches={ONE:ly.ROTATE,TWO:ly.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Re){Re.addEventListener("keydown",be),this._domElementKeyEvents=Re},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(YY),i.update(),s=r.NONE},this.update=function(){const Re=new st,wt=new Xa().setFromUnitVectors(e.up,new st(0,1,0)),vt=wt.clone().invert(),q=new st,xe=new Xa,ve=2*Math.PI;return function(){const we=i.object.position;Re.copy(we).sub(i.target),Re.applyQuaternion(wt),o.setFromVector3(Re),i.autoRotate&&s===r.NONE&&C(A()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let De=i.minAzimuthAngle,xt=i.maxAzimuthAngle;return isFinite(De)&&isFinite(xt)&&(De<-Math.PI?De+=ve:De>Math.PI&&(De-=ve),xt<-Math.PI?xt+=ve:xt>Math.PI&&(xt-=ve),De<=xt?o.theta=Math.max(De,Math.min(xt,o.theta)):o.theta=o.theta>(De+xt)/2?Math.max(De,o.theta):Math.min(xt,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),o.radius*=u,o.radius=Math.max(i.minDistance,Math.min(i.maxDistance,o.radius)),i.enableDamping===!0?i.target.addScaledVector(c,i.dampingFactor):i.target.add(c),Re.setFromSpherical(o),Re.applyQuaternion(vt),we.copy(i.target).add(Re),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,c.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),c.set(0,0,0)),u=1,d||q.distanceToSquared(i.object.position)>a||8*(1-xe.dot(i.object.quaternion))>a?(i.dispatchEvent(YY),q.copy(i.object.position),xe.copy(i.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Se),i.domElement.removeEventListener("pointerdown",ce),i.domElement.removeEventListener("pointercancel",nt),i.domElement.removeEventListener("wheel",it),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",Fe),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",be)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new XY,l=new XY;let u=1;const c=new st;let d=!1;const f=new on,h=new on,p=new on,m=new on,g=new on,v=new on,_=new on,y=new on,b=new on,x=[],w={};function A(){return 2*Math.PI/60/60*i.autoRotateSpeed}function T(){return Math.pow(.95,i.zoomSpeed)}function C(Re){l.theta-=Re}function E(Re){l.phi-=Re}const I=function(){const Re=new st;return function(vt,q){Re.setFromMatrixColumn(q,0),Re.multiplyScalar(-vt),c.add(Re)}}(),k=function(){const Re=new st;return function(vt,q){i.screenSpacePanning===!0?Re.setFromMatrixColumn(q,1):(Re.setFromMatrixColumn(q,0),Re.crossVectors(i.object.up,Re)),Re.multiplyScalar(vt),c.add(Re)}}(),O=function(){const Re=new st;return function(vt,q){const xe=i.domElement;if(i.object.isPerspectiveCamera){const ve=i.object.position;Re.copy(ve).sub(i.target);let ke=Re.length();ke*=Math.tan(i.object.fov/2*Math.PI/180),I(2*vt*ke/xe.clientHeight,i.object.matrix),k(2*q*ke/xe.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(I(vt*(i.object.right-i.object.left)/i.object.zoom/xe.clientWidth,i.object.matrix),k(q*(i.object.top-i.object.bottom)/i.object.zoom/xe.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function U(Re){i.object.isPerspectiveCamera?u/=Re:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*Re)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(Re){i.object.isPerspectiveCamera?u*=Re:i.object.isOrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/Re)),i.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function L(Re){f.set(Re.clientX,Re.clientY)}function G(Re){_.set(Re.clientX,Re.clientY)}function H(Re){m.set(Re.clientX,Re.clientY)}function F(Re){h.set(Re.clientX,Re.clientY),p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const wt=i.domElement;C(2*Math.PI*p.x/wt.clientHeight),E(2*Math.PI*p.y/wt.clientHeight),f.copy(h),i.update()}function X(Re){y.set(Re.clientX,Re.clientY),b.subVectors(y,_),b.y>0?U(T()):b.y<0&&z(T()),_.copy(y),i.update()}function te(Re){g.set(Re.clientX,Re.clientY),v.subVectors(g,m).multiplyScalar(i.panSpeed),O(v.x,v.y),m.copy(g),i.update()}function re(Re){Re.deltaY<0?z(T()):Re.deltaY>0&&U(T()),i.update()}function ie(Re){let wt=!1;switch(Re.code){case i.keys.UP:O(0,i.keyPanSpeed),wt=!0;break;case i.keys.BOTTOM:O(0,-i.keyPanSpeed),wt=!0;break;case i.keys.LEFT:O(i.keyPanSpeed,0),wt=!0;break;case i.keys.RIGHT:O(-i.keyPanSpeed,0),wt=!0;break}wt&&(Re.preventDefault(),i.update())}function le(){if(x.length===1)f.set(x[0].pageX,x[0].pageY);else{const Re=.5*(x[0].pageX+x[1].pageX),wt=.5*(x[0].pageY+x[1].pageY);f.set(Re,wt)}}function ge(){if(x.length===1)m.set(x[0].pageX,x[0].pageY);else{const Re=.5*(x[0].pageX+x[1].pageX),wt=.5*(x[0].pageY+x[1].pageY);m.set(Re,wt)}}function pe(){const Re=x[0].pageX-x[1].pageX,wt=x[0].pageY-x[1].pageY,vt=Math.sqrt(Re*Re+wt*wt);_.set(0,vt)}function ye(){i.enableZoom&&pe(),i.enablePan&&ge()}function Oe(){i.enableZoom&&pe(),i.enableRotate&&le()}function Be(Re){if(x.length==1)h.set(Re.pageX,Re.pageY);else{const vt=At(Re),q=.5*(Re.pageX+vt.x),xe=.5*(Re.pageY+vt.y);h.set(q,xe)}p.subVectors(h,f).multiplyScalar(i.rotateSpeed);const wt=i.domElement;C(2*Math.PI*p.x/wt.clientHeight),E(2*Math.PI*p.y/wt.clientHeight),f.copy(h)}function Ye(Re){if(x.length===1)g.set(Re.pageX,Re.pageY);else{const wt=At(Re),vt=.5*(Re.pageX+wt.x),q=.5*(Re.pageY+wt.y);g.set(vt,q)}v.subVectors(g,m).multiplyScalar(i.panSpeed),O(v.x,v.y),m.copy(g)}function Ze(Re){const wt=At(Re),vt=Re.pageX-wt.x,q=Re.pageY-wt.y,xe=Math.sqrt(vt*vt+q*q);y.set(0,xe),b.set(0,Math.pow(y.y/_.y,i.zoomSpeed)),U(b.y),_.copy(y)}function Q(Re){i.enableZoom&&Ze(Re),i.enablePan&&Ye(Re)}function me(Re){i.enableZoom&&Ze(Re),i.enableRotate&&Be(Re)}function ce(Re){i.enabled!==!1&&(x.length===0&&(i.domElement.setPointerCapture(Re.pointerId),i.domElement.addEventListener("pointermove",je),i.domElement.addEventListener("pointerup",Fe)),ze(Re),Re.pointerType==="touch"?K(Re):We(Re))}function je(Re){i.enabled!==!1&&(Re.pointerType==="touch"?ne(Re):Ke(Re))}function Fe(Re){Je(Re),x.length===0&&(i.domElement.releasePointerCapture(Re.pointerId),i.domElement.removeEventListener("pointermove",je),i.domElement.removeEventListener("pointerup",Fe)),i.dispatchEvent(QY),s=r.NONE}function nt(Re){Je(Re)}function We(Re){let wt;switch(Re.button){case 0:wt=i.mouseButtons.LEFT;break;case 1:wt=i.mouseButtons.MIDDLE;break;case 2:wt=i.mouseButtons.RIGHT;break;default:wt=-1}switch(wt){case oy.DOLLY:if(i.enableZoom===!1)return;G(Re),s=r.DOLLY;break;case oy.ROTATE:if(Re.ctrlKey||Re.metaKey||Re.shiftKey){if(i.enablePan===!1)return;H(Re),s=r.PAN}else{if(i.enableRotate===!1)return;L(Re),s=r.ROTATE}break;case oy.PAN:if(Re.ctrlKey||Re.metaKey||Re.shiftKey){if(i.enableRotate===!1)return;L(Re),s=r.ROTATE}else{if(i.enablePan===!1)return;H(Re),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(jk)}function Ke(Re){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;F(Re);break;case r.DOLLY:if(i.enableZoom===!1)return;X(Re);break;case r.PAN:if(i.enablePan===!1)return;te(Re);break}}function it(Re){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(Re.preventDefault(),i.dispatchEvent(jk),re(Re),i.dispatchEvent(QY))}function be(Re){i.enabled===!1||i.enablePan===!1||ie(Re)}function K(Re){switch(Tt(Re),x.length){case 1:switch(i.touches.ONE){case ly.ROTATE:if(i.enableRotate===!1)return;le(),s=r.TOUCH_ROTATE;break;case ly.PAN:if(i.enablePan===!1)return;ge(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case ly.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ye(),s=r.TOUCH_DOLLY_PAN;break;case ly.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Oe(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(jk)}function ne(Re){switch(Tt(Re),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;Be(Re),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;Ye(Re),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Q(Re),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(Re),i.update();break;default:s=r.NONE}}function Se(Re){i.enabled!==!1&&Re.preventDefault()}function ze(Re){x.push(Re)}function Je(Re){delete w[Re.pointerId];for(let wt=0;wt<x.length;wt++)if(x[wt].pointerId==Re.pointerId){x.splice(wt,1);return}}function Tt(Re){let wt=w[Re.pointerId];wt===void 0&&(wt=new on,w[Re.pointerId]=wt),wt.set(Re.pageX,Re.pageY)}function At(Re){const wt=Re.pointerId===x[0].pointerId?x[1]:x[0];return w[wt.pointerId]}i.domElement.addEventListener("contextmenu",Se),i.domElement.addEventListener("pointerdown",ce),i.domElement.addEventListener("pointercancel",nt),i.domElement.addEventListener("wheel",it,{passive:!1}),this.update()}};var C2=function(){var n=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(c){c.preventDefault(),i(++n%e.children.length)},!1);function t(c){return e.appendChild(c.dom),c}function i(c){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===c?"block":"none";n=c}var r=(performance||Date).now(),s=r,a=0,o=t(new C2.Panel("FPS","#0ff","#002")),l=t(new C2.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new C2.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){r=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();if(l.update(c-r,200),c>=s+1e3&&(o.update(a*1e3/(c-s),100),s=c,a=0,u)){var d=performance.memory;u.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){r=this.end()},domElement:e,setMode:i}};C2.Panel=function(n,e,t){var i=1/0,r=0,s=Math.round,a=s(window.devicePixelRatio||1),o=80*a,l=48*a,u=3*a,c=2*a,d=3*a,f=15*a,h=74*a,p=30*a,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,o,l),g.fillStyle=e,g.fillText(n,u,c),g.fillRect(d,f,h,p),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d,f,h,p),{dom:m,update:function(v,_){i=Math.min(i,v),r=Math.max(r,v),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,o,f),g.fillStyle=e,g.fillText(s(v)+" "+n+" ("+s(i)+"-"+s(r)+")",u,c),g.drawImage(m,d+a,f,h-a,p,d,f,h-a,p),g.fillRect(d+h-a,f,a,p),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d+h-a,f,a,s((1-v/_)*p))}}};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var ZY={},oN=function(n){return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Yfe=function(n){return new Worker(n)};try{URL.revokeObjectURL(oN(""))}catch{oN=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},Yfe=function(e){return new Worker(e,{type:"module"})}}var opt=function(n,e,t,i,r){var s=Yfe(ZY[e]||(ZY[e]=oN(n)));return s.onerror=function(a){return r(a.error,null)},s.onmessage=function(a){return r(null,a.data)},s.postMessage(t,i),s},pr=Uint8Array,ka=Uint16Array,ph=Uint32Array,Ub=new pr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zb=new pr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),jw=new pr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qfe=function(n,e){for(var t=new ka(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new ph(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)r[s]=s-t[i]<<5|i;return[t,r]},Zfe=Qfe(Ub,2),jU=Zfe[0],sI=Zfe[1];jU[28]=258,sI[258]=28;var Jfe=Qfe(zb,0),ehe=Jfe[0],lN=Jfe[1],Kw=new ka(32768);for(var cs=0;cs<32768;++cs){var rp=(cs&43690)>>>1|(cs&21845)<<1;rp=(rp&52428)>>>2|(rp&13107)<<2,rp=(rp&61680)>>>4|(rp&3855)<<4,Kw[cs]=((rp&65280)>>>8|(rp&255)<<8)>>>1}var Zu=function(n,e,t){for(var i=n.length,r=0,s=new ka(e);r<i;++r)++s[n[r]-1];var a=new ka(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var o;if(t){o=new ka(1<<e);var l=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],c=e-n[r],d=a[n[r]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)o[Kw[d]>>>l]=u}else for(o=new ka(i),r=0;r<i;++r)n[r]&&(o[r]=Kw[a[n[r]-1]++]>>>15-n[r]);return o},mh=new pr(288);for(var cs=0;cs<144;++cs)mh[cs]=8;for(var cs=144;cs<256;++cs)mh[cs]=9;for(var cs=256;cs<280;++cs)mh[cs]=7;for(var cs=280;cs<288;++cs)mh[cs]=8;var q_=new pr(32);for(var cs=0;cs<32;++cs)q_[cs]=5;var the=Zu(mh,9,0),nhe=Zu(mh,9,1),ihe=Zu(q_,5,0),rhe=Zu(q_,5,1),r3=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Iu=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},s3=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},$T=function(n){return(n/8|0)+(n&7&&1)},Ju=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof ka?ka:n instanceof ph?ph:pr)(t-e);return i.set(n.subarray(e,t)),i},GT=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new pr(0);var r=!e||t,s=!t||t.i;t||(t={}),e||(e=new pr(i*3));var a=function(pe){var ye=e.length;if(pe>ye){var Oe=new pr(Math.max(ye*2,pe));Oe.set(e),e=Oe}},o=t.f||0,l=t.p||0,u=t.b||0,c=t.l,d=t.d,f=t.m,h=t.n,p=i*8;do{if(!c){t.f=o=Iu(n,l,1);var m=Iu(n,l+1,3);if(l+=3,m)if(m==1)c=nhe,d=rhe,f=9,h=5;else if(m==2){var y=Iu(n,l,31)+257,b=Iu(n,l+10,15)+4,x=y+Iu(n,l+5,31)+1;l+=14;for(var w=new pr(x),A=new pr(19),T=0;T<b;++T)A[jw[T]]=Iu(n,l+T*3,7);l+=b*3;for(var C=r3(A),E=(1<<C)-1,I=Zu(A,C,1),T=0;T<x;){var k=I[Iu(n,l,E)];l+=k&15;var g=k>>>4;if(g<16)w[T++]=g;else{var O=0,U=0;for(g==16?(U=3+Iu(n,l,3),l+=2,O=w[T-1]):g==17?(U=3+Iu(n,l,7),l+=3):g==18&&(U=11+Iu(n,l,127),l+=7);U--;)w[T++]=O}}var z=w.subarray(0,y),L=w.subarray(y);f=r3(z),h=r3(L),c=Zu(z,f,1),d=Zu(L,h,1)}else throw"invalid block type";else{var g=$T(l)+4,v=n[g-4]|n[g-3]<<8,_=g+v;if(_>i){if(s)throw"unexpected EOF";break}r&&a(u+v),e.set(n.subarray(g,_),u),t.b=u+=v,t.p=l=_*8;continue}if(l>p){if(s)throw"unexpected EOF";break}}r&&a(u+131072);for(var G=(1<<f)-1,H=(1<<h)-1,F=l;;F=l){var O=c[s3(n,l)&G],X=O>>>4;if(l+=O&15,l>p){if(s)throw"unexpected EOF";break}if(!O)throw"invalid length/literal";if(X<256)e[u++]=X;else if(X==256){F=l,c=null;break}else{var te=X-254;if(X>264){var T=X-257,re=Ub[T];te=Iu(n,l,(1<<re)-1)+jU[T],l+=re}var ie=d[s3(n,l)&H],le=ie>>>4;if(!ie)throw"invalid distance";l+=ie&15;var L=ehe[le];if(le>3){var re=zb[le];L+=s3(n,l)&(1<<re)-1,l+=re}if(l>p){if(s)throw"unexpected EOF";break}r&&a(u+131072);for(var ge=u+te;u<ge;u+=4)e[u]=e[u-L],e[u+1]=e[u+1-L],e[u+2]=e[u+2-L],e[u+3]=e[u+3-L];u=ge}}t.l=c,t.p=F,t.b=u,c&&(o=1,t.m=f,t.d=d,t.n=h)}while(!o);return u==e.length?e:Ju(e,0,u)},pd=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8},n1=function(n,e,t){t<<=e&7;var i=e/8|0;n[i]|=t,n[i+1]|=t>>>8,n[i+2]|=t>>>16},a3=function(n,e){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var r=t.length,s=t.slice();if(!r)return[qf,0];if(r==1){var a=new pr(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(x,w){return x.f-w.f}),t.push({s:-1,f:25001});var o=t[0],l=t[1],u=0,c=1,d=2;for(t[0]={s:-1,f:o.f+l.f,l:o,r:l};c!=r-1;)o=t[t[u].f<t[d].f?u++:d++],l=t[u!=c&&t[u].f<t[d].f?u++:d++],t[c++]={s:-1,f:o.f+l.f,l:o,r:l};for(var f=s[0].s,i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var h=new ka(f+1),p=aI(t[c-1],h,0);if(p>e){var i=0,m=0,g=p-e,v=1<<g;for(s.sort(function(w,A){return h[A.s]-h[w.s]||w.f-A.f});i<r;++i){var _=s[i].s;if(h[_]>e)m+=v-(1<<p-h[_]),h[_]=e;else break}for(m>>>=g;m>0;){var y=s[i].s;h[y]<e?m-=1<<e-h[y]++-1:++i}for(;i>=0&&m;--i){var b=s[i].s;h[b]==e&&(--h[b],++m)}p=e}return[new pr(h),p]},aI=function(n,e,t){return n.s==-1?Math.max(aI(n.l,e,t+1),aI(n.r,e,t+1)):e[n.s]=t},uN=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ka(++e),i=0,r=n[0],s=1,a=function(l){t[i++]=l},o=1;o<=e;++o)if(n[o]==r&&o!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(r);s=1,r=n[o]}return[t.subarray(0,i),e]},i1=function(n,e){for(var t=0,i=0;i<e.length;++i)t+=n[i]*e[i];return t},A2=function(n,e,t){var i=t.length,r=$T(e+2);n[r]=i&255,n[r+1]=i>>>8,n[r+2]=n[r]^255,n[r+3]=n[r+1]^255;for(var s=0;s<i;++s)n[r+s+4]=t[s];return(r+4+i)*8},cN=function(n,e,t,i,r,s,a,o,l,u,c){pd(e,c++,t),++r[256];for(var d=a3(r,15),f=d[0],h=d[1],p=a3(s,15),m=p[0],g=p[1],v=uN(f),_=v[0],y=v[1],b=uN(m),x=b[0],w=b[1],A=new ka(19),T=0;T<_.length;++T)A[_[T]&31]++;for(var T=0;T<x.length;++T)A[x[T]&31]++;for(var C=a3(A,7),E=C[0],I=C[1],k=19;k>4&&!E[jw[k-1]];--k);var O=u+5<<3,U=i1(r,mh)+i1(s,q_)+a,z=i1(r,f)+i1(s,m)+a+14+3*k+i1(A,E)+(2*A[16]+3*A[17]+7*A[18]);if(O<=U&&O<=z)return A2(e,c,n.subarray(l,l+u));var L,G,H,F;if(pd(e,c,1+(z<U)),c+=2,z<U){L=Zu(f,h,0),G=f,H=Zu(m,g,0),F=m;var X=Zu(E,I,0);pd(e,c,y-257),pd(e,c+5,w-1),pd(e,c+10,k-4),c+=14;for(var T=0;T<k;++T)pd(e,c+3*T,E[jw[T]]);c+=3*k;for(var te=[_,x],re=0;re<2;++re)for(var ie=te[re],T=0;T<ie.length;++T){var le=ie[T]&31;pd(e,c,X[le]),c+=E[le],le>15&&(pd(e,c,ie[T]>>>5&127),c+=ie[T]>>>12)}}else L=the,G=mh,H=ihe,F=q_;for(var T=0;T<o;++T)if(i[T]>255){var le=i[T]>>>18&31;n1(e,c,L[le+257]),c+=G[le+257],le>7&&(pd(e,c,i[T]>>>23&31),c+=Ub[le]);var ge=i[T]&31;n1(e,c,H[ge]),c+=F[ge],ge>3&&(n1(e,c,i[T]>>>5&8191),c+=zb[ge])}else n1(e,c,L[i[T]]),c+=G[i[T]];return n1(e,c,L[256]),c+G[256]},she=new ph([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qf=new pr(0),ahe=function(n,e,t,i,r,s){var a=n.length,o=new pr(i+a+5*(1+Math.ceil(a/7e3))+r),l=o.subarray(i,o.length-r),u=0;if(!e||a<8)for(var c=0;c<=a;c+=65535){var d=c+65535;d<a?u=A2(l,u,n.subarray(c,d)):(l[c]=s,u=A2(l,u,n.subarray(c,a)))}else{for(var f=she[e-1],h=f>>>13,p=f&8191,m=(1<<t)-1,g=new ka(32768),v=new ka(m+1),_=Math.ceil(t/3),y=2*_,b=function(ce){return(n[ce]^n[ce+1]<<_^n[ce+2]<<y)&m},x=new ph(25e3),w=new ka(288),A=new ka(32),T=0,C=0,c=0,E=0,I=0,k=0;c<a;++c){var O=b(c),U=c&32767,z=v[O];if(g[U]=z,v[O]=U,I<=c){var L=a-c;if((T>7e3||E>24576)&&L>423){u=cN(n,l,0,x,w,A,C,E,k,c-k,u),E=T=C=0,k=c;for(var G=0;G<286;++G)w[G]=0;for(var G=0;G<30;++G)A[G]=0}var H=2,F=0,X=p,te=U-z&32767;if(L>2&&O==b(c-te))for(var re=Math.min(h,L)-1,ie=Math.min(32767,c),le=Math.min(258,L);te<=ie&&--X&&U!=z;){if(n[c+H]==n[c+H-te]){for(var ge=0;ge<le&&n[c+ge]==n[c+ge-te];++ge);if(ge>H){if(H=ge,F=te,ge>re)break;for(var pe=Math.min(te,ge-2),ye=0,G=0;G<pe;++G){var Oe=c-te+G+32768&32767,Be=g[Oe],Ye=Oe-Be+32768&32767;Ye>ye&&(ye=Ye,z=Oe)}}}U=z,z=g[U],te+=U-z+32768&32767}if(F){x[E++]=268435456|sI[H]<<18|lN[F];var Ze=sI[H]&31,Q=lN[F]&31;C+=Ub[Ze]+zb[Q],++w[257+Ze],++A[Q],I=c+H,++T}else x[E++]=n[c],++w[n[c]]}}u=cN(n,l,s,x,w,A,C,E,k,c-k,u),!s&&u&7&&(u=A2(l,u+1,qf))}return Ju(o,0,i+$T(u)+r)},ohe=function(){for(var n=new ph(256),e=0;e<256;++e){for(var t=e,i=9;--i;)t=(t&1&&3988292384)^t>>>1;n[e]=t}return n}(),Hb=function(){var n=-1;return{p:function(e){for(var t=n,i=0;i<e.length;++i)t=ohe[t&255^e[i]]^t>>>8;n=t},d:function(){return~n}}},KU=function(){var n=1,e=0;return{p:function(t){for(var i=n,r=e,s=t.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)r+=i+=t[a];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}n=i,e=r},d:function(){return n%=65521,e%=65521,(n&255)<<24|n>>>8<<16|(e&255)<<8|e>>>8}}},dv=function(n,e,t,i,r){return ahe(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,i,!r)},WT=function(n,e){var t={};for(var i in n)t[i]=n[i];for(var i in e)t[i]=e[i];return t},JY=function(n,e,t){for(var i=n(),r=n.toString(),s=r.slice(r.indexOf("[")+1,r.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<i.length;++a){var o=i[a],l=s[a];if(typeof o=="function"){e+=";"+l+"=";var u=o.toString();if(o.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;e+=u.slice(c,u.indexOf("(",c))}else{e+=u;for(var d in o.prototype)e+=";"+l+".prototype."+d+"="+o.prototype[d].toString()}else e+=u}else t[l]=o}return[e,t]},PE=[],lpt=function(n){var e=[];for(var t in n)(n[t]instanceof pr||n[t]instanceof ka||n[t]instanceof ph)&&e.push((n[t]=new n[t].constructor(n[t])).buffer);return e},lhe=function(n,e,t,i){var r;if(!PE[t]){for(var s="",a={},o=n.length-1,l=0;l<o;++l)r=JY(n[l],s,a),s=r[0],a=r[1];PE[t]=JY(n[o],s,a)}var u=WT({},PE[t][1]);return opt(PE[t][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+e.toString()+"}",t,u,lpt(u),i)},Vb=function(){return[pr,ka,ph,Ub,zb,jw,jU,ehe,nhe,rhe,Kw,Zu,r3,Iu,s3,$T,Ju,GT,qb,I0,XU]},$b=function(){return[pr,ka,ph,Ub,zb,jw,sI,lN,the,mh,ihe,q_,Kw,she,qf,Zu,pd,n1,a3,aI,uN,i1,A2,cN,$T,Ju,ahe,dv,qT,I0]},uhe=function(){return[YU,ZU,Nr,Hb,ohe]},che=function(){return[QU,hhe]},dhe=function(){return[JU,Nr,KU]},fhe=function(){return[phe]},I0=function(n){return postMessage(n,[n.buffer])},XU=function(n){return n&&n.size&&new pr(n.size)},Gb=function(n,e,t,i,r,s){var a=lhe(t,i,r,function(o,l){a.terminate(),s(o,l)});return a.postMessage([n,e],e.consume?[n.buffer]:[]),function(){a.terminate()}},uc=function(n){return n.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(e){return n.push(e.data[0],e.data[1])}},Wb=function(n,e,t,i,r){var s,a=lhe(n,i,r,function(o,l){o?(a.terminate(),e.ondata.call(e,o)):(l[1]&&a.terminate(),e.ondata.call(e,o,l[0],l[1]))});a.postMessage(t),e.push=function(o,l){if(s)throw"stream finished";if(!e.ondata)throw"no stream handler";a.postMessage([o,s=l],[o.buffer])},e.terminate=function(){a.terminate()}},Ko=function(n,e){return n[e]|n[e+1]<<8},$s=function(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0},Kk=function(n,e){return $s(n,e)+$s(n,e+4)*4294967296},Nr=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},YU=function(n,e){var t=e.filename;if(n[0]=31,n[1]=139,n[2]=8,n[8]=e.level<2?4:e.level==9?2:0,n[9]=3,e.mtime!=0&&Nr(n,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),t){n[3]=8;for(var i=0;i<=t.length;++i)n[i+10]=t.charCodeAt(i)}},QU=function(n){if(n[0]!=31||n[1]!=139||n[2]!=8)throw"invalid gzip data";var e=n[3],t=10;e&4&&(t+=n[10]|(n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},hhe=function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},ZU=function(n){return 10+(n.filename&&n.filename.length+1||0)},JU=function(n,e){var t=e.level,i=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)},phe=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ez(n,e){return!e&&typeof n=="function"&&(e=n,n={}),this.ondata=e,n}var Zd=function(){function n(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return n.prototype.p=function(e,t){this.ondata(dv(e,this.o,0,0,!t),t)},n.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},n}(),mhe=function(){function n(e,t){Wb([$b,function(){return[uc,Zd]}],this,ez.call(this,e,t),function(i){var r=new Zd(i.data);onmessage=uc(r)},6)}return n}();function ghe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[$b],function(i){return I0(qT(i.data[0],i.data[1]))},0,t)}function qT(n,e){return dv(n,e||{},0,0)}var Ml=function(){function n(e){this.s={},this.p=new pr(0),this.ondata=e}return n.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,i=new pr(t+e.length);i.set(this.p),i.set(e,t),this.p=i},n.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,i=GT(this.p,this.o,this.s);this.ondata(Ju(i,t,this.s.b),this.d),this.o=Ju(i,this.s.b-32768),this.s.b=this.o.length,this.p=Ju(this.p,this.s.p/8|0),this.s.p&=7},n.prototype.push=function(e,t){this.e(e),this.c(t)},n}(),tz=function(){function n(e){this.ondata=e,Wb([Vb,function(){return[uc,Ml]}],this,0,function(){var t=new Ml;onmessage=uc(t)},7)}return n}();function nz(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[Vb],function(i){return I0(qb(i.data[0],XU(i.data[1])))},1,t)}function qb(n,e){return GT(n,e)}var oI=function(){function n(e,t){this.c=Hb(),this.l=0,this.v=1,Zd.call(this,e,t)}return n.prototype.push=function(e,t){Zd.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var i=dv(e,this.o,this.v&&ZU(this.o),t&&8,!t);this.v&&(YU(i,this.o),this.v=0),t&&(Nr(i,i.length-8,this.c.d()),Nr(i,i.length-4,this.l)),this.ondata(i,t)},n}(),eQ=function(){function n(e,t){Wb([$b,uhe,function(){return[uc,Zd,oI]}],this,ez.call(this,e,t),function(i){var r=new oI(i.data);onmessage=uc(r)},8)}return n}();function tQ(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[$b,uhe,function(){return[lI]}],function(i){return I0(lI(i.data[0],i.data[1]))},2,t)}function lI(n,e){e||(e={});var t=Hb(),i=n.length;t.p(n);var r=dv(n,e,ZU(e),8),s=r.length;return YU(r,e),Nr(r,s-8,t.d()),Nr(r,s-4,i),r}var uI=function(){function n(e){this.v=1,Ml.call(this,e)}return n.prototype.push=function(e,t){if(Ml.prototype.e.call(this,e),this.v){var i=this.p.length>3?QU(this.p):4;if(i>=this.p.length&&!t)return;this.p=this.p.subarray(i),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Ml.prototype.c.call(this,t)},n}(),vhe=function(){function n(e){this.ondata=e,Wb([Vb,che,function(){return[uc,Ml,uI]}],this,0,function(){var t=new uI;onmessage=uc(t)},9)}return n}();function yhe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[Vb,che,function(){return[cI]}],function(i){return I0(cI(i.data[0]))},3,t)}function cI(n,e){return GT(n.subarray(QU(n),-8),e||new pr(hhe(n)))}var dN=function(){function n(e,t){this.c=KU(),this.v=1,Zd.call(this,e,t)}return n.prototype.push=function(e,t){Zd.prototype.push.call(this,e,t)},n.prototype.p=function(e,t){this.c.p(e);var i=dv(e,this.o,this.v&&2,t&&4,!t);this.v&&(JU(i,this.o),this.v=0),t&&Nr(i,i.length-4,this.c.d()),this.ondata(i,t)},n}(),upt=function(){function n(e,t){Wb([$b,dhe,function(){return[uc,Zd,dN]}],this,ez.call(this,e,t),function(i){var r=new dN(i.data);onmessage=uc(r)},10)}return n}();function cpt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[$b,dhe,function(){return[fN]}],function(i){return I0(fN(i.data[0],i.data[1]))},4,t)}function fN(n,e){e||(e={});var t=KU();t.p(n);var i=dv(n,e,2,4);return JU(i,e),Nr(i,i.length-4,t.d()),i}var dI=function(){function n(e){this.v=1,Ml.call(this,e)}return n.prototype.push=function(e,t){if(Ml.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Ml.prototype.c.call(this,t)},n}(),_he=function(){function n(e){this.ondata=e,Wb([Vb,fhe,function(){return[uc,Ml,dI]}],this,0,function(){var t=new dI;onmessage=uc(t)},11)}return n}();function bhe(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return Gb(n,e,[Vb,fhe,function(){return[Xw]}],function(i){return I0(Xw(i.data[0],XU(i.data[1])))},5,t)}function Xw(n,e){return GT((phe(n),n.subarray(2,-4)),e)}var She=function(){function n(e){this.G=uI,this.I=Ml,this.Z=dI,this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var i=new pr(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,s=function(){r.ondata.apply(r,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(s):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(s):new this.Z(s),this.s.push(this.p,t),this.p=null}}},n}(),dpt=function(){function n(e){this.G=vhe,this.I=tz,this.Z=_he,this.ondata=e}return n.prototype.push=function(e,t){She.prototype.push.call(this,e,t)},n}();function fpt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";return n[0]==31&&n[1]==139&&n[2]==8?yhe(n,e,t):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?nz(n,e,t):bhe(n,e,t)}function hpt(n,e){return n[0]==31&&n[1]==139&&n[2]==8?cI(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?qb(n,e):Xw(n,e)}var iz=function(n,e,t,i){for(var r in n){var s=n[r],a=e+r;s instanceof pr?t[a]=[s,i]:Array.isArray(s)?t[a]=[s[0],WT(i,s[1])]:iz(s,a+"/",t,i)}},nQ=typeof TextEncoder<"u"&&new TextEncoder,hN=typeof TextDecoder<"u"&&new TextDecoder,xhe=0;try{hN.decode(qf,{stream:!0}),xhe=1}catch{}var whe=function(n){for(var e="",t=0;;){var i=n[t++],r=(i>127)+(i>223)+(i>239);if(t+r>n.length)return[e,Ju(n,t-1)];r?r==3?(i=((i&15)<<18|(n[t++]&63)<<12|(n[t++]&63)<<6|n[t++]&63)-65536,e+=String.fromCharCode(55296|i>>10,56320|i&1023)):r&1?e+=String.fromCharCode((i&31)<<6|n[t++]&63):e+=String.fromCharCode((i&15)<<12|(n[t++]&63)<<6|n[t++]&63):e+=String.fromCharCode(i)}},ppt=function(){function n(e){this.ondata=e,xhe?this.t=new TextDecoder:this.p=qf}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var i=new pr(this.p.length+e.length);i.set(this.p),i.set(e,this.p.length);var r=whe(i),s=r[0],a=r[1];if(t){if(a.length)throw"invalid utf-8 data";this.p=null}else this.p=a;this.ondata(s,t)},n}(),mpt=function(){function n(e){this.ondata=e}return n.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(y0(e),this.d=t||!1)},n}();function y0(n,e){if(e){for(var t=new pr(n.length),i=0;i<n.length;++i)t[i]=n.charCodeAt(i);return t}if(nQ)return nQ.encode(n);for(var r=n.length,s=new pr(n.length+(n.length>>1)),a=0,o=function(c){s[a++]=c},i=0;i<r;++i){if(a+5>s.length){var l=new pr(a+8+(r-i<<1));l.set(s),s=l}var u=n.charCodeAt(i);u<128||e?o(u):u<2048?(o(192|u>>6),o(128|u&63)):u>55295&&u<57344?(u=65536+(u&1047552)|n.charCodeAt(++i)&1023,o(240|u>>18),o(128|u>>12&63),o(128|u>>6&63),o(128|u&63)):(o(224|u>>12),o(128|u>>6&63),o(128|u&63))}return Ju(s,0,a)}function rz(n,e){if(e){for(var t="",i=0;i<n.length;i+=16384)t+=String.fromCharCode.apply(null,n.subarray(i,i+16384));return t}else{if(hN)return hN.decode(n);var r=whe(n),s=r[0],a=r[1];if(a.length)throw"invalid utf-8 data";return s}}var The=function(n){return n==1?3:n<6?2:n==9?1:0},Che=function(n,e){return e+30+Ko(n,e+26)+Ko(n,e+28)},Ahe=function(n,e,t){var i=Ko(n,e+28),r=rz(n.subarray(e+46,e+46+i),!(Ko(n,e+8)&2048)),s=e+46+i,a=$s(n,e+20),o=t&&a==4294967295?Ehe(n,s):[a,$s(n,e+24),$s(n,e+42)],l=o[0],u=o[1],c=o[2];return[Ko(n,e+10),l,u,r,s+Ko(n,e+30)+Ko(n,e+32),c]},Ehe=function(n,e){for(;Ko(n,e)!=1;e+=4+Ko(n,e+2));return[Kk(n,e+12),Kk(n,e+4),Kk(n,e+20)]},Gp=function(n){var e=0;if(n)for(var t in n){var i=n[t].length;if(i>65535)throw"extra field too long";e+=i+4}return e},j_=function(n,e,t,i,r,s,a,o){var l=i.length,u=t.extra,c=o&&o.length,d=Gp(u);Nr(n,e,a!=null?33639248:67324752),e+=4,a!=null&&(n[e++]=20,n[e++]=t.os),n[e]=20,e+=2,n[e++]=t.flag<<1|(s==null&&8),n[e++]=r&&8,n[e++]=t.compression&255,n[e++]=t.compression>>8;var f=new Date(t.mtime==null?Date.now():t.mtime),h=f.getFullYear()-1980;if(h<0||h>119)throw"date not in range 1980-2099";if(Nr(n,e,h<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),e+=4,s!=null&&(Nr(n,e,t.crc),Nr(n,e+4,s),Nr(n,e+8,t.size)),Nr(n,e+12,l),Nr(n,e+14,d),e+=16,a!=null&&(Nr(n,e,c),Nr(n,e+6,t.attrs),Nr(n,e+10,a),e+=14),n.set(i,e),e+=l,d)for(var p in u){var m=u[p],g=m.length;Nr(n,e,+p),Nr(n,e+2,g),n.set(m,e+4),e+=4+g}return c&&(n.set(o,e),e+=c),e},sz=function(n,e,t,i,r){Nr(n,e,101010256),Nr(n,e+8,t),Nr(n,e+10,t),Nr(n,e+12,i),Nr(n,e+16,r)},Yw=function(){function n(e){this.filename=e,this.c=Hb(),this.size=0,this.compression=0}return n.prototype.process=function(e,t){this.ondata(null,e,t)},n.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},n}(),gpt=function(){function n(e,t){var i=this;t||(t={}),Yw.call(this,e),this.d=new Zd(t,function(r,s){i.ondata(null,r,s)}),this.compression=8,this.flag=The(t.level)}return n.prototype.process=function(e,t){try{this.d.push(e,t)}catch(i){this.ondata(i,null,t)}},n.prototype.push=function(e,t){Yw.prototype.push.call(this,e,t)},n}(),vpt=function(){function n(e,t){var i=this;t||(t={}),Yw.call(this,e),this.d=new mhe(t,function(r,s,a){i.ondata(r,s,a)}),this.compression=8,this.flag=The(t.level),this.terminate=this.d.terminate}return n.prototype.process=function(e,t){this.d.push(e,t)},n.prototype.push=function(e,t){Yw.prototype.push.call(this,e,t)},n}(),ypt=function(){function n(e){this.ondata=e,this.u=[],this.d=1}return n.prototype.add=function(e){var t=this;if(this.d&2)throw"stream finished";var i=y0(e.filename),r=i.length,s=e.comment,a=s&&y0(s),o=r!=e.filename.length||a&&s.length!=a.length,l=r+Gp(e.extra)+30;if(r>65535)throw"filename too long";var u=new pr(l);j_(u,0,e,i,o);var c=[u],d=function(){for(var g=0,v=c;g<v.length;g++){var _=v[g];t.ondata(null,_,!1)}c=[]},f=this.d;this.d=0;var h=this.u.length,p=WT(e,{f:i,u:o,o:a,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),f){var g=t.u[h+1];g?g.r():t.d=1}f=1}}),m=0;e.ondata=function(g,v,_){if(g)t.ondata(g,v,_),t.terminate();else if(m+=v.length,c.push(v),_){var y=new pr(16);Nr(y,0,134695760),Nr(y,4,e.crc),Nr(y,8,m),Nr(y,12,e.size),c.push(y),p.c=m,p.b=l+m+16,p.crc=e.crc,p.size=e.size,f&&p.r(),f=1}else f&&d()},this.u.push(p)},n.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},n.prototype.e=function(){for(var e=0,t=0,i=0,r=0,s=this.u;r<s.length;r++){var a=s[r];i+=46+a.f.length+Gp(a.extra)+(a.o?a.o.length:0)}for(var o=new pr(i+22),l=0,u=this.u;l<u.length;l++){var a=u[l];j_(o,e,a,a.f,a.u,a.c,t,a.o),e+=46+a.f.length+Gp(a.extra)+(a.o?a.o.length:0),t+=a.b}sz(o,e,this.u.length,i,t),this.ondata(null,o,!0),this.d=2},n.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var i=t[e];i.t()}this.d=2},n}();function _pt(n,e,t){if(t||(t=e,e={}),typeof t!="function")throw"no callback";var i={};iz(n,"",i,e);var r=Object.keys(i),s=r.length,a=0,o=0,l=s,u=new Array(s),c=[],d=function(){for(var m=0;m<c.length;++m)c[m]()},f=function(){var m=new pr(o+22),g=a,v=o-a;o=0;for(var _=0;_<l;++_){var y=u[_];try{var b=y.c.length;j_(m,o,y,y.f,y.u,b);var x=30+y.f.length+Gp(y.extra),w=o+x;m.set(y.c,w),j_(m,a,y,y.f,y.u,b,o,y.m),a+=16+x+(y.m?y.m.length:0),o=w+b}catch(A){return t(A,null)}}sz(m,a,u.length,v,g),t(null,m)};s||f();for(var h=function(m){var g=r[m],v=i[g],_=v[0],y=v[1],b=Hb(),x=_.length;b.p(_);var w=y0(g),A=w.length,T=y.comment,C=T&&y0(T),E=C&&C.length,I=Gp(y.extra),k=y.level==0?0:8,O=function(U,z){if(U)d(),t(U,null);else{var L=z.length;u[m]=WT(y,{size:x,crc:b.d(),c:z,f:w,m:C,u:A!=g.length||C&&T.length!=E,compression:k}),a+=30+A+I+L,o+=76+2*(A+I)+(E||0)+L,--s||f()}};if(A>65535&&O("filename too long",null),!k)O(null,_);else if(x<16e4)try{O(null,qT(_,y))}catch(U){O(U,null)}else c.push(ghe(_,y,O))},p=0;p<l;++p)h(p);return d}function bpt(n,e){e||(e={});var t={},i=[];iz(n,"",t,e);var r=0,s=0;for(var a in t){var o=t[a],l=o[0],u=o[1],c=u.level==0?0:8,d=y0(a),f=d.length,h=u.comment,p=h&&y0(h),m=p&&p.length,g=Gp(u.extra);if(f>65535)throw"filename too long";var v=c?qT(l,u):l,_=v.length,y=Hb();y.p(l),i.push(WT(u,{size:l.length,crc:y.d(),c:v,f:d,m:p,u:f!=a.length||p&&h.length!=m,o:r,compression:c})),r+=30+f+g+_,s+=76+2*(f+g)+(m||0)+_}for(var b=new pr(s+22),x=r,w=s-r,A=0;A<i.length;++A){var d=i[A];j_(b,d.o,d,d.f,d.u,d.c.length);var T=30+d.f.length+Gp(d.extra);b.set(d.c,d.o+T),j_(b,r,d,d.f,d.u,d.c.length,d.o,d.m),r+=16+T+(d.m?d.m.length:0)}return sz(b,r,i.length,w,x),b}var Mhe=function(){function n(){}return n.prototype.push=function(e,t){this.ondata(null,e,t)},n.compression=0,n}(),Spt=function(){function n(){var e=this;this.i=new Ml(function(t,i){e.ondata(null,t,i)})}return n.prototype.push=function(e,t){try{this.i.push(e,t)}catch(i){this.ondata(i,e,t)}},n.compression=8,n}(),xpt=function(){function n(e,t){var i=this;t<32e4?this.i=new Ml(function(r,s){i.ondata(null,r,s)}):(this.i=new tz(function(r,s,a){i.ondata(r,s,a)}),this.terminate=this.i.terminate)}return n.prototype.push=function(e,t){this.i.terminate&&(e=Ju(e,0)),this.i.push(e,t)},n.compression=8,n}(),wpt=function(){function n(e){this.onfile=e,this.k=[],this.o={0:Mhe},this.p=qf}return n.prototype.push=function(e,t){var i=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),s=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(s,!this.c):this.k[0].push(s),e=e.subarray(r),e.length)return this.push(e,t)}else{var a=0,o=0,l=void 0,u=void 0;this.p.length?e.length?(u=new pr(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,f=d&&this.d,h=function(){var v,_=$s(u,o);if(_==67324752){a=1,l=o,p.d=null,p.c=0;var y=Ko(u,o+6),b=Ko(u,o+8),x=y&2048,w=y&8,A=Ko(u,o+26),T=Ko(u,o+28);if(c>o+30+A+T){var C=[];p.k.unshift(C),a=2;var E=$s(u,o+18),I=$s(u,o+22),k=rz(u.subarray(o+30,o+=30+A),!x);E==4294967295?(v=w?[-2]:Ehe(u,o),E=v[0],I=v[1]):w&&(E=-1),o+=T,p.c=E;var O,U={name:k,compression:b,start:function(){if(!U.ondata)throw"no callback";if(!E)U.ondata(null,qf,!0);else{var z=i.o[b];if(!z)throw"unknown compression type "+b;O=E<0?new z(k):new z(k,E,I),O.ondata=function(F,X,te){U.ondata(F,X,te)};for(var L=0,G=C;L<G.length;L++){var H=G[L];O.push(H,!1)}i.k[0]==C&&i.c?i.d=O:O.push(qf,!0)}},terminate:function(){O&&O.terminate&&O.terminate()}};E>=0&&(U.size=E,U.originalSize=I),p.onfile(U)}return"break"}else if(d){if(_==134695760)return l=o+=12+(d==-2&&8),a=3,p.c=0,"break";if(_==33639248)return l=o-=4,a=3,p.c=0,"break"}},p=this;o<c-4;++o){var m=h();if(m==="break")break}if(this.p=qf,d<0){var g=a?u.subarray(0,l-12-(d==-2&&8)-($s(u,l-16)==134695760&&4)):u.subarray(0,o);f?f.push(g,!!a):this.k[+(a==2)].push(g)}if(a&2)return this.push(u.subarray(o),t);this.p=u.subarray(o)}if(t){if(this.c)throw"invalid zip file";this.p=null}},n.prototype.register=function(e){this.o[e.compression]=e},n}();function Tpt(n,e){if(typeof e!="function")throw"no callback";for(var t=[],i=function(){for(var f=0;f<t.length;++f)t[f]()},r={},s=n.length-22;$s(n,s)!=101010256;--s)if(!s||n.length-s>65558){e("invalid zip file",null);return}var a=Ko(n,s+8);a||e(null,{});var o=a,l=$s(n,s+16),u=l==4294967295;if(u){if(s=$s(n,s-12),$s(n,s)!=101075792){e("invalid zip file",null);return}o=a=$s(n,s+32),l=$s(n,s+48)}for(var c=function(f){var h=Ahe(n,l,u),p=h[0],m=h[1],g=h[2],v=h[3],_=h[4],y=h[5],b=Che(n,y);l=_;var x=function(A,T){A?(i(),e(A,null)):(r[v]=T,--a||e(null,r))};if(!p)x(null,Ju(n,b,b+m));else if(p==8){var w=n.subarray(b,b+m);if(m<32e4)try{x(null,qb(w,new pr(g)))}catch(A){x(A,null)}else t.push(nz(w,{size:g},x))}else x("unknown compression type "+p,null)},d=0;d<o;++d)c();return i}function Cpt(n){for(var e={},t=n.length-22;$s(n,t)!=101010256;--t)if(!t||n.length-t>65558)throw"invalid zip file";var i=Ko(n,t+8);if(!i)return{};var r=$s(n,t+16),s=r==4294967295;if(s){if(t=$s(n,t-12),$s(n,t)!=101075792)throw"invalid zip file";i=$s(n,t+32),r=$s(n,t+48)}for(var a=0;a<i;++a){var o=Ahe(n,r,s),l=o[0],u=o[1],c=o[2],d=o[3],f=o[4],h=o[5],p=Che(n,h);if(r=f,!l)e[d]=Ju(n,p,p+u);else if(l==8)e[d]=qb(n.subarray(p,p+u),new pr(c));else throw"unknown compression type "+l}return e}var Apt=Object.freeze(Object.defineProperty({__proto__:null,Deflate:Zd,AsyncDeflate:mhe,deflate:ghe,deflateSync:qT,Inflate:Ml,AsyncInflate:tz,inflate:nz,inflateSync:qb,Gzip:oI,AsyncGzip:eQ,gzip:tQ,gzipSync:lI,Gunzip:uI,AsyncGunzip:vhe,gunzip:yhe,gunzipSync:cI,Zlib:dN,AsyncZlib:upt,zlib:cpt,zlibSync:fN,Unzlib:dI,AsyncUnzlib:_he,unzlib:bhe,unzlibSync:Xw,compress:tQ,AsyncCompress:eQ,compressSync:lI,Compress:oI,Decompress:She,AsyncDecompress:dpt,decompress:fpt,decompressSync:hpt,DecodeUTF8:ppt,EncodeUTF8:mpt,strToU8:y0,strFromU8:rz,ZipPassThrough:Yw,ZipDeflate:gpt,AsyncZipDeflate:vpt,Zip:ypt,zip:_pt,zipSync:bpt,UnzipPassThrough:Mhe,UnzipInflate:Spt,AsyncUnzipInflate:xpt,Unzip:wpt,unzip:Tpt,unzipSync:Cpt},Symbol.toStringTag,{value:"Module"}));function Ihe(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let r=n,s=i,a=Math.floor((r+s)/2);for(;e<t[a]||e>=t[a+1];)e<t[a]?s=a:r=a,a=Math.floor((r+s)/2);return a}function Ept(n,e,t,i){const r=[],s=[],a=[];r[0]=1;for(let o=1;o<=t;++o){s[o]=e-i[n+1-o],a[o]=i[n+o]-e;let l=0;for(let u=0;u<o;++u){const c=a[u+1],d=s[o-u],f=r[u]/(c+d);r[u]=l+c*f,l=d*f}r[o]=l}return r}function Mpt(n,e,t,i){const r=Ihe(n,i,e),s=Ept(r,i,n,e),a=new Rr(0,0,0,0);for(let o=0;o<=n;++o){const l=t[r-n+o],u=s[o],c=l.w*u;a.x+=l.x*c,a.y+=l.y*c,a.z+=l.z*c,a.w+=l.w*u}return a}function Ipt(n,e,t,i,r){const s=[];for(let d=0;d<=t;++d)s[d]=0;const a=[];for(let d=0;d<=i;++d)a[d]=s.slice(0);const o=[];for(let d=0;d<=t;++d)o[d]=s.slice(0);o[0][0]=1;const l=s.slice(0),u=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-r[n+1-d],u[d]=r[n+d]-e;let f=0;for(let h=0;h<d;++h){const p=u[h+1],m=l[d-h];o[d][h]=p+m;const g=o[h][d-1]/o[d][h];o[h][d]=f+p*g,f=m*g}o[d][d]=f}for(let d=0;d<=t;++d)a[0][d]=o[d][t];for(let d=0;d<=t;++d){let f=0,h=1;const p=[];for(let m=0;m<=t;++m)p[m]=s.slice(0);p[0][0]=1;for(let m=1;m<=i;++m){let g=0;const v=d-m,_=t-m;d>=m&&(p[h][0]=p[f][0]/o[_+1][v],g=p[h][0]*o[v][_]);const y=v>=-1?1:-v,b=d-1<=_?m-1:t-d;for(let w=y;w<=b;++w)p[h][w]=(p[f][w]-p[f][w-1])/o[_+1][v+w],g+=p[h][w]*o[v+w][_];d<=_&&(p[h][m]=-p[f][m-1]/o[_+1][d],g+=p[h][m]*o[d][_]),a[m][d]=g;const x=f;f=h,h=x}}let c=t;for(let d=1;d<=i;++d){for(let f=0;f<=t;++f)a[d][f]*=c;c*=t-d}return a}function Dpt(n,e,t,i,r){const s=r<n?r:n,a=[],o=Ihe(n,i,e),l=Ipt(o,i,n,s,e),u=[];for(let c=0;c<t.length;++c){const d=t[c].clone(),f=d.w;d.x*=f,d.y*=f,d.z*=f,u[c]=d}for(let c=0;c<=s;++c){const d=u[o-n].clone().multiplyScalar(l[c][0]);for(let f=1;f<=n;++f)d.add(u[o-n+f].clone().multiplyScalar(l[c][f]));a[c]=d}for(let c=s+1;c<=r+1;++c)a[c]=new Rr(0,0,0);return a}function Rpt(n,e){let t=1;for(let r=2;r<=n;++r)t*=r;let i=1;for(let r=2;r<=e;++r)i*=r;for(let r=2;r<=n-e;++r)i*=r;return t/i}function Ppt(n){const e=n.length,t=[],i=[];for(let s=0;s<e;++s){const a=n[s];t[s]=new st(a.x,a.y,a.z),i[s]=a.w}const r=[];for(let s=0;s<e;++s){const a=t[s].clone();for(let o=1;o<=s;++o)a.sub(r[s-o].clone().multiplyScalar(Rpt(s,o)*i[o]));r[s]=a.divideScalar(i[0])}return r}function kpt(n,e,t,i,r){const s=Dpt(n,e,t,i,r);return Ppt(s)}class iQ extends ed{constructor(e,t,i,r,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=s||this.knots.length-1;for(let a=0;a<i.length;++a){const o=i[a];this.controlPoints[a]=new Rr(o.x,o.y,o.z,o.w)}}getPoint(e,t=new st){const i=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=Mpt(this.degree,this.knots,this.controlPoints,r);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new st){const i=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=kpt(this.degree,this.knots,this.controlPoints,r,1);return i.copy(s[1]).normalize(),i}}let ar,Fs,fl;class Lpt extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?Mo.extractUrlBase(e):s.path,o=new Io(this.manager);o.setPath(s.path),o.setResponseType("arraybuffer"),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e,t){if(zpt(e))ar=new Upt().parse(e);else{const r=khe(e);if(!Hpt(r))throw new Error("THREE.FBXLoader: Unknown format.");if(sQ(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+sQ(r));ar=new Fpt().parse(r)}const i=new W_(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Opt(i,this.manager).parse(ar)}}class Opt{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Fs=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),r=this.parseDeformers(),s=new Npt().parse(r);return this.parseScene(r,s,i),fl}parseConnections(){const e=new Map;return"Connections"in ar&&ar.Connections.connections.forEach(function(i){const r=i[0],s=i[1],a=i[2];e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:s,relationship:a};e.get(r).parents.push(o),e.has(s)||e.set(s,{parents:[],children:[]});const l={ID:r,relationship:a};e.get(s).children.push(l)}),e}parseImages(){const e={},t={};if("Video"in ar.Objects){const i=ar.Objects.Video;for(const r in i){const s=i[r],a=parseInt(r);if(e[a]=s.RelativeFilename||s.Filename,"Content"in s){const o=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(o||l){const u=this.parseImage(i[r]);t[s.RelativeFilename||s.Filename]=u}}}}for(const i in e){const r=e[i];t[r]!==void 0?e[i]=t[r]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,r=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(r){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+r+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const a=new Uint8Array(t);return window.URL.createObjectURL(new Blob([a],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in ar.Objects){const i=ar.Objects.Texture;for(const r in i){const s=this.parseTexture(i[r],e);t.set(parseInt(r),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const r=e.WrapModeU,s=e.WrapModeV,a=r!==void 0?r.value:0,o=s!==void 0?s.value:0;if(i.wrapS=a===0?Sl:ma,i.wrapT=o===0?Sl:ma,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i;const r=this.textureLoader.path,s=Fs.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let a;const o=e.FileName.slice(-3).toLowerCase();if(o==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new eo):(l.setPath(this.textureLoader.path),a=l.load(i))}else o==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new eo):a=this.textureLoader.load(i);return this.textureLoader.setPath(r),a}parseMaterials(e){const t=new Map;if("Material"in ar.Objects){const i=ar.Objects.Material;for(const r in i){const s=this.parseMaterial(i[r],e);s!==null&&t.set(parseInt(r),s)}}return t}parseMaterial(e,t){const i=e.id,r=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!Fs.has(i))return null;const a=this.parseParameters(e,t,i);let o;switch(s.toLowerCase()){case"phong":o=new Jf;break;case"lambert":o=new VU;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),o=new Jf;break}return o.setValues(a),o.name=r,o}parseParameters(e,t,i){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=new Fn().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(r.color=new Fn().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=new Fn().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(r.emissive=new Fn().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=new Fn().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(r.specular=new Fn().fromArray(e.SpecularColor.value));const s=this;return Fs.get(i).children.forEach(function(a){const o=a.relationship;switch(o){case"Bump":r.bumpMap=s.getTexture(t,a.ID);break;case"Maya|TEX_ao_map":r.aoMap=s.getTexture(t,a.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=s.getTexture(t,a.ID),r.map!==void 0&&(r.map.encoding=Zi);break;case"DisplacementColor":r.displacementMap=s.getTexture(t,a.ID);break;case"EmissiveColor":r.emissiveMap=s.getTexture(t,a.ID),r.emissiveMap!==void 0&&(r.emissiveMap.encoding=Zi);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=s.getTexture(t,a.ID);break;case"ReflectionColor":r.envMap=s.getTexture(t,a.ID),r.envMap!==void 0&&(r.envMap.mapping=Ow,r.envMap.encoding=Zi);break;case"SpecularColor":r.specularMap=s.getTexture(t,a.ID),r.specularMap!==void 0&&(r.specularMap.encoding=Zi);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=s.getTexture(t,a.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",o);break}}),r}getTexture(e,t){return"LayeredTexture"in ar.Objects&&t in ar.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Fs.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in ar.Objects){const i=ar.Objects.Deformer;for(const r in i){const s=i[r],a=Fs.get(parseInt(r));if(s.attrType==="Skin"){const o=this.parseSkeleton(a,i);o.ID=r,a.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),o.geometryID=a.parents[0].ID,e[r]=o}else if(s.attrType==="BlendShape"){const o={id:r};o.rawTargets=this.parseMorphTargets(a,i),o.id=r,a.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=o}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(r){const s=t[r.ID];if(s.attrType!=="Cluster")return;const a={ID:r.ID,indices:[],weights:[],transformLink:new ri().fromArray(s.TransformLink.a)};"Indexes"in s&&(a.indices=s.Indexes.a,a.weights=s.Weights.a),i.push(a)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let r=0;r<e.children.length;r++){const s=e.children[r],a=t[s.ID],o={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if(a.attrType!=="BlendShapeChannel")return;o.geoID=Fs.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(o)}return i}parseScene(e,t,i){fl=new xl;const r=this.parseModels(e.skeletons,t,i),s=ar.Objects.Model,a=this;r.forEach(function(l){const u=s[l.ID];a.setLookAtProperties(l,u),Fs.get(l.ID).parents.forEach(function(d){const f=r.get(d.ID);f!==void 0&&f.add(l)}),l.parent===null&&fl.add(l)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),fl.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const u=Rhe(l.userData.transformData);l.applyMatrix4(u),l.updateWorldMatrix()}});const o=new Bpt().parse();fl.children.length===1&&fl.children[0].isGroup&&(fl.children[0].animations=o,fl=fl.children[0]),fl.animations=o}parseModels(e,t,i){const r=new Map,s=ar.Objects.Model;for(const a in s){const o=parseInt(a),l=s[a],u=Fs.get(o);let c=this.buildSkeleton(u,e,o,l.attrName);if(!c){switch(l.attrType){case"Camera":c=this.createCamera(u);break;case"Light":c=this.createLight(u);break;case"Mesh":c=this.createMesh(u,t,i);break;case"NurbsCurve":c=this.createCurve(u,t);break;case"LimbNode":case"Root":c=new V_;break;case"Null":default:c=new xl;break}c.name=l.attrName?vr.sanitizeNodeName(l.attrName):"",c.ID=o}this.getTransformData(c,l),r.set(o,c)}return r}buildSkeleton(e,t,i,r){let s=null;return e.parents.forEach(function(a){for(const o in t){const l=t[o];l.rawBones.forEach(function(u,c){if(u.ID===a.ID){const d=s;s=new V_,s.matrixWorld.copy(u.transformLink),s.name=r?vr.sanitizeNodeName(r):"",s.ID=i,l.bones[c]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(r){const s=ar.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ys;else{let r=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(r=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let a=1e3;i.FarPlane!==void 0&&(a=i.FarPlane.value/1e3);let o=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(o=i.AspectWidth.value,l=i.AspectHeight.value);const u=o/l;let c=45;i.FieldOfView!==void 0&&(c=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(r){case 0:t=new ha(c,u,s,a),d!==null&&t.setFocalLength(d);break;case 1:t=new Pb(-o/2,o/2,l/2,-l/2,s,a);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+r+"."),t=new ys;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(r){const s=ar.Objects.NodeAttribute[r.ID];s!==void 0&&(i=s)}),i===void 0)t=new ys;else{let r;i.LightType===void 0?r=0:r=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new Fn().fromArray(i.Color.value));let a=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(a=0);let o=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?o=0:o=i.FarAttenuationEnd.value);const l=1;switch(r){case 0:t=new Zg(s,a,o,l);break;case 1:t=new VT(s,a);break;case 2:let u=Math.PI/3;i.InnerAngle!==void 0&&(u=bo.degToRad(i.InnerAngle.value));let c=0;i.OuterAngle!==void 0&&(c=bo.degToRad(i.OuterAngle.value),c=Math.max(c,1)),t=new sR(s,a,o,u,c,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Zg(s,a);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let r,s=null,a=null;const o=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&o.push(i.get(l.ID))}),o.length>1?a=o:o.length>0?a=o[0]:(a=new Jf({color:13421772}),o.push(a)),"color"in s.attributes&&o.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(r=new iR(s,a),r.normalizeSkinWeights()):r=new ga(s,a),r}createCurve(e,t){const i=e.children.reduce(function(s,a){return t.has(a.ID)&&(s=t.get(a.ID)),s},null),r=new Wc({color:3342591,linewidth:1});return new Ob(i,r)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=Phe(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Fs.get(e.ID).children.forEach(function(r){if(r.relationship==="LookAtProperty"){const s=ar.Objects.Model[r.ID];if("Lcl_Translation"in s){const a=s.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(a),fl.add(e.target)):e.lookAt(new st().fromArray(a))}}})}bindSkeleton(e,t,i){const r=this.parsePoseNodes();for(const s in e){const a=e[s];Fs.get(parseInt(a.ID)).parents.forEach(function(l){if(t.has(l.ID)){const u=l.ID;Fs.get(u).parents.forEach(function(d){i.has(d.ID)&&i.get(d.ID).bind(new Lb(a.bones),r[d.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in ar.Objects){const t=ar.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const r=t[i].PoseNode;Array.isArray(r)?r.forEach(function(s){e[s.Node]=new ri().fromArray(s.Matrix.a)}):e[r.Node]=new ri().fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in ar&&"AmbientColor"in ar.GlobalSettings){const e=ar.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],r=e[2];if(t!==0||i!==0||r!==0){const s=new Fn(t,i,r);fl.add(new aR(s,1))}}}}class Npt{parse(e){const t=new Map;if("Geometry"in ar.Objects){const i=ar.Objects.Geometry;for(const r in i){const s=Fs.get(parseInt(r)),a=this.parseGeometry(s,i[r],e);t.set(parseInt(r),a)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const r=i.skeletons,s=[],a=e.parents.map(function(d){return ar.Objects.Model[d.ID]});if(a.length===0)return;const o=e.children.reduce(function(d,f){return r[f.ID]!==void 0&&(d=r[f.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=a[0],u={};"RotationOrder"in l&&(u.eulerOrder=Phe(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);const c=Rhe(u);return this.genGeometry(t,o,s,c)}genGeometry(e,t,i,r){const s=new cr;e.attrName&&(s.name=e.attrName);const a=this.parseGeoNode(e,t),o=this.genBuffers(a),l=new Gn(o.vertex,3);if(l.applyMatrix4(r),s.setAttribute("position",l),o.colors.length>0&&s.setAttribute("color",new Gn(o.colors,3)),t&&(s.setAttribute("skinIndex",new MU(o.weightsIndices,4)),s.setAttribute("skinWeight",new Gn(o.vertexWeights,4)),s.FBX_Deformer=t),o.normal.length>0){const u=new qu().getNormalMatrix(r),c=new Gn(o.normal,3);c.applyNormalMatrix(u),s.setAttribute("normal",c)}if(o.uvs.forEach(function(u,c){let d="uv"+(c+1).toString();c===0&&(d="uv"),s.setAttribute(d,new Gn(o.uvs[c],2))}),a.material&&a.material.mappingType!=="AllSame"){let u=o.materialIndex[0],c=0;if(o.materialIndex.forEach(function(d,f){d!==u&&(s.addGroup(c,f-c,u),u=d,c=f)}),s.groups.length>0){const d=s.groups[s.groups.length-1],f=d.start+d.count;f!==o.materialIndex.length&&s.addGroup(f,o.materialIndex.length-f,u)}s.groups.length===0&&s.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(s,e,i,r),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let r=0;for(;e.LayerElementUV[r];)e.LayerElementUV[r].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(r,s){r.indices.forEach(function(a,o){i.weightTable[a]===void 0&&(i.weightTable[a]=[]),i.weightTable[a].push({id:s,weight:r.weights[o]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,r=0,s=!1,a=[],o=[],l=[],u=[],c=[],d=[];const f=this;return e.vertexIndices.forEach(function(h,p){let m,g=!1;h<0&&(h=h^-1,g=!0);let v=[],_=[];if(a.push(h*3,h*3+1,h*3+2),e.color){const y=kE(p,i,h,e.color);l.push(y[0],y[1],y[2])}if(e.skeleton){if(e.weightTable[h]!==void 0&&e.weightTable[h].forEach(function(y){_.push(y.weight),v.push(y.id)}),_.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const y=[0,0,0,0],b=[0,0,0,0];_.forEach(function(x,w){let A=x,T=v[w];b.forEach(function(C,E,I){if(A>C){I[E]=A,A=C;const k=y[E];y[E]=T,T=k}})}),v=y,_=b}for(;_.length<4;)_.push(0),v.push(0);for(let y=0;y<4;++y)c.push(_[y]),d.push(v[y])}if(e.normal){const y=kE(p,i,h,e.normal);o.push(y[0],y[1],y[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=kE(p,i,h,e.material)[0]),e.uv&&e.uv.forEach(function(y,b){const x=kE(p,i,h,y);u[b]===void 0&&(u[b]=[]),u[b].push(x[0]),u[b].push(x[1])}),r++,g&&(f.genFace(t,e,a,m,o,l,u,c,d,r),i++,r=0,a=[],o=[],l=[],u=[],c=[],d=[])}),t}genFace(e,t,i,r,s,a,o,l,u,c){for(let d=2;d<c;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(u[0]),e.weightsIndices.push(u[1]),e.weightsIndices.push(u[2]),e.weightsIndices.push(u[3]),e.weightsIndices.push(u[(d-1)*4]),e.weightsIndices.push(u[(d-1)*4+1]),e.weightsIndices.push(u[(d-1)*4+2]),e.weightsIndices.push(u[(d-1)*4+3]),e.weightsIndices.push(u[d*4]),e.weightsIndices.push(u[d*4+1]),e.weightsIndices.push(u[d*4+2]),e.weightsIndices.push(u[d*4+3])),t.color&&(e.colors.push(a[0]),e.colors.push(a[1]),e.colors.push(a[2]),e.colors.push(a[(d-1)*3]),e.colors.push(a[(d-1)*3+1]),e.colors.push(a[(d-1)*3+2]),e.colors.push(a[d*3]),e.colors.push(a[d*3+1]),e.colors.push(a[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(f,h){e.uvs[h]===void 0&&(e.uvs[h]=[]),e.uvs[h].push(o[h][0]),e.uvs[h].push(o[h][1]),e.uvs[h].push(o[h][(d-1)*2]),e.uvs[h].push(o[h][(d-1)*2+1]),e.uvs[h].push(o[h][d*2]),e.uvs[h].push(o[h][d*2+1])})}addMorphTargets(e,t,i,r){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(a){a.rawTargets.forEach(function(o){const l=ar.Objects.Geometry[o.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,r,o.name)})})}genMorphGeometry(e,t,i,r,s){const a=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],o=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],u=e.attributes.position.count*3,c=new Float32Array(u);for(let p=0;p<l.length;p++){const m=l[p]*3;c[m]=o[p*3],c[m+1]=o[p*3+1],c[m+2]=o[p*3+2]}const d={vertexIndices:a,vertexPositions:c},f=this.genBuffers(d),h=new Gn(f.vertex,3);h.name=s||i.attrName,h.applyMatrix4(r),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:r,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a;let s=[];return i==="IndexToDirect"&&(s=e.ColorIndex.a),{dataSize:4,buffer:r,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const r=e.Materials.a,s=[];for(let a=0;a<r.length;++a)s.push(a);return{dataSize:1,buffer:r,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(iQ===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new cr;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new cr;const i=t-1,r=e.KnotVector.a,s=[],a=e.Points.a;for(let d=0,f=a.length;d<f;d+=4)s.push(new Rr().fromArray(a,d));let o,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){o=i,l=r.length-1-o;for(let d=0;d<i;++d)s.push(s[d])}const c=new iQ(i,r,s,o,l).getPoints(s.length*12);return new cr().setFromPoints(c)}}class Bpt{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const r=t[i],s=this.addClip(r);e.push(s)}return e}parseClips(){if(ar.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=ar.Objects.AnimationCurveNode,t=new Map;for(const i in e){const r=e[i];if(r.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:r.id,attr:r.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=ar.Objects.AnimationCurve;for(const i in t){const r={id:t[i].id,times:t[i].KeyTime.a.map(Vpt),values:t[i].KeyValueFloat.a},s=Fs.get(r.id);if(s!==void 0){const a=s.parents[0].ID,o=s.parents[0].relationship;o.match(/X/)?e.get(a).curves.x=r:o.match(/Y/)?e.get(a).curves.y=r:o.match(/Z/)?e.get(a).curves.z=r:o.match(/d|DeformPercent/)&&e.has(a)&&(e.get(a).curves.morph=r)}}}parseAnimationLayers(e){const t=ar.Objects.AnimationLayer,i=new Map;for(const r in t){const s=[],a=Fs.get(parseInt(r));a!==void 0&&(a.children.forEach(function(l,u){if(e.has(l.ID)){const c=e.get(l.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[u]===void 0){const d=Fs.get(l.ID).parents.filter(function(f){return f.relationship!==void 0})[0].ID;if(d!==void 0){const f=ar.Objects.Model[d.toString()];if(f===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",l);return}const h={modelName:f.attrName?vr.sanitizeNodeName(f.attrName):"",ID:f.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};fl.traverse(function(p){p.ID===f.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new ri),"PreRotation"in f&&(h.preRotation=f.PreRotation.value),"PostRotation"in f&&(h.postRotation=f.PostRotation.value),s[u]=h}}s[u]&&(s[u][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[u]===void 0){const d=Fs.get(l.ID).parents.filter(function(v){return v.relationship!==void 0})[0].ID,f=Fs.get(d).parents[0].ID,h=Fs.get(f).parents[0].ID,p=Fs.get(h).parents[0].ID,m=ar.Objects.Model[p],g={modelName:m.attrName?vr.sanitizeNodeName(m.attrName):"",morphName:ar.Objects.Deformer[d].attrName};s[u]=g}s[u][c.attr]=c}}}),i.set(parseInt(r),s))}return i}parseAnimStacks(e){const t=ar.Objects.AnimationStack,i={};for(const r in t){const s=Fs.get(parseInt(r)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const a=e.get(s[0].ID);i[r]={name:t[r].attrName,layer:a}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(r){t=t.concat(i.generateTracks(r))}),new Qg(e.name,-1,t)}generateTracks(e){const t=[];let i=new st,r=new Xa,s=new st;if(e.transform&&e.transform.decompose(i,r,s),i=i.toArray(),r=new Wf().setFromQuaternion(r,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");a!==void 0&&t.push(a)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const a=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);a!==void 0&&t.push(a)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const a=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");a!==void 0&&t.push(a)}if(e.DeformPercent!==void 0){const a=this.generateMorphTrack(e);a!==void 0&&t.push(a)}return t}generateVectorTrack(e,t,i,r){const s=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(s,t,i);return new v0(e+"."+r,s,a)}generateRotationTrack(e,t,i,r,s,a){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(bo.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(bo.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(bo.degToRad));const o=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(o,t,i);r!==void 0&&(r=r.map(bo.degToRad),r.push(a),r=new Wf().fromArray(r),r=new Xa().setFromEuler(r)),s!==void 0&&(s=s.map(bo.degToRad),s.push(a),s=new Wf().fromArray(s),s=new Xa().setFromEuler(s).invert());const u=new Xa,c=new Wf,d=[];for(let f=0;f<l.length;f+=3)c.set(l[f],l[f+1],l[f+2],a),u.setFromEuler(c),r!==void 0&&u.premultiply(r),s!==void 0&&u.multiply(s),u.toArray(d,f/3*4);return new hh(e+".quaternion",o,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),r=fl.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new $_(e.modelName+".morphTargetInfluences["+r+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,r){return i-r}),t.length>1){let i=1,r=t[0];for(let s=1;s<t.length;s++){const a=t[s];a!==r&&(t[i]=a,r=a,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const r=i,s=[];let a=-1,o=-1,l=-1;return e.forEach(function(u){if(t.x&&(a=t.x.times.indexOf(u)),t.y&&(o=t.y.times.indexOf(u)),t.z&&(l=t.z.times.indexOf(u)),a!==-1){const c=t.x.values[a];s.push(c),r[0]=c}else s.push(r[0]);if(o!==-1){const c=t.y.values[o];s.push(c),r[1]=c}else s.push(r[1]);if(l!==-1){const c=t.z.values[l];s.push(c),r[2]=c}else s.push(r[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],r=e.values[t]-i,s=Math.abs(r);if(s>=180){const a=s/180,o=r/a;let l=i+o;const u=e.times[t-1],d=(e.times[t]-u)/a;let f=u+d;const h=[],p=[];for(;f<e.times[t];)h.push(f),f+=d,p.push(l),l+=o;e.times=aQ(e.times,t,h),e.values=aQ(e.values,t,p)}}}}class Fpt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Dhe,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(r,s){const a=r.match(/^[\s\t]*;/),o=r.match(/^[\s\t]*$/);if(a||o)return;const l=r.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),u=r.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=r.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(r,l):u?t.parseNodeProperty(r,u,i[++s]):c?t.popStack():r.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(r)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},a=this.parseNodeAttr(r),o=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in o?(i==="PoseNode"?o.PoseNode.push(s):o[i].id!==void 0&&(o[i]={},o[i][o[i].id]=o[i]),a.id!==""&&(o[i][a.id]=s)):typeof a.id=="number"?(o[i]={},o[i][a.id]=s):i!=="Properties70"&&(i==="PoseNode"?o[i]=[s]:o[i]=s),typeof a.id=="number"&&(s.id=a.id),a.name!==""&&(s.attrName=a.name),a.type!==""&&(s.attrType=a.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}}parseNodeProperty(e,t,i){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();r==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const a=this.getCurrentNode();if(a.name==="Properties70"){this.parseNodeSpecialProperty(e,r,s);return}if(r==="C"){const l=s.split(",").slice(1),u=parseInt(l[0]),c=parseInt(l[1]);let d=s.split(",").slice(3);d=d.map(function(f){return f.trim().replace(/^"/,"")}),r="connections",s=[u,c],Gpt(s,d),a[r]===void 0&&(a[r]=[])}r==="Node"&&(a.id=s),r in a&&Array.isArray(a[r])?a[r].push(s):r!=="a"?a[r]=s:a.a=s,this.setCurrentProp(a,r),r==="a"&&s.slice(-1)!==","&&(a.a=Yk(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Yk(t.a))}parseNodeSpecialProperty(e,t,i){const r=i.split('",').map(function(c){return c.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=r[0],a=r[1],o=r[2],l=r[3];let u=r[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":u=parseFloat(u);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":u=Yk(u);break}this.getPrevNode()[s]={type:a,type2:o,flag:l,value:u},this.setCurrentProp(this.getPrevNode(),s)}}class Upt{parse(e){const t=new rQ(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const r=new Dhe;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&r.add(s.name,s)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},r=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const a=e.getUint8(),o=e.getString(a);if(r===0)return null;const l=[];for(let f=0;f<s;f++)l.push(this.parseProperty(e));const u=l.length>0?l[0]:"",c=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===r;r>e.getOffset();){const f=this.parseNode(e,t);f!==null&&this.parseSubNode(o,i,f)}return i.propertyList=l,typeof u=="number"&&(i.id=u),c!==""&&(i.attrName=c),d!==""&&(i.attrType=d),o!==""&&(i.name=o),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if(e==="Connections"&&i.name==="C"){const r=[];i.propertyList.forEach(function(s,a){a!==0&&r.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(r)}else if(i.name==="Properties70")Object.keys(i).forEach(function(s){t[s]=i[s]});else if(e==="Properties70"&&i.name==="P"){let r=i.propertyList[0],s=i.propertyList[1];const a=i.propertyList[2],o=i.propertyList[3];let l;r.indexOf("Lcl ")===0&&(r=r.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[r]={type:s,type2:a,flag:o,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),s=e.getUint32(),a=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}typeof Apt>"u"&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const o=Xw(new Uint8Array(e.getArrayBuffer(a))),l=new rQ(o.buffer);switch(t){case"b":case"c":return l.getBooleanArray(r);case"d":return l.getFloat64Array(r);case"f":return l.getFloat32Array(r);case"i":return l.getInt32Array(r);case"l":return l.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class rQ{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),Mo.decodeText(new Uint8Array(t))}}class Dhe{add(e,t){this[e]=t}}function zpt(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===khe(n,0,e.length)}function Hpt(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(r){const s=n[r-1];return n=n.slice(t+r),t++,s}for(let r=0;r<e.length;++r)if(i(1)===e[r])return!1;return!0}function sQ(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Vpt(n){return n/46186158e3}const $pt=[];function kE(n,e,t,i){let r;switch(i.mappingType){case"ByPolygonVertex":r=n;break;case"ByPolygon":r=e;break;case"ByVertice":r=t;break;case"AllSame":r=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(r=i.indices[r]);const s=r*i.dataSize,a=s+i.dataSize;return Wpt($pt,i.buffer,s,a)}const Xk=new Wf,Ey=new st;function Rhe(n){const e=new ri,t=new ri,i=new ri,r=new ri,s=new ri,a=new ri,o=new ri,l=new ri,u=new ri,c=new ri,d=new ri,f=new ri,h=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Ey.fromArray(n.translation)),n.preRotation){const E=n.preRotation.map(bo.degToRad);E.push(n.eulerOrder),t.makeRotationFromEuler(Xk.fromArray(E))}if(n.rotation){const E=n.rotation.map(bo.degToRad);E.push(n.eulerOrder),i.makeRotationFromEuler(Xk.fromArray(E))}if(n.postRotation){const E=n.postRotation.map(bo.degToRad);E.push(n.eulerOrder),r.makeRotationFromEuler(Xk.fromArray(E)),r.invert()}n.scale&&s.scale(Ey.fromArray(n.scale)),n.scalingOffset&&o.setPosition(Ey.fromArray(n.scalingOffset)),n.scalingPivot&&a.setPosition(Ey.fromArray(n.scalingPivot)),n.rotationOffset&&l.setPosition(Ey.fromArray(n.rotationOffset)),n.rotationPivot&&u.setPosition(Ey.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(d.copy(n.parentMatrix),c.copy(n.parentMatrixWorld));const p=t.clone().multiply(i).multiply(r),m=new ri;m.extractRotation(c);const g=new ri;g.copyPosition(c);const v=g.clone().invert().multiply(c),_=m.clone().invert().multiply(v),y=s,b=new ri;if(h===0)b.copy(m).multiply(p).multiply(_).multiply(y);else if(h===1)b.copy(m).multiply(_).multiply(p).multiply(y);else{const I=new ri().scale(new st().setFromMatrixScale(d)).clone().invert(),k=_.clone().multiply(I);b.copy(m).multiply(p).multiply(k).multiply(y)}const x=u.clone().invert(),w=a.clone().invert();let A=e.clone().multiply(l).multiply(u).multiply(t).multiply(i).multiply(r).multiply(x).multiply(o).multiply(a).multiply(s).multiply(w);const T=new ri().copyPosition(A),C=c.clone().multiply(T);return f.copyPosition(C),A=f.clone().multiply(b),A.premultiply(c.invert()),A}function Phe(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Yk(n){return n.split(",").map(function(t){return parseFloat(t)})}function khe(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),Mo.decodeText(new Uint8Array(n,e,t))}function Gpt(n,e){for(let t=0,i=n.length,r=e.length;t<r;t++,i++)n[i]=e[t]}function Wpt(n,e,t,i){for(let r=t,s=0;r<i;r++,s++)n[s]=e[r];return n}function aQ(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}class pN extends Pht{constructor(e){super(e)}parse(e){function t(L){switch(L.image_type){case f:case m:(L.colormap_length>256||L.colormap_size!==24||L.colormap_type!==1)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case h:case p:case g:case v:L.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case d:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',L.image_type)}(L.width<=0||L.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),L.pixel_size!==8&&L.pixel_size!==16&&L.pixel_size!==24&&L.pixel_size!==32&&console.error('THREE.TGALoader: Invalid pixel size "%s".',L.pixel_size)}function i(L,G,H,F,X){let te,re;const ie=H.pixel_size>>3,le=H.width*H.height*ie;if(G&&(re=X.subarray(F,F+=H.colormap_length*(H.colormap_size>>3))),L){te=new Uint8Array(le);let ge,pe,ye,Oe=0;const Be=new Uint8Array(ie);for(;Oe<le;)if(ge=X[F++],pe=(ge&127)+1,ge&128){for(ye=0;ye<ie;++ye)Be[ye]=X[F++];for(ye=0;ye<pe;++ye)te.set(Be,Oe+ye*ie);Oe+=ie*pe}else{for(pe*=ie,ye=0;ye<pe;++ye)te[Oe+ye]=X[F++];Oe+=pe}}else te=X.subarray(F,F+=G?H.width*H.height:le);return{pixel_data:te,palettes:re}}function r(L,G,H,F,X,te,re,ie,le){const ge=le;let pe,ye=0,Oe,Be;const Ye=E.width;for(Be=G;Be!==F;Be+=H)for(Oe=X;Oe!==re;Oe+=te,ye++)pe=ie[ye],L[(Oe+Ye*Be)*4+3]=255,L[(Oe+Ye*Be)*4+2]=ge[pe*3+0],L[(Oe+Ye*Be)*4+1]=ge[pe*3+1],L[(Oe+Ye*Be)*4+0]=ge[pe*3+2];return L}function s(L,G,H,F,X,te,re,ie){let le,ge=0,pe,ye;const Oe=E.width;for(ye=G;ye!==F;ye+=H)for(pe=X;pe!==re;pe+=te,ge+=2)le=ie[ge+0]+(ie[ge+1]<<8),L[(pe+Oe*ye)*4+0]=(le&31744)>>7,L[(pe+Oe*ye)*4+1]=(le&992)>>2,L[(pe+Oe*ye)*4+2]=(le&31)<<3,L[(pe+Oe*ye)*4+3]=le&32768?0:255;return L}function a(L,G,H,F,X,te,re,ie){let le=0,ge,pe;const ye=E.width;for(pe=G;pe!==F;pe+=H)for(ge=X;ge!==re;ge+=te,le+=3)L[(ge+ye*pe)*4+3]=255,L[(ge+ye*pe)*4+2]=ie[le+0],L[(ge+ye*pe)*4+1]=ie[le+1],L[(ge+ye*pe)*4+0]=ie[le+2];return L}function o(L,G,H,F,X,te,re,ie){let le=0,ge,pe;const ye=E.width;for(pe=G;pe!==F;pe+=H)for(ge=X;ge!==re;ge+=te,le+=4)L[(ge+ye*pe)*4+2]=ie[le+0],L[(ge+ye*pe)*4+1]=ie[le+1],L[(ge+ye*pe)*4+0]=ie[le+2],L[(ge+ye*pe)*4+3]=ie[le+3];return L}function l(L,G,H,F,X,te,re,ie){let le,ge=0,pe,ye;const Oe=E.width;for(ye=G;ye!==F;ye+=H)for(pe=X;pe!==re;pe+=te,ge++)le=ie[ge],L[(pe+Oe*ye)*4+0]=le,L[(pe+Oe*ye)*4+1]=le,L[(pe+Oe*ye)*4+2]=le,L[(pe+Oe*ye)*4+3]=255;return L}function u(L,G,H,F,X,te,re,ie){let le=0,ge,pe;const ye=E.width;for(pe=G;pe!==F;pe+=H)for(ge=X;ge!==re;ge+=te,le+=2)L[(ge+ye*pe)*4+0]=ie[le+0],L[(ge+ye*pe)*4+1]=ie[le+0],L[(ge+ye*pe)*4+2]=ie[le+0],L[(ge+ye*pe)*4+3]=ie[le+1];return L}function c(L,G,H,F,X){let te,re,ie,le,ge,pe;switch((E.flags&_)>>y){default:case w:te=0,ie=1,ge=G,re=0,le=1,pe=H;break;case b:te=0,ie=1,ge=G,re=H-1,le=-1,pe=-1;break;case A:te=G-1,ie=-1,ge=-1,re=0,le=1,pe=H;break;case x:te=G-1,ie=-1,ge=-1,re=H-1,le=-1,pe=-1;break}if(O)switch(E.pixel_size){case 8:l(L,re,le,pe,te,ie,ge,F);break;case 16:u(L,re,le,pe,te,ie,ge,F);break;default:console.error("THREE.TGALoader: Format not supported.");break}else switch(E.pixel_size){case 8:r(L,re,le,pe,te,ie,ge,F,X);break;case 16:s(L,re,le,pe,te,ie,ge,F);break;case 24:a(L,re,le,pe,te,ie,ge,F);break;case 32:o(L,re,le,pe,te,ie,ge,F);break;default:console.error("THREE.TGALoader: Format not supported.");break}return L}const d=0,f=1,h=2,p=3,m=9,g=10,v=11,_=48,y=4,b=0,x=1,w=2,A=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let T=0;const C=new Uint8Array(e),E={id_length:C[T++],colormap_type:C[T++],image_type:C[T++],colormap_index:C[T++]|C[T++]<<8,colormap_length:C[T++]|C[T++]<<8,colormap_size:C[T++],origin:[C[T++]|C[T++]<<8,C[T++]|C[T++]<<8],width:C[T++]|C[T++]<<8,height:C[T++]|C[T++]<<8,pixel_size:C[T++],flags:C[T++]};t(E),E.id_length+T>e.length&&console.error("THREE.TGALoader: No data."),T+=E.id_length;let I=!1,k=!1,O=!1;switch(E.image_type){case m:I=!0,k=!0;break;case f:k=!0;break;case g:I=!0;break;case h:break;case v:I=!0,O=!0;break;case p:O=!0;break}const U=new Uint8Array(E.width*E.height*4),z=i(I,k,E,T,C);return c(U,E.width,E.height,z.pixel_data,z.palettes),{data:U,width:E.width,height:E.height,flipY:!0,generateMipmaps:!0,minFilter:Mh}}}class qpt extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=s.path===""?Mo.extractUrlBase(e):s.path,o=new Io(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}parse(e,t){function i(Me,Ee){const Ge=[],Ue=Me.childNodes;for(let qe=0,qt=Ue.length;qe<qt;qe++){const Qt=Ue[qe];Qt.nodeName===Ee&&Ge.push(Qt)}return Ge}function r(Me){if(Me.length===0)return[];const Ee=Me.trim().split(/\s+/),Ge=new Array(Ee.length);for(let Ue=0,qe=Ee.length;Ue<qe;Ue++)Ge[Ue]=Ee[Ue];return Ge}function s(Me){if(Me.length===0)return[];const Ee=Me.trim().split(/\s+/),Ge=new Array(Ee.length);for(let Ue=0,qe=Ee.length;Ue<qe;Ue++)Ge[Ue]=parseFloat(Ee[Ue]);return Ge}function a(Me){if(Me.length===0)return[];const Ee=Me.trim().split(/\s+/),Ge=new Array(Ee.length);for(let Ue=0,qe=Ee.length;Ue<qe;Ue++)Ge[Ue]=parseInt(Ee[Ue]);return Ge}function o(Me){return Me.substring(1)}function l(){return"three_default_"+uf++}function u(Me){return Object.keys(Me).length===0}function c(Me){return{unit:d(i(Me,"unit")[0]),upAxis:f(i(Me,"up_axis")[0])}}function d(Me){return Me!==void 0&&Me.hasAttribute("meter")===!0?parseFloat(Me.getAttribute("meter")):1}function f(Me){return Me!==void 0?Me.textContent:"Y_UP"}function h(Me,Ee,Ge,Ue){const qe=i(Me,Ee)[0];if(qe!==void 0){const qt=i(qe,Ge);for(let Qt=0;Qt<qt.length;Qt++)Ue(qt[Qt])}}function p(Me,Ee){for(const Ge in Me){const Ue=Me[Ge];Ue.build=Ee(Me[Ge])}}function m(Me,Ee){return Me.build!==void 0||(Me.build=Ee(Me)),Me.build}function g(Me){const Ee={sources:{},samplers:{},channels:{}};let Ge=!1;for(let Ue=0,qe=Me.childNodes.length;Ue<qe;Ue++){const qt=Me.childNodes[Ue];if(qt.nodeType!==1)continue;let Qt;switch(qt.nodeName){case"source":Qt=qt.getAttribute("id"),Ee.sources[Qt]=dt(qt);break;case"sampler":Qt=qt.getAttribute("id"),Ee.samplers[Qt]=v(qt);break;case"channel":Qt=qt.getAttribute("target"),Ee.channels[Qt]=_(qt);break;case"animation":g(qt),Ge=!0;break;default:console.log(qt)}}Ge===!1&&(_i.animations[Me.getAttribute("id")||bo.generateUUID()]=Ee)}function v(Me){const Ee={inputs:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=o(qe.getAttribute("source")),Qt=qe.getAttribute("semantic");Ee.inputs[Qt]=qt;break}}return Ee}function _(Me){const Ee={};let Ue=Me.getAttribute("target").split("/");const qe=Ue.shift();let qt=Ue.shift();const Qt=qt.indexOf("(")!==-1,Wn=qt.indexOf(".")!==-1;if(Wn)Ue=qt.split("."),qt=Ue.shift(),Ee.member=Ue.shift();else if(Qt){const yt=qt.split("(");qt=yt.shift();for(let xn=0;xn<yt.length;xn++)yt[xn]=parseInt(yt[xn].replace(/\)/,""));Ee.indices=yt}return Ee.id=qe,Ee.sid=qt,Ee.arraySyntax=Qt,Ee.memberSyntax=Wn,Ee.sampler=o(Me.getAttribute("source")),Ee}function y(Me){const Ee=[],Ge=Me.channels,Ue=Me.samplers,qe=Me.sources;for(const qt in Ge)if(Ge.hasOwnProperty(qt)){const Qt=Ge[qt],Wn=Ue[Qt.sampler],yt=Wn.inputs.INPUT,xn=Wn.inputs.OUTPUT,Jn=qe[yt],mn=qe[xn],pi=x(Qt,Jn,mn);E(pi,Ee)}return Ee}function b(Me){return m(_i.animations[Me],y)}function x(Me,Ee,Ge){const Ue=_i.nodes[Me.id],qe=yi(Ue.id),qt=Ue.transforms[Me.sid],Qt=Ue.matrix.clone().transpose();let Wn,yt,xn,Jn,mn,pi;const Xn={};switch(qt){case"matrix":for(xn=0,Jn=Ee.array.length;xn<Jn;xn++)if(Wn=Ee.array[xn],yt=xn*Ge.stride,Xn[Wn]===void 0&&(Xn[Wn]={}),Me.arraySyntax===!0){const Pr=Ge.array[yt],vn=Me.indices[0]+4*Me.indices[1];Xn[Wn][vn]=Pr}else for(mn=0,pi=Ge.stride;mn<pi;mn++)Xn[Wn][mn]=Ge.array[yt+mn];break;case"translate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break;case"rotate":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break;case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',qt);break}const li=w(Xn,Qt);return{name:qe.uuid,keyframes:li}}function w(Me,Ee){const Ge=[];for(const qe in Me)Ge.push({time:parseFloat(qe),value:Me[qe]});Ge.sort(Ue);for(let qe=0;qe<16;qe++)I(Ge,qe,Ee.elements[qe]);return Ge;function Ue(qe,qt){return qe.time-qt.time}}const A=new st,T=new st,C=new Xa;function E(Me,Ee){const Ge=Me.keyframes,Ue=Me.name,qe=[],qt=[],Qt=[],Wn=[];for(let yt=0,xn=Ge.length;yt<xn;yt++){const Jn=Ge[yt],mn=Jn.time,pi=Jn.value;Xe.fromArray(pi).transpose(),Xe.decompose(A,C,T),qe.push(mn),qt.push(A.x,A.y,A.z),Qt.push(C.x,C.y,C.z,C.w),Wn.push(T.x,T.y,T.z)}return qt.length>0&&Ee.push(new v0(Ue+".position",qe,qt)),Qt.length>0&&Ee.push(new hh(Ue+".quaternion",qe,Qt)),Wn.length>0&&Ee.push(new v0(Ue+".scale",qe,Wn)),Ee}function I(Me,Ee,Ge){let Ue,qe=!0,qt,Qt;for(qt=0,Qt=Me.length;qt<Qt;qt++)Ue=Me[qt],Ue.value[Ee]===void 0?Ue.value[Ee]=null:qe=!1;if(qe===!0)for(qt=0,Qt=Me.length;qt<Qt;qt++)Ue=Me[qt],Ue.value[Ee]=Ge;else k(Me,Ee)}function k(Me,Ee){let Ge,Ue;for(let qe=0,qt=Me.length;qe<qt;qe++){const Qt=Me[qe];if(Qt.value[Ee]===null){if(Ge=O(Me,qe,Ee),Ue=U(Me,qe,Ee),Ge===null){Qt.value[Ee]=Ue.value[Ee];continue}if(Ue===null){Qt.value[Ee]=Ge.value[Ee];continue}z(Qt,Ge,Ue,Ee)}}}function O(Me,Ee,Ge){for(;Ee>=0;){const Ue=Me[Ee];if(Ue.value[Ge]!==null)return Ue;Ee--}return null}function U(Me,Ee,Ge){for(;Ee<Me.length;){const Ue=Me[Ee];if(Ue.value[Ge]!==null)return Ue;Ee++}return null}function z(Me,Ee,Ge,Ue){if(Ge.time-Ee.time===0){Me.value[Ue]=Ee.value[Ue];return}Me.value[Ue]=(Me.time-Ee.time)*(Ge.value[Ue]-Ee.value[Ue])/(Ge.time-Ee.time)+Ee.value[Ue]}function L(Me){const Ee={name:Me.getAttribute("id")||"default",start:parseFloat(Me.getAttribute("start")||0),end:parseFloat(Me.getAttribute("end")||0),animations:[]};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"instance_animation":Ee.animations.push(o(qe.getAttribute("url")));break}}_i.clips[Me.getAttribute("id")]=Ee}function G(Me){const Ee=[],Ge=Me.name,Ue=Me.end-Me.start||-1,qe=Me.animations;for(let qt=0,Qt=qe.length;qt<Qt;qt++){const Wn=b(qe[qt]);for(let yt=0,xn=Wn.length;yt<xn;yt++)Ee.push(Wn[yt])}return new Qg(Ge,Ue,Ee)}function H(Me){return m(_i.clips[Me],G)}function F(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"skin":Ee.id=o(qe.getAttribute("source")),Ee.skin=X(qe);break;case"morph":Ee.id=o(qe.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");break}}_i.controllers[Me.getAttribute("id")]=Ee}function X(Me){const Ee={sources:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"bind_shape_matrix":Ee.bindShapeMatrix=s(qe.textContent);break;case"source":const qt=qe.getAttribute("id");Ee.sources[qt]=dt(qe);break;case"joints":Ee.joints=te(qe);break;case"vertex_weights":Ee.vertexWeights=re(qe);break}}return Ee}function te(Me){const Ee={inputs:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=qe.getAttribute("semantic"),Qt=o(qe.getAttribute("source"));Ee.inputs[qt]=Qt;break}}return Ee}function re(Me){const Ee={inputs:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=qe.getAttribute("semantic"),Qt=o(qe.getAttribute("source")),Wn=parseInt(qe.getAttribute("offset"));Ee.inputs[qt]={id:Qt,offset:Wn};break;case"vcount":Ee.vcount=a(qe.textContent);break;case"v":Ee.v=a(qe.textContent);break}}return Ee}function ie(Me){const Ee={id:Me.id},Ge=_i.geometries[Ee.id];return Me.skin!==void 0&&(Ee.skin=le(Me.skin),Ge.sources.skinIndices=Ee.skin.indices,Ge.sources.skinWeights=Ee.skin.weights),Ee}function le(Me){const Ge={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},Ue=Me.sources,qe=Me.vertexWeights,qt=qe.vcount,Qt=qe.v,Wn=qe.inputs.JOINT.offset,yt=qe.inputs.WEIGHT.offset,xn=Me.sources[Me.joints.inputs.JOINT],Jn=Me.sources[Me.joints.inputs.INV_BIND_MATRIX],mn=Ue[qe.inputs.WEIGHT.id].array;let pi=0,Xn,li,ai;for(Xn=0,ai=qt.length;Xn<ai;Xn++){const vn=qt[Xn],zi=[];for(li=0;li<vn;li++){const Gi=Qt[pi+Wn],Ar=Qt[pi+yt],Yr=mn[Ar];zi.push({index:Gi,weight:Yr}),pi+=2}for(zi.sort(Pr),li=0;li<4;li++){const Gi=zi[li];Gi!==void 0?(Ge.indices.array.push(Gi.index),Ge.weights.array.push(Gi.weight)):(Ge.indices.array.push(0),Ge.weights.array.push(0))}}for(Me.bindShapeMatrix?Ge.bindMatrix=new ri().fromArray(Me.bindShapeMatrix).transpose():Ge.bindMatrix=new ri().identity(),Xn=0,ai=xn.array.length;Xn<ai;Xn++){const vn=xn.array[Xn],zi=new ri().fromArray(Jn.array,Xn*Jn.stride).transpose();Ge.joints.push({name:vn,boneInverse:zi})}return Ge;function Pr(vn,zi){return zi.weight-vn.weight}}function ge(Me){return m(_i.controllers[Me],ie)}function pe(Me){const Ee={init_from:i(Me,"init_from")[0].textContent};_i.images[Me.getAttribute("id")]=Ee}function ye(Me){return Me.build!==void 0?Me.build:Me.init_from}function Oe(Me){const Ee=_i.images[Me];return Ee!==void 0?m(Ee,ye):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",Me),null)}function Be(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"profile_COMMON":Ee.profile=Ye(qe);break}}_i.effects[Me.getAttribute("id")]=Ee}function Ye(Me){const Ee={surfaces:{},samplers:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"newparam":Ze(qe,Ee);break;case"technique":Ee.technique=ce(qe);break;case"extra":Ee.extra=it(qe);break}}return Ee}function Ze(Me,Ee){const Ge=Me.getAttribute("sid");for(let Ue=0,qe=Me.childNodes.length;Ue<qe;Ue++){const qt=Me.childNodes[Ue];if(qt.nodeType===1)switch(qt.nodeName){case"surface":Ee.surfaces[Ge]=Q(qt);break;case"sampler2D":Ee.samplers[Ge]=me(qt);break}}}function Q(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"init_from":Ee.init_from=qe.textContent;break}}return Ee}function me(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"source":Ee.source=qe.textContent;break}}return Ee}function ce(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"constant":case"lambert":case"blinn":case"phong":Ee.type=qe.nodeName,Ee.parameters=je(qe);break;case"extra":Ee.extra=it(qe);break}}return Ee}function je(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":Ee[qe.nodeName]=Fe(qe);break;case"transparent":Ee[qe.nodeName]={opaque:qe.hasAttribute("opaque")?qe.getAttribute("opaque"):"A_ONE",data:Fe(qe)};break}}return Ee}function Fe(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"color":Ee[qe.nodeName]=s(qe.textContent);break;case"float":Ee[qe.nodeName]=parseFloat(qe.textContent);break;case"texture":Ee[qe.nodeName]={id:qe.getAttribute("texture"),extra:nt(qe)};break}}return Ee}function nt(Me){const Ee={technique:{}};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"extra":We(qe,Ee);break}}return Ee}function We(Me,Ee){for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"technique":Ke(qe,Ee);break}}}function Ke(Me,Ee){for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":Ee.technique[qe.nodeName]=parseFloat(qe.textContent);break;case"wrapU":case"wrapV":qe.textContent.toUpperCase()==="TRUE"?Ee.technique[qe.nodeName]=1:qe.textContent.toUpperCase()==="FALSE"?Ee.technique[qe.nodeName]=0:Ee.technique[qe.nodeName]=parseInt(qe.textContent);break;case"bump":Ee[qe.nodeName]=K(qe);break}}}function it(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"technique":Ee.technique=be(qe);break}}return Ee}function be(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"double_sided":Ee[qe.nodeName]=parseInt(qe.textContent);break;case"bump":Ee[qe.nodeName]=K(qe);break}}return Ee}function K(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"texture":Ee[qe.nodeName]={id:qe.getAttribute("texture"),texcoord:qe.getAttribute("texcoord"),extra:nt(qe)};break}}return Ee}function ne(Me){return Me}function Se(Me){return m(_i.effects[Me],ne)}function ze(Me){const Ee={name:Me.getAttribute("name")};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"instance_effect":Ee.url=o(qe.getAttribute("url"));break}}_i.materials[Me.getAttribute("id")]=Ee}function Je(Me){let Ee,Ge=Me.slice((Me.lastIndexOf(".")-1>>>0)+2);switch(Ge=Ge.toLowerCase(),Ge){case"tga":Ee=is;break;default:Ee=Os}return Ee}function Tt(Me){const Ee=Se(Me.url),Ge=Ee.profile.technique;let Ue;switch(Ge.type){case"phong":case"blinn":Ue=new Jf;break;case"lambert":Ue=new VU;break;default:Ue=new Fc;break}Ue.name=Me.name||"";function qe(yt,xn=null){const Jn=Ee.profile.samplers[yt.id];let mn=null;if(Jn!==void 0){const pi=Ee.profile.surfaces[Jn.source];mn=Oe(pi.init_from)}else console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),mn=Oe(yt.id);if(mn!==null){const pi=Je(mn);if(pi!==void 0){const Xn=pi.load(mn),li=yt.extra;if(li!==void 0&&li.technique!==void 0&&u(li.technique)===!1){const ai=li.technique;Xn.wrapS=ai.wrapU?Sl:ma,Xn.wrapT=ai.wrapV?Sl:ma,Xn.offset.set(ai.offsetU||0,ai.offsetV||0),Xn.repeat.set(ai.repeatU||1,ai.repeatV||1)}else Xn.wrapS=Sl,Xn.wrapT=Sl;return xn!==null&&(Xn.encoding=xn),Xn}else return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",mn),null}else return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",yt.id),null}const qt=Ge.parameters;for(const yt in qt){const xn=qt[yt];switch(yt){case"diffuse":xn.color&&Ue.color.fromArray(xn.color),xn.texture&&(Ue.map=qe(xn.texture,Zi));break;case"specular":xn.color&&Ue.specular&&Ue.specular.fromArray(xn.color),xn.texture&&(Ue.specularMap=qe(xn.texture));break;case"bump":xn.texture&&(Ue.normalMap=qe(xn.texture));break;case"ambient":xn.texture&&(Ue.lightMap=qe(xn.texture,Zi));break;case"shininess":xn.float&&Ue.shininess&&(Ue.shininess=xn.float);break;case"emission":xn.color&&Ue.emissive&&Ue.emissive.fromArray(xn.color),xn.texture&&(Ue.emissiveMap=qe(xn.texture,Zi));break}}Ue.color.convertSRGBToLinear(),Ue.specular&&Ue.specular.convertSRGBToLinear(),Ue.emissive&&Ue.emissive.convertSRGBToLinear();let Qt=qt.transparent,Wn=qt.transparency;if(Wn===void 0&&Qt&&(Wn={float:1}),Qt===void 0&&Wn&&(Qt={opaque:"A_ONE",data:{color:[1,1,1,1]}}),Qt&&Wn)if(Qt.data.texture)Ue.transparent=!0;else{const yt=Qt.data.color;switch(Qt.opaque){case"A_ONE":Ue.opacity=yt[3]*Wn.float;break;case"RGB_ZERO":Ue.opacity=1-yt[0]*Wn.float;break;case"A_ZERO":Ue.opacity=1-yt[3]*Wn.float;break;case"RGB_ONE":Ue.opacity=yt[0]*Wn.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',Qt.opaque)}Ue.opacity<1&&(Ue.transparent=!0)}if(Ge.extra!==void 0&&Ge.extra.technique!==void 0){const yt=Ge.extra.technique;for(const xn in yt){const Jn=yt[xn];switch(xn){case"double_sided":Ue.side=Jn===1?h0:f0;break;case"bump":Ue.normalMap=qe(Jn.texture),Ue.normalScale=new on(1,1);break}}}return Ue}function At(Me){return m(_i.materials[Me],Tt)}function Re(Me){const Ee={name:Me.getAttribute("name")};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"optics":Ee.optics=wt(qe);break}}_i.cameras[Me.getAttribute("id")]=Ee}function wt(Me){for(let Ee=0;Ee<Me.childNodes.length;Ee++){const Ge=Me.childNodes[Ee];switch(Ge.nodeName){case"technique_common":return vt(Ge)}}return{}}function vt(Me){const Ee={};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];switch(Ue.nodeName){case"perspective":case"orthographic":Ee.technique=Ue.nodeName,Ee.parameters=q(Ue);break}}return Ee}function q(Me){const Ee={};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];switch(Ue.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":Ee[Ue.nodeName]=parseFloat(Ue.textContent);break}}return Ee}function xe(Me){let Ee;switch(Me.optics.technique){case"perspective":Ee=new ha(Me.optics.parameters.yfov,Me.optics.parameters.aspect_ratio,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;case"orthographic":let Ge=Me.optics.parameters.ymag,Ue=Me.optics.parameters.xmag;const qe=Me.optics.parameters.aspect_ratio;Ue=Ue===void 0?Ge*qe:Ue,Ge=Ge===void 0?Ue/qe:Ge,Ue*=.5,Ge*=.5,Ee=new Pb(-Ue,Ue,Ge,-Ge,Me.optics.parameters.znear,Me.optics.parameters.zfar);break;default:Ee=new ha;break}return Ee.name=Me.name||"",Ee}function ve(Me){const Ee=_i.cameras[Me];return Ee!==void 0?m(Ee,xe):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",Me),null)}function ke(Me){let Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"technique_common":Ee=we(qe);break}}_i.lights[Me.getAttribute("id")]=Ee}function we(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"directional":case"point":case"spot":case"ambient":Ee.technique=qe.nodeName,Ee.parameters=De(qe)}}return Ee}function De(Me){const Ee={};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"color":const qt=s(qe.textContent);Ee.color=new Fn().fromArray(qt).convertSRGBToLinear();break;case"falloff_angle":Ee.falloffAngle=parseFloat(qe.textContent);break;case"quadratic_attenuation":const Qt=parseFloat(qe.textContent);Ee.distance=Qt?Math.sqrt(1/Qt):0;break}}return Ee}function xt(Me){let Ee;switch(Me.technique){case"directional":Ee=new VT;break;case"point":Ee=new Zg;break;case"spot":Ee=new sR;break;case"ambient":Ee=new aR;break}return Me.parameters.color&&Ee.color.copy(Me.parameters.color),Me.parameters.distance&&(Ee.distance=Me.parameters.distance),Ee}function Pe(Me){const Ee=_i.lights[Me];return Ee!==void 0?m(Ee,xt):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",Me),null)}function Dt(Me){const Ee={name:Me.getAttribute("name"),sources:{},vertices:{},primitives:[]},Ge=i(Me,"mesh")[0];if(Ge!==void 0){for(let Ue=0;Ue<Ge.childNodes.length;Ue++){const qe=Ge.childNodes[Ue];if(qe.nodeType!==1)continue;const qt=qe.getAttribute("id");switch(qe.nodeName){case"source":Ee.sources[qt]=dt(qe);break;case"vertices":Ee.vertices=Mt(qe);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",qe.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":Ee.primitives.push(jt(qe));break;default:console.log(qe)}}_i.geometries[Me.getAttribute("id")]=Ee}}function dt(Me){const Ee={array:[],stride:3};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"float_array":Ee.array=s(Ue.textContent);break;case"Name_array":Ee.array=r(Ue.textContent);break;case"technique_common":const qe=i(Ue,"accessor")[0];qe!==void 0&&(Ee.stride=parseInt(qe.getAttribute("stride")));break}}return Ee}function Mt(Me){const Ee={};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];Ue.nodeType===1&&(Ee[Ue.getAttribute("semantic")]=o(Ue.getAttribute("source")))}return Ee}function jt(Me){const Ee={type:Me.nodeName,material:Me.getAttribute("material"),count:parseInt(Me.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let Ge=0,Ue=Me.childNodes.length;Ge<Ue;Ge++){const qe=Me.childNodes[Ge];if(qe.nodeType===1)switch(qe.nodeName){case"input":const qt=o(qe.getAttribute("source")),Qt=qe.getAttribute("semantic"),Wn=parseInt(qe.getAttribute("offset")),yt=parseInt(qe.getAttribute("set")),xn=yt>0?Qt+yt:Qt;Ee.inputs[xn]={id:qt,offset:Wn},Ee.stride=Math.max(Ee.stride,Wn+1),Qt==="TEXCOORD"&&(Ee.hasUV=!0);break;case"vcount":Ee.vcount=a(qe.textContent);break;case"p":Ee.p=a(qe.textContent);break}}return Ee}function Ft(Me){const Ee={};for(let Ge=0;Ge<Me.length;Ge++){const Ue=Me[Ge];Ee[Ue.type]===void 0&&(Ee[Ue.type]=[]),Ee[Ue.type].push(Ue)}return Ee}function Sn(Me){let Ee=0;for(let Ge=0,Ue=Me.length;Ge<Ue;Ge++)Me[Ge].hasUV===!0&&Ee++;Ee>0&&Ee<Me.length&&(Me.uvsNeedsFix=!0)}function Pn(Me){const Ee={},Ge=Me.sources,Ue=Me.vertices,qe=Me.primitives;if(qe.length===0)return{};const qt=Ft(qe);for(const Qt in qt){const Wn=qt[Qt];Sn(Wn),Ee[Qt]=Ti(Wn,Ge,Ue)}return Ee}function Ti(Me,Ee,Ge){const Ue={},qe={array:[],stride:0},qt={array:[],stride:0},Qt={array:[],stride:0},Wn={array:[],stride:0},yt={array:[],stride:0},xn={array:[],stride:4},Jn={array:[],stride:4},mn=new cr,pi=[];let Xn=0;for(let li=0;li<Me.length;li++){const ai=Me[li],Pr=ai.inputs;let vn=0;switch(ai.type){case"lines":case"linestrips":vn=ai.count*2;break;case"triangles":vn=ai.count*3;break;case"polylist":for(let zi=0;zi<ai.count;zi++){const Gi=ai.vcount[zi];switch(Gi){case 3:vn+=3;break;case 4:vn+=6;break;default:vn+=(Gi-2)*3;break}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",ai.type)}mn.addGroup(Xn,vn,li),Xn+=vn,ai.material&&pi.push(ai.material);for(const zi in Pr){const Gi=Pr[zi];switch(zi){case"VERTEX":for(const Ar in Ge){const Yr=Ge[Ar];switch(Ar){case"POSITION":const td=qe.array.length;if(jn(ai,Ee[Yr],Gi.offset,qe.array),qe.stride=Ee[Yr].stride,Ee.skinWeights&&Ee.skinIndices&&(jn(ai,Ee.skinIndices,Gi.offset,xn.array),jn(ai,Ee.skinWeights,Gi.offset,Jn.array)),ai.hasUV===!1&&Me.uvsNeedsFix===!0){const Qb=(qe.array.length-td)/qe.stride;for(let hv=0;hv<Qb;hv++)Qt.array.push(0,0)}break;case"NORMAL":jn(ai,Ee[Yr],Gi.offset,qt.array),qt.stride=Ee[Yr].stride;break;case"COLOR":jn(ai,Ee[Yr],Gi.offset,yt.array),yt.stride=Ee[Yr].stride;break;case"TEXCOORD":jn(ai,Ee[Yr],Gi.offset,Qt.array),Qt.stride=Ee[Yr].stride;break;case"TEXCOORD1":jn(ai,Ee[Yr],Gi.offset,Wn.array),Qt.stride=Ee[Yr].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',Ar)}}break;case"NORMAL":jn(ai,Ee[Gi.id],Gi.offset,qt.array),qt.stride=Ee[Gi.id].stride;break;case"COLOR":jn(ai,Ee[Gi.id],Gi.offset,yt.array,!0),yt.stride=Ee[Gi.id].stride;break;case"TEXCOORD":jn(ai,Ee[Gi.id],Gi.offset,Qt.array),Qt.stride=Ee[Gi.id].stride;break;case"TEXCOORD1":jn(ai,Ee[Gi.id],Gi.offset,Wn.array),Wn.stride=Ee[Gi.id].stride;break}}}return qe.array.length>0&&mn.setAttribute("position",new Gn(qe.array,qe.stride)),qt.array.length>0&&mn.setAttribute("normal",new Gn(qt.array,qt.stride)),yt.array.length>0&&mn.setAttribute("color",new Gn(yt.array,yt.stride)),Qt.array.length>0&&mn.setAttribute("uv",new Gn(Qt.array,Qt.stride)),Wn.array.length>0&&mn.setAttribute("uv2",new Gn(Wn.array,Wn.stride)),xn.array.length>0&&mn.setAttribute("skinIndex",new Gn(xn.array,xn.stride)),Jn.array.length>0&&mn.setAttribute("skinWeight",new Gn(Jn.array,Jn.stride)),Ue.data=mn,Ue.type=Me[0].type,Ue.materialKeys=pi,Ue}function jn(Me,Ee,Ge,Ue,qe=!1){const qt=Me.p,Qt=Me.stride,Wn=Me.vcount;function yt(mn){let pi=qt[mn+Ge]*Jn;const Xn=pi+Jn;for(;pi<Xn;pi++)Ue.push(xn[pi]);if(qe){const li=Ue.length-Jn-1;mr.setRGB(Ue[li+0],Ue[li+1],Ue[li+2]).convertSRGBToLinear(),Ue[li+0]=mr.r,Ue[li+1]=mr.g,Ue[li+2]=mr.b}}const xn=Ee.array,Jn=Ee.stride;if(Me.vcount!==void 0){let mn=0;for(let pi=0,Xn=Wn.length;pi<Xn;pi++){const li=Wn[pi];if(li===4){const ai=mn+Qt*0,Pr=mn+Qt*1,vn=mn+Qt*2,zi=mn+Qt*3;yt(ai),yt(Pr),yt(zi),yt(Pr),yt(vn),yt(zi)}else if(li===3){const ai=mn+Qt*0,Pr=mn+Qt*1,vn=mn+Qt*2;yt(ai),yt(Pr),yt(vn)}else if(li>4)for(let ai=1,Pr=li-2;ai<=Pr;ai++){const vn=mn+Qt*0,zi=mn+Qt*ai,Gi=mn+Qt*(ai+1);yt(vn),yt(zi),yt(Gi)}mn+=Qt*li}}else for(let mn=0,pi=qt.length;mn<pi;mn+=Qt)yt(mn)}function dr(Me){return m(_i.geometries[Me],Pn)}function fi(Me){const Ee={name:Me.getAttribute("name")||"",joints:{},links:[]};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"technique_common":en(Ue,Ee);break}}_i.kinematicsModels[Me.getAttribute("id")]=Ee}function J(Me){return Me.build!==void 0?Me.build:Me}function ue(Me){return m(_i.kinematicsModels[Me],J)}function en(Me,Ee){for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"joint":Ee.joints[Ue.getAttribute("sid")]=Ie(Ue);break;case"link":Ee.links.push(kt(Ue));break}}}function Ie(Me){let Ee;for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"prismatic":case"revolute":Ee=de(Ue);break}}return Ee}function de(Me){const Ee={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",axis:new st,limits:{min:0,max:0},type:Me.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"axis":const qe=s(Ue.textContent);Ee.axis.fromArray(qe);break;case"limits":const qt=Ue.getElementsByTagName("max")[0],Qt=Ue.getElementsByTagName("min")[0];Ee.limits.max=parseFloat(qt.textContent),Ee.limits.min=parseFloat(Qt.textContent);break}}return Ee.limits.min>=Ee.limits.max&&(Ee.static=!0),Ee.middlePosition=(Ee.limits.min+Ee.limits.max)/2,Ee}function kt(Me){const Ee={sid:Me.getAttribute("sid"),name:Me.getAttribute("name")||"",attachments:[],transforms:[]};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"attachment_full":Ee.attachments.push(Ct(Ue));break;case"matrix":case"translate":case"rotate":Ee.transforms.push(Ut(Ue));break}}return Ee}function Ct(Me){const Ee={joint:Me.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"link":Ee.links.push(kt(Ue));break;case"matrix":case"translate":case"rotate":Ee.transforms.push(Ut(Ue));break}}return Ee}function Ut(Me){const Ee={type:Me.nodeName},Ge=s(Me.textContent);switch(Ee.type){case"matrix":Ee.obj=new ri,Ee.obj.fromArray(Ge).transpose();break;case"translate":Ee.obj=new st,Ee.obj.fromArray(Ge);break;case"rotate":Ee.obj=new st,Ee.obj.fromArray(Ge),Ee.angle=bo.degToRad(Ge[3]);break}return Ee}function ut(Me){const Ee={name:Me.getAttribute("name")||"",rigidBodies:{}};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"rigid_body":Ee.rigidBodies[Ue.getAttribute("name")]={},Pt(Ue,Ee.rigidBodies[Ue.getAttribute("name")]);break}}_i.physicsModels[Me.getAttribute("id")]=Ee}function Pt(Me,Ee){for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"technique_common":Xt(Ue,Ee);break}}}function Xt(Me,Ee){for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"inertia":Ee.inertia=s(Ue.textContent);break;case"mass":Ee.mass=s(Ue.textContent)[0];break}}}function kn(Me){const Ee={bindJointAxis:[]};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"bind_joint_axis":Ee.bindJointAxis.push(Kn(Ue));break}}_i.kinematicsScenes[o(Me.getAttribute("url"))]=Ee}function Kn(Me){const Ee={target:Me.getAttribute("target").split("/").pop()};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType===1)switch(Ue.nodeName){case"axis":const qe=Ue.getElementsByTagName("param")[0];Ee.axis=qe.textContent;const qt=Ee.axis.split("inst_").pop().split("axis")[0];Ee.jointIndex=qt.substring(0,qt.length-1);break}}return Ee}function rt(Me){return Me.build!==void 0?Me.build:Me}function ci(Me){return m(_i.kinematicsScenes[Me],rt)}function pt(){const Me=Object.keys(_i.kinematicsModels)[0],Ee=Object.keys(_i.kinematicsScenes)[0],Ge=Object.keys(_i.visualScenes)[0];if(Me===void 0||Ee===void 0)return;const Ue=ue(Me),qe=ci(Ee),qt=Zn(Ge),Qt=qe.bindJointAxis,Wn={};for(let Jn=0,mn=Qt.length;Jn<mn;Jn++){const pi=Qt[Jn],Xn=Li.querySelector('[sid="'+pi.target+'"]');if(Xn){const li=Xn.parentElement;yt(pi.jointIndex,li)}}function yt(Jn,mn){const pi=mn.getAttribute("name"),Xn=Ue.joints[Jn];qt.traverse(function(li){li.name===pi&&(Wn[Jn]={object:li,transforms:Le(mn),joint:Xn,position:Xn.zeroPosition})})}const xn=new ri;Ta={joints:Ue&&Ue.joints,getJointValue:function(Jn){const mn=Wn[Jn];if(mn)return mn.position;console.warn("THREE.ColladaLoader: Joint "+Jn+" doesn't exist.")},setJointValue:function(Jn,mn){const pi=Wn[Jn];if(pi){const Xn=pi.joint;if(mn>Xn.limits.max||mn<Xn.limits.min)console.warn("THREE.ColladaLoader: Joint "+Jn+" value "+mn+" outside of limits (min: "+Xn.limits.min+", max: "+Xn.limits.max+").");else if(Xn.static)console.warn("THREE.ColladaLoader: Joint "+Jn+" is static.");else{const li=pi.object,ai=Xn.axis,Pr=pi.transforms;Xe.identity();for(let vn=0;vn<Pr.length;vn++){const zi=Pr[vn];if(zi.sid&&zi.sid.indexOf(Jn)!==-1)switch(Xn.type){case"revolute":Xe.multiply(xn.makeRotationAxis(ai,bo.degToRad(mn)));break;case"prismatic":Xe.multiply(xn.makeTranslation(ai.x*mn,ai.y*mn,ai.z*mn));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+Xn.type);break}else switch(zi.type){case"matrix":Xe.multiply(zi.obj);break;case"translate":Xe.multiply(xn.makeTranslation(zi.obj.x,zi.obj.y,zi.obj.z));break;case"scale":Xe.scale(zi.obj);break;case"rotate":Xe.multiply(xn.makeRotationAxis(zi.obj,zi.angle));break}}li.matrix.copy(Xe),li.matrix.decompose(li.position,li.quaternion,li.scale),Wn[Jn].position=mn}}else console.log("THREE.ColladaLoader: "+Jn+" does not exist.")}}}function Le(Me){const Ee=[],Ge=Li.querySelector('[id="'+Me.id+'"]');for(let Ue=0;Ue<Ge.childNodes.length;Ue++){const qe=Ge.childNodes[Ue];if(qe.nodeType!==1)continue;let qt,Qt;switch(qe.nodeName){case"matrix":qt=s(qe.textContent);const Wn=new ri().fromArray(qt).transpose();Ee.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:Wn});break;case"translate":case"scale":qt=s(qe.textContent),Qt=new st().fromArray(qt),Ee.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:Qt});break;case"rotate":qt=s(qe.textContent),Qt=new st().fromArray(qt);const yt=bo.degToRad(qt[3]);Ee.push({sid:qe.getAttribute("sid"),type:qe.nodeName,obj:Qt,angle:yt});break}}return Ee}function Et(Me){const Ee=Me.getElementsByTagName("node");for(let Ge=0;Ge<Ee.length;Ge++){const Ue=Ee[Ge];Ue.hasAttribute("id")===!1&&Ue.setAttribute("id",l())}}const Xe=new ri,_t=new st;function mt(Me){const Ee={name:Me.getAttribute("name")||"",type:Me.getAttribute("type"),id:Me.getAttribute("id"),sid:Me.getAttribute("sid"),matrix:new ri,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];if(Ue.nodeType!==1)continue;let qe;switch(Ue.nodeName){case"node":Ee.nodes.push(Ue.getAttribute("id")),mt(Ue);break;case"instance_camera":Ee.instanceCameras.push(o(Ue.getAttribute("url")));break;case"instance_controller":Ee.instanceControllers.push(Ot(Ue));break;case"instance_light":Ee.instanceLights.push(o(Ue.getAttribute("url")));break;case"instance_geometry":Ee.instanceGeometries.push(Ot(Ue));break;case"instance_node":Ee.instanceNodes.push(o(Ue.getAttribute("url")));break;case"matrix":qe=s(Ue.textContent),Ee.matrix.multiply(Xe.fromArray(qe).transpose()),Ee.transforms[Ue.getAttribute("sid")]=Ue.nodeName;break;case"translate":qe=s(Ue.textContent),_t.fromArray(qe),Ee.matrix.multiply(Xe.makeTranslation(_t.x,_t.y,_t.z)),Ee.transforms[Ue.getAttribute("sid")]=Ue.nodeName;break;case"rotate":qe=s(Ue.textContent);const qt=bo.degToRad(qe[3]);Ee.matrix.multiply(Xe.makeRotationAxis(_t.fromArray(qe),qt)),Ee.transforms[Ue.getAttribute("sid")]=Ue.nodeName;break;case"scale":qe=s(Ue.textContent),Ee.matrix.scale(_t.fromArray(qe)),Ee.transforms[Ue.getAttribute("sid")]=Ue.nodeName;break;case"extra":break;default:console.log(Ue)}}return Bn(Ee.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",Ee.id):_i.nodes[Ee.id]=Ee,Ee}function Ot(Me){const Ee={id:o(Me.getAttribute("url")),materials:{},skeletons:[]};for(let Ge=0;Ge<Me.childNodes.length;Ge++){const Ue=Me.childNodes[Ge];switch(Ue.nodeName){case"bind_material":const qe=Ue.getElementsByTagName("instance_material");for(let qt=0;qt<qe.length;qt++){const Qt=qe[qt],Wn=Qt.getAttribute("symbol"),yt=Qt.getAttribute("target");Ee.materials[Wn]=o(yt)}break;case"skeleton":Ee.skeletons.push(o(Ue.textContent));break}}return Ee}function gn(Me,Ee){const Ge=[],Ue=[];let qe,qt,Qt;for(qe=0;qe<Me.length;qe++){const xn=Me[qe];let Jn;if(Bn(xn))Jn=yi(xn),dn(Jn,Ee,Ge);else if(Di(xn)){const pi=_i.visualScenes[xn].children;for(let Xn=0;Xn<pi.length;Xn++){const li=pi[Xn];if(li.type==="JOINT"){const ai=yi(li.id);dn(ai,Ee,Ge)}}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",xn)}for(qe=0;qe<Ee.length;qe++)for(qt=0;qt<Ge.length;qt++)if(Qt=Ge[qt],Qt.bone.name===Ee[qe].name){Ue[qe]=Qt,Qt.processed=!0;break}for(qe=0;qe<Ge.length;qe++)Qt=Ge[qe],Qt.processed===!1&&(Ue.push(Qt),Qt.processed=!0);const Wn=[],yt=[];for(qe=0;qe<Ue.length;qe++)Qt=Ue[qe],Wn.push(Qt.bone),yt.push(Qt.boneInverse);return new Lb(Wn,yt)}function dn(Me,Ee,Ge){Me.traverse(function(Ue){if(Ue.isBone===!0){let qe;for(let qt=0;qt<Ee.length;qt++){const Qt=Ee[qt];if(Qt.name===Ue.name){qe=Qt.boneInverse;break}}qe===void 0&&(qe=new ri),Ge.push({bone:Ue,boneInverse:qe,processed:!1})}})}function En(Me){const Ee=[],Ge=Me.matrix,Ue=Me.nodes,qe=Me.type,qt=Me.instanceCameras,Qt=Me.instanceControllers,Wn=Me.instanceLights,yt=Me.instanceGeometries,xn=Me.instanceNodes;for(let mn=0,pi=Ue.length;mn<pi;mn++)Ee.push(yi(Ue[mn]));for(let mn=0,pi=qt.length;mn<pi;mn++){const Xn=ve(qt[mn]);Xn!==null&&Ee.push(Xn.clone())}for(let mn=0,pi=Qt.length;mn<pi;mn++){const Xn=Qt[mn],li=ge(Xn.id),ai=dr(li.id),Pr=Un(ai,Xn.materials),vn=Xn.skeletons,zi=li.skin.joints,Gi=gn(vn,zi);for(let Ar=0,Yr=Pr.length;Ar<Yr;Ar++){const td=Pr[Ar];td.isSkinnedMesh&&(td.bind(Gi,li.skin.bindMatrix),td.normalizeSkinWeights()),Ee.push(td)}}for(let mn=0,pi=Wn.length;mn<pi;mn++){const Xn=Pe(Wn[mn]);Xn!==null&&Ee.push(Xn.clone())}for(let mn=0,pi=yt.length;mn<pi;mn++){const Xn=yt[mn],li=dr(Xn.id),ai=Un(li,Xn.materials);for(let Pr=0,vn=ai.length;Pr<vn;Pr++)Ee.push(ai[Pr])}for(let mn=0,pi=xn.length;mn<pi;mn++)Ee.push(yi(xn[mn]).clone());let Jn;if(Ue.length===0&&Ee.length===1)Jn=Ee[0];else{Jn=qe==="JOINT"?new V_:new xl;for(let mn=0;mn<Ee.length;mn++)Jn.add(Ee[mn])}return Jn.name=qe==="JOINT"?Me.sid:Me.name,Jn.matrix.copy(Ge),Jn.matrix.decompose(Jn.position,Jn.quaternion,Jn.scale),Jn}const ni=new Fc({color:16711935});function bn(Me,Ee){const Ge=[];for(let Ue=0,qe=Me.length;Ue<qe;Ue++){const qt=Ee[Me[Ue]];qt===void 0?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",Me[Ue]),Ge.push(ni)):Ge.push(At(qt))}return Ge}function Un(Me,Ee){const Ge=[];for(const Ue in Me){const qe=Me[Ue],qt=bn(qe.materialKeys,Ee);qt.length===0&&(Ue==="lines"||Ue==="linestrips"?qt.push(new Wc):qt.push(new Jf));const Qt=qe.data.attributes.skinIndex!==void 0,Wn=qt.length===1?qt[0]:qt;let yt;switch(Ue){case"lines":yt=new Yg(qe.data,Wn);break;case"linestrips":yt=new Ob(qe.data,Wn);break;case"triangles":case"polylist":Qt?yt=new iR(qe.data,Wn):yt=new ga(qe.data,Wn);break}Ge.push(yt)}return Ge}function Bn(Me){return _i.nodes[Me]!==void 0}function yi(Me){return m(_i.nodes[Me],En)}function Qi(Me){const Ee={name:Me.getAttribute("name"),children:[]};Et(Me);const Ge=i(Me,"node");for(let Ue=0;Ue<Ge.length;Ue++)Ee.children.push(mt(Ge[Ue]));_i.visualScenes[Me.getAttribute("id")]=Ee}function Ii(Me){const Ee=new xl;Ee.name=Me.name;const Ge=Me.children;for(let Ue=0;Ue<Ge.length;Ue++){const qe=Ge[Ue];Ee.add(yi(qe.id))}return Ee}function Di(Me){return _i.visualScenes[Me]!==void 0}function Zn(Me){return m(_i.visualScenes[Me],Ii)}function xr(Me){const Ee=i(Me,"instance_visual_scene")[0];return Zn(o(Ee.getAttribute("url")))}function rr(){const Me=_i.clips;if(u(Me)===!0){if(u(_i.animations)===!1){const Ee=[];for(const Ge in _i.animations){const Ue=b(Ge);for(let qe=0,qt=Ue.length;qe<qt;qe++)Ee.push(Ue[qe])}rs.push(new Qg("default",-1,Ee))}}else for(const Ee in Me)rs.push(H(Ee))}function wa(Me){let Ee="";const Ge=[Me];for(;Ge.length;){const Ue=Ge.shift();Ue.nodeType===Node.TEXT_NODE?Ee+=Ue.textContent:(Ee+=`
`,Ge.push.apply(Ge,Ue.childNodes))}return Ee.trim()}if(e.length===0)return{scene:new LU};const ro=new DOMParser().parseFromString(e,"application/xml"),Li=i(ro,"COLLADA")[0],Ys=ro.getElementsByTagName("parsererror")[0];if(Ys!==void 0){const Me=i(Ys,"div")[0];let Ee;return Me?Ee=Me.textContent:Ee=wa(Ys),console.error(`THREE.ColladaLoader: Failed to parse collada file.
`,Ee),null}const wr=Li.getAttribute("version");console.log("THREE.ColladaLoader: File version",wr);const ra=c(i(Li,"asset")[0]),Os=new W_(this.manager);Os.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);let is;pN&&(is=new pN(this.manager),is.setPath(this.resourcePath||t));const mr=new Fn,rs=[];let Ta={},uf=0;const _i={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};h(Li,"library_animations","animation",g),h(Li,"library_animation_clips","animation_clip",L),h(Li,"library_controllers","controller",F),h(Li,"library_images","image",pe),h(Li,"library_effects","effect",Be),h(Li,"library_materials","material",ze),h(Li,"library_cameras","camera",Re),h(Li,"library_lights","light",ke),h(Li,"library_geometries","geometry",Dt),h(Li,"library_nodes","node",mt),h(Li,"library_visual_scenes","visual_scene",Qi),h(Li,"library_kinematics_models","kinematics_model",fi),h(Li,"library_physics_models","physics_model",ut),h(Li,"scene","instance_kinematics_scene",kn),p(_i.animations,y),p(_i.clips,G),p(_i.controllers,ie),p(_i.images,ye),p(_i.effects,ne),p(_i.materials,Tt),p(_i.cameras,xe),p(_i.lights,xt),p(_i.geometries,Pn),p(_i.visualScenes,Ii),rr(),pt();const al=xr(i(Li,"scene")[0]);return al.animations=rs,ra.upAxis==="Z_UP"&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),al.quaternion.setFromEuler(new Wf(-Math.PI/2,0,0))),al.scale.multiplyScalar(ra.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),rs},kinematics:Ta,library:_i,scene:al}}}class jpt extends io{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Zpt(t)}),this.register(function(t){return new s0t(t)}),this.register(function(t){return new a0t(t)}),this.register(function(t){return new e0t(t)}),this.register(function(t){return new t0t(t)}),this.register(function(t){return new n0t(t)}),this.register(function(t){return new i0t(t)}),this.register(function(t){return new Qpt(t)}),this.register(function(t){return new r0t(t)}),this.register(function(t){return new Jpt(t)}),this.register(function(t){return new Xpt(t)}),this.register(function(t){return new o0t(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Mo.extractUrlBase(e),this.manager.itemStart(e);const o=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Io(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,a,function(c){t(c),s.manager.itemEnd(e)},o)}catch(c){o(c)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=e;else if(Mo.decodeText(new Uint8Array(e,0,4))===Lhe){try{a[or.KHR_BINARY_GLTF]=new l0t(e)}catch(d){r&&r(d);return}s=a[or.KHR_BINARY_GLTF].content}else s=Mo.decodeText(new Uint8Array(e));const l=JSON.parse(s);if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const u=new S0t(l,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let c=0;c<this.pluginCallbacks.length;c++){const d=this.pluginCallbacks[c](u);o[d.name]=d,a[d.name]=!0}if(l.extensionsUsed)for(let c=0;c<l.extensionsUsed.length;++c){const d=l.extensionsUsed[c],f=l.extensionsRequired||[];switch(d){case or.KHR_MATERIALS_UNLIT:a[d]=new Ypt;break;case or.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[d]=new d0t;break;case or.KHR_DRACO_MESH_COMPRESSION:a[d]=new u0t(l,this.dracoLoader);break;case or.KHR_TEXTURE_TRANSFORM:a[d]=new c0t;break;case or.KHR_MESH_QUANTIZATION:a[d]=new f0t;break;default:f.indexOf(d)>=0&&o[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Kpt(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const or={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Xpt{constructor(e){this.parser=e,this.name=or.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new Fn(16777215);l.color!==void 0&&c.fromArray(l.color);const d=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new VT(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new Zg(c),u.distance=d;break;case"spot":u=new sR(c),u.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class Ypt{constructor(){this.name=or.KHR_MATERIALS_UNLIT}getMaterialType(){return Fc}extendParams(e,t,i){const r=[];e.color=new Fn(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Zi))}return Promise.all(r)}}class Qpt{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class Zpt{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new on(o,o)}return Promise.all(s)}}class Jpt{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class e0t{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Fn(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Zi)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class t0t{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class n0t{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Fn(o[0],o[1],o[2]),Promise.all(s)}}class i0t{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class r0t{constructor(e){this.parser=e,this.name=or.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:M0}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Fn(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,Zi)),Promise.all(s)}}class s0t{constructor(e){this.parser=e,this.name=or.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class a0t{constructor(e){this.parser=e,this.name=or.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class o0t{constructor(e){this.name=or.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([s,a.ready]).then(function(o){const l=r.byteOffset||0,u=r.byteLength||0,c=r.count,d=r.byteStride,f=new ArrayBuffer(c*d),h=new Uint8Array(o[0],l,u);return a.decodeGltfBuffer(new Uint8Array(f),c,d,h,r.mode,r.filter),f})}else return null}}const Lhe="glTF",px=12,oQ={JSON:1313821514,BIN:5130562};class l0t{constructor(e){this.name=or.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,px);if(this.header={magic:Mo.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Lhe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-px,r=new DataView(e,px);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===oQ.JSON){const l=new Uint8Array(e,px+s,a);this.content=Mo.decodeText(l)}else if(o===oQ.BIN){const l=px+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class u0t{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=or.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},u={};for(const c in a){const d=gN[c]||c.toLowerCase();o[d]=a[c]}for(const c in e.attributes){const d=gN[c]||c.toLowerCase();if(a[c]!==void 0){const f=i.accessors[e.attributes[c]],h=Qw[f.componentType];u[d]=h,l[d]=f.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(d){r.decodeDracoFile(c,function(f){for(const h in f.attributes){const p=f.attributes[h],m=l[h];m!==void 0&&(p.normalized=m)}d(f)},o,u)})})}}class c0t{constructor(){this.name=or.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return t.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class mN extends Nb{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),o={specular:{value:new Fn().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(l){for(const u in o)l.uniforms[u]=o[u];l.fragmentShader=l.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(l){o.specular.value=l}},specularMap:{get:function(){return o.specularMap.value},set:function(l){o.specularMap.value=l,l?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return o.glossiness.value},set:function(l){o.glossiness.value=l}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(l){o.glossinessMap.value=l,l?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class d0t{constructor(){this.name=or.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return mN}extendParams(e,t,i){const r=t.extensions[this.name];e.color=new Fn(1,1,1),e.opacity=1;const s=[];if(Array.isArray(r.diffuseFactor)){const a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(r.diffuseTexture!==void 0&&s.push(i.assignTexture(e,"map",r.diffuseTexture,Zi)),e.emissive=new Fn(0,0,0),e.glossiness=r.glossinessFactor!==void 0?r.glossinessFactor:1,e.specular=new Fn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),r.specularGlossinessTexture!==void 0){const a=r.specularGlossinessTexture;s.push(i.assignTexture(e,"glossinessMap",a)),s.push(i.assignTexture(e,"specularMap",a,Zi))}return Promise.all(s)}createMaterial(e){const t=new mN(e);return t.fog=!0,t.color=e.color,t.map=e.map===void 0?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=e.aoMap===void 0?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=e.emissiveIntensity===void 0?1:e.emissiveIntensity,t.emissiveMap=e.emissiveMap===void 0?null:e.emissiveMap,t.bumpMap=e.bumpMap===void 0?null:e.bumpMap,t.bumpScale=1,t.normalMap=e.normalMap===void 0?null:e.normalMap,t.normalMapType=ov,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=e.specularMap===void 0?null:e.specularMap,t.specular=e.specular,t.glossinessMap=e.glossinessMap===void 0?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=e.envMap===void 0?null:e.envMap,t.envMapIntensity=1,t}}class f0t{constructor(){this.name=or.KHR_MESH_QUANTIZATION}}class Ohe extends HT{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,u=o*3,c=r-t,d=(i-t)/c,f=d*d,h=f*d,p=e*u,m=p-u,g=-2*h+3*f,v=h-f,_=1-g,y=v-f+d;for(let b=0;b!==o;b++){const x=a[m+b+o],w=a[m+b+l]*c,A=a[p+b+o],T=a[p+b]*c;s[b]=_*x+y*w+g*A+v*T}return s}}const h0t=new Xa;class p0t extends Ohe{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return h0t.fromArray(s).normalize().toArray(s),s}}const wf={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Qw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},lQ={9728:Ia,9729:ta,9984:$4,9985:TU,9986:G4,9987:Mh},uQ={33071:ma,33648:Nw,10497:Sl},cQ={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},gN={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},sp={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},m0t={CUBICSPLINE:void 0,LINEAR:z_,STEP:Fw},Qk={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function g0t(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Nb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:f0})),n.DefaultMaterial}function mx(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Lm(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function v0t(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const d=e[u];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(r=!0),d.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let u=0,c=e.length;u<c;u++){const d=e[u];if(i){const f=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):n.attributes.position;a.push(f)}if(r){const f=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):n.attributes.normal;o.push(f)}if(s){const f=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(u){const c=u[0],d=u[1],f=u[2];return i&&(n.morphAttributes.position=c),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}function y0t(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function _0t(n){const e=n.extensions&&n.extensions[or.KHR_DRACO_MESH_COMPRESSION];let t;return e?t="draco:"+e.bufferView+":"+e.indices+":"+dQ(e.attributes):t=n.indices+":"+dQ(n.attributes)+":"+n.mode,t}function dQ(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function vN(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function b0t(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class S0t{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Kpt,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new W_(this.options.manager):this.textureLoader=new $ht(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Io(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};mx(s,o,r),Lm(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[u,c]of a.children.entries())s(c,o.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[or.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Mo.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0)return Promise.resolve(null);const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=cQ[r.type],u=Qw[r.componentType],c=u.BYTES_PER_ELEMENT,d=c*l,f=r.byteOffset||0,h=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let m,g;if(h&&h!==d){const v=Math.floor(f/h),_="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let y=t.cache.get(_);y||(m=new u(o,v*h,r.count*h/c),y=new OU(m,h/c),t.cache.add(_,y)),g=new Xg(y,l,f%h/c,p)}else o===null?m=new u(r.count*l):m=new u(o,f,r.count*l),g=new Ps(m,l,p);if(r.sparse!==void 0){const v=cQ.SCALAR,_=Qw[r.sparse.indices.componentType],y=r.sparse.indices.byteOffset||0,b=r.sparse.values.byteOffset||0,x=new _(a[1],y,r.sparse.count*v),w=new u(a[2],b,r.sparse.count*l);o!==null&&(g=new Ps(g.array.slice(),g.itemSize,g.normalized));for(let A=0,T=x.length;A<T;A++){const C=x[A];if(g.setX(C,w[A*l]),l>=2&&g.setY(C,w[A*l+1]),l>=3&&g.setZ(C,w[A*l+2]),l>=4&&g.setW(C,w[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(c){c.flipY=!1,a.name&&(c.name=a.name);const f=(s.samplers||{})[a.sampler]||{};return c.magFilter=lQ[f.magFilter]||ta,c.minFilter=lQ[f.minFilter]||Mh,c.wrapS=uQ[f.wrapS]||Sl,c.wrapT=uQ[f.wrapT]||Sl,r.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",u=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(d){u=!0;const f=new Blob([d],{type:a.mimeType});return l=o.createObjectURL(f),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(d){return new Promise(function(f,h){let p=f;t.isImageBitmapLoader===!0&&(p=function(m){const g=new eo(m);g.needsUpdate=!0,f(g)}),t.load(Mo.resolveURL(d,s.path),p,void 0,h)})}).then(function(d){return u===!0&&o.revokeObjectURL(l),d.userData.mimeType=a.mimeType||b0t(a.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=c,c}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(i.texCoord!==void 0&&i.texCoord!=0&&!(t==="aoMap"&&i.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+i.texCoord+" for texture "+t+" not yet supported."),s.extensions[or.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[or.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[or.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&(a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new ug,ia.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Wc,ia.prototype.copy.call(l,i),l.color.copy(i.color),this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";i.isGLTFSpecularGlossinessMaterial&&(o+="specular-glossiness:"),r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}i.aoMap&&t.attributes.uv2===void 0&&t.attributes.uv!==void 0&&t.setAttribute("uv2",t.attributes.uv),e.material=i}getMaterialType(){return Nb}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},u=[];if(l[or.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const d=r[or.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=d.getMaterialType(),u.push(d.extendParams(o,s,t))}else if(l[or.KHR_MATERIALS_UNLIT]){const d=r[or.KHR_MATERIALS_UNLIT];a=d.getMaterialType(),u.push(d.extendParams(o,s,t))}else{const d=s.pbrMetallicRoughness||{};if(o.color=new Fn(1,1,1),o.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;o.color.fromArray(f),o.opacity=f[3]}d.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",d.baseColorTexture,Zi)),o.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,o.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",d.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",d.metallicRoughnessTexture))),a=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=h0);const c=s.alphaMode||Qk.OPAQUE;if(c===Qk.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===Qk.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==Fc&&(u.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new on(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;o.normalScale.set(d,d)}return s.occlusionTexture!==void 0&&a!==Fc&&(u.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==Fc&&(o.emissive=new Fn().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==Fc&&u.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,Zi)),Promise.all(u).then(function(){let d;return a===mN?d=r[or.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(o):d=new a(o),s.name&&(d.name=s.name),Lm(d,s),t.associations.set(d,{materials:e}),s.extensions&&mx(r,d,s),d})}createUniqueName(e){const t=vr.sanitizeNodeName(e||"");let i=t;for(let r=1;this.nodeNamesUsed[i];++r)i=t+"_"+r;return this.nodeNamesUsed[i]=!0,i}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[or.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return fQ(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],c=_0t(u),d=r[c];if(d)a.push(d.promise);else{let f;u.extensions&&u.extensions[or.KHR_DRACO_MESH_COMPRESSION]?f=s(u):f=fQ(new cr,u,t),r[c]={primitive:u,promise:f},a.push(f)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,u=a.length;l<u;l++){const c=a[l].material===void 0?g0t(this.cache):this.getDependency("material",a[l].material);o.push(c)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],d=[];for(let h=0,p=c.length;h<p;h++){const m=c[h],g=a[h];let v;const _=u[h];if(g.mode===wf.TRIANGLES||g.mode===wf.TRIANGLE_STRIP||g.mode===wf.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new iR(m,_):new ga(m,_),v.isSkinnedMesh===!0&&!v.geometry.attributes.skinWeight.normalized&&v.normalizeSkinWeights(),g.mode===wf.TRIANGLE_STRIP?v.geometry=hQ(v.geometry,vot):g.mode===wf.TRIANGLE_FAN&&(v.geometry=hQ(v.geometry,afe));else if(g.mode===wf.LINES)v=new Yg(m,_);else if(g.mode===wf.LINE_STRIP)v=new Ob(m,_);else if(g.mode===wf.LINE_LOOP)v=new Pfe(m,_);else if(g.mode===wf.POINTS)v=new x2(m,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&y0t(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Lm(v,s),g.extensions&&mx(r,v,g),t.assignFinalMaterial(v),d.push(v)}for(let h=0,p=d.length;h<p;h++)t.associations.set(d[h],{meshes:e,primitives:h});if(d.length===1)return d[0];const f=new xl;t.associations.set(f,{meshes:e});for(let h=0,p=d.length;h<p;h++)f.add(d[h]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new ha(bo.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new Pb(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Lm(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i={joints:t.joints};return t.inverseBindMatrices===void 0?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then(function(r){return i.inverseBindMatrices=r,i})}loadAnimation(e){const i=this.json.animations[e],r=[],s=[],a=[],o=[],l=[];for(let u=0,c=i.channels.length;u<c;u++){const d=i.channels[u],f=i.samplers[d.sampler],h=d.target,p=h.node!==void 0?h.node:h.id,m=i.parameters!==void 0?i.parameters[f.input]:f.input,g=i.parameters!==void 0?i.parameters[f.output]:f.output;r.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),a.push(this.getDependency("accessor",g)),o.push(f),l.push(h)}return Promise.all([Promise.all(r),Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(u){const c=u[0],d=u[1],f=u[2],h=u[3],p=u[4],m=[];for(let v=0,_=c.length;v<_;v++){const y=c[v],b=d[v],x=f[v],w=h[v],A=p[v];if(y===void 0)continue;y.updateMatrix();let T;switch(sp[A.path]){case sp.weights:T=$_;break;case sp.rotation:T=hh;break;case sp.position:case sp.scale:default:T=v0;break}const C=y.name?y.name:y.uuid,E=w.interpolation!==void 0?m0t[w.interpolation]:z_,I=[];sp[A.path]===sp.weights?y.traverse(function(O){O.morphTargetInfluences&&I.push(O.name?O.name:O.uuid)}):I.push(C);let k=x.array;if(x.normalized){const O=vN(k.constructor),U=new Float32Array(k.length);for(let z=0,L=k.length;z<L;z++)U[z]=k[z]*O;k=U}for(let O=0,U=I.length;O<U;O++){const z=new T(I[O]+"."+sp[A.path],b.array,k,E);w.interpolation==="CUBICSPLINE"&&(z.createInterpolant=function(G){const H=this instanceof hh?p0t:Ohe;return new H(this.times,this.values,this.getValueSize()/3,G)},z.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),m.push(z)}}const g=i.name?i.name:"animation_"+e;return new Qg(g,void 0,m)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,u=r.weights.length;l<u;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this.extensions,r=this,s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"";return function(){const o=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),Promise.all(o)}().then(function(o){let l;if(s.isBone===!0?l=new V_:o.length>1?l=new xl:o.length===1?l=o[0]:l=new ys,l!==o[0])for(let u=0,c=o.length;u<c;u++)l.add(o[u]);if(s.name&&(l.userData.name=s.name,l.name=a),Lm(l,s),s.extensions&&mx(i,l,s),s.matrix!==void 0){const u=new ri;u.fromArray(s.matrix),l.applyMatrix4(u)}else s.translation!==void 0&&l.position.fromArray(s.translation),s.rotation!==void 0&&l.quaternion.fromArray(s.rotation),s.scale!==void 0&&l.scale.fromArray(s.scale);return r.associations.has(l)||r.associations.set(l,{}),r.associations.get(l).nodes=e,l})}loadScene(e){const t=this.json,i=this.extensions,r=this.json.scenes[e],s=this,a=new xl;r.name&&(a.name=s.createUniqueName(r.name)),Lm(a,r),r.extensions&&mx(i,a,r);const o=r.nodes||[],l=[];for(let u=0,c=o.length;u<c;u++)l.push(Nhe(o[u],a,t,s));return Promise.all(l).then(function(){const u=c=>{const d=new Map;for(const[f,h]of s.associations)(f instanceof ia||f instanceof eo)&&d.set(f,h);return c.traverse(f=>{const h=s.associations.get(f);h!=null&&d.set(f,h)}),d};return s.associations=u(a),a})}}function Nhe(n,e,t,i){const r=t.nodes[n];return i.getDependency("node",n).then(function(s){if(r.skin===void 0)return s;let a;return i.getDependency("skin",r.skin).then(function(o){a=o;const l=[];for(let u=0,c=a.joints.length;u<c;u++)l.push(i.getDependency("node",a.joints[u]));return Promise.all(l)}).then(function(o){return s.traverse(function(l){if(!l.isMesh)return;const u=[],c=[];for(let d=0,f=o.length;d<f;d++){const h=o[d];if(h){u.push(h);const p=new ri;a.inverseBindMatrices!==void 0&&p.fromArray(a.inverseBindMatrices.array,d*16),c.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',a.joints[d])}l.bind(new Lb(u,c),l.matrixWorld)}),s})}).then(function(s){e.add(s);const a=[];if(r.children){const o=r.children;for(let l=0,u=o.length;l<u;l++){const c=o[l];a.push(Nhe(c,s,t,i))}}return Promise.all(a)})}function x0t(n,e,t){const i=e.attributes,r=new lv;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,u=o.max;if(l!==void 0&&u!==void 0){if(r.set(new st(l[0],l[1],l[2]),new st(u[0],u[1],u[2])),o.normalized){const c=vN(Qw[o.componentType]);r.min.multiplyScalar(c),r.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new st,l=new st;for(let u=0,c=s.length;u<c;u++){const d=s[u];if(d.POSITION!==void 0){const f=t.json.accessors[d.POSITION],h=f.min,p=f.max;if(h!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(h[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(h[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(h[2]),Math.abs(p[2]))),f.normalized){const m=vN(Qw[f.componentType]);l.multiplyScalar(m)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new uv;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function fQ(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=gN[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Lm(n,e),x0t(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?v0t(n,e.targets,t):n})}function hQ(n,e){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(e===afe)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s}const w0t=/^[og]\s*(.+)?/,T0t=/^mtllib /,C0t=/^usemtl /,A0t=/^usemap /,pQ=/\s+/,mQ=new st,Zk=new st,gQ=new st,vQ=new st,Cu=new st,LE=new Fn;function E0t(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=t!==!1;return}const i=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const o={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(o),o},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&s.groupEnd===-1&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&typeof i.clone=="function"){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseNormalIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/3)*3},parseUVIndex:function(e,t){const i=parseInt(e,10);return(i>=0?i-1:i+t/2)*2},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;mQ.fromArray(r,e),Zk.fromArray(r,t),gQ.fromArray(r,i),Cu.subVectors(gQ,Zk),vQ.subVectors(mQ,Zk),Cu.cross(vQ),Cu.normalize(),s.push(Cu.x,Cu.y,Cu.z),s.push(Cu.x,Cu.y,Cu.z),s.push(Cu.x,Cu.y,Cu.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;r[e]!==void 0&&s.push(r[e+0],r[e+1],r[e+2]),r[t]!==void 0&&s.push(r[t+0],r[t+1],r[t+2]),r[i]!==void 0&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,a,o,l,u){const c=this.vertices.length;let d=this.parseVertexIndex(e,c),f=this.parseVertexIndex(t,c),h=this.parseVertexIndex(i,c);if(this.addVertex(d,f,h),this.addColor(d,f,h),o!==void 0&&o!==""){const p=this.normals.length;d=this.parseNormalIndex(o,p),f=this.parseNormalIndex(l,p),h=this.parseNormalIndex(u,p),this.addNormal(d,f,h)}else this.addFaceNormal(d,f,h);if(r!==void 0&&r!==""){const p=this.uvs.length;d=this.parseUVIndex(r,p),f=this.parseUVIndex(s,p),h=this.parseUVIndex(a,p),this.addUV(d,f,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class M0t extends io{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,a=new Io(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new E0t;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const i=e.split(`
`);let r=[];for(let o=0,l=i.length;o<l;o++){const u=i[o].trimStart();if(u.length===0)continue;const c=u.charAt(0);if(c!=="#")if(c==="v"){const d=u.split(pQ);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(LE.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(LE.r,LE.g,LE.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]));break}}else if(c==="f"){const f=u.slice(1).trim().split(pQ),h=[];for(let m=0,g=f.length;m<g;m++){const v=f[m];if(v.length>0){const _=v.split("/");h.push(_)}}const p=h[0];for(let m=1,g=h.length-1;m<g;m++){const v=h[m],_=h[m+1];t.addFace(p[0],v[0],_[0],p[1],v[1],_[1],p[2],v[2],_[2])}}else if(c==="l"){const d=u.substring(1).trim().split(" ");let f=[];const h=[];if(u.indexOf("/")===-1)f=d;else for(let p=0,m=d.length;p<m;p++){const g=d[p].split("/");g[0]!==""&&f.push(g[0]),g[1]!==""&&h.push(g[1])}t.addLineGeometry(f,h)}else if(c==="p"){const f=u.slice(1).trim().split(" ");t.addPointGeometry(f)}else if((r=w0t.exec(u))!==null){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(C0t.test(u))t.object.startMaterial(u.substring(7).trim(),t.materialLibraries);else if(T0t.test(u))t.materialLibraries.push(u.substring(7).trim());else if(A0t.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(r=u.split(" "),r.length>1){const f=r[1].trim().toLowerCase();t.object.smooth=f!=="0"&&f!=="off"}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}t.finalize();const s=new xl;if(s.materialLibraries=[].concat(t.materialLibraries),!(t.objects.length===1&&t.objects[0].geometry.vertices.length===0)===!0)for(let o=0,l=t.objects.length;o<l;o++){const u=t.objects[o],c=u.geometry,d=u.materials,f=c.type==="Line",h=c.type==="Points";let p=!1;if(c.vertices.length===0)continue;const m=new cr;m.setAttribute("position",new Gn(c.vertices,3)),c.normals.length>0&&m.setAttribute("normal",new Gn(c.normals,3)),c.colors.length>0&&(p=!0,m.setAttribute("color",new Gn(c.colors,3))),c.hasUVIndices===!0&&m.setAttribute("uv",new Gn(c.uvs,2));const g=[];for(let _=0,y=d.length;_<y;_++){const b=d[_],x=b.name+"_"+b.smooth+"_"+p;let w=t.materials[x];if(this.materials!==null){if(w=this.materials.create(b.name),f&&w&&!(w instanceof Wc)){const A=new Wc;ia.prototype.copy.call(A,w),A.color.copy(w.color),w=A}else if(h&&w&&!(w instanceof ug)){const A=new ug({size:10,sizeAttenuation:!1});ia.prototype.copy.call(A,w),A.color.copy(w.color),A.map=w.map,w=A}}w===void 0&&(f?w=new Wc:h?w=new ug({size:1,sizeAttenuation:!1}):w=new Jf,w.name=b.name,w.flatShading=!b.smooth,w.vertexColors=p,t.materials[x]=w),g.push(w)}let v;if(g.length>1){for(let _=0,y=d.length;_<y;_++){const b=d[_];m.addGroup(b.groupStart,b.groupCount,_)}f?v=new Yg(m,g):h?v=new x2(m,g):v=new ga(m,g)}else f?v=new Yg(m,g[0]):h?v=new x2(m,g[0]):v=new ga(m,g[0]);v.name=u.name,s.add(v)}else if(t.vertices.length>0){const o=new ug({size:1,sizeAttenuation:!1}),l=new cr;l.setAttribute("position",new Gn(t.vertices,3)),t.colors.length>0&&t.colors[0]!==void 0&&(l.setAttribute("color",new Gn(t.colors,3)),o.vertexColors=!0);const u=new x2(l,o);s.add(u)}return s}}class I0t extends Rht{constructor(e){super(e)}parse(e,t){const i={mipmaps:[],width:0,height:0,format:null,mipmapCount:1},r=542327876,s=131072,a=512,o=1024,l=2048,u=4096,c=8192,d=16384,f=32768;function h(ge){return ge.charCodeAt(0)+(ge.charCodeAt(1)<<8)+(ge.charCodeAt(2)<<16)+(ge.charCodeAt(3)<<24)}function p(ge){return String.fromCharCode(ge&255,ge>>8&255,ge>>16&255,ge>>24&255)}function m(ge,pe,ye,Oe){const Be=ye*Oe*4,Ye=new Uint8Array(ge,pe,Be),Ze=new Uint8Array(Be);let Q=0,me=0;for(let ce=0;ce<Oe;ce++)for(let je=0;je<ye;je++){const Fe=Ye[me];me++;const nt=Ye[me];me++;const We=Ye[me];me++;const Ke=Ye[me];me++,Ze[Q]=We,Q++,Ze[Q]=nt,Q++,Ze[Q]=Fe,Q++,Ze[Q]=Ke,Q++}return Ze}const g=h("DXT1"),v=h("DXT3"),_=h("DXT5"),y=h("ETC1"),b=31,x=0,w=1,A=2,T=3,C=4,E=7,I=21,k=22,O=23,U=24,z=25,L=26,G=28,H=new Int32Array(e,0,b);if(H[x]!==r)return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),i;let F;const X=H[I];let te=!1;switch(X){case g:F=8,i.format=ZM;break;case v:F=16,i.format=JM;break;case _:F=16,i.format=e3;break;case y:F=8,i.format=sfe;break;default:if(H[k]===32&&H[O]&16711680&&H[U]&65280&&H[z]&255&&H[L]&4278190080)te=!0,F=64,i.format=Wu;else return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",p(X)),i}i.mipmapCount=1,H[A]&s&&t!==!1&&(i.mipmapCount=Math.max(1,H[E]));const re=H[G];if(i.isCubemap=!!(re&a),i.isCubemap&&(!(re&o)||!(re&l)||!(re&u)||!(re&c)||!(re&d)||!(re&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),i;i.width=H[C],i.height=H[T];let ie=H[w]+4;const le=i.isCubemap?6:1;for(let ge=0;ge<le;ge++){let pe=i.width,ye=i.height;for(let Oe=0;Oe<i.mipmapCount;Oe++){let Be,Ye;te?(Be=m(e,ie,pe,ye),Ye=Be.length):(Ye=Math.max(4,pe)/4*Math.max(4,ye)/4*F,Be=new Uint8Array(e,ie,Ye));const Ze={data:Be,width:pe,height:ye};i.mipmaps.push(Ze),ie+=Ye,pe=Math.max(pe>>1,1),ye=Math.max(ye>>1,1)}}return i}}class D0t{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,d){return u.push(c,d),this},this.removeHandler=function(c){const d=u.indexOf(c);return d!==-1&&u.splice(d,2),this},this.getHandler=function(c){for(let d=0,f=u.length;d<f;d+=2){const h=u[d],p=u[d+1];if(h.global&&(h.lastIndex=0),h.test(c))return p}return null}}}const OE=new Fn;class R0t extends io{constructor(e){super(e),this.propertyNameMapping={}}load(e,t,i,r){const s=this,a=new Io(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setPropertyNameMapping(e){this.propertyNameMapping=e}parse(e){function t(h){const p=/^ply([\s\S]*)end_header(\r\n|\r|\n)/;let m="",g=0;const v=p.exec(h);v!==null&&(m=v[1],g=new Blob([v[0]]).size);const _={comments:[],elements:[],headerLength:g,objInfo:""},y=m.split(/\r\n|\r|\n/);let b;function x(w,A){const T={type:w[0]};return T.type==="list"?(T.name=w[3],T.countType=w[1],T.itemType=w[2]):T.name=w[1],T.name in A&&(T.name=A[T.name]),T}for(let w=0;w<y.length;w++){let A=y[w];if(A=A.trim(),A==="")continue;const T=A.split(/\s+/),C=T.shift();switch(A=T.join(" "),C){case"format":_.format=T[0],_.version=T[1];break;case"comment":_.comments.push(A);break;case"element":b!==void 0&&_.elements.push(b),b={},b.name=T[0],b.count=parseInt(T[1]),b.properties=[];break;case"property":b.properties.push(x(T,f.propertyNameMapping));break;case"obj_info":_.objInfo=A;break;default:console.log("unhandled",C,T)}}return b!==void 0&&_.elements.push(b),_}function i(h,p){switch(p){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(h);case"float":case"double":case"float32":case"float64":return parseFloat(h)}}function r(h,p){const m=p.split(/\s+/),g={};for(let v=0;v<h.length;v++)if(h[v].type==="list"){const _=[],y=i(m.shift(),h[v].countType);for(let b=0;b<y;b++)_.push(i(m.shift(),h[v].itemType));g[h[v].name]=_}else g[h[v].name]=i(m.shift(),h[v].type);return g}function s(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]};let g;const v=/end_header\s([\s\S]*)$/;let _="";(g=v.exec(h))!==null&&(_=g[1]);const y=_.split(/\r\n|\r|\n/);let b=0,x=0;for(let w=0;w<y.length;w++){let A=y[w];if(A=A.trim(),A==="")continue;x>=p.elements[b].count&&(b++,x=0);const T=r(p.elements[b].properties,A);o(m,p.elements[b].name,T),x++}return a(m)}function a(h){let p=new cr;return h.indices.length>0&&p.setIndex(h.indices),p.setAttribute("position",new Gn(h.vertices,3)),h.normals.length>0&&p.setAttribute("normal",new Gn(h.normals,3)),h.uvs.length>0&&p.setAttribute("uv",new Gn(h.uvs,2)),h.colors.length>0&&p.setAttribute("color",new Gn(h.colors,3)),h.faceVertexUvs.length>0&&(p=p.toNonIndexed(),p.setAttribute("uv",new Gn(h.faceVertexUvs,2))),p.computeBoundingSphere(),p}function o(h,p,m){function g(k){for(let O=0,U=k.length;O<U;O++){const z=k[O];if(z in m)return z}return null}const v=g(["x","px","posx"])||"x",_=g(["y","py","posy"])||"y",y=g(["z","pz","posz"])||"z",b=g(["nx","normalx"]),x=g(["ny","normaly"]),w=g(["nz","normalz"]),A=g(["s","u","texture_u","tx"]),T=g(["t","v","texture_v","ty"]),C=g(["red","diffuse_red","r","diffuse_r"]),E=g(["green","diffuse_green","g","diffuse_g"]),I=g(["blue","diffuse_blue","b","diffuse_b"]);if(p==="vertex")h.vertices.push(m[v],m[_],m[y]),b!==null&&x!==null&&w!==null&&h.normals.push(m[b],m[x],m[w]),A!==null&&T!==null&&h.uvs.push(m[A],m[T]),C!==null&&E!==null&&I!==null&&(OE.setRGB(m[C]/255,m[E]/255,m[I]/255).convertSRGBToLinear(),h.colors.push(OE.r,OE.g,OE.b));else if(p==="face"){const k=m.vertex_indices||m.vertex_index,O=m.texcoord;k.length===3?(h.indices.push(k[0],k[1],k[2]),O&&O.length===6&&(h.faceVertexUvs.push(O[0],O[1]),h.faceVertexUvs.push(O[2],O[3]),h.faceVertexUvs.push(O[4],O[5]))):k.length===4&&(h.indices.push(k[0],k[1],k[3]),h.indices.push(k[1],k[2],k[3]))}}function l(h,p,m,g){switch(m){case"int8":case"char":return[h.getInt8(p),1];case"uint8":case"uchar":return[h.getUint8(p),1];case"int16":case"short":return[h.getInt16(p,g),2];case"uint16":case"ushort":return[h.getUint16(p,g),2];case"int32":case"int":return[h.getInt32(p,g),4];case"uint32":case"uint":return[h.getUint32(p,g),4];case"float32":case"float":return[h.getFloat32(p,g),4];case"float64":case"double":return[h.getFloat64(p,g),8]}}function u(h,p,m,g){const v={};let _,y=0;for(let b=0;b<m.length;b++)if(m[b].type==="list"){const x=[];_=l(h,p+y,m[b].countType,g);const w=_[0];y+=_[1];for(let A=0;A<w;A++)_=l(h,p+y,m[b].itemType,g),x.push(_[0]),y+=_[1];v[m[b].name]=x}else _=l(h,p+y,m[b].type,g),v[m[b].name]=_[0],y+=_[1];return[v,y]}function c(h,p){const m={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},g=p.format==="binary_little_endian",v=new DataView(h,p.headerLength);let _,y=0;for(let b=0;b<p.elements.length;b++)for(let x=0;x<p.elements[b].count;x++){_=u(v,y,p.elements[b].properties,g),y+=_[1];const w=_[0];o(m,p.elements[b].name,w)}return a(m)}let d;const f=this;if(e instanceof ArrayBuffer){const h=Mo.decodeText(new Uint8Array(e)),p=t(h);d=p.format==="ascii"?s(h,p):c(e,p)}else d=s(e,t(e));return d}}class P0t extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new Io(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(o))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){function t(u){const c=new DataView(u),d=32/8*3+32/8*3*3+16/8,f=c.getUint32(80,!0);if(80+32/8+f*d===c.byteLength)return!0;const p=[115,111,108,105,100];for(let m=0;m<5;m++)if(i(p,c,m))return!1;return!0}function i(u,c,d){for(let f=0,h=u.length;f<h;f++)if(u[f]!==c.getUint8(d+f))return!1;return!0}function r(u){const c=new DataView(u),d=c.getUint32(80,!0);let f,h,p,m=!1,g,v,_,y,b;for(let E=0;E<80-10;E++)c.getUint32(E,!1)==1129270351&&c.getUint8(E+4)==82&&c.getUint8(E+5)==61&&(m=!0,g=new Float32Array(d*3*3),v=c.getUint8(E+6)/255,_=c.getUint8(E+7)/255,y=c.getUint8(E+8)/255,b=c.getUint8(E+9)/255);const x=84,w=12*4+2,A=new cr,T=new Float32Array(d*3*3),C=new Float32Array(d*3*3);for(let E=0;E<d;E++){const I=x+E*w,k=c.getFloat32(I,!0),O=c.getFloat32(I+4,!0),U=c.getFloat32(I+8,!0);if(m){const z=c.getUint16(I+48,!0);z&32768?(f=v,h=_,p=y):(f=(z&31)/31,h=(z>>5&31)/31,p=(z>>10&31)/31)}for(let z=1;z<=3;z++){const L=I+z*12,G=E*3*3+(z-1)*3;T[G]=c.getFloat32(L,!0),T[G+1]=c.getFloat32(L+4,!0),T[G+2]=c.getFloat32(L+8,!0),C[G]=k,C[G+1]=O,C[G+2]=U,m&&(g[G]=f,g[G+1]=h,g[G+2]=p)}}return A.setAttribute("position",new Ps(T,3)),A.setAttribute("normal",new Ps(C,3)),m&&(A.setAttribute("color",new Ps(g,3)),A.hasColors=!0,A.alpha=b),A}function s(u){const c=new cr,d=/solid([\s\S]*?)endsolid/g,f=/facet([\s\S]*?)endfacet/g;let h=0;const p=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,m=new RegExp("vertex"+p+p+p,"g"),g=new RegExp("normal"+p+p+p,"g"),v=[],_=[],y=new st;let b,x=0,w=0,A=0;for(;(b=d.exec(u))!==null;){w=A;const T=b[0];for(;(b=f.exec(T))!==null;){let I=0,k=0;const O=b[0];for(;(b=g.exec(O))!==null;)y.x=parseFloat(b[1]),y.y=parseFloat(b[2]),y.z=parseFloat(b[3]),k++;for(;(b=m.exec(O))!==null;)v.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])),_.push(y.x,y.y,y.z),I++,A++;k!==1&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+h),I!==3&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+h),h++}const C=w,E=A-w;c.addGroup(C,E,x),x++}return c.setAttribute("position",new Gn(v,3)),c.setAttribute("normal",new Gn(_,3)),c}function a(u){return typeof u!="string"?Mo.decodeText(new Uint8Array(u)):u}function o(u){if(typeof u=="string"){const c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d)&255;return c.buffer||c}else return u}const l=o(e);return t(l)?r(l):s(a(e))}}class k0t extends io{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Mo.extractUrlBase(e):this.path,o=new Io(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{t(s.parse(l,a))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split(`
`);let r={};const s=/\s+/,a={};for(let l=0;l<i.length;l++){let u=i[l];if(u=u.trim(),u.length===0||u.charAt(0)==="#")continue;const c=u.indexOf(" ");let d=c>=0?u.substring(0,c):u;d=d.toLowerCase();let f=c>=0?u.substring(c+1):"";if(f=f.trim(),d==="newmtl")r={name:f},a[f]=r;else if(d==="ka"||d==="kd"||d==="ks"||d==="ke"){const h=f.split(s,3);r[d]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else r[d]=f}const o=new L0t(this.resourcePath||t,this.materialOptions);return o.setCrossOrigin(this.crossOrigin),o.setManager(this.manager),o.setMaterials(a),o}}class L0t{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:f0,this.wrap=this.options.wrap!==void 0?this.options.wrap:Sl}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const a in r){let o=!0,l=r[a];const u=a.toLowerCase();switch(u){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&l[0]===0&&l[1]===0&&l[2]===0&&(o=!1);break}o&&(s[u]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return this.materials[e]===void 0&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function s(o,l){return typeof l!="string"||l===""?"":/^https?:\/\//i.test(l)?l:o+l}function a(o,l){if(r[o])return;const u=t.getTextureParams(l,r),c=t.loadTexture(s(t.baseUrl,u.url));c.repeat.copy(u.scale),c.offset.copy(u.offset),c.wrapS=t.wrap,c.wrapT=t.wrap,(o==="map"||o==="emissiveMap")&&(c.encoding=Zi),r[o]=c}for(const o in i){const l=i[o];let u;if(l!=="")switch(o.toLowerCase()){case"kd":r.color=new Fn().fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=new Fn().fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=new Fn().fromArray(l).convertSRGBToLinear();break;case"map_kd":a("map",l);break;case"map_ks":a("specularMap",l);break;case"map_ke":a("emissiveMap",l);break;case"norm":a("normalMap",l);break;case"map_bump":case"bump":a("bumpMap",l);break;case"map_d":a("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":u=parseFloat(l),u<1&&(r.opacity=u,r.transparent=!0);break;case"tr":u=parseFloat(l),this.options&&this.options.invertTrProperty&&(u=1-u),u>0&&(r.opacity=1-u,r.transparent=!0);break}}return this.materials[e]=new Jf(r),this.materials[e]}getTextureParams(e,t){const i={scale:new on(1,1),offset:new on(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const a=this.manager!==void 0?this.manager:Kfe;let o=a.getHandler(e);o===null&&(o=new W_(a)),o.setCrossOrigin&&o.setCrossOrigin(this.crossOrigin);const l=o.load(e,i,r,s);return t!==void 0&&(l.mapping=t),l}}const Jk=new WeakMap;class O0t extends io{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new Io(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(Jk.has(e)){const l=Jk.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((u,c)=>{r._callbacks[s]={resolve:u,reject:c},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Jk.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new cr;e.index&&t.setIndex(new Ps(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new Ps(a,o))}return t}_loadLibrary(e,t){const i=new Io(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=N0t.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function N0t(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(d){c({draco:d})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,u=o.taskConfig;e.then(c=>{const d=c.draco,f=new d.Decoder,h=new d.DecoderBuffer;h.Init(new Int8Array(l),l.byteLength);try{const p=t(d,f,h,u),m=p.attributes.map(g=>g.array.buffer);p.index&&m.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},m)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{d.destroy(h),d.destroy(f)}});break}};function t(a,o,l,u){const c=u.attributeIDs,d=u.attributeTypes;let f,h;const p=o.GetEncodedGeometryType(l);if(p===a.TRIANGULAR_MESH)f=new a.Mesh,h=o.DecodeBufferToMesh(l,f);else if(p===a.POINT_CLOUD)f=new a.PointCloud,h=o.DecodeBufferToPointCloud(l,f);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!h.ok()||f.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+h.error_msg());const m={index:null,attributes:[]};for(const g in c){const v=self[d[g]];let _,y;if(u.useUniqueIDs)y=c[g],_=o.GetAttributeByUniqueId(f,y);else{if(y=o.GetAttributeId(f,a[c[g]]),y===-1)continue;_=o.GetAttribute(f,y)}m.attributes.push(r(a,o,f,g,v,_))}return p===a.TRIANGULAR_MESH&&(m.index=i(a,o,f)),a.destroy(f),m}function i(a,o,l){const c=l.num_faces()*3,d=c*4,f=a._malloc(d);o.GetTrianglesUInt32Array(l,d,f);const h=new Uint32Array(a.HEAPF32.buffer,f,c).slice();return a._free(f),{array:h,itemSize:1}}function r(a,o,l,u,c,d){const f=d.num_components(),p=l.num_points()*f,m=p*c.BYTES_PER_ELEMENT,g=s(a,c),v=a._malloc(m);o.GetAttributeDataArrayForAllPoints(l,d,g,m,v);const _=new c(a.HEAPF32.buffer,v,p).slice();return a._free(v),{name:u,array:_,itemSize:f}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}const fI=new lv,gd=new D0t;gd.addHandler(/\.dds$/i,new I0t);gd.addHandler(/\.tga$/i,new pN);function B0t(n){return fI.setFromObject(n),fI.getSize(new st)}function F0t(n){return fI.setFromObject(n),fI.getCenter(new st)}function U0t(n){const e=n.split(".");if(e.length<=1)return"";{let t=e.pop();return t=t.toLowerCase(),t}}function z0t(n,e,t,i,r){let s;e?s=e:s=U0t(n),s==="glb"&&(s="gltf");let a={loader:null,getObject:null};switch(s){case"dae":a={loader:new qpt(gd),getObject:o=>o.scene};break;case"fbx":a={loader:new Lpt(gd)};break;case"gltf":a={loader:new jpt(gd),getObject:o=>{const l=o.scene;return o.animations&&(l.animations=o.animations),l}},V0t(t,a,r);break;case"obj":a={loader:new M0t(gd)};break;case"ply":a={loader:new R0t(gd),getObject:o=>(o.computeVertexNormals(),new ga(o,i==="MeshStandardMaterial"?new Nb:new Fc({vertexColors:!0})))};break;case"stl":a={loader:new P0t(gd),getObject:o=>new ga(o,new Jf)};break;case"json":a={loader:new Hht(gd)};break}return a}function H0t(){return new k0t(gd)}function V0t(n,e,t){if(n){const i=new O0t;i.setDecoderPath(t||"assets/draco/gltf/"),i.setDecoderConfig({type:"js"}),e.loader.setDRACOLoader(i)}}var $0t=(n,e)=>{const t=n.__vccOpts||n;for(const[i,r]of e)t[i]=r;return t};const G0t=Ne({name:"vue3dLoader"}),W0t=Ne({...G0t,props:{filePath:null,fileType:null,width:null,height:null,position:null,rotation:null,scale:null,lights:{default:()=>[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]},cameraPosition:{default:()=>({x:0,y:0,z:0})},cameraRotation:null,cameraUp:null,cameraLookAt:null,backgroundColor:{default:()=>16777215},backgroundAlpha:{default:()=>1},controlsOptions:null,crossOrigin:{default:"anonymous"},requestHeader:null,outputEncoding:{default:()=>"linear"},webGLRendererOptions:{default:()=>({})},mtlPath:{default:""},showFps:{type:Boolean,default:!1},textureImage:{default:""},clearScene:{type:Boolean,default:!1},parallelLoad:{type:Boolean,default:!1},labels:{default:()=>[]},autoPlay:{type:Boolean,default:!0},enableDraco:{type:Boolean,default:!1},dracoDir:null,intersectRecursive:{type:Boolean,default:!1},enableDamping:{type:Boolean},dampingFactor:null,verticalCtrl:{type:[Boolean,Object],default:!1},horizontalCtrl:{type:[Boolean,Object],default:!1},plyMaterial:{default:"MeshStandardMaterial"},enableAxesHelper:{type:Boolean,default:!1},axesHelperSize:{default:100},enableGridHelper:{type:Boolean,default:!1},minDistance:{default:0},maxDistance:{default:1/0},pointLightFollowCamera:{type:Boolean}},emits:["mousedown","mousemove","mouseup","click","dblclick","load","process","error"],setup(n,{expose:e,emit:t}){const i=n;let r=null;const s=new ipt,a=new on,o=new ha(45,1,.1,1e5),l=new Ght;let u=new LU,c=null,d={},f=[],h=null,p=0,m=null,g=null,v=null,_=null,y=null;const b=ae({width:i.width||0,height:i.height||0}),x=ae(0),w=ae(!1),A=ae(!1),T=ae(null),C=ae(null);Ln(()=>{k()}),Vi(()=>{I()}),St([()=>i.autoPlay],()=>{Je()}),St([()=>i.width,()=>i.height],()=>{b.value={width:i.width||0,height:i.height||0}}),St([()=>i.enableAxesHelper,()=>i.axesHelperSize,()=>i.enableGridHelper],()=>{wt()}),St([()=>i.minDistance,()=>i.maxDistance],()=>{Re()}),St([()=>i.filePath,()=>i.fileType,()=>i.mtlPath,()=>i.clearScene,()=>i.backgroundAlpha,()=>i.backgroundColor],q=>{(q[0]||q[1])&&E(),q[2]&&Oe(),q[3]&&Ke(),(q[4]||q[5])&&le()},{deep:!0}),St([()=>i.rotation,()=>i.position,()=>i.scale,()=>i.lights],q=>{const xe=["rotation","position","scale"];q.forEach((ve,ke)=>{ke<3&&ve?it(xe[ke],ve):pe()})},{deep:!0}),St([()=>b],()=>{ge(!0),le()},{deep:!0}),St([()=>i.controlsOptions],()=>{ye()},{deep:!0}),St([()=>i.cameraRotation,()=>i.cameraPosition],()=>{ge()},{deep:!0}),St([()=>i.labels],()=>{K()},{deep:!0});function E(){I(),k()}function I(){p&&cancelAnimationFrame(p),c&&c.dispose(),d&&Object.keys(d).length>0&&(d.dispose(),d={});const q=T.value;q.removeEventListener("mousedown",L,!1),q.removeEventListener("mousemove",G,!1),q.removeEventListener("mouseup",H,!1),q.removeEventListener("click",F,!1),q.removeEventListener("dblclick",X,!1),window.removeEventListener("resize",z,!1),r=null,u&&u.clear()}function k(){const{filePath:q,outputEncoding:xe,webGLRendererOptions:ve,showFps:ke,enableDamping:we,dampingFactor:De,labels:xt}=i;q&&typeof q=="object"&&(A.value=!0);const Pe=T.value;O(Pe),z();const dt=Object.assign({},{antialias:!0,alpha:!0},ve,{canvas:C.value});if(!c){c=new Dfe(dt),c.shadowMap.enabled=!0;const Mt=xe==="linear"?p0:Zi;c.outputEncoding=Mt}(!d||Object.keys(d).length<=0)&&(d=new apt(o,Pe),we&&(d.enableDamping=!0,De!=null&&(d.dampingFactor=De))),Re(),wt(),Oe(),re(),U(!0),Pe.addEventListener("mousedown",L,!1),Pe.addEventListener("mouseup",H,!1),Pe.addEventListener("click",F,!1),Pe.addEventListener("dblclick",X,!1),window.addEventListener("resize",z,!1),ke&&(m=C2(),Pe.appendChild(m.dom)),ce(),xt&&xt.length>0&&K()}function O(q){const{width:xe,height:ve}=i;xe&&(q.style.width=`${xe}px`),ve&&(q.style.height=`${ve}px`)}function U(q){const xe=T.value;q?xe.addEventListener("mousemove",G,!1):xe.removeEventListener("mousemove",G,!1)}function z(){const{width:q,height:xe}=i;(!q||!xe)&&cn(()=>{const ve=T.value;b.value={width:q||ve.offsetWidth,height:xe||ve.offsetHeight}})}function L(q){U(!1);const xe=te(q.clientX,q.clientY);t("mousedown",q,xe)}function G(q){const xe=te(q.clientX,q.clientY);t("mousemove",q,xe)}function H(q){const xe=te(q.clientX,q.clientY);t("mouseup",q,xe),U(!0)}function F(q){const xe=te(q.clientX,q.clientY);t("click",q,xe)}function X(q){const xe=te(q.clientX,q.clientY);t("dblclick",q,xe)}function te(q,xe){const ve=be();if(!ve||!T.value)return null;const ke=T.value.getBoundingClientRect();q-=ke.left,xe-=ke.top,a.x=q/b.value.width*2-1,a.y=-(xe/b.value.height)*2+1,s.setFromCamera(a,o);const we=s.intersectObject(ve,i.intersectRecursive);return(we&&we.length)>0?we[0]:null}function re(){le(),ge(),pe(),ye()}function ie(){if(!r)return;const q=A.value?ze(r):null,{position:xe,rotation:ve,scale:ke}=i;xe&&(xe instanceof Array?q!=null?r.position.set(xe[q].x,xe[q].y,xe[q].z):r.position.set(0,0,0):r.position.set(xe.x,xe.y,xe.z)),ve&&(ve instanceof Array?q!=null?r.rotation.set(ve[q].x,ve[q].y,ve[q].z):r.rotation.set(0,0,0):r.rotation.set(ve.x,ve.y,ve.z)),ke&&(ke instanceof Array?q!=null?r.scale.set(ke[q].x,ke[q].y,ke[q].z):r.scale.set(1,1,1):r.scale.set(ke.x,ke.y,ke.z))}function le(){const{backgroundColor:q,backgroundAlpha:xe}=i;c.setSize(b.value.width,b.value.height),c.setPixelRatio(window.devicePixelRatio||1),c.setClearColor(new Fn(q).getHex()),c.setClearAlpha(xe)}function ge(q){const{cameraPosition:xe,cameraRotation:ve,cameraUp:ke,cameraLookAt:we}=i;if(o.aspect=b.value.width/b.value.height,o.updateProjectionMatrix(),!q)if(!we||!ke){if(!r)return;const De=B0t(r).length();o.position.set(xe.x,xe.y,xe.z),ve&&o.rotation.set(ve.x,ve.y,ve.z),xe.x===0&&xe.y===0&&xe.z===0&&(o.position.z=De),o.lookAt(new st)}else o.position.set(xe.x,xe.y,xe.z),ve&&o.rotation.set(ve.x,ve.y,ve.z),o.up.set(ke.x,ke.y,ke.z),o.lookAt(new st(we.x,we.y,we.z))}function pe(){const{lights:q}=i;u.remove(...f),f=[],q.forEach(xe=>{if(!xe.type)return;const ve=xe.type.toLowerCase();let ke=null;if(ve==="ambient"||ve==="ambientlight"){const we=xe.color===0?xe.color:xe.color||4210752,De=xe.intensity===0?xe.intensity:xe.intensity||1;ke=new aR(we,De)}if(ve==="point"||ve==="pointlight"){const we=xe.color===0?xe.color:xe.color||16777215,De=xe.intensity===0?xe.intensity:xe.intensity||1,xt=xe.distance||0,Pe=xe.decay===0?xe.decay:xe.decay||1;ke=new Zg(we,De,xt,Pe),xe.position&&ke.position.copy(xe.position)}if(ve==="directional"||ve==="directionallight"){const we=xe.color===0?xe.color:xe.color||16777215,De=xe.intensity===0?xe.intensity:xe.intensity||1;ke=new VT(we,De),xe.position&&ke.position.copy(xe.position),xe.target&&ke.target.copy(xe.target)}if(ve==="hemisphere"||ve==="hemispherelight"){const we=xe.skyColor===0?xe.skyColor:xe.skyColor||16777215,De=xe.groundColor===0?xe.groundColor:xe.groundColor||16777215,xt=xe.intensity===0?xe.intensity:xe.intensity||1;ke=new Xfe(we,De,xt),xe.position&&ke.position.copy(xe.position)}ke&&(f.push(ke),u.add(ke))})}function ye(){const{controlsOptions:q}=i;q&&Object.assign(d,q)}function Oe(){const{filePath:q,parallelLoad:xe}=i;xe&&A?q.forEach((ve,ke)=>{Be(ke)}):Be()}function Be(q){const{filePath:xe,fileType:ve,crossOrigin:ke,requestHeader:we,mtlPath:De,enableDraco:xt,dracoDir:Pe,plyMaterial:Dt}=i;if(!xe)return;const dt=q||x.value,Mt=A.value?xe[dt]:xe,jt=typeof ve=="string"?ve:ve?ve[dt]:"",Ft=z0t(Mt,jt,xt,Dt,Pe);h=Ft.loader;const Sn=Ft.getObject?Ft.getObject:Q;if(r&&dt===0&&u.remove(r),we&&h.setRequestHeader(we),ke&&h.setCrossOrigin(ke),De)if(!(typeof De=="object"))Ze(Mt,Sn,dt);else{if(!De[dt]){Ye(Mt,Sn,dt);return}Ze(Mt,Sn,dt)}else Ye(Mt,Sn,dt)}function Ye(q,xe,ve){const{textureImage:ke,parallelLoad:we}=i;h.load(q,(...De)=>{if(r=xe(...De),me(r,q),ke){const Pe=typeof ke=="string"?ke:ke[ve];Pe&&We(r,Pe)}t("load",u)},De=>{we||nt(De);const xt=x.value+1;t("process",De,xt)},De=>{t("error",De)})}function Ze(q,xe,ve){const{crossOrigin:ke,requestHeader:we,mtlPath:De}=i,xt=H0t();ke&&xt.setCrossOrigin(ke),we&&xt.setRequestHeader(we);const Pe=typeof De=="string"?De:De[ve],Dt=/^(.*\/)([^/]*)$/.exec(Pe),dt=Dt[1],Mt=Dt[2];xt.setPath(dt).load(Mt,jt=>{jt.preload(),h.setMaterials(jt),Ye(q,xe,ve)})}function Q(q){return q}function me(q,xe){const ve=F0t(r);w.value||(u.position.copy(ve.negate()),w.value=!0),r=q;let ke=xe.split("/");ke=ke[ke.length-1],r.fileName=ke,u.add(r),ge(),ie(),Je()}function ce(){p=requestAnimationFrame(ce),Fe();const q=l.getDelta();g&&g instanceof qk&&g.update(q),g&&g instanceof Array&&g.forEach(xe=>{xe.update(q)}),d&&d.update(),je()}function je(){const{pointLightFollowCamera:q}=i;q&&vt(),c.render(u,o)}function Fe(){const{showFps:q}=i;q&&m.update()}function nt(q){const{filePath:xe}=i;Math.floor(q.loaded/q.total*100)===100&&(A.value&&xe.length>x.value?cn(()=>{if(x.value++,x.value===xe.length){x.value=0;return}Be()}):x.value=0)}function We(q,xe){v||(v=new W_),q.traverse(ve=>{ve.isMesh&&v.load(xe,ke=>{ve.material.map=ke,ve.material.needsUpdate=!0},()=>{},ke=>{t("error",ke)})})}function Ke(){u.clear()}function it(q,xe){const ve=be();if(ve){if(A.value){ve.children.forEach(ke=>{const we=ze(ke),De=q==="scale"?1:0;xe[we]?ke[q].set(xe[we].x,xe[we].y,xe[we].z):ke[q].set(De,De,De)});return}ve[q].set(xe.x,xe.y,xe.z)}}function be(){return A.value?u:r}function K(){const{labels:q}=i;if(!q||q.length<=0)return;ne();const xe=A.value?u:r,ve=we=>(v||(v=new W_),v.load(we)),ke=(we,De)=>{const xt=Se(we,De),Pe=new eo(xt);return Pe.needsUpdate=!0,Pe};q.forEach(we=>{const De=we.image?ve(we.image):ke(we.text,we.textStyle||{}),xt=new NU({map:De,color:we.spriteMaterialColor||16777215}),Pe=new i3(xt);we.scale?Pe.scale.set(we.scale.x||1,we.scale.y||1,we.scale.z||0):Pe.scale.set(1,1,0),we.position&&Pe.position.set(we.position.x,we.position.y,we.position.z),we.sid&&(Pe.sid=we.sid),xe.add(Pe)})}function ne(){const q=u.children;for(let xe=q.length-1;xe>=0;xe--){const ve=q[xe];ve&&(ve instanceof xl&&ve.children&&(u.children[xe].children=ve.children.map(ke=>ke instanceof i3?null:ke).filter(ke=>ke)),ve instanceof i3&&u.remove(ve))}}function Se(q,xe){const ve=(Sn,Pn,Ti,jn,dr,fi)=>{Sn.beginPath(),Sn.moveTo(Pn+fi,Ti),Sn.lineTo(Pn+jn-fi,Ti),Sn.quadraticCurveTo(Pn+jn,Ti,Pn+jn,Ti+fi),Sn.lineTo(Pn+jn,Ti+dr-fi),Sn.quadraticCurveTo(Pn+jn,Ti+dr,Pn+jn-fi,Ti+dr),Sn.lineTo(Pn+fi,Ti+dr),Sn.quadraticCurveTo(Pn,Ti+dr,Pn,Ti+dr-fi),Sn.lineTo(Pn,Ti+fi),Sn.quadraticCurveTo(Pn,Ti,Pn+fi,Ti),Sn.closePath(),Sn.fill(),Sn.stroke()},ke=xe.fontFamily||"Arial",we=xe.fontSize===0||xe.fontSize?xe.fontSize:18,De=xe.color||"#ffffff",xt=xe.fontWeight||"normal",Pe=xe.borderWidth===0||xe.borderWidth?xe.borderWidth:4,Dt=xe.borderColor||"rgba(0,0,0,1)",dt=xe.borderRadius===0||xe.borderRadius?xe.borderRadius:4,Mt=xe.backgroundColor||"rgba(255, 255, 255, 1)",jt=document.createElement("canvas"),Ft=jt.getContext("2d");if(Ft){Ft.font=`${xt} ${we}px ${ke}`;const Pn=Ft.measureText(q).width;Ft.fillStyle=Mt,Ft.strokeStyle=Dt,Ft.lineWidth=Pe,ve(Ft,Pe/2,Pe/2,Pn+Pe,we*1.4+Pe,dt),Ft.fillStyle=De,Ft.fillText(q,Pe,we+Pe)}return jt}function ze(q){const{filePath:xe}=i;let ve;return xe instanceof Array&&(ve=xe.map((ke,we)=>{if(ke.indexOf(q.fileName)>-1)return we}).filter(ke=>ke!=null)[0]),ve}function Je(){const q=be();if(q){if(A.value){At(q);return}Tt(q)}}function Tt(q){const{autoPlay:xe}=i;g=new qk(q),q.animations&&q.animations.length>0&&q.animations.forEach(ve=>{if(ve){const ke=g.clipAction(ve);xe?ke.play():ke.stop()}})}function At(q){const{autoPlay:xe}=i;g=[],q.children.forEach((ve,ke)=>{g.push(new qk(ve)),ve.animations&&ve.animations.length>0&&ve.animations.forEach(we=>{if(we){const De=g[ke].clipAction(we);xe?De.play():De.stop()}})})}function Re(){if(!d)return;const{verticalCtrl:q,horizontalCtrl:xe,minDistance:ve,maxDistance:ke}=i;q&&typeof q=="boolean"&&(d.minAzimuthAngle=-2*Math.PI,d.maxAzimuthAngle=-2*Math.PI),q&&typeof q=="object"&&(d.minAzimuthAngle=q.min,d.maxAzimuthAngle=q.max),xe&&typeof xe=="boolean"&&(d.minPolarAngle=1,d.maxPolarAngle=1),xe&&typeof xe=="object"&&(d.minPolarAngle=xe.min,d.maxPolarAngle=xe.max),ve!=0&&typeof ve=="number"&&(d.minDistance=ve),ke!=1/0&&typeof ke=="number"&&(d.maxDistance=ke)}function wt(){const{enableAxesHelper:q,enableGridHelper:xe,axesHelperSize:ve}=i;q?(_=new spt(ve),u.add(_)):_&&u.remove(_),xe?(y=new rpt(2e3,100),u.add(y)):y&&u.remove(y)}function vt(){const q=o.position.clone();u.children.forEach(xe=>{xe instanceof Zg&&xe.position.set(q.x,q.y,q.z)})}return e({camera:o,scene:u}),(q,xe)=>(j(),_e("div",{ref_key:"containerElement",ref:T,class:"viewer-container"},[Te("canvas",{ref_key:"canvasElement",ref:C,class:"viewer-canvas"},null,512)],512))}});var yQ=$0t(W0t,[["__scopeId","data-v-e92274c2"]]);const Bhe=n=>(cc("data-v-88fb9ae2"),n=n(),dc(),n),q0t=Bhe(()=>Te("h1",{class:"section-title"},"3D Model",-1)),j0t=Bhe(()=>Te("p",null,[An(" Thanks to "),Te("a",{href:"https://github.com/king2088/vue-3d-loader",target:"_blank"},"vue-3d-loader"),An(", we can visualize these 3D models here. It supports dae, fbx, gltf(glb), obj, ply, stl models. ")],-1)),K0t=Ne({__name:"Model3D",setup(n){const e=ae();e.value=["./model3d/fbx/Samba Dancing.fbx","./model3d/collada/pump/pump.dae","./model3d/ply/Lucy100k.ply"];const t=ae();t.value=[{x:100,y:100,z:100},{x:300,y:300,z:300}];const i=ae();i.value=[{x:0,y:0,z:0},{x:10,y:1,z:1}];const r=ae();return r.value=[{x:5,y:5,z:5},{x:3,y:3,z:3}],(s,a)=>{const o=Ht("el-divider"),l=Ht("el-row"),u=Ht("el-col");return j(),_e("div",null,[he(o),he(l,{justify:"center"},{default:Ae(()=>[q0t]),_:1}),he(l,{justify:"center"},{default:Ae(()=>[he(u,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[j0t,he(l,{justify:"center"},{default:Ae(()=>[he(u,{xs:20,sm:12},{default:Ae(()=>[he(S(yQ),{filePath:"./model3d/collada/stormtrooper/stormtrooper.dae",cameraPosition:{x:-8,y:10,z:-10},height:350,enableDamping:!0,dampingFactor:.05,backgroundColor:13426175})]),_:1}),he(u,{xs:20,sm:12},{default:Ae(()=>[he(S(yQ),{filePath:e.value,scale:r.value,position:t.value,rotation:i.value,cameraPosition:{x:100,y:200,z:3e3},parallelLoad:!0,height:350,backgroundColor:15658734},null,8,["filePath","scale","position","rotation"])]),_:1})]),_:1})]),_:1})]),_:1})])}}}),X0t=Fa(K0t,[["__scopeId","data-v-88fb9ae2"]]);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const az="171",My={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Iy={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Y0t=0,_Q=1,Q0t=2,Fhe=1,Z0t=2,Rf=3,Jd=0,Il=1,Vu=2,Wp=0,qp=1,bQ=2,SQ=3,xQ=4,Uhe=5,Gm=100,J0t=101,emt=102,tmt=103,nmt=104,imt=200,rmt=201,smt=202,amt=203,Zw=204,Jw=205,omt=206,lmt=207,umt=208,cmt=209,dmt=210,fmt=211,hmt=212,pmt=213,mmt=214,yN=0,_N=1,bN=2,K_=3,SN=4,xN=5,wN=6,TN=7,zhe=0,gmt=1,vmt=2,jp=0,ymt=1,_mt=2,bmt=3,Smt=4,xmt=5,wmt=6,Tmt=7,Hhe=300,X_=301,Y_=302,CN=303,AN=304,oR=306,EN=1e3,cg=1001,MN=1002,uu=1003,Cmt=1004,NE=1005,kd=1006,eL=1007,dg=1008,ef=1009,Vhe=1010,$he=1011,eT=1012,oz=1013,ju=1014,Uc=1015,jb=1016,lz=1017,uz=1018,Q_=1020,Ghe=35902,Whe=1021,qhe=1022,Yo=1023,jhe=1024,Khe=1025,Rg=1026,Z_=1027,Xhe=1028,lR=1029,cz=1030,dz=1031,Q1=1033,o3=33776,l3=33777,u3=33778,c3=33779,IN=35840,DN=35841,RN=35842,PN=35843,kN=36196,LN=37492,ON=37496,NN=37808,BN=37809,FN=37810,UN=37811,zN=37812,HN=37813,VN=37814,$N=37815,GN=37816,WN=37817,qN=37818,jN=37819,KN=37820,XN=37821,d3=36492,YN=36494,QN=36495,Yhe=36283,ZN=36284,JN=36285,eB=36286,Amt=3200,Emt=3201,Mmt=0,Imt=1,Ap="",Ou="srgb",J_="srgb-linear",hI="linear",qr="srgb",Dy=7680,wQ=519,Dmt=512,Rmt=513,Pmt=514,Qhe=515,kmt=516,Lmt=517,Omt=518,Nmt=519,TQ=35044,Bmt=35048,CQ="300 es",jf=2e3,pI=2001;class fv{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const lo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let AQ=1234567;const E2=Math.PI/180,tT=180/Math.PI;function Kb(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(lo[n&255]+lo[n>>8&255]+lo[n>>16&255]+lo[n>>24&255]+"-"+lo[e&255]+lo[e>>8&255]+"-"+lo[e>>16&15|64]+lo[e>>24&255]+"-"+lo[t&63|128]+lo[t>>8&255]+"-"+lo[t>>16&255]+lo[t>>24&255]+lo[i&255]+lo[i>>8&255]+lo[i>>16&255]+lo[i>>24&255]).toLowerCase()}function Ki(n,e,t){return Math.max(e,Math.min(t,n))}function fz(n,e){return(n%e+e)%e}function Fmt(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function Umt(n,e,t){return n!==e?(t-n)/(e-n):0}function M2(n,e,t){return(1-t)*n+t*e}function zmt(n,e,t,i){return M2(n,e,1-Math.exp(-t*i))}function Hmt(n,e=1){return e-Math.abs(fz(n,e*2)-e)}function Vmt(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function $mt(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Gmt(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Wmt(n,e){return n+Math.random()*(e-n)}function qmt(n){return n*(.5-Math.random())}function jmt(n){n!==void 0&&(AQ=n);let e=AQ+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Kmt(n){return n*E2}function Xmt(n){return n*tT}function Ymt(n){return(n&n-1)===0&&n!==0}function Qmt(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Zmt(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Jmt(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+i)/2),c=a((e+i)/2),d=s((e-i)/2),f=a((e-i)/2),h=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*c,l*d,l*f,o*u);break;case"YZY":n.set(l*f,o*c,l*d,o*u);break;case"ZXZ":n.set(l*d,l*f,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*h,o*u);break;case"YXY":n.set(l*h,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*h,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function r1(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function zo(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Zhe={DEG2RAD:E2,RAD2DEG:tT,generateUUID:Kb,clamp:Ki,euclideanModulo:fz,mapLinear:Fmt,inverseLerp:Umt,lerp:M2,damp:zmt,pingpong:Hmt,smoothstep:Vmt,smootherstep:$mt,randInt:Gmt,randFloat:Wmt,randFloatSpread:qmt,seededRandom:jmt,degToRad:Kmt,radToDeg:Xmt,isPowerOfTwo:Ymt,ceilPowerOfTwo:Qmt,floorPowerOfTwo:Zmt,setQuaternionFromProperEuler:Jmt,normalize:zo,denormalize:r1};class oi{constructor(e=0,t=0){oi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Ki(this.x,e.x,t.x),this.y=Ki(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Ki(this.x,e,t),this.y=Ki(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ki(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ri{constructor(e,t,i,r,s,a,o,l,u){Ri.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,u)}set(e,t,i,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],c=i[4],d=i[7],f=i[2],h=i[5],p=i[8],m=r[0],g=r[3],v=r[6],_=r[1],y=r[4],b=r[7],x=r[2],w=r[5],A=r[8];return s[0]=a*m+o*_+l*x,s[3]=a*g+o*y+l*w,s[6]=a*v+o*b+l*A,s[1]=u*m+c*_+d*x,s[4]=u*g+c*y+d*w,s[7]=u*v+c*b+d*A,s[2]=f*m+h*_+p*x,s[5]=f*g+h*y+p*w,s[8]=f*v+h*b+p*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-i*s*c+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=c*a-o*u,f=o*l-c*s,h=u*s-a*l,p=t*d+i*f+r*h;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/p;return e[0]=d*m,e[1]=(r*u-c*i)*m,e[2]=(o*i-r*a)*m,e[3]=f*m,e[4]=(c*t-r*l)*m,e[5]=(r*s-o*t)*m,e[6]=h*m,e[7]=(i*l-u*t)*m,e[8]=(a*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(tL.makeScale(e,t)),this}rotate(e){return this.premultiply(tL.makeRotation(-e)),this}translate(e,t){return this.premultiply(tL.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const tL=new Ri;function Jhe(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function mI(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function egt(){const n=mI("canvas");return n.style.display="block",n}const EQ={};function s1(n){n in EQ||(EQ[n]=!0,console.warn(n))}function tgt(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function ngt(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function igt(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const MQ=new Ri().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),IQ=new Ri().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function rgt(){const n={enabled:!0,workingColorSpace:J_,spaces:{},convert:function(r,s,a){return this.enabled===!1||s===a||!s||!a||(this.spaces[s].transfer===qr&&(r.r=eh(r.r),r.g=eh(r.g),r.b=eh(r.b)),this.spaces[s].primaries!==this.spaces[a].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[a].fromXYZ)),this.spaces[a].transfer===qr&&(r.r=Z1(r.r),r.g=Z1(r.g),r.b=Z1(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ap?hI:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,a){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[a].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[J_]:{primaries:e,whitePoint:i,transfer:hI,toXYZ:MQ,fromXYZ:IQ,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Ou},outputColorSpaceConfig:{drawingBufferColorSpace:Ou}},[Ou]:{primaries:e,whitePoint:i,transfer:qr,toXYZ:MQ,fromXYZ:IQ,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Ou}}}),n}const Mr=rgt();function eh(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Z1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ry;class sgt{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ry===void 0&&(Ry=mI("canvas")),Ry.width=e.width,Ry.height=e.height;const i=Ry.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Ry}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=mI("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=eh(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(eh(t[i]/255)*255):t[i]=eh(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let agt=0;class epe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:agt++}),this.uuid=Kb(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(nL(r[a].image)):s.push(nL(r[a]))}else s=nL(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function nL(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?sgt.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ogt=0;class Jo extends fv{constructor(e=Jo.DEFAULT_IMAGE,t=Jo.DEFAULT_MAPPING,i=cg,r=cg,s=kd,a=dg,o=Yo,l=ef,u=Jo.DEFAULT_ANISOTROPY,c=Ap){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ogt++}),this.uuid=Kb(),this.name="",this.source=new epe(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new oi(0,0),this.repeat=new oi(1,1),this.center=new oi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ri,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Hhe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case EN:e.x=e.x-Math.floor(e.x);break;case cg:e.x=e.x<0?0:1;break;case MN:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case EN:e.y=e.y-Math.floor(e.y);break;case cg:e.y=e.y<0?0:1;break;case MN:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}Jo.DEFAULT_IMAGE=null;Jo.DEFAULT_MAPPING=Hhe;Jo.DEFAULT_ANISOTROPY=1;class gs{constructor(e=0,t=0,i=0,r=1){gs.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],d=l[8],f=l[1],h=l[5],p=l[9],m=l[2],g=l[6],v=l[10];if(Math.abs(c-f)<.01&&Math.abs(d-m)<.01&&Math.abs(p-g)<.01){if(Math.abs(c+f)<.1&&Math.abs(d+m)<.1&&Math.abs(p+g)<.1&&Math.abs(u+h+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(u+1)/2,b=(h+1)/2,x=(v+1)/2,w=(c+f)/4,A=(d+m)/4,T=(p+g)/4;return y>b&&y>x?y<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(y),r=w/i,s=A/i):b>x?b<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(b),i=w/r,s=T/r):x<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(x),i=A/s,r=T/s),this.set(i,r,s,t),this}let _=Math.sqrt((g-p)*(g-p)+(d-m)*(d-m)+(f-c)*(f-c));return Math.abs(_)<.001&&(_=1),this.x=(g-p)/_,this.y=(d-m)/_,this.z=(f-c)/_,this.w=Math.acos((u+h+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Ki(this.x,e.x,t.x),this.y=Ki(this.y,e.y,t.y),this.z=Ki(this.z,e.z,t.z),this.w=Ki(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Ki(this.x,e,t),this.y=Ki(this.y,e,t),this.z=Ki(this.z,e,t),this.w=Ki(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ki(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lgt extends fv{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new gs(0,0,e,t),this.scissorTest=!1,this.viewport=new gs(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:kd,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new Jo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const a=i.count;for(let o=0;o<a;o++)this.textures[o]=s.clone(),this.textures[o].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new epe(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class _0 extends lgt{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class tpe extends Jo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=uu,this.minFilter=uu,this.wrapR=cg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ugt extends Jo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=uu,this.minFilter=uu,this.wrapR=cg,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],u=i[r+1],c=i[r+2],d=i[r+3];const f=s[a+0],h=s[a+1],p=s[a+2],m=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d;return}if(o===1){e[t+0]=f,e[t+1]=h,e[t+2]=p,e[t+3]=m;return}if(d!==m||l!==f||u!==h||c!==p){let g=1-o;const v=l*f+u*h+c*p+d*m,_=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){const x=Math.sqrt(y),w=Math.atan2(x,v*_);g=Math.sin(g*w)/x,o=Math.sin(o*w)/x}const b=o*_;if(l=l*g+f*b,u=u*g+h*b,c=c*g+p*b,d=d*g+m*b,g===1-o){const x=1/Math.sqrt(l*l+u*u+c*c+d*d);l*=x,u*=x,c*=x,d*=x}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],c=i[r+3],d=s[a],f=s[a+1],h=s[a+2],p=s[a+3];return e[t]=o*p+c*d+l*h-u*f,e[t+1]=l*p+c*f+u*d-o*h,e[t+2]=u*p+c*h+o*f-l*d,e[t+3]=c*p-o*d-l*f-u*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),c=o(r/2),d=o(s/2),f=l(i/2),h=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"YXZ":this._x=f*c*d+u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"ZXY":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d-f*h*p;break;case"ZYX":this._x=f*c*d-u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d+f*h*p;break;case"YZX":this._x=f*c*d+u*h*p,this._y=u*h*d+f*c*p,this._z=u*c*p-f*h*d,this._w=u*c*d-f*h*p;break;case"XZY":this._x=f*c*d-u*h*p,this._y=u*h*d-f*c*p,this._z=u*c*p+f*h*d,this._w=u*c*d+f*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],d=t[10],f=i+o+d;if(f>0){const h=.5/Math.sqrt(f+1);this._w=.25/h,this._x=(c-l)*h,this._y=(s-u)*h,this._z=(a-r)*h}else if(i>o&&i>d){const h=2*Math.sqrt(1+i-o-d);this._w=(c-l)/h,this._x=.25*h,this._y=(r+a)/h,this._z=(s+u)/h}else if(o>d){const h=2*Math.sqrt(1+o-i-d);this._w=(s-u)/h,this._x=(r+a)/h,this._y=.25*h,this._z=(l+c)/h}else{const h=2*Math.sqrt(1+d-i-o);this._w=(a-r)/h,this._x=(s+u)/h,this._y=(l+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ki(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-i*u,this._z=s*c+a*u+i*l-r*o,this._w=a*c-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const h=1-t;return this._w=h*a+t*this._w,this._x=h*i+t*this._x,this._y=h*r+t*this._y,this._z=h*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),d=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=a*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ft{constructor(e=0,t=0,i=0){ft.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DQ.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DQ.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=2*(a*r-o*i),c=2*(o*t-s*r),d=2*(s*i-a*t);return this.x=t+l*u+a*d-o*c,this.y=i+l*c+o*u-s*d,this.z=r+l*d+s*c-a*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Ki(this.x,e.x,t.x),this.y=Ki(this.y,e.y,t.y),this.z=Ki(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Ki(this.x,e,t),this.y=Ki(this.y,e,t),this.z=Ki(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ki(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return iL.copy(this).projectOnVector(e),this.sub(iL)}reflect(e){return this.sub(iL.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ki(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iL=new ft,DQ=new bs;class Ld{constructor(e=new ft(1/0,1/0,1/0),t=new ft(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Tc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Tc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Tc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let a=0,o=s.count;a<o;a++)e.isMesh===!0?e.getVertexPosition(a,Tc):Tc.fromBufferAttribute(s,a),Tc.applyMatrix4(e.matrixWorld),this.expandByPoint(Tc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),BE.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),BE.copy(i.boundingBox)),BE.applyMatrix4(e.matrixWorld),this.union(BE)}const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Tc),Tc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gx),FE.subVectors(this.max,gx),Py.subVectors(e.a,gx),ky.subVectors(e.b,gx),Ly.subVectors(e.c,gx),ap.subVectors(ky,Py),op.subVectors(Ly,ky),wm.subVectors(Py,Ly);let t=[0,-ap.z,ap.y,0,-op.z,op.y,0,-wm.z,wm.y,ap.z,0,-ap.x,op.z,0,-op.x,wm.z,0,-wm.x,-ap.y,ap.x,0,-op.y,op.x,0,-wm.y,wm.x,0];return!rL(t,Py,ky,Ly,FE)||(t=[1,0,0,0,1,0,0,0,1],!rL(t,Py,ky,Ly,FE))?!1:(UE.crossVectors(ap,op),t=[UE.x,UE.y,UE.z],rL(t,Py,ky,Ly,FE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Tf[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Tf[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Tf[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Tf[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Tf[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Tf[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Tf[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Tf[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Tf),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tf=[new ft,new ft,new ft,new ft,new ft,new ft,new ft,new ft],Tc=new ft,BE=new Ld,Py=new ft,ky=new ft,Ly=new ft,ap=new ft,op=new ft,wm=new ft,gx=new ft,FE=new ft,UE=new ft,Tm=new ft;function rL(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Tm.fromArray(n,s);const o=r.x*Math.abs(Tm.x)+r.y*Math.abs(Tm.y)+r.z*Math.abs(Tm.z),l=e.dot(Tm),u=t.dot(Tm),c=i.dot(Tm);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const cgt=new Ld,vx=new ft,sL=new ft;class hz{constructor(e=new ft,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):cgt.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vx.subVectors(e,this.center);const t=vx.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(vx,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(sL.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vx.copy(e.center).add(sL)),this.expandByPoint(vx.copy(e.center).sub(sL))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Cf=new ft,aL=new ft,zE=new ft,lp=new ft,oL=new ft,HE=new ft,lL=new ft;let npe=class{constructor(e=new ft,t=new ft(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cf)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Cf.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Cf.copy(this.origin).addScaledVector(this.direction,t),Cf.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){aL.copy(e).add(t).multiplyScalar(.5),zE.copy(t).sub(e).normalize(),lp.copy(this.origin).sub(aL);const s=e.distanceTo(t)*.5,a=-this.direction.dot(zE),o=lp.dot(this.direction),l=-lp.dot(zE),u=lp.lengthSq(),c=Math.abs(1-a*a);let d,f,h,p;if(c>0)if(d=a*l-o,f=a*o-l,p=s*c,d>=0)if(f>=-p)if(f<=p){const m=1/c;d*=m,f*=m,h=d*(d+a*f+2*o)+f*(a*d+f+2*l)+u}else f=s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;else f=-s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;else f<=-p?(d=Math.max(0,-(-a*s+o)),f=d>0?-s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+u):f<=p?(d=0,f=Math.min(Math.max(-s,-l),s),h=f*(f+2*l)+u):(d=Math.max(0,-(a*s+o)),f=d>0?s:Math.min(Math.max(-s,-l),s),h=-d*d+f*(f+2*l)+u);else f=a>0?-s:s,d=Math.max(0,-(a*f+o)),h=-d*d+f*(f+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(aL).addScaledVector(zE,f),h}intersectSphere(e,t){Cf.subVectors(e.center,this.origin);const i=Cf.dot(this.direction),r=Cf.dot(Cf)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(i=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(i=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,a=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,a=(e.min.y-f.y)*c),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),d>=0?(o=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(o=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Cf)!==null}intersectTriangle(e,t,i,r,s){oL.subVectors(t,e),HE.subVectors(i,e),lL.crossVectors(oL,HE);let a=this.direction.dot(lL),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;lp.subVectors(this.origin,e);const l=o*this.direction.dot(HE.crossVectors(lp,HE));if(l<0)return null;const u=o*this.direction.dot(oL.cross(lp));if(u<0||l+u>a)return null;const c=-o*lp.dot(lL);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}};class Pi{constructor(e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g){Pi.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g)}set(e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=d,v[14]=f,v[3]=h,v[7]=p,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Pi().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Oy.setFromMatrixColumn(e,0).length(),s=1/Oy.setFromMatrixColumn(e,1).length(),a=1/Oy.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const f=a*c,h=a*d,p=o*c,m=o*d;t[0]=l*c,t[4]=-l*d,t[8]=u,t[1]=h+p*u,t[5]=f-m*u,t[9]=-o*l,t[2]=m-f*u,t[6]=p+h*u,t[10]=a*l}else if(e.order==="YXZ"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f+m*o,t[4]=p*o-h,t[8]=a*u,t[1]=a*d,t[5]=a*c,t[9]=-o,t[2]=h*o-p,t[6]=m+f*o,t[10]=a*l}else if(e.order==="ZXY"){const f=l*c,h=l*d,p=u*c,m=u*d;t[0]=f-m*o,t[4]=-a*d,t[8]=p+h*o,t[1]=h+p*o,t[5]=a*c,t[9]=m-f*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const f=a*c,h=a*d,p=o*c,m=o*d;t[0]=l*c,t[4]=p*u-h,t[8]=f*u+m,t[1]=l*d,t[5]=m*u+f,t[9]=h*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const f=a*l,h=a*u,p=o*l,m=o*u;t[0]=l*c,t[4]=m-f*d,t[8]=p*d+h,t[1]=d,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=h*d+p,t[10]=f-m*d}else if(e.order==="XZY"){const f=a*l,h=a*u,p=o*l,m=o*u;t[0]=l*c,t[4]=-d,t[8]=u*c,t[1]=f*d+m,t[5]=a*c,t[9]=h*d-p,t[2]=p*d-h,t[6]=o*c,t[10]=m*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(dgt,e,fgt)}lookAt(e,t,i){const r=this.elements;return Kl.subVectors(e,t),Kl.lengthSq()===0&&(Kl.z=1),Kl.normalize(),up.crossVectors(i,Kl),up.lengthSq()===0&&(Math.abs(i.z)===1?Kl.x+=1e-4:Kl.z+=1e-4,Kl.normalize(),up.crossVectors(i,Kl)),up.normalize(),VE.crossVectors(Kl,up),r[0]=up.x,r[4]=VE.x,r[8]=Kl.x,r[1]=up.y,r[5]=VE.y,r[9]=Kl.y,r[2]=up.z,r[6]=VE.z,r[10]=Kl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],c=i[1],d=i[5],f=i[9],h=i[13],p=i[2],m=i[6],g=i[10],v=i[14],_=i[3],y=i[7],b=i[11],x=i[15],w=r[0],A=r[4],T=r[8],C=r[12],E=r[1],I=r[5],k=r[9],O=r[13],U=r[2],z=r[6],L=r[10],G=r[14],H=r[3],F=r[7],X=r[11],te=r[15];return s[0]=a*w+o*E+l*U+u*H,s[4]=a*A+o*I+l*z+u*F,s[8]=a*T+o*k+l*L+u*X,s[12]=a*C+o*O+l*G+u*te,s[1]=c*w+d*E+f*U+h*H,s[5]=c*A+d*I+f*z+h*F,s[9]=c*T+d*k+f*L+h*X,s[13]=c*C+d*O+f*G+h*te,s[2]=p*w+m*E+g*U+v*H,s[6]=p*A+m*I+g*z+v*F,s[10]=p*T+m*k+g*L+v*X,s[14]=p*C+m*O+g*G+v*te,s[3]=_*w+y*E+b*U+x*H,s[7]=_*A+y*I+b*z+x*F,s[11]=_*T+y*k+b*L+x*X,s[15]=_*C+y*O+b*G+x*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],d=e[6],f=e[10],h=e[14],p=e[3],m=e[7],g=e[11],v=e[15];return p*(+s*l*d-r*u*d-s*o*f+i*u*f+r*o*h-i*l*h)+m*(+t*l*h-t*u*f+s*a*f-r*a*h+r*u*c-s*l*c)+g*(+t*u*d-t*o*h-s*a*d+i*a*h+s*o*c-i*u*c)+v*(-r*o*c-t*l*d+t*o*f+r*a*d-i*a*f+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],d=e[9],f=e[10],h=e[11],p=e[12],m=e[13],g=e[14],v=e[15],_=d*g*u-m*f*u+m*l*h-o*g*h-d*l*v+o*f*v,y=p*f*u-c*g*u-p*l*h+a*g*h+c*l*v-a*f*v,b=c*m*u-p*d*u+p*o*h-a*m*h-c*o*v+a*d*v,x=p*d*l-c*m*l-p*o*f+a*m*f+c*o*g-a*d*g,w=t*_+i*y+r*b+s*x;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/w;return e[0]=_*A,e[1]=(m*f*s-d*g*s-m*r*h+i*g*h+d*r*v-i*f*v)*A,e[2]=(o*g*s-m*l*s+m*r*u-i*g*u-o*r*v+i*l*v)*A,e[3]=(d*l*s-o*f*s-d*r*u+i*f*u+o*r*h-i*l*h)*A,e[4]=y*A,e[5]=(c*g*s-p*f*s+p*r*h-t*g*h-c*r*v+t*f*v)*A,e[6]=(p*l*s-a*g*s-p*r*u+t*g*u+a*r*v-t*l*v)*A,e[7]=(a*f*s-c*l*s+c*r*u-t*f*u-a*r*h+t*l*h)*A,e[8]=b*A,e[9]=(p*d*s-c*m*s-p*i*h+t*m*h+c*i*v-t*d*v)*A,e[10]=(a*m*s-p*o*s+p*i*u-t*m*u-a*i*v+t*o*v)*A,e[11]=(c*o*s-a*d*s-c*i*u+t*d*u+a*i*h-t*o*h)*A,e[12]=x*A,e[13]=(c*m*r-p*d*r+p*i*f-t*m*f-c*i*g+t*d*g)*A,e[14]=(p*o*r-a*m*r-p*i*l+t*m*l+a*i*g-t*o*g)*A,e[15]=(a*d*r-c*o*r+c*i*l-t*d*l-a*i*f+t*o*f)*A,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+i,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,d=o+o,f=s*u,h=s*c,p=s*d,m=a*c,g=a*d,v=o*d,_=l*u,y=l*c,b=l*d,x=i.x,w=i.y,A=i.z;return r[0]=(1-(m+v))*x,r[1]=(h+b)*x,r[2]=(p-y)*x,r[3]=0,r[4]=(h-b)*w,r[5]=(1-(f+v))*w,r[6]=(g+_)*w,r[7]=0,r[8]=(p+y)*A,r[9]=(g-_)*A,r[10]=(1-(f+m))*A,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Oy.set(r[0],r[1],r[2]).length();const a=Oy.set(r[4],r[5],r[6]).length(),o=Oy.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Cc.copy(this);const u=1/s,c=1/a,d=1/o;return Cc.elements[0]*=u,Cc.elements[1]*=u,Cc.elements[2]*=u,Cc.elements[4]*=c,Cc.elements[5]*=c,Cc.elements[6]*=c,Cc.elements[8]*=d,Cc.elements[9]*=d,Cc.elements[10]*=d,t.setFromRotationMatrix(Cc),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a,o=jf){const l=this.elements,u=2*s/(t-e),c=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let h,p;if(o===jf)h=-(a+s)/(a-s),p=-2*a*s/(a-s);else if(o===pI)h=-a/(a-s),p=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=u,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=h,l[14]=p,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,a,o=jf){const l=this.elements,u=1/(t-e),c=1/(i-r),d=1/(a-s),f=(t+e)*u,h=(i+r)*c;let p,m;if(o===jf)p=(a+s)*d,m=-2*d;else if(o===pI)p=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-h,l[2]=0,l[6]=0,l[10]=m,l[14]=-p,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Oy=new ft,Cc=new Pi,dgt=new ft(0,0,0),fgt=new ft(1,1,1),up=new ft,VE=new ft,Kl=new ft,RQ=new Pi,PQ=new bs;class gh{constructor(e=0,t=0,i=0,r=gh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],d=r[2],f=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(Ki(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ki(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ki(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,h),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ki(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,h),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Ki(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-Ki(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return RQ.makeRotationFromQuaternion(e),this.setFromRotationMatrix(RQ,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return PQ.setFromEuler(this),this.setFromQuaternion(PQ,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gh.DEFAULT_ORDER="XYZ";class ipe{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let hgt=0;const kQ=new ft,Ny=new bs,Af=new Pi,$E=new ft,yx=new ft,pgt=new ft,mgt=new bs,LQ=new ft(1,0,0),OQ=new ft(0,1,0),NQ=new ft(0,0,1),BQ={type:"added"},ggt={type:"removed"},By={type:"childadded",child:null},uL={type:"childremoved",child:null};class va extends fv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:hgt++}),this.uuid=Kb(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=va.DEFAULT_UP.clone();const e=new ft,t=new gh,i=new bs,r=new ft(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Pi},normalMatrix:{value:new Ri}}),this.matrix=new Pi,this.matrixWorld=new Pi,this.matrixAutoUpdate=va.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=va.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ipe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ny.setFromAxisAngle(e,t),this.quaternion.multiply(Ny),this}rotateOnWorldAxis(e,t){return Ny.setFromAxisAngle(e,t),this.quaternion.premultiply(Ny),this}rotateX(e){return this.rotateOnAxis(LQ,e)}rotateY(e){return this.rotateOnAxis(OQ,e)}rotateZ(e){return this.rotateOnAxis(NQ,e)}translateOnAxis(e,t){return kQ.copy(e).applyQuaternion(this.quaternion),this.position.add(kQ.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(LQ,e)}translateY(e){return this.translateOnAxis(OQ,e)}translateZ(e){return this.translateOnAxis(NQ,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Af.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?$E.copy(e):$E.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),yx.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Af.lookAt(yx,$E,this.up):Af.lookAt($E,yx,this.up),this.quaternion.setFromRotationMatrix(Af),r&&(Af.extractRotation(r.matrixWorld),Ny.setFromRotationMatrix(Af),this.quaternion.premultiply(Ny.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(BQ),By.child=e,this.dispatchEvent(By),By.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(ggt),uL.child=e,this.dispatchEvent(uL),uL.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Af.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Af.multiply(e.parent.matrixWorld)),e.applyMatrix4(Af),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(BQ),By.child=e,this.dispatchEvent(By),By.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yx,e,pgt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yx,mgt,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(o=>({boxInitialized:o.boxInitialized,boxMin:o.box.min.toArray(),boxMax:o.box.max.toArray(),sphereInitialized:o.sphereInitialized,sphereRadius:o.sphere.radius,sphereCenter:o.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const d=l[u];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),d=a(e.shapes),f=a(e.skeletons),h=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),d.length>0&&(i.shapes=d),f.length>0&&(i.skeletons=f),h.length>0&&(i.animations=h),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}va.DEFAULT_UP=new ft(0,1,0);va.DEFAULT_MATRIX_AUTO_UPDATE=!0;va.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ac=new ft,Ef=new ft,cL=new ft,Mf=new ft,Fy=new ft,Uy=new ft,FQ=new ft,dL=new ft,fL=new ft,hL=new ft,pL=new gs,mL=new gs,gL=new gs;class kc{constructor(e=new ft,t=new ft,i=new ft){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ac.subVectors(e,t),r.cross(Ac);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ac.subVectors(r,t),Ef.subVectors(i,t),cL.subVectors(e,t);const a=Ac.dot(Ac),o=Ac.dot(Ef),l=Ac.dot(cL),u=Ef.dot(Ef),c=Ef.dot(cL),d=a*u-o*o;if(d===0)return s.set(0,0,0),null;const f=1/d,h=(u*l-o*c)*f,p=(a*c-o*l)*f;return s.set(1-h-p,p,h)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Mf)===null?!1:Mf.x>=0&&Mf.y>=0&&Mf.x+Mf.y<=1}static getInterpolation(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,Mf)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Mf.x),l.addScaledVector(a,Mf.y),l.addScaledVector(o,Mf.z),l)}static getInterpolatedAttribute(e,t,i,r,s,a){return pL.setScalar(0),mL.setScalar(0),gL.setScalar(0),pL.fromBufferAttribute(e,t),mL.fromBufferAttribute(e,i),gL.fromBufferAttribute(e,r),a.setScalar(0),a.addScaledVector(pL,s.x),a.addScaledVector(mL,s.y),a.addScaledVector(gL,s.z),a}static isFrontFacing(e,t,i,r){return Ac.subVectors(i,t),Ef.subVectors(e,t),Ac.cross(Ef).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ac.subVectors(this.c,this.b),Ef.subVectors(this.a,this.b),Ac.cross(Ef).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return kc.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return kc.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return kc.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return kc.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return kc.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Fy.subVectors(r,i),Uy.subVectors(s,i),dL.subVectors(e,i);const l=Fy.dot(dL),u=Uy.dot(dL);if(l<=0&&u<=0)return t.copy(i);fL.subVectors(e,r);const c=Fy.dot(fL),d=Uy.dot(fL);if(c>=0&&d<=c)return t.copy(r);const f=l*d-c*u;if(f<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(i).addScaledVector(Fy,a);hL.subVectors(e,s);const h=Fy.dot(hL),p=Uy.dot(hL);if(p>=0&&h<=p)return t.copy(s);const m=h*u-l*p;if(m<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(i).addScaledVector(Uy,o);const g=c*p-h*d;if(g<=0&&d-c>=0&&h-p>=0)return FQ.subVectors(s,r),o=(d-c)/(d-c+(h-p)),t.copy(r).addScaledVector(FQ,o);const v=1/(g+m+f);return a=m*v,o=f*v,t.copy(i).addScaledVector(Fy,a).addScaledVector(Uy,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rpe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cp={h:0,s:0,l:0},GE={h:0,s:0,l:0};function vL(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ir{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ou){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Mr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Mr.workingColorSpace){return this.r=e,this.g=t,this.b=i,Mr.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Mr.workingColorSpace){if(e=fz(e,1),t=Ki(t,0,1),i=Ki(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=vL(a,s,e+1/3),this.g=vL(a,s,e),this.b=vL(a,s,e-1/3)}return Mr.toWorkingColorSpace(this,r),this}setStyle(e,t=Ou){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ou){const i=rpe[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=eh(e.r),this.g=eh(e.g),this.b=eh(e.b),this}copyLinearToSRGB(e){return this.r=Z1(e.r),this.g=Z1(e.g),this.b=Z1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ou){return Mr.fromWorkingColorSpace(uo.copy(this),e),Math.round(Ki(uo.r*255,0,255))*65536+Math.round(Ki(uo.g*255,0,255))*256+Math.round(Ki(uo.b*255,0,255))}getHexString(e=Ou){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Mr.workingColorSpace){Mr.fromWorkingColorSpace(uo.copy(this),t);const i=uo.r,r=uo.g,s=uo.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const d=a-o;switch(u=c<=.5?d/(a+o):d/(2-a-o),a){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Mr.workingColorSpace){return Mr.fromWorkingColorSpace(uo.copy(this),t),e.r=uo.r,e.g=uo.g,e.b=uo.b,e}getStyle(e=Ou){Mr.fromWorkingColorSpace(uo.copy(this),e);const t=uo.r,i=uo.g,r=uo.b;return e!==Ou?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(cp),this.setHSL(cp.h+e,cp.s+t,cp.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cp),e.getHSL(GE);const i=M2(cp.h,GE.h,t),r=M2(cp.s,GE.s,t),s=M2(cp.l,GE.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const uo=new Ir;Ir.NAMES=rpe;let vgt=0;class uR extends fv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vgt++}),this.uuid=Kb(),this.name="",this.type="Material",this.blending=qp,this.side=Jd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Zw,this.blendDst=Jw,this.blendEquation=Gm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ir(0,0,0),this.blendAlpha=0,this.depthFunc=K_,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wQ,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Dy,this.stencilZFail=Dy,this.stencilZPass=Dy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qp&&(i.blending=this.blending),this.side!==Jd&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Zw&&(i.blendSrc=this.blendSrc),this.blendDst!==Jw&&(i.blendDst=this.blendDst),this.blendEquation!==Gm&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==K_&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==wQ&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Dy&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Dy&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Dy&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Jg extends uR{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ir(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gh,this.combine=zhe,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const $f=ygt();function ygt(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function _gt(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ki(n,-65504,65504),$f.floatView[0]=n;const e=$f.uint32View[0],t=e>>23&511;return $f.baseTable[t]+((e&8388607)>>$f.shiftTable[t])}function bgt(n){const e=n>>10;return $f.uint32View[0]=$f.mantissaTable[$f.offsetTable[e]+(n&1023)]+$f.exponentTable[e],$f.floatView[0]}const nT={toHalfFloat:_gt,fromHalfFloat:bgt},Js=new ft,WE=new oi;class ec{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=TQ,this.updateRanges=[],this.gpuType=Uc,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)WE.fromBufferAttribute(this,t),WE.applyMatrix3(e),this.setXY(t,WE.x,WE.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyMatrix3(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyMatrix4(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyNormalMatrix(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.transformDirection(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=r1(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=zo(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=r1(t,this.array)),t}setX(e,t){return this.normalized&&(t=zo(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=r1(t,this.array)),t}setY(e,t){return this.normalized&&(t=zo(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=r1(t,this.array)),t}setZ(e,t){return this.normalized&&(t=zo(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=r1(t,this.array)),t}setW(e,t){return this.normalized&&(t=zo(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=zo(t,this.array),i=zo(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=zo(t,this.array),i=zo(i,this.array),r=zo(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=zo(t,this.array),i=zo(i,this.array),r=zo(r,this.array),s=zo(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==TQ&&(e.usage=this.usage),e}}class spe extends ec{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ape extends ec{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class cu extends ec{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Sgt=0;const Au=new Pi,yL=new va,zy=new ft,Xl=new Ld,_x=new Ld,Ea=new ft;class mc extends fv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sgt++}),this.uuid=Kb(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Jhe(e)?ape:spe)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ri().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Au.makeRotationFromQuaternion(e),this.applyMatrix4(Au),this}rotateX(e){return Au.makeRotationX(e),this.applyMatrix4(Au),this}rotateY(e){return Au.makeRotationY(e),this.applyMatrix4(Au),this}rotateZ(e){return Au.makeRotationZ(e),this.applyMatrix4(Au),this}translate(e,t,i){return Au.makeTranslation(e,t,i),this.applyMatrix4(Au),this}scale(e,t,i){return Au.makeScale(e,t,i),this.applyMatrix4(Au),this}lookAt(e){return yL.lookAt(e),yL.updateMatrix(),this.applyMatrix4(yL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zy).negate(),this.translate(zy.x,zy.y,zy.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const a=e[r];i.push(a.x,a.y,a.z||0)}this.setAttribute("position",new cu(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ld);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new ft(-1/0,-1/0,-1/0),new ft(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Xl.setFromBufferAttribute(s),this.morphTargetsRelative?(Ea.addVectors(this.boundingBox.min,Xl.min),this.boundingBox.expandByPoint(Ea),Ea.addVectors(this.boundingBox.max,Xl.max),this.boundingBox.expandByPoint(Ea)):(this.boundingBox.expandByPoint(Xl.min),this.boundingBox.expandByPoint(Xl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new hz);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new ft,1/0);return}if(e){const i=this.boundingSphere.center;if(Xl.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];_x.setFromBufferAttribute(o),this.morphTargetsRelative?(Ea.addVectors(Xl.min,_x.min),Xl.expandByPoint(Ea),Ea.addVectors(Xl.max,_x.max),Xl.expandByPoint(Ea)):(Xl.expandByPoint(_x.min),Xl.expandByPoint(_x.max))}Xl.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Ea.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ea));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)Ea.fromBufferAttribute(o,u),l&&(zy.fromBufferAttribute(e,u),Ea.add(zy)),r=Math.max(r,i.distanceToSquared(Ea))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ec(new Float32Array(4*i.count),4));const a=this.getAttribute("tangent"),o=[],l=[];for(let T=0;T<i.count;T++)o[T]=new ft,l[T]=new ft;const u=new ft,c=new ft,d=new ft,f=new oi,h=new oi,p=new oi,m=new ft,g=new ft;function v(T,C,E){u.fromBufferAttribute(i,T),c.fromBufferAttribute(i,C),d.fromBufferAttribute(i,E),f.fromBufferAttribute(s,T),h.fromBufferAttribute(s,C),p.fromBufferAttribute(s,E),c.sub(u),d.sub(u),h.sub(f),p.sub(f);const I=1/(h.x*p.y-p.x*h.y);isFinite(I)&&(m.copy(c).multiplyScalar(p.y).addScaledVector(d,-h.y).multiplyScalar(I),g.copy(d).multiplyScalar(h.x).addScaledVector(c,-p.x).multiplyScalar(I),o[T].add(m),o[C].add(m),o[E].add(m),l[T].add(g),l[C].add(g),l[E].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let T=0,C=_.length;T<C;++T){const E=_[T],I=E.start,k=E.count;for(let O=I,U=I+k;O<U;O+=3)v(e.getX(O+0),e.getX(O+1),e.getX(O+2))}const y=new ft,b=new ft,x=new ft,w=new ft;function A(T){x.fromBufferAttribute(r,T),w.copy(x);const C=o[T];y.copy(C),y.sub(x.multiplyScalar(x.dot(C))).normalize(),b.crossVectors(w,C);const I=b.dot(l[T])<0?-1:1;a.setXYZW(T,y.x,y.y,y.z,I)}for(let T=0,C=_.length;T<C;++T){const E=_[T],I=E.start,k=E.count;for(let O=I,U=I+k;O<U;O+=3)A(e.getX(O+0)),A(e.getX(O+1)),A(e.getX(O+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ec(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let f=0,h=i.count;f<h;f++)i.setXYZ(f,0,0,0);const r=new ft,s=new ft,a=new ft,o=new ft,l=new ft,u=new ft,c=new ft,d=new ft;if(e)for(let f=0,h=e.count;f<h;f+=3){const p=e.getX(f+0),m=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,m),a.fromBufferAttribute(t,g),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,m),u.fromBufferAttribute(i,g),o.add(c),l.add(c),u.add(c),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,u.x,u.y,u.z)}else for(let f=0,h=t.count;f<h;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),a.fromBufferAttribute(t,f+2),c.subVectors(a,s),d.subVectors(r,s),c.cross(d),i.setXYZ(f+0,c.x,c.y,c.z),i.setXYZ(f+1,c.x,c.y,c.z),i.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ea.fromBufferAttribute(e,t),Ea.normalize(),e.setXYZ(t,Ea.x,Ea.y,Ea.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,d=o.normalized,f=new u.constructor(l.length*c);let h=0,p=0;for(let m=0,g=l.length;m<g;m++){o.isInterleavedBufferAttribute?h=l[m]*o.data.stride+o.offset:h=l[m]*c;for(let v=0;v<c;v++)f[p++]=u[h++]}return new ec(f,c,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new mc,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,d=u.length;c<d;c++){const f=u[c],h=e(f,i);l.push(h)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let d=0,f=u.length;d<f;d++){const h=u[d];c.push(h.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],d=s[u];for(let f=0,h=d.length;f<h;f++)c.push(d[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const d=a[u];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UQ=new Pi,Cm=new npe,qE=new hz,zQ=new ft,jE=new ft,KE=new ft,XE=new ft,_L=new ft,YE=new ft,HQ=new ft,QE=new ft;class Hs extends va{constructor(e=new mc,t=new Jg){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){YE.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],d=s[l];c!==0&&(_L.fromBufferAttribute(d,e),a?YE.addScaledVector(_L,c):YE.addScaledVector(_L.sub(t),c))}t.add(YE)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),qE.copy(i.boundingSphere),qE.applyMatrix4(s),Cm.copy(e.ray).recast(e.near),!(qE.containsPoint(Cm.origin)===!1&&(Cm.intersectSphere(qE,zQ)===null||Cm.origin.distanceToSquared(zQ)>(e.far-e.near)**2))&&(UQ.copy(s).invert(),Cm.copy(e.ray).applyMatrix4(UQ),!(i.boundingBox!==null&&Cm.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Cm)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,o=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,d=s.attributes.normal,f=s.groups,h=s.drawRange;if(o!==null)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const g=f[p],v=a[g.materialIndex],_=Math.max(g.start,h.start),y=Math.min(o.count,Math.min(g.start+g.count,h.start+h.count));for(let b=_,x=y;b<x;b+=3){const w=o.getX(b),A=o.getX(b+1),T=o.getX(b+2);r=ZE(this,v,e,i,u,c,d,w,A,T),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(o.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const _=o.getX(g),y=o.getX(g+1),b=o.getX(g+2);r=ZE(this,a,e,i,u,c,d,_,y,b),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(a))for(let p=0,m=f.length;p<m;p++){const g=f[p],v=a[g.materialIndex],_=Math.max(g.start,h.start),y=Math.min(l.count,Math.min(g.start+g.count,h.start+h.count));for(let b=_,x=y;b<x;b+=3){const w=b,A=b+1,T=b+2;r=ZE(this,v,e,i,u,c,d,w,A,T),r&&(r.faceIndex=Math.floor(b/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{const p=Math.max(0,h.start),m=Math.min(l.count,h.start+h.count);for(let g=p,v=m;g<v;g+=3){const _=g,y=g+1,b=g+2;r=ZE(this,a,e,i,u,c,d,_,y,b),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}}function xgt(n,e,t,i,r,s,a,o){let l;if(e.side===Il?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Jd,o),l===null)return null;QE.copy(o),QE.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(QE);return u<t.near||u>t.far?null:{distance:u,point:QE.clone(),object:n}}function ZE(n,e,t,i,r,s,a,o,l,u){n.getVertexPosition(o,jE),n.getVertexPosition(l,KE),n.getVertexPosition(u,XE);const c=xgt(n,e,t,i,jE,KE,XE,HQ);if(c){const d=new ft;kc.getBarycoord(HQ,jE,KE,XE,d),r&&(c.uv=kc.getInterpolatedAttribute(r,o,l,u,d,new oi)),s&&(c.uv1=kc.getInterpolatedAttribute(s,o,l,u,d,new oi)),a&&(c.normal=kc.getInterpolatedAttribute(a,o,l,u,d,new ft),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const f={a:o,b:l,c:u,normal:new ft,materialIndex:0};kc.getNormal(jE,KE,XE,f.normal),c.face=f,c.barycoord=d}return c}class Xb extends mc{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],d=[];let f=0,h=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new cu(u,3)),this.setAttribute("normal",new cu(c,3)),this.setAttribute("uv",new cu(d,2));function p(m,g,v,_,y,b,x,w,A,T,C){const E=b/A,I=x/T,k=b/2,O=x/2,U=w/2,z=A+1,L=T+1;let G=0,H=0;const F=new ft;for(let X=0;X<L;X++){const te=X*I-O;for(let re=0;re<z;re++){const ie=re*E-k;F[m]=ie*_,F[g]=te*y,F[v]=U,u.push(F.x,F.y,F.z),F[m]=0,F[g]=0,F[v]=w>0?1:-1,c.push(F.x,F.y,F.z),d.push(re/A),d.push(1-X/T),G+=1}}for(let X=0;X<T;X++)for(let te=0;te<A;te++){const re=f+te+z*X,ie=f+te+z*(X+1),le=f+(te+1)+z*(X+1),ge=f+(te+1)+z*X;l.push(re,ie,ge),l.push(ie,le,ge),H+=6}o.addGroup(h,H,C),h+=H,f+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xb(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function eb(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Ho(n){const e={};for(let t=0;t<n.length;t++){const i=eb(n[t]);for(const r in i)e[r]=i[r]}return e}function wgt(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ope(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Mr.workingColorSpace}const Tgt={clone:eb,merge:Ho};var Cgt=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Agt=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class du extends uR{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Cgt,this.fragmentShader=Agt,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=eb(e.uniforms),this.uniformsGroups=wgt(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class lpe extends va{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pi,this.projectionMatrix=new Pi,this.projectionMatrixInverse=new Pi,this.coordinateSystem=jf}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const dp=new ft,VQ=new oi,$Q=new oi;class Hu extends lpe{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=tT*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(E2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return tT*2*Math.atan(Math.tan(E2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){dp.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(dp.x,dp.y).multiplyScalar(-e/dp.z),dp.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(dp.x,dp.y).multiplyScalar(-e/dp.z)}getViewSize(e,t){return this.getViewBounds(e,VQ,$Q),t.subVectors($Q,VQ)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(E2*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/u,r*=a.width/l,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Hy=-90,Vy=1;class Egt extends va{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Hu(Hy,Vy,e,t);r.layers=this.layers,this.add(r);const s=new Hu(Hy,Vy,e,t);s.layers=this.layers,this.add(s);const a=new Hu(Hy,Vy,e,t);a.layers=this.layers,this.add(a);const o=new Hu(Hy,Vy,e,t);o.layers=this.layers,this.add(o);const l=new Hu(Hy,Vy,e,t);l.layers=this.layers,this.add(l);const u=new Hu(Hy,Vy,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,o,l]=t;for(const u of t)this.remove(u);if(e===jf)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===pI)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,a,o,l,u,c]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,a),e.setRenderTarget(i,2,r),e.render(t,o),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,r),e.render(t,c),e.setRenderTarget(d,f,h),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class upe extends Jo{constructor(e,t,i,r,s,a,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:X_,super(e,t,i,r,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Mgt extends _0{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new upe(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:kd}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Xb(5,5,5),s=new du({name:"CubemapFromEquirect",uniforms:eb(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Il,blending:Wp});s.uniforms.tEquirect.value=t;const a=new Hs(r,s),o=t.minFilter;return t.minFilter===dg&&(t.minFilter=kd),new Egt(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}class Igt extends va{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gh,this.environmentIntensity=1,this.environmentRotation=new gh,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class fp extends Jo{constructor(e=null,t=1,i=1,r,s,a,o,l,u=uu,c=uu,d,f){super(null,a,o,l,u,c,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dgt extends ec{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bL=new ft,Rgt=new ft,Pgt=new Ri;class wp{constructor(e=new ft(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=bL.subVectors(i,t).cross(Rgt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(bL),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Pgt.getNormalMatrix(e),r=this.coplanarPoint(bL).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Am=new hz,JE=new ft;class cpe{constructor(e=new wp,t=new wp,i=new wp,r=new wp,s=new wp,a=new wp){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=jf){const i=this.planes,r=e.elements,s=r[0],a=r[1],o=r[2],l=r[3],u=r[4],c=r[5],d=r[6],f=r[7],h=r[8],p=r[9],m=r[10],g=r[11],v=r[12],_=r[13],y=r[14],b=r[15];if(i[0].setComponents(l-s,f-u,g-h,b-v).normalize(),i[1].setComponents(l+s,f+u,g+h,b+v).normalize(),i[2].setComponents(l+a,f+c,g+p,b+_).normalize(),i[3].setComponents(l-a,f-c,g-p,b-_).normalize(),i[4].setComponents(l-o,f-d,g-m,b-y).normalize(),t===jf)i[5].setComponents(l+o,f+d,g+m,b+y).normalize();else if(t===pI)i[5].setComponents(o,d,m,y).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Am.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Am.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Am)}intersectsSprite(e){return Am.center.set(0,0,0),Am.radius=.7071067811865476,Am.applyMatrix4(e.matrixWorld),this.intersectsSphere(Am)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(JE.x=r.normal.x>0?e.max.x:e.min.x,JE.y=r.normal.y>0?e.max.y:e.min.y,JE.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(JE)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class eM extends va{constructor(){super(),this.isGroup=!0,this.type="Group"}}class pz extends Jo{constructor(e,t,i,r,s,a,o,l,u,c=Rg){if(c!==Rg&&c!==Z_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===Rg&&(i=ju),i===void 0&&c===Z_&&(i=Q_),super(null,r,s,a,o,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:uu,this.minFilter=l!==void 0?l:uu,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class iT extends mc{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],d=[],f=[],h=[];let p=0;const m=[],g=i/2;let v=0;_(),a===!1&&(e>0&&y(!0),t>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new cu(d,3)),this.setAttribute("normal",new cu(f,3)),this.setAttribute("uv",new cu(h,2));function _(){const b=new ft,x=new ft;let w=0;const A=(t-e)/i;for(let T=0;T<=s;T++){const C=[],E=T/s,I=E*(t-e)+e;for(let k=0;k<=r;k++){const O=k/r,U=O*l+o,z=Math.sin(U),L=Math.cos(U);x.x=I*z,x.y=-E*i+g,x.z=I*L,d.push(x.x,x.y,x.z),b.set(z,A,L).normalize(),f.push(b.x,b.y,b.z),h.push(O,1-E),C.push(p++)}m.push(C)}for(let T=0;T<r;T++)for(let C=0;C<s;C++){const E=m[C][T],I=m[C+1][T],k=m[C+1][T+1],O=m[C][T+1];(e>0||C!==0)&&(c.push(E,I,O),w+=3),(t>0||C!==s-1)&&(c.push(I,k,O),w+=3)}u.addGroup(v,w,0),v+=w}function y(b){const x=p,w=new oi,A=new ft;let T=0;const C=b===!0?e:t,E=b===!0?1:-1;for(let k=1;k<=r;k++)d.push(0,g*E,0),f.push(0,E,0),h.push(.5,.5),p++;const I=p;for(let k=0;k<=r;k++){const U=k/r*l+o,z=Math.cos(U),L=Math.sin(U);A.x=C*L,A.y=g*E,A.z=C*z,d.push(A.x,A.y,A.z),f.push(0,E,0),w.x=z*.5+.5,w.y=L*.5*E+.5,h.push(w.x,w.y),p++}for(let k=0;k<r;k++){const O=x+k,U=I+k;b===!0?c.push(U,U+1,O):c.push(U+1,U,O),T+=3}u.addGroup(v,T,b===!0?1:2),v+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iT(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class mz extends iT{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new mz(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class tb extends mc{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,c=l+1,d=e/o,f=t/l,h=[],p=[],m=[],g=[];for(let v=0;v<c;v++){const _=v*f-a;for(let y=0;y<u;y++){const b=y*d-s;p.push(b,-_,0),m.push(0,0,1),g.push(y/o),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let _=0;_<o;_++){const y=_+u*v,b=_+u*(v+1),x=_+1+u*(v+1),w=_+1+u*v;h.push(y,b,w),h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new cu(p,3)),this.setAttribute("normal",new cu(m,3)),this.setAttribute("uv",new cu(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tb(e.width,e.height,e.widthSegments,e.heightSegments)}}class gI extends mc{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const c=[],d=new ft,f=new ft,h=[],p=[],m=[],g=[];for(let v=0;v<=i;v++){const _=[],y=v/i;let b=0;v===0&&a===0?b=.5/t:v===i&&l===Math.PI&&(b=-.5/t);for(let x=0;x<=t;x++){const w=x/t;d.x=-e*Math.cos(r+w*s)*Math.sin(a+y*o),d.y=e*Math.cos(a+y*o),d.z=e*Math.sin(r+w*s)*Math.sin(a+y*o),p.push(d.x,d.y,d.z),f.copy(d).normalize(),m.push(f.x,f.y,f.z),g.push(w+b,1-y),_.push(u++)}c.push(_)}for(let v=0;v<i;v++)for(let _=0;_<t;_++){const y=c[v][_+1],b=c[v][_],x=c[v+1][_],w=c[v+1][_+1];(v!==0||a>0)&&h.push(y,b,w),(v!==i-1||l<Math.PI)&&h.push(b,x,w)}this.setIndex(h),this.setAttribute("position",new cu(p,3)),this.setAttribute("normal",new cu(m,3)),this.setAttribute("uv",new cu(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gI(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class kgt extends uR{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Amt,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lgt extends uR{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class gz extends lpe{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Ogt extends mc{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ngt extends Hu{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class GQ{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Ki(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ki(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}function WQ(n,e,t,i){const r=Bgt(i);switch(t){case Whe:return n*e;case jhe:return n*e;case Khe:return n*e*2;case Xhe:return n*e/r.components*r.byteLength;case lR:return n*e/r.components*r.byteLength;case cz:return n*e*2/r.components*r.byteLength;case dz:return n*e*2/r.components*r.byteLength;case qhe:return n*e*3/r.components*r.byteLength;case Yo:return n*e*4/r.components*r.byteLength;case Q1:return n*e*4/r.components*r.byteLength;case o3:case l3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case u3:case c3:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case DN:case PN:return Math.max(n,16)*Math.max(e,8)/4;case IN:case RN:return Math.max(n,8)*Math.max(e,8)/2;case kN:case LN:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case ON:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case NN:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case BN:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case FN:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case UN:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case zN:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case HN:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case VN:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case $N:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case GN:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case WN:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case qN:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case jN:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case KN:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case XN:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case d3:case YN:case QN:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Yhe:case ZN:return Math.ceil(n/4)*Math.ceil(e/4)*8;case JN:case eB:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Bgt(n){switch(n){case ef:case Vhe:return{byteLength:1,components:1};case eT:case $he:case jb:return{byteLength:2,components:1};case lz:case uz:return{byteLength:2,components:4};case ju:case oz:case Uc:return{byteLength:4,components:1};case Ghe:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:az}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=az);/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function dpe(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Fgt(n){const e=new WeakMap;function t(o,l){const u=o.array,c=o.usage,d=u.byteLength,f=n.createBuffer();n.bindBuffer(l,f),n.bufferData(l,u,c),o.onUploadCallback();let h;if(u instanceof Float32Array)h=n.FLOAT;else if(u instanceof Uint16Array)o.isFloat16BufferAttribute?h=n.HALF_FLOAT:h=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)h=n.SHORT;else if(u instanceof Uint32Array)h=n.UNSIGNED_INT;else if(u instanceof Int32Array)h=n.INT;else if(u instanceof Int8Array)h=n.BYTE;else if(u instanceof Uint8Array)h=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)h=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:f,type:h,bytesPerElement:u.BYTES_PER_ELEMENT,version:o.version,size:d}}function i(o,l,u){const c=l.array,d=l.updateRanges;if(n.bindBuffer(u,o),d.length===0)n.bufferSubData(u,0,c);else{d.sort((h,p)=>h.start-p.start);let f=0;for(let h=1;h<d.length;h++){const p=d[f],m=d[h];m.start<=p.start+p.count+1?p.count=Math.max(p.count,m.start+m.count-p.start):(++f,d[f]=m)}d.length=f+1;for(let h=0,p=d.length;h<p;h++){const m=d[h];n.bufferSubData(u,m.start*c.BYTES_PER_ELEMENT,c,m.start,m.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(o){return o.isInterleavedBufferAttribute&&(o=o.data),e.get(o)}function s(o){o.isInterleavedBufferAttribute&&(o=o.data);const l=e.get(o);l&&(n.deleteBuffer(l.buffer),e.delete(o))}function a(o,l){if(o.isInterleavedBufferAttribute&&(o=o.data),o.isGLBufferAttribute){const c=e.get(o);(!c||c.version<o.version)&&e.set(o,{buffer:o.buffer,type:o.type,bytesPerElement:o.elementSize,version:o.version});return}const u=e.get(o);if(u===void 0)e.set(o,t(o,l));else if(u.version<o.version){if(u.size!==o.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,o,l),u.version=o.version}}return{get:r,remove:s,update:a}}var Ugt=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,zgt=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Hgt=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Vgt=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,$gt=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Ggt=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Wgt=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,qgt=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,jgt=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Kgt=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Xgt=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Ygt=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Qgt=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Zgt=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Jgt=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,evt=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,tvt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,nvt=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,ivt=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,rvt=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,svt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,avt=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ovt=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,lvt=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,uvt=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,cvt=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,dvt=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,fvt=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,hvt=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,pvt=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,mvt="gl_FragColor = linearToOutputTexel( gl_FragColor );",gvt=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,vvt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,yvt=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_vt=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,bvt=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Svt=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,xvt=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,wvt=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Tvt=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Cvt=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Avt=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Evt=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Mvt=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ivt=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Dvt=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Rvt=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Pvt=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,kvt=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Lvt=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Ovt=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Nvt=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Bvt=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Fvt=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Uvt=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,zvt=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Hvt=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Vvt=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,$vt=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Gvt=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Wvt=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,qvt=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,jvt=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Kvt=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Xvt=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Yvt=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Qvt=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Zvt=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Jvt=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,eyt=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,tyt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,nyt=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,iyt=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,ryt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,syt=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ayt=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,oyt=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,lyt=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,uyt=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,cyt=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,dyt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,fyt=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,hyt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,pyt=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,myt=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,gyt=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,vyt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,yyt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_yt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,byt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,Syt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,xyt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,wyt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Tyt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Cyt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ayt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Eyt=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Myt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,Iyt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Dyt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Ryt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Pyt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,kyt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Lyt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Oyt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Nyt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Byt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Fyt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Uyt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zyt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Hyt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Vyt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,$yt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Gyt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Wyt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,qyt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,jyt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Kyt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Xyt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Yyt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Qyt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Zyt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Jyt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e1t=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t1t=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n1t=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,i1t=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r1t=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s1t=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,a1t=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,o1t=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l1t=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,u1t=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,c1t=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,d1t=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,f1t=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,h1t=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p1t=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m1t=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,g1t=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,v1t=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wi={alphahash_fragment:Ugt,alphahash_pars_fragment:zgt,alphamap_fragment:Hgt,alphamap_pars_fragment:Vgt,alphatest_fragment:$gt,alphatest_pars_fragment:Ggt,aomap_fragment:Wgt,aomap_pars_fragment:qgt,batching_pars_vertex:jgt,batching_vertex:Kgt,begin_vertex:Xgt,beginnormal_vertex:Ygt,bsdfs:Qgt,iridescence_fragment:Zgt,bumpmap_pars_fragment:Jgt,clipping_planes_fragment:evt,clipping_planes_pars_fragment:tvt,clipping_planes_pars_vertex:nvt,clipping_planes_vertex:ivt,color_fragment:rvt,color_pars_fragment:svt,color_pars_vertex:avt,color_vertex:ovt,common:lvt,cube_uv_reflection_fragment:uvt,defaultnormal_vertex:cvt,displacementmap_pars_vertex:dvt,displacementmap_vertex:fvt,emissivemap_fragment:hvt,emissivemap_pars_fragment:pvt,colorspace_fragment:mvt,colorspace_pars_fragment:gvt,envmap_fragment:vvt,envmap_common_pars_fragment:yvt,envmap_pars_fragment:_vt,envmap_pars_vertex:bvt,envmap_physical_pars_fragment:Rvt,envmap_vertex:Svt,fog_vertex:xvt,fog_pars_vertex:wvt,fog_fragment:Tvt,fog_pars_fragment:Cvt,gradientmap_pars_fragment:Avt,lightmap_pars_fragment:Evt,lights_lambert_fragment:Mvt,lights_lambert_pars_fragment:Ivt,lights_pars_begin:Dvt,lights_toon_fragment:Pvt,lights_toon_pars_fragment:kvt,lights_phong_fragment:Lvt,lights_phong_pars_fragment:Ovt,lights_physical_fragment:Nvt,lights_physical_pars_fragment:Bvt,lights_fragment_begin:Fvt,lights_fragment_maps:Uvt,lights_fragment_end:zvt,logdepthbuf_fragment:Hvt,logdepthbuf_pars_fragment:Vvt,logdepthbuf_pars_vertex:$vt,logdepthbuf_vertex:Gvt,map_fragment:Wvt,map_pars_fragment:qvt,map_particle_fragment:jvt,map_particle_pars_fragment:Kvt,metalnessmap_fragment:Xvt,metalnessmap_pars_fragment:Yvt,morphinstance_vertex:Qvt,morphcolor_vertex:Zvt,morphnormal_vertex:Jvt,morphtarget_pars_vertex:eyt,morphtarget_vertex:tyt,normal_fragment_begin:nyt,normal_fragment_maps:iyt,normal_pars_fragment:ryt,normal_pars_vertex:syt,normal_vertex:ayt,normalmap_pars_fragment:oyt,clearcoat_normal_fragment_begin:lyt,clearcoat_normal_fragment_maps:uyt,clearcoat_pars_fragment:cyt,iridescence_pars_fragment:dyt,opaque_fragment:fyt,packing:hyt,premultiplied_alpha_fragment:pyt,project_vertex:myt,dithering_fragment:gyt,dithering_pars_fragment:vyt,roughnessmap_fragment:yyt,roughnessmap_pars_fragment:_yt,shadowmap_pars_fragment:byt,shadowmap_pars_vertex:Syt,shadowmap_vertex:xyt,shadowmask_pars_fragment:wyt,skinbase_vertex:Tyt,skinning_pars_vertex:Cyt,skinning_vertex:Ayt,skinnormal_vertex:Eyt,specularmap_fragment:Myt,specularmap_pars_fragment:Iyt,tonemapping_fragment:Dyt,tonemapping_pars_fragment:Ryt,transmission_fragment:Pyt,transmission_pars_fragment:kyt,uv_pars_fragment:Lyt,uv_pars_vertex:Oyt,uv_vertex:Nyt,worldpos_vertex:Byt,background_vert:Fyt,background_frag:Uyt,backgroundCube_vert:zyt,backgroundCube_frag:Hyt,cube_vert:Vyt,cube_frag:$yt,depth_vert:Gyt,depth_frag:Wyt,distanceRGBA_vert:qyt,distanceRGBA_frag:jyt,equirect_vert:Kyt,equirect_frag:Xyt,linedashed_vert:Yyt,linedashed_frag:Qyt,meshbasic_vert:Zyt,meshbasic_frag:Jyt,meshlambert_vert:e1t,meshlambert_frag:t1t,meshmatcap_vert:n1t,meshmatcap_frag:i1t,meshnormal_vert:r1t,meshnormal_frag:s1t,meshphong_vert:a1t,meshphong_frag:o1t,meshphysical_vert:l1t,meshphysical_frag:u1t,meshtoon_vert:c1t,meshtoon_frag:d1t,points_vert:f1t,points_frag:h1t,shadow_vert:p1t,shadow_frag:m1t,sprite_vert:g1t,sprite_frag:v1t},zn={common:{diffuse:{value:new Ir(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ri},alphaMap:{value:null},alphaMapTransform:{value:new Ri},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ri}},envmap:{envMap:{value:null},envMapRotation:{value:new Ri},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ri}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ri}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ri},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ri},normalScale:{value:new oi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ri},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ri}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ri}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ri}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ir(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ir(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ri},alphaTest:{value:0},uvTransform:{value:new Ri}},sprite:{diffuse:{value:new Ir(16777215)},opacity:{value:1},center:{value:new oi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ri},alphaMap:{value:null},alphaMapTransform:{value:new Ri},alphaTest:{value:0}}},bd={basic:{uniforms:Ho([zn.common,zn.specularmap,zn.envmap,zn.aomap,zn.lightmap,zn.fog]),vertexShader:Wi.meshbasic_vert,fragmentShader:Wi.meshbasic_frag},lambert:{uniforms:Ho([zn.common,zn.specularmap,zn.envmap,zn.aomap,zn.lightmap,zn.emissivemap,zn.bumpmap,zn.normalmap,zn.displacementmap,zn.fog,zn.lights,{emissive:{value:new Ir(0)}}]),vertexShader:Wi.meshlambert_vert,fragmentShader:Wi.meshlambert_frag},phong:{uniforms:Ho([zn.common,zn.specularmap,zn.envmap,zn.aomap,zn.lightmap,zn.emissivemap,zn.bumpmap,zn.normalmap,zn.displacementmap,zn.fog,zn.lights,{emissive:{value:new Ir(0)},specular:{value:new Ir(1118481)},shininess:{value:30}}]),vertexShader:Wi.meshphong_vert,fragmentShader:Wi.meshphong_frag},standard:{uniforms:Ho([zn.common,zn.envmap,zn.aomap,zn.lightmap,zn.emissivemap,zn.bumpmap,zn.normalmap,zn.displacementmap,zn.roughnessmap,zn.metalnessmap,zn.fog,zn.lights,{emissive:{value:new Ir(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag},toon:{uniforms:Ho([zn.common,zn.aomap,zn.lightmap,zn.emissivemap,zn.bumpmap,zn.normalmap,zn.displacementmap,zn.gradientmap,zn.fog,zn.lights,{emissive:{value:new Ir(0)}}]),vertexShader:Wi.meshtoon_vert,fragmentShader:Wi.meshtoon_frag},matcap:{uniforms:Ho([zn.common,zn.bumpmap,zn.normalmap,zn.displacementmap,zn.fog,{matcap:{value:null}}]),vertexShader:Wi.meshmatcap_vert,fragmentShader:Wi.meshmatcap_frag},points:{uniforms:Ho([zn.points,zn.fog]),vertexShader:Wi.points_vert,fragmentShader:Wi.points_frag},dashed:{uniforms:Ho([zn.common,zn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wi.linedashed_vert,fragmentShader:Wi.linedashed_frag},depth:{uniforms:Ho([zn.common,zn.displacementmap]),vertexShader:Wi.depth_vert,fragmentShader:Wi.depth_frag},normal:{uniforms:Ho([zn.common,zn.bumpmap,zn.normalmap,zn.displacementmap,{opacity:{value:1}}]),vertexShader:Wi.meshnormal_vert,fragmentShader:Wi.meshnormal_frag},sprite:{uniforms:Ho([zn.sprite,zn.fog]),vertexShader:Wi.sprite_vert,fragmentShader:Wi.sprite_frag},background:{uniforms:{uvTransform:{value:new Ri},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wi.background_vert,fragmentShader:Wi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ri}},vertexShader:Wi.backgroundCube_vert,fragmentShader:Wi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wi.cube_vert,fragmentShader:Wi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wi.equirect_vert,fragmentShader:Wi.equirect_frag},distanceRGBA:{uniforms:Ho([zn.common,zn.displacementmap,{referencePosition:{value:new ft},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wi.distanceRGBA_vert,fragmentShader:Wi.distanceRGBA_frag},shadow:{uniforms:Ho([zn.lights,zn.fog,{color:{value:new Ir(0)},opacity:{value:1}}]),vertexShader:Wi.shadow_vert,fragmentShader:Wi.shadow_frag}};bd.physical={uniforms:Ho([bd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ri},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ri},clearcoatNormalScale:{value:new oi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ri},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ri},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ri},sheen:{value:0},sheenColor:{value:new Ir(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ri},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ri},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ri},transmissionSamplerSize:{value:new oi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ri},attenuationDistance:{value:0},attenuationColor:{value:new Ir(0)},specularColor:{value:new Ir(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ri},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ri},anisotropyVector:{value:new oi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ri}}]),vertexShader:Wi.meshphysical_vert,fragmentShader:Wi.meshphysical_frag};const tM={r:0,b:0,g:0},Em=new gh,y1t=new Pi;function _1t(n,e,t,i,r,s,a){const o=new Ir(0);let l=s===!0?0:1,u,c,d=null,f=0,h=null;function p(y){let b=y.isScene===!0?y.background:null;return b&&b.isTexture&&(b=(y.backgroundBlurriness>0?t:e).get(b)),b}function m(y){let b=!1;const x=p(y);x===null?v(o,l):x&&x.isColor&&(v(x,1),b=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,a):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,a),(n.autoClear||b)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function g(y,b){const x=p(b);x&&(x.isCubeTexture||x.mapping===oR)?(c===void 0&&(c=new Hs(new Xb(1,1,1),new du({name:"BackgroundCubeMaterial",uniforms:eb(bd.backgroundCube.uniforms),vertexShader:bd.backgroundCube.vertexShader,fragmentShader:bd.backgroundCube.fragmentShader,side:Il,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(w,A,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),Em.copy(b.backgroundRotation),Em.x*=-1,Em.y*=-1,Em.z*=-1,x.isCubeTexture&&x.isRenderTargetTexture===!1&&(Em.y*=-1,Em.z*=-1),c.material.uniforms.envMap.value=x,c.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=b.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(y1t.makeRotationFromEuler(Em)),c.material.toneMapped=Mr.getTransfer(x.colorSpace)!==qr,(d!==x||f!==x.version||h!==n.toneMapping)&&(c.material.needsUpdate=!0,d=x,f=x.version,h=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null)):x&&x.isTexture&&(u===void 0&&(u=new Hs(new tb(2,2),new du({name:"BackgroundMaterial",uniforms:eb(bd.background.uniforms),vertexShader:bd.background.vertexShader,fragmentShader:bd.background.fragmentShader,side:Jd,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=x,u.material.uniforms.backgroundIntensity.value=b.backgroundIntensity,u.material.toneMapped=Mr.getTransfer(x.colorSpace)!==qr,x.matrixAutoUpdate===!0&&x.updateMatrix(),u.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||f!==x.version||h!==n.toneMapping)&&(u.material.needsUpdate=!0,d=x,f=x.version,h=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null))}function v(y,b){y.getRGB(tM,ope(n)),i.buffers.color.setClear(tM.r,tM.g,tM.b,b,a)}function _(){c!==void 0&&(c.geometry.dispose(),c.material.dispose()),u!==void 0&&(u.geometry.dispose(),u.material.dispose())}return{getClearColor:function(){return o},setClearColor:function(y,b=1){o.set(y),l=b,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,v(o,l)},render:m,addToRenderList:g,dispose:_}}function b1t(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,a=!1;function o(E,I,k,O,U){let z=!1;const L=d(O,k,I);s!==L&&(s=L,u(s.object)),z=h(E,O,k,U),z&&p(E,O,k,U),U!==null&&e.update(U,n.ELEMENT_ARRAY_BUFFER),(z||a)&&(a=!1,b(E,I,k,O),U!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(U).buffer))}function l(){return n.createVertexArray()}function u(E){return n.bindVertexArray(E)}function c(E){return n.deleteVertexArray(E)}function d(E,I,k){const O=k.wireframe===!0;let U=i[E.id];U===void 0&&(U={},i[E.id]=U);let z=U[I.id];z===void 0&&(z={},U[I.id]=z);let L=z[O];return L===void 0&&(L=f(l()),z[O]=L),L}function f(E){const I=[],k=[],O=[];for(let U=0;U<t;U++)I[U]=0,k[U]=0,O[U]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:k,attributeDivisors:O,object:E,attributes:{},index:null}}function h(E,I,k,O){const U=s.attributes,z=I.attributes;let L=0;const G=k.getAttributes();for(const H in G)if(G[H].location>=0){const X=U[H];let te=z[H];if(te===void 0&&(H==="instanceMatrix"&&E.instanceMatrix&&(te=E.instanceMatrix),H==="instanceColor"&&E.instanceColor&&(te=E.instanceColor)),X===void 0||X.attribute!==te||te&&X.data!==te.data)return!0;L++}return s.attributesNum!==L||s.index!==O}function p(E,I,k,O){const U={},z=I.attributes;let L=0;const G=k.getAttributes();for(const H in G)if(G[H].location>=0){let X=z[H];X===void 0&&(H==="instanceMatrix"&&E.instanceMatrix&&(X=E.instanceMatrix),H==="instanceColor"&&E.instanceColor&&(X=E.instanceColor));const te={};te.attribute=X,X&&X.data&&(te.data=X.data),U[H]=te,L++}s.attributes=U,s.attributesNum=L,s.index=O}function m(){const E=s.newAttributes;for(let I=0,k=E.length;I<k;I++)E[I]=0}function g(E){v(E,0)}function v(E,I){const k=s.newAttributes,O=s.enabledAttributes,U=s.attributeDivisors;k[E]=1,O[E]===0&&(n.enableVertexAttribArray(E),O[E]=1),U[E]!==I&&(n.vertexAttribDivisor(E,I),U[E]=I)}function _(){const E=s.newAttributes,I=s.enabledAttributes;for(let k=0,O=I.length;k<O;k++)I[k]!==E[k]&&(n.disableVertexAttribArray(k),I[k]=0)}function y(E,I,k,O,U,z,L){L===!0?n.vertexAttribIPointer(E,I,k,U,z):n.vertexAttribPointer(E,I,k,O,U,z)}function b(E,I,k,O){m();const U=O.attributes,z=k.getAttributes(),L=I.defaultAttributeValues;for(const G in z){const H=z[G];if(H.location>=0){let F=U[G];if(F===void 0&&(G==="instanceMatrix"&&E.instanceMatrix&&(F=E.instanceMatrix),G==="instanceColor"&&E.instanceColor&&(F=E.instanceColor)),F!==void 0){const X=F.normalized,te=F.itemSize,re=e.get(F);if(re===void 0)continue;const ie=re.buffer,le=re.type,ge=re.bytesPerElement,pe=le===n.INT||le===n.UNSIGNED_INT||F.gpuType===oz;if(F.isInterleavedBufferAttribute){const ye=F.data,Oe=ye.stride,Be=F.offset;if(ye.isInstancedInterleavedBuffer){for(let Ye=0;Ye<H.locationSize;Ye++)v(H.location+Ye,ye.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=ye.meshPerAttribute*ye.count)}else for(let Ye=0;Ye<H.locationSize;Ye++)g(H.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,ie);for(let Ye=0;Ye<H.locationSize;Ye++)y(H.location+Ye,te/H.locationSize,le,X,Oe*ge,(Be+te/H.locationSize*Ye)*ge,pe)}else{if(F.isInstancedBufferAttribute){for(let ye=0;ye<H.locationSize;ye++)v(H.location+ye,F.meshPerAttribute);E.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=F.meshPerAttribute*F.count)}else for(let ye=0;ye<H.locationSize;ye++)g(H.location+ye);n.bindBuffer(n.ARRAY_BUFFER,ie);for(let ye=0;ye<H.locationSize;ye++)y(H.location+ye,te/H.locationSize,le,X,te*ge,te/H.locationSize*ye*ge,pe)}}else if(L!==void 0){const X=L[G];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(H.location,X);break;case 3:n.vertexAttrib3fv(H.location,X);break;case 4:n.vertexAttrib4fv(H.location,X);break;default:n.vertexAttrib1fv(H.location,X)}}}}_()}function x(){T();for(const E in i){const I=i[E];for(const k in I){const O=I[k];for(const U in O)c(O[U].object),delete O[U];delete I[k]}delete i[E]}}function w(E){if(i[E.id]===void 0)return;const I=i[E.id];for(const k in I){const O=I[k];for(const U in O)c(O[U].object),delete O[U];delete I[k]}delete i[E.id]}function A(E){for(const I in i){const k=i[I];if(k[E.id]===void 0)continue;const O=k[E.id];for(const U in O)c(O[U].object),delete O[U];delete k[E.id]}}function T(){C(),a=!0,s!==r&&(s=r,u(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:o,reset:T,resetDefaultState:C,dispose:x,releaseStatesOfGeometry:w,releaseStatesOfProgram:A,initAttributes:m,enableAttribute:g,disableUnusedAttributes:_}}function S1t(n,e,t){let i;function r(u){i=u}function s(u,c){n.drawArrays(i,u,c),t.update(c,i,1)}function a(u,c,d){d!==0&&(n.drawArraysInstanced(i,u,c,d),t.update(c,i,d))}function o(u,c,d){if(d===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,c,0,d);let h=0;for(let p=0;p<d;p++)h+=c[p];t.update(h,i,1)}function l(u,c,d,f){if(d===0)return;const h=e.get("WEBGL_multi_draw");if(h===null)for(let p=0;p<u.length;p++)a(u[p],c[p],f[p]);else{h.multiDrawArraysInstancedWEBGL(i,u,0,c,0,f,0,d);let p=0;for(let m=0;m<d;m++)p+=c[m]*f[m];t.update(p,i,1)}}this.setMode=r,this.render=s,this.renderInstances=a,this.renderMultiDraw=o,this.renderMultiDrawInstances=l}function x1t(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function a(A){return!(A!==Yo&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function o(A){const T=A===jb&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(A!==ef&&i.convert(A)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&A!==Uc&&!T)}function l(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const d=t.logarithmicDepthBuffer===!0,f=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,w=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:a,textureTypeReadable:o,precision:u,logarithmicDepthBuffer:d,reverseDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:v,maxVertexUniforms:_,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:x,maxSamples:w}}function w1t(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new wp,o=new Ri,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const h=d.length!==0||f||i!==0||r;return r=f,i=d.length,h},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=c(d,f,0)},this.setState=function(d,f,h){const p=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,v=n.get(d);if(!r||p===null||p.length===0||s&&!g)s?c(null):u();else{const _=s?0:i,y=_*4;let b=v.clippingState||null;l.value=b,b=c(p,f,y,h);for(let x=0;x!==y;++x)b[x]=t[x];v.clippingState=b,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(d,f,h,p){const m=d!==null?d.length:0;let g=null;if(m!==0){if(g=l.value,p!==!0||g===null){const v=h+m*4,_=f.matrixWorldInverse;o.getNormalMatrix(_),(g===null||g.length<v)&&(g=new Float32Array(v));for(let y=0,b=h;y!==m;++y,b+=4)a.copy(d[y]).applyMatrix4(_,o),a.normal.toArray(g,b),g[b+3]=a.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function T1t(n){let e=new WeakMap;function t(a,o){return o===CN?a.mapping=X_:o===AN&&(a.mapping=Y_),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===CN||o===AN)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new Mgt(l.height);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const T1=4,qQ=[.125,.215,.35,.446,.526,.582],Wm=20,SL=new gz,jQ=new Ir;let xL=null,wL=0,TL=0,CL=!1;const Om=(1+Math.sqrt(5))/2,$y=1/Om,KQ=[new ft(-Om,$y,0),new ft(Om,$y,0),new ft(-$y,0,Om),new ft($y,0,Om),new ft(0,Om,-$y),new ft(0,Om,$y),new ft(-1,1,-1),new ft(1,1,-1),new ft(-1,1,1),new ft(1,1,1)];class XQ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){xL=this._renderer.getRenderTarget(),wL=this._renderer.getActiveCubeFace(),TL=this._renderer.getActiveMipmapLevel(),CL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ZQ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=QQ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(xL,wL,TL),this._renderer.xr.enabled=CL,e.scissorTest=!1,nM(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===X_||e.mapping===Y_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),xL=this._renderer.getRenderTarget(),wL=this._renderer.getActiveCubeFace(),TL=this._renderer.getActiveMipmapLevel(),CL=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:kd,minFilter:kd,generateMipmaps:!1,type:jb,format:Yo,colorSpace:J_,depthBuffer:!1},r=YQ(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=YQ(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=C1t(s)),this._blurMaterial=A1t(s,e,t)}return r}_compileMaterial(e){const t=new Hs(this._lodPlanes[0],e);this._renderer.compile(t,SL)}_sceneToCubeUV(e,t,i,r){const o=new Hu(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,d=c.autoClear,f=c.toneMapping;c.getClearColor(jQ),c.toneMapping=jp,c.autoClear=!1;const h=new Jg({name:"PMREM.Background",side:Il,depthWrite:!1,depthTest:!1}),p=new Hs(new Xb,h);let m=!1;const g=e.background;g?g.isColor&&(h.color.copy(g),e.background=null,m=!0):(h.color.copy(jQ),m=!0);for(let v=0;v<6;v++){const _=v%3;_===0?(o.up.set(0,l[v],0),o.lookAt(u[v],0,0)):_===1?(o.up.set(0,0,l[v]),o.lookAt(0,u[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,u[v]));const y=this._cubeSize;nM(r,_*y,v>2?y:0,y,y),c.setRenderTarget(r),m&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=f,c.autoClear=d,e.background=g}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===X_||e.mapping===Y_;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ZQ()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=QQ());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Hs(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;nM(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,SL)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const a=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),o=KQ[(r-s-1)%KQ.length];this._blur(e,s-1,s,a,o)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,d=new Hs(this._lodPlanes[r],u),f=u.uniforms,h=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*h):2*Math.PI/(2*Wm-1),m=s/p,g=isFinite(s)?1+Math.floor(c*m):Wm;g>Wm&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Wm}`);const v=[];let _=0;for(let A=0;A<Wm;++A){const T=A/m,C=Math.exp(-T*T/2);v.push(C),A===0?_+=C:A<g&&(_+=2*C)}for(let A=0;A<v.length;A++)v[A]=v[A]/_;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=v,f.latitudinal.value=a==="latitudinal",o&&(f.poleAxis.value=o);const{_lodMax:y}=this;f.dTheta.value=p,f.mipInt.value=y-i;const b=this._sizeLods[r],x=3*b*(r>y-T1?r-y+T1:0),w=4*(this._cubeSize-b);nM(t,x,w,3*b,2*b),l.setRenderTarget(t),l.render(d,SL)}}function C1t(n){const e=[],t=[],i=[];let r=n;const s=n-T1+1+qQ.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-T1?l=qQ[a-n+T1-1]:a===0&&(l=0),i.push(l);const u=1/(o-2),c=-u,d=1+u,f=[c,c,d,c,d,d,c,c,d,d,c,d],h=6,p=6,m=3,g=2,v=1,_=new Float32Array(m*p*h),y=new Float32Array(g*p*h),b=new Float32Array(v*p*h);for(let w=0;w<h;w++){const A=w%3*2/3-1,T=w>2?0:-1,C=[A,T,0,A+2/3,T,0,A+2/3,T+1,0,A,T,0,A+2/3,T+1,0,A,T+1,0];_.set(C,m*p*w),y.set(f,g*p*w);const E=[w,w,w,w,w,w];b.set(E,v*p*w)}const x=new mc;x.setAttribute("position",new ec(_,m)),x.setAttribute("uv",new ec(y,g)),x.setAttribute("faceIndex",new ec(b,v)),e.push(x),r>T1&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function YQ(n,e,t){const i=new _0(n,e,t);return i.texture.mapping=oR,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function nM(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function A1t(n,e,t){const i=new Float32Array(Wm),r=new ft(0,1,0);return new du({name:"SphericalGaussianBlur",defines:{n:Wm,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:vz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Wp,depthTest:!1,depthWrite:!1})}function QQ(){return new du({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:vz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Wp,depthTest:!1,depthWrite:!1})}function ZQ(){return new du({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:vz(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Wp,depthTest:!1,depthWrite:!1})}function vz(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function E1t(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===CN||l===AN,c=l===X_||l===Y_;if(u||c){let d=e.get(o);const f=d!==void 0?d.texture.pmremVersion:0;if(o.isRenderTargetTexture&&o.pmremVersion!==f)return t===null&&(t=new XQ(n)),d=u?t.fromEquirectangular(o,d):t.fromCubemap(o,d),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),d.texture;if(d!==void 0)return d.texture;{const h=o.image;return u&&h&&h.height>0||c&&h&&r(h)?(t===null&&(t=new XQ(n)),d=u?t.fromEquirectangular(o):t.fromCubemap(o),d.texture.pmremVersion=o.pmremVersion,e.set(o,d),o.addEventListener("dispose",s),d.texture):null}}}return o}function r(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function M1t(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&s1("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function I1t(n,e,t,i){const r={},s=new WeakMap;function a(d){const f=d.target;f.index!==null&&e.remove(f.index);for(const p in f.attributes)e.remove(f.attributes[p]);f.removeEventListener("dispose",a),delete r[f.id];const h=s.get(f);h&&(e.remove(h),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function o(d,f){return r[f.id]===!0||(f.addEventListener("dispose",a),r[f.id]=!0,t.memory.geometries++),f}function l(d){const f=d.attributes;for(const h in f)e.update(f[h],n.ARRAY_BUFFER)}function u(d){const f=[],h=d.index,p=d.attributes.position;let m=0;if(h!==null){const _=h.array;m=h.version;for(let y=0,b=_.length;y<b;y+=3){const x=_[y+0],w=_[y+1],A=_[y+2];f.push(x,w,w,A,A,x)}}else if(p!==void 0){const _=p.array;m=p.version;for(let y=0,b=_.length/3-1;y<b;y+=3){const x=y+0,w=y+1,A=y+2;f.push(x,w,w,A,A,x)}}else return;const g=new(Jhe(f)?ape:spe)(f,1);g.version=m;const v=s.get(d);v&&e.remove(v),s.set(d,g)}function c(d){const f=s.get(d);if(f){const h=d.index;h!==null&&f.version<h.version&&u(d)}else u(d);return s.get(d)}return{get:o,update:l,getWireframeAttribute:c}}function D1t(n,e,t){let i;function r(f){i=f}let s,a;function o(f){s=f.type,a=f.bytesPerElement}function l(f,h){n.drawElements(i,h,s,f*a),t.update(h,i,1)}function u(f,h,p){p!==0&&(n.drawElementsInstanced(i,h,s,f*a,p),t.update(h,i,p))}function c(f,h,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,h,0,s,f,0,p);let g=0;for(let v=0;v<p;v++)g+=h[v];t.update(g,i,1)}function d(f,h,p,m){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let v=0;v<f.length;v++)u(f[v]/a,h[v],m[v]);else{g.multiDrawElementsInstancedWEBGL(i,h,0,s,f,0,m,0,p);let v=0;for(let _=0;_<p;_++)v+=h[_]*m[_];t.update(v,i,1)}}this.setMode=r,this.setIndex=o,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function R1t(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=o*(s/3);break;case n.LINES:t.lines+=o*(s/2);break;case n.LINE_STRIP:t.lines+=o*(s-1);break;case n.LINE_LOOP:t.lines+=o*s;break;case n.POINTS:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function P1t(n,e,t){const i=new WeakMap,r=new gs;function s(a,o,l){const u=a.morphTargetInfluences,c=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,d=c!==void 0?c.length:0;let f=i.get(o);if(f===void 0||f.count!==d){let E=function(){T.dispose(),i.delete(o),o.removeEventListener("dispose",E)};var h=E;f!==void 0&&f.texture.dispose();const p=o.morphAttributes.position!==void 0,m=o.morphAttributes.normal!==void 0,g=o.morphAttributes.color!==void 0,v=o.morphAttributes.position||[],_=o.morphAttributes.normal||[],y=o.morphAttributes.color||[];let b=0;p===!0&&(b=1),m===!0&&(b=2),g===!0&&(b=3);let x=o.attributes.position.count*b,w=1;x>e.maxTextureSize&&(w=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const A=new Float32Array(x*w*4*d),T=new tpe(A,x,w,d);T.type=Uc,T.needsUpdate=!0;const C=b*4;for(let I=0;I<d;I++){const k=v[I],O=_[I],U=y[I],z=x*w*4*I;for(let L=0;L<k.count;L++){const G=L*C;p===!0&&(r.fromBufferAttribute(k,L),A[z+G+0]=r.x,A[z+G+1]=r.y,A[z+G+2]=r.z,A[z+G+3]=0),m===!0&&(r.fromBufferAttribute(O,L),A[z+G+4]=r.x,A[z+G+5]=r.y,A[z+G+6]=r.z,A[z+G+7]=0),g===!0&&(r.fromBufferAttribute(U,L),A[z+G+8]=r.x,A[z+G+9]=r.y,A[z+G+10]=r.z,A[z+G+11]=U.itemSize===4?r.w:1)}}f={count:d,texture:T,size:new oi(x,w)},i.set(o,f),o.addEventListener("dispose",E)}if(a.isInstancedMesh===!0&&a.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",a.morphTexture,t);else{let p=0;for(let g=0;g<u.length;g++)p+=u[g];const m=o.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",m),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",f.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",f.size)}return{update:s}}function k1t(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,d=e.get(l,c);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==u&&(f.update(),r.set(f,u))}return d}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const fpe=new Jo,JQ=new pz(1,1),hpe=new tpe,ppe=new ugt,mpe=new upe,eZ=[],tZ=[],nZ=new Float32Array(16),iZ=new Float32Array(9),rZ=new Float32Array(4);function Yb(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=eZ[r];if(s===void 0&&(s=new Float32Array(r),eZ[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function Sa(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function xa(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function cR(n,e){let t=tZ[e];t===void 0&&(t=new Int32Array(e),tZ[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function L1t(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function O1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sa(t,e))return;n.uniform2fv(this.addr,e),xa(t,e)}}function N1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Sa(t,e))return;n.uniform3fv(this.addr,e),xa(t,e)}}function B1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sa(t,e))return;n.uniform4fv(this.addr,e),xa(t,e)}}function F1t(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sa(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),xa(t,e)}else{if(Sa(t,i))return;rZ.set(i),n.uniformMatrix2fv(this.addr,!1,rZ),xa(t,i)}}function U1t(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sa(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),xa(t,e)}else{if(Sa(t,i))return;iZ.set(i),n.uniformMatrix3fv(this.addr,!1,iZ),xa(t,i)}}function z1t(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Sa(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),xa(t,e)}else{if(Sa(t,i))return;nZ.set(i),n.uniformMatrix4fv(this.addr,!1,nZ),xa(t,i)}}function H1t(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function V1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sa(t,e))return;n.uniform2iv(this.addr,e),xa(t,e)}}function $1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sa(t,e))return;n.uniform3iv(this.addr,e),xa(t,e)}}function G1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sa(t,e))return;n.uniform4iv(this.addr,e),xa(t,e)}}function W1t(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function q1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sa(t,e))return;n.uniform2uiv(this.addr,e),xa(t,e)}}function j1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sa(t,e))return;n.uniform3uiv(this.addr,e),xa(t,e)}}function K1t(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sa(t,e))return;n.uniform4uiv(this.addr,e),xa(t,e)}}function X1t(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(JQ.compareFunction=Qhe,s=JQ):s=fpe,t.setTexture2D(e||s,r)}function Y1t(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||ppe,r)}function Q1t(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||mpe,r)}function Z1t(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||hpe,r)}function J1t(n){switch(n){case 5126:return L1t;case 35664:return O1t;case 35665:return N1t;case 35666:return B1t;case 35674:return F1t;case 35675:return U1t;case 35676:return z1t;case 5124:case 35670:return H1t;case 35667:case 35671:return V1t;case 35668:case 35672:return $1t;case 35669:case 35673:return G1t;case 5125:return W1t;case 36294:return q1t;case 36295:return j1t;case 36296:return K1t;case 35678:case 36198:case 36298:case 36306:case 35682:return X1t;case 35679:case 36299:case 36307:return Y1t;case 35680:case 36300:case 36308:case 36293:return Q1t;case 36289:case 36303:case 36311:case 36292:return Z1t}}function e_t(n,e){n.uniform1fv(this.addr,e)}function t_t(n,e){const t=Yb(e,this.size,2);n.uniform2fv(this.addr,t)}function n_t(n,e){const t=Yb(e,this.size,3);n.uniform3fv(this.addr,t)}function i_t(n,e){const t=Yb(e,this.size,4);n.uniform4fv(this.addr,t)}function r_t(n,e){const t=Yb(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function s_t(n,e){const t=Yb(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function a_t(n,e){const t=Yb(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function o_t(n,e){n.uniform1iv(this.addr,e)}function l_t(n,e){n.uniform2iv(this.addr,e)}function u_t(n,e){n.uniform3iv(this.addr,e)}function c_t(n,e){n.uniform4iv(this.addr,e)}function d_t(n,e){n.uniform1uiv(this.addr,e)}function f_t(n,e){n.uniform2uiv(this.addr,e)}function h_t(n,e){n.uniform3uiv(this.addr,e)}function p_t(n,e){n.uniform4uiv(this.addr,e)}function m_t(n,e,t){const i=this.cache,r=e.length,s=cR(t,r);Sa(i,s)||(n.uniform1iv(this.addr,s),xa(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||fpe,s[a])}function g_t(n,e,t){const i=this.cache,r=e.length,s=cR(t,r);Sa(i,s)||(n.uniform1iv(this.addr,s),xa(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||ppe,s[a])}function v_t(n,e,t){const i=this.cache,r=e.length,s=cR(t,r);Sa(i,s)||(n.uniform1iv(this.addr,s),xa(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||mpe,s[a])}function y_t(n,e,t){const i=this.cache,r=e.length,s=cR(t,r);Sa(i,s)||(n.uniform1iv(this.addr,s),xa(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||hpe,s[a])}function __t(n){switch(n){case 5126:return e_t;case 35664:return t_t;case 35665:return n_t;case 35666:return i_t;case 35674:return r_t;case 35675:return s_t;case 35676:return a_t;case 5124:case 35670:return o_t;case 35667:case 35671:return l_t;case 35668:case 35672:return u_t;case 35669:case 35673:return c_t;case 5125:return d_t;case 36294:return f_t;case 36295:return h_t;case 36296:return p_t;case 35678:case 36198:case 36298:case 36306:case 35682:return m_t;case 35679:case 36299:case 36307:return g_t;case 35680:case 36300:case 36308:case 36293:return v_t;case 36289:case 36303:case 36311:case 36292:return y_t}}class b_t{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=J1t(t.type)}}class S_t{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=__t(t.type)}}class x_t{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const AL=/(\w+)(\])?(\[|\.)?/g;function sZ(n,e){n.seq.push(e),n.map[e.id]=e}function w_t(n,e,t){const i=n.name,r=i.length;for(AL.lastIndex=0;;){const s=AL.exec(i),a=AL.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){sZ(t,u===void 0?new b_t(o,n,e):new S_t(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new x_t(o),sZ(t,d)),t=d}}}class f3{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);w_t(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function aZ(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const T_t=37297;let C_t=0;function A_t(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}const oZ=new Ri;function E_t(n){Mr._getMatrix(oZ,Mr.workingColorSpace,n);const e=`mat3( ${oZ.elements.map(t=>t.toFixed(4))} )`;switch(Mr.getTransfer(n)){case hI:return[e,"LinearTransferOETF"];case qr:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function lZ(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+A_t(n.getShaderSource(e),a)}else return r}function M_t(n,e){const t=E_t(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function I_t(n,e){let t;switch(e){case ymt:t="Linear";break;case _mt:t="Reinhard";break;case bmt:t="Cineon";break;case Smt:t="ACESFilmic";break;case wmt:t="AgX";break;case Tmt:t="Neutral";break;case xmt:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const iM=new ft;function D_t(){Mr.getLuminanceCoefficients(iM);const n=iM.x.toFixed(4),e=iM.y.toFixed(4),t=iM.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function R_t(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(zx).join(`
`)}function P_t(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function k_t(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===n.FLOAT_MAT2&&(o=2),s.type===n.FLOAT_MAT3&&(o=3),s.type===n.FLOAT_MAT4&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function zx(n){return n!==""}function uZ(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cZ(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const L_t=/^[ \t]*#include +<([\w\d./]+)>/gm;function tB(n){return n.replace(L_t,N_t)}const O_t=new Map;function N_t(n,e){let t=Wi[e];if(t===void 0){const i=O_t.get(e);if(i!==void 0)t=Wi[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return tB(t)}const B_t=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dZ(n){return n.replace(B_t,F_t)}function F_t(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function fZ(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function U_t(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Fhe?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Z0t?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Rf&&(e="SHADOWMAP_TYPE_VSM"),e}function z_t(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case X_:case Y_:e="ENVMAP_TYPE_CUBE";break;case oR:e="ENVMAP_TYPE_CUBE_UV";break}return e}function H_t(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Y_:e="ENVMAP_MODE_REFRACTION";break}return e}function V_t(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case zhe:e="ENVMAP_BLENDING_MULTIPLY";break;case gmt:e="ENVMAP_BLENDING_MIX";break;case vmt:e="ENVMAP_BLENDING_ADD";break}return e}function $_t(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function G_t(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=U_t(t),u=z_t(t),c=H_t(t),d=V_t(t),f=$_t(t),h=R_t(t),p=P_t(s),m=r.createProgram();let g,v,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(zx).join(`
`),g.length>0&&(g+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p].filter(zx).join(`
`),v.length>0&&(v+=`
`)):(g=[fZ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(zx).join(`
`),v=[fZ(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jp?"#define TONE_MAPPING":"",t.toneMapping!==jp?Wi.tonemapping_pars_fragment:"",t.toneMapping!==jp?I_t("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Wi.colorspace_pars_fragment,M_t("linearToOutputTexel",t.outputColorSpace),D_t(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(zx).join(`
`)),a=tB(a),a=uZ(a,t),a=cZ(a,t),o=tB(o),o=uZ(o,t),o=cZ(o,t),a=dZ(a),o=dZ(o),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[h,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===CQ?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===CQ?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const y=_+g+a,b=_+v+o,x=aZ(r,r.VERTEX_SHADER,y),w=aZ(r,r.FRAGMENT_SHADER,b);r.attachShader(m,x),r.attachShader(m,w),t.index0AttributeName!==void 0?r.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m);function A(I){if(n.debug.checkShaderErrors){const k=r.getProgramInfoLog(m).trim(),O=r.getShaderInfoLog(x).trim(),U=r.getShaderInfoLog(w).trim();let z=!0,L=!0;if(r.getProgramParameter(m,r.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,m,x,w);else{const G=lZ(r,x,"vertex"),H=lZ(r,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+k+`
`+G+`
`+H)}else k!==""?console.warn("THREE.WebGLProgram: Program Info Log:",k):(O===""||U==="")&&(L=!1);L&&(I.diagnostics={runnable:z,programLog:k,vertexShader:{log:O,prefix:g},fragmentShader:{log:U,prefix:v}})}r.deleteShader(x),r.deleteShader(w),T=new f3(r,m),C=k_t(r,m)}let T;this.getUniforms=function(){return T===void 0&&A(this),T};let C;this.getAttributes=function(){return C===void 0&&A(this),C};let E=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return E===!1&&(E=r.getProgramParameter(m,T_t)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=C_t++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=x,this.fragmentShader=w,this}let W_t=0;class q_t{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new j_t(e),t.set(e,i)),i}}class j_t{constructor(e){this.id=W_t++,this.code=e,this.usedTimes=0}}function K_t(n,e,t,i,r,s,a){const o=new ipe,l=new q_t,u=new Set,c=[],d=r.logarithmicDepthBuffer,f=r.vertexTextures;let h=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(C){return u.add(C),C===0?"uv":`uv${C}`}function g(C,E,I,k,O){const U=k.fog,z=O.geometry,L=C.isMeshStandardMaterial?k.environment:null,G=(C.isMeshStandardMaterial?t:e).get(C.envMap||L),H=G&&G.mapping===oR?G.image.height:null,F=p[C.type];C.precision!==null&&(h=r.getMaxPrecision(C.precision),h!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",h,"instead."));const X=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,te=X!==void 0?X.length:0;let re=0;z.morphAttributes.position!==void 0&&(re=1),z.morphAttributes.normal!==void 0&&(re=2),z.morphAttributes.color!==void 0&&(re=3);let ie,le,ge,pe;if(F){const jn=bd[F];ie=jn.vertexShader,le=jn.fragmentShader}else ie=C.vertexShader,le=C.fragmentShader,l.update(C),ge=l.getVertexShaderID(C),pe=l.getFragmentShaderID(C);const ye=n.getRenderTarget(),Oe=n.state.buffers.depth.getReversed(),Be=O.isInstancedMesh===!0,Ye=O.isBatchedMesh===!0,Ze=!!C.map,Q=!!C.matcap,me=!!G,ce=!!C.aoMap,je=!!C.lightMap,Fe=!!C.bumpMap,nt=!!C.normalMap,We=!!C.displacementMap,Ke=!!C.emissiveMap,it=!!C.metalnessMap,be=!!C.roughnessMap,K=C.anisotropy>0,ne=C.clearcoat>0,Se=C.dispersion>0,ze=C.iridescence>0,Je=C.sheen>0,Tt=C.transmission>0,At=K&&!!C.anisotropyMap,Re=ne&&!!C.clearcoatMap,wt=ne&&!!C.clearcoatNormalMap,vt=ne&&!!C.clearcoatRoughnessMap,q=ze&&!!C.iridescenceMap,xe=ze&&!!C.iridescenceThicknessMap,ve=Je&&!!C.sheenColorMap,ke=Je&&!!C.sheenRoughnessMap,we=!!C.specularMap,De=!!C.specularColorMap,xt=!!C.specularIntensityMap,Pe=Tt&&!!C.transmissionMap,Dt=Tt&&!!C.thicknessMap,dt=!!C.gradientMap,Mt=!!C.alphaMap,jt=C.alphaTest>0,Ft=!!C.alphaHash,Sn=!!C.extensions;let Pn=jp;C.toneMapped&&(ye===null||ye.isXRRenderTarget===!0)&&(Pn=n.toneMapping);const Ti={shaderID:F,shaderType:C.type,shaderName:C.name,vertexShader:ie,fragmentShader:le,defines:C.defines,customVertexShaderID:ge,customFragmentShaderID:pe,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:h,batching:Ye,batchingColor:Ye&&O._colorsTexture!==null,instancing:Be,instancingColor:Be&&O.instanceColor!==null,instancingMorph:Be&&O.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ye===null?n.outputColorSpace:ye.isXRRenderTarget===!0?ye.texture.colorSpace:J_,alphaToCoverage:!!C.alphaToCoverage,map:Ze,matcap:Q,envMap:me,envMapMode:me&&G.mapping,envMapCubeUVHeight:H,aoMap:ce,lightMap:je,bumpMap:Fe,normalMap:nt,displacementMap:f&&We,emissiveMap:Ke,normalMapObjectSpace:nt&&C.normalMapType===Imt,normalMapTangentSpace:nt&&C.normalMapType===Mmt,metalnessMap:it,roughnessMap:be,anisotropy:K,anisotropyMap:At,clearcoat:ne,clearcoatMap:Re,clearcoatNormalMap:wt,clearcoatRoughnessMap:vt,dispersion:Se,iridescence:ze,iridescenceMap:q,iridescenceThicknessMap:xe,sheen:Je,sheenColorMap:ve,sheenRoughnessMap:ke,specularMap:we,specularColorMap:De,specularIntensityMap:xt,transmission:Tt,transmissionMap:Pe,thicknessMap:Dt,gradientMap:dt,opaque:C.transparent===!1&&C.blending===qp&&C.alphaToCoverage===!1,alphaMap:Mt,alphaTest:jt,alphaHash:Ft,combine:C.combine,mapUv:Ze&&m(C.map.channel),aoMapUv:ce&&m(C.aoMap.channel),lightMapUv:je&&m(C.lightMap.channel),bumpMapUv:Fe&&m(C.bumpMap.channel),normalMapUv:nt&&m(C.normalMap.channel),displacementMapUv:We&&m(C.displacementMap.channel),emissiveMapUv:Ke&&m(C.emissiveMap.channel),metalnessMapUv:it&&m(C.metalnessMap.channel),roughnessMapUv:be&&m(C.roughnessMap.channel),anisotropyMapUv:At&&m(C.anisotropyMap.channel),clearcoatMapUv:Re&&m(C.clearcoatMap.channel),clearcoatNormalMapUv:wt&&m(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:vt&&m(C.clearcoatRoughnessMap.channel),iridescenceMapUv:q&&m(C.iridescenceMap.channel),iridescenceThicknessMapUv:xe&&m(C.iridescenceThicknessMap.channel),sheenColorMapUv:ve&&m(C.sheenColorMap.channel),sheenRoughnessMapUv:ke&&m(C.sheenRoughnessMap.channel),specularMapUv:we&&m(C.specularMap.channel),specularColorMapUv:De&&m(C.specularColorMap.channel),specularIntensityMapUv:xt&&m(C.specularIntensityMap.channel),transmissionMapUv:Pe&&m(C.transmissionMap.channel),thicknessMapUv:Dt&&m(C.thicknessMap.channel),alphaMapUv:Mt&&m(C.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(nt||K),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,pointsUvs:O.isPoints===!0&&!!z.attributes.uv&&(Ze||Mt),fog:!!U,useFog:C.fog===!0,fogExp2:!!U&&U.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:d,reverseDepthBuffer:Oe,skinning:O.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:te,morphTextureStride:re,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:Pn,decodeVideoTexture:Ze&&C.map.isVideoTexture===!0&&Mr.getTransfer(C.map.colorSpace)===qr,decodeVideoTextureEmissive:Ke&&C.emissiveMap.isVideoTexture===!0&&Mr.getTransfer(C.emissiveMap.colorSpace)===qr,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Vu,flipSided:C.side===Il,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Sn&&C.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Sn&&C.extensions.multiDraw===!0||Ye)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Ti.vertexUv1s=u.has(1),Ti.vertexUv2s=u.has(2),Ti.vertexUv3s=u.has(3),u.clear(),Ti}function v(C){const E=[];if(C.shaderID?E.push(C.shaderID):(E.push(C.customVertexShaderID),E.push(C.customFragmentShaderID)),C.defines!==void 0)for(const I in C.defines)E.push(I),E.push(C.defines[I]);return C.isRawShaderMaterial===!1&&(_(E,C),y(E,C),E.push(n.outputColorSpace)),E.push(C.customProgramCacheKey),E.join()}function _(C,E){C.push(E.precision),C.push(E.outputColorSpace),C.push(E.envMapMode),C.push(E.envMapCubeUVHeight),C.push(E.mapUv),C.push(E.alphaMapUv),C.push(E.lightMapUv),C.push(E.aoMapUv),C.push(E.bumpMapUv),C.push(E.normalMapUv),C.push(E.displacementMapUv),C.push(E.emissiveMapUv),C.push(E.metalnessMapUv),C.push(E.roughnessMapUv),C.push(E.anisotropyMapUv),C.push(E.clearcoatMapUv),C.push(E.clearcoatNormalMapUv),C.push(E.clearcoatRoughnessMapUv),C.push(E.iridescenceMapUv),C.push(E.iridescenceThicknessMapUv),C.push(E.sheenColorMapUv),C.push(E.sheenRoughnessMapUv),C.push(E.specularMapUv),C.push(E.specularColorMapUv),C.push(E.specularIntensityMapUv),C.push(E.transmissionMapUv),C.push(E.thicknessMapUv),C.push(E.combine),C.push(E.fogExp2),C.push(E.sizeAttenuation),C.push(E.morphTargetsCount),C.push(E.morphAttributeCount),C.push(E.numDirLights),C.push(E.numPointLights),C.push(E.numSpotLights),C.push(E.numSpotLightMaps),C.push(E.numHemiLights),C.push(E.numRectAreaLights),C.push(E.numDirLightShadows),C.push(E.numPointLightShadows),C.push(E.numSpotLightShadows),C.push(E.numSpotLightShadowsWithMaps),C.push(E.numLightProbes),C.push(E.shadowMapType),C.push(E.toneMapping),C.push(E.numClippingPlanes),C.push(E.numClipIntersection),C.push(E.depthPacking)}function y(C,E){o.disableAll(),E.supportsVertexTextures&&o.enable(0),E.instancing&&o.enable(1),E.instancingColor&&o.enable(2),E.instancingMorph&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),E.alphaHash&&o.enable(18),E.batching&&o.enable(19),E.dispersion&&o.enable(20),E.batchingColor&&o.enable(21),C.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.reverseDepthBuffer&&o.enable(4),E.skinning&&o.enable(5),E.morphTargets&&o.enable(6),E.morphNormals&&o.enable(7),E.morphColors&&o.enable(8),E.premultipliedAlpha&&o.enable(9),E.shadowMapEnabled&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),E.decodeVideoTextureEmissive&&o.enable(20),E.alphaToCoverage&&o.enable(21),C.push(o.mask)}function b(C){const E=p[C.type];let I;if(E){const k=bd[E];I=Tgt.clone(k.uniforms)}else I=C.uniforms;return I}function x(C,E){let I;for(let k=0,O=c.length;k<O;k++){const U=c[k];if(U.cacheKey===E){I=U,++I.usedTimes;break}}return I===void 0&&(I=new G_t(n,E,C,s),c.push(I)),I}function w(C){if(--C.usedTimes===0){const E=c.indexOf(C);c[E]=c[c.length-1],c.pop(),C.destroy()}}function A(C){l.remove(C)}function T(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:b,acquireProgram:x,releaseProgram:w,releaseShaderCache:A,programs:c,dispose:T}}function X_t(){let n=new WeakMap;function e(a){return n.has(a)}function t(a){let o=n.get(a);return o===void 0&&(o={},n.set(a,o)),o}function i(a){n.delete(a)}function r(a,o,l){n.get(a)[o]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Y_t(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function hZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function pZ(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(d,f,h,p,m,g){let v=n[e];return v===void 0?(v={id:d.id,object:d,geometry:f,material:h,groupOrder:p,renderOrder:d.renderOrder,z:m,group:g},n[e]=v):(v.id=d.id,v.object=d,v.geometry=f,v.material=h,v.groupOrder=p,v.renderOrder=d.renderOrder,v.z=m,v.group=g),e++,v}function o(d,f,h,p,m,g){const v=a(d,f,h,p,m,g);h.transmission>0?i.push(v):h.transparent===!0?r.push(v):t.push(v)}function l(d,f,h,p,m,g){const v=a(d,f,h,p,m,g);h.transmission>0?i.unshift(v):h.transparent===!0?r.unshift(v):t.unshift(v)}function u(d,f){t.length>1&&t.sort(d||Y_t),i.length>1&&i.sort(f||hZ),r.length>1&&r.sort(f||hZ)}function c(){for(let d=e,f=n.length;d<f;d++){const h=n[d];if(h.id===null)break;h.id=null,h.object=null,h.geometry=null,h.material=null,h.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:c,sort:u}}function Q_t(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new pZ,n.set(i,[a])):r>=s.length?(a=new pZ,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function Z_t(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ft,color:new Ir};break;case"SpotLight":t={position:new ft,direction:new ft,color:new Ir,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ft,color:new Ir,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ft,skyColor:new Ir,groundColor:new Ir};break;case"RectAreaLight":t={color:new Ir,position:new ft,halfWidth:new ft,halfHeight:new ft};break}return n[e.id]=t,t}}}function J_t(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oi};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oi};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new oi,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let ebt=0;function tbt(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function nbt(n){const e=new Z_t,t=J_t(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new ft);const r=new ft,s=new Pi,a=new Pi;function o(u){let c=0,d=0,f=0;for(let C=0;C<9;C++)i.probe[C].set(0,0,0);let h=0,p=0,m=0,g=0,v=0,_=0,y=0,b=0,x=0,w=0,A=0;u.sort(tbt);for(let C=0,E=u.length;C<E;C++){const I=u[C],k=I.color,O=I.intensity,U=I.distance,z=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)c+=k.r*O,d+=k.g*O,f+=k.b*O;else if(I.isLightProbe){for(let L=0;L<9;L++)i.probe[L].addScaledVector(I.sh.coefficients[L],O);A++}else if(I.isDirectionalLight){const L=e.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const G=I.shadow,H=t.get(I);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,i.directionalShadow[h]=H,i.directionalShadowMap[h]=z,i.directionalShadowMatrix[h]=I.shadow.matrix,_++}i.directional[h]=L,h++}else if(I.isSpotLight){const L=e.get(I);L.position.setFromMatrixPosition(I.matrixWorld),L.color.copy(k).multiplyScalar(O),L.distance=U,L.coneCos=Math.cos(I.angle),L.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),L.decay=I.decay,i.spot[m]=L;const G=I.shadow;if(I.map&&(i.spotLightMap[x]=I.map,x++,G.updateMatrices(I),I.castShadow&&w++),i.spotLightMatrix[m]=G.matrix,I.castShadow){const H=t.get(I);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,i.spotShadow[m]=H,i.spotShadowMap[m]=z,b++}m++}else if(I.isRectAreaLight){const L=e.get(I);L.color.copy(k).multiplyScalar(O),L.halfWidth.set(I.width*.5,0,0),L.halfHeight.set(0,I.height*.5,0),i.rectArea[g]=L,g++}else if(I.isPointLight){const L=e.get(I);if(L.color.copy(I.color).multiplyScalar(I.intensity),L.distance=I.distance,L.decay=I.decay,I.castShadow){const G=I.shadow,H=t.get(I);H.shadowIntensity=G.intensity,H.shadowBias=G.bias,H.shadowNormalBias=G.normalBias,H.shadowRadius=G.radius,H.shadowMapSize=G.mapSize,H.shadowCameraNear=G.camera.near,H.shadowCameraFar=G.camera.far,i.pointShadow[p]=H,i.pointShadowMap[p]=z,i.pointShadowMatrix[p]=I.shadow.matrix,y++}i.point[p]=L,p++}else if(I.isHemisphereLight){const L=e.get(I);L.skyColor.copy(I.color).multiplyScalar(O),L.groundColor.copy(I.groundColor).multiplyScalar(O),i.hemi[v]=L,v++}}g>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=zn.LTC_FLOAT_1,i.rectAreaLTC2=zn.LTC_FLOAT_2):(i.rectAreaLTC1=zn.LTC_HALF_1,i.rectAreaLTC2=zn.LTC_HALF_2)),i.ambient[0]=c,i.ambient[1]=d,i.ambient[2]=f;const T=i.hash;(T.directionalLength!==h||T.pointLength!==p||T.spotLength!==m||T.rectAreaLength!==g||T.hemiLength!==v||T.numDirectionalShadows!==_||T.numPointShadows!==y||T.numSpotShadows!==b||T.numSpotMaps!==x||T.numLightProbes!==A)&&(i.directional.length=h,i.spot.length=m,i.rectArea.length=g,i.point.length=p,i.hemi.length=v,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=y,i.pointShadowMap.length=y,i.spotShadow.length=b,i.spotShadowMap.length=b,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=y,i.spotLightMatrix.length=b+x-w,i.spotLightMap.length=x,i.numSpotLightShadowsWithMaps=w,i.numLightProbes=A,T.directionalLength=h,T.pointLength=p,T.spotLength=m,T.rectAreaLength=g,T.hemiLength=v,T.numDirectionalShadows=_,T.numPointShadows=y,T.numSpotShadows=b,T.numSpotMaps=x,T.numLightProbes=A,i.version=ebt++)}function l(u,c){let d=0,f=0,h=0,p=0,m=0;const g=c.matrixWorldInverse;for(let v=0,_=u.length;v<_;v++){const y=u[v];if(y.isDirectionalLight){const b=i.directional[d];b.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(g),d++}else if(y.isSpotLight){const b=i.spot[h];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),b.direction.setFromMatrixPosition(y.matrixWorld),r.setFromMatrixPosition(y.target.matrixWorld),b.direction.sub(r),b.direction.transformDirection(g),h++}else if(y.isRectAreaLight){const b=i.rectArea[p];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),a.identity(),s.copy(y.matrixWorld),s.premultiply(g),a.extractRotation(s),b.halfWidth.set(y.width*.5,0,0),b.halfHeight.set(0,y.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),p++}else if(y.isPointLight){const b=i.point[f];b.position.setFromMatrixPosition(y.matrixWorld),b.position.applyMatrix4(g),f++}else if(y.isHemisphereLight){const b=i.hemi[m];b.direction.setFromMatrixPosition(y.matrixWorld),b.direction.transformDirection(g),m++}}}return{setup:o,setupView:l,state:i}}function mZ(n){const e=new nbt(n),t=[],i=[];function r(c){u.camera=c,t.length=0,i.length=0}function s(c){t.push(c)}function a(c){i.push(c)}function o(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:o,setupLightsView:l,pushLight:s,pushShadow:a}}function ibt(n){let e=new WeakMap;function t(r,s=0){const a=e.get(r);let o;return a===void 0?(o=new mZ(n),e.set(r,[o])):s>=a.length?(o=new mZ(n),a.push(o)):o=a[s],o}function i(){e=new WeakMap}return{get:t,dispose:i}}const rbt=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sbt=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function abt(n,e,t){let i=new cpe;const r=new oi,s=new oi,a=new gs,o=new kgt({depthPacking:Emt}),l=new Lgt,u={},c=t.maxTextureSize,d={[Jd]:Il,[Il]:Jd,[Vu]:Vu},f=new du({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new oi},radius:{value:4}},vertexShader:rbt,fragmentShader:sbt}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const p=new mc;p.setAttribute("position",new ec(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Hs(p,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fhe;let v=this.type;this.render=function(w,A,T){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||w.length===0)return;const C=n.getRenderTarget(),E=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),k=n.state;k.setBlending(Wp),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);const O=v!==Rf&&this.type===Rf,U=v===Rf&&this.type!==Rf;for(let z=0,L=w.length;z<L;z++){const G=w[z],H=G.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;r.copy(H.mapSize);const F=H.getFrameExtents();if(r.multiply(F),s.copy(H.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/F.x),r.x=s.x*F.x,H.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/F.y),r.y=s.y*F.y,H.mapSize.y=s.y)),H.map===null||O===!0||U===!0){const te=this.type!==Rf?{minFilter:uu,magFilter:uu}:{};H.map!==null&&H.map.dispose(),H.map=new _0(r.x,r.y,te),H.map.texture.name=G.name+".shadowMap",H.camera.updateProjectionMatrix()}n.setRenderTarget(H.map),n.clear();const X=H.getViewportCount();for(let te=0;te<X;te++){const re=H.getViewport(te);a.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),k.viewport(a),H.updateMatrices(G,te),i=H.getFrustum(),b(A,T,H.camera,G,this.type)}H.isPointLightShadow!==!0&&this.type===Rf&&_(H,T),H.needsUpdate=!1}v=this.type,g.needsUpdate=!1,n.setRenderTarget(C,E,I)};function _(w,A){const T=e.update(m);f.defines.VSM_SAMPLES!==w.blurSamples&&(f.defines.VSM_SAMPLES=w.blurSamples,h.defines.VSM_SAMPLES=w.blurSamples,f.needsUpdate=!0,h.needsUpdate=!0),w.mapPass===null&&(w.mapPass=new _0(r.x,r.y)),f.uniforms.shadow_pass.value=w.map.texture,f.uniforms.resolution.value=w.mapSize,f.uniforms.radius.value=w.radius,n.setRenderTarget(w.mapPass),n.clear(),n.renderBufferDirect(A,null,T,f,m,null),h.uniforms.shadow_pass.value=w.mapPass.texture,h.uniforms.resolution.value=w.mapSize,h.uniforms.radius.value=w.radius,n.setRenderTarget(w.map),n.clear(),n.renderBufferDirect(A,null,T,h,m,null)}function y(w,A,T,C){let E=null;const I=T.isPointLight===!0?w.customDistanceMaterial:w.customDepthMaterial;if(I!==void 0)E=I;else if(E=T.isPointLight===!0?l:o,n.localClippingEnabled&&A.clipShadows===!0&&Array.isArray(A.clippingPlanes)&&A.clippingPlanes.length!==0||A.displacementMap&&A.displacementScale!==0||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const k=E.uuid,O=A.uuid;let U=u[k];U===void 0&&(U={},u[k]=U);let z=U[O];z===void 0&&(z=E.clone(),U[O]=z,A.addEventListener("dispose",x)),E=z}if(E.visible=A.visible,E.wireframe=A.wireframe,C===Rf?E.side=A.shadowSide!==null?A.shadowSide:A.side:E.side=A.shadowSide!==null?A.shadowSide:d[A.side],E.alphaMap=A.alphaMap,E.alphaTest=A.alphaTest,E.map=A.map,E.clipShadows=A.clipShadows,E.clippingPlanes=A.clippingPlanes,E.clipIntersection=A.clipIntersection,E.displacementMap=A.displacementMap,E.displacementScale=A.displacementScale,E.displacementBias=A.displacementBias,E.wireframeLinewidth=A.wireframeLinewidth,E.linewidth=A.linewidth,T.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const k=n.properties.get(E);k.light=T}return E}function b(w,A,T,C,E){if(w.visible===!1)return;if(w.layers.test(A.layers)&&(w.isMesh||w.isLine||w.isPoints)&&(w.castShadow||w.receiveShadow&&E===Rf)&&(!w.frustumCulled||i.intersectsObject(w))){w.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,w.matrixWorld);const O=e.update(w),U=w.material;if(Array.isArray(U)){const z=O.groups;for(let L=0,G=z.length;L<G;L++){const H=z[L],F=U[H.materialIndex];if(F&&F.visible){const X=y(w,F,C,E);w.onBeforeShadow(n,w,A,T,O,X,H),n.renderBufferDirect(T,null,O,X,w,H),w.onAfterShadow(n,w,A,T,O,X,H)}}}else if(U.visible){const z=y(w,U,C,E);w.onBeforeShadow(n,w,A,T,O,z,null),n.renderBufferDirect(T,null,O,z,w,null),w.onAfterShadow(n,w,A,T,O,z,null)}}const k=w.children;for(let O=0,U=k.length;O<U;O++)b(k[O],A,T,C,E)}function x(w){w.target.removeEventListener("dispose",x);for(const T in u){const C=u[T],E=w.target.uuid;E in C&&(C[E].dispose(),delete C[E])}}}const obt={[yN]:_N,[bN]:wN,[SN]:TN,[K_]:xN,[_N]:yN,[wN]:bN,[TN]:SN,[xN]:K_};function lbt(n,e){function t(){let Pe=!1;const Dt=new gs;let dt=null;const Mt=new gs(0,0,0,0);return{setMask:function(jt){dt!==jt&&!Pe&&(n.colorMask(jt,jt,jt,jt),dt=jt)},setLocked:function(jt){Pe=jt},setClear:function(jt,Ft,Sn,Pn,Ti){Ti===!0&&(jt*=Pn,Ft*=Pn,Sn*=Pn),Dt.set(jt,Ft,Sn,Pn),Mt.equals(Dt)===!1&&(n.clearColor(jt,Ft,Sn,Pn),Mt.copy(Dt))},reset:function(){Pe=!1,dt=null,Mt.set(-1,0,0,0)}}}function i(){let Pe=!1,Dt=!1,dt=null,Mt=null,jt=null;return{setReversed:function(Ft){if(Dt!==Ft){const Sn=e.get("EXT_clip_control");Dt?Sn.clipControlEXT(Sn.LOWER_LEFT_EXT,Sn.ZERO_TO_ONE_EXT):Sn.clipControlEXT(Sn.LOWER_LEFT_EXT,Sn.NEGATIVE_ONE_TO_ONE_EXT);const Pn=jt;jt=null,this.setClear(Pn)}Dt=Ft},getReversed:function(){return Dt},setTest:function(Ft){Ft?ye(n.DEPTH_TEST):Oe(n.DEPTH_TEST)},setMask:function(Ft){dt!==Ft&&!Pe&&(n.depthMask(Ft),dt=Ft)},setFunc:function(Ft){if(Dt&&(Ft=obt[Ft]),Mt!==Ft){switch(Ft){case yN:n.depthFunc(n.NEVER);break;case _N:n.depthFunc(n.ALWAYS);break;case bN:n.depthFunc(n.LESS);break;case K_:n.depthFunc(n.LEQUAL);break;case SN:n.depthFunc(n.EQUAL);break;case xN:n.depthFunc(n.GEQUAL);break;case wN:n.depthFunc(n.GREATER);break;case TN:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Mt=Ft}},setLocked:function(Ft){Pe=Ft},setClear:function(Ft){jt!==Ft&&(Dt&&(Ft=1-Ft),n.clearDepth(Ft),jt=Ft)},reset:function(){Pe=!1,dt=null,Mt=null,jt=null,Dt=!1}}}function r(){let Pe=!1,Dt=null,dt=null,Mt=null,jt=null,Ft=null,Sn=null,Pn=null,Ti=null;return{setTest:function(jn){Pe||(jn?ye(n.STENCIL_TEST):Oe(n.STENCIL_TEST))},setMask:function(jn){Dt!==jn&&!Pe&&(n.stencilMask(jn),Dt=jn)},setFunc:function(jn,dr,fi){(dt!==jn||Mt!==dr||jt!==fi)&&(n.stencilFunc(jn,dr,fi),dt=jn,Mt=dr,jt=fi)},setOp:function(jn,dr,fi){(Ft!==jn||Sn!==dr||Pn!==fi)&&(n.stencilOp(jn,dr,fi),Ft=jn,Sn=dr,Pn=fi)},setLocked:function(jn){Pe=jn},setClear:function(jn){Ti!==jn&&(n.clearStencil(jn),Ti=jn)},reset:function(){Pe=!1,Dt=null,dt=null,Mt=null,jt=null,Ft=null,Sn=null,Pn=null,Ti=null}}}const s=new t,a=new i,o=new r,l=new WeakMap,u=new WeakMap;let c={},d={},f=new WeakMap,h=[],p=null,m=!1,g=null,v=null,_=null,y=null,b=null,x=null,w=null,A=new Ir(0,0,0),T=0,C=!1,E=null,I=null,k=null,O=null,U=null;const z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,G=0;const H=n.getParameter(n.VERSION);H.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(H)[1]),L=G>=1):H.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),L=G>=2);let F=null,X={};const te=n.getParameter(n.SCISSOR_BOX),re=n.getParameter(n.VIEWPORT),ie=new gs().fromArray(te),le=new gs().fromArray(re);function ge(Pe,Dt,dt,Mt){const jt=new Uint8Array(4),Ft=n.createTexture();n.bindTexture(Pe,Ft),n.texParameteri(Pe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Pe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Sn=0;Sn<dt;Sn++)Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?n.texImage3D(Dt,0,n.RGBA,1,1,Mt,0,n.RGBA,n.UNSIGNED_BYTE,jt):n.texImage2D(Dt+Sn,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,jt);return Ft}const pe={};pe[n.TEXTURE_2D]=ge(n.TEXTURE_2D,n.TEXTURE_2D,1),pe[n.TEXTURE_CUBE_MAP]=ge(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),pe[n.TEXTURE_2D_ARRAY]=ge(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pe[n.TEXTURE_3D]=ge(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),a.setClear(1),o.setClear(0),ye(n.DEPTH_TEST),a.setFunc(K_),Fe(!1),nt(_Q),ye(n.CULL_FACE),ce(Wp);function ye(Pe){c[Pe]!==!0&&(n.enable(Pe),c[Pe]=!0)}function Oe(Pe){c[Pe]!==!1&&(n.disable(Pe),c[Pe]=!1)}function Be(Pe,Dt){return d[Pe]!==Dt?(n.bindFramebuffer(Pe,Dt),d[Pe]=Dt,Pe===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Dt),Pe===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Dt),!0):!1}function Ye(Pe,Dt){let dt=h,Mt=!1;if(Pe){dt=f.get(Dt),dt===void 0&&(dt=[],f.set(Dt,dt));const jt=Pe.textures;if(dt.length!==jt.length||dt[0]!==n.COLOR_ATTACHMENT0){for(let Ft=0,Sn=jt.length;Ft<Sn;Ft++)dt[Ft]=n.COLOR_ATTACHMENT0+Ft;dt.length=jt.length,Mt=!0}}else dt[0]!==n.BACK&&(dt[0]=n.BACK,Mt=!0);Mt&&n.drawBuffers(dt)}function Ze(Pe){return p!==Pe?(n.useProgram(Pe),p=Pe,!0):!1}const Q={[Gm]:n.FUNC_ADD,[J0t]:n.FUNC_SUBTRACT,[emt]:n.FUNC_REVERSE_SUBTRACT};Q[tmt]=n.MIN,Q[nmt]=n.MAX;const me={[imt]:n.ZERO,[rmt]:n.ONE,[smt]:n.SRC_COLOR,[Zw]:n.SRC_ALPHA,[dmt]:n.SRC_ALPHA_SATURATE,[umt]:n.DST_COLOR,[omt]:n.DST_ALPHA,[amt]:n.ONE_MINUS_SRC_COLOR,[Jw]:n.ONE_MINUS_SRC_ALPHA,[cmt]:n.ONE_MINUS_DST_COLOR,[lmt]:n.ONE_MINUS_DST_ALPHA,[fmt]:n.CONSTANT_COLOR,[hmt]:n.ONE_MINUS_CONSTANT_COLOR,[pmt]:n.CONSTANT_ALPHA,[mmt]:n.ONE_MINUS_CONSTANT_ALPHA};function ce(Pe,Dt,dt,Mt,jt,Ft,Sn,Pn,Ti,jn){if(Pe===Wp){m===!0&&(Oe(n.BLEND),m=!1);return}if(m===!1&&(ye(n.BLEND),m=!0),Pe!==Uhe){if(Pe!==g||jn!==C){if((v!==Gm||b!==Gm)&&(n.blendEquation(n.FUNC_ADD),v=Gm,b=Gm),jn)switch(Pe){case qp:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bQ:n.blendFunc(n.ONE,n.ONE);break;case SQ:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case xQ:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}else switch(Pe){case qp:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case bQ:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case SQ:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case xQ:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Pe);break}_=null,y=null,x=null,w=null,A.set(0,0,0),T=0,g=Pe,C=jn}return}jt=jt||Dt,Ft=Ft||dt,Sn=Sn||Mt,(Dt!==v||jt!==b)&&(n.blendEquationSeparate(Q[Dt],Q[jt]),v=Dt,b=jt),(dt!==_||Mt!==y||Ft!==x||Sn!==w)&&(n.blendFuncSeparate(me[dt],me[Mt],me[Ft],me[Sn]),_=dt,y=Mt,x=Ft,w=Sn),(Pn.equals(A)===!1||Ti!==T)&&(n.blendColor(Pn.r,Pn.g,Pn.b,Ti),A.copy(Pn),T=Ti),g=Pe,C=!1}function je(Pe,Dt){Pe.side===Vu?Oe(n.CULL_FACE):ye(n.CULL_FACE);let dt=Pe.side===Il;Dt&&(dt=!dt),Fe(dt),Pe.blending===qp&&Pe.transparent===!1?ce(Wp):ce(Pe.blending,Pe.blendEquation,Pe.blendSrc,Pe.blendDst,Pe.blendEquationAlpha,Pe.blendSrcAlpha,Pe.blendDstAlpha,Pe.blendColor,Pe.blendAlpha,Pe.premultipliedAlpha),a.setFunc(Pe.depthFunc),a.setTest(Pe.depthTest),a.setMask(Pe.depthWrite),s.setMask(Pe.colorWrite);const Mt=Pe.stencilWrite;o.setTest(Mt),Mt&&(o.setMask(Pe.stencilWriteMask),o.setFunc(Pe.stencilFunc,Pe.stencilRef,Pe.stencilFuncMask),o.setOp(Pe.stencilFail,Pe.stencilZFail,Pe.stencilZPass)),Ke(Pe.polygonOffset,Pe.polygonOffsetFactor,Pe.polygonOffsetUnits),Pe.alphaToCoverage===!0?ye(n.SAMPLE_ALPHA_TO_COVERAGE):Oe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(Pe){E!==Pe&&(Pe?n.frontFace(n.CW):n.frontFace(n.CCW),E=Pe)}function nt(Pe){Pe!==Y0t?(ye(n.CULL_FACE),Pe!==I&&(Pe===_Q?n.cullFace(n.BACK):Pe===Q0t?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Oe(n.CULL_FACE),I=Pe}function We(Pe){Pe!==k&&(L&&n.lineWidth(Pe),k=Pe)}function Ke(Pe,Dt,dt){Pe?(ye(n.POLYGON_OFFSET_FILL),(O!==Dt||U!==dt)&&(n.polygonOffset(Dt,dt),O=Dt,U=dt)):Oe(n.POLYGON_OFFSET_FILL)}function it(Pe){Pe?ye(n.SCISSOR_TEST):Oe(n.SCISSOR_TEST)}function be(Pe){Pe===void 0&&(Pe=n.TEXTURE0+z-1),F!==Pe&&(n.activeTexture(Pe),F=Pe)}function K(Pe,Dt,dt){dt===void 0&&(F===null?dt=n.TEXTURE0+z-1:dt=F);let Mt=X[dt];Mt===void 0&&(Mt={type:void 0,texture:void 0},X[dt]=Mt),(Mt.type!==Pe||Mt.texture!==Dt)&&(F!==dt&&(n.activeTexture(dt),F=dt),n.bindTexture(Pe,Dt||pe[Pe]),Mt.type=Pe,Mt.texture=Dt)}function ne(){const Pe=X[F];Pe!==void 0&&Pe.type!==void 0&&(n.bindTexture(Pe.type,null),Pe.type=void 0,Pe.texture=void 0)}function Se(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function ze(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Je(){try{n.texSubImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Tt(){try{n.texSubImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function At(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function Re(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function wt(){try{n.texStorage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function vt(){try{n.texStorage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function q(){try{n.texImage2D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function xe(){try{n.texImage3D.apply(n,arguments)}catch(Pe){console.error("THREE.WebGLState:",Pe)}}function ve(Pe){ie.equals(Pe)===!1&&(n.scissor(Pe.x,Pe.y,Pe.z,Pe.w),ie.copy(Pe))}function ke(Pe){le.equals(Pe)===!1&&(n.viewport(Pe.x,Pe.y,Pe.z,Pe.w),le.copy(Pe))}function we(Pe,Dt){let dt=u.get(Dt);dt===void 0&&(dt=new WeakMap,u.set(Dt,dt));let Mt=dt.get(Pe);Mt===void 0&&(Mt=n.getUniformBlockIndex(Dt,Pe.name),dt.set(Pe,Mt))}function De(Pe,Dt){const Mt=u.get(Dt).get(Pe);l.get(Dt)!==Mt&&(n.uniformBlockBinding(Dt,Mt,Pe.__bindingPointIndex),l.set(Dt,Mt))}function xt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),a.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},F=null,X={},d={},f=new WeakMap,h=[],p=null,m=!1,g=null,v=null,_=null,y=null,b=null,x=null,w=null,A=new Ir(0,0,0),T=0,C=!1,E=null,I=null,k=null,O=null,U=null,ie.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),s.reset(),a.reset(),o.reset()}return{buffers:{color:s,depth:a,stencil:o},enable:ye,disable:Oe,bindFramebuffer:Be,drawBuffers:Ye,useProgram:Ze,setBlending:ce,setMaterial:je,setFlipSided:Fe,setCullFace:nt,setLineWidth:We,setPolygonOffset:Ke,setScissorTest:it,activeTexture:be,bindTexture:K,unbindTexture:ne,compressedTexImage2D:Se,compressedTexImage3D:ze,texImage2D:q,texImage3D:xe,updateUBOMapping:we,uniformBlockBinding:De,texStorage2D:wt,texStorage3D:vt,texSubImage2D:Je,texSubImage3D:Tt,compressedTexSubImage2D:At,compressedTexSubImage3D:Re,scissor:ve,viewport:ke,reset:xt}}function ubt(n,e,t,i,r,s,a){const o=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new oi,c=new WeakMap;let d;const f=new WeakMap;let h=!1;try{h=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(be,K){return h?new OffscreenCanvas(be,K):mI("canvas")}function m(be,K,ne){let Se=1;const ze=it(be);if((ze.width>ne||ze.height>ne)&&(Se=ne/Math.max(ze.width,ze.height)),Se<1)if(typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&be instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&be instanceof ImageBitmap||typeof VideoFrame<"u"&&be instanceof VideoFrame){const Je=Math.floor(Se*ze.width),Tt=Math.floor(Se*ze.height);d===void 0&&(d=p(Je,Tt));const At=K?p(Je,Tt):d;return At.width=Je,At.height=Tt,At.getContext("2d").drawImage(be,0,0,Je,Tt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ze.width+"x"+ze.height+") to ("+Je+"x"+Tt+")."),At}else return"data"in be&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ze.width+"x"+ze.height+")."),be;return be}function g(be){return be.generateMipmaps}function v(be){n.generateMipmap(be)}function _(be){return be.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:be.isWebGL3DRenderTarget?n.TEXTURE_3D:be.isWebGLArrayRenderTarget||be.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function y(be,K,ne,Se,ze=!1){if(be!==null){if(n[be]!==void 0)return n[be];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+be+"'")}let Je=K;if(K===n.RED&&(ne===n.FLOAT&&(Je=n.R32F),ne===n.HALF_FLOAT&&(Je=n.R16F),ne===n.UNSIGNED_BYTE&&(Je=n.R8)),K===n.RED_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Je=n.R8UI),ne===n.UNSIGNED_SHORT&&(Je=n.R16UI),ne===n.UNSIGNED_INT&&(Je=n.R32UI),ne===n.BYTE&&(Je=n.R8I),ne===n.SHORT&&(Je=n.R16I),ne===n.INT&&(Je=n.R32I)),K===n.RG&&(ne===n.FLOAT&&(Je=n.RG32F),ne===n.HALF_FLOAT&&(Je=n.RG16F),ne===n.UNSIGNED_BYTE&&(Je=n.RG8)),K===n.RG_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Je=n.RG8UI),ne===n.UNSIGNED_SHORT&&(Je=n.RG16UI),ne===n.UNSIGNED_INT&&(Je=n.RG32UI),ne===n.BYTE&&(Je=n.RG8I),ne===n.SHORT&&(Je=n.RG16I),ne===n.INT&&(Je=n.RG32I)),K===n.RGB_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Je=n.RGB8UI),ne===n.UNSIGNED_SHORT&&(Je=n.RGB16UI),ne===n.UNSIGNED_INT&&(Je=n.RGB32UI),ne===n.BYTE&&(Je=n.RGB8I),ne===n.SHORT&&(Je=n.RGB16I),ne===n.INT&&(Je=n.RGB32I)),K===n.RGBA_INTEGER&&(ne===n.UNSIGNED_BYTE&&(Je=n.RGBA8UI),ne===n.UNSIGNED_SHORT&&(Je=n.RGBA16UI),ne===n.UNSIGNED_INT&&(Je=n.RGBA32UI),ne===n.BYTE&&(Je=n.RGBA8I),ne===n.SHORT&&(Je=n.RGBA16I),ne===n.INT&&(Je=n.RGBA32I)),K===n.RGB&&ne===n.UNSIGNED_INT_5_9_9_9_REV&&(Je=n.RGB9_E5),K===n.RGBA){const Tt=ze?hI:Mr.getTransfer(Se);ne===n.FLOAT&&(Je=n.RGBA32F),ne===n.HALF_FLOAT&&(Je=n.RGBA16F),ne===n.UNSIGNED_BYTE&&(Je=Tt===qr?n.SRGB8_ALPHA8:n.RGBA8),ne===n.UNSIGNED_SHORT_4_4_4_4&&(Je=n.RGBA4),ne===n.UNSIGNED_SHORT_5_5_5_1&&(Je=n.RGB5_A1)}return(Je===n.R16F||Je===n.R32F||Je===n.RG16F||Je===n.RG32F||Je===n.RGBA16F||Je===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Je}function b(be,K){let ne;return be?K===null||K===ju||K===Q_?ne=n.DEPTH24_STENCIL8:K===Uc?ne=n.DEPTH32F_STENCIL8:K===eT&&(ne=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):K===null||K===ju||K===Q_?ne=n.DEPTH_COMPONENT24:K===Uc?ne=n.DEPTH_COMPONENT32F:K===eT&&(ne=n.DEPTH_COMPONENT16),ne}function x(be,K){return g(be)===!0||be.isFramebufferTexture&&be.minFilter!==uu&&be.minFilter!==kd?Math.log2(Math.max(K.width,K.height))+1:be.mipmaps!==void 0&&be.mipmaps.length>0?be.mipmaps.length:be.isCompressedTexture&&Array.isArray(be.image)?K.mipmaps.length:1}function w(be){const K=be.target;K.removeEventListener("dispose",w),T(K),K.isVideoTexture&&c.delete(K)}function A(be){const K=be.target;K.removeEventListener("dispose",A),E(K)}function T(be){const K=i.get(be);if(K.__webglInit===void 0)return;const ne=be.source,Se=f.get(ne);if(Se){const ze=Se[K.__cacheKey];ze.usedTimes--,ze.usedTimes===0&&C(be),Object.keys(Se).length===0&&f.delete(ne)}i.remove(be)}function C(be){const K=i.get(be);n.deleteTexture(K.__webglTexture);const ne=be.source,Se=f.get(ne);delete Se[K.__cacheKey],a.memory.textures--}function E(be){const K=i.get(be);if(be.depthTexture&&(be.depthTexture.dispose(),i.remove(be.depthTexture)),be.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(K.__webglFramebuffer[Se]))for(let ze=0;ze<K.__webglFramebuffer[Se].length;ze++)n.deleteFramebuffer(K.__webglFramebuffer[Se][ze]);else n.deleteFramebuffer(K.__webglFramebuffer[Se]);K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer[Se])}else{if(Array.isArray(K.__webglFramebuffer))for(let Se=0;Se<K.__webglFramebuffer.length;Se++)n.deleteFramebuffer(K.__webglFramebuffer[Se]);else n.deleteFramebuffer(K.__webglFramebuffer);if(K.__webglDepthbuffer&&n.deleteRenderbuffer(K.__webglDepthbuffer),K.__webglMultisampledFramebuffer&&n.deleteFramebuffer(K.__webglMultisampledFramebuffer),K.__webglColorRenderbuffer)for(let Se=0;Se<K.__webglColorRenderbuffer.length;Se++)K.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(K.__webglColorRenderbuffer[Se]);K.__webglDepthRenderbuffer&&n.deleteRenderbuffer(K.__webglDepthRenderbuffer)}const ne=be.textures;for(let Se=0,ze=ne.length;Se<ze;Se++){const Je=i.get(ne[Se]);Je.__webglTexture&&(n.deleteTexture(Je.__webglTexture),a.memory.textures--),i.remove(ne[Se])}i.remove(be)}let I=0;function k(){I=0}function O(){const be=I;return be>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+be+" texture units while this GPU supports only "+r.maxTextures),I+=1,be}function U(be){const K=[];return K.push(be.wrapS),K.push(be.wrapT),K.push(be.wrapR||0),K.push(be.magFilter),K.push(be.minFilter),K.push(be.anisotropy),K.push(be.internalFormat),K.push(be.format),K.push(be.type),K.push(be.generateMipmaps),K.push(be.premultiplyAlpha),K.push(be.flipY),K.push(be.unpackAlignment),K.push(be.colorSpace),K.join()}function z(be,K){const ne=i.get(be);if(be.isVideoTexture&&We(be),be.isRenderTargetTexture===!1&&be.version>0&&ne.__version!==be.version){const Se=be.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(ne,be,K);return}}t.bindTexture(n.TEXTURE_2D,ne.__webglTexture,n.TEXTURE0+K)}function L(be,K){const ne=i.get(be);if(be.version>0&&ne.__version!==be.version){le(ne,be,K);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ne.__webglTexture,n.TEXTURE0+K)}function G(be,K){const ne=i.get(be);if(be.version>0&&ne.__version!==be.version){le(ne,be,K);return}t.bindTexture(n.TEXTURE_3D,ne.__webglTexture,n.TEXTURE0+K)}function H(be,K){const ne=i.get(be);if(be.version>0&&ne.__version!==be.version){ge(ne,be,K);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ne.__webglTexture,n.TEXTURE0+K)}const F={[EN]:n.REPEAT,[cg]:n.CLAMP_TO_EDGE,[MN]:n.MIRRORED_REPEAT},X={[uu]:n.NEAREST,[Cmt]:n.NEAREST_MIPMAP_NEAREST,[NE]:n.NEAREST_MIPMAP_LINEAR,[kd]:n.LINEAR,[eL]:n.LINEAR_MIPMAP_NEAREST,[dg]:n.LINEAR_MIPMAP_LINEAR},te={[Dmt]:n.NEVER,[Nmt]:n.ALWAYS,[Rmt]:n.LESS,[Qhe]:n.LEQUAL,[Pmt]:n.EQUAL,[Omt]:n.GEQUAL,[kmt]:n.GREATER,[Lmt]:n.NOTEQUAL};function re(be,K){if(K.type===Uc&&e.has("OES_texture_float_linear")===!1&&(K.magFilter===kd||K.magFilter===eL||K.magFilter===NE||K.magFilter===dg||K.minFilter===kd||K.minFilter===eL||K.minFilter===NE||K.minFilter===dg)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(be,n.TEXTURE_WRAP_S,F[K.wrapS]),n.texParameteri(be,n.TEXTURE_WRAP_T,F[K.wrapT]),(be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY)&&n.texParameteri(be,n.TEXTURE_WRAP_R,F[K.wrapR]),n.texParameteri(be,n.TEXTURE_MAG_FILTER,X[K.magFilter]),n.texParameteri(be,n.TEXTURE_MIN_FILTER,X[K.minFilter]),K.compareFunction&&(n.texParameteri(be,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(be,n.TEXTURE_COMPARE_FUNC,te[K.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(K.magFilter===uu||K.minFilter!==NE&&K.minFilter!==dg||K.type===Uc&&e.has("OES_texture_float_linear")===!1)return;if(K.anisotropy>1||i.get(K).__currentAnisotropy){const ne=e.get("EXT_texture_filter_anisotropic");n.texParameterf(be,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(K.anisotropy,r.getMaxAnisotropy())),i.get(K).__currentAnisotropy=K.anisotropy}}}function ie(be,K){let ne=!1;be.__webglInit===void 0&&(be.__webglInit=!0,K.addEventListener("dispose",w));const Se=K.source;let ze=f.get(Se);ze===void 0&&(ze={},f.set(Se,ze));const Je=U(K);if(Je!==be.__cacheKey){ze[Je]===void 0&&(ze[Je]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ne=!0),ze[Je].usedTimes++;const Tt=ze[be.__cacheKey];Tt!==void 0&&(ze[be.__cacheKey].usedTimes--,Tt.usedTimes===0&&C(K)),be.__cacheKey=Je,be.__webglTexture=ze[Je].texture}return ne}function le(be,K,ne){let Se=n.TEXTURE_2D;(K.isDataArrayTexture||K.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),K.isData3DTexture&&(Se=n.TEXTURE_3D);const ze=ie(be,K),Je=K.source;t.bindTexture(Se,be.__webglTexture,n.TEXTURE0+ne);const Tt=i.get(Je);if(Je.version!==Tt.__version||ze===!0){t.activeTexture(n.TEXTURE0+ne);const At=Mr.getPrimaries(Mr.workingColorSpace),Re=K.colorSpace===Ap?null:Mr.getPrimaries(K.colorSpace),wt=K.colorSpace===Ap||At===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,K.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,K.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let vt=m(K.image,!1,r.maxTextureSize);vt=Ke(K,vt);const q=s.convert(K.format,K.colorSpace),xe=s.convert(K.type);let ve=y(K.internalFormat,q,xe,K.colorSpace,K.isVideoTexture);re(Se,K);let ke;const we=K.mipmaps,De=K.isVideoTexture!==!0,xt=Tt.__version===void 0||ze===!0,Pe=Je.dataReady,Dt=x(K,vt);if(K.isDepthTexture)ve=b(K.format===Z_,K.type),xt&&(De?t.texStorage2D(n.TEXTURE_2D,1,ve,vt.width,vt.height):t.texImage2D(n.TEXTURE_2D,0,ve,vt.width,vt.height,0,q,xe,null));else if(K.isDataTexture)if(we.length>0){De&&xt&&t.texStorage2D(n.TEXTURE_2D,Dt,ve,we[0].width,we[0].height);for(let dt=0,Mt=we.length;dt<Mt;dt++)ke=we[dt],De?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,ke.width,ke.height,q,xe,ke.data):t.texImage2D(n.TEXTURE_2D,dt,ve,ke.width,ke.height,0,q,xe,ke.data);K.generateMipmaps=!1}else De?(xt&&t.texStorage2D(n.TEXTURE_2D,Dt,ve,vt.width,vt.height),Pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,vt.width,vt.height,q,xe,vt.data)):t.texImage2D(n.TEXTURE_2D,0,ve,vt.width,vt.height,0,q,xe,vt.data);else if(K.isCompressedTexture)if(K.isCompressedArrayTexture){De&&xt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Dt,ve,we[0].width,we[0].height,vt.depth);for(let dt=0,Mt=we.length;dt<Mt;dt++)if(ke=we[dt],K.format!==Yo)if(q!==null)if(De){if(Pe)if(K.layerUpdates.size>0){const jt=WQ(ke.width,ke.height,K.format,K.type);for(const Ft of K.layerUpdates){const Sn=ke.data.subarray(Ft*jt/ke.data.BYTES_PER_ELEMENT,(Ft+1)*jt/ke.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,Ft,ke.width,ke.height,1,q,Sn)}K.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,0,ke.width,ke.height,vt.depth,q,ke.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,dt,ve,ke.width,ke.height,vt.depth,0,ke.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else De?Pe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,dt,0,0,0,ke.width,ke.height,vt.depth,q,xe,ke.data):t.texImage3D(n.TEXTURE_2D_ARRAY,dt,ve,ke.width,ke.height,vt.depth,0,q,xe,ke.data)}else{De&&xt&&t.texStorage2D(n.TEXTURE_2D,Dt,ve,we[0].width,we[0].height);for(let dt=0,Mt=we.length;dt<Mt;dt++)ke=we[dt],K.format!==Yo?q!==null?De?Pe&&t.compressedTexSubImage2D(n.TEXTURE_2D,dt,0,0,ke.width,ke.height,q,ke.data):t.compressedTexImage2D(n.TEXTURE_2D,dt,ve,ke.width,ke.height,0,ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):De?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,ke.width,ke.height,q,xe,ke.data):t.texImage2D(n.TEXTURE_2D,dt,ve,ke.width,ke.height,0,q,xe,ke.data)}else if(K.isDataArrayTexture)if(De){if(xt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Dt,ve,vt.width,vt.height,vt.depth),Pe)if(K.layerUpdates.size>0){const dt=WQ(vt.width,vt.height,K.format,K.type);for(const Mt of K.layerUpdates){const jt=vt.data.subarray(Mt*dt/vt.data.BYTES_PER_ELEMENT,(Mt+1)*dt/vt.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Mt,vt.width,vt.height,1,q,xe,jt)}K.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,vt.width,vt.height,vt.depth,q,xe,vt.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ve,vt.width,vt.height,vt.depth,0,q,xe,vt.data);else if(K.isData3DTexture)De?(xt&&t.texStorage3D(n.TEXTURE_3D,Dt,ve,vt.width,vt.height,vt.depth),Pe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,vt.width,vt.height,vt.depth,q,xe,vt.data)):t.texImage3D(n.TEXTURE_3D,0,ve,vt.width,vt.height,vt.depth,0,q,xe,vt.data);else if(K.isFramebufferTexture){if(xt)if(De)t.texStorage2D(n.TEXTURE_2D,Dt,ve,vt.width,vt.height);else{let dt=vt.width,Mt=vt.height;for(let jt=0;jt<Dt;jt++)t.texImage2D(n.TEXTURE_2D,jt,ve,dt,Mt,0,q,xe,null),dt>>=1,Mt>>=1}}else if(we.length>0){if(De&&xt){const dt=it(we[0]);t.texStorage2D(n.TEXTURE_2D,Dt,ve,dt.width,dt.height)}for(let dt=0,Mt=we.length;dt<Mt;dt++)ke=we[dt],De?Pe&&t.texSubImage2D(n.TEXTURE_2D,dt,0,0,q,xe,ke):t.texImage2D(n.TEXTURE_2D,dt,ve,q,xe,ke);K.generateMipmaps=!1}else if(De){if(xt){const dt=it(vt);t.texStorage2D(n.TEXTURE_2D,Dt,ve,dt.width,dt.height)}Pe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,q,xe,vt)}else t.texImage2D(n.TEXTURE_2D,0,ve,q,xe,vt);g(K)&&v(Se),Tt.__version=Je.version,K.onUpdate&&K.onUpdate(K)}be.__version=K.version}function ge(be,K,ne){if(K.image.length!==6)return;const Se=ie(be,K),ze=K.source;t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture,n.TEXTURE0+ne);const Je=i.get(ze);if(ze.version!==Je.__version||Se===!0){t.activeTexture(n.TEXTURE0+ne);const Tt=Mr.getPrimaries(Mr.workingColorSpace),At=K.colorSpace===Ap?null:Mr.getPrimaries(K.colorSpace),Re=K.colorSpace===Ap||Tt===At?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,K.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,K.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Re);const wt=K.isCompressedTexture||K.image[0].isCompressedTexture,vt=K.image[0]&&K.image[0].isDataTexture,q=[];for(let Mt=0;Mt<6;Mt++)!wt&&!vt?q[Mt]=m(K.image[Mt],!0,r.maxCubemapSize):q[Mt]=vt?K.image[Mt].image:K.image[Mt],q[Mt]=Ke(K,q[Mt]);const xe=q[0],ve=s.convert(K.format,K.colorSpace),ke=s.convert(K.type),we=y(K.internalFormat,ve,ke,K.colorSpace),De=K.isVideoTexture!==!0,xt=Je.__version===void 0||Se===!0,Pe=ze.dataReady;let Dt=x(K,xe);re(n.TEXTURE_CUBE_MAP,K);let dt;if(wt){De&&xt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Dt,we,xe.width,xe.height);for(let Mt=0;Mt<6;Mt++){dt=q[Mt].mipmaps;for(let jt=0;jt<dt.length;jt++){const Ft=dt[jt];K.format!==Yo?ve!==null?De?Pe&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt,0,0,Ft.width,Ft.height,ve,Ft.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt,we,Ft.width,Ft.height,0,Ft.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):De?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt,0,0,Ft.width,Ft.height,ve,ke,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt,we,Ft.width,Ft.height,0,ve,ke,Ft.data)}}}else{if(dt=K.mipmaps,De&&xt){dt.length>0&&Dt++;const Mt=it(q[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Dt,we,Mt.width,Mt.height)}for(let Mt=0;Mt<6;Mt++)if(vt){De?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,q[Mt].width,q[Mt].height,ve,ke,q[Mt].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,we,q[Mt].width,q[Mt].height,0,ve,ke,q[Mt].data);for(let jt=0;jt<dt.length;jt++){const Sn=dt[jt].image[Mt].image;De?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt+1,0,0,Sn.width,Sn.height,ve,ke,Sn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt+1,we,Sn.width,Sn.height,0,ve,ke,Sn.data)}}else{De?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,0,0,ve,ke,q[Mt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,0,we,ve,ke,q[Mt]);for(let jt=0;jt<dt.length;jt++){const Ft=dt[jt];De?Pe&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt+1,0,0,ve,ke,Ft.image[Mt]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Mt,jt+1,we,ve,ke,Ft.image[Mt])}}}g(K)&&v(n.TEXTURE_CUBE_MAP),Je.__version=ze.version,K.onUpdate&&K.onUpdate(K)}be.__version=K.version}function pe(be,K,ne,Se,ze,Je){const Tt=s.convert(ne.format,ne.colorSpace),At=s.convert(ne.type),Re=y(ne.internalFormat,Tt,At,ne.colorSpace),wt=i.get(K),vt=i.get(ne);if(vt.__renderTarget=K,!wt.__hasExternalTextures){const q=Math.max(1,K.width>>Je),xe=Math.max(1,K.height>>Je);ze===n.TEXTURE_3D||ze===n.TEXTURE_2D_ARRAY?t.texImage3D(ze,Je,Re,q,xe,K.depth,0,Tt,At,null):t.texImage2D(ze,Je,Re,q,xe,0,Tt,At,null)}t.bindFramebuffer(n.FRAMEBUFFER,be),nt(K)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,ze,vt.__webglTexture,0,Fe(K)):(ze===n.TEXTURE_2D||ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,ze,vt.__webglTexture,Je),t.bindFramebuffer(n.FRAMEBUFFER,null)}function ye(be,K,ne){if(n.bindRenderbuffer(n.RENDERBUFFER,be),K.depthBuffer){const Se=K.depthTexture,ze=Se&&Se.isDepthTexture?Se.type:null,Je=b(K.stencilBuffer,ze),Tt=K.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,At=Fe(K);nt(K)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,At,Je,K.width,K.height):ne?n.renderbufferStorageMultisample(n.RENDERBUFFER,At,Je,K.width,K.height):n.renderbufferStorage(n.RENDERBUFFER,Je,K.width,K.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Tt,n.RENDERBUFFER,be)}else{const Se=K.textures;for(let ze=0;ze<Se.length;ze++){const Je=Se[ze],Tt=s.convert(Je.format,Je.colorSpace),At=s.convert(Je.type),Re=y(Je.internalFormat,Tt,At,Je.colorSpace),wt=Fe(K);ne&&nt(K)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,wt,Re,K.width,K.height):nt(K)?o.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,wt,Re,K.width,K.height):n.renderbufferStorage(n.RENDERBUFFER,Re,K.width,K.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Oe(be,K){if(K&&K.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,be),!(K.depthTexture&&K.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Se=i.get(K.depthTexture);Se.__renderTarget=K,(!Se.__webglTexture||K.depthTexture.image.width!==K.width||K.depthTexture.image.height!==K.height)&&(K.depthTexture.image.width=K.width,K.depthTexture.image.height=K.height,K.depthTexture.needsUpdate=!0),z(K.depthTexture,0);const ze=Se.__webglTexture,Je=Fe(K);if(K.depthTexture.format===Rg)nt(K)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0,Je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ze,0);else if(K.depthTexture.format===Z_)nt(K)?o.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0,Je):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ze,0);else throw new Error("Unknown depthTexture format")}function Be(be){const K=i.get(be),ne=be.isWebGLCubeRenderTarget===!0;if(K.__boundDepthTexture!==be.depthTexture){const Se=be.depthTexture;if(K.__depthDisposeCallback&&K.__depthDisposeCallback(),Se){const ze=()=>{delete K.__boundDepthTexture,delete K.__depthDisposeCallback,Se.removeEventListener("dispose",ze)};Se.addEventListener("dispose",ze),K.__depthDisposeCallback=ze}K.__boundDepthTexture=Se}if(be.depthTexture&&!K.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");Oe(K.__webglFramebuffer,be)}else if(ne){K.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,K.__webglFramebuffer[Se]),K.__webglDepthbuffer[Se]===void 0)K.__webglDepthbuffer[Se]=n.createRenderbuffer(),ye(K.__webglDepthbuffer[Se],be,!1);else{const ze=be.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Je=K.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,Je),n.framebufferRenderbuffer(n.FRAMEBUFFER,ze,n.RENDERBUFFER,Je)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,K.__webglFramebuffer),K.__webglDepthbuffer===void 0)K.__webglDepthbuffer=n.createRenderbuffer(),ye(K.__webglDepthbuffer,be,!1);else{const Se=be.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ze=K.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,ze),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,ze)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ye(be,K,ne){const Se=i.get(be);K!==void 0&&pe(Se.__webglFramebuffer,be,be.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ne!==void 0&&Be(be)}function Ze(be){const K=be.texture,ne=i.get(be),Se=i.get(K);be.addEventListener("dispose",A);const ze=be.textures,Je=be.isWebGLCubeRenderTarget===!0,Tt=ze.length>1;if(Tt||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=K.version,a.memory.textures++),Je){ne.__webglFramebuffer=[];for(let At=0;At<6;At++)if(K.mipmaps&&K.mipmaps.length>0){ne.__webglFramebuffer[At]=[];for(let Re=0;Re<K.mipmaps.length;Re++)ne.__webglFramebuffer[At][Re]=n.createFramebuffer()}else ne.__webglFramebuffer[At]=n.createFramebuffer()}else{if(K.mipmaps&&K.mipmaps.length>0){ne.__webglFramebuffer=[];for(let At=0;At<K.mipmaps.length;At++)ne.__webglFramebuffer[At]=n.createFramebuffer()}else ne.__webglFramebuffer=n.createFramebuffer();if(Tt)for(let At=0,Re=ze.length;At<Re;At++){const wt=i.get(ze[At]);wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture(),a.memory.textures++)}if(be.samples>0&&nt(be)===!1){ne.__webglMultisampledFramebuffer=n.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let At=0;At<ze.length;At++){const Re=ze[At];ne.__webglColorRenderbuffer[At]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ne.__webglColorRenderbuffer[At]);const wt=s.convert(Re.format,Re.colorSpace),vt=s.convert(Re.type),q=y(Re.internalFormat,wt,vt,Re.colorSpace,be.isXRRenderTarget===!0),xe=Fe(be);n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,q,be.width,be.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+At,n.RENDERBUFFER,ne.__webglColorRenderbuffer[At])}n.bindRenderbuffer(n.RENDERBUFFER,null),be.depthBuffer&&(ne.__webglDepthRenderbuffer=n.createRenderbuffer(),ye(ne.__webglDepthRenderbuffer,be,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Je){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),re(n.TEXTURE_CUBE_MAP,K);for(let At=0;At<6;At++)if(K.mipmaps&&K.mipmaps.length>0)for(let Re=0;Re<K.mipmaps.length;Re++)pe(ne.__webglFramebuffer[At][Re],be,K,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,Re);else pe(ne.__webglFramebuffer[At],be,K,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+At,0);g(K)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Tt){for(let At=0,Re=ze.length;At<Re;At++){const wt=ze[At],vt=i.get(wt);t.bindTexture(n.TEXTURE_2D,vt.__webglTexture),re(n.TEXTURE_2D,wt),pe(ne.__webglFramebuffer,be,wt,n.COLOR_ATTACHMENT0+At,n.TEXTURE_2D,0),g(wt)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let At=n.TEXTURE_2D;if((be.isWebGL3DRenderTarget||be.isWebGLArrayRenderTarget)&&(At=be.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(At,Se.__webglTexture),re(At,K),K.mipmaps&&K.mipmaps.length>0)for(let Re=0;Re<K.mipmaps.length;Re++)pe(ne.__webglFramebuffer[Re],be,K,n.COLOR_ATTACHMENT0,At,Re);else pe(ne.__webglFramebuffer,be,K,n.COLOR_ATTACHMENT0,At,0);g(K)&&v(At),t.unbindTexture()}be.depthBuffer&&Be(be)}function Q(be){const K=be.textures;for(let ne=0,Se=K.length;ne<Se;ne++){const ze=K[ne];if(g(ze)){const Je=_(be),Tt=i.get(ze).__webglTexture;t.bindTexture(Je,Tt),v(Je),t.unbindTexture()}}}const me=[],ce=[];function je(be){if(be.samples>0){if(nt(be)===!1){const K=be.textures,ne=be.width,Se=be.height;let ze=n.COLOR_BUFFER_BIT;const Je=be.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Tt=i.get(be),At=K.length>1;if(At)for(let Re=0;Re<K.length;Re++)t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglFramebuffer);for(let Re=0;Re<K.length;Re++){if(be.resolveDepthBuffer&&(be.depthBuffer&&(ze|=n.DEPTH_BUFFER_BIT),be.stencilBuffer&&be.resolveStencilBuffer&&(ze|=n.STENCIL_BUFFER_BIT)),At){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Re]);const wt=i.get(K[Re]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,wt,0)}n.blitFramebuffer(0,0,ne,Se,0,0,ne,Se,ze,n.NEAREST),l===!0&&(me.length=0,ce.length=0,me.push(n.COLOR_ATTACHMENT0+Re),be.depthBuffer&&be.resolveDepthBuffer===!1&&(me.push(Je),ce.push(Je),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ce)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,me))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),At)for(let Re=0;Re<K.length;Re++){t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,Tt.__webglColorRenderbuffer[Re]);const wt=i.get(K[Re]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Tt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,wt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Tt.__webglMultisampledFramebuffer)}else if(be.depthBuffer&&be.resolveDepthBuffer===!1&&l){const K=be.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[K])}}}function Fe(be){return Math.min(r.maxSamples,be.samples)}function nt(be){const K=i.get(be);return be.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&K.__useRenderToTexture!==!1}function We(be){const K=a.render.frame;c.get(be)!==K&&(c.set(be,K),be.update())}function Ke(be,K){const ne=be.colorSpace,Se=be.format,ze=be.type;return be.isCompressedTexture===!0||be.isVideoTexture===!0||ne!==J_&&ne!==Ap&&(Mr.getTransfer(ne)===qr?(Se!==Yo||ze!==ef)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),K}function it(be){return typeof HTMLImageElement<"u"&&be instanceof HTMLImageElement?(u.width=be.naturalWidth||be.width,u.height=be.naturalHeight||be.height):typeof VideoFrame<"u"&&be instanceof VideoFrame?(u.width=be.displayWidth,u.height=be.displayHeight):(u.width=be.width,u.height=be.height),u}this.allocateTextureUnit=O,this.resetTextureUnits=k,this.setTexture2D=z,this.setTexture2DArray=L,this.setTexture3D=G,this.setTextureCube=H,this.rebindTextures=Ye,this.setupRenderTarget=Ze,this.updateRenderTargetMipmap=Q,this.updateMultisampleRenderTarget=je,this.setupDepthRenderbuffer=Be,this.setupFrameBufferTexture=pe,this.useMultisampledRTT=nt}function gpe(n,e){function t(i,r=Ap){let s;const a=Mr.getTransfer(r);if(i===ef)return n.UNSIGNED_BYTE;if(i===lz)return n.UNSIGNED_SHORT_4_4_4_4;if(i===uz)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Ghe)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Vhe)return n.BYTE;if(i===$he)return n.SHORT;if(i===eT)return n.UNSIGNED_SHORT;if(i===oz)return n.INT;if(i===ju)return n.UNSIGNED_INT;if(i===Uc)return n.FLOAT;if(i===jb)return n.HALF_FLOAT;if(i===Whe)return n.ALPHA;if(i===qhe)return n.RGB;if(i===Yo)return n.RGBA;if(i===jhe)return n.LUMINANCE;if(i===Khe)return n.LUMINANCE_ALPHA;if(i===Rg)return n.DEPTH_COMPONENT;if(i===Z_)return n.DEPTH_STENCIL;if(i===Xhe)return n.RED;if(i===lR)return n.RED_INTEGER;if(i===cz)return n.RG;if(i===dz)return n.RG_INTEGER;if(i===Q1)return n.RGBA_INTEGER;if(i===o3||i===l3||i===u3||i===c3)if(a===qr)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===o3)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===l3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===u3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===c3)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===o3)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===l3)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===u3)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===c3)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===IN||i===DN||i===RN||i===PN)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===IN)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===DN)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===RN)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===PN)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===kN||i===LN||i===ON)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===kN||i===LN)return a===qr?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===ON)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===NN||i===BN||i===FN||i===UN||i===zN||i===HN||i===VN||i===$N||i===GN||i===WN||i===qN||i===jN||i===KN||i===XN)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===NN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===BN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===FN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===UN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===zN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===HN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===VN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===$N)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===GN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===WN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===qN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===jN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===KN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===XN)return a===qr?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===d3||i===YN||i===QN)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===d3)return a===qr?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===YN)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===QN)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Yhe||i===ZN||i===JN||i===eB)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===d3)return s.COMPRESSED_RED_RGTC1_EXT;if(i===ZN)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===JN)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===eB)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Q_?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const cbt={type:"move"};class EL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new eM,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new eM,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ft,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ft),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new eM,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ft,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ft),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i),v=this._getHandJoint(u,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}const c=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=c.position.distanceTo(d.position),h=.02,p=.005;u.inputState.pinching&&f>h+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=h-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(cbt)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new eM;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const dbt=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,fbt=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hbt{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new Jo,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new du({vertexShader:dbt,fragmentShader:fbt,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Hs(new tb(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class pbt extends fv{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,d=null,f=null,h=null,p=null;const m=new hbt,g=t.getContextAttributes();let v=null,_=null;const y=[],b=[],x=new oi;let w=null;const A=new Hu;A.viewport=new gs;const T=new Hu;T.viewport=new gs;const C=[A,T],E=new Ngt;let I=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let ge=y[le];return ge===void 0&&(ge=new EL,y[le]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function(le){let ge=y[le];return ge===void 0&&(ge=new EL,y[le]=ge),ge.getGripSpace()},this.getHand=function(le){let ge=y[le];return ge===void 0&&(ge=new EL,y[le]=ge),ge.getHandSpace()};function O(le){const ge=b.indexOf(le.inputSource);if(ge===-1)return;const pe=y[ge];pe!==void 0&&(pe.update(le.inputSource,le.frame,u||a),pe.dispatchEvent({type:le.type,data:le.inputSource}))}function U(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",U),r.removeEventListener("inputsourceschange",z);for(let le=0;le<y.length;le++){const ge=b[le];ge!==null&&(b[le]=null,y[le].disconnect(ge))}I=null,k=null,m.reset(),e.setRenderTarget(v),h=null,f=null,d=null,r=null,_=null,ie.stop(),i.isPresenting=!1,e.setPixelRatio(w),e.setSize(x.width,x.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){o=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(le){u=le},this.getBaseLayer=function(){return f!==null?f:h},this.getBinding=function(){return d},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",U),r.addEventListener("inputsourceschange",z),g.xrCompatible!==!0&&await t.makeXRCompatible(),w=e.getPixelRatio(),e.getSize(x),r.renderState.layers===void 0){const ge={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:s};h=new XRWebGLLayer(r,t,ge),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),_=new _0(h.framebufferWidth,h.framebufferHeight,{format:Yo,type:ef,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let ge=null,pe=null,ye=null;g.depth&&(ye=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ge=g.stencil?Z_:Rg,pe=g.stencil?Q_:ju);const Oe={colorFormat:t.RGBA8,depthFormat:ye,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(Oe),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),_=new _0(f.textureWidth,f.textureHeight,{format:Yo,type:ef,depthTexture:new pz(f.textureWidth,f.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await r.requestReferenceSpace(o),ie.setContext(r),ie.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return m.getDepthTexture()};function z(le){for(let ge=0;ge<le.removed.length;ge++){const pe=le.removed[ge],ye=b.indexOf(pe);ye>=0&&(b[ye]=null,y[ye].disconnect(pe))}for(let ge=0;ge<le.added.length;ge++){const pe=le.added[ge];let ye=b.indexOf(pe);if(ye===-1){for(let Be=0;Be<y.length;Be++)if(Be>=b.length){b.push(pe),ye=Be;break}else if(b[Be]===null){b[Be]=pe,ye=Be;break}if(ye===-1)break}const Oe=y[ye];Oe&&Oe.connect(pe)}}const L=new ft,G=new ft;function H(le,ge,pe){L.setFromMatrixPosition(ge.matrixWorld),G.setFromMatrixPosition(pe.matrixWorld);const ye=L.distanceTo(G),Oe=ge.projectionMatrix.elements,Be=pe.projectionMatrix.elements,Ye=Oe[14]/(Oe[10]-1),Ze=Oe[14]/(Oe[10]+1),Q=(Oe[9]+1)/Oe[5],me=(Oe[9]-1)/Oe[5],ce=(Oe[8]-1)/Oe[0],je=(Be[8]+1)/Be[0],Fe=Ye*ce,nt=Ye*je,We=ye/(-ce+je),Ke=We*-ce;if(ge.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(Ke),le.translateZ(We),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),Oe[10]===-1)le.projectionMatrix.copy(ge.projectionMatrix),le.projectionMatrixInverse.copy(ge.projectionMatrixInverse);else{const it=Ye+We,be=Ze+We,K=Fe-Ke,ne=nt+(ye-Ke),Se=Q*Ze/be*it,ze=me*Ze/be*it;le.projectionMatrix.makePerspective(K,ne,Se,ze,it,be),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function F(le,ge){ge===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(ge.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;let ge=le.near,pe=le.far;m.texture!==null&&(m.depthNear>0&&(ge=m.depthNear),m.depthFar>0&&(pe=m.depthFar)),E.near=T.near=A.near=ge,E.far=T.far=A.far=pe,(I!==E.near||k!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),I=E.near,k=E.far),A.layers.mask=le.layers.mask|2,T.layers.mask=le.layers.mask|4,E.layers.mask=A.layers.mask|T.layers.mask;const ye=le.parent,Oe=E.cameras;F(E,ye);for(let Be=0;Be<Oe.length;Be++)F(Oe[Be],ye);Oe.length===2?H(E,A,T):E.projectionMatrix.copy(A.projectionMatrix),X(le,E,ye)};function X(le,ge,pe){pe===null?le.matrix.copy(ge.matrixWorld):(le.matrix.copy(pe.matrixWorld),le.matrix.invert(),le.matrix.multiply(ge.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(ge.projectionMatrix),le.projectionMatrixInverse.copy(ge.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=tT*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return E},this.getFoveation=function(){if(!(f===null&&h===null))return l},this.setFoveation=function(le){l=le,f!==null&&(f.fixedFoveation=le),h!==null&&h.fixedFoveation!==void 0&&(h.fixedFoveation=le)},this.hasDepthSensing=function(){return m.texture!==null},this.getDepthSensingMesh=function(){return m.getMesh(E)};let te=null;function re(le,ge){if(c=ge.getViewerPose(u||a),p=ge,c!==null){const pe=c.views;h!==null&&(e.setRenderTargetFramebuffer(_,h.framebuffer),e.setRenderTarget(_));let ye=!1;pe.length!==E.cameras.length&&(E.cameras.length=0,ye=!0);for(let Be=0;Be<pe.length;Be++){const Ye=pe[Be];let Ze=null;if(h!==null)Ze=h.getViewport(Ye);else{const me=d.getViewSubImage(f,Ye);Ze=me.viewport,Be===0&&(e.setRenderTargetTextures(_,me.colorTexture,f.ignoreDepthValues?void 0:me.depthStencilTexture),e.setRenderTarget(_))}let Q=C[Be];Q===void 0&&(Q=new Hu,Q.layers.enable(Be),Q.viewport=new gs,C[Be]=Q),Q.matrix.fromArray(Ye.transform.matrix),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.projectionMatrix.fromArray(Ye.projectionMatrix),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert(),Q.viewport.set(Ze.x,Ze.y,Ze.width,Ze.height),Be===0&&(E.matrix.copy(Q.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),ye===!0&&E.cameras.push(Q)}const Oe=r.enabledFeatures;if(Oe&&Oe.includes("depth-sensing")){const Be=d.getDepthInformation(pe[0]);Be&&Be.isValid&&Be.texture&&m.init(e,Be,r.renderState)}}for(let pe=0;pe<y.length;pe++){const ye=b[pe],Oe=y[pe];ye!==null&&Oe!==void 0&&Oe.update(ye,ge,u||a)}te&&te(le,ge),ge.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ge}),p=null}const ie=new dpe;ie.setAnimationLoop(re),this.setAnimationLoop=function(le){te=le},this.dispose=function(){}}}const Mm=new gh,mbt=new Pi;function gbt(n,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function i(g,v){v.color.getRGB(g.fogColor.value,ope(n)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function r(g,v,_,y,b){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),d(g,v)):v.isMeshPhongMaterial?(s(g,v),c(g,v)):v.isMeshStandardMaterial?(s(g,v),f(g,v),v.isMeshPhysicalMaterial&&h(g,v,b)):v.isMeshMatcapMaterial?(s(g,v),p(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),m(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(a(g,v),v.isLineDashedMaterial&&o(g,v)):v.isPointsMaterial?l(g,v,_,y):v.isSpriteMaterial?u(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===Il&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===Il&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const _=e.get(v),y=_.envMap,b=_.envMapRotation;y&&(g.envMap.value=y,Mm.copy(b),Mm.x*=-1,Mm.y*=-1,Mm.z*=-1,y.isCubeTexture&&y.isRenderTargetTexture===!1&&(Mm.y*=-1,Mm.z*=-1),g.envMapRotation.value.setFromMatrix4(mbt.makeRotationFromEuler(Mm)),g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap&&(g.lightMap.value=v.lightMap,g.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,g.lightMapTransform)),v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function a(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function o(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function l(g,v,_,y){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*_,g.scale.value=y*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function c(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function d(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function f(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),v.envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function h(g,v,_){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Il&&g.clearcoatNormalScale.value.negate())),v.dispersion>0&&(g.dispersion.value=v.dispersion),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function p(g,v){v.matcap&&(g.matcap.value=v.matcap)}function m(g,v){const _=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function vbt(n,e,t,i){let r={},s={},a=[];const o=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,y){const b=y.program;i.uniformBlockBinding(_,b)}function u(_,y){let b=r[_.id];b===void 0&&(p(_),b=c(_),r[_.id]=b,_.addEventListener("dispose",g));const x=y.program;i.updateUBOMapping(_,x);const w=e.render.frame;s[_.id]!==w&&(f(_),s[_.id]=w)}function c(_){const y=d();_.__bindingPointIndex=y;const b=n.createBuffer(),x=_.__size,w=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,b),n.bufferData(n.UNIFORM_BUFFER,x,w),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,y,b),b}function d(){for(let _=0;_<o;_++)if(a.indexOf(_)===-1)return a.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const y=r[_.id],b=_.uniforms,x=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,y);for(let w=0,A=b.length;w<A;w++){const T=Array.isArray(b[w])?b[w]:[b[w]];for(let C=0,E=T.length;C<E;C++){const I=T[C];if(h(I,w,C,x)===!0){const k=I.__offset,O=Array.isArray(I.value)?I.value:[I.value];let U=0;for(let z=0;z<O.length;z++){const L=O[z],G=m(L);typeof L=="number"||typeof L=="boolean"?(I.__data[0]=L,n.bufferSubData(n.UNIFORM_BUFFER,k+U,I.__data)):L.isMatrix3?(I.__data[0]=L.elements[0],I.__data[1]=L.elements[1],I.__data[2]=L.elements[2],I.__data[3]=0,I.__data[4]=L.elements[3],I.__data[5]=L.elements[4],I.__data[6]=L.elements[5],I.__data[7]=0,I.__data[8]=L.elements[6],I.__data[9]=L.elements[7],I.__data[10]=L.elements[8],I.__data[11]=0):(L.toArray(I.__data,U),U+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,k,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function h(_,y,b,x){const w=_.value,A=y+"_"+b;if(x[A]===void 0)return typeof w=="number"||typeof w=="boolean"?x[A]=w:x[A]=w.clone(),!0;{const T=x[A];if(typeof w=="number"||typeof w=="boolean"){if(T!==w)return x[A]=w,!0}else if(T.equals(w)===!1)return T.copy(w),!0}return!1}function p(_){const y=_.uniforms;let b=0;const x=16;for(let A=0,T=y.length;A<T;A++){const C=Array.isArray(y[A])?y[A]:[y[A]];for(let E=0,I=C.length;E<I;E++){const k=C[E],O=Array.isArray(k.value)?k.value:[k.value];for(let U=0,z=O.length;U<z;U++){const L=O[U],G=m(L),H=b%x,F=H%G.boundary,X=H+F;b+=F,X!==0&&x-X<G.storage&&(b+=x-X),k.__data=new Float32Array(G.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=b,b+=G.storage}}}const w=b%x;return w>0&&(b+=x-w),_.__size=b,_.__cache={},this}function m(_){const y={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(y.boundary=4,y.storage=4):_.isVector2?(y.boundary=8,y.storage=8):_.isVector3||_.isColor?(y.boundary=16,y.storage=12):_.isVector4?(y.boundary=16,y.storage=16):_.isMatrix3?(y.boundary=48,y.storage=48):_.isMatrix4?(y.boundary=64,y.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),y}function g(_){const y=_.target;y.removeEventListener("dispose",g);const b=a.indexOf(y.__bindingPointIndex);a.splice(b,1),n.deleteBuffer(r[y.id]),delete r[y.id],delete s[y.id]}function v(){for(const _ in r)n.deleteBuffer(r[_]);a=[],r={},s={}}return{bind:l,update:u,dispose:v}}class ybt{constructor(e={}){const{canvas:t=egt(),context:i=null,depth:r=!0,stencil:s=!1,alpha:a=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:d=!1,reverseDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=a;const p=new Uint32Array(4),m=new Int32Array(4);let g=null,v=null;const _=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ou,this.toneMapping=jp,this.toneMappingExposure=1;const b=this;let x=!1,w=0,A=0,T=null,C=-1,E=null;const I=new gs,k=new gs;let O=null;const U=new Ir(0);let z=0,L=t.width,G=t.height,H=1,F=null,X=null;const te=new gs(0,0,L,G),re=new gs(0,0,L,G);let ie=!1;const le=new cpe;let ge=!1,pe=!1;const ye=new Pi,Oe=new Pi,Be=new ft,Ye=new gs,Ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Q=!1;function me(){return T===null?H:1}let ce=i;function je(Le,Et){return t.getContext(Le,Et)}try{const Le={alpha:!0,depth:r,stencil:s,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${az}`),t.addEventListener("webglcontextlost",Mt,!1),t.addEventListener("webglcontextrestored",jt,!1),t.addEventListener("webglcontextcreationerror",Ft,!1),ce===null){const Et="webgl2";if(ce=je(Et,Le),ce===null)throw je(Et)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Le){throw console.error("THREE.WebGLRenderer: "+Le.message),Le}let Fe,nt,We,Ke,it,be,K,ne,Se,ze,Je,Tt,At,Re,wt,vt,q,xe,ve,ke,we,De,xt,Pe;function Dt(){Fe=new M1t(ce),Fe.init(),De=new gpe(ce,Fe),nt=new x1t(ce,Fe,e,De),We=new lbt(ce,Fe),nt.reverseDepthBuffer&&f&&We.buffers.depth.setReversed(!0),Ke=new R1t(ce),it=new X_t,be=new ubt(ce,Fe,We,it,nt,De,Ke),K=new T1t(b),ne=new E1t(b),Se=new Fgt(ce),xt=new b1t(ce,Se),ze=new I1t(ce,Se,Ke,xt),Je=new k1t(ce,ze,Se,Ke),ve=new P1t(ce,nt,be),vt=new w1t(it),Tt=new K_t(b,K,ne,Fe,nt,xt,vt),At=new gbt(b,it),Re=new Q_t,wt=new ibt(Fe),xe=new _1t(b,K,ne,We,Je,h,l),q=new abt(b,Je,nt),Pe=new vbt(ce,Ke,nt,We),ke=new S1t(ce,Fe,Ke),we=new D1t(ce,Fe,Ke),Ke.programs=Tt.programs,b.capabilities=nt,b.extensions=Fe,b.properties=it,b.renderLists=Re,b.shadowMap=q,b.state=We,b.info=Ke}Dt();const dt=new pbt(b,ce);this.xr=dt,this.getContext=function(){return ce},this.getContextAttributes=function(){return ce.getContextAttributes()},this.forceContextLoss=function(){const Le=Fe.get("WEBGL_lose_context");Le&&Le.loseContext()},this.forceContextRestore=function(){const Le=Fe.get("WEBGL_lose_context");Le&&Le.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function(Le){Le!==void 0&&(H=Le,this.setSize(L,G,!1))},this.getSize=function(Le){return Le.set(L,G)},this.setSize=function(Le,Et,Xe=!0){if(dt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}L=Le,G=Et,t.width=Math.floor(Le*H),t.height=Math.floor(Et*H),Xe===!0&&(t.style.width=Le+"px",t.style.height=Et+"px"),this.setViewport(0,0,Le,Et)},this.getDrawingBufferSize=function(Le){return Le.set(L*H,G*H).floor()},this.setDrawingBufferSize=function(Le,Et,Xe){L=Le,G=Et,H=Xe,t.width=Math.floor(Le*Xe),t.height=Math.floor(Et*Xe),this.setViewport(0,0,Le,Et)},this.getCurrentViewport=function(Le){return Le.copy(I)},this.getViewport=function(Le){return Le.copy(te)},this.setViewport=function(Le,Et,Xe,_t){Le.isVector4?te.set(Le.x,Le.y,Le.z,Le.w):te.set(Le,Et,Xe,_t),We.viewport(I.copy(te).multiplyScalar(H).round())},this.getScissor=function(Le){return Le.copy(re)},this.setScissor=function(Le,Et,Xe,_t){Le.isVector4?re.set(Le.x,Le.y,Le.z,Le.w):re.set(Le,Et,Xe,_t),We.scissor(k.copy(re).multiplyScalar(H).round())},this.getScissorTest=function(){return ie},this.setScissorTest=function(Le){We.setScissorTest(ie=Le)},this.setOpaqueSort=function(Le){F=Le},this.setTransparentSort=function(Le){X=Le},this.getClearColor=function(Le){return Le.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(Le=!0,Et=!0,Xe=!0){let _t=0;if(Le){let mt=!1;if(T!==null){const Ot=T.texture.format;mt=Ot===Q1||Ot===dz||Ot===lR}if(mt){const Ot=T.texture.type,gn=Ot===ef||Ot===ju||Ot===eT||Ot===Q_||Ot===lz||Ot===uz,dn=xe.getClearColor(),En=xe.getClearAlpha(),ni=dn.r,bn=dn.g,Un=dn.b;gn?(p[0]=ni,p[1]=bn,p[2]=Un,p[3]=En,ce.clearBufferuiv(ce.COLOR,0,p)):(m[0]=ni,m[1]=bn,m[2]=Un,m[3]=En,ce.clearBufferiv(ce.COLOR,0,m))}else _t|=ce.COLOR_BUFFER_BIT}Et&&(_t|=ce.DEPTH_BUFFER_BIT),Xe&&(_t|=ce.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ce.clear(_t)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Mt,!1),t.removeEventListener("webglcontextrestored",jt,!1),t.removeEventListener("webglcontextcreationerror",Ft,!1),xe.dispose(),Re.dispose(),wt.dispose(),it.dispose(),K.dispose(),ne.dispose(),Je.dispose(),xt.dispose(),Pe.dispose(),Tt.dispose(),dt.dispose(),dt.removeEventListener("sessionstart",J),dt.removeEventListener("sessionend",ue),en.stop()};function Mt(Le){Le.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function jt(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const Le=Ke.autoReset,Et=q.enabled,Xe=q.autoUpdate,_t=q.needsUpdate,mt=q.type;Dt(),Ke.autoReset=Le,q.enabled=Et,q.autoUpdate=Xe,q.needsUpdate=_t,q.type=mt}function Ft(Le){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Le.statusMessage)}function Sn(Le){const Et=Le.target;Et.removeEventListener("dispose",Sn),Pn(Et)}function Pn(Le){Ti(Le),it.remove(Le)}function Ti(Le){const Et=it.get(Le).programs;Et!==void 0&&(Et.forEach(function(Xe){Tt.releaseProgram(Xe)}),Le.isShaderMaterial&&Tt.releaseShaderCache(Le))}this.renderBufferDirect=function(Le,Et,Xe,_t,mt,Ot){Et===null&&(Et=Ze);const gn=mt.isMesh&&mt.matrixWorld.determinant()<0,dn=kn(Le,Et,Xe,_t,mt);We.setMaterial(_t,gn);let En=Xe.index,ni=1;if(_t.wireframe===!0){if(En=ze.getWireframeAttribute(Xe),En===void 0)return;ni=2}const bn=Xe.drawRange,Un=Xe.attributes.position;let Bn=bn.start*ni,yi=(bn.start+bn.count)*ni;Ot!==null&&(Bn=Math.max(Bn,Ot.start*ni),yi=Math.min(yi,(Ot.start+Ot.count)*ni)),En!==null?(Bn=Math.max(Bn,0),yi=Math.min(yi,En.count)):Un!=null&&(Bn=Math.max(Bn,0),yi=Math.min(yi,Un.count));const Qi=yi-Bn;if(Qi<0||Qi===1/0)return;xt.setup(mt,_t,dn,Xe,En);let Ii,Di=ke;if(En!==null&&(Ii=Se.get(En),Di=we,Di.setIndex(Ii)),mt.isMesh)_t.wireframe===!0?(We.setLineWidth(_t.wireframeLinewidth*me()),Di.setMode(ce.LINES)):Di.setMode(ce.TRIANGLES);else if(mt.isLine){let Zn=_t.linewidth;Zn===void 0&&(Zn=1),We.setLineWidth(Zn*me()),mt.isLineSegments?Di.setMode(ce.LINES):mt.isLineLoop?Di.setMode(ce.LINE_LOOP):Di.setMode(ce.LINE_STRIP)}else mt.isPoints?Di.setMode(ce.POINTS):mt.isSprite&&Di.setMode(ce.TRIANGLES);if(mt.isBatchedMesh)if(mt._multiDrawInstances!==null)Di.renderMultiDrawInstances(mt._multiDrawStarts,mt._multiDrawCounts,mt._multiDrawCount,mt._multiDrawInstances);else if(Fe.get("WEBGL_multi_draw"))Di.renderMultiDraw(mt._multiDrawStarts,mt._multiDrawCounts,mt._multiDrawCount);else{const Zn=mt._multiDrawStarts,xr=mt._multiDrawCounts,rr=mt._multiDrawCount,wa=En?Se.get(En).bytesPerElement:1,ro=it.get(_t).currentProgram.getUniforms();for(let Li=0;Li<rr;Li++)ro.setValue(ce,"_gl_DrawID",Li),Di.render(Zn[Li]/wa,xr[Li])}else if(mt.isInstancedMesh)Di.renderInstances(Bn,Qi,mt.count);else if(Xe.isInstancedBufferGeometry){const Zn=Xe._maxInstanceCount!==void 0?Xe._maxInstanceCount:1/0,xr=Math.min(Xe.instanceCount,Zn);Di.renderInstances(Bn,Qi,xr)}else Di.render(Bn,Qi)};function jn(Le,Et,Xe){Le.transparent===!0&&Le.side===Vu&&Le.forceSinglePass===!1?(Le.side=Il,Le.needsUpdate=!0,ut(Le,Et,Xe),Le.side=Jd,Le.needsUpdate=!0,ut(Le,Et,Xe),Le.side=Vu):ut(Le,Et,Xe)}this.compile=function(Le,Et,Xe=null){Xe===null&&(Xe=Le),v=wt.get(Xe),v.init(Et),y.push(v),Xe.traverseVisible(function(mt){mt.isLight&&mt.layers.test(Et.layers)&&(v.pushLight(mt),mt.castShadow&&v.pushShadow(mt))}),Le!==Xe&&Le.traverseVisible(function(mt){mt.isLight&&mt.layers.test(Et.layers)&&(v.pushLight(mt),mt.castShadow&&v.pushShadow(mt))}),v.setupLights();const _t=new Set;return Le.traverse(function(mt){if(!(mt.isMesh||mt.isPoints||mt.isLine||mt.isSprite))return;const Ot=mt.material;if(Ot)if(Array.isArray(Ot))for(let gn=0;gn<Ot.length;gn++){const dn=Ot[gn];jn(dn,Xe,mt),_t.add(dn)}else jn(Ot,Xe,mt),_t.add(Ot)}),y.pop(),v=null,_t},this.compileAsync=function(Le,Et,Xe=null){const _t=this.compile(Le,Et,Xe);return new Promise(mt=>{function Ot(){if(_t.forEach(function(gn){it.get(gn).currentProgram.isReady()&&_t.delete(gn)}),_t.size===0){mt(Le);return}setTimeout(Ot,10)}Fe.get("KHR_parallel_shader_compile")!==null?Ot():setTimeout(Ot,10)})};let dr=null;function fi(Le){dr&&dr(Le)}function J(){en.stop()}function ue(){en.start()}const en=new dpe;en.setAnimationLoop(fi),typeof self<"u"&&en.setContext(self),this.setAnimationLoop=function(Le){dr=Le,dt.setAnimationLoop(Le),Le===null?en.stop():en.start()},dt.addEventListener("sessionstart",J),dt.addEventListener("sessionend",ue),this.render=function(Le,Et){if(Et!==void 0&&Et.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(x===!0)return;if(Le.matrixWorldAutoUpdate===!0&&Le.updateMatrixWorld(),Et.parent===null&&Et.matrixWorldAutoUpdate===!0&&Et.updateMatrixWorld(),dt.enabled===!0&&dt.isPresenting===!0&&(dt.cameraAutoUpdate===!0&&dt.updateCamera(Et),Et=dt.getCamera()),Le.isScene===!0&&Le.onBeforeRender(b,Le,Et,T),v=wt.get(Le,y.length),v.init(Et),y.push(v),Oe.multiplyMatrices(Et.projectionMatrix,Et.matrixWorldInverse),le.setFromProjectionMatrix(Oe),pe=this.localClippingEnabled,ge=vt.init(this.clippingPlanes,pe),g=Re.get(Le,_.length),g.init(),_.push(g),dt.enabled===!0&&dt.isPresenting===!0){const Ot=b.xr.getDepthSensingMesh();Ot!==null&&Ie(Ot,Et,-1/0,b.sortObjects)}Ie(Le,Et,0,b.sortObjects),g.finish(),b.sortObjects===!0&&g.sort(F,X),Q=dt.enabled===!1||dt.isPresenting===!1||dt.hasDepthSensing()===!1,Q&&xe.addToRenderList(g,Le),this.info.render.frame++,ge===!0&&vt.beginShadows();const Xe=v.state.shadowsArray;q.render(Xe,Le,Et),ge===!0&&vt.endShadows(),this.info.autoReset===!0&&this.info.reset();const _t=g.opaque,mt=g.transmissive;if(v.setupLights(),Et.isArrayCamera){const Ot=Et.cameras;if(mt.length>0)for(let gn=0,dn=Ot.length;gn<dn;gn++){const En=Ot[gn];kt(_t,mt,Le,En)}Q&&xe.render(Le);for(let gn=0,dn=Ot.length;gn<dn;gn++){const En=Ot[gn];de(g,Le,En,En.viewport)}}else mt.length>0&&kt(_t,mt,Le,Et),Q&&xe.render(Le),de(g,Le,Et);T!==null&&(be.updateMultisampleRenderTarget(T),be.updateRenderTargetMipmap(T)),Le.isScene===!0&&Le.onAfterRender(b,Le,Et),xt.resetDefaultState(),C=-1,E=null,y.pop(),y.length>0?(v=y[y.length-1],ge===!0&&vt.setGlobalState(b.clippingPlanes,v.state.camera)):v=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function Ie(Le,Et,Xe,_t){if(Le.visible===!1)return;if(Le.layers.test(Et.layers)){if(Le.isGroup)Xe=Le.renderOrder;else if(Le.isLOD)Le.autoUpdate===!0&&Le.update(Et);else if(Le.isLight)v.pushLight(Le),Le.castShadow&&v.pushShadow(Le);else if(Le.isSprite){if(!Le.frustumCulled||le.intersectsSprite(Le)){_t&&Ye.setFromMatrixPosition(Le.matrixWorld).applyMatrix4(Oe);const gn=Je.update(Le),dn=Le.material;dn.visible&&g.push(Le,gn,dn,Xe,Ye.z,null)}}else if((Le.isMesh||Le.isLine||Le.isPoints)&&(!Le.frustumCulled||le.intersectsObject(Le))){const gn=Je.update(Le),dn=Le.material;if(_t&&(Le.boundingSphere!==void 0?(Le.boundingSphere===null&&Le.computeBoundingSphere(),Ye.copy(Le.boundingSphere.center)):(gn.boundingSphere===null&&gn.computeBoundingSphere(),Ye.copy(gn.boundingSphere.center)),Ye.applyMatrix4(Le.matrixWorld).applyMatrix4(Oe)),Array.isArray(dn)){const En=gn.groups;for(let ni=0,bn=En.length;ni<bn;ni++){const Un=En[ni],Bn=dn[Un.materialIndex];Bn&&Bn.visible&&g.push(Le,gn,Bn,Xe,Ye.z,Un)}}else dn.visible&&g.push(Le,gn,dn,Xe,Ye.z,null)}}const Ot=Le.children;for(let gn=0,dn=Ot.length;gn<dn;gn++)Ie(Ot[gn],Et,Xe,_t)}function de(Le,Et,Xe,_t){const mt=Le.opaque,Ot=Le.transmissive,gn=Le.transparent;v.setupLightsView(Xe),ge===!0&&vt.setGlobalState(b.clippingPlanes,Xe),_t&&We.viewport(I.copy(_t)),mt.length>0&&Ct(mt,Et,Xe),Ot.length>0&&Ct(Ot,Et,Xe),gn.length>0&&Ct(gn,Et,Xe),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function kt(Le,Et,Xe,_t){if((Xe.isScene===!0?Xe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[_t.id]===void 0&&(v.state.transmissionRenderTarget[_t.id]=new _0(1,1,{generateMipmaps:!0,type:Fe.has("EXT_color_buffer_half_float")||Fe.has("EXT_color_buffer_float")?jb:ef,minFilter:dg,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Mr.workingColorSpace}));const Ot=v.state.transmissionRenderTarget[_t.id],gn=_t.viewport||I;Ot.setSize(gn.z,gn.w);const dn=b.getRenderTarget();b.setRenderTarget(Ot),b.getClearColor(U),z=b.getClearAlpha(),z<1&&b.setClearColor(16777215,.5),b.clear(),Q&&xe.render(Xe);const En=b.toneMapping;b.toneMapping=jp;const ni=_t.viewport;if(_t.viewport!==void 0&&(_t.viewport=void 0),v.setupLightsView(_t),ge===!0&&vt.setGlobalState(b.clippingPlanes,_t),Ct(Le,Xe,_t),be.updateMultisampleRenderTarget(Ot),be.updateRenderTargetMipmap(Ot),Fe.has("WEBGL_multisampled_render_to_texture")===!1){let bn=!1;for(let Un=0,Bn=Et.length;Un<Bn;Un++){const yi=Et[Un],Qi=yi.object,Ii=yi.geometry,Di=yi.material,Zn=yi.group;if(Di.side===Vu&&Qi.layers.test(_t.layers)){const xr=Di.side;Di.side=Il,Di.needsUpdate=!0,Ut(Qi,Xe,_t,Ii,Di,Zn),Di.side=xr,Di.needsUpdate=!0,bn=!0}}bn===!0&&(be.updateMultisampleRenderTarget(Ot),be.updateRenderTargetMipmap(Ot))}b.setRenderTarget(dn),b.setClearColor(U,z),ni!==void 0&&(_t.viewport=ni),b.toneMapping=En}function Ct(Le,Et,Xe){const _t=Et.isScene===!0?Et.overrideMaterial:null;for(let mt=0,Ot=Le.length;mt<Ot;mt++){const gn=Le[mt],dn=gn.object,En=gn.geometry,ni=_t===null?gn.material:_t,bn=gn.group;dn.layers.test(Xe.layers)&&Ut(dn,Et,Xe,En,ni,bn)}}function Ut(Le,Et,Xe,_t,mt,Ot){Le.onBeforeRender(b,Et,Xe,_t,mt,Ot),Le.modelViewMatrix.multiplyMatrices(Xe.matrixWorldInverse,Le.matrixWorld),Le.normalMatrix.getNormalMatrix(Le.modelViewMatrix),mt.onBeforeRender(b,Et,Xe,_t,Le,Ot),mt.transparent===!0&&mt.side===Vu&&mt.forceSinglePass===!1?(mt.side=Il,mt.needsUpdate=!0,b.renderBufferDirect(Xe,Et,_t,mt,Le,Ot),mt.side=Jd,mt.needsUpdate=!0,b.renderBufferDirect(Xe,Et,_t,mt,Le,Ot),mt.side=Vu):b.renderBufferDirect(Xe,Et,_t,mt,Le,Ot),Le.onAfterRender(b,Et,Xe,_t,mt,Ot)}function ut(Le,Et,Xe){Et.isScene!==!0&&(Et=Ze);const _t=it.get(Le),mt=v.state.lights,Ot=v.state.shadowsArray,gn=mt.state.version,dn=Tt.getParameters(Le,mt.state,Ot,Et,Xe),En=Tt.getProgramCacheKey(dn);let ni=_t.programs;_t.environment=Le.isMeshStandardMaterial?Et.environment:null,_t.fog=Et.fog,_t.envMap=(Le.isMeshStandardMaterial?ne:K).get(Le.envMap||_t.environment),_t.envMapRotation=_t.environment!==null&&Le.envMap===null?Et.environmentRotation:Le.envMapRotation,ni===void 0&&(Le.addEventListener("dispose",Sn),ni=new Map,_t.programs=ni);let bn=ni.get(En);if(bn!==void 0){if(_t.currentProgram===bn&&_t.lightsStateVersion===gn)return Xt(Le,dn),bn}else dn.uniforms=Tt.getUniforms(Le),Le.onBeforeCompile(dn,b),bn=Tt.acquireProgram(dn,En),ni.set(En,bn),_t.uniforms=dn.uniforms;const Un=_t.uniforms;return(!Le.isShaderMaterial&&!Le.isRawShaderMaterial||Le.clipping===!0)&&(Un.clippingPlanes=vt.uniform),Xt(Le,dn),_t.needsLights=rt(Le),_t.lightsStateVersion=gn,_t.needsLights&&(Un.ambientLightColor.value=mt.state.ambient,Un.lightProbe.value=mt.state.probe,Un.directionalLights.value=mt.state.directional,Un.directionalLightShadows.value=mt.state.directionalShadow,Un.spotLights.value=mt.state.spot,Un.spotLightShadows.value=mt.state.spotShadow,Un.rectAreaLights.value=mt.state.rectArea,Un.ltc_1.value=mt.state.rectAreaLTC1,Un.ltc_2.value=mt.state.rectAreaLTC2,Un.pointLights.value=mt.state.point,Un.pointLightShadows.value=mt.state.pointShadow,Un.hemisphereLights.value=mt.state.hemi,Un.directionalShadowMap.value=mt.state.directionalShadowMap,Un.directionalShadowMatrix.value=mt.state.directionalShadowMatrix,Un.spotShadowMap.value=mt.state.spotShadowMap,Un.spotLightMatrix.value=mt.state.spotLightMatrix,Un.spotLightMap.value=mt.state.spotLightMap,Un.pointShadowMap.value=mt.state.pointShadowMap,Un.pointShadowMatrix.value=mt.state.pointShadowMatrix),_t.currentProgram=bn,_t.uniformsList=null,bn}function Pt(Le){if(Le.uniformsList===null){const Et=Le.currentProgram.getUniforms();Le.uniformsList=f3.seqWithValue(Et.seq,Le.uniforms)}return Le.uniformsList}function Xt(Le,Et){const Xe=it.get(Le);Xe.outputColorSpace=Et.outputColorSpace,Xe.batching=Et.batching,Xe.batchingColor=Et.batchingColor,Xe.instancing=Et.instancing,Xe.instancingColor=Et.instancingColor,Xe.instancingMorph=Et.instancingMorph,Xe.skinning=Et.skinning,Xe.morphTargets=Et.morphTargets,Xe.morphNormals=Et.morphNormals,Xe.morphColors=Et.morphColors,Xe.morphTargetsCount=Et.morphTargetsCount,Xe.numClippingPlanes=Et.numClippingPlanes,Xe.numIntersection=Et.numClipIntersection,Xe.vertexAlphas=Et.vertexAlphas,Xe.vertexTangents=Et.vertexTangents,Xe.toneMapping=Et.toneMapping}function kn(Le,Et,Xe,_t,mt){Et.isScene!==!0&&(Et=Ze),be.resetTextureUnits();const Ot=Et.fog,gn=_t.isMeshStandardMaterial?Et.environment:null,dn=T===null?b.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:J_,En=(_t.isMeshStandardMaterial?ne:K).get(_t.envMap||gn),ni=_t.vertexColors===!0&&!!Xe.attributes.color&&Xe.attributes.color.itemSize===4,bn=!!Xe.attributes.tangent&&(!!_t.normalMap||_t.anisotropy>0),Un=!!Xe.morphAttributes.position,Bn=!!Xe.morphAttributes.normal,yi=!!Xe.morphAttributes.color;let Qi=jp;_t.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(Qi=b.toneMapping);const Ii=Xe.morphAttributes.position||Xe.morphAttributes.normal||Xe.morphAttributes.color,Di=Ii!==void 0?Ii.length:0,Zn=it.get(_t),xr=v.state.lights;if(ge===!0&&(pe===!0||Le!==E)){const is=Le===E&&_t.id===C;vt.setState(_t,Le,is)}let rr=!1;_t.version===Zn.__version?(Zn.needsLights&&Zn.lightsStateVersion!==xr.state.version||Zn.outputColorSpace!==dn||mt.isBatchedMesh&&Zn.batching===!1||!mt.isBatchedMesh&&Zn.batching===!0||mt.isBatchedMesh&&Zn.batchingColor===!0&&mt.colorTexture===null||mt.isBatchedMesh&&Zn.batchingColor===!1&&mt.colorTexture!==null||mt.isInstancedMesh&&Zn.instancing===!1||!mt.isInstancedMesh&&Zn.instancing===!0||mt.isSkinnedMesh&&Zn.skinning===!1||!mt.isSkinnedMesh&&Zn.skinning===!0||mt.isInstancedMesh&&Zn.instancingColor===!0&&mt.instanceColor===null||mt.isInstancedMesh&&Zn.instancingColor===!1&&mt.instanceColor!==null||mt.isInstancedMesh&&Zn.instancingMorph===!0&&mt.morphTexture===null||mt.isInstancedMesh&&Zn.instancingMorph===!1&&mt.morphTexture!==null||Zn.envMap!==En||_t.fog===!0&&Zn.fog!==Ot||Zn.numClippingPlanes!==void 0&&(Zn.numClippingPlanes!==vt.numPlanes||Zn.numIntersection!==vt.numIntersection)||Zn.vertexAlphas!==ni||Zn.vertexTangents!==bn||Zn.morphTargets!==Un||Zn.morphNormals!==Bn||Zn.morphColors!==yi||Zn.toneMapping!==Qi||Zn.morphTargetsCount!==Di)&&(rr=!0):(rr=!0,Zn.__version=_t.version);let wa=Zn.currentProgram;rr===!0&&(wa=ut(_t,Et,mt));let ro=!1,Li=!1,Ys=!1;const wr=wa.getUniforms(),ra=Zn.uniforms;if(We.useProgram(wa.program)&&(ro=!0,Li=!0,Ys=!0),_t.id!==C&&(C=_t.id,Li=!0),ro||E!==Le){We.buffers.depth.getReversed()?(ye.copy(Le.projectionMatrix),ngt(ye),igt(ye),wr.setValue(ce,"projectionMatrix",ye)):wr.setValue(ce,"projectionMatrix",Le.projectionMatrix),wr.setValue(ce,"viewMatrix",Le.matrixWorldInverse);const mr=wr.map.cameraPosition;mr!==void 0&&mr.setValue(ce,Be.setFromMatrixPosition(Le.matrixWorld)),nt.logarithmicDepthBuffer&&wr.setValue(ce,"logDepthBufFC",2/(Math.log(Le.far+1)/Math.LN2)),(_t.isMeshPhongMaterial||_t.isMeshToonMaterial||_t.isMeshLambertMaterial||_t.isMeshBasicMaterial||_t.isMeshStandardMaterial||_t.isShaderMaterial)&&wr.setValue(ce,"isOrthographic",Le.isOrthographicCamera===!0),E!==Le&&(E=Le,Li=!0,Ys=!0)}if(mt.isSkinnedMesh){wr.setOptional(ce,mt,"bindMatrix"),wr.setOptional(ce,mt,"bindMatrixInverse");const is=mt.skeleton;is&&(is.boneTexture===null&&is.computeBoneTexture(),wr.setValue(ce,"boneTexture",is.boneTexture,be))}mt.isBatchedMesh&&(wr.setOptional(ce,mt,"batchingTexture"),wr.setValue(ce,"batchingTexture",mt._matricesTexture,be),wr.setOptional(ce,mt,"batchingIdTexture"),wr.setValue(ce,"batchingIdTexture",mt._indirectTexture,be),wr.setOptional(ce,mt,"batchingColorTexture"),mt._colorsTexture!==null&&wr.setValue(ce,"batchingColorTexture",mt._colorsTexture,be));const Os=Xe.morphAttributes;if((Os.position!==void 0||Os.normal!==void 0||Os.color!==void 0)&&ve.update(mt,Xe,wa),(Li||Zn.receiveShadow!==mt.receiveShadow)&&(Zn.receiveShadow=mt.receiveShadow,wr.setValue(ce,"receiveShadow",mt.receiveShadow)),_t.isMeshGouraudMaterial&&_t.envMap!==null&&(ra.envMap.value=En,ra.flipEnvMap.value=En.isCubeTexture&&En.isRenderTargetTexture===!1?-1:1),_t.isMeshStandardMaterial&&_t.envMap===null&&Et.environment!==null&&(ra.envMapIntensity.value=Et.environmentIntensity),Li&&(wr.setValue(ce,"toneMappingExposure",b.toneMappingExposure),Zn.needsLights&&Kn(ra,Ys),Ot&&_t.fog===!0&&At.refreshFogUniforms(ra,Ot),At.refreshMaterialUniforms(ra,_t,H,G,v.state.transmissionRenderTarget[Le.id]),f3.upload(ce,Pt(Zn),ra,be)),_t.isShaderMaterial&&_t.uniformsNeedUpdate===!0&&(f3.upload(ce,Pt(Zn),ra,be),_t.uniformsNeedUpdate=!1),_t.isSpriteMaterial&&wr.setValue(ce,"center",mt.center),wr.setValue(ce,"modelViewMatrix",mt.modelViewMatrix),wr.setValue(ce,"normalMatrix",mt.normalMatrix),wr.setValue(ce,"modelMatrix",mt.matrixWorld),_t.isShaderMaterial||_t.isRawShaderMaterial){const is=_t.uniformsGroups;for(let mr=0,rs=is.length;mr<rs;mr++){const Ta=is[mr];Pe.update(Ta,wa),Pe.bind(Ta,wa)}}return wa}function Kn(Le,Et){Le.ambientLightColor.needsUpdate=Et,Le.lightProbe.needsUpdate=Et,Le.directionalLights.needsUpdate=Et,Le.directionalLightShadows.needsUpdate=Et,Le.pointLights.needsUpdate=Et,Le.pointLightShadows.needsUpdate=Et,Le.spotLights.needsUpdate=Et,Le.spotLightShadows.needsUpdate=Et,Le.rectAreaLights.needsUpdate=Et,Le.hemisphereLights.needsUpdate=Et}function rt(Le){return Le.isMeshLambertMaterial||Le.isMeshToonMaterial||Le.isMeshPhongMaterial||Le.isMeshStandardMaterial||Le.isShadowMaterial||Le.isShaderMaterial&&Le.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(Le,Et,Xe){it.get(Le.texture).__webglTexture=Et,it.get(Le.depthTexture).__webglTexture=Xe;const _t=it.get(Le);_t.__hasExternalTextures=!0,_t.__autoAllocateDepthBuffer=Xe===void 0,_t.__autoAllocateDepthBuffer||Fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_t.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(Le,Et){const Xe=it.get(Le);Xe.__webglFramebuffer=Et,Xe.__useDefaultFramebuffer=Et===void 0},this.setRenderTarget=function(Le,Et=0,Xe=0){T=Le,w=Et,A=Xe;let _t=!0,mt=null,Ot=!1,gn=!1;if(Le){const En=it.get(Le);if(En.__useDefaultFramebuffer!==void 0)We.bindFramebuffer(ce.FRAMEBUFFER,null),_t=!1;else if(En.__webglFramebuffer===void 0)be.setupRenderTarget(Le);else if(En.__hasExternalTextures)be.rebindTextures(Le,it.get(Le.texture).__webglTexture,it.get(Le.depthTexture).__webglTexture);else if(Le.depthBuffer){const Un=Le.depthTexture;if(En.__boundDepthTexture!==Un){if(Un!==null&&it.has(Un)&&(Le.width!==Un.image.width||Le.height!==Un.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");be.setupDepthRenderbuffer(Le)}}const ni=Le.texture;(ni.isData3DTexture||ni.isDataArrayTexture||ni.isCompressedArrayTexture)&&(gn=!0);const bn=it.get(Le).__webglFramebuffer;Le.isWebGLCubeRenderTarget?(Array.isArray(bn[Et])?mt=bn[Et][Xe]:mt=bn[Et],Ot=!0):Le.samples>0&&be.useMultisampledRTT(Le)===!1?mt=it.get(Le).__webglMultisampledFramebuffer:Array.isArray(bn)?mt=bn[Xe]:mt=bn,I.copy(Le.viewport),k.copy(Le.scissor),O=Le.scissorTest}else I.copy(te).multiplyScalar(H).floor(),k.copy(re).multiplyScalar(H).floor(),O=ie;if(We.bindFramebuffer(ce.FRAMEBUFFER,mt)&&_t&&We.drawBuffers(Le,mt),We.viewport(I),We.scissor(k),We.setScissorTest(O),Ot){const En=it.get(Le.texture);ce.framebufferTexture2D(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_CUBE_MAP_POSITIVE_X+Et,En.__webglTexture,Xe)}else if(gn){const En=it.get(Le.texture),ni=Et||0;ce.framebufferTextureLayer(ce.FRAMEBUFFER,ce.COLOR_ATTACHMENT0,En.__webglTexture,Xe||0,ni)}C=-1},this.readRenderTargetPixels=function(Le,Et,Xe,_t,mt,Ot,gn){if(!(Le&&Le.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dn=it.get(Le).__webglFramebuffer;if(Le.isWebGLCubeRenderTarget&&gn!==void 0&&(dn=dn[gn]),dn){We.bindFramebuffer(ce.FRAMEBUFFER,dn);try{const En=Le.texture,ni=En.format,bn=En.type;if(!nt.textureFormatReadable(ni)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!nt.textureTypeReadable(bn)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Et>=0&&Et<=Le.width-_t&&Xe>=0&&Xe<=Le.height-mt&&ce.readPixels(Et,Xe,_t,mt,De.convert(ni),De.convert(bn),Ot)}finally{const En=T!==null?it.get(T).__webglFramebuffer:null;We.bindFramebuffer(ce.FRAMEBUFFER,En)}}},this.readRenderTargetPixelsAsync=async function(Le,Et,Xe,_t,mt,Ot,gn){if(!(Le&&Le.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let dn=it.get(Le).__webglFramebuffer;if(Le.isWebGLCubeRenderTarget&&gn!==void 0&&(dn=dn[gn]),dn){const En=Le.texture,ni=En.format,bn=En.type;if(!nt.textureFormatReadable(ni))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!nt.textureTypeReadable(bn))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Et>=0&&Et<=Le.width-_t&&Xe>=0&&Xe<=Le.height-mt){We.bindFramebuffer(ce.FRAMEBUFFER,dn);const Un=ce.createBuffer();ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Un),ce.bufferData(ce.PIXEL_PACK_BUFFER,Ot.byteLength,ce.STREAM_READ),ce.readPixels(Et,Xe,_t,mt,De.convert(ni),De.convert(bn),0);const Bn=T!==null?it.get(T).__webglFramebuffer:null;We.bindFramebuffer(ce.FRAMEBUFFER,Bn);const yi=ce.fenceSync(ce.SYNC_GPU_COMMANDS_COMPLETE,0);return ce.flush(),await tgt(ce,yi,4),ce.bindBuffer(ce.PIXEL_PACK_BUFFER,Un),ce.getBufferSubData(ce.PIXEL_PACK_BUFFER,0,Ot),ce.deleteBuffer(Un),ce.deleteSync(yi),Ot}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(Le,Et=null,Xe=0){Le.isTexture!==!0&&(s1("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Et=arguments[0]||null,Le=arguments[1]);const _t=Math.pow(2,-Xe),mt=Math.floor(Le.image.width*_t),Ot=Math.floor(Le.image.height*_t),gn=Et!==null?Et.x:0,dn=Et!==null?Et.y:0;be.setTexture2D(Le,0),ce.copyTexSubImage2D(ce.TEXTURE_2D,Xe,0,0,gn,dn,mt,Ot),We.unbindTexture()};const ci=ce.createFramebuffer(),pt=ce.createFramebuffer();this.copyTextureToTexture=function(Le,Et,Xe=null,_t=null,mt=0,Ot=null){Le.isTexture!==!0&&(s1("WebGLRenderer: copyTextureToTexture function signature has changed."),_t=arguments[0]||null,Le=arguments[1],Et=arguments[2],Ot=arguments[3]||0,Xe=null),Ot===null&&(mt!==0?(s1("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ot=mt,mt=0):Ot=0);let gn,dn,En,ni,bn,Un,Bn,yi,Qi;const Ii=Le.isCompressedTexture?Le.mipmaps[Ot]:Le.image;if(Xe!==null)gn=Xe.max.x-Xe.min.x,dn=Xe.max.y-Xe.min.y,En=Xe.isBox3?Xe.max.z-Xe.min.z:1,ni=Xe.min.x,bn=Xe.min.y,Un=Xe.isBox3?Xe.min.z:0;else{const Os=Math.pow(2,-mt);gn=Math.floor(Ii.width*Os),dn=Math.floor(Ii.height*Os),Le.isDataArrayTexture?En=Ii.depth:Le.isData3DTexture?En=Math.floor(Ii.depth*Os):En=1,ni=0,bn=0,Un=0}_t!==null?(Bn=_t.x,yi=_t.y,Qi=_t.z):(Bn=0,yi=0,Qi=0);const Di=De.convert(Et.format),Zn=De.convert(Et.type);let xr;Et.isData3DTexture?(be.setTexture3D(Et,0),xr=ce.TEXTURE_3D):Et.isDataArrayTexture||Et.isCompressedArrayTexture?(be.setTexture2DArray(Et,0),xr=ce.TEXTURE_2D_ARRAY):(be.setTexture2D(Et,0),xr=ce.TEXTURE_2D),ce.pixelStorei(ce.UNPACK_FLIP_Y_WEBGL,Et.flipY),ce.pixelStorei(ce.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Et.premultiplyAlpha),ce.pixelStorei(ce.UNPACK_ALIGNMENT,Et.unpackAlignment);const rr=ce.getParameter(ce.UNPACK_ROW_LENGTH),wa=ce.getParameter(ce.UNPACK_IMAGE_HEIGHT),ro=ce.getParameter(ce.UNPACK_SKIP_PIXELS),Li=ce.getParameter(ce.UNPACK_SKIP_ROWS),Ys=ce.getParameter(ce.UNPACK_SKIP_IMAGES);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,Ii.width),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,Ii.height),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,ni),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,bn),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Un);const wr=Le.isDataArrayTexture||Le.isData3DTexture,ra=Et.isDataArrayTexture||Et.isData3DTexture;if(Le.isDepthTexture){const Os=it.get(Le),is=it.get(Et),mr=it.get(Os.__renderTarget),rs=it.get(is.__renderTarget);We.bindFramebuffer(ce.READ_FRAMEBUFFER,mr.__webglFramebuffer),We.bindFramebuffer(ce.DRAW_FRAMEBUFFER,rs.__webglFramebuffer);for(let Ta=0;Ta<En;Ta++)wr&&(ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,it.get(Le).__webglTexture,mt,Un+Ta),ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,it.get(Et).__webglTexture,Ot,Qi+Ta)),ce.blitFramebuffer(ni,bn,gn,dn,Bn,yi,gn,dn,ce.DEPTH_BUFFER_BIT,ce.NEAREST);We.bindFramebuffer(ce.READ_FRAMEBUFFER,null),We.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else if(mt!==0||Le.isRenderTargetTexture||it.has(Le)){const Os=it.get(Le),is=it.get(Et);We.bindFramebuffer(ce.READ_FRAMEBUFFER,ci),We.bindFramebuffer(ce.DRAW_FRAMEBUFFER,pt);for(let mr=0;mr<En;mr++)wr?ce.framebufferTextureLayer(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,Os.__webglTexture,mt,Un+mr):ce.framebufferTexture2D(ce.READ_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,Os.__webglTexture,mt),ra?ce.framebufferTextureLayer(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,is.__webglTexture,Ot,Qi+mr):ce.framebufferTexture2D(ce.DRAW_FRAMEBUFFER,ce.COLOR_ATTACHMENT0,ce.TEXTURE_2D,is.__webglTexture,Ot),mt!==0?ce.blitFramebuffer(ni,bn,gn,dn,Bn,yi,gn,dn,ce.COLOR_BUFFER_BIT,ce.NEAREST):ra?ce.copyTexSubImage3D(xr,Ot,Bn,yi,Qi+mr,ni,bn,gn,dn):ce.copyTexSubImage2D(xr,Ot,Bn,yi,ni,bn,gn,dn);We.bindFramebuffer(ce.READ_FRAMEBUFFER,null),We.bindFramebuffer(ce.DRAW_FRAMEBUFFER,null)}else ra?Le.isDataTexture||Le.isData3DTexture?ce.texSubImage3D(xr,Ot,Bn,yi,Qi,gn,dn,En,Di,Zn,Ii.data):Et.isCompressedArrayTexture?ce.compressedTexSubImage3D(xr,Ot,Bn,yi,Qi,gn,dn,En,Di,Ii.data):ce.texSubImage3D(xr,Ot,Bn,yi,Qi,gn,dn,En,Di,Zn,Ii):Le.isDataTexture?ce.texSubImage2D(ce.TEXTURE_2D,Ot,Bn,yi,gn,dn,Di,Zn,Ii.data):Le.isCompressedTexture?ce.compressedTexSubImage2D(ce.TEXTURE_2D,Ot,Bn,yi,Ii.width,Ii.height,Di,Ii.data):ce.texSubImage2D(ce.TEXTURE_2D,Ot,Bn,yi,gn,dn,Di,Zn,Ii);ce.pixelStorei(ce.UNPACK_ROW_LENGTH,rr),ce.pixelStorei(ce.UNPACK_IMAGE_HEIGHT,wa),ce.pixelStorei(ce.UNPACK_SKIP_PIXELS,ro),ce.pixelStorei(ce.UNPACK_SKIP_ROWS,Li),ce.pixelStorei(ce.UNPACK_SKIP_IMAGES,Ys),Ot===0&&Et.generateMipmaps&&ce.generateMipmap(xr),We.unbindTexture()},this.copyTextureToTexture3D=function(Le,Et,Xe=null,_t=null,mt=0){return Le.isTexture!==!0&&(s1("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Xe=arguments[0]||null,_t=arguments[1]||null,Le=arguments[2],Et=arguments[3],mt=arguments[4]||0),s1('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(Le,Et,Xe,_t,mt)},this.initRenderTarget=function(Le){it.get(Le).__webglFramebuffer===void 0&&be.setupRenderTarget(Le)},this.initTexture=function(Le){Le.isCubeTexture?be.setTextureCube(Le,0):Le.isData3DTexture?be.setTexture3D(Le,0):Le.isDataArrayTexture||Le.isCompressedArrayTexture?be.setTexture2DArray(Le,0):be.setTexture2D(Le,0),We.unbindTexture()},this.resetState=function(){w=0,A=0,T=null,We.reset(),xt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jf}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=Mr._getDrawingBufferColorSpace(e),t.unpackColorSpace=Mr._getUnpackColorSpace()}}const jm=class jm{constructor(e,t){let i,r;this.promise=new Promise((u,c)=>{i=u,r=c});const s=i.bind(this),a=r.bind(this),o=(...u)=>{s(...u)},l=u=>{a(u)};e(o.bind(this),l.bind(this)),this.abortHandler=t,this.id=jm.idGen++}then(e){return new jm((t,i)=>{this.promise=this.promise.then((...r)=>{const s=e(...r);s instanceof Promise||s instanceof jm?s.then((...a)=>{t(...a)}):t(s)}).catch(r=>{i(r)})},this.abortHandler)}catch(e){return new jm(t=>{this.promise=this.promise.then((...i)=>{t(...i)}).catch(e)},this.abortHandler)}abort(e){this.abortHandler&&this.abortHandler(e)}};Cn(jm,"idGen",0);let rT=jm;class h3 extends Error{constructor(e){super(e)}}(function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){n[0]=t;const i=e[0];let r=i>>16&32768,s=i>>12&2047;const a=i>>23&255;return a<103?r:a>142?(r|=31744,r|=(a==255?0:1)&&i&8388607,r):a<113?(s|=2048,r|=(s>>114-a)+(s>>113-a&1),r):(r|=a-112<<10|s>>1,r+=s&1,r)}})();const ML=function(){const n=new Float32Array(1),e=new Int32Array(n.buffer);return function(t){return n[0]=t,e[0]}}(),_bt=function(n,e){return n[e]+(n[e+1]<<8)+(n[e+2]<<16)+(n[e+3]<<24)},yz=function(n,e,t=!0,i){const r=new AbortController,s=r.signal;let a=!1;const o=l=>{r.abort(l),a=!0};return new rT((l,u)=>{const c={signal:s};i&&(c.headers=i),fetch(n,c).then(async d=>{if(!d.ok){const v=await d.text();u(new Error(`Fetch failed: ${d.status} ${d.statusText} ${v}`));return}const f=d.body.getReader();let h=0,p=d.headers.get("Content-Length"),m=p?parseInt(p):void 0;const g=[];for(;!a;)try{const{value:v,done:_}=await f.read();if(_){if(e&&e(100,"100%",v,m),t){const x=new Blob(g).arrayBuffer();l(x)}else l();break}h+=v.length;let y,b;m!==void 0&&(y=h/m*100,b=`${y.toFixed(2)}%`),t&&g.push(v),e&&e(y,b,v,m)}catch(v){u(v);return}}).catch(d=>{u(new h3(d))})},o)},Ya=function(n,e,t){return Math.max(Math.min(n,t),e)},Gy=function(){return performance.now()/1e3},a1=n=>{if(n.geometry&&(n.geometry.dispose(),n.geometry=null),n.material&&(n.material.dispose(),n.material=null),n.children)for(let e of n.children)a1(e)},zc=(n,e)=>new Promise(t=>{window.setTimeout(()=>{t(n())},e?1:50)}),J1=(n=0)=>{switch(n){case 1:return 9;case 2:return 24}return 0},_z=()=>{let n,e;return{promise:new Promise((i,r)=>{n=i,e=r}),resolve:n,reject:e}},IL=n=>{let e,t;return n||(n=()=>{}),{promise:new rT((r,s)=>{e=r,t=s},n),resolve:e,reject:t}};class bbt{constructor(e,t,i){this.major=e,this.minor=t,this.patch=i}toString(){return`${this.major}_${this.minor}_${this.patch}`}}function bz(){const n=navigator.userAgent;return n.indexOf("iPhone")>0||n.indexOf("iPad")>0}function vpe(){if(bz()){const n=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return new bbt(parseInt(n[1]||0,10),parseInt(n[2]||0,10),parseInt(n[3]||0,10))}else return null}const Sbt=14,k2=class k2{constructor(e=0){this.sphericalHarmonicsDegree=e,this.sphericalHarmonicsCount=J1(this.sphericalHarmonicsDegree),this.componentCount=this.sphericalHarmonicsCount+Sbt,this.defaultSphericalHarmonics=new Array(this.sphericalHarmonicsCount).fill(0),this.splats=[],this.splatCount=0}static createSplat(e=0){const t=[0,0,0,1,1,1,1,0,0,0,0,0,0,0];let i=J1(e);for(let r=0;r<i;r++)t.push(0);return t}addSplat(e){this.splats.push(e),this.splatCount++}getSplat(e){return this.splats[e]}addDefaultSplat(){const e=k2.createSplat(this.sphericalHarmonicsDegree);return this.addSplat(e),e}addSplatFromComonents(e,t,i,r,s,a,o,l,u,c,d,f,h,p,...m){const g=[e,t,i,r,s,a,o,l,u,c,d,f,h,p,...this.defaultSphericalHarmonics];for(let v=0;v<m.length&&v<this.sphericalHarmonicsCount;v++)g[v]=m[v];return this.addSplat(g),g}addSplatFromArray(e,t){const i=e.splats[t],r=k2.createSplat(this.sphericalHarmonicsDegree);for(let s=0;s<this.componentCount&&s<i.length;s++)r[s]=i[s];this.addSplat(r)}};Cn(k2,"OFFSET",{X:0,Y:1,Z:2,SCALE0:3,SCALE1:4,SCALE2:5,ROTATION0:6,ROTATION1:7,ROTATION2:8,ROTATION3:9,FDC0:10,FDC1:11,FDC2:12,OPACITY:13,FRC0:14,FRC1:15,FRC2:16,FRC3:17,FRC4:18,FRC5:19,FRC6:20,FRC7:21,FRC8:22,FRC9:23,FRC10:24,FRC11:25,FRC12:26,FRC13:27,FRC14:28,FRC15:29,FRC16:30,FRC17:31,FRC18:32,FRC19:33,FRC20:34,FRC21:35,FRC22:36,FRC23:37});let di=k2;class lr{}Cn(lr,"DefaultSplatSortDistanceMapPrecision",16),Cn(lr,"MemoryPageSize",65536),Cn(lr,"BytesPerFloat",4),Cn(lr,"BytesPerInt",4),Cn(lr,"MaxScenes",32),Cn(lr,"ProgressiveLoadSectionSize",262144),Cn(lr,"ProgressiveLoadSectionDelayDuration",15),Cn(lr,"SphericalHarmonics8BitCompressionRange",3);const xbt=lr.SphericalHarmonics8BitCompressionRange,hp=xbt/2,la=nT.toHalfFloat.bind(nT),Sz=nT.fromHalfFloat.bind(nT),hs=(n,e,t=!1,i,r)=>{if(e===0)return n;if(e===1||e===2&&!t)return nT.fromHalfFloat(n);if(e===2)return xz(n,i,r)},I2=(n,e,t)=>{n=Ya(n,e,t);const i=t-e;return Ya(Math.floor((n-e)/i*255),0,255)},xz=(n,e,t)=>{const i=t-e;return n/255*i+e},ype=(n,e,t)=>I2(Sz(n,e,t)),wbt=(n,e,t)=>la(xz(n,e,t)),Or=(n,e,t,i=!1)=>t===0?n.getFloat32(e*4,!0):t===1||t===2&&!i?n.getUint16(e*2,!0):n.getUint8(e,!0),Tbt=function(){const n=e=>e;return function(e,t,i,r=!1){if(t===i)return e;let s=n;return t===2&&r?i===1?s=wbt:i==0&&(s=xz):t===2||t===1?i===0?s=Sz:i==2&&(r?s=ype:s=n):t===0&&(i===1?s=la:i==2&&(r?s=I2:s=la)),s(e)}}(),Wy=(n,e,t,i,r=0)=>{const s=new Uint8Array(n,e),a=new Uint8Array(t,i);for(let o=0;o<r;o++)a[o]=s[o]},nn=class nn{constructor(e,t=!0){Cn(this,"getSplatScaleAndRotation",function(){const e=new Pi,t=new Pi,i=new Pi,r=new ft,s=new ft,a=new bs;return function(o,l,u,c,d){const f=this.globalSplatIndexToSectionMap[o],h=this.sections[f],p=o-h.splatCountOffset,m=h.bytesPerSplat*p+nn.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,g=new DataView(this.bufferData,h.dataBase+m);s.set(hs(Or(g,0,this.compressionLevel),this.compressionLevel),hs(Or(g,1,this.compressionLevel),this.compressionLevel),hs(Or(g,2,this.compressionLevel),this.compressionLevel)),d&&(d.x!==void 0&&(s.x=d.x),d.y!==void 0&&(s.y=d.y),d.z!==void 0&&(s.z=d.z)),a.set(hs(Or(g,4,this.compressionLevel),this.compressionLevel),hs(Or(g,5,this.compressionLevel),this.compressionLevel),hs(Or(g,6,this.compressionLevel),this.compressionLevel),hs(Or(g,3,this.compressionLevel),this.compressionLevel)),c?(e.makeScale(s.x,s.y,s.z),t.makeRotationFromQuaternion(a),i.copy(e).multiply(t).multiply(c),i.decompose(r,u,l)):(l.copy(s),u.copy(a))}}());Cn(this,"fillSplatScaleRotationArray",function(){const e=new Pi,t=new Pi,i=new Pi,r=new ft,s=new bs,a=new ft,o=l=>{const u=l.w<0?-1:1;l.x*=u,l.y*=u,l.z*=u,l.w*=u};return function(l,u,c,d,f,h,p,m){const g=this.splatCount;d=d||0,f=f||g-1,h===void 0&&(h=d);const v=(_,y)=>(y===void 0&&(y=this.compressionLevel),Tbt(_,y,p));for(let _=d;_<=f;_++){const y=this.globalSplatIndexToSectionMap[_],b=this.sections[y],x=_-b.splatCountOffset,w=b.bytesPerSplat*x+nn.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,A=(_-d+h)*nn.ScaleComponentCount,T=(_-d+h)*nn.RotationComponentCount,C=new DataView(this.bufferData,b.dataBase+w),E=m&&m.x!==void 0?m.x:Or(C,0,this.compressionLevel),I=m&&m.y!==void 0?m.y:Or(C,1,this.compressionLevel),k=m&&m.z!==void 0?m.z:Or(C,2,this.compressionLevel),O=Or(C,3,this.compressionLevel),U=Or(C,4,this.compressionLevel),z=Or(C,5,this.compressionLevel),L=Or(C,6,this.compressionLevel);r.set(hs(E,this.compressionLevel),hs(I,this.compressionLevel),hs(k,this.compressionLevel)),s.set(hs(U,this.compressionLevel),hs(z,this.compressionLevel),hs(L,this.compressionLevel),hs(O,this.compressionLevel)).normalize(),c&&(a.set(0,0,0),e.makeScale(r.x,r.y,r.z),t.makeRotationFromQuaternion(s),i.identity().premultiply(e).premultiply(t),i.premultiply(c),i.decompose(a,s,r),s.normalize()),o(s),l&&(l[A]=v(r.x,0),l[A+1]=v(r.y,0),l[A+2]=v(r.z,0)),u&&(u[T]=v(s.x,0),u[T+1]=v(s.y,0),u[T+2]=v(s.z,0),u[T+3]=v(s.w,0))}}}());Cn(this,"fillSphericalHarmonicsArray",function(){for(let U=0;U<15;U++)new ft;const e=new Ri,t=new Pi,i=new ft,r=new ft,s=new bs,a=[],o=[],l=[],u=[],c=[],d=[],f=[],h=[],p=[],m=[],g=[],v=[],_=[],y=[],b=[],x=[],w=[],A=[],T=U=>U,C=(U,z,L,G)=>{U[0]=z,U[1]=L,U[2]=G},E=(U,z,L,G,H)=>{U[0]=Or(z,G,H,!0),U[1]=Or(z,G+L,H,!0),U[2]=Or(z,G+L+L,H,!0)},I=(U,z)=>{z[0]=U[0],z[1]=U[1],z[2]=U[2]},k=(U,z,L,G)=>{z[L]=G(U[0]),z[L+1]=G(U[1]),z[L+2]=G(U[2])},O=(U,z,L,G,H)=>(z[0]=hs(U[0],L,!0,G,H),z[1]=hs(U[1],L,!0,G,H),z[2]=hs(U[2],L,!0,G,H),z);return function(U,z,L,G,H,F,X){const te=this.splatCount;G=G||0,H=H||te-1,F===void 0&&(F=G),L&&z>=1&&(t.copy(L),t.decompose(i,s,r),s.normalize(),t.makeRotationFromQuaternion(s),e.setFromMatrix4(t),C(a,e.elements[4],-e.elements[7],e.elements[1]),C(o,-e.elements[5],e.elements[8],-e.elements[2]),C(l,e.elements[3],-e.elements[6],e.elements[0]));const re=le=>ype(le,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff),ie=le=>I2(le,this.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff);for(let le=G;le<=H;le++){const ge=this.globalSplatIndexToSectionMap[le],pe=this.sections[ge];z=Math.min(z,pe.sphericalHarmonicsDegree);const ye=J1(z),Oe=le-pe.splatCountOffset,Be=pe.bytesPerSplat*Oe+nn.CompressionLevels[this.compressionLevel].SphericalHarmonicsOffsetBytes,Ye=new DataView(this.bufferData,pe.dataBase+Be),Ze=(le-G+F)*ye;let Q=L?0:this.compressionLevel,me=T;Q!==X&&(Q===1?X===0?me=Sz:X==2&&(me=re):Q===0&&(X===1?me=la:X==2&&(me=ie)));const ce=this.minSphericalHarmonicsCoeff,je=this.maxSphericalHarmonicsCoeff;z>=1&&(E(p,Ye,3,0,this.compressionLevel),E(m,Ye,3,1,this.compressionLevel),E(g,Ye,3,2,this.compressionLevel),L?(O(p,p,this.compressionLevel,ce,je),O(m,m,this.compressionLevel,ce,je),O(g,g,this.compressionLevel,ce,je),nn.rotateSphericalHarmonics3(p,m,g,a,o,l,y,b,x)):(I(p,y),I(m,b),I(g,x)),k(y,U,Ze,me),k(b,U,Ze+3,me),k(x,U,Ze+6,me),z>=2&&(E(p,Ye,5,9,this.compressionLevel),E(m,Ye,5,10,this.compressionLevel),E(g,Ye,5,11,this.compressionLevel),E(v,Ye,5,12,this.compressionLevel),E(_,Ye,5,13,this.compressionLevel),L?(O(p,p,this.compressionLevel,ce,je),O(m,m,this.compressionLevel,ce,je),O(g,g,this.compressionLevel,ce,je),O(v,v,this.compressionLevel,ce,je),O(_,_,this.compressionLevel,ce,je),nn.rotateSphericalHarmonics5(p,m,g,v,_,a,o,l,u,c,d,f,h,y,b,x,w,A)):(I(p,y),I(m,b),I(g,x),I(v,w),I(_,A)),k(y,U,Ze+9,me),k(b,U,Ze+12,me),k(x,U,Ze+15,me),k(w,U,Ze+18,me),k(A,U,Ze+21,me)))}}}());this.constructFromBuffer(e,t)}getSplatCount(){return this.splatCount}getMaxSplatCount(){return this.maxSplatCount}getMinSphericalHarmonicsDegree(){let e=0;for(let t=0;t<this.sections.length;t++){const i=this.sections[t];(t===0||i.sphericalHarmonicsDegree<e)&&(e=i.sphericalHarmonicsDegree)}return e}getBucketIndex(e,t){let i;const r=e.fullBucketCount*e.bucketSize;if(t<r)i=Math.floor(t/e.bucketSize);else{let s=r;i=e.fullBucketCount;let a=0;for(;s<e.splatCount;){let o=e.partiallyFilledBucketLengths[a];if(t>=s&&t<s+o)break;s+=o,i++,a++}}return i}getSplatCenter(e,t,i){const r=this.globalSplatIndexToSectionMap[e],s=this.sections[r],a=e-s.splatCountOffset,o=s.bytesPerSplat*a,l=new DataView(this.bufferData,s.dataBase+o),u=Or(l,0,this.compressionLevel),c=Or(l,1,this.compressionLevel),d=Or(l,2,this.compressionLevel);if(this.compressionLevel>=1){const h=this.getBucketIndex(s,a)*nn.BucketStorageSizeFloats,p=s.compressionScaleFactor,m=s.compressionScaleRange;t.x=(u-m)*p+s.bucketArray[h],t.y=(c-m)*p+s.bucketArray[h+1],t.z=(d-m)*p+s.bucketArray[h+2]}else t.x=u,t.y=c,t.z=d;i&&t.applyMatrix4(i)}getSplatColor(e,t){const i=this.globalSplatIndexToSectionMap[e],r=this.sections[i],s=e-r.splatCountOffset,a=r.bytesPerSplat*s+nn.CompressionLevels[this.compressionLevel].ColorOffsetBytes,o=new Uint8Array(this.bufferData,r.dataBase+a,4);t.set(o[0],o[1],o[2],o[3])}fillSplatCenterArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);const o=new ft;for(let l=i;l<=r;l++){const u=this.globalSplatIndexToSectionMap[l],c=this.sections[u],d=l-c.splatCountOffset,f=(l-i+s)*nn.CenterComponentCount,h=c.bytesPerSplat*d,p=new DataView(this.bufferData,c.dataBase+h),m=Or(p,0,this.compressionLevel),g=Or(p,1,this.compressionLevel),v=Or(p,2,this.compressionLevel);if(this.compressionLevel>=1){const y=this.getBucketIndex(c,d)*nn.BucketStorageSizeFloats,b=c.compressionScaleFactor,x=c.compressionScaleRange;o.x=(m-x)*b+c.bucketArray[y],o.y=(g-x)*b+c.bucketArray[y+1],o.z=(v-x)*b+c.bucketArray[y+2]}else o.x=m,o.y=g,o.z=v;t&&o.applyMatrix4(t),e[f]=o.x,e[f+1]=o.y,e[f+2]=o.z}}fillSplatCovarianceArray(e,t,i,r,s,a){const o=this.splatCount,l=new ft,u=new bs;i=i||0,r=r||o-1,s===void 0&&(s=i);for(let c=i;c<=r;c++){const d=this.globalSplatIndexToSectionMap[c],f=this.sections[d],h=c-f.splatCountOffset,p=(c-i+s)*nn.CovarianceComponentCount,m=f.bytesPerSplat*h+nn.CompressionLevels[this.compressionLevel].ScaleOffsetBytes,g=new DataView(this.bufferData,f.dataBase+m);l.set(hs(Or(g,0,this.compressionLevel),this.compressionLevel),hs(Or(g,1,this.compressionLevel),this.compressionLevel),hs(Or(g,2,this.compressionLevel),this.compressionLevel)),u.set(hs(Or(g,4,this.compressionLevel),this.compressionLevel),hs(Or(g,5,this.compressionLevel),this.compressionLevel),hs(Or(g,6,this.compressionLevel),this.compressionLevel),hs(Or(g,3,this.compressionLevel),this.compressionLevel)),nn.computeCovariance(l,u,t,e,p,a)}}fillSplatColorArray(e,t,i,r,s){const a=this.splatCount;i=i||0,r=r||a-1,s===void 0&&(s=i);for(let o=i;o<=r;o++){const l=this.globalSplatIndexToSectionMap[o],u=this.sections[l],c=o-u.splatCountOffset,d=(o-i+s)*nn.ColorComponentCount,f=u.bytesPerSplat*c+nn.CompressionLevels[this.compressionLevel].ColorOffsetBytes,h=new Uint8Array(this.bufferData,u.dataBase+f);let p=h[3];p=p>=t?p:0,e[d]=h[0],e[d+1]=h[1],e[d+2]=h[2],e[d+3]=p}}static parseHeader(e){const t=new Uint8Array(e,0,nn.HeaderSizeBytes),i=new Uint16Array(e,0,nn.HeaderSizeBytes/2),r=new Uint32Array(e,0,nn.HeaderSizeBytes/4),s=new Float32Array(e,0,nn.HeaderSizeBytes/4),a=t[0],o=t[1],l=r[1],u=r[2],c=r[3],d=r[4],f=i[10],h=new ft(s[6],s[7],s[8]),p=s[9]||-hp,m=s[10]||hp;return{versionMajor:a,versionMinor:o,maxSectionCount:l,sectionCount:u,maxSplatCount:c,splatCount:d,compressionLevel:f,sceneCenter:h,minSphericalHarmonicsCoeff:p,maxSphericalHarmonicsCoeff:m}}static writeHeaderCountsToBuffer(e,t,i){const r=new Uint32Array(i,0,nn.HeaderSizeBytes/4);r[2]=e,r[4]=t}static writeHeaderToBuffer(e,t){const i=new Uint8Array(t,0,nn.HeaderSizeBytes),r=new Uint16Array(t,0,nn.HeaderSizeBytes/2),s=new Uint32Array(t,0,nn.HeaderSizeBytes/4),a=new Float32Array(t,0,nn.HeaderSizeBytes/4);i[0]=e.versionMajor,i[1]=e.versionMinor,i[2]=0,i[3]=0,s[1]=e.maxSectionCount,s[2]=e.sectionCount,s[3]=e.maxSplatCount,s[4]=e.splatCount,r[10]=e.compressionLevel,a[6]=e.sceneCenter.x,a[7]=e.sceneCenter.y,a[8]=e.sceneCenter.z,a[9]=e.minSphericalHarmonicsCoeff||-hp,a[10]=e.maxSphericalHarmonicsCoeff||hp}static parseSectionHeaders(e,t,i=0,r){const s=e.compressionLevel,a=e.maxSectionCount,o=new Uint16Array(t,i,a*nn.SectionHeaderSizeBytes/2),l=new Uint32Array(t,i,a*nn.SectionHeaderSizeBytes/4),u=new Float32Array(t,i,a*nn.SectionHeaderSizeBytes/4),c=[];let d=0,f=d/2,h=d/4,p=nn.HeaderSizeBytes+e.maxSectionCount*nn.SectionHeaderSizeBytes,m=0;for(let g=0;g<a;g++){const v=l[h+1],_=l[h+2],y=l[h+3],b=u[h+4],x=b/2,w=o[f+10],A=l[h+6]||nn.CompressionLevels[s].ScaleRange,T=l[h+8],C=l[h+9],E=C*4,I=w*y+E,k=o[f+20],{bytesPerSplat:O}=nn.calculateComponentStorage(s,k),U=O*v,z=U+I,L={bytesPerSplat:O,splatCountOffset:m,splatCount:r?v:0,maxSplatCount:v,bucketSize:_,bucketCount:y,bucketBlockSize:b,halfBucketBlockSize:x,bucketStorageSizeBytes:w,bucketsStorageSizeBytes:I,splatDataStorageSizeBytes:U,storageSizeBytes:z,compressionScaleRange:A,compressionScaleFactor:x/A,base:p,bucketsBase:p+E,dataBase:p+I,fullBucketCount:T,partiallyFilledBucketCount:C,sphericalHarmonicsDegree:k};c[g]=L,p+=z,d+=nn.SectionHeaderSizeBytes,f=d/2,h=d/4,m+=v}return c}static writeSectionHeaderToBuffer(e,t,i,r=0){const s=new Uint16Array(i,r,nn.SectionHeaderSizeBytes/2),a=new Uint32Array(i,r,nn.SectionHeaderSizeBytes/4),o=new Float32Array(i,r,nn.SectionHeaderSizeBytes/4);a[0]=e.splatCount,a[1]=e.maxSplatCount,a[2]=t>=1?e.bucketSize:0,a[3]=t>=1?e.bucketCount:0,o[4]=t>=1?e.bucketBlockSize:0,s[10]=t>=1?nn.BucketStorageSizeBytes:0,a[6]=t>=1?e.compressionScaleRange:0,a[7]=e.storageSizeBytes,a[8]=t>=1?e.fullBucketCount:0,a[9]=t>=1?e.partiallyFilledBucketCount:0,s[20]=e.sphericalHarmonicsDegree}static writeSectionHeaderSplatCountToBuffer(e,t,i=0){const r=new Uint32Array(t,i,nn.SectionHeaderSizeBytes/4);r[0]=e}constructFromBuffer(e,t){this.bufferData=e,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSectionMap=[];const i=nn.parseHeader(this.bufferData);this.versionMajor=i.versionMajor,this.versionMinor=i.versionMinor,this.maxSectionCount=i.maxSectionCount,this.sectionCount=t?i.maxSectionCount:0,this.maxSplatCount=i.maxSplatCount,this.splatCount=t?i.maxSplatCount:0,this.compressionLevel=i.compressionLevel,this.sceneCenter=new ft().copy(i.sceneCenter),this.minSphericalHarmonicsCoeff=i.minSphericalHarmonicsCoeff,this.maxSphericalHarmonicsCoeff=i.maxSphericalHarmonicsCoeff,this.sections=nn.parseSectionHeaders(i,this.bufferData,nn.HeaderSizeBytes,t),this.linkBufferArrays(),this.buildMaps()}static calculateComponentStorage(e,t){const i=nn.CompressionLevels[e].BytesPerCenter,r=nn.CompressionLevels[e].BytesPerScale,s=nn.CompressionLevels[e].BytesPerRotation,a=nn.CompressionLevels[e].BytesPerColor,o=J1(t),l=nn.CompressionLevels[e].BytesPerSphericalHarmonicsComponent*o,u=i+r+s+a+l;return{bytesPerCenter:i,bytesPerScale:r,bytesPerRotation:s,bytesPerColor:a,sphericalHarmonicsComponentsPerSplat:o,sphericalHarmonicsBytesPerSplat:l,bytesPerSplat:u}}linkBufferArrays(){for(let e=0;e<this.maxSectionCount;e++){const t=this.sections[e];t.bucketArray=new Float32Array(this.bufferData,t.bucketsBase,t.bucketCount*nn.BucketStorageSizeFloats),t.partiallyFilledBucketCount>0&&(t.partiallyFilledBucketLengths=new Uint32Array(this.bufferData,t.base,t.partiallyFilledBucketCount))}}buildMaps(){let e=0;for(let t=0;t<this.maxSectionCount;t++){const i=this.sections[t];for(let r=0;r<i.maxSplatCount;r++){const s=e+r;this.globalSplatIndexToLocalSplatIndexMap[s]=r,this.globalSplatIndexToSectionMap[s]=t}e+=i.maxSplatCount}}updateLoadedCounts(e,t){nn.writeHeaderCountsToBuffer(e,t,this.bufferData),this.sectionCount=e,this.splatCount=t}updateSectionLoadedCounts(e,t){const i=nn.HeaderSizeBytes+nn.SectionHeaderSizeBytes*e;nn.writeSectionHeaderSplatCountToBuffer(t,this.bufferData,i),this.sections[e].splatCount=t}static generateFromUncompressedSplatArrays(e,t,i,r,s,a,o=[]){let l=0;for(let x=0;x<e.length;x++){const w=e[x];l=Math.max(w.sphericalHarmonicsDegree,l)}let u,c;for(let x=0;x<e.length;x++){const w=e[x];for(let A=0;A<w.splats.length;A++){const T=w.splats[A];for(let C=di.OFFSET.FRC0;C<di.OFFSET.FRC23&&C<T.length;C++)(!u||T[C]<u)&&(u=T[C]),(!c||T[C]>c)&&(c=T[C])}}u=u||-hp,c=c||hp;const{bytesPerSplat:d}=nn.calculateComponentStorage(i,l),f=nn.CompressionLevels[i].ScaleRange,h=[],p=[];let m=0;for(let x=0;x<e.length;x++){const w=e[x],A=new di(l);for(let ge=0;ge<w.splatCount;ge++){const pe=w.splats[ge];(pe[di.OFFSET.OPACITY]||0)>=t&&A.addSplat(pe)}const T=o[x]||{},C=(T.blockSizeFactor||1)*(s||nn.BucketBlockSize),E=Math.ceil((T.bucketSizeFactor||1)*(a||nn.BucketSize)),I=nn.computeBucketsForUncompressedSplatArray(A,C,E),k=I.fullBuckets.length,O=I.partiallyFullBuckets.map(ge=>ge.splats.length),U=O.length,z=[...I.fullBuckets,...I.partiallyFullBuckets],L=A.splats.length*d,G=U*4,H=i>=1?z.length*nn.BucketStorageSizeBytes+G:0,F=L+H,X=new ArrayBuffer(F),te=f/(C*.5),re=new ft;let ie=0;for(let ge=0;ge<z.length;ge++){const pe=z[ge];re.fromArray(pe.center);for(let ye=0;ye<pe.splats.length;ye++){let Oe=pe.splats[ye];const Be=A.splats[Oe],Ye=H+ie*d;nn.writeSplatDataToSectionBuffer(Be,X,Ye,i,l,re,te,f,u,c),ie++}}if(m+=ie,i>=1){const ge=new Uint32Array(X,0,O.length*4);for(let ye=0;ye<O.length;ye++)ge[ye]=O[ye];const pe=new Float32Array(X,G,z.length*nn.BucketStorageSizeFloats);for(let ye=0;ye<z.length;ye++){const Oe=z[ye],Be=ye*3;pe[Be]=Oe.center[0],pe[Be+1]=Oe.center[1],pe[Be+2]=Oe.center[2]}}h.push(X);const le=new ArrayBuffer(nn.SectionHeaderSizeBytes);nn.writeSectionHeaderToBuffer({maxSplatCount:ie,splatCount:ie,bucketSize:E,bucketCount:z.length,bucketBlockSize:C,compressionScaleRange:f,storageSizeBytes:F,fullBucketCount:k,partiallyFilledBucketCount:U,sphericalHarmonicsDegree:l},i,le,0),p.push(le)}let g=0;for(let x of h)g+=x.byteLength;const v=nn.HeaderSizeBytes+nn.SectionHeaderSizeBytes*h.length+g,_=new ArrayBuffer(v);nn.writeHeaderToBuffer({versionMajor:0,versionMinor:1,maxSectionCount:h.length,sectionCount:h.length,maxSplatCount:m,splatCount:m,compressionLevel:i,sceneCenter:r,minSphericalHarmonicsCoeff:u,maxSphericalHarmonicsCoeff:c},_);let y=nn.HeaderSizeBytes;for(let x of p)new Uint8Array(_,y,nn.SectionHeaderSizeBytes).set(new Uint8Array(x)),y+=nn.SectionHeaderSizeBytes;for(let x of h)new Uint8Array(_,y,x.byteLength).set(new Uint8Array(x)),y+=x.byteLength;return new nn(_)}static computeBucketsForUncompressedSplatArray(e,t,i){let r=e.splatCount;const s=t/2,a=new ft,o=new ft;for(let m=0;m<r;m++){const g=e.splats[m],v=[g[di.OFFSET.X],g[di.OFFSET.Y],g[di.OFFSET.Z]];(m===0||v[0]<a.x)&&(a.x=v[0]),(m===0||v[0]>o.x)&&(o.x=v[0]),(m===0||v[1]<a.y)&&(a.y=v[1]),(m===0||v[1]>o.y)&&(o.y=v[1]),(m===0||v[2]<a.z)&&(a.z=v[2]),(m===0||v[2]>o.z)&&(o.z=v[2])}const l=new ft().copy(o).sub(a),u=Math.ceil(l.y/t),c=Math.ceil(l.z/t),d=new ft,f=[],h={};for(let m=0;m<r;m++){const g=e.splats[m],v=[g[di.OFFSET.X],g[di.OFFSET.Y],g[di.OFFSET.Z]],_=Math.floor((v[0]-a.x)/t),y=Math.floor((v[1]-a.y)/t),b=Math.floor((v[2]-a.z)/t);d.x=_*t+a.x+s,d.y=y*t+a.y+s,d.z=b*t+a.z+s;const x=_*(u*c)+y*c+b;let w=h[x];w||(h[x]=w={splats:[],center:d.toArray()}),w.splats.push(m),w.splats.length>=i&&(f.push(w),h[x]=null)}const p=[];for(let m in h)if(h.hasOwnProperty(m)){const g=h[m];g&&p.push(g)}return{fullBuckets:f,partiallyFullBuckets:p}}};Cn(nn,"CurrentMajorVersion",0),Cn(nn,"CurrentMinorVersion",1),Cn(nn,"CenterComponentCount",3),Cn(nn,"ScaleComponentCount",3),Cn(nn,"RotationComponentCount",4),Cn(nn,"ColorComponentCount",4),Cn(nn,"CovarianceComponentCount",6),Cn(nn,"SplatScaleOffsetFloat",3),Cn(nn,"SplatRotationOffsetFloat",6),Cn(nn,"CompressionLevels",{0:{BytesPerCenter:12,BytesPerScale:12,BytesPerRotation:16,BytesPerColor:4,ScaleOffsetBytes:12,RotationffsetBytes:24,ColorOffsetBytes:40,SphericalHarmonicsOffsetBytes:44,ScaleRange:1,BytesPerSphericalHarmonicsComponent:4,SphericalHarmonicsOffsetFloat:11,SphericalHarmonicsDegrees:{0:{BytesPerSplat:44},1:{BytesPerSplat:80},2:{BytesPerSplat:140}}},1:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:2,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:42},2:{BytesPerSplat:72}}},2:{BytesPerCenter:6,BytesPerScale:6,BytesPerRotation:8,BytesPerColor:4,ScaleOffsetBytes:6,RotationffsetBytes:12,ColorOffsetBytes:20,SphericalHarmonicsOffsetBytes:24,ScaleRange:32767,BytesPerSphericalHarmonicsComponent:1,SphericalHarmonicsOffsetFloat:12,SphericalHarmonicsDegrees:{0:{BytesPerSplat:24},1:{BytesPerSplat:33},2:{BytesPerSplat:48}}}}),Cn(nn,"CovarianceSizeFloats",6),Cn(nn,"HeaderSizeBytes",4096),Cn(nn,"SectionHeaderSizeBytes",1024),Cn(nn,"BucketStorageSizeBytes",12),Cn(nn,"BucketStorageSizeFloats",3),Cn(nn,"BucketBlockSize",5),Cn(nn,"BucketSize",256),Cn(nn,"computeCovariance",function(){const e=new Pi,t=new Ri,i=new Ri,r=new Ri,s=new Ri,a=new Ri,o=new Ri;return function(l,u,c,d,f=0,h){e.makeScale(l.x,l.y,l.z),t.setFromMatrix4(e),e.makeRotationFromQuaternion(u),i.setFromMatrix4(e),r.copy(i).multiply(t),s.copy(r).transpose().premultiply(r),c&&(a.setFromMatrix4(c),o.copy(a).transpose(),s.multiply(o),s.premultiply(a)),h>=1?(d[f]=la(s.elements[0]),d[f+1]=la(s.elements[3]),d[f+2]=la(s.elements[6]),d[f+3]=la(s.elements[4]),d[f+4]=la(s.elements[7]),d[f+5]=la(s.elements[8])):(d[f]=s.elements[0],d[f+1]=s.elements[3],d[f+2]=s.elements[6],d[f+3]=s.elements[4],d[f+4]=s.elements[7],d[f+5]=s.elements[8])}}()),Cn(nn,"dot3",(e,t,i,r,s)=>{s[0]=s[1]=s[2]=0;const a=r[0],o=r[1],l=r[2];nn.addInto3(e[0]*a,e[1]*a,e[2]*a,s),nn.addInto3(t[0]*o,t[1]*o,t[2]*o,s),nn.addInto3(i[0]*l,i[1]*l,i[2]*l,s)}),Cn(nn,"addInto3",(e,t,i,r)=>{r[0]=r[0]+e,r[1]=r[1]+t,r[2]=r[2]+i}),Cn(nn,"dot5",(e,t,i,r,s,a,o)=>{o[0]=o[1]=o[2]=0;const l=a[0],u=a[1],c=a[2],d=a[3],f=a[4];nn.addInto3(e[0]*l,e[1]*l,e[2]*l,o),nn.addInto3(t[0]*u,t[1]*u,t[2]*u,o),nn.addInto3(i[0]*c,i[1]*c,i[2]*c,o),nn.addInto3(r[0]*d,r[1]*d,r[2]*d,o),nn.addInto3(s[0]*f,s[1]*f,s[2]*f,o)}),Cn(nn,"rotateSphericalHarmonics3",(e,t,i,r,s,a,o,l,u)=>{nn.dot3(e,t,i,r,o),nn.dot3(e,t,i,s,l),nn.dot3(e,t,i,a,u)}),Cn(nn,"rotateSphericalHarmonics5",(e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g,v,_)=>{const y=Math.sqrt(.25),b=Math.sqrt(3/4),x=Math.sqrt(1/3),w=Math.sqrt(4/3),A=Math.sqrt(1/12);u[0]=y*(l[2]*a[0]+l[0]*a[2]+(a[2]*l[0]+a[0]*l[2])),u[1]=l[1]*a[0]+a[1]*l[0],u[2]=b*(l[1]*a[1]+a[1]*l[1]),u[3]=l[1]*a[2]+a[1]*l[2],u[4]=y*(l[2]*a[2]-l[0]*a[0]+(a[2]*l[2]-a[0]*l[0])),nn.dot5(e,t,i,r,s,u,p),c[0]=y*(o[2]*a[0]+o[0]*a[2]+(a[2]*o[0]+a[0]*o[2])),c[1]=o[1]*a[0]+a[1]*o[0],c[2]=b*(o[1]*a[1]+a[1]*o[1]),c[3]=o[1]*a[2]+a[1]*o[2],c[4]=y*(o[2]*a[2]-o[0]*a[0]+(a[2]*o[2]-a[0]*o[0])),nn.dot5(e,t,i,r,s,c,m),d[0]=x*(o[2]*o[0]+o[0]*o[2])+-A*(l[2]*l[0]+l[0]*l[2]+(a[2]*a[0]+a[0]*a[2])),d[1]=w*o[1]*o[0]+-x*(l[1]*l[0]+a[1]*a[0]),d[2]=o[1]*o[1]+-y*(l[1]*l[1]+a[1]*a[1]),d[3]=w*o[1]*o[2]+-x*(l[1]*l[2]+a[1]*a[2]),d[4]=x*(o[2]*o[2]-o[0]*o[0])+-A*(l[2]*l[2]-l[0]*l[0]+(a[2]*a[2]-a[0]*a[0])),nn.dot5(e,t,i,r,s,d,g),f[0]=y*(o[2]*l[0]+o[0]*l[2]+(l[2]*o[0]+l[0]*o[2])),f[1]=o[1]*l[0]+l[1]*o[0],f[2]=b*(o[1]*l[1]+l[1]*o[1]),f[3]=o[1]*l[2]+l[1]*o[2],f[4]=y*(o[2]*l[2]-o[0]*l[0]+(l[2]*o[2]-l[0]*o[0])),nn.dot5(e,t,i,r,s,f,v),h[0]=y*(l[2]*l[0]+l[0]*l[2]-(a[2]*a[0]+a[0]*a[2])),h[1]=l[1]*l[0]-a[1]*a[0],h[2]=b*(l[1]*l[1]-a[1]*a[1]),h[3]=l[1]*l[2]-a[1]*a[2],h[4]=y*(l[2]*l[2]-l[0]*l[0]-(a[2]*a[2]-a[0]*a[0])),nn.dot5(e,t,i,r,s,h,_)}),Cn(nn,"writeSplatDataToSectionBuffer",function(){const e=new ArrayBuffer(12),t=new ArrayBuffer(12),i=new ArrayBuffer(16),r=new ArrayBuffer(4),s=new ArrayBuffer(256),a=new bs,o=new ft,l=new ft,{X:u,Y:c,Z:d,SCALE0:f,SCALE1:h,SCALE2:p,ROTATION0:m,ROTATION1:g,ROTATION2:v,ROTATION3:_,FDC0:y,FDC1:b,FDC2:x,OPACITY:w,FRC0:A,FRC9:T}=di.OFFSET,C=(E,I,k)=>{const O=k*2+1;return E=Math.round(E*I)+k,Ya(E,0,O)};return function(E,I,k,O,U,z,L,G,H=-hp,F=hp){const X=J1(U),te=nn.CompressionLevels[O].BytesPerCenter,re=nn.CompressionLevels[O].BytesPerScale,ie=nn.CompressionLevels[O].BytesPerRotation,le=nn.CompressionLevels[O].BytesPerColor,ge=k,pe=ge+te,ye=pe+re,Oe=ye+ie,Be=Oe+le;if(E[m]!==void 0?(a.set(E[m],E[g],E[v],E[_]),a.normalize()):a.set(1,0,0,0),E[f]!==void 0?o.set(E[f]||0,E[h]||0,E[p]||0):o.set(0,0,0),O===0){const Ze=new Float32Array(I,ge,nn.CenterComponentCount),Q=new Float32Array(I,ye,nn.RotationComponentCount),me=new Float32Array(I,pe,nn.ScaleComponentCount);if(Q.set([a.x,a.y,a.z,a.w]),me.set([o.x,o.y,o.z]),Ze.set([E[u],E[c],E[d]]),U>0){const ce=new Float32Array(I,Be,X);if(U>=1){for(let je=0;je<9;je++)ce[je]=E[A+je]||0;if(U>=2)for(let je=0;je<15;je++)ce[je+9]=E[T+je]||0}}}else{const Ze=new Uint16Array(e,0,nn.CenterComponentCount),Q=new Uint16Array(i,0,nn.RotationComponentCount),me=new Uint16Array(t,0,nn.ScaleComponentCount);if(Q.set([la(a.x),la(a.y),la(a.z),la(a.w)]),me.set([la(o.x),la(o.y),la(o.z)]),l.set(E[u],E[c],E[d]).sub(z),l.x=C(l.x,L,G),l.y=C(l.y,L,G),l.z=C(l.z,L,G),Ze.set([l.x,l.y,l.z]),U>0){const ce=O===1?Uint16Array:Uint8Array,je=O===1?2:1,Fe=new ce(s,0,X);if(U>=1){for(let We=0;We<9;We++){const Ke=E[A+We]||0;Fe[We]=O===1?la(Ke):I2(Ke,H,F)}const nt=9*je;if(Wy(Fe.buffer,0,I,Be,nt),U>=2){for(let We=0;We<15;We++){const Ke=E[T+We]||0;Fe[We+9]=O===1?la(Ke):I2(Ke,H,F)}Wy(Fe.buffer,nt,I,Be+nt,15*je)}}}Wy(Ze.buffer,0,I,ge,6),Wy(me.buffer,0,I,pe,6),Wy(Q.buffer,0,I,ye,8)}const Ye=new Uint8ClampedArray(r,0,4);Ye.set([E[y]||0,E[b]||0,E[x]||0]),Ye[3]=E[w]||0,Wy(Ye.buffer,0,I,Oe,4)}}());let mi=nn;const gZ=new Uint8Array([112,108,121,10]),vZ=new Uint8Array([10,101,110,100,95,104,101,97,100,101,114,10]),DL="end_header",RL=new Map([["char",Int8Array],["uchar",Uint8Array],["short",Int16Array],["ushort",Uint16Array],["int",Int32Array],["uint",Uint32Array],["float",Float32Array],["double",Float64Array]]),Od=(n,e)=>{const t=(1<<e)-1;return(n&t)/t},yZ=(n,e)=>{n.x=Od(e>>>21,11),n.y=Od(e>>>11,10),n.z=Od(e,11)},Cbt=(n,e)=>{n.x=Od(e>>>24,8),n.y=Od(e>>>16,8),n.z=Od(e>>>8,8),n.w=Od(e,8)},Abt=(n,e)=>{const t=1/(Math.sqrt(2)*.5),i=(Od(e>>>20,10)-.5)*t,r=(Od(e>>>10,10)-.5)*t,s=(Od(e,10)-.5)*t,a=Math.sqrt(1-(i*i+r*r+s*s));switch(e>>>30){case 0:n.set(a,i,r,s);break;case 1:n.set(i,a,r,s);break;case 2:n.set(i,r,a,s);break;case 3:n.set(i,r,s,a);break}},qy=(n,e,t)=>n*(1-t)+e*t,co=(n,e)=>{var t;return(t=n.properties.find(i=>i.name===e&&i.storage))==null?void 0:t.storage},po=class po{static decodeHeaderText(e){let t,i,r;const s=e.split(`
`).filter(l=>!l.startsWith("comment "));let a=0,o=!1;for(let l=1;l<s.length;++l){const u=s[l].split(" ");switch(u[0]){case"format":if(u[1]!=="binary_little_endian")throw new Error("Unsupported ply format");break;case"element":t={name:u[1],count:parseInt(u[2],10),properties:[],storageSizeBytes:0},t.name==="chunk"?i=t:t.name==="vertex"&&(r=t);break;case"property":{if(!RL.has(u[1]))throw new Error(`Unrecognized property data type '${u[1]}' in ply header`);const c=RL.get(u[1]),d=c.BYTES_PER_ELEMENT*t.count;t.name==="vertex"&&(a+=c.BYTES_PER_ELEMENT),t.properties.push({type:u[1],name:u[2],storage:null,byteSize:c.BYTES_PER_ELEMENT,storageSizeByes:d}),t.storageSizeBytes+=d;break}case DL:o=!0;break;default:throw new Error(`Unrecognized header value '${u[0]}' in ply header`)}if(o)break}return{chunkElement:i,vertexElement:r,bytesPerSplat:a,headerSizeBytes:e.indexOf(DL)+DL.length+1,sphericalHarmonicsDegree:0}}static decodeHeader(e){const t=(c,d)=>{const f=c.length-d.length;let h,p;for(h=0;h<=f;++h){for(p=0;p<d.length&&c[h+p]===d[p];++p);if(p===d.length)return h}return-1},i=(c,d)=>{if(c.length<d.length)return!1;for(let f=0;f<d.length;++f)if(c[f]!==d[f])return!1;return!0};let r=new Uint8Array(e),s;if(r.length>=gZ.length&&!i(r,gZ))throw new Error("Invalid PLY header");if(s=t(r,vZ),s===-1)throw new Error("End of PLY header not found");const a=new TextDecoder("ascii").decode(r.slice(0,s)),{chunkElement:o,vertexElement:l,bytesPerSplat:u}=po.decodeHeaderText(a);return{headerSizeBytes:s+vZ.length,bytesPerSplat:u,chunkElement:o,vertexElement:l}}static readElementData(e,t,i,r,s,a=null){let o=t instanceof DataView?t:new DataView(t);r=r||0,s=s||e.count-1;for(let l=r;l<=s;++l)for(let u=0;u<e.properties.length;++u){const c=e.properties[u],d=RL.get(c.type),f=d.BYTES_PER_ELEMENT*e.count;if((!c.storage||c.storage.byteLength<f)&&(!a||a(c.name))&&(c.storage=new d(e.count)),c.storage)switch(c.type){case"char":c.storage[l]=o.getInt8(i);break;case"uchar":c.storage[l]=o.getUint8(i);break;case"short":c.storage[l]=o.getInt16(i,!0);break;case"ushort":c.storage[l]=o.getUint16(i,!0);break;case"int":c.storage[l]=o.getInt32(i,!0);break;case"uint":c.storage[l]=o.getUint32(i,!0);break;case"float":c.storage[l]=o.getFloat32(i,!0);break;case"double":c.storage[l]=o.getFloat64(i,!0);break}i+=c.byteSize}return i}static readPly(e,t=null){const i=po.decodeHeader(e);let r=po.readElementData(i.chunkElement,e,i.headerSizeBytes,null,null,t);return po.readElementData(i.vertexElement,e,r,null,null,t),{chunkElement:i.chunkElement,vertexElement:i.vertexElement}}static getElementStorageArrays(e,t){const i=co(e,"min_x"),r=co(e,"min_y"),s=co(e,"min_z"),a=co(e,"max_x"),o=co(e,"max_y"),l=co(e,"max_z"),u=co(e,"min_scale_x"),c=co(e,"min_scale_y"),d=co(e,"min_scale_z"),f=co(e,"max_scale_x"),h=co(e,"max_scale_y"),p=co(e,"max_scale_z"),m=co(t,"packed_position"),g=co(t,"packed_rotation"),v=co(t,"packed_scale"),_=co(t,"packed_color");return{positionExtremes:{minX:i,maxX:a,minY:r,maxY:o,minZ:s,maxZ:l},scaleExtremes:{minScaleX:u,maxScaleX:f,minScaleY:c,maxScaleY:h,minScaleZ:d,maxScaleZ:p},position:m,rotation:g,scale:v,color:_}}static parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l,u,c=null){po.readElementData(t,a,o,i,r,c);const d=mi.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,{positionExtremes:f,scaleExtremes:h,position:p,rotation:m,scale:g,color:v}=po.getElementStorageArrays(e,t),_=di.createSplat();for(let y=i;y<=r;++y){po.decompressSplat(y,s,p,f,g,h,m,v,_);const b=y*d+u;mi.writeSplatDataToSectionBuffer(_,l,b,0,0)}}static parseToUncompressedSplatArraySection(e,t,i,r,s,a,o,l,u=null){po.readElementData(t,a,o,i,r,u);const{positionExtremes:c,scaleExtremes:d,position:f,rotation:h,scale:p,color:m}=po.getElementStorageArrays(e,t);for(let g=i;g<=r;++g){const v=di.createSplat();po.decompressSplat(g,s,f,c,p,d,h,m,v),l.addSplat(v)}}static parseToUncompressedSplatArray(e){const{chunkElement:t,vertexElement:i}=po.readPly(e),r=new di,{positionExtremes:s,scaleExtremes:a,position:o,rotation:l,scale:u,color:c}=po.getElementStorageArrays(t,i);for(let f=0;f<i.count;++f){r.addDefaultSplat();const h=r.getSplat(r.splatCount-1);po.decompressSplat(f,0,o,s,u,a,l,c,h)}return new Pi().identity(),r}};Cn(po,"decompressSplat",function(){const e=new ft,t=new bs,i=new ft,r=new gs,s=di.OFFSET;return function(a,o,l,u,c,d,f,h,p){p=p||di.createSplat();const m=Math.floor((o+a)/256);return yZ(e,l[a]),Abt(t,f[a]),yZ(i,c[a]),Cbt(r,h[a]),p[s.X]=qy(u.minX[m],u.maxX[m],e.x),p[s.Y]=qy(u.minY[m],u.maxY[m],e.y),p[s.Z]=qy(u.minZ[m],u.maxZ[m],e.z),p[s.ROTATION0]=t.x,p[s.ROTATION1]=t.y,p[s.ROTATION2]=t.z,p[s.ROTATION3]=t.w,p[s.SCALE0]=Math.exp(qy(d.minScaleX[m],d.maxScaleX[m],i.x)),p[s.SCALE1]=Math.exp(qy(d.minScaleY[m],d.maxScaleY[m],i.y)),p[s.SCALE2]=Math.exp(qy(d.minScaleZ[m],d.maxScaleZ[m],i.z)),p[s.FDC0]=Ya(Math.floor(r.x*255),0,255),p[s.FDC1]=Ya(Math.floor(r.y*255),0,255),p[s.FDC2]=Ya(Math.floor(r.z*255),0,255),p[s.OPACITY]=Ya(Math.floor(r.w*255),0,255),p}}());let fg=po;const Kp={INRIAV1:0,INRIAV2:1,PlayCanvasCompressed:2},[_pe,wz,Tz,Cz,Az,Ez,Mz]=[0,1,2,3,4,5,6],_Z={double:_pe,int:wz,uint:Tz,float:Cz,short:Az,ushort:Ez,uchar:Mz},Ebt={[_pe]:8,[wz]:4,[Tz]:4,[Cz]:4,[Az]:2,[Ez]:2,[Mz]:1},Ql=class Ql{constructor(){}decodeSectionHeader(e,t,i=0){const r=[];let s=!1,a=-1,o=0,l=!1,u=null;const c=[],d=[],f=[],h={};for(let v=i;v<e.length;v++){const _=e[v].trim();if(_.startsWith("element"))if(s){a--;break}else{s=!0,i=v,a=v;const y=_.split(" ");let b=0;for(let x of y){const w=x.trim();w.length>0&&(b++,b===2?u=w:b===3&&(o=parseInt(w)))}}else if(_.startsWith("property")){const y=_.match(/(\w+)\s+(\w+)\s+(\w+)/);if(y){const b=y[2],x=y[3];f.push(x);const w=t[x];h[x]=b;const A=_Z[b];w!==void 0&&(c.push(w),d[w]=A)}}if(_===Ql.HeaderEndToken){l=!0;break}s&&(r.push(_),a++)}const p=[];let m=0;for(let v of f){const _=h[v];if(h.hasOwnProperty(v)){const y=t[v];y!==void 0&&(p[y]=m)}m+=Ebt[_Z[_]]}const g=this.decodeSphericalHarmonicsFromSectionHeader(f,t);return{headerLines:r,headerStartLine:i,headerEndLine:a,fieldTypes:d,fieldIds:c,fieldOffsets:p,bytesPerVertex:m,vertexCount:o,dataSizeBytes:m*o,endOfHeader:l,sectionName:u,sphericalHarmonicsDegree:g.degree,sphericalHarmonicsCoefficientsPerChannel:g.coefficientsPerChannel,sphericalHarmonicsDegree1Fields:g.degree1Fields,sphericalHarmonicsDegree2Fields:g.degree2Fields}}decodeSphericalHarmonicsFromSectionHeader(e,t){let i=0,r=0;for(let l of e)l.startsWith("f_rest")&&i++;r=i/3;let s=0;r>=3&&(s=1),r>=8&&(s=2);let a=[],o=[];for(let l=0;l<3;l++){if(s>=1)for(let u=0;u<3;u++)a.push(t["f_rest_"+(u+r*l)]);if(s>=2)for(let u=0;u<5;u++)o.push(t["f_rest_"+(u+r*l+3)])}return{degree:s,coefficientsPerChannel:r,degree1Fields:a,degree2Fields:o}}static getHeaderSectionNames(e){const t=[];for(let i of e)if(i.startsWith("element")){const r=i.split(" ");let s=0;for(let a of r){const o=a.trim();o.length>0&&(s++,s===2&&t.push(o))}}return t}static checkTextForEndHeader(e){return!!e.includes(Ql.HeaderEndToken)}static checkBufferForEndHeader(e,t,i,r){const s=new Uint8Array(e,Math.max(0,t-i),i),a=r.decode(s);return Ql.checkTextForEndHeader(a)}static extractHeaderFromBufferToText(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Ql.checkBufferForEndHeader(e,i,s*2,t))break}return r}readHeaderFromBuffer(e){const t=new TextDecoder;let i=0,r="";const s=100;for(;;){if(i+s>=e.byteLength)throw new Error("End of file reached while searching for end of header");const a=new Uint8Array(e,i,s);if(r+=t.decode(a),i+=s,Ql.checkBufferForEndHeader(e,i,s*2,t))break}return r}static convertHeaderTextToLines(e){const t=e.split(`
`),i=[];for(let r=0;r<t.length;r++){const s=t[r].trim();if(i.push(s),s===Ql.HeaderEndToken)break}return i}static determineHeaderFormatFromHeaderText(e){const t=Ql.convertHeaderTextToLines(e);let i=Kp.INRIAV1;for(let r=0;r<t.length;r++){const s=t[r].trim();if(s.startsWith("element chunk")||s.match(/[A-Za-z]*packed_[A-Za-z]*/))i=Kp.PlayCanvasCompressed;else if(s.startsWith("element codebook_centers"))i=Kp.INRIAV2;else if(s===Ql.HeaderEndToken)break}return i}static determineHeaderFormatFromPlyBuffer(e){const t=Ql.extractHeaderFromBufferToText(e);return Ql.determineHeaderFormatFromHeaderText(t)}static readVertex(e,t,i,r,s,a,o=!0){const l=i*t.bytesPerVertex+r,u=t.fieldOffsets,c=t.fieldTypes;for(let d of s){const f=c[d];f===Cz?a[d]=e.getFloat32(l+u[d],!0):f===Az?a[d]=e.getInt16(l+u[d],!0):f===Ez?a[d]=e.getUint16(l+u[d],!0):f===wz?a[d]=e.getInt32(l+u[d],!0):f===Tz?a[d]=e.getUint32(l+u[d],!0):f===Mz&&(o?a[d]=e.getUint8(l+u[d])/255:a[d]=e.getUint8(l+u[d]))}}};Cn(Ql,"HeaderEndToken","end_header");let ja=Ql;const bpe=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0"],Mbt=bpe.map((n,e)=>e),[bZ,Ibt,Dbt,Rbt,Pbt,kbt,Lbt,Obt,Nbt,Bbt,SZ,Fbt,Ubt,xZ,wZ,zbt,Hbt,Vbt]=Mbt,Km=class Km{constructor(){this.plyParserutils=new ja}decodeHeaderLines(e){let t=0;e.forEach(c=>{c.includes("f_rest_")&&t++});let i=0;t>=45?i=45:t>=24?i=24:t>=9&&(i=9);let s=Array.from(Array(Math.max(i-1,0))).map((c,d)=>`f_rest_${d+1}`);const a=[...bpe,...s],o=a.map((c,d)=>d),l=o.reduce((c,d)=>(c[a[d]]=d,c),{}),u=this.plyParserutils.decodeSectionHeader(e,l,0);return u.splatCount=u.vertexCount,u.bytesPerSplat=u.bytesPerVertex,u.fieldsToReadIndexes=o,u}decodeHeaderText(e){const t=ja.convertHeaderTextToLines(e),i=this.decodeHeaderLines(t);return i.headerText=e,i.headerSizeBytes=e.indexOf(ja.HeaderEndToken)+ja.HeaderEndToken.length+1,i}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderText(t)}findSplatData(e,t){return new DataView(e,t.headerSizeBytes)}parseToUncompressedSplatBufferSection(e,t,i,r,s,a,o,l=0){l=Math.min(l,e.sphericalHarmonicsDegree);const u=mi.CompressionLevels[0].SphericalHarmonicsDegrees[l].BytesPerSplat;for(let c=t;c<=i;c++){const d=Km.parseToUncompressedSplat(r,c,e,s,l),f=c*u+o;mi.writeSplatDataToSectionBuffer(d,a,f,0,l)}}parseToUncompressedSplatArraySection(e,t,i,r,s,a,o=0){o=Math.min(o,e.sphericalHarmonicsDegree);for(let l=t;l<=i;l++){const u=Km.parseToUncompressedSplat(r,l,e,s,o);a.addSplat(u)}}decodeSectionSplatData(e,t,i,r){r=Math.min(r,i.sphericalHarmonicsDegree);const s=new di(r);for(let a=0;a<t;a++){const o=Km.parseToUncompressedSplat(e,a,i,0,r);s.addSplat(o)}return s}static readSplat(e,t,i,r,s){return ja.readVertex(e,t,i,r,t.fieldsToReadIndexes,s,!0)}parseToUncompressedSplatArray(e,t=0){const i=this.decodeHeaderFromBuffer(e),r=i.splatCount,s=this.findSplatData(e,i);return this.decodeSectionSplatData(s,r,i,t)}};Cn(Km,"parseToUncompressedSplat",function(){let e=[];const t=new bs,i=di.OFFSET.X,r=di.OFFSET.Y,s=di.OFFSET.Z,a=di.OFFSET.SCALE0,o=di.OFFSET.SCALE1,l=di.OFFSET.SCALE2,u=di.OFFSET.ROTATION0,c=di.OFFSET.ROTATION1,d=di.OFFSET.ROTATION2,f=di.OFFSET.ROTATION3,h=di.OFFSET.FDC0,p=di.OFFSET.FDC1,m=di.OFFSET.FDC2,g=di.OFFSET.OPACITY,v=[];for(let _=0;_<45;_++)v[_]=di.OFFSET.FRC0+_;return function(_,y,b,x=0,w=0){w=Math.min(w,b.sphericalHarmonicsDegree),Km.readSplat(_,b,y,x,e);const A=di.createSplat(w);if(e[bZ]!==void 0?(A[a]=Math.exp(e[bZ]),A[o]=Math.exp(e[Ibt]),A[l]=Math.exp(e[Dbt])):(A[a]=.01,A[o]=.01,A[l]=.01),e[SZ]!==void 0){const T=.28209479177387814;A[h]=(.5+T*e[SZ])*255,A[p]=(.5+T*e[Fbt])*255,A[m]=(.5+T*e[Ubt])*255}else e[wZ]!==void 0?(A[h]=e[wZ]*255,A[p]=e[zbt]*255,A[m]=e[Hbt]*255):(A[h]=0,A[p]=0,A[m]=0);if(e[xZ]!==void 0&&(A[g]=1/(1+Math.exp(-e[xZ]))*255),A[h]=Ya(Math.floor(A[h]),0,255),A[p]=Ya(Math.floor(A[p]),0,255),A[m]=Ya(Math.floor(A[m]),0,255),A[g]=Ya(Math.floor(A[g]),0,255),w>=1&&e[Vbt]!==void 0){for(let T=0;T<9;T++)A[v[T]]=e[b.sphericalHarmonicsDegree1Fields[T]];if(w>=2)for(let T=0;T<15;T++)A[v[9+T]]=e[b.sphericalHarmonicsDegree2Fields[T]]}return t.set(e[Rbt],e[Pbt],e[kbt],e[Lbt]),t.normalize(),A[u]=t.x,A[c]=t.y,A[d]=t.z,A[f]=t.w,A[i]=e[Obt],A[r]=e[Nbt],A[s]=e[Bbt],A}}());let vI=Km;const Spe=["features_dc","features_rest_0","features_rest_1","features_rest_2","features_rest_3","features_rest_4","features_rest_5","features_rest_6","features_rest_7","features_rest_8","features_rest_9","features_rest_10","features_rest_11","features_rest_12","features_rest_13","features_rest_14","opacity","scaling","rotation_re","rotation_im"],rM=Spe.map((n,e)=>e),[sM,$bt,Gbt,TZ,aM,Wbt,PL]=[0,1,4,16,17,18,19],xpe=["scale_0","scale_1","scale_2","rot_0","rot_1","rot_2","rot_3","x","y","z","f_dc_0","f_dc_1","f_dc_2","opacity","red","green","blue","f_rest_0","f_rest_1","f_rest_2","f_rest_3","f_rest_4","f_rest_5","f_rest_6","f_rest_7","f_rest_8","f_rest_9","f_rest_10","f_rest_11","f_rest_12","f_rest_13","f_rest_14","f_rest_15","f_rest_16","f_rest_17","f_rest_18","f_rest_19","f_rest_20","f_rest_21","f_rest_22","f_rest_23","f_rest_24","f_rest_25","f_rest_26","f_rest_27","f_rest_28","f_rest_29","f_rest_30","f_rest_31","f_rest_32","f_rest_33","f_rest_34","f_rest_35","f_rest_36","f_rest_37","f_rest_38","f_rest_39","f_rest_40","f_rest_41","f_rest_42","f_rest_43","f_rest_44","f_rest_45"],nB=xpe.map((n,e)=>e),[CZ,qbt,jbt,Kbt,Xbt,Ybt,Qbt,Zbt,Jbt,eSt,iB,wpe,Tpe,AZ]=nB,EZ=iB,tSt=wpe,nSt=Tpe,oM=n=>{const e=(31744&n)>>10,t=1023&n;return(n>>15?-1:1)*(e?e===31?t?NaN:1/0:Math.pow(2,e-15)*(1+t/1024):t/1024*6103515625e-14)},L2=class L2{constructor(){this.plyParserutils=new ja}decodeSectionHeadersFromHeaderLines(e){const t=nB.reduce((c,d)=>(c[xpe[d]]=d,c),{}),i=rM.reduce((c,d)=>(c[Spe[d]]=d,c),{}),r=ja.getHeaderSectionNames(e);let s;for(let c=0;c<r.length;c++)r[c]==="codebook_centers"&&(s=c);let a=0,o=!1;const l=[];let u=0;for(;!o;){let c;u===s?c=this.plyParserutils.decodeSectionHeader(e,i,a):c=this.plyParserutils.decodeSectionHeader(e,t,a),o=c.endOfHeader,a=c.headerEndLine+1,o||(c.splatCount=c.vertexCount,c.bytesPerSplat=c.bytesPerVertex),l.push(c),u++}return l}decodeSectionHeadersFromHeaderText(e){const t=ja.convertHeaderTextToLines(e);return this.decodeSectionHeadersFromHeaderLines(t)}getSplatCountFromSectionHeaders(e){let t=0;for(let i of e)i.sectionName!=="codebook_centers"&&(t+=i.vertexCount);return t}decodeHeaderFromHeaderText(e){const t=e.indexOf(ja.HeaderEndToken)+ja.HeaderEndToken.length+1,i=this.decodeSectionHeadersFromHeaderText(e),r=this.getSplatCountFromSectionHeaders(i);return{headerSizeBytes:t,sectionHeaders:i,splatCount:r}}decodeHeaderFromBuffer(e){const t=this.plyParserutils.readHeaderFromBuffer(e);return this.decodeHeaderFromHeaderText(t)}findVertexData(e,t,i){let r=t.headerSizeBytes;for(let s=0;s<i&&s<t.sectionHeaders.length;s++){const a=t.sectionHeaders[s];r+=a.dataSizeBytes}return new DataView(e,r,t.sectionHeaders[i].dataSizeBytes)}decodeCodeBook(e,t){const i=[],r=[];for(let s=0;s<t.vertexCount;s++){ja.readVertex(e,t,s,0,rM,i);for(let a of rM){const o=rM[a];let l=r[o];l||(r[o]=l=[]),l.push(i[a])}}for(let s=0;s<r.length;s++){const a=r[s],o=.28209479177387814;for(let l=0;l<a.length;l++){const u=oM(a[l]);s===TZ?a[l]=Math.round(1/(1+Math.exp(-u))*255):s===sM?a[l]=Math.round((.5+o*u)*255):s===aM?a[l]=Math.exp(u):a[l]=u}}return r}decodeSectionSplatData(e,t,i,r,s){s=Math.min(s,i.sphericalHarmonicsDegree);const a=new di(s);for(let o=0;o<t;o++){const l=L2.parseToUncompressedSplat(e,o,i,r,0,s);a.addSplat(l)}return a}static readSplat(e,t,i,r,s){return ja.readVertex(e,t,i,r,nB,s,!1)}parseToUncompressedSplatArray(e,t=0){const i=[],r=this.decodeHeaderFromBuffer(e,t);let s;for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName==="codebook_centers"){const u=this.findVertexData(e,r,o);s=this.decodeCodeBook(u,l)}}for(let o=0;o<r.sectionHeaders.length;o++){const l=r.sectionHeaders[o];if(l.sectionName!=="codebook_centers"){const u=l.vertexCount,c=this.findVertexData(e,r,o),d=this.decodeSectionSplatData(c,u,l,s,t);i.push(d)}}const a=new di(t);for(let o of i)for(let l of o.splats)a.addSplat(l);return a}};Cn(L2,"parseToUncompressedSplat",function(){let e=[];const t=new bs,i=di.OFFSET.X,r=di.OFFSET.Y,s=di.OFFSET.Z,a=di.OFFSET.SCALE0,o=di.OFFSET.SCALE1,l=di.OFFSET.SCALE2,u=di.OFFSET.ROTATION0,c=di.OFFSET.ROTATION1,d=di.OFFSET.ROTATION2,f=di.OFFSET.ROTATION3,h=di.OFFSET.FDC0,p=di.OFFSET.FDC1,m=di.OFFSET.FDC2,g=di.OFFSET.OPACITY,v=[];for(let _=0;_<45;_++)v[_]=di.OFFSET.FRC0+_;return function(_,y,b,x,w=0,A=0){A=Math.min(A,b.sphericalHarmonicsDegree),L2.readSplat(_,b,y,w,e);const T=di.createSplat(A);if(e[CZ]!==void 0?(T[a]=x[aM][e[CZ]],T[o]=x[aM][e[qbt]],T[l]=x[aM][e[jbt]]):(T[a]=.01,T[o]=.01,T[l]=.01),e[iB]!==void 0?(T[h]=x[sM][e[iB]],T[p]=x[sM][e[wpe]],T[m]=x[sM][e[Tpe]]):e[EZ]!==void 0?(T[h]=e[EZ]*255,T[p]=e[tSt]*255,T[m]=e[nSt]*255):(T[h]=0,T[p]=0,T[m]=0),e[AZ]!==void 0&&(T[g]=x[TZ][e[AZ]]),T[h]=Ya(Math.floor(T[h]),0,255),T[p]=Ya(Math.floor(T[p]),0,255),T[m]=Ya(Math.floor(T[m]),0,255),T[g]=Ya(Math.floor(T[g]),0,255),A>=1&&b.sphericalHarmonicsDegree>=1){for(let O=0;O<9;O++){const U=x[$bt+O%3];T[v[O]]=U[e[b.sphericalHarmonicsDegree1Fields[O]]]}if(A>=2&&b.sphericalHarmonicsDegree>=2)for(let O=0;O<15;O++){const U=x[Gbt+O%5];T[v[9+O]]=U[e[b.sphericalHarmonicsDegree2Fields[O]]]}}const C=x[Wbt][e[Kbt]],E=x[PL][e[Xbt]],I=x[PL][e[Ybt]],k=x[PL][e[Qbt]];return t.set(C,E,I,k),t.normalize(),T[u]=t.x,T[c]=t.y,T[d]=t.z,T[f]=t.w,T[i]=oM(e[Zbt]),T[r]=oM(e[Jbt]),T[s]=oM(e[eSt]),T}}());let rB=L2;class iSt{static parseToUncompressedSplatArray(e,t=0){const i=ja.determineHeaderFormatFromPlyBuffer(e);if(i===Kp.PlayCanvasCompressed)return fg.parseToUncompressedSplatArray(e);if(i===Kp.INRIAV1)return new vI().parseToUncompressedSplatArray(e,t);if(i===Kp.INRIAV2)return new rB().parseToUncompressedSplatArray(e,t)}}class Iz{constructor(e,t,i,r){this.sectionCount=e,this.sectionFilters=t,this.groupingParameters=i,this.partitionGenerator=r}partitionUncompressedSplatArray(e){let t,i,r;if(this.partitionGenerator){const a=this.partitionGenerator(e);t=a.groupingParameters,i=a.sectionCount,r=a.sectionFilters}else t=this.groupingParameters,i=this.sectionCount,r=this.sectionFilters;const s=[];for(let a=0;a<i;a++){const o=new di(e.sphericalHarmonicsDegree),l=r[a];for(let u=0;u<e.splatCount;u++)l(u)&&o.addSplat(e.splats[u]);s.push(o)}return{splatArrays:s,parameters:t}}static getStandardPartitioner(e=0,t=new ft,i=mi.BucketBlockSize,r=mi.BucketSize){const s=a=>{const o=di.OFFSET.X,l=di.OFFSET.Y,u=di.OFFSET.Z;e<=0&&(e=a.splatCount);const c=new ft,d=.5,f=v=>{v.x=Math.floor(v.x/d)*d,v.y=Math.floor(v.y/d)*d,v.z=Math.floor(v.z/d)*d};a.splats.forEach(v=>{c.set(v[o],v[l],v[u]).sub(t),f(c),v.centerDist=c.lengthSq()}),a.splats.sort((v,_)=>{let y=v.centerDist,b=_.centerDist;return y>b?1:-1});const h=[],p=[];e=Math.min(a.splatCount,e);const m=Math.ceil(a.splatCount/e);let g=0;for(let v=0;v<m;v++){let _=g;h.push(y=>y>=_&&y<_+e),p.push({blocksSize:i,bucketSize:r}),g+=e}return{sectionCount:h.length,sectionFilters:h,groupingParameters:p}};return new Iz(void 0,void 0,void 0,s)}}class dR{constructor(e,t,i,r,s,a,o){this.splatPartitioner=e,this.alphaRemovalThreshold=t,this.compressionLevel=i,this.sectionSize=r,this.sceneCenter=s?new ft().copy(s):void 0,this.blockSize=a,this.bucketSize=o}generateFromUncompressedSplatArray(e){const t=this.splatPartitioner.partitionUncompressedSplatArray(e);return mi.generateFromUncompressedSplatArrays(t.splatArrays,this.alphaRemovalThreshold,this.compressionLevel,this.sceneCenter,this.blockSize,this.bucketSize,t.parameters)}static getStandardGenerator(e=1,t=1,i=0,r=new ft,s=mi.BucketBlockSize,a=mi.BucketSize){const o=Iz.getStandardPartitioner(i,r,s,a);return new dR(o,e,t,i,r,s,a)}}const ca={Downloading:0,Processing:1,Done:2};class Dz extends Error{constructor(e){super(e)}}const Es={DirectToSplatBuffer:0,DirectToSplatArray:1,DownloadBeforeProcessing:2};function MZ(n,e){let t=0;for(let r of n)t+=r.sizeBytes;(!e||e.byteLength<t)&&(e=new ArrayBuffer(t));let i=0;for(let r of n)new Uint8Array(e,i,r.sizeBytes).set(r.data),i+=r.sizeBytes;return e}function IZ(n,e,t,i,r,s,a,o){return e?dR.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):mi.generateFromUncompressedSplatArrays([n],t,0,new ft)}class Rz{static loadFromURL(e,t,i,r,s,a,o=!0,l=0,u,c,d,f,h){let p=i?Es.DirectToSplatBuffer:Es.DirectToSplatArray;o&&(p=Es.DirectToSplatArray);const m=lr.ProgressiveLoadSectionSize,g=mi.HeaderSizeBytes+mi.SectionHeaderSizeBytes,v=1;let _,y,b,x,w=0,A=0,T=!1,C=!1,E=!1;const I=_z();let k=0,O=0,U=0,z="",L=null,G=[],H;const F=new TextDecoder,X=new vI,te=(re,ie,le)=>{const ge=re>=100;if(le&&(G.push({data:le,sizeBytes:le.byteLength,startBytes:U,endBytes:U+le.byteLength}),U+=le.byteLength),p===Es.DownloadBeforeProcessing)ge&&I.resolve(G);else{if(T){if(E&&!C){const pe=L.headerSizeBytes+L.chunkElement.storageSizeBytes;x=MZ(G,x),x.byteLength>=pe&&(fg.readElementData(L.chunkElement,x,L.headerSizeBytes),k=pe,O=pe,C=!0)}}else if(z+=F.decode(le),ja.checkTextForEndHeader(z)){const pe=ja.determineHeaderFormatFromHeaderText(z);if(pe===Kp.INRIAV1)L=X.decodeHeaderText(z),w=L.splatCount,C=!0,E=!1;else if(pe===Kp.PlayCanvasCompressed)L=fg.decodeHeaderText(z),w=L.vertexElement.count,E=!0;else{if(i)throw new Dz("PlyLoader.loadFromURL() -> Selected Ply format cannot be directly loaded.");p=Es.DownloadBeforeProcessing;return}l=Math.min(l,L.sphericalHarmonicsDegree);const ye=mi.CompressionLevels[0].SphericalHarmonicsDegrees[l],Oe=g+ye.BytesPerSplat*w;p===Es.DirectToSplatBuffer?(y=new ArrayBuffer(Oe),mi.writeHeaderToBuffer({versionMajor:mi.CurrentMajorVersion,versionMinor:mi.CurrentMinorVersion,maxSectionCount:v,sectionCount:v,maxSplatCount:w,splatCount:A,compressionLevel:0,sceneCenter:new ft},y)):H=new di(l),k=L.headerSizeBytes,O=L.headerSizeBytes,T=!0}if(T&&C){if(G.length>0&&(_=MZ(G,_),U-k>m||ge)){const ye=U-O,Oe=Math.floor(ye/L.bytesPerSplat),Be=Oe*L.bytesPerSplat,Ye=ye-Be,Ze=A+Oe,Q=O-G[0].startBytes,me=new DataView(_,Q,Be),ce=mi.CompressionLevels[0].SphericalHarmonicsDegrees[l],je=A*ce.BytesPerSplat+g;if(p===Es.DirectToSplatBuffer?E?fg.parseToUncompressedSplatBufferSection(L.chunkElement,L.vertexElement,0,Oe-1,A,me,0,y,je):X.parseToUncompressedSplatBufferSection(L,0,Oe-1,me,0,y,je,l):E?fg.parseToUncompressedSplatArraySection(L.chunkElement,L.vertexElement,0,Oe-1,A,me,0,H):X.parseToUncompressedSplatArraySection(L,0,Oe-1,me,0,H,l),A=Ze,p===Es.DirectToSplatBuffer&&(b||(mi.writeSectionHeaderToBuffer({maxSplatCount:w,splatCount:A,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0,sphericalHarmonicsDegree:l},0,y,mi.HeaderSizeBytes),b=new mi(y,!1)),b.updateLoadedCounts(1,A),r&&r(b,ge)),k+=m,O+=Be,Ye===0)G=[];else{let Fe=[],nt=0;for(let We=G.length-1;We>=0;We--){const Ke=G[We];if(nt+=Ke.sizeBytes,Fe.unshift(Ke),nt>=Ye)break}G=Fe}}ge&&(p===Es.DirectToSplatBuffer?I.resolve(b):I.resolve(H))}}t&&t(re,ie,ca.Downloading)};return t&&t(0,"0%",ca.Downloading),yz(e,te,!1,u).then(()=>(t&&t(0,"0%",ca.Processing),I.promise.then(re=>{if(t&&t(100,"100%",ca.Done),p===Es.DownloadBeforeProcessing){const ie=G.map(le=>le.data);return new Blob(ie).arrayBuffer().then(le=>Rz.loadFromFileData(le,s,a,o,l,c,d,f,h))}else return p===Es.DirectToSplatBuffer?re:zc(()=>IZ(re,o,s,a,c,d,f,h))})))}static loadFromFileData(e,t,i,r,s=0,a,o,l,u){return zc(()=>iSt.parseToUncompressedSplatArray(e,s)).then(c=>IZ(c,r,t,i,a,o,l,u))}}const Vr=class Vr{static parseToUncompressedSplatBufferSection(e,t,i,r,s,a){const o=mi.CompressionLevels[0].BytesPerCenter,l=mi.CompressionLevels[0].BytesPerScale,u=mi.CompressionLevels[0].BytesPerRotation,c=mi.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat;for(let d=e;d<=t;d++){const f=d*Vr.RowSizeBytes+r,h=new Float32Array(i,f,3),p=new Float32Array(i,f+Vr.CenterSizeBytes,3),m=new Uint8Array(i,f+Vr.CenterSizeBytes+Vr.ScaleSizeBytes,4),g=new Uint8Array(i,f+Vr.CenterSizeBytes+Vr.ScaleSizeBytes+Vr.RotationSizeBytes,4),v=new bs((g[1]-128)/128,(g[2]-128)/128,(g[3]-128)/128,(g[0]-128)/128);v.normalize();const _=d*c+a,y=new Float32Array(s,_,3),b=new Float32Array(s,_+o,3),x=new Float32Array(s,_+o+l,4),w=new Uint8Array(s,_+o+l+u,4);y[0]=h[0],y[1]=h[1],y[2]=h[2],b[0]=p[0],b[1]=p[1],b[2]=p[2],x[0]=v.w,x[1]=v.x,x[2]=v.y,x[3]=v.z,w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3]}}static parseToUncompressedSplatArraySection(e,t,i,r,s){for(let a=e;a<=t;a++){const o=a*Vr.RowSizeBytes+r,l=new Float32Array(i,o,3),u=new Float32Array(i,o+Vr.CenterSizeBytes,3),c=new Uint8Array(i,o+Vr.CenterSizeBytes+Vr.ScaleSizeBytes,4),d=new Uint8Array(i,o+Vr.CenterSizeBytes+Vr.ScaleSizeBytes+Vr.RotationSizeBytes,4),f=new bs((d[1]-128)/128,(d[2]-128)/128,(d[3]-128)/128,(d[0]-128)/128);f.normalize(),s.addSplatFromComonents(l[0],l[1],l[2],u[0],u[1],u[2],f.w,f.x,f.y,f.z,c[0],c[1],c[2],c[3])}}static parseStandardSplatToUncompressedSplatArray(e){const t=e.byteLength/Vr.RowSizeBytes,i=new di;for(let r=0;r<t;r++){const s=r*Vr.RowSizeBytes,a=new Float32Array(e,s,3),o=new Float32Array(e,s+Vr.CenterSizeBytes,3),l=new Uint8Array(e,s+Vr.CenterSizeBytes+Vr.ScaleSizeBytes,4),u=new Uint8Array(e,s+Vr.CenterSizeBytes+Vr.ScaleSizeBytes+Vr.ColorSizeBytes,4),c=new bs((u[1]-128)/128,(u[2]-128)/128,(u[3]-128)/128,(u[0]-128)/128);c.normalize(),i.addSplatFromComonents(a[0],a[1],a[2],o[0],o[1],o[2],c.w,c.x,c.y,c.z,l[0],l[1],l[2],l[3])}return i}};Cn(Vr,"RowSizeBytes",32),Cn(Vr,"CenterSizeBytes",12),Cn(Vr,"ScaleSizeBytes",12),Cn(Vr,"RotationSizeBytes",4),Cn(Vr,"ColorSizeBytes",4);let qm=Vr;function DZ(n,e,t,i,r,s,a,o){return e?dR.getStandardGenerator(t,i,r,s,a,o).generateFromUncompressedSplatArray(n):mi.generateFromUncompressedSplatArrays([n],t,0,new ft)}class Pz{static loadFromURL(e,t,i,r,s,a,o=!0,l,u,c,d,f){let h=i?Es.DirectToSplatBuffer:Es.DirectToSplatArray;o&&(h=Es.DirectToSplatArray);const p=mi.HeaderSizeBytes+mi.SectionHeaderSizeBytes,m=lr.ProgressiveLoadSectionSize,g=1;let v,_,y,b=0,x=0,w;const A=_z();let T=0,C=0,E=[];const I=(k,O,U,z)=>{const L=k>=100;if(U&&E.push(U),h===Es.DownloadBeforeProcessing){L&&A.resolve(E);return}if(!z){if(i)throw new Dz("Cannon directly load .splat because no file size info is available.");h=Es.DownloadBeforeProcessing;return}if(!v){b=z/qm.RowSizeBytes,v=new ArrayBuffer(z);const G=mi.CompressionLevels[0].SphericalHarmonicsDegrees[0].BytesPerSplat,H=p+G*b;h===Es.DirectToSplatBuffer?(_=new ArrayBuffer(H),mi.writeHeaderToBuffer({versionMajor:mi.CurrentMajorVersion,versionMinor:mi.CurrentMinorVersion,maxSectionCount:g,sectionCount:g,maxSplatCount:b,splatCount:x,compressionLevel:0,sceneCenter:new ft},_)):w=new di(0)}if(U){new Uint8Array(v,C,U.byteLength).set(new Uint8Array(U)),C+=U.byteLength;const G=C-T;if(G>m||L){const F=(L?G:m)/qm.RowSizeBytes,X=x+F;h===Es.DirectToSplatBuffer?qm.parseToUncompressedSplatBufferSection(x,X-1,v,0,_,p):qm.parseToUncompressedSplatArraySection(x,X-1,v,0,w),x=X,h===Es.DirectToSplatBuffer&&(y||(mi.writeSectionHeaderToBuffer({maxSplatCount:b,splatCount:x,bucketSize:0,bucketCount:0,bucketBlockSize:0,compressionScaleRange:0,storageSizeBytes:0,fullBucketCount:0,partiallyFilledBucketCount:0},0,_,mi.HeaderSizeBytes),y=new mi(_,!1)),y.updateLoadedCounts(1,x),r&&r(y,L)),T+=m}}L&&(h===Es.DirectToSplatBuffer?A.resolve(y):A.resolve(w)),t&&t(k,O,ca.Downloading)};return t&&t(0,"0%",ca.Downloading),yz(e,I,!1,l).then(()=>(t&&t(0,"0%",ca.Processing),A.promise.then(k=>(t&&t(100,"100%",ca.Done),h===Es.DownloadBeforeProcessing?new Blob(E).arrayBuffer().then(O=>Pz.loadFromFileData(O,s,a,o,u,c,d,f)):h===Es.DirectToSplatBuffer?k:zc(()=>DZ(k,o,s,a,u,c,d,f))))))}static loadFromFileData(e,t,i,r,s,a,o,l){return zc(()=>{const u=qm.parseStandardSplatToUncompressedSplatArray(e);return DZ(u,r,t,i,s,a,o,l)})}}const C1=class C1{static checkVersion(e){const t=mi.CurrentMajorVersion,i=mi.CurrentMinorVersion,r=mi.parseHeader(e);if(r.versionMajor===t&&r.versionMinor>=i||r.versionMajor>t)return!0;throw new Error(`KSplat version not supported: v${r.versionMajor}.${r.versionMinor}. Minimum required: v${t}.${i}`)}static loadFromURL(e,t,i,r,s){let a,o,l,u,c=!1,d=!1,f,h=[],p=!1,m=!1,g=0,v=0,_=0,y=!1,b=!1,x=!1,w=[];const A=_z(),T=()=>{!c&&!d&&g>=mi.HeaderSizeBytes&&(d=!0,new Blob(w).arrayBuffer().then(z=>{l=new ArrayBuffer(mi.HeaderSizeBytes),new Uint8Array(l).set(new Uint8Array(z,0,mi.HeaderSizeBytes)),C1.checkVersion(l),d=!1,c=!0,u=mi.parseHeader(l),window.setTimeout(()=>{I()},1)}))};let C=0;const E=()=>{C===0&&(C++,window.setTimeout(()=>{C--,k()},1))},I=()=>{const U=()=>{m=!0,new Blob(w).arrayBuffer().then(L=>{m=!1,p=!0,f=new ArrayBuffer(u.maxSectionCount*mi.SectionHeaderSizeBytes),new Uint8Array(f).set(new Uint8Array(L,mi.HeaderSizeBytes,u.maxSectionCount*mi.SectionHeaderSizeBytes)),h=mi.parseSectionHeaders(u,f,0,!1);let G=0;for(let F=0;F<u.maxSectionCount;F++)G+=h[F].storageSizeBytes;const H=mi.HeaderSizeBytes+u.maxSectionCount*mi.SectionHeaderSizeBytes+G;if(!a){a=new ArrayBuffer(H);let F=0;for(let X=0;X<w.length;X++){const te=w[X];new Uint8Array(a,F,te.byteLength).set(new Uint8Array(te)),F+=te.byteLength}}_=mi.HeaderSizeBytes+mi.SectionHeaderSizeBytes*u.maxSectionCount;for(let F=0;F<=h.length&&F<u.maxSectionCount;F++)_+=h[F].storageSizeBytes;E()})};!m&&!p&&c&&g>=mi.HeaderSizeBytes+mi.SectionHeaderSizeBytes*u.maxSectionCount&&U()},k=()=>{if(x)return;x=!0;const U=()=>{if(x=!1,p){if(b)return;if(y=g>=_,g-v>lr.ProgressiveLoadSectionSize||y){v+=lr.ProgressiveLoadSectionSize,b=v>=_,o||(o=new mi(a,!1));const L=mi.HeaderSizeBytes+mi.SectionHeaderSizeBytes*u.maxSectionCount;let G=0,H=0,F=0;for(let re=0;re<u.maxSectionCount;re++){const ie=h[re],le=G+ie.partiallyFilledBucketCount*4+ie.bucketStorageSizeBytes*ie.bucketCount,ge=L+le;if(v>=ge){H++;const pe=v-ge,Be=mi.CompressionLevels[u.compressionLevel].SphericalHarmonicsDegrees[ie.sphericalHarmonicsDegree].BytesPerSplat;let Ye=Math.floor(pe/Be);Ye=Math.min(Ye,ie.maxSplatCount),F+=Ye,o.updateLoadedCounts(H,F),o.updateSectionLoadedCounts(re,Ye)}else break;G+=ie.storageSizeBytes}r(o,b);const X=v/_*100,te=X.toFixed(2)+"%";t&&t(X,te,ca.Downloading),b?A.resolve(o):k()}}};window.setTimeout(U,lr.ProgressiveLoadSectionDelayDuration)};return yz(e,(U,z,L)=>{L&&(w.push(L),a&&new Uint8Array(a,g,L.byteLength).set(new Uint8Array(L)),g+=L.byteLength),i?(T(),I(),k()):t&&t(U,z,ca.Downloading)},!i,s).then(U=>(t&&t(0,"0%",ca.Processing),(i?A.promise:C1.loadFromFileData(U)).then(L=>(t&&t(100,"100%",ca.Done),L))))}static loadFromFileData(e){return zc(()=>(C1.checkVersion(e),new mi(e)))}};Cn(C1,"downloadFile",function(){let e;return function(t,i){const r=new Blob([t.bufferData],{type:"application/octet-stream"});e||(e=document.createElement("a"),document.body.appendChild(e)),e.download=i,e.href=URL.createObjectURL(r),e.click()}}());let sB=C1;const Bf={Splat:0,KSplat:1,Ply:2},RZ=n=>n.endsWith(".ply")?Bf.Ply:n.endsWith(".splat")?Bf.Splat:n.endsWith(".ksplat")?Bf.KSplat:null,PZ={type:"change"},kL={type:"start"},kZ={type:"end"},lM=new npe,LZ=new wp,rSt=Math.cos(70*Zhe.DEG2RAD);class uM extends fv{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new ft,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"KeyA",UP:"KeyW",RIGHT:"KeyD",BOTTOM:"KeyS"},this.mouseButtons={LEFT:My.ROTATE,MIDDLE:My.DOLLY,RIGHT:My.PAN},this.touches={ONE:Iy.ROTATE,TWO:Iy.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(q){q.addEventListener("keydown",Se),this._domElementKeyEvents=q},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Se),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,this.clearDampedRotation(),this.clearDampedPan(),i.object.updateProjectionMatrix(),i.dispatchEvent(PZ),i.update(),s=r.NONE},this.clearDampedRotation=function(){l.theta=0,l.phi=0},this.clearDampedPan=function(){c.set(0,0,0)},this.update=function(){const q=new ft,xe=new bs().setFromUnitVectors(e.up,new ft(0,1,0)),ve=xe.clone().invert(),ke=new ft,we=new bs,De=new ft,xt=2*Math.PI;return function(){xe.setFromUnitVectors(e.up,new ft(0,1,0)),ve.copy(xe).invert();const Dt=i.object.position;q.copy(Dt).sub(i.target),q.applyQuaternion(xe),o.setFromVector3(q),i.autoRotate&&s===r.NONE&&I(C()),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let dt=i.minAzimuthAngle,Mt=i.maxAzimuthAngle;isFinite(dt)&&isFinite(Mt)&&(dt<-Math.PI?dt+=xt:dt>Math.PI&&(dt-=xt),Mt<-Math.PI?Mt+=xt:Mt>Math.PI&&(Mt-=xt),dt<=Mt?o.theta=Math.max(dt,Math.min(Mt,o.theta)):o.theta=o.theta>(dt+Mt)/2?Math.max(dt,o.theta):Math.min(Mt,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(c,i.dampingFactor):i.target.add(c),i.zoomToCursor&&w||i.object.isOrthographicCamera?o.radius=F(o.radius):o.radius=F(o.radius*u),q.setFromSpherical(o),q.applyQuaternion(ve),Dt.copy(i.target).add(q),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,c.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),c.set(0,0,0));let jt=!1;if(i.zoomToCursor&&w){let Ft=null;if(i.object.isPerspectiveCamera){const Sn=q.length();Ft=F(Sn*u);const Pn=Sn-Ft;i.object.position.addScaledVector(b,Pn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Sn=new ft(x.x,x.y,0);Sn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/u)),i.object.updateProjectionMatrix(),jt=!0;const Pn=new ft(x.x,x.y,0);Pn.unproject(i.object),i.object.position.sub(Pn).add(Sn),i.object.updateMatrixWorld(),Ft=q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ft!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ft).add(i.object.position):(lM.origin.copy(i.object.position),lM.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(lM.direction))<rSt?e.lookAt(i.target):(LZ.setFromNormalAndCoplanarPoint(i.object.up,i.target),lM.intersectPlane(LZ,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/u)),i.object.updateProjectionMatrix(),jt=!0);return u=1,w=!1,jt||ke.distanceToSquared(i.object.position)>a||8*(1-we.dot(i.object.quaternion))>a||De.distanceToSquared(i.target)>0?(i.dispatchEvent(PZ),ke.copy(i.object.position),we.copy(i.object.quaternion),De.copy(i.target),jt=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Tt),i.domElement.removeEventListener("pointerdown",We),i.domElement.removeEventListener("pointercancel",it),i.domElement.removeEventListener("wheel",ne),i.domElement.removeEventListener("pointermove",Ke),i.domElement.removeEventListener("pointerup",it),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",Se),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,o=new GQ,l=new GQ;let u=1;const c=new ft,d=new oi,f=new oi,h=new oi,p=new oi,m=new oi,g=new oi,v=new oi,_=new oi,y=new oi,b=new ft,x=new oi;let w=!1;const A=[],T={};function C(){return 2*Math.PI/60/60*i.autoRotateSpeed}function E(){return Math.pow(.95,i.zoomSpeed)}function I(q){l.theta-=q}function k(q){l.phi-=q}const O=function(){const q=new ft;return function(ve,ke){q.setFromMatrixColumn(ke,0),q.multiplyScalar(-ve),c.add(q)}}(),U=function(){const q=new ft;return function(ve,ke){i.screenSpacePanning===!0?q.setFromMatrixColumn(ke,1):(q.setFromMatrixColumn(ke,0),q.crossVectors(i.object.up,q)),q.multiplyScalar(ve),c.add(q)}}(),z=function(){const q=new ft;return function(ve,ke){const we=i.domElement;if(i.object.isPerspectiveCamera){const De=i.object.position;q.copy(De).sub(i.target);let xt=q.length();xt*=Math.tan(i.object.fov/2*Math.PI/180),O(2*ve*xt/we.clientHeight,i.object.matrix),U(2*ke*xt/we.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(O(ve*(i.object.right-i.object.left)/i.object.zoom/we.clientWidth,i.object.matrix),U(ke*(i.object.top-i.object.bottom)/i.object.zoom/we.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function L(q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?u/=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function G(q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?u*=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H(q){if(!i.zoomToCursor)return;w=!0;const xe=i.domElement.getBoundingClientRect(),ve=q.clientX-xe.left,ke=q.clientY-xe.top,we=xe.width,De=xe.height;x.x=ve/we*2-1,x.y=-(ke/De)*2+1,b.set(x.x,x.y,1).unproject(e).sub(e.position).normalize()}function F(q){return Math.max(i.minDistance,Math.min(i.maxDistance,q))}function X(q){d.set(q.clientX,q.clientY)}function te(q){H(q),v.set(q.clientX,q.clientY)}function re(q){p.set(q.clientX,q.clientY)}function ie(q){f.set(q.clientX,q.clientY),h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const xe=i.domElement;I(2*Math.PI*h.x/xe.clientHeight),k(2*Math.PI*h.y/xe.clientHeight),d.copy(f),i.update()}function le(q){_.set(q.clientX,q.clientY),y.subVectors(_,v),y.y>0?L(E()):y.y<0&&G(E()),v.copy(_),i.update()}function ge(q){m.set(q.clientX,q.clientY),g.subVectors(m,p).multiplyScalar(i.panSpeed),z(g.x,g.y),p.copy(m),i.update()}function pe(q){H(q),q.deltaY<0?G(E()):q.deltaY>0&&L(E()),i.update()}function ye(q){let xe=!1;switch(q.code){case i.keys.UP:q.ctrlKey||q.metaKey||q.shiftKey?k(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(0,i.keyPanSpeed),xe=!0;break;case i.keys.BOTTOM:q.ctrlKey||q.metaKey||q.shiftKey?k(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(0,-i.keyPanSpeed),xe=!0;break;case i.keys.LEFT:q.ctrlKey||q.metaKey||q.shiftKey?I(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(i.keyPanSpeed,0),xe=!0;break;case i.keys.RIGHT:q.ctrlKey||q.metaKey||q.shiftKey?I(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):z(-i.keyPanSpeed,0),xe=!0;break}xe&&(q.preventDefault(),i.update())}function Oe(){if(A.length===1)d.set(A[0].pageX,A[0].pageY);else{const q=.5*(A[0].pageX+A[1].pageX),xe=.5*(A[0].pageY+A[1].pageY);d.set(q,xe)}}function Be(){if(A.length===1)p.set(A[0].pageX,A[0].pageY);else{const q=.5*(A[0].pageX+A[1].pageX),xe=.5*(A[0].pageY+A[1].pageY);p.set(q,xe)}}function Ye(){const q=A[0].pageX-A[1].pageX,xe=A[0].pageY-A[1].pageY,ve=Math.sqrt(q*q+xe*xe);v.set(0,ve)}function Ze(){i.enableZoom&&Ye(),i.enablePan&&Be()}function Q(){i.enableZoom&&Ye(),i.enableRotate&&Oe()}function me(q){if(A.length==1)f.set(q.pageX,q.pageY);else{const ve=vt(q),ke=.5*(q.pageX+ve.x),we=.5*(q.pageY+ve.y);f.set(ke,we)}h.subVectors(f,d).multiplyScalar(i.rotateSpeed);const xe=i.domElement;I(2*Math.PI*h.x/xe.clientHeight),k(2*Math.PI*h.y/xe.clientHeight),d.copy(f)}function ce(q){if(A.length===1)m.set(q.pageX,q.pageY);else{const xe=vt(q),ve=.5*(q.pageX+xe.x),ke=.5*(q.pageY+xe.y);m.set(ve,ke)}g.subVectors(m,p).multiplyScalar(i.panSpeed),z(g.x,g.y),p.copy(m)}function je(q){const xe=vt(q),ve=q.pageX-xe.x,ke=q.pageY-xe.y,we=Math.sqrt(ve*ve+ke*ke);_.set(0,we),y.set(0,Math.pow(_.y/v.y,i.zoomSpeed)),L(y.y),v.copy(_)}function Fe(q){i.enableZoom&&je(q),i.enablePan&&ce(q)}function nt(q){i.enableZoom&&je(q),i.enableRotate&&me(q)}function We(q){i.enabled!==!1&&(A.length===0&&(i.domElement.setPointerCapture(q.pointerId),i.domElement.addEventListener("pointermove",Ke),i.domElement.addEventListener("pointerup",it)),At(q),q.pointerType==="touch"?ze(q):be(q))}function Ke(q){i.enabled!==!1&&(q.pointerType==="touch"?Je(q):K(q))}function it(q){Re(q),A.length===0&&(i.domElement.releasePointerCapture(q.pointerId),i.domElement.removeEventListener("pointermove",Ke),i.domElement.removeEventListener("pointerup",it)),i.dispatchEvent(kZ),s=r.NONE}function be(q){let xe;switch(q.button){case 0:xe=i.mouseButtons.LEFT;break;case 1:xe=i.mouseButtons.MIDDLE;break;case 2:xe=i.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case My.DOLLY:if(i.enableZoom===!1)return;te(q),s=r.DOLLY;break;case My.ROTATE:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enablePan===!1)return;re(q),s=r.PAN}else{if(i.enableRotate===!1)return;X(q),s=r.ROTATE}break;case My.PAN:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enableRotate===!1)return;X(q),s=r.ROTATE}else{if(i.enablePan===!1)return;re(q),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(kL)}function K(q){switch(s){case r.ROTATE:if(i.enableRotate===!1)return;ie(q);break;case r.DOLLY:if(i.enableZoom===!1)return;le(q);break;case r.PAN:if(i.enablePan===!1)return;ge(q);break}}function ne(q){i.enabled===!1||i.enableZoom===!1||s!==r.NONE||(q.preventDefault(),i.dispatchEvent(kL),pe(q),i.dispatchEvent(kZ))}function Se(q){i.enabled===!1||i.enablePan===!1||ye(q)}function ze(q){switch(wt(q),A.length){case 1:switch(i.touches.ONE){case Iy.ROTATE:if(i.enableRotate===!1)return;Oe(),s=r.TOUCH_ROTATE;break;case Iy.PAN:if(i.enablePan===!1)return;Be(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case Iy.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ze(),s=r.TOUCH_DOLLY_PAN;break;case Iy.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Q(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(kL)}function Je(q){switch(wt(q),s){case r.TOUCH_ROTATE:if(i.enableRotate===!1)return;me(q),i.update();break;case r.TOUCH_PAN:if(i.enablePan===!1)return;ce(q),i.update();break;case r.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Fe(q),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;nt(q),i.update();break;default:s=r.NONE}}function Tt(q){i.enabled!==!1&&q.preventDefault()}function At(q){A.push(q)}function Re(q){delete T[q.pointerId];for(let xe=0;xe<A.length;xe++)if(A[xe].pointerId==q.pointerId){A.splice(xe,1);return}}function wt(q){let xe=T[q.pointerId];xe===void 0&&(xe=new oi,T[q.pointerId]=xe),xe.set(q.pageX,q.pageY)}function vt(q){const xe=q.pointerId===A[0].pointerId?A[1]:A[0];return T[xe.pointerId]}i.domElement.addEventListener("contextmenu",Tt),i.domElement.addEventListener("pointerdown",We),i.domElement.addEventListener("pointercancel",it),i.domElement.addEventListener("wheel",ne,{passive:!1}),this.update()}}const sSt=(n,e,t,i,r)=>{const s=performance.now();let a=n.style.display==="none"?0:parseFloat(n.style.opacity);isNaN(a)&&(a=1);const o=window.setInterval(()=>{const u=performance.now()-s;let c=Math.min(u/i,1);c>.999&&(c=1);let d;e?(d=(1-c)*a,d<1e-4&&(d=0)):d=(1-a)*c+a,d>0?(n.style.display=t,n.style.opacity=d):n.style.display="none",c>=1&&(r&&r(),window.clearInterval(o))},16);return o},aSt=500,bI=class bI{constructor(e,t){this.taskIDGen=0,this.elementID=bI.elementIDGen++,this.tasks=[],this.message=e||"Loading...",this.container=t||document.body,this.spinnerContainerOuter=document.createElement("div"),this.spinnerContainerOuter.className=`spinnerOuterContainer${this.elementID}`,this.spinnerContainerOuter.style.display="none",this.spinnerContainerPrimary=document.createElement("div"),this.spinnerContainerPrimary.className=`spinnerContainerPrimary${this.elementID}`,this.spinnerPrimary=document.createElement("div"),this.spinnerPrimary.classList.add(`spinner${this.elementID}`,`spinnerPrimary${this.elementID}`),this.messageContainerPrimary=document.createElement("div"),this.messageContainerPrimary.classList.add(`messageContainer${this.elementID}`,`messageContainerPrimary${this.elementID}`),this.messageContainerPrimary.innerHTML=this.message,this.spinnerContainerMin=document.createElement("div"),this.spinnerContainerMin.className=`spinnerContainerMin${this.elementID}`,this.spinnerMin=document.createElement("div"),this.spinnerMin.classList.add(`spinner${this.elementID}`,`spinnerMin${this.elementID}`),this.messageContainerMin=document.createElement("div"),this.messageContainerMin.classList.add(`messageContainer${this.elementID}`,`messageContainerMin${this.elementID}`),this.messageContainerMin.innerHTML=this.message,this.spinnerContainerPrimary.appendChild(this.spinnerPrimary),this.spinnerContainerPrimary.appendChild(this.messageContainerPrimary),this.spinnerContainerOuter.appendChild(this.spinnerContainerPrimary),this.spinnerContainerMin.appendChild(this.spinnerMin),this.spinnerContainerMin.appendChild(this.messageContainerMin),this.spinnerContainerOuter.appendChild(this.spinnerContainerMin);const i=document.createElement("style");i.innerHTML=`

            .spinnerOuterContainer${this.elementID} {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .messageContainer${this.elementID} {
                height: 20px;
                font-family: arial;
                font-size: 12pt;
                color: #ffffff;
                text-align: center;
                vertical-align: middle;
            }

            .spinner${this.elementID} {
                padding: 15px;
                background: #07e8d6;
                z-index:99999;
            
                aspect-ratio: 1;
                border-radius: 50%;
                --_m: 
                    conic-gradient(#0000,#000),
                    linear-gradient(#000 0 0) content-box;
                -webkit-mask: var(--_m);
                    mask: var(--_m);
                -webkit-mask-composite: source-out;
                    mask-composite: subtract;
                box-sizing: border-box;
                animation: load 1s linear infinite;
            }

            .spinnerContainerPrimary${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 10px;
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-80px, -80px);
                width: 180px;
                pointer-events: auto;
            }

            .spinnerPrimary${this.elementID} {
                width: 120px;
                margin-left: 30px;
            }

            .messageContainerPrimary${this.elementID} {
                padding-top: 15px;
            }

            .spinnerContainerMin${this.elementID} {
                z-index:99999;
                background-color: rgba(128, 128, 128, 0.75);
                border: #666666 1px solid;
                border-radius: 5px;
                padding-top: 20px;
                padding-bottom: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                display: flex;
                flex-direction: left;
                pointer-events: auto;
                min-width: 250px;
            }

            .messageContainerMin${this.elementID} {
                margin-right: 15px;
            }

            .spinnerMin${this.elementID} {
                width: 50px;
                height: 50px;
                margin-left: 15px;
                margin-right: 25px;
            }

            .messageContainerMin${this.elementID} {
                padding-top: 15px;
            }
            
            @keyframes load {
                to{transform: rotate(1turn)}
            }

        `,this.spinnerContainerOuter.appendChild(i),this.container.appendChild(this.spinnerContainerOuter),this.setMinimized(!1,!0),this.fadeTransitions=[]}addTask(e){const t={message:e,id:this.taskIDGen++};return this.tasks.push(t),this.update(),t.id}removeTask(e){let t=0;for(let i of this.tasks){if(i.id===e){this.tasks.splice(t,1);break}t++}this.update()}removeAllTasks(){this.tasks=[],this.update()}setMessageForTask(e,t){for(let i of this.tasks)if(i.id===e){i.message=t;break}this.update()}update(){this.tasks.length>0?(this.show(),this.setMessage(this.tasks[this.tasks.length-1].message)):this.hide()}show(){this.spinnerContainerOuter.style.display="block",this.visible=!0}hide(){this.spinnerContainerOuter.style.display="none",this.visible=!1}setContainer(e){this.container&&this.spinnerContainerOuter.parentElement===this.container&&this.container.removeChild(this.spinnerContainerOuter),e&&(this.container=e,this.container.appendChild(this.spinnerContainerOuter),this.spinnerContainerOuter.style.zIndex=this.container.style.zIndex+1)}setMinimized(e,t){const i=(r,s,a,o,l)=>{a?r.style.display=s?o:"none":this.fadeTransitions[l]=sSt(r,!s,o,aSt,()=>{this.fadeTransitions[l]=null})};i(this.spinnerContainerPrimary,!e,t,"block",0),i(this.spinnerContainerMin,e,t,"flex",1),this.minimized=e}setMessage(e){this.messageContainerPrimary.innerHTML=e,this.messageContainerMin.innerHTML=e}};Cn(bI,"elementIDGen",0);let aB=bI;class oSt{constructor(e){this.idGen=0,this.tasks=[],this.container=e||document.body,this.progressBarContainerOuter=document.createElement("div"),this.progressBarContainerOuter.className="progressBarOuterContainer",this.progressBarContainerOuter.style.display="none",this.progressBarBox=document.createElement("div"),this.progressBarBox.className="progressBarBox",this.progressBarBackground=document.createElement("div"),this.progressBarBackground.className="progressBarBackground",this.progressBar=document.createElement("div"),this.progressBar.className="progressBar",this.progressBarBackground.appendChild(this.progressBar),this.progressBarBox.appendChild(this.progressBarBackground),this.progressBarContainerOuter.appendChild(this.progressBarBox);const t=document.createElement("style");t.innerHTML=`

            .progressBarOuterContainer {
                width: 100%;
                height: 100%;
                margin: 0;
                top: 0;
                left: 0;
                position: absolute;
                pointer-events: none;
            }

            .progressBarBox {
                z-index:99999;
                padding: 7px 9px 5px 7px;
                background-color: rgba(190, 190, 190, 0.75);
                border: #555555 1px solid;
                border-radius: 15px;
                margin: 0;
                position: absolute;
                bottom: 50px;
                left: 50%;
                transform: translate(-50%, 0);
                width: 180px;
                height: 30px;
                pointer-events: auto;
            }

            .progressBarBackground {
                width: 100%;
                height: 25px;
                border-radius:10px;
                background-color: rgba(128, 128, 128, 0.75);
                border: #444444 1px solid;
                box-shadow: inset 0 0 10px #333333;
            }

            .progressBar {
                height: 25px;
                width: 0px;
                border-radius:10px;
                background-color: rgba(0, 200, 0, 0.75);
                box-shadow: inset 0 0 10px #003300;
            }

        `,this.progressBarContainerOuter.appendChild(t),this.container.appendChild(this.progressBarContainerOuter)}show(){this.progressBarContainerOuter.style.display="block"}hide(){this.progressBarContainerOuter.style.display="none"}setProgress(e){this.progressBar.style.width=e+"%"}setContainer(e){this.container&&this.progressBarContainerOuter.parentElement===this.container&&this.container.removeChild(this.progressBarContainerOuter),e&&(this.container=e,this.container.appendChild(this.progressBarContainerOuter),this.progressBarContainerOuter.style.zIndex=this.container.style.zIndex+1)}}class lSt{constructor(e){Cn(this,"update",function(e,t,i,r,s,a,o,l,u,c,d,f,h,p){const m=`${t.x.toFixed(5)}, ${t.y.toFixed(5)}, ${t.z.toFixed(5)}`;if(this.infoCells.cameraPosition.innerHTML!==m&&(this.infoCells.cameraPosition.innerHTML=m),i){const v=i,_=`${v.x.toFixed(5)}, ${v.y.toFixed(5)}, ${v.z.toFixed(5)}`;this.infoCells.cameraLookAt.innerHTML!==_&&(this.infoCells.cameraLookAt.innerHTML=_)}const g=`${r.x.toFixed(5)}, ${r.y.toFixed(5)}, ${r.z.toFixed(5)}`;if(this.infoCells.cameraUp.innerHTML!==g&&(this.infoCells.cameraUp.innerHTML=g),this.infoCells.orthographicCamera.innerHTML=s?"Orthographic":"Perspective",a){const v=a,_=`${v.x.toFixed(5)}, ${v.y.toFixed(5)}, ${v.z.toFixed(5)}`;this.infoCells.cursorPosition.innerHTML=_}else this.infoCells.cursorPosition.innerHTML="N/A";this.infoCells.fps.innerHTML=o,this.infoCells.renderWindow.innerHTML=`${e.x} x ${e.y}`,this.infoCells.renderSplatCount.innerHTML=`${u} splats out of ${l} (${c.toFixed(2)}%)`,this.infoCells.sortTime.innerHTML=`${d.toFixed(3)} ms`,this.infoCells.focalAdjustment.innerHTML=`${f.toFixed(3)}`,this.infoCells.splatScale.innerHTML=`${h.toFixed(3)}`,this.infoCells.pointCloudMode.innerHTML=`${p}`});this.container=e||document.body,this.infoCells={};const t=[["Camera position","cameraPosition"],["Camera look-at","cameraLookAt"],["Camera up","cameraUp"],["Camera mode","orthographicCamera"],["Cursor position","cursorPosition"],["FPS","fps"],["Rendering:","renderSplatCount"],["Sort time","sortTime"],["Render window","renderWindow"],["Focal adjustment","focalAdjustment"],["Splat scale","splatScale"],["Point cloud mode","pointCloudMode"]];this.infoPanelContainer=document.createElement("div");const i=document.createElement("style");i.innerHTML=`

            .infoPanel {
                width: 430px;
                padding: 10px;
                background-color: rgba(50, 50, 50, 0.85);
                border: #555555 2px solid;
                color: #dddddd;
                border-radius: 10px;
                z-index: 9999;
                font-family: arial;
                font-size: 11pt;
                text-align: left;
                margin: 0;
                top: 10px;
                left:10px;
                position: absolute;
                pointer-events: auto;
            }

            .info-panel-cell {
                margin-bottom: 5px;
                padding-bottom: 2px;
            }

            .label-cell {
                font-weight: bold;
                font-size: 12pt;
                width: 140px;
            }

        `,this.infoPanelContainer.append(i),this.infoPanel=document.createElement("div"),this.infoPanel.className="infoPanel";const r=document.createElement("div");r.style.display="table";for(let s of t){const a=document.createElement("div");a.style.display="table-row",a.className="info-panel-row";const o=document.createElement("div");o.style.display="table-cell",o.innerHTML=`${s[0]}: `,o.classList.add("info-panel-cell","label-cell");const l=document.createElement("div");l.style.display="table-cell",l.style.width="10px",l.innerHTML=" ",l.className="info-panel-cell";const u=document.createElement("div");u.style.display="table-cell",u.innerHTML="",u.className="info-panel-cell",this.infoCells[s[1]]=u,a.appendChild(o),a.appendChild(l),a.appendChild(u),r.appendChild(a)}this.infoPanel.appendChild(r),this.infoPanelContainer.append(this.infoPanel),this.infoPanelContainer.style.display="none",this.container.appendChild(this.infoPanelContainer),this.visible=!1}setContainer(e){this.container&&this.infoPanelContainer.parentElement===this.container&&this.container.removeChild(this.infoPanelContainer),e&&(this.container=e,this.container.appendChild(this.infoPanelContainer),this.infoPanelContainer.style.zIndex=this.container.style.zIndex+1)}show(){this.infoPanelContainer.style.display="block",this.visible=!0}hide(){this.infoPanelContainer.style.display="none",this.visible=!1}}const OZ=new ft;class uSt extends va{constructor(e=new ft(0,0,1),t=new ft(0,0,0),i=1,r=.1,s=16776960,a=i*.2,o=a*.2){super(),this.type="ArrowHelper";const l=new iT(r,r,i,32);l.translate(0,i/2,0);const u=new iT(0,o,a,32);u.translate(0,i,0),this.position.copy(t),this.line=new Hs(l,new Jg({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Hs(u,new Jg({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{OZ.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(OZ,t)}}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class D2{constructor(e){Cn(this,"updateFocusMarker",function(){const e=new ft,t=new Pi,i=new ft;return function(r,s,a){t.copy(s.matrixWorld).invert(),e.copy(r).applyMatrix4(t),e.normalize().multiplyScalar(10),e.applyMatrix4(s.matrixWorld),i.copy(s.position).sub(r);const o=i.length();this.focusMarker.position.copy(r),this.focusMarker.scale.set(o,o,o),this.focusMarker.material.uniforms.realFocusPosition.value.copy(r),this.focusMarker.material.uniforms.viewport.value.copy(a),this.focusMarker.material.uniformsNeedUpdate=!0}}());Cn(this,"positionAndOrientControlPlane",function(){const e=new bs,t=new ft(0,1,0);return function(i,r){e.setFromUnitVectors(t,r),this.controlPlane.position.copy(i),this.controlPlane.quaternion.copy(e)}}());this.threeScene=e,this.splatRenderTarget=null,this.renderTargetCopyQuad=null,this.renderTargetCopyCamera=null,this.meshCursor=null,this.focusMarker=null,this.controlPlane=null,this.debugRoot=null,this.secondaryDebugRoot=null}updateSplatRenderTargetForRenderDimensions(e,t){this.destroySplatRendertarget(),this.splatRenderTarget=new _0(e,t,{format:Yo,stencilBuffer:!1,depthBuffer:!0}),this.splatRenderTarget.depthTexture=new pz(e,t),this.splatRenderTarget.depthTexture.format=Rg,this.splatRenderTarget.depthTexture.type=ju}destroySplatRendertarget(){this.splatRenderTarget&&(this.splatRenderTarget=null)}setupRenderTargetCopyObjects(){const e={sourceColorTexture:{type:"t",value:null},sourceDepthTexture:{type:"t",value:null}},t=new du({vertexShader:`
                varying vec2 vUv;
                void main() {
                    vUv = uv;
                    gl_Position = vec4( position.xy, 0.0, 1.0 );    
                }
            `,fragmentShader:`
                #include <common>
                #include <packing>
                varying vec2 vUv;
                uniform sampler2D sourceColorTexture;
                uniform sampler2D sourceDepthTexture;
                void main() {
                    vec4 color = texture2D(sourceColorTexture, vUv);
                    float fragDepth = texture2D(sourceDepthTexture, vUv).x;
                    gl_FragDepth = fragDepth;
                    gl_FragColor = vec4(color.rgb, color.a * 2.0);
              }
            `,uniforms:e,depthWrite:!1,depthTest:!1,transparent:!0,blending:Uhe,blendSrc:Zw,blendSrcAlpha:Zw,blendDst:Jw,blendDstAlpha:Jw});t.extensions.fragDepth=!0,this.renderTargetCopyQuad=new Hs(new tb(2,2),t),this.renderTargetCopyCamera=new gz(-1,1,1,-1,0,1)}destroyRenderTargetCopyObjects(){this.renderTargetCopyQuad&&(a1(this.renderTargetCopyQuad),this.renderTargetCopyQuad=null)}setupMeshCursor(){if(!this.meshCursor){const e=new mz(.5,1.5,32),t=new Jg({color:16777215}),i=new Hs(e,t);i.rotation.set(0,0,Math.PI),i.position.set(0,1,0);const r=new Hs(e,t);r.position.set(0,-1,0);const s=new Hs(e,t);s.rotation.set(0,0,Math.PI/2),s.position.set(1,0,0);const a=new Hs(e,t);a.rotation.set(0,0,-Math.PI/2),a.position.set(-1,0,0),this.meshCursor=new va,this.meshCursor.add(i),this.meshCursor.add(r),this.meshCursor.add(s),this.meshCursor.add(a),this.meshCursor.scale.set(.1,.1,.1),this.threeScene.add(this.meshCursor),this.meshCursor.visible=!1}}destroyMeshCursor(){this.meshCursor&&(a1(this.meshCursor),this.threeScene.remove(this.meshCursor),this.meshCursor=null)}setMeshCursorVisibility(e){this.meshCursor.visible=e}getMeschCursorVisibility(){return this.meshCursor.visible}setMeshCursorPosition(e){this.meshCursor.position.copy(e)}positionAndOrientMeshCursor(e,t){this.meshCursor.position.copy(e),this.meshCursor.up.copy(t.up),this.meshCursor.lookAt(t.position)}setupFocusMarker(){if(!this.focusMarker){const e=new gI(.5,32,32),t=D2.buildFocusMarkerMaterial();t.depthTest=!1,t.depthWrite=!1,t.transparent=!0,this.focusMarker=new Hs(e,t)}}destroyFocusMarker(){this.focusMarker&&(a1(this.focusMarker),this.focusMarker=null)}setFocusMarkerVisibility(e){this.focusMarker.visible=e}setFocusMarkerOpacity(e){this.focusMarker.material.uniforms.opacity.value=e,this.focusMarker.material.uniformsNeedUpdate=!0}getFocusMarkerOpacity(){return this.focusMarker.material.uniforms.opacity.value}setupControlPlane(){if(!this.controlPlane){const e=new tb(1,1);e.rotateX(-Math.PI/2);const t=new Jg({color:16777215});t.transparent=!0,t.opacity=.6,t.depthTest=!1,t.depthWrite=!1,t.side=Vu;const i=new Hs(e,t),r=new ft(0,1,0);r.normalize();const s=new ft(0,0,0),a=.5,o=.01,l=56576,u=new uSt(r,s,a,o,l,.1,.03);this.controlPlane=new va,this.controlPlane.add(i),this.controlPlane.add(u)}}destroyControlPlane(){this.controlPlane&&(a1(this.controlPlane),this.controlPlane=null)}setControlPlaneVisibility(e){this.controlPlane.visible=e}addDebugMeshes(){this.debugRoot=this.createDebugMeshes(),this.secondaryDebugRoot=this.createSecondaryDebugMeshes(),this.threeScene.add(this.debugRoot),this.threeScene.add(this.secondaryDebugRoot)}destroyDebugMeshes(){for(let e of[this.debugRoot,this.secondaryDebugRoot])e&&(a1(e),this.threeScene.remove(e));this.debugRoot=null,this.secondaryDebugRoot=null}createDebugMeshes(e){const t=new gI(1,32,32),i=new va,r=(s,a)=>{let o=new Hs(t,D2.buildDebugMaterial(s));o.renderOrder=e,i.add(o),o.position.fromArray(a)};return r(16711680,[-50,0,0]),r(16711680,[50,0,0]),r(65280,[0,0,-50]),r(65280,[0,0,50]),r(16755200,[5,0,5]),i}createSecondaryDebugMeshes(e){const t=new Xb(3,3,3),i=new va;let r=12303291;const s=o=>{let l=new Hs(t,D2.buildDebugMaterial(r));l.renderOrder=e,i.add(l),l.position.fromArray(o)};let a=10;return s([-a,0,-a]),s([-a,0,a]),s([a,0,-a]),s([a,0,a]),i}static buildDebugMaterial(e){const t=`
            #include <common>
            varying float ndcDepth;

            void main() {
                gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position.xyz, 1.0);
                ndcDepth = gl_Position.z / gl_Position.w;
                gl_Position.x = gl_Position.x / gl_Position.w;
                gl_Position.y = gl_Position.y / gl_Position.w;
                gl_Position.z = 0.0;
                gl_Position.w = 1.0;
    
            }
        `,i=`
            #include <common>
            uniform vec3 color;
            varying float ndcDepth;
            void main() {
                gl_FragDepth = (ndcDepth + 1.0) / 2.0;
                gl_FragColor = vec4(color.rgb, 0.0);
            }
        `,r={color:{type:"v3",value:new Ir(e)}},s=new du({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!1,depthTest:!0,depthWrite:!0,side:Jd});return s.extensions.fragDepth=!0,s}static buildFocusMarkerMaterial(e){const t=`
            #include <common>

            uniform vec2 viewport;
            uniform vec3 realFocusPosition;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                float radius = 0.01;

                vec4 viewPosition = modelViewMatrix * vec4(position.xyz, 1.0);
                vec4 viewCenter = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);

                vec4 viewFocusPosition = modelViewMatrix * vec4(realFocusPosition, 1.0);

                ndcPosition = projectionMatrix * viewPosition;
                ndcPosition = ndcPosition * vec4(1.0 / ndcPosition.w);
                ndcCenter = projectionMatrix * viewCenter;
                ndcCenter = ndcCenter * vec4(1.0 / ndcCenter.w);

                ndcFocusPosition = projectionMatrix * viewFocusPosition;
                ndcFocusPosition = ndcFocusPosition * vec4(1.0 / ndcFocusPosition.w);

                gl_Position = projectionMatrix * viewPosition;

            }
        `,i=`
            #include <common>
            uniform vec3 color;
            uniform vec2 viewport;
            uniform float opacity;

            varying vec4 ndcPosition;
            varying vec4 ndcCenter;
            varying vec4 ndcFocusPosition;

            void main() {
                vec2 screenPosition = vec2(ndcPosition) * viewport;
                vec2 screenCenter = vec2(ndcCenter) * viewport;

                vec2 screenVec = screenPosition - screenCenter;

                float projectedRadius = length(screenVec);

                float lineWidth = 0.0005 * viewport.y;
                float aaRange = 0.0025 * viewport.y;
                float radius = 0.06 * viewport.y;
                float radDiff = abs(projectedRadius - radius) - lineWidth;
                float alpha = 1.0 - clamp(radDiff / 5.0, 0.0, 1.0); 

                gl_FragColor = vec4(color.rgb, alpha * opacity);
            }
        `,r={color:{type:"v3",value:new Ir(e)},realFocusPosition:{type:"v3",value:new ft},viewport:{type:"v2",value:new oi},opacity:{value:0}};return new du({uniforms:r,vertexShader:t,fragmentShader:i,transparent:!0,depthTest:!1,depthWrite:!1,side:Jd})}dispose(){this.destroyMeshCursor(),this.destroyFocusMarker(),this.destroyDebugMeshes(),this.destroyControlPlane(),this.destroyRenderTargetCopyObjects(),this.destroySplatRendertarget()}}const cSt=new ft(1,0,0),dSt=new ft(0,1,0),fSt=new ft(0,0,1);class LL{constructor(e=new ft,t=new ft){Cn(this,"intersectBox",function(){const e=new ft,t=[],i=[],r=[];return function(s,a){if(i[0]=this.origin.x,i[1]=this.origin.y,i[2]=this.origin.z,r[0]=this.direction.x,r[1]=this.direction.y,r[2]=this.direction.z,this.boxContainsPoint(s,this.origin,1e-4))return a&&(a.origin.copy(this.origin),a.normal.set(0,0,0),a.distance=-1),!0;for(let o=0;o<3;o++){if(r[o]==0)continue;const l=o==0?cSt:o==1?dSt:fSt,u=r[o]<0?s.max:s.min;let c=-Math.sign(r[o]);t[0]=o==0?u.x:o==1?u.y:u.z;let d=t[0]-i[o];if(d*c<0){const f=(o+1)%3,h=(o+2)%3;if(t[2]=r[f]/r[o]*d+i[f],t[1]=r[h]/r[o]*d+i[h],e.set(t[o],t[h],t[f]),this.boxContainsPoint(s,e,1e-4))return a&&(a.origin.copy(e),a.normal.copy(l).multiplyScalar(c),a.distance=e.sub(this.origin).length()),!0}}return!1}}());Cn(this,"intersectSphere",function(){const e=new ft;return function(t,i,r){e.copy(t).sub(this.origin);const s=e.dot(this.direction),a=s*s,l=e.dot(e)-a,u=i*i;if(l>u)return!1;const c=Math.sqrt(u-l),d=s-c,f=s+c;if(f<0)return!1;let h=d<0?f:d;return r&&(r.origin.copy(this.origin).addScaledVector(this.direction,h),r.normal.copy(r.origin).sub(t).normalize(),r.distance=h),!0}}());this.origin=new ft,this.direction=new ft,this.setParameters(e,t)}setParameters(e,t){this.origin.copy(e),this.direction.copy(t).normalize()}boxContainsPoint(e,t,i){return!(t.x<e.min.x-i||t.x>e.max.x+i||t.y<e.min.y-i||t.y>e.max.y+i||t.z<e.min.z-i||t.z>e.max.z+i)}}class kz{constructor(){this.origin=new ft,this.normal=new ft,this.distance=0,this.splatIndex=0}set(e,t,i,r){this.origin.copy(e),this.normal.copy(t),this.distance=i,this.splatIndex=r}clone(){const e=new kz;return e.origin.copy(this.origin),e.normal.copy(this.normal),e.distance=this.distance,e.splatIndex=this.splatIndex,e}}const Ff={ThreeD:0,TwoD:1};class hSt{constructor(e,t,i=!1){Cn(this,"setFromCameraAndScreenPosition",function(){const e=new oi;return function(t,i,r){if(e.x=i.x/r.x*2-1,e.y=(r.y-i.y)/r.y*2-1,t.isPerspectiveCamera)this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t;else if(t.isOrthographicCamera)this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t;else throw new Error("Raycaster::setFromCameraAndScreenPosition() -> Unsupported camera type")}}());Cn(this,"intersectSplatMesh",function(){const e=new Pi,t=new Pi,i=new Pi,r=new LL,s=new ft;return function(a,o=[]){const l=a.getSplatTree();if(l){for(let u=0;u<l.subTrees.length;u++){const c=l.subTrees[u];t.copy(a.matrixWorld),a.dynamicMode&&(a.getSceneTransform(u,i),t.multiply(i)),e.copy(t).invert(),r.origin.copy(this.ray.origin).applyMatrix4(e),r.direction.copy(this.ray.origin).add(this.ray.direction),r.direction.applyMatrix4(e).sub(r.origin).normalize();const d=[];c.rootNode&&this.castRayAtSplatTreeNode(r,l,c.rootNode,d),d.forEach(f=>{f.origin.applyMatrix4(t),f.normal.applyMatrix4(t).normalize(),f.distance=s.copy(f.origin).sub(this.ray.origin).length()}),o.push(...d)}return o.sort((u,c)=>u.distance>c.distance?1:-1),o}}}());Cn(this,"castRayAtSplatTreeNode",function(){const e=new gs,t=new ft,i=new ft,r=new bs,s=new kz,a=1e-7,o=new ft(0,0,0),l=new Pi,u=new Pi,c=new Pi,d=new Pi,f=new Pi,h=new LL;return function(p,m,g,v=[]){if(p.intersectBox(g.boundingBox)){if(g.data&&g.data.indexes&&g.data.indexes.length>0)for(let _=0;_<g.data.indexes.length;_++){const y=g.data.indexes[_],b=m.splatMesh.getSceneIndexForSplat(y);if(m.splatMesh.getScene(b).visible&&(m.splatMesh.getSplatColor(y,e),m.splatMesh.getSplatCenter(y,t),m.splatMesh.getSplatScaleAndRotation(y,i,r),!(i.x<=a||i.y<=a||m.splatMesh.splatRenderMode===Ff.ThreeD&&i.z<=a)))if(this.raycastAgainstTrueSplatEllipsoid){u.makeScale(i.x,i.y,i.z),c.makeRotationFromQuaternion(r);const w=Math.log10(e.w)*2;if(l.makeScale(w,w,w),f.copy(l).multiply(c).multiply(u),d.copy(f).invert(),h.origin.copy(p.origin).sub(t).applyMatrix4(d),h.direction.copy(p.origin).add(p.direction).sub(t),h.direction.applyMatrix4(d).sub(h.origin).normalize(),h.intersectSphere(o,1,s)){const A=s.clone();A.splatIndex=y,A.origin.applyMatrix4(f).add(t),v.push(A)}}else{let w=i.x+i.y,A=2;if(m.splatMesh.splatRenderMode===Ff.ThreeD&&(w+=i.z,A=3),w=w/A,p.intersectSphere(t,w,s)){const T=s.clone();T.splatIndex=y,v.push(T)}}}if(g.children&&g.children.length>0)for(let _ of g.children)this.castRayAtSplatTreeNode(p,m,_,v);return v}}}());this.ray=new LL(e,t),this.raycastAgainstTrueSplatEllipsoid=i}}class e_{static buildVertexShaderBase(e=!1,t=!1,i=0,r=""){let s=`
        precision highp float;
        #include <common>

        attribute uint splatIndex;
        uniform highp usampler2D centersColorsTexture;
        uniform highp sampler2D sphericalHarmonicsTexture;
        uniform highp sampler2D sphericalHarmonicsTextureR;
        uniform highp sampler2D sphericalHarmonicsTextureG;
        uniform highp sampler2D sphericalHarmonicsTextureB;

        uniform highp usampler2D sceneIndexesTexture;
        uniform vec2 sceneIndexesTextureSize;
        uniform int sceneCount;
    `;return t&&(s+=`
            uniform float sceneOpacity[${lr.MaxScenes}];
            uniform int sceneVisibility[${lr.MaxScenes}];
        `),e&&(s+=`
            uniform highp mat4 transforms[${lr.MaxScenes}];
        `),s+=`
        ${r}
        uniform vec2 focal;
        uniform float orthoZoom;
        uniform int orthographicMode;
        uniform int pointCloudModeEnabled;
        uniform float inverseFocalAdjustment;
        uniform vec2 viewport;
        uniform vec2 basisViewport;
        uniform vec2 centersColorsTextureSize;
        uniform int sphericalHarmonicsDegree;
        uniform vec2 sphericalHarmonicsTextureSize;
        uniform int sphericalHarmonics8BitMode;
        uniform int sphericalHarmonicsMultiTextureMode;
        uniform float visibleRegionRadius;
        uniform float visibleRegionFadeStartRadius;
        uniform float firstRenderTime;
        uniform float currentTime;
        uniform int fadeInComplete;
        uniform vec3 sceneCenter;
        uniform float splatScale;
        uniform float sphericalHarmonics8BitCompressionRangeMin[${lr.MaxScenes}];
        uniform float sphericalHarmonics8BitCompressionRangeMax[${lr.MaxScenes}];

        varying vec4 vColor;
        varying vec2 vUv;
        varying vec2 vPosition;

        mat3 quaternionToRotationMatrix(float x, float y, float z, float w) {
            float s = 1.0 / sqrt(w * w + x * x + y * y + z * z);
        
            return mat3(
                1. - 2. * (y * y + z * z),
                2. * (x * y + w * z),
                2. * (x * z - w * y),
                2. * (x * y - w * z),
                1. - 2. * (x * x + z * z),
                2. * (y * z + w * x),
                2. * (x * z + w * y),
                2. * (y * z - w * x),
                1. - 2. * (x * x + y * y)
            );
        }

        const float sqrt8 = sqrt(8.0);
        const float minAlpha = 1.0 / 255.0;

        const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
        const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
        const uvec4 shift4 = uvec4(0, 8, 16, 24);
        vec4 uintToRGBAVec (uint u) {
           uvec4 urgba = mask4 & u;
           urgba = urgba >> shift4;
           vec4 rgba = vec4(urgba) * encodeNorm4;
           return rgba;
        }

        vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        vec2 getDataUVF(in uint sIndex, in float stride, in uint offset, in vec2 dimensions) {
            vec2 samplerUV = vec2(0.0, 0.0);
            float d = float(uint(float(sIndex) * stride) + offset) / dimensions.x;
            samplerUV.y = float(floor(d)) / dimensions.y;
            samplerUV.x = fract(d);
            return samplerUV;
        }

        const float SH_C1 = 0.4886025119029199f;
        const float[5] SH_C2 = float[](1.0925484, -1.0925484, 0.3153916, -1.0925484, 0.5462742);

        void main () {

            uint oddOffset = splatIndex & uint(0x00000001);
            uint doubleOddOffset = oddOffset * uint(2);
            bool isEven = oddOffset == uint(0);
            uint nearestEvenIndex = splatIndex - oddOffset;
            float fOddOffset = float(oddOffset);

            uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
            vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));

            uint sceneIndex = uint(0);
            if (sceneCount > 1) {
                sceneIndex = texture(sceneIndexesTexture, getDataUV(1, 0, sceneIndexesTextureSize)).r;
            }
            `,t&&(s+=`
                float splatOpacityFromScene = sceneOpacity[sceneIndex];
                int sceneVisible = sceneVisibility[sceneIndex];
                if (splatOpacityFromScene <= 0.01 || sceneVisible == 0) {
                    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                    return;
                }
            `),e?s+=`
                mat4 transform = transforms[sceneIndex];
                mat4 transformModelViewMatrix = viewMatrix * transform;
            `:s+="mat4 transformModelViewMatrix = modelViewMatrix;",s+=`
            float sh8BitCompressionRangeMinForScene = sphericalHarmonics8BitCompressionRangeMin[sceneIndex];
            float sh8BitCompressionRangeMaxForScene = sphericalHarmonics8BitCompressionRangeMax[sceneIndex];
            float sh8BitCompressionRangeForScene = sh8BitCompressionRangeMaxForScene - sh8BitCompressionRangeMinForScene;
            float sh8BitCompressionHalfRangeForScene = sh8BitCompressionRangeForScene / 2.0;
            vec3 vec8BitSHShift = vec3(sh8BitCompressionRangeMinForScene);

            vec4 viewCenter = transformModelViewMatrix * vec4(splatCenter, 1.0);

            vec4 clipCenter = projectionMatrix * viewCenter;

            float clip = 1.2 * clipCenter.w;
            if (clipCenter.z < -clip || clipCenter.x < -clip || clipCenter.x > clip || clipCenter.y < -clip || clipCenter.y > clip) {
                gl_Position = vec4(0.0, 0.0, 2.0, 1.0);
                return;
            }

            vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

            vPosition = position.xy;
            vColor = uintToRGBAVec(sampledCenterColor.r);
        `,i>=1&&(s+=`   
            if (sphericalHarmonicsDegree >= 1) {
            `,e?s+=`
                    vec3 worldViewDir = normalize(splatCenter - vec3(inverse(transform) * vec4(cameraPosition, 1.0)));
                `:s+=`
                    vec3 worldViewDir = normalize(splatCenter - cameraPosition);
                `,s+=`
                vec3 sh1;
                vec3 sh2;
                vec3 sh3;
            `,i>=2&&(s+=`
                    vec3 sh4;
                    vec3 sh5;
                    vec3 sh6;
                    vec3 sh7;
                    vec3 sh8;
                `),i===1?s+=`
                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        vec2 shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset, sphericalHarmonicsTextureSize);
                        vec4 sampledSH0123 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(1), sphericalHarmonicsTextureSize);
                        vec4 sampledSH4567 = texture(sphericalHarmonicsTexture, shUV);
                        shUV = getDataUVF(nearestEvenIndex, 2.5, doubleOddOffset + uint(2), sphericalHarmonicsTextureSize);
                        vec4 sampledSH891011 = texture(sphericalHarmonicsTexture, shUV);
                        sh1 = vec3(sampledSH0123.rgb) * (1.0 - fOddOffset) + vec3(sampledSH0123.ba, sampledSH4567.r) * fOddOffset;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg) * (1.0 - fOddOffset) + vec3(sampledSH4567.gba) * fOddOffset;
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r) * (1.0 - fOddOffset) + vec3(sampledSH891011.rgb) * fOddOffset;
                    } else {
                        vec2 sampledSH01R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH01B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize)).rg;
                        vec2 sampledSH23B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize)).rg;
                        sh1 = vec3(sampledSH01R.rg, sampledSH23R.r);
                        sh2 = vec3(sampledSH01G.rg, sampledSH23G.r);
                        sh3 = vec3(sampledSH01B.rg, sampledSH23B.r);
                    }
                `:i===2&&(s+=`
                    vec4 sampledSH0123;
                    vec4 sampledSH4567;
                    vec4 sampledSH891011;

                    vec4 sampledSH0123R;
                    vec4 sampledSH0123G;
                    vec4 sampledSH0123B;

                    if (sphericalHarmonicsMultiTextureMode == 0) {
                        sampledSH0123 = texture(sphericalHarmonicsTexture, getDataUV(6, 0, sphericalHarmonicsTextureSize));
                        sampledSH4567 = texture(sphericalHarmonicsTexture, getDataUV(6, 1, sphericalHarmonicsTextureSize));
                        sampledSH891011 = texture(sphericalHarmonicsTexture, getDataUV(6, 2, sphericalHarmonicsTextureSize));
                        sh1 = sampledSH0123.rgb;
                        sh2 = vec3(sampledSH0123.a, sampledSH4567.rg);
                        sh3 = vec3(sampledSH4567.ba, sampledSH891011.r);
                    } else {
                        sampledSH0123R = texture(sphericalHarmonicsTextureR, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123G = texture(sphericalHarmonicsTextureG, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sampledSH0123B = texture(sphericalHarmonicsTextureB, getDataUV(2, 0, sphericalHarmonicsTextureSize));
                        sh1 = vec3(sampledSH0123R.rgb);
                        sh2 = vec3(sampledSH0123G.rgb);
                        sh3 = vec3(sampledSH0123B.rgb);
                    }
                `),s+=`
                    if (sphericalHarmonics8BitMode == 1) {
                        sh1 = sh1 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh2 = sh2 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        sh3 = sh3 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                    }
                    float x = worldViewDir.x;
                    float y = worldViewDir.y;
                    float z = worldViewDir.z;
                    vColor.rgb += SH_C1 * (-sh1 * y + sh2 * z - sh3 * x);
            `,i>=2&&(s+=`
                    if (sphericalHarmonicsDegree >= 2) {
                        float xx = x * x;
                        float yy = y * y;
                        float zz = z * z;
                        float xy = x * y;
                        float yz = y * z;
                        float xz = x * z;
                `,i===2&&(s+=`
                        if (sphericalHarmonicsMultiTextureMode == 0) {
                            vec4 sampledSH12131415 = texture(sphericalHarmonicsTexture, getDataUV(6, 3, sphericalHarmonicsTextureSize));
                            vec4 sampledSH16171819 = texture(sphericalHarmonicsTexture, getDataUV(6, 4, sphericalHarmonicsTextureSize));
                            vec4 sampledSH20212223 = texture(sphericalHarmonicsTexture, getDataUV(6, 5, sphericalHarmonicsTextureSize));
                            sh4 = sampledSH891011.gba;
                            sh5 = sampledSH12131415.rgb;
                            sh6 = vec3(sampledSH12131415.a, sampledSH16171819.rg);
                            sh7 = vec3(sampledSH16171819.ba, sampledSH20212223.r);
                            sh8 = sampledSH20212223.gba;
                        } else {
                            vec4 sampledSH4567R = texture(sphericalHarmonicsTextureR, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567G = texture(sphericalHarmonicsTextureG, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            vec4 sampledSH4567B = texture(sphericalHarmonicsTextureB, getDataUV(2, 1, sphericalHarmonicsTextureSize));
                            sh4 = vec3(sampledSH0123R.a, sampledSH4567R.rg);
                            sh5 = vec3(sampledSH4567R.ba, sampledSH0123G.a);
                            sh6 = vec3(sampledSH4567G.rgb);
                            sh7 = vec3(sampledSH4567G.a, sampledSH0123B.a, sampledSH4567B.r);
                            sh8 = vec3(sampledSH4567B.gba);
                        }
                    `),s+=`
                        if (sphericalHarmonics8BitMode == 1) {
                            sh4 = sh4 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh5 = sh5 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh6 = sh6 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh7 = sh7 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                            sh8 = sh8 * sh8BitCompressionRangeForScene + vec8BitSHShift;
                        }

                        vColor.rgb +=
                            (SH_C2[0] * xy) * sh4 +
                            (SH_C2[1] * yz) * sh5 +
                            (SH_C2[2] * (2.0 * zz - xx - yy)) * sh6 +
                            (SH_C2[3] * xz) * sh7 +
                            (SH_C2[4] * (xx - yy)) * sh8;
                    }
                `),s+=`

                vColor.rgb = clamp(vColor.rgb, vec3(0.), vec3(1.));

            }

            `),s}static getVertexShaderFadeIn(){return`
            if (fadeInComplete == 0) {
                float opacityAdjust = 1.0;
                float centerDist = length(splatCenter - sceneCenter);
                float renderTime = max(currentTime - firstRenderTime, 0.0);

                float fadeDistance = 0.75;
                float distanceLoadFadeInFactor = step(visibleRegionFadeStartRadius, centerDist);
                distanceLoadFadeInFactor = (1.0 - distanceLoadFadeInFactor) +
                                        (1.0 - clamp((centerDist - visibleRegionFadeStartRadius) / fadeDistance, 0.0, 1.0)) *
                                        distanceLoadFadeInFactor;
                opacityAdjust *= distanceLoadFadeInFactor;
                vColor.a *= opacityAdjust;
            }
        `}static getUniforms(e=!1,t=!1,i=0,r=1,s=!1){const a={sceneCenter:{type:"v3",value:new ft},fadeInComplete:{type:"i",value:0},orthographicMode:{type:"i",value:0},visibleRegionFadeStartRadius:{type:"f",value:0},visibleRegionRadius:{type:"f",value:0},currentTime:{type:"f",value:0},firstRenderTime:{type:"f",value:0},centersColorsTexture:{type:"t",value:null},sphericalHarmonicsTexture:{type:"t",value:null},sphericalHarmonicsTextureR:{type:"t",value:null},sphericalHarmonicsTextureG:{type:"t",value:null},sphericalHarmonicsTextureB:{type:"t",value:null},sphericalHarmonics8BitCompressionRangeMin:{type:"f",value:[]},sphericalHarmonics8BitCompressionRangeMax:{type:"f",value:[]},focal:{type:"v2",value:new oi},orthoZoom:{type:"f",value:1},inverseFocalAdjustment:{type:"f",value:1},viewport:{type:"v2",value:new oi},basisViewport:{type:"v2",value:new oi},debugColor:{type:"v3",value:new Ir},centersColorsTextureSize:{type:"v2",value:new oi(1024,1024)},sphericalHarmonicsDegree:{type:"i",value:i},sphericalHarmonicsTextureSize:{type:"v2",value:new oi(1024,1024)},sphericalHarmonics8BitMode:{type:"i",value:0},sphericalHarmonicsMultiTextureMode:{type:"i",value:0},splatScale:{type:"f",value:r},pointCloudModeEnabled:{type:"i",value:s?1:0},sceneIndexesTexture:{type:"t",value:null},sceneIndexesTextureSize:{type:"v2",value:new oi(1024,1024)},sceneCount:{type:"i",value:1}};for(let o=0;o<lr.MaxScenes;o++)a.sphericalHarmonics8BitCompressionRangeMin.value.push(-lr.SphericalHarmonics8BitCompressionRange/2),a.sphericalHarmonics8BitCompressionRangeMax.value.push(lr.SphericalHarmonics8BitCompressionRange/2);if(t){const o=[];for(let u=0;u<lr.MaxScenes;u++)o.push(1);a.sceneOpacity={type:"f",value:o};const l=[];for(let u=0;u<lr.MaxScenes;u++)l.push(1);a.sceneVisibility={type:"i",value:l}}if(e){const o=[];for(let l=0;l<lr.MaxScenes;l++)o.push(new Pi);a.transforms={type:"mat4",value:o}}return a}}class yI{static build(e=!1,t=!1,i=!1,r=2048,s=1,a=!1,o=0,l=.3){const u=`
            uniform vec2 covariancesTextureSize;
            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D covariancesTextureHalfFloat;
            uniform int covariancesAreHalfFloat;

            void fromCovarianceHalfFloatV4(uvec4 val, out vec4 first, out vec4 second) {
                vec2 r = unpackHalf2x16(val.r);
                vec2 g = unpackHalf2x16(val.g);
                vec2 b = unpackHalf2x16(val.b);

                first = vec4(r.x, r.y, g.x, g.y);
                second = vec4(b.x, b.y, 0.0, 0.0);
            }
        `;let c=e_.buildVertexShaderBase(e,t,o,u);c+=yI.buildVertexShaderProjection(i,t,r,l);const d=yI.buildFragmentShader(),f=e_.getUniforms(e,t,o,s,a);return f.covariancesTextureSize={type:"v2",value:new oi(1024,1024)},f.covariancesTexture={type:"t",value:null},f.covariancesTextureHalfFloat={type:"t",value:null},f.covariancesAreHalfFloat={type:"i",value:0},new du({uniforms:f,vertexShader:c,fragmentShader:d,transparent:!0,alphaTest:1,blending:qp,depthTest:!0,depthWrite:!1,side:Vu})}static buildVertexShaderProjection(e,t,i,r){let s=`

            vec4 sampledCovarianceA;
            vec4 sampledCovarianceB;
            vec3 cov3D_M11_M12_M13;
            vec3 cov3D_M22_M23_M33;
            if (covariancesAreHalfFloat == 0) {
                sampledCovarianceA = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset,
                                                                            covariancesTextureSize));
                sampledCovarianceB = texture(covariancesTexture, getDataUVF(nearestEvenIndex, 1.5, oddOffset + uint(1),
                                                                            covariancesTextureSize));

                cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rgb) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceA.ba, sampledCovarianceB.r) * fOddOffset;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg) * (1.0 - fOddOffset) +
                                    vec3(sampledCovarianceB.gba) * fOddOffset;
            } else {
                uvec4 sampledCovarianceU = texture(covariancesTextureHalfFloat, getDataUV(1, 0, covariancesTextureSize));
                fromCovarianceHalfFloatV4(sampledCovarianceU, sampledCovarianceA, sampledCovarianceB);
                cov3D_M11_M12_M13 = sampledCovarianceA.rgb;
                cov3D_M22_M23_M33 = vec3(sampledCovarianceA.a, sampledCovarianceB.rg);
            }
        
            // Construct the 3D covariance matrix
            mat3 Vrk = mat3(
                cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
            );

            mat3 J;
            if (orthographicMode == 1) {
                // Since the projection is linear, we don't need an approximation
                J = transpose(mat3(orthoZoom, 0.0, 0.0,
                                0.0, orthoZoom, 0.0,
                                0.0, 0.0, 0.0));
            } else {
                // Construct the Jacobian of the affine approximation of the projection matrix. It will be used to transform the
                // 3D covariance matrix instead of using the actual projection matrix because that transformation would
                // require a non-linear component (perspective division) which would yield a non-gaussian result.
                float s = 1.0 / (viewCenter.z * viewCenter.z);
                J = mat3(
                    focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
                    0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
                    0., 0., 0.
                );
            }

            // Concatenate the projection approximation with the model-view transformation
            mat3 W = transpose(mat3(transformModelViewMatrix));
            mat3 T = W * J;

            // Transform the 3D covariance matrix (Vrk) to compute the 2D covariance matrix
            mat3 cov2Dm = transpose(T) * Vrk * T;
            `;return e?s+=`
                float detOrig = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
                float detBlur = cov2Dm[0][0] * cov2Dm[1][1] - cov2Dm[0][1] * cov2Dm[0][1];
                vColor.a *= sqrt(max(detOrig / detBlur, 0.0));
                if (vColor.a < minAlpha) return;
            `:s+=`
                cov2Dm[0][0] += ${r};
                cov2Dm[1][1] += ${r};
            `,s+=`

            // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
            // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
            // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
            // need cov2Dm[1][0] because it is a symetric matrix.
            vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

            // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
            // so that we can determine the 2D basis for the splat. This is done using the method described
            // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
            // After calculating the eigen-values and eigen-vectors, we calculate the basis for rendering the splat
            // by normalizing the eigen-vectors and then multiplying them by (sqrt(8) * sqrt(eigen-value)), which is
            // equal to scaling them by sqrt(8) standard deviations.
            //
            // This is a different approach than in the original work at INRIA. In that work they compute the
            // max extents of the projected splat in screen space to form a screen-space aligned bounding rectangle
            // which forms the geometry that is actually rasterized. The dimensions of that bounding box are 3.0
            // times the square root of the maximum eigen-value, or 3 standard deviations. They then use the inverse
            // 2D covariance matrix (called 'conic') in the CUDA rendering thread to determine fragment opacity by
            // calculating the full gaussian: exp(-0.5 * (X - mean) * conic * (X - mean)) * splat opacity
            float a = cov2Dv.x;
            float d = cov2Dv.z;
            float b = cov2Dv.y;
            float D = a * d - b * b;
            float trace = a + d;
            float traceOver2 = 0.5 * trace;
            float term2 = sqrt(max(0.1f, traceOver2 * traceOver2 - D));
            float eigenValue1 = traceOver2 + term2;
            float eigenValue2 = traceOver2 - term2;

            if (pointCloudModeEnabled == 1) {
                eigenValue1 = eigenValue2 = 0.2;
            }

            if (eigenValue2 <= 0.0) return;

            vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
            // since the eigen vectors are orthogonal, we derive the second one from the first
            vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);

            // We use sqrt(8) standard deviations instead of 3 to eliminate more of the splat with a very low opacity.
            vec2 basisVector1 = eigenVector1 * splatScale * min(sqrt8 * sqrt(eigenValue1), ${parseInt(i)}.0);
            vec2 basisVector2 = eigenVector2 * splatScale * min(sqrt8 * sqrt(eigenValue2), ${parseInt(i)}.0);
            `,t&&(s+=`
                vColor.a *= splatOpacityFromScene;
            `),s+=`
            vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) *
                             basisViewport * 2.0 * inverseFocalAdjustment;

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            // Scale the position data we send to the fragment shader
            vPosition *= sqrt8;
        `,s+=e_.getVertexShaderFadeIn(),s+="}",s}static buildFragmentShader(){let e=`
            precision highp float;
            #include <common>
 
            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
        `;return e+=`
            void main () {
                // Compute the positional squared distance from the center of the splat to the current fragment.
                float A = dot(vPosition, vPosition);
                // Since the positional data in vPosition has been scaled by sqrt(8), the squared result will be
                // scaled by a factor of 8. If the squared result is larger than 8, it means it is outside the ellipse
                // defined by the rectangle formed by vPosition. It also means it's farther
                // away than sqrt(8) standard deviations from the mean.
                if (A > 8.0) discard;
                vec3 color = vColor.rgb;

                // Since the rendered splat is scaled by sqrt(8), the inverse covariance matrix that is part of
                // the gaussian formula becomes the identity matrix. We're then left with (X - mean) * (X - mean),
                // and since 'mean' is zero, we have X * X, which is the same as A:
                float opacity = exp(-0.5 * A) * vColor.a;

                gl_FragColor = vec4(color.rgb, opacity);
            }
        `,e}}class _I{static build(e=!1,t=!1,i=1,r=!1,s=0){const a=`
            uniform vec2 scaleRotationsTextureSize;
            uniform highp sampler2D scaleRotationsTexture;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;
        `;let o=e_.buildVertexShaderBase(e,t,s,a);o+=_I.buildVertexShaderProjection();const l=_I.buildFragmentShader(),u=e_.getUniforms(e,t,s,i,r);return u.scaleRotationsTexture={type:"t",value:null},u.scaleRotationsTextureSize={type:"v2",value:new oi(1024,1024)},new du({uniforms:u,vertexShader:o,fragmentShader:l,transparent:!0,alphaTest:1,blending:qp,depthTest:!0,depthWrite:!1,side:Vu})}static buildVertexShaderProjection(){let e=`

            vec4 scaleRotationA = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset, scaleRotationsTextureSize));
            vec4 scaleRotationB = texture(scaleRotationsTexture, getDataUVF(nearestEvenIndex, 1.5,
                                                                            oddOffset + uint(1), scaleRotationsTextureSize));

            vec3 scaleRotation123 = vec3(scaleRotationA.rgb) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationA.ba, scaleRotationB.r) * fOddOffset;
            vec3 scaleRotation456 = vec3(scaleRotationA.a, scaleRotationB.rg) * (1.0 - fOddOffset) +
                                    vec3(scaleRotationB.gba) * fOddOffset;

            float missingW = sqrt(1.0 - scaleRotation456.x * scaleRotation456.x - scaleRotation456.y *
                                    scaleRotation456.y - scaleRotation456.z * scaleRotation456.z);
            mat3 R = quaternionToRotationMatrix(scaleRotation456.r, scaleRotation456.g, scaleRotation456.b, missingW);
            mat3 S = mat3(scaleRotation123.r, 0.0, 0.0,
                            0.0, scaleRotation123.g, 0.0,
                            0.0, 0.0, scaleRotation123.b);
            
            mat3 L = R * S;

            mat3x4 splat2World = mat3x4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

            mat4 world2ndc = transpose(projectionMatrix * transformModelViewMatrix);

            mat3x4 ndc2pix = mat3x4(vec4(viewport.x / 2.0, 0.0, 0.0, (viewport.x - 1.0) / 2.0),
                                    vec4(0.0, viewport.y / 2.0, 0.0, (viewport.y - 1.0) / 2.0),
                                    vec4(0.0, 0.0, 0.0, 1.0));

            mat3 T = transpose(splat2World) * world2ndc * ndc2pix;
            vec3 normal = vec3(viewMatrix * vec4(L[0][2], L[1][2], L[2][2], 0.0));
        `;return e+=`

                mat4 splat2World4 = mat4(vec4(L[0], 0.0),
                                        vec4(L[1], 0.0),
                                        vec4(L[2], 0.0),
                                        vec4(splatCenter.x, splatCenter.y, splatCenter.z, 1.0));

                mat4 Tt = transpose(transpose(splat2World4) * world2ndc);

                vec4 tempPoint1 = Tt * vec4(1.0, 0.0, 0.0, 1.0);
                tempPoint1 /= tempPoint1.w;

                vec4 tempPoint2 = Tt * vec4(0.0, 1.0, 0.0, 1.0);
                tempPoint2 /= tempPoint2.w;

                vec4 center = Tt * vec4(0.0, 0.0, 0.0, 1.0);
                center /= center.w;

                vec2 basisVector1 = tempPoint1.xy - center.xy;
                vec2 basisVector2 = tempPoint2.xy - center.xy;

                vec2 basisVector1Screen = basisVector1 * 0.5 * viewport;
                vec2 basisVector2Screen = basisVector2 * 0.5 * viewport;

                const float minPix = 1.;
                if (length(basisVector1Screen) < minPix || length(basisVector2Screen) < minPix) {
                    
            vec3 T0 = vec3(T[0][0], T[0][1], T[0][2]);
            vec3 T1 = vec3(T[1][0], T[1][1], T[1][2]);
            vec3 T3 = vec3(T[2][0], T[2][1], T[2][2]);

            vec3 tempPoint = vec3(1.0, 1.0, -1.0);
            float distance = (T3.x * T3.x * tempPoint.x) + (T3.y * T3.y * tempPoint.y) + (T3.z * T3.z * tempPoint.z);
            vec3 f = (1.0 / distance) * tempPoint;
            if (abs(distance) < 0.00001) return;

            float pointImageX = (T0.x * T3.x * f.x) + (T0.y * T3.y * f.y) + (T0.z * T3.z * f.z);
            float pointImageY = (T1.x * T3.x * f.x) + (T1.y * T3.y * f.y) + (T1.z * T3.z * f.z);
            vec2 pointImage = vec2(pointImageX, pointImageY);

            float tempX = (T0.x * T0.x * f.x) + (T0.y * T0.y * f.y) + (T0.z * T0.z * f.z);
            float tempY = (T1.x * T1.x * f.x) + (T1.y * T1.y * f.y) + (T1.z * T1.z * f.z);
            vec2 temp = vec2(tempX, tempY);

            vec2 halfExtend = pointImage * pointImage - temp;
            vec2 extent = sqrt(max(vec2(0.0001), halfExtend));
            float radius = max(extent.x, extent.y);

            vec2 ndcOffset = ((position.xy * radius * 3.0) * basisViewport * 2.0);

            vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            gl_Position = quadPos;

            vT = T;
            vQuadCenter = pointImage;
            vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
        
                } else {
                    vec2 ndcOffset = vec2(position.x * basisVector1 + position.y * basisVector2) * 3.0 * inverseFocalAdjustment;
                    vec4 quadPos = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
                    gl_Position = quadPos;

                    vT = T;
                    vQuadCenter = center.xy;
                    vFragCoord = (quadPos.xy * 0.5 + 0.5) * viewport;
                }
            `,e+=e_.getVertexShaderFadeIn(),e+="}",e}static buildFragmentShader(){return`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;
            varying vec2 vPosition;
            varying mat3 vT;
            varying vec2 vQuadCenter;
            varying vec2 vFragCoord;

            void main () {

                const float FilterInvSquare = 2.0;
                const float near_n = 0.2;
                const float T = 1.0;

                vec2 xy = vQuadCenter;
                vec3 Tu = vT[0];
                vec3 Tv = vT[1];
                vec3 Tw = vT[2];
                vec3 k = vFragCoord.x * Tw - Tu;
                vec3 l = vFragCoord.y * Tw - Tv;
                vec3 p = cross(k, l);
                if (p.z == 0.0) discard;
                vec2 s = vec2(p.x / p.z, p.y / p.z);
                float rho3d = (s.x * s.x + s.y * s.y); 
                vec2 d = vec2(xy.x - vFragCoord.x, xy.y - vFragCoord.y);
                float rho2d = FilterInvSquare * (d.x * d.x + d.y * d.y); 

                // compute intersection and depth
                float rho = min(rho3d, rho2d);
                float depth = (rho3d <= rho2d) ? (s.x * Tw.x + s.y * Tw.y) + Tw.z : Tw.z; 
                if (depth < near_n) discard;
                //  vec4 nor_o = collected_normal_opacity[j];
                //  float normal[3] = {nor_o.x, nor_o.y, nor_o.z};
                float opa = vColor.a;

                float power = -0.5f * rho;
                if (power > 0.0f) discard;

                // Eq. (2) from 3D Gaussian splatting paper.
                // Obtain alpha by multiplying with Gaussian opacity
                // and its exponential falloff from mean.
                // Avoid numerical instabilities (see paper appendix). 
                float alpha = min(0.99f, opa * exp(power));
                if (alpha < 1.0f / 255.0f) discard;
                float test_T = T * (1.0 - alpha);
                if (test_T < 0.0001)discard;

                float w = alpha * T;
                gl_FragColor = vec4(vColor.rgb, w);
            }
        `}}class pSt{static build(e){const t=new mc;t.setIndex([0,1,2,0,2,3]);const i=new Float32Array(4*3),r=new ec(i,3);t.setAttribute("position",r),r.setXYZ(0,-1,-1,0),r.setXYZ(1,-1,1,0),r.setXYZ(2,1,1,0),r.setXYZ(3,1,-1,0),r.needsUpdate=!0;const s=new Ogt().copy(t),a=new Uint32Array(e),o=new Dgt(a,1,!1);return o.setUsage(Bmt),s.setAttribute("splatIndex",o),s.instanceCount=0,s}}class mSt extends va{constructor(e,t=new ft,i=new bs,r=new ft(1,1,1),s=1,a=1,o=!0){super(),this.splatBuffer=e,this.position.copy(t),this.quaternion.copy(i),this.scale.copy(r),this.transform=new Pi,this.minimumAlpha=s,this.opacity=a,this.visible=o}copyTransformData(e){this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.transform.copy(e.transform)}updateTransform(e){e?(this.matrixWorldAutoUpdate&&this.updateWorldMatrix(!0,!1),this.transform.copy(this.matrixWorld)):(this.matrixAutoUpdate&&this.updateMatrix(),this.transform.copy(this.matrix))}}const SI=class SI{constructor(e,t,i,r){this.min=new ft().copy(e),this.max=new ft().copy(t),this.boundingBox=new Ld(this.min,this.max),this.center=new ft().copy(this.max).sub(this.min).multiplyScalar(.5).add(this.min),this.depth=i,this.children=[],this.data=null,this.id=r||SI.idGen++}};Cn(SI,"idGen",0);let oB=SI;class R2{constructor(e,t){this.maxDepth=e,this.maxCentersPerNode=t,this.sceneDimensions=new ft,this.sceneMin=new ft,this.sceneMax=new ft,this.rootNode=null,this.nodesWithIndexes=[],this.splatMesh=null}static convertWorkerSubTreeNode(e){const t=new ft().fromArray(e.min),i=new ft().fromArray(e.max),r=new oB(t,i,e.depth,e.id);if(e.data.indexes){r.data={indexes:[]};for(let s of e.data.indexes)r.data.indexes.push(s)}if(e.children)for(let s of e.children)r.children.push(R2.convertWorkerSubTreeNode(s));return r}static convertWorkerSubTree(e,t){const i=new R2(e.maxDepth,e.maxCentersPerNode);i.sceneMin=new ft().fromArray(e.sceneMin),i.sceneMax=new ft().fromArray(e.sceneMax),i.splatMesh=t,i.rootNode=R2.convertWorkerSubTreeNode(e.rootNode);const r=(s,a)=>{s.children.length===0&&a(s);for(let o of s.children)r(o,a)};return i.nodesWithIndexes=[],r(i.rootNode,s=>{s.data&&s.data.indexes&&s.data.indexes.length>0&&i.nodesWithIndexes.push(s)}),i}}function gSt(n){let e=0;class t{constructor(l,u){this.min=[l[0],l[1],l[2]],this.max=[u[0],u[1],u[2]]}containsPoint(l){return l[0]>=this.min[0]&&l[0]<=this.max[0]&&l[1]>=this.min[1]&&l[1]<=this.max[1]&&l[2]>=this.min[2]&&l[2]<=this.max[2]}}class i{constructor(l,u){this.maxDepth=l,this.maxCentersPerNode=u,this.sceneDimensions=[],this.sceneMin=[],this.sceneMax=[],this.rootNode=null,this.addedIndexes={},this.nodesWithIndexes=[],this.splatMesh=null,this.disposed=!1}}class r{constructor(l,u,c,d){this.min=[l[0],l[1],l[2]],this.max=[u[0],u[1],u[2]],this.center=[(u[0]-l[0])*.5+l[0],(u[1]-l[1])*.5+l[1],(u[2]-l[2])*.5+l[2]],this.depth=c,this.children=[],this.data=null,this.id=d||e++}}processSplatTreeNode=function(o,l,u,c){const d=l.data.indexes.length;if(d<o.maxCentersPerNode||l.depth>o.maxDepth){const _=[];for(let y=0;y<l.data.indexes.length;y++)o.addedIndexes[l.data.indexes[y]]||(_.push(l.data.indexes[y]),o.addedIndexes[l.data.indexes[y]]=!0);l.data.indexes=_,l.data.indexes.sort((y,b)=>y>b?1:-1),o.nodesWithIndexes.push(l);return}const f=[l.max[0]-l.min[0],l.max[1]-l.min[1],l.max[2]-l.min[2]],h=[f[0]*.5,f[1]*.5,f[2]*.5],p=[l.min[0]+h[0],l.min[1]+h[1],l.min[2]+h[2]],m=[new t([p[0]-h[0],p[1],p[2]-h[2]],[p[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]-h[2]],[p[0]+h[0],p[1]+h[1],p[2]]),new t([p[0],p[1],p[2]],[p[0]+h[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1],p[2]],[p[0],p[1]+h[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]-h[2]],[p[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]-h[2]],[p[0]+h[0],p[1],p[2]]),new t([p[0],p[1]-h[1],p[2]],[p[0]+h[0],p[1],p[2]+h[2]]),new t([p[0]-h[0],p[1]-h[1],p[2]],[p[0],p[1],p[2]+h[2]])],g=[];for(let _=0;_<m.length;_++)g[_]=[];const v=[0,0,0];for(let _=0;_<d;_++){const y=l.data.indexes[_],b=u[y];v[0]=c[b],v[1]=c[b+1],v[2]=c[b+2];for(let x=0;x<m.length;x++)m[x].containsPoint(v)&&g[x].push(y)}for(let _=0;_<m.length;_++){const y=new r(m[_].min,m[_].max,l.depth+1);y.data={indexes:g[_]},l.children.push(y)}l.data={};for(let _ of l.children)processSplatTreeNode(o,_,u,c)};const s=(o,l,u)=>{const c=[0,0,0],d=[0,0,0],f=[],h=Math.floor(o.length/4);for(let m=0;m<h;m++){const g=m*4,v=o[g],_=o[g+1],y=o[g+2],b=Math.round(o[g+3]);(m===0||v<c[0])&&(c[0]=v),(m===0||v>d[0])&&(d[0]=v),(m===0||_<c[1])&&(c[1]=_),(m===0||_>d[1])&&(d[1]=_),(m===0||y<c[2])&&(c[2]=y),(m===0||y>d[2])&&(d[2]=y),f.push(b)}const p=new i(l,u);return p.sceneMin=c,p.sceneMax=d,p.rootNode=new r(p.sceneMin,p.sceneMax,0),p.rootNode.data={indexes:f},p};function a(o,l,u){const c=[];for(let f of o){const h=Math.floor(f.length/4);for(let p=0;p<h;p++){const m=p*4,g=Math.round(f[m+3]);c[g]=m}}const d=[];for(let f of o){const h=s(f,l,u);d.push(h),processSplatTreeNode(h,h.rootNode,c,f)}n.postMessage({subTrees:d})}n.onmessage=o=>{o.data.process&&a(o.data.process.centers,o.data.process.maxDepth,o.data.process.maxCentersPerNode)}}function vSt(n,e,t,i,r){n.postMessage({process:{centers:e,maxDepth:i,maxCentersPerNode:r}},t)}function ySt(){return new Worker(URL.createObjectURL(new Blob(["(",gSt.toString(),")(self)"],{type:"application/javascript"})))}class _St{constructor(e,t){Cn(this,"processSplatMesh",function(e,t=()=>!0,i,r){this.splatTreeWorker||(this.splatTreeWorker=ySt()),this.splatMesh=e,this.subTrees=[];const s=new ft,a=(o,l)=>{const u=new Float32Array(l*4);let c=0;for(let d=0;d<l;d++){const f=d+o;if(t(f)){e.getSplatCenter(f,s);const h=c*4;u[h]=s.x,u[h+1]=s.y,u[h+2]=s.z,u[h+3]=f,c++}}return u};return new Promise(o=>{const l=()=>this.disposed?(this.diposeSplatTreeWorker(),o(),!0):!1;i&&i(!1),zc(()=>{if(l())return;const u=[];if(e.dynamicMode){let c=0;for(let d=0;d<e.scenes.length;d++){const h=e.getScene(d).splatBuffer.getSplatCount(),p=a(c,h);u.push(p),c+=h}}else{const c=a(0,e.getSplatCount());u.push(c)}this.splatTreeWorker.onmessage=c=>{l()||c.data.subTrees&&(r&&r(!1),zc(()=>{if(!l()){for(let d of c.data.subTrees){const f=R2.convertWorkerSubTree(d,e);this.subTrees.push(f)}this.diposeSplatTreeWorker(),r&&r(!0),zc(()=>{o()})}}))},zc(()=>{if(l())return;i&&i(!0);const c=u.map(d=>d.buffer);vSt(this.splatTreeWorker,u,c,this.maxDepth,this.maxCentersPerNode)})})})});this.maxDepth=e,this.maxCentersPerNode=t,this.subTrees=[],this.splatMesh=null}dispose(){this.diposeSplatTreeWorker(),this.disposed=!0}diposeSplatTreeWorker(){this.splatTreeWorker&&this.splatTreeWorker.terminate(),this.splatTreeWorker=null}countLeaves(){let e=0;return this.visitLeaves(()=>{e++}),e}visitLeaves(e){const t=(i,r)=>{i.children.length===0&&r(i);for(let s of i.children)t(s,r)};for(let i of this.subTrees)t(i.rootNode,e)}}function bSt(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function SSt(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=n.getParameter(n.MAX_TEXTURE_SIZE),p=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),m=n.getParameter(n.MAX_VERTEX_ATTRIBS),g=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),_=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),y=f>0,b=a||e.has("OES_texture_float"),x=y&&b,w=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:p,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:_,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}const P2={Default:0,Gradual:1,Instant:2},t_={None:0,Error:1,Warning:2,Info:3,Debug:4},NZ=new mc,xSt=new Jg,cM=6,wSt=4,TSt=4,CSt=4,ASt=6,ESt=8,OL=4,NL=4,BZ=1,MSt=.012,ISt=.003,FZ=1,UZ=16777216;class Va extends Hs{constructor(t=Ff.ThreeD,i=!1,r=!1,s=!1,a=1,o=!0,l=!1,u=!1,c=1024,d=t_.None,f=0,h=1,p=.3){super(NZ,xSt);Cn(this,"buildSplatTree",function(t=[],i,r){return new Promise(s=>{this.disposeSplatTree(),this.baseSplatTree=new _St(8,1e3);const a=performance.now(),o=new gs;this.baseSplatTree.processSplatMesh(this,l=>{this.getSplatColor(l,o);const u=this.getSceneIndexForSplat(l),c=t[u]||1;return o.w>=c},i,r).then(()=>{const l=performance.now()-a;if(this.logLevel>=t_.Info&&console.log("SplatTree build: "+l+" ms"),this.disposed)s();else{this.splatTree=this.baseSplatTree,this.baseSplatTree=null;let u=0,c=0,d=0;this.splatTree.visitLeaves(f=>{const h=f.data.indexes.length;h>0&&(c+=h,d++,u++)}),this.logLevel>=t_.Info&&(console.log(`SplatTree leaves: ${this.splatTree.countLeaves()}`),console.log(`SplatTree leaves with splats:${u}`),c=c/d,console.log(`Avg splat count per node: ${c}`),console.log(`Total splat count: ${this.getSplatCount()}`)),s()}})})});Cn(this,"updateUniforms",function(){const t=new oi;return function(i,r,s,a,o,l){if(this.getSplatCount()>0){if(t.set(i.x*this.devicePixelRatio,i.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(t),this.material.uniforms.basisViewport.value.set(1/t.x,1/t.y),this.material.uniforms.focal.value.set(r,s),this.material.uniforms.orthographicMode.value=a?1:0,this.material.uniforms.orthoZoom.value=o,this.material.uniforms.inverseFocalAdjustment.value=l,this.dynamicMode)for(let c=0;c<this.scenes.length;c++)this.material.uniforms.transforms.value[c].copy(this.getScene(c).transform);if(this.enableOptionalEffects)for(let c=0;c<this.scenes.length;c++)this.material.uniforms.sceneOpacity.value[c]=Ya(this.getScene(c).opacity,0,1),this.material.uniforms.sceneVisibility.value[c]=this.getScene(c).visible?1:0,this.material.uniformsNeedUpdate=!0;this.material.uniformsNeedUpdate=!0}}}());Cn(this,"setupDistancesComputationTransformFeedback",function(){let t;return function(){const i=this.getMaxSplatCount();if(!this.renderer)return;const r=this.lastRenderer!==this.renderer,s=t!==i;if(!r&&!s)return;r?this.disposeDistancesComputationGPUResources():s&&this.disposeDistancesComputationGPUBufferResources();const a=this.renderer.getContext(),o=(h,p,m)=>{const g=h.createShader(p);if(!g)return console.error("Fatal error: gl could not create a shader object."),null;if(h.shaderSource(g,m),h.compileShader(g),!h.getShaderParameter(g,h.COMPILE_STATUS)){let _="unknown";p===h.VERTEX_SHADER?_="vertex shader":p===h.FRAGMENT_SHADER&&(_="fragement shader");const y=h.getShaderInfoLog(g);return console.error("Failed to compile "+_+" with these errors:"+y),h.deleteShader(g),null}return g};let l;this.integerBasedDistancesComputation?(l=`#version 300 es
                in ivec4 center;
                flat out int distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform ivec4 transforms[${lr.MaxScenes}];
                        void main(void) {
                            ivec4 transform = transforms[sceneIndex];
                            distance = center.x * transform.x + center.y * transform.y + center.z * transform.z + transform.w * center.w;
                        }
                    `:l+=`
                        uniform ivec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `):(l=`#version 300 es
                in vec4 center;
                flat out float distance;`,this.dynamicMode?l+=`
                        in uint sceneIndex;
                        uniform mat4 transforms[${lr.MaxScenes}];
                        void main(void) {
                            vec4 transformedCenter = transforms[sceneIndex] * vec4(center.xyz, 1.0);
                            distance = transformedCenter.z;
                        }
                    `:l+=`
                        uniform vec3 modelViewProj;
                        void main(void) {
                            distance = center.x * modelViewProj.x + center.y * modelViewProj.y + center.z * modelViewProj.z;
                        }
                    `);const u=`#version 300 es
                precision lowp float;
                out vec4 fragColor;
                void main(){}
            `,c=a.getParameter(a.VERTEX_ARRAY_BINDING),d=a.getParameter(a.CURRENT_PROGRAM),f=d?a.getProgramParameter(d,a.DELETE_STATUS):!1;if(r&&(this.distancesTransformFeedback.vao=a.createVertexArray()),a.bindVertexArray(this.distancesTransformFeedback.vao),r){const h=a.createProgram(),p=o(a,a.VERTEX_SHADER,l),m=o(a,a.FRAGMENT_SHADER,u);if(!p||!m)throw new Error("Could not compile shaders for distances computation on GPU.");if(a.attachShader(h,p),a.attachShader(h,m),a.transformFeedbackVaryings(h,["distance"],a.SEPARATE_ATTRIBS),a.linkProgram(h),!a.getProgramParameter(h,a.LINK_STATUS)){const v=a.getProgramInfoLog(h);throw console.error("Fatal error: Failed to link program: "+v),a.deleteProgram(h),a.deleteShader(m),a.deleteShader(p),new Error("Could not link shaders for distances computation on GPU.")}this.distancesTransformFeedback.program=h,this.distancesTransformFeedback.vertexShader=p,this.distancesTransformFeedback.vertexShader=m}if(a.useProgram(this.distancesTransformFeedback.program),this.distancesTransformFeedback.centersLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"center"),this.dynamicMode){this.distancesTransformFeedback.sceneIndexesLoc=a.getAttribLocation(this.distancesTransformFeedback.program,"sceneIndex");for(let h=0;h<this.scenes.length;h++)this.distancesTransformFeedback.transformsLocs[h]=a.getUniformLocation(this.distancesTransformFeedback.program,`transforms[${h}]`)}else this.distancesTransformFeedback.modelViewProjLoc=a.getUniformLocation(this.distancesTransformFeedback.program,"modelViewProj");(r||s)&&(this.distancesTransformFeedback.centersBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?a.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,a.INT,0,0):a.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,a.FLOAT,!1,0,0),this.dynamicMode&&(this.distancesTransformFeedback.sceneIndexesBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),a.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),a.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,a.UNSIGNED_INT,0,0))),(r||s)&&(this.distancesTransformFeedback.outDistancesBuffer=a.createBuffer()),a.bindBuffer(a.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),a.bufferData(a.ARRAY_BUFFER,i*4,a.STATIC_READ),r&&(this.distancesTransformFeedback.id=a.createTransformFeedback()),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),a.bindBufferBase(a.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),d&&f!==!0&&a.useProgram(d),c&&a.bindVertexArray(c),this.lastRenderer=this.renderer,t=i}}());Cn(this,"fillTransformsArray",function(){const t=[];return function(i){t.length!==i.length&&(t.length=i.length);for(let r=0;r<this.scenes.length;r++){const a=this.getScene(r).transform.elements;for(let o=0;o<16;o++)t[r*16+o]=a[o]}i.set(t)}}());Cn(this,"computeDistancesOnGPU",function(){const t=new Pi;return function(i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING),o=s.getParameter(s.CURRENT_PROGRAM),l=o?s.getProgramParameter(o,s.DELETE_STATUS):!1;if(s.bindVertexArray(this.distancesTransformFeedback.vao),s.useProgram(this.distancesTransformFeedback.program),s.enable(s.RASTERIZER_DISCARD),this.dynamicMode)for(let d=0;d<this.scenes.length;d++)if(t.copy(this.getScene(d).transform),t.premultiply(i),this.integerBasedDistancesComputation){const f=Va.getIntegerMatrixArray(t),h=[f[2],f[6],f[10],f[14]];s.uniform4i(this.distancesTransformFeedback.transformsLocs[d],h[0],h[1],h[2],h[3])}else s.uniformMatrix4fv(this.distancesTransformFeedback.transformsLocs[d],!1,t.elements);else if(this.integerBasedDistancesComputation){const d=Va.getIntegerMatrixArray(i),f=[d[2],d[6],d[10]];s.uniform3i(this.distancesTransformFeedback.modelViewProjLoc,f[0],f[1],f[2])}else{const d=[i.elements[2],i.elements[6],i.elements[10]];s.uniform3f(this.distancesTransformFeedback.modelViewProjLoc,d[0],d[1],d[2])}s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.centersLoc),this.integerBasedDistancesComputation?s.vertexAttribIPointer(this.distancesTransformFeedback.centersLoc,4,s.INT,0,0):s.vertexAttribPointer(this.distancesTransformFeedback.centersLoc,4,s.FLOAT,!1,0,0),this.dynamicMode&&(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),s.enableVertexAttribArray(this.distancesTransformFeedback.sceneIndexesLoc),s.vertexAttribIPointer(this.distancesTransformFeedback.sceneIndexesLoc,1,s.UNSIGNED_INT,0,0)),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,this.distancesTransformFeedback.id),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,this.distancesTransformFeedback.outDistancesBuffer),s.beginTransformFeedback(s.POINTS),s.drawArrays(s.POINTS,0,this.getSplatCount()),s.endTransformFeedback(),s.bindBufferBase(s.TRANSFORM_FEEDBACK_BUFFER,0,null),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null),s.disable(s.RASTERIZER_DISCARD);const u=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);s.flush();const c=new Promise(d=>{const f=()=>{if(this.disposed)d();else switch(s.clientWaitSync(u,0,0)){case s.TIMEOUT_EXPIRED:return this.computeDistancesOnGPUSyncTimeout=setTimeout(f),this.computeDistancesOnGPUSyncTimeout;case s.WAIT_FAILED:throw new Error("should never get here");default:this.computeDistancesOnGPUSyncTimeout=null,s.deleteSync(u);const g=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao),s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.outDistancesBuffer),s.getBufferSubData(s.ARRAY_BUFFER,0,r),s.bindBuffer(s.ARRAY_BUFFER,null),g&&s.bindVertexArray(g),d()}};this.computeDistancesOnGPUSyncTimeout=setTimeout(f)});return o&&l!==!0&&s.useProgram(o),a&&s.bindVertexArray(a),c}}());Cn(this,"getSplatCenter",function(){const t={};return function(i,r,s){this.getLocalSplatParameters(i,t,s),t.splatBuffer.getSplatCenter(t.localIndex,r,t.sceneTransform)}}());Cn(this,"getSplatScaleAndRotation",function(){const t={},i=new ft;return function(r,s,a,o){this.getLocalSplatParameters(r,t,o),i.x=void 0,i.y=void 0,i.z=void 0,this.splatRenderMode===Ff.TwoD&&(i.z=0),t.splatBuffer.getSplatScaleAndRotation(t.localIndex,s,a,t.sceneTransform,i)}}());Cn(this,"getSplatColor",function(){const t={};return function(i,r){this.getLocalSplatParameters(i,t),t.splatBuffer.getSplatColor(t.localIndex,r)}}());this.renderer=void 0,this.splatRenderMode=t,this.dynamicMode=i,this.enableOptionalEffects=r,this.halfPrecisionCovariancesOnGPU=s,this.devicePixelRatio=a,this.enableDistancesComputationOnGPU=o,this.integerBasedDistancesComputation=l,this.antialiased=u,this.kernel2DSize=p,this.maxScreenSpaceSplatSize=c,this.logLevel=d,this.sphericalHarmonicsDegree=f,this.minSphericalHarmonicsDegree=0,this.sceneFadeInRateMultiplier=h,this.scenes=[],this.splatTree=null,this.baseSplatTree=null,this.splatDataTextures={},this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Ld,this.calculatedSceneCenter=new ft,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!1,this.lastRenderer=null,this.visible=!1}static buildScenes(t,i,r){const s=[];s.length=i.length;for(let a=0;a<i.length;a++){const o=i[a],l=r[a]||{};let u=l.position||[0,0,0],c=l.rotation||[0,0,0,1],d=l.scale||[1,1,1];const f=new ft().fromArray(u),h=new bs().fromArray(c),p=new ft().fromArray(d),m=Va.createScene(o,f,h,p,l.splatAlphaRemovalThreshold||1,l.opacity,l.visible);t.add(m),s[a]=m}return s}static createScene(t,i,r,s,a,o=1,l=!0){return new mSt(t,i,r,s,a,o,l)}static buildSplatIndexMaps(t){const i=[],r=[];let s=0;for(let a=0;a<t.length;a++){const l=t[a].getMaxSplatCount();for(let u=0;u<l;u++)i[s]=u,r[s]=a,s++}return{localSplatIndexMap:i,sceneIndexMap:r}}build(t,i,r=!0,s=!1,a,o,l=!0){this.sceneOptions=i,this.finalBuild=s;const u=Va.getTotalMaxSplatCountForSplatBuffers(t),c=Va.buildScenes(this,t,i);if(r)for(let g=0;g<this.scenes.length&&g<c.length;g++){const v=c[g],_=this.getScene(g);v.copyTransformData(_)}this.scenes=c;let d=3;for(let g of t){const v=g.getMinSphericalHarmonicsDegree();v<d&&(d=v)}this.minSphericalHarmonicsDegree=Math.min(d,this.sphericalHarmonicsDegree);let f=!1;if(t.length!==this.lastBuildScenes.length)f=!0;else for(let g=0;g<t.length;g++)if(t[g]!==this.lastBuildScenes[g].splatBuffer){f=!0;break}let h=!0;if((this.scenes.length!==1||this.lastBuildSceneCount!==this.scenes.length||this.lastBuildMaxSplatCount!==u||f)&&(h=!1),!h){this.boundingBox=new Ld,l||(this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.firstRenderTime=-1),this.lastBuildScenes=[],this.lastBuildSplatCount=0,this.lastBuildMaxSplatCount=0,this.disposeMeshData(),this.geometry=pSt.build(u),this.splatRenderMode===Ff.ThreeD?this.material=yI.build(this.dynamicMode,this.enableOptionalEffects,this.antialiased,this.maxScreenSpaceSplatSize,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree,this.kernel2DSize):this.material=_I.build(this.dynamicMode,this.enableOptionalEffects,this.splatScale,this.pointCloudModeEnabled,this.minSphericalHarmonicsDegree);const g=Va.buildSplatIndexMaps(t);this.globalSplatIndexToLocalSplatIndexMap=g.localSplatIndexMap,this.globalSplatIndexToSceneIndexMap=g.sceneIndexMap}const p=this.getSplatCount(!0);this.enableDistancesComputationOnGPU&&this.setupDistancesComputationTransformFeedback();const m=this.refreshGPUDataFromSplatBuffers(h);for(let g=0;g<this.scenes.length;g++)this.lastBuildScenes[g]=this.scenes[g];return this.lastBuildSplatCount=p,this.lastBuildMaxSplatCount=this.getMaxSplatCount(),this.lastBuildSceneCount=this.scenes.length,s&&this.scenes.length>0&&this.buildSplatTree(i.map(g=>g.splatAlphaRemovalThreshold||1),a,o).then(()=>{this.onSplatTreeReadyCallback&&this.onSplatTreeReadyCallback(this.splatTree),this.onSplatTreeReadyCallback=null}),this.visible=this.scenes.length>0,m}freeIntermediateSplatData(){const t=i=>{delete i.source.data,delete i.image,i.onUpdate=null};delete this.splatDataTextures.baseData.covariances,delete this.splatDataTextures.baseData.centers,delete this.splatDataTextures.baseData.colors,delete this.splatDataTextures.baseData.sphericalHarmonics,delete this.splatDataTextures.centerColors.data,delete this.splatDataTextures.covariances.data,this.splatDataTextures.sphericalHarmonics&&delete this.splatDataTextures.sphericalHarmonics.data,this.splatDataTextures.sceneIndexes&&delete this.splatDataTextures.sceneIndexes.data,this.splatDataTextures.centerColors.texture.needsUpdate=!0,this.splatDataTextures.centerColors.texture.onUpdate=()=>{t(this.splatDataTextures.centerColors.texture)},this.splatDataTextures.covariances.texture.needsUpdate=!0,this.splatDataTextures.covariances.texture.onUpdate=()=>{t(this.splatDataTextures.covariances.texture)},this.splatDataTextures.sphericalHarmonics&&(this.splatDataTextures.sphericalHarmonics.texture?(this.splatDataTextures.sphericalHarmonics.texture.needsUpdate=!0,this.splatDataTextures.sphericalHarmonics.texture.onUpdate=()=>{t(this.splatDataTextures.sphericalHarmonics.texture)}):this.splatDataTextures.sphericalHarmonics.textures.forEach(i=>{i.needsUpdate=!0,i.onUpdate=()=>{t(i)}})),this.splatDataTextures.sceneIndexes&&(this.splatDataTextures.sceneIndexes.texture.needsUpdate=!0,this.splatDataTextures.sceneIndexes.texture.onUpdate=()=>{t(this.splatDataTextures.sceneIndexes.texture)})}dispose(){this.disposeMeshData(),this.disposeTextures(),this.disposeSplatTree(),this.enableDistancesComputationOnGPU&&(this.computeDistancesOnGPUSyncTimeout&&(clearTimeout(this.computeDistancesOnGPUSyncTimeout),this.computeDistancesOnGPUSyncTimeout=null),this.disposeDistancesComputationGPUResources()),this.scenes=[],this.distancesTransformFeedback={id:null,vertexShader:null,fragmentShader:null,program:null,centersBuffer:null,sceneIndexesBuffer:null,outDistancesBuffer:null,centersLoc:-1,modelViewProjLoc:-1,sceneIndexesLoc:-1,transformsLocs:[]},this.renderer=null,this.globalSplatIndexToLocalSplatIndexMap=[],this.globalSplatIndexToSceneIndexMap=[],this.lastBuildSplatCount=0,this.lastBuildScenes=[],this.lastBuildMaxSplatCount=0,this.lastBuildSceneCount=0,this.firstRenderTime=-1,this.finalBuild=!1,this.webGLUtils=null,this.boundingBox=new Ld,this.calculatedSceneCenter=new ft,this.maxSplatDistanceFromSceneCenter=0,this.visibleRegionBufferRadius=0,this.visibleRegionRadius=0,this.visibleRegionFadeStartRadius=0,this.visibleRegionChanging=!1,this.splatScale=1,this.pointCloudModeEnabled=!1,this.disposed=!0,this.lastRenderer=null,this.visible=!1}disposeMeshData(){this.geometry&&this.geometry!==NZ&&(this.geometry.dispose(),this.geometry=null),this.material&&(this.material.dispose(),this.material=null)}disposeTextures(){for(let t in this.splatDataTextures)if(this.splatDataTextures.hasOwnProperty(t)){const i=this.splatDataTextures[t];i.texture&&(i.texture.dispose(),i.texture=null)}this.splatDataTextures=null}disposeSplatTree(){this.splatTree&&(this.splatTree.dispose(),this.splatTree=null),this.baseSplatTree&&(this.baseSplatTree.dispose(),this.baseSplatTree=null)}getSplatTree(){return this.splatTree}onSplatTreeReady(t){this.onSplatTreeReadyCallback=t}getDataForDistancesComputation(t,i){const r=this.integerBasedDistancesComputation?this.getIntegerCenters(t,i,!0):this.getFloatCenters(t,i,!0),s=this.getSceneIndexes(t,i);return{centers:r,sceneIndexes:s}}refreshGPUDataFromSplatBuffers(t){const i=this.getSplatCount(!0);this.refreshDataTexturesFromSplatBuffers(t);const r=t?this.lastBuildSplatCount:0,{centers:s,sceneIndexes:a}=this.getDataForDistancesComputation(r,i-1);return this.enableDistancesComputationOnGPU&&this.refreshGPUBuffersForDistancesComputation(s,a,t),{from:r,to:i-1,count:i-r,centers:s,sceneIndexes:a}}refreshGPUBuffersForDistancesComputation(t,i,r=!1){const s=r?this.lastBuildSplatCount:0;this.updateGPUCentersBufferForDistancesComputation(r,t,s),this.updateGPUTransformIndexesBufferForDistancesComputation(r,i,s)}refreshDataTexturesFromSplatBuffers(t){const i=this.getSplatCount(!0),r=this.lastBuildSplatCount,s=i-1;t?this.updateBaseDataFromSplatBuffers(r,s):(this.setupDataTextures(),this.updateBaseDataFromSplatBuffers()),this.updateDataTexturesFromBaseData(r,s),this.updateVisibleRegion(t)}setupDataTextures(){const t=this.getMaxSplatCount(),i=this.getSplatCount(!0);this.disposeTextures();const r=(T,C)=>{const E=new oi(4096,1024);for(;E.x*E.y*T<t*C;)E.y*=2;return E},s=T=>T>=1?ASt:TSt,a=T=>{const C=s(T),E=r(C,6);return{elementsPerTexelStored:C,texSize:E}};let o=this.getTargetCovarianceCompressionLevel();const l=0,u=this.getTargetSphericalHarmonicsCompressionLevel();let c,d,f;if(this.splatRenderMode===Ff.ThreeD){const T=a(o);T.texSize.x*T.texSize.y>UZ&&o===0&&(o=1),c=new Float32Array(t*cM)}else d=new Float32Array(t*3),f=new Float32Array(t*4);const h=new Float32Array(t*3),p=new Uint8Array(t*4);let m=Float32Array;u===1?m=Uint16Array:u===2&&(m=Uint8Array);const g=J1(this.minSphericalHarmonicsDegree),v=this.minSphericalHarmonicsDegree?new m(t*g):void 0,_=r(NL,4),y=new Uint32Array(_.x*_.y*NL);Va.updateCenterColorsPaddedData(0,i-1,h,p,y);const b=new fp(y,_.x,_.y,Q1,ju);if(b.internalFormat="RGBA32UI",b.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=b,this.material.uniforms.centersColorsTextureSize.value.copy(_),this.material.uniformsNeedUpdate=!0,this.splatDataTextures={baseData:{covariances:c,scales:d,rotations:f,centers:h,colors:p,sphericalHarmonics:v},centerColors:{data:y,texture:b,size:_}},this.splatRenderMode===Ff.ThreeD){const T=a(o),C=T.elementsPerTexelStored,E=T.texSize;let I=o>=1?Uint32Array:Float32Array;const k=o>=1?ESt:CSt,O=new I(E.x*E.y*k);o===0?O.set(c):Va.updatePaddedCompressedCovariancesTextureData(c,O,0,0,c.length);let U;if(o>=1)U=new fp(O,E.x,E.y,Q1,ju),U.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=U;else{U=new fp(O,E.x,E.y,Yo,Uc),this.material.uniforms.covariancesTexture.value=U;const z=new fp(new Uint32Array(32),2,2,Q1,ju);z.internalFormat="RGBA32UI",this.material.uniforms.covariancesTextureHalfFloat.value=z,z.needsUpdate=!0}U.needsUpdate=!0,this.material.uniforms.covariancesAreHalfFloat.value=o>=1?1:0,this.material.uniforms.covariancesTextureSize.value.copy(E),this.splatDataTextures.covariances={data:O,texture:U,size:E,compressionLevel:o,elementsPerTexelStored:C,elementsPerTexelAllocated:k}}else{const C=r(OL,6);let E=Float32Array,I=Uc;const k=new E(C.x*C.y*OL);Va.updateScaleRotationsPaddedData(0,i-1,d,f,k);const O=new fp(k,C.x,C.y,Yo,I);O.needsUpdate=!0,this.material.uniforms.scaleRotationsTexture.value=O,this.material.uniforms.scaleRotationsTextureSize.value.copy(C),this.splatDataTextures.scaleRotations={data:k,texture:O,size:C,compressionLevel:l}}if(v){const T=u===2?ef:jb;let C=g;C%2!==0&&C++;const E=this.minSphericalHarmonicsDegree===2?4:2,I=E===4?Yo:cz;let k=r(E,C);if(k.x*k.y<=UZ){const O=k.x*k.y*E,U=new m(O);for(let L=0;L<i;L++){const G=g*L,H=C*L;for(let F=0;F<g;F++)U[H+F]=v[G+F]}const z=new fp(U,k.x,k.y,I,T);z.needsUpdate=!0,this.material.uniforms.sphericalHarmonicsTexture.value=z,this.splatDataTextures.sphericalHarmonics={componentCount:g,paddedComponentCount:C,data:U,textureCount:1,texture:z,size:k,compressionLevel:u,elementsPerTexel:E}}else{const O=g/3;C=O,C%2!==0&&C++,k=r(E,C);const U=k.x*k.y*E,z=[this.material.uniforms.sphericalHarmonicsTextureR,this.material.uniforms.sphericalHarmonicsTextureG,this.material.uniforms.sphericalHarmonicsTextureB],L=[],G=[];for(let H=0;H<3;H++){const F=new m(U);L.push(F);for(let te=0;te<i;te++){const re=g*te,ie=C*te;if(O>=3){for(let le=0;le<3;le++)F[ie+le]=v[re+H*3+le];if(O>=8)for(let le=0;le<5;le++)F[ie+3+le]=v[re+9+H*5+le]}}const X=new fp(F,k.x,k.y,I,T);G.push(X),X.needsUpdate=!0,z[H].value=X}this.material.uniforms.sphericalHarmonicsMultiTextureMode.value=1,this.splatDataTextures.sphericalHarmonics={componentCount:g,componentCountPerChannel:O,paddedComponentCount:C,data:L,textureCount:3,textures:G,size:k,compressionLevel:u,elementsPerTexel:E}}this.material.uniforms.sphericalHarmonicsTextureSize.value.copy(k),this.material.uniforms.sphericalHarmonics8BitMode.value=u===2?1:0;for(let O=0;O<this.scenes.length;O++){const U=this.scenes[O].splatBuffer;this.material.uniforms.sphericalHarmonics8BitCompressionRangeMin.value[O]=U.minSphericalHarmonicsCoeff,this.material.uniforms.sphericalHarmonics8BitCompressionRangeMax.value[O]=U.maxSphericalHarmonicsCoeff}this.material.uniformsNeedUpdate=!0}const x=r(BZ,4),w=new Uint32Array(x.x*x.y*BZ);for(let T=0;T<i;T++)w[T]=this.globalSplatIndexToSceneIndexMap[T];const A=new fp(w,x.x,x.y,lR,ju);A.internalFormat="R32UI",A.needsUpdate=!0,this.material.uniforms.sceneIndexesTexture.value=A,this.material.uniforms.sceneIndexesTextureSize.value.copy(x),this.material.uniformsNeedUpdate=!0,this.splatDataTextures.sceneIndexes={data:w,texture:A,size:x},this.material.uniforms.sceneCount.value=this.scenes.length}updateBaseDataFromSplatBuffers(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,u=l?l.compressionLevel:0;this.fillSplatDataArrays(this.splatDataTextures.baseData.covariances,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,this.splatDataTextures.baseData.sphericalHarmonics,void 0,s,o,u,t,i,t)}updateDataTexturesFromBaseData(t,i){const r=this.splatDataTextures.covariances,s=r?r.compressionLevel:void 0,a=this.splatDataTextures.scaleRotations,o=a?a.compressionLevel:void 0,l=this.splatDataTextures.sphericalHarmonics,u=l?l.compressionLevel:0,c=this.splatDataTextures.centerColors,d=c.data,f=c.texture;Va.updateCenterColorsPaddedData(t,i,this.splatDataTextures.baseData.centers,this.splatDataTextures.baseData.colors,d);const h=this.renderer?this.renderer.properties.get(f):null;if(!h||!h.__webglTexture?f.needsUpdate=!0:this.updateDataTexture(d,c.texture,c.size,h,NL,wSt,4,t,i),r){const y=r.texture,b=t*cM,x=i*cM;if(s===0)for(let A=b;A<=x;A++){const T=this.splatDataTextures.baseData.covariances[A];r.data[A]=T}else Va.updatePaddedCompressedCovariancesTextureData(this.splatDataTextures.baseData.covariances,r.data,t*r.elementsPerTexelAllocated,b,x);const w=this.renderer?this.renderer.properties.get(y):null;!w||!w.__webglTexture?y.needsUpdate=!0:s===0?this.updateDataTexture(r.data,r.texture,r.size,w,r.elementsPerTexelStored,cM,4,t,i):this.updateDataTexture(r.data,r.texture,r.size,w,r.elementsPerTexelAllocated,r.elementsPerTexelAllocated,2,t,i)}if(a){const y=a.data,b=a.texture,x=6,w=o===0?4:2;Va.updateScaleRotationsPaddedData(t,i,this.splatDataTextures.baseData.scales,this.splatDataTextures.baseData.rotations,y);const A=this.renderer?this.renderer.properties.get(b):null;!A||!A.__webglTexture?b.needsUpdate=!0:this.updateDataTexture(y,a.texture,a.size,A,OL,x,w,t,i)}const p=this.splatDataTextures.baseData.sphericalHarmonics;if(p){let y=4;u===1?y=2:u===2&&(y=1);const b=(A,T,C,E,I)=>{const k=this.renderer?this.renderer.properties.get(A):null;!k||!k.__webglTexture?A.needsUpdate=!0:this.updateDataTexture(E,A,T,k,C,I,y,t,i)},x=l.componentCount,w=l.paddedComponentCount;if(l.textureCount===1){const A=l.data;for(let T=t;T<=i;T++){const C=x*T,E=w*T;for(let I=0;I<x;I++)A[E+I]=p[C+I]}b(l.texture,l.size,l.elementsPerTexel,A,w)}else{const A=l.componentCountPerChannel;for(let T=0;T<3;T++){const C=l.data[T];for(let E=t;E<=i;E++){const I=x*E,k=w*E;if(A>=3){for(let O=0;O<3;O++)C[k+O]=p[I+T*3+O];if(A>=8)for(let O=0;O<5;O++)C[k+3+O]=p[I+9+T*5+O]}}b(l.textures[T],l.size,l.elementsPerTexel,C,w)}}}const m=this.splatDataTextures.sceneIndexes,g=m.data;for(let y=this.lastBuildSplatCount;y<=i;y++)g[y]=this.globalSplatIndexToSceneIndexMap[y];const v=m.texture,_=this.renderer?this.renderer.properties.get(v):null;!_||!_.__webglTexture?v.needsUpdate=!0:this.updateDataTexture(g,m.texture,m.size,_,1,1,1,this.lastBuildSplatCount,i)}getTargetCovarianceCompressionLevel(){return this.halfPrecisionCovariancesOnGPU?1:0}getTargetSphericalHarmonicsCompressionLevel(){return Math.max(1,this.getMaximumSplatBufferCompressionLevel())}getMaximumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel>t)&&(t=s.compressionLevel)}return t}getMinimumSplatBufferCompressionLevel(){let t;for(let i=0;i<this.scenes.length;i++){const s=this.getScene(i).splatBuffer;(i===0||s.compressionLevel<t)&&(t=s.compressionLevel)}return t}static computeTextureUpdateRegion(t,i,r,s,a){const o=a/s,l=t*o,u=Math.floor(l/r),c=u*r*s,d=i*o,f=Math.floor(d/r),h=f*r*s+r*s;return{dataStart:c,dataEnd:h,startRow:u,endRow:f}}updateDataTexture(t,i,r,s,a,o,l,u,c){const d=this.renderer.getContext(),f=Va.computeTextureUpdateRegion(u,c,r.x,a,o),h=f.dataEnd-f.dataStart,p=new t.constructor(t.buffer,f.dataStart*l,h),m=f.endRow-f.startRow+1,g=this.webGLUtils.convert(i.type),v=this.webGLUtils.convert(i.format,i.colorSpace),_=d.getParameter(d.TEXTURE_BINDING_2D);d.bindTexture(d.TEXTURE_2D,s.__webglTexture),d.texSubImage2D(d.TEXTURE_2D,0,0,f.startRow,r.x,m,v,g,p),d.bindTexture(d.TEXTURE_2D,_)}static updatePaddedCompressedCovariancesTextureData(t,i,r,s,a){let o=new DataView(i.buffer),l=r,u=0;for(let c=s;c<=a;c+=2)o.setUint16(l*2,t[c],!0),o.setUint16(l*2+2,t[c+1],!0),l+=2,u++,u>=3&&(l+=2,u=0)}static updateCenterColorsPaddedData(t,i,r,s,a){for(let o=t;o<=i;o++){const l=o*4,u=o*3,c=o*4;a[c]=_bt(s,l),a[c+1]=ML(r[u]),a[c+2]=ML(r[u+1]),a[c+3]=ML(r[u+2])}}static updateScaleRotationsPaddedData(t,i,r,s,a){for(let l=t;l<=i;l++){const u=l*3,c=l*4,d=l*6;a[d]=r[u],a[d+1]=r[u+1],a[d+2]=r[u+2],a[d+3]=s[c],a[d+4]=s[c+1],a[d+5]=s[c+2]}}updateVisibleRegion(t){const i=this.getSplatCount(!0),r=new ft;if(!t){const a=new ft;this.scenes.forEach(o=>{a.add(o.splatBuffer.sceneCenter)}),a.multiplyScalar(1/this.scenes.length),this.calculatedSceneCenter.copy(a),this.material.uniforms.sceneCenter.value.copy(this.calculatedSceneCenter),this.material.uniformsNeedUpdate=!0}const s=t?this.lastBuildSplatCount:0;for(let a=s;a<i;a++){this.getSplatCenter(a,r,!0);const o=r.sub(this.calculatedSceneCenter).length();o>this.maxSplatDistanceFromSceneCenter&&(this.maxSplatDistanceFromSceneCenter=o)}this.maxSplatDistanceFromSceneCenter-this.visibleRegionBufferRadius>FZ&&(this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter,this.visibleRegionRadius=Math.max(this.visibleRegionBufferRadius-FZ,0)),this.finalBuild&&(this.visibleRegionRadius=this.visibleRegionBufferRadius=this.maxSplatDistanceFromSceneCenter),this.updateVisibleRegionFadeDistance()}updateVisibleRegionFadeDistance(t=P2.Default){const i=MSt*this.sceneFadeInRateMultiplier,r=ISt*this.sceneFadeInRateMultiplier,s=this.finalBuild?i:r,a=t===P2.Default?s:r;this.visibleRegionFadeStartRadius=(this.visibleRegionRadius-this.visibleRegionFadeStartRadius)*a+this.visibleRegionFadeStartRadius;const l=(this.visibleRegionBufferRadius>0?this.visibleRegionFadeStartRadius/this.visibleRegionBufferRadius:0)>.99,u=l||t===P2.Instant?1:0;this.material.uniforms.visibleRegionFadeStartRadius.value=this.visibleRegionFadeStartRadius,this.material.uniforms.visibleRegionRadius.value=this.visibleRegionRadius,this.material.uniforms.firstRenderTime.value=this.firstRenderTime,this.material.uniforms.currentTime.value=performance.now(),this.material.uniforms.fadeInComplete.value=u,this.material.uniformsNeedUpdate=!0,this.visibleRegionChanging=!l}updateRenderIndexes(t,i){const r=this.geometry;r.attributes.splatIndex.set(t),r.attributes.splatIndex.needsUpdate=!0,i>0&&this.firstRenderTime===-1&&(this.firstRenderTime=performance.now()),r.instanceCount=i,r.setDrawRange(0,i)}updateTransforms(){for(let t=0;t<this.scenes.length;t++)this.getScene(t).updateTransform(this.dynamicMode)}setSplatScale(t=1){this.splatScale=t,this.material.uniforms.splatScale.value=t,this.material.uniformsNeedUpdate=!0}getSplatScale(){return this.splatScale}setPointCloudModeEnabled(t){this.pointCloudModeEnabled=t,this.material.uniforms.pointCloudModeEnabled.value=t?1:0,this.material.uniformsNeedUpdate=!0}getPointCloudModeEnabled(){return this.pointCloudModeEnabled}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(t=!1){return t?Va.getTotalSplatCountForScenes(this.scenes):this.lastBuildSplatCount}static getTotalSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getSplatCount());return i}static getTotalSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getSplatCount();return i}getMaxSplatCount(){return Va.getTotalMaxSplatCountForScenes(this.scenes)}static getTotalMaxSplatCountForScenes(t){let i=0;for(let r of t)r&&r.splatBuffer&&(i+=r.splatBuffer.getMaxSplatCount());return i}static getTotalMaxSplatCountForSplatBuffers(t){let i=0;for(let r of t)i+=r.getMaxSplatCount();return i}disposeDistancesComputationGPUResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.vao&&(t.deleteVertexArray(this.distancesTransformFeedback.vao),this.distancesTransformFeedback.vao=null),this.distancesTransformFeedback.program&&(t.deleteProgram(this.distancesTransformFeedback.program),t.deleteShader(this.distancesTransformFeedback.vertexShader),t.deleteShader(this.distancesTransformFeedback.fragmentShader),this.distancesTransformFeedback.program=null,this.distancesTransformFeedback.vertexShader=null,this.distancesTransformFeedback.fragmentShader=null),this.disposeDistancesComputationGPUBufferResources(),this.distancesTransformFeedback.id&&(t.deleteTransformFeedback(this.distancesTransformFeedback.id),this.distancesTransformFeedback.id=null)}disposeDistancesComputationGPUBufferResources(){if(!this.renderer)return;const t=this.renderer.getContext();this.distancesTransformFeedback.centersBuffer&&(this.distancesTransformFeedback.centersBuffer=null,t.deleteBuffer(this.distancesTransformFeedback.centersBuffer)),this.distancesTransformFeedback.outDistancesBuffer&&(t.deleteBuffer(this.distancesTransformFeedback.outDistancesBuffer),this.distancesTransformFeedback.outDistancesBuffer=null)}setRenderer(t){if(t!==this.renderer){this.renderer=t;const i=this.renderer.getContext(),r=new bSt(i),s=new SSt(i,r,{});if(r.init(s),this.webGLUtils=new gpe(i,r),this.enableDistancesComputationOnGPU&&this.getSplatCount()>0){this.setupDistancesComputationTransformFeedback();const{centers:a,sceneIndexes:o}=this.getDataForDistancesComputation(0,this.getSplatCount()-1);this.refreshGPUBuffersForDistancesComputation(a,o)}}}updateGPUCentersBufferForDistancesComputation(t,i,r){if(!this.renderer)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=this.integerBasedDistancesComputation?Uint32Array:Float32Array,l=16,u=r*l;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.centersBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,u,i);else{const c=new o(this.getMaxSplatCount()*l);c.set(i),s.bufferData(s.ARRAY_BUFFER,c,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}updateGPUTransformIndexesBufferForDistancesComputation(t,i,r){if(!this.renderer||!this.dynamicMode)return;const s=this.renderer.getContext(),a=s.getParameter(s.VERTEX_ARRAY_BINDING);s.bindVertexArray(this.distancesTransformFeedback.vao);const o=r*4;if(s.bindBuffer(s.ARRAY_BUFFER,this.distancesTransformFeedback.sceneIndexesBuffer),t)s.bufferSubData(s.ARRAY_BUFFER,o,i);else{const l=new Uint32Array(this.getMaxSplatCount()*4);l.set(i),s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW)}s.bindBuffer(s.ARRAY_BUFFER,null),a&&s.bindVertexArray(a)}getSceneIndexes(t,i){let r;const s=i-t+1;r=new Uint32Array(s);for(let a=t;a<=i;a++)r[a]=this.globalSplatIndexToSceneIndexMap[a];return r}getLocalSplatParameters(t,i,r){r==null&&(r=!this.dynamicMode),i.splatBuffer=this.getSplatBufferForSplat(t),i.localIndex=this.getSplatLocalIndex(t),i.sceneTransform=r?this.getSceneTransformForSplat(t):null}fillSplatDataArrays(t,i,r,s,a,o,l,u=0,c=0,d=1,f,h,p=0,m){const g=new ft;g.x=void 0,g.y=void 0,this.splatRenderMode===Ff.ThreeD?g.z=void 0:g.z=1;const v=new Pi;let _=0,y=this.scenes.length-1;m!=null&&m>=0&&m<=this.scenes.length&&(_=m,y=m);for(let b=_;b<=y;b++){l==null&&(l=!this.dynamicMode);const x=this.getScene(b),w=x.splatBuffer;let A;if(l&&(this.getSceneTransform(b,v),A=v),t&&w.fillSplatCovarianceArray(t,A,f,h,p,u),i||r){if(!i||!r)throw new Error('SplatMesh::fillSplatDataArrays() -> "scales" and "rotations" must both be valid.');w.fillSplatScaleRotationArray(i,r,A,f,h,p,c,g)}s&&w.fillSplatCenterArray(s,A,f,h,p),a&&w.fillSplatColorArray(a,x.minimumAlpha,f,h,p),o&&w.fillSphericalHarmonicsArray(o,this.minSphericalHarmonicsDegree,A,f,h,p,d),p+=w.getSplatCount()}}getIntegerCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t);let o,l=r?4:3;o=new Int32Array(s*l);for(let u=0;u<s;u++){for(let c=0;c<3;c++)o[u*l+c]=Math.round(a[u*3+c]*1e3);r&&(o[u*l+3]=1e3)}return o}getFloatCenters(t,i,r=!1){const s=i-t+1,a=new Float32Array(s*3);if(this.fillSplatDataArrays(null,null,null,a,null,null,void 0,void 0,void 0,void 0,t),!r)return a;let o=new Float32Array(s*4);for(let l=0;l<s;l++){for(let u=0;u<3;u++)o[l*4+u]=a[l*3+u];o[l*4+3]=1}return o}getSceneTransform(t,i){const r=this.getScene(t);r.updateTransform(this.dynamicMode),i.copy(r.transform)}getScene(t){if(t<0||t>=this.scenes.length)throw new Error("SplatMesh::getScene() -> Invalid scene index.");return this.scenes[t]}getSceneCount(){return this.scenes.length}getSplatBufferForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).splatBuffer}getSceneIndexForSplat(t){return this.globalSplatIndexToSceneIndexMap[t]}getSceneTransformForSplat(t){return this.getScene(this.globalSplatIndexToSceneIndexMap[t]).transform}getSplatLocalIndex(t){return this.globalSplatIndexToLocalSplatIndexMap[t]}static getIntegerMatrixArray(t){const i=t.elements,r=[];for(let s=0;s<16;s++)r[s]=Math.round(i[s]*1e3);return r}computeBoundingBox(t=!1,i){let r=this.getSplatCount();if(i!=null){if(i<0||i>=this.scenes.length)throw new Error("SplatMesh::computeBoundingBox() -> Invalid scene index.");r=this.scenes[i].splatBuffer.getSplatCount()}const s=new Float32Array(r*3);this.fillSplatDataArrays(null,null,null,s,null,null,t,void 0,void 0,void 0,void 0,i);const a=new ft,o=new ft;for(let l=0;l<r;l++){const u=l*3,c=s[u],d=s[u+1],f=s[u+2];(l===0||c<a.x)&&(a.x=c),(l===0||d<a.y)&&(a.y=d),(l===0||f<a.z)&&(a.z=f),(l===0||c>o.x)&&(o.x=c),(l===0||d>o.y)&&(o.y=d),(l===0||f>o.z)&&(o.z=f)}return new Ld(a,o)}}var DSt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEbA2AAAGAQf39/f39/f39/f39/f39/fwBgAAF/AhIBA2VudgZtZW1vcnkCAwCAgAQDBAMAAQIHVAQRX193YXNtX2NhbGxfY3RvcnMAABhfX3dhc21fYXBwbHlfZGF0YV9yZWxvY3MAAAtzb3J0SW5kZXhlcwABE2Vtc2NyaXB0ZW5fdGxzX2luaXQAAgqWEAMDAAELihAEAXwDewN/A30gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEBA0AgAyABQQJ0IgVqIAIgACAFaigCAEECdGooAgAiBTYCACAFIAogBSAKSBshCiAFIA0gBSANShshDSABQQFqIgEgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiFWooAgAiFkECdGooAgAiFEcEQAJ/IAX9CQI4IAggFEEGdGoiDv0JAgwgDioCHP0gASAOKgIs/SACIA4qAjz9IAP95gEgBf0JAiggDv0JAgggDioCGP0gASAOKgIo/SACIA4qAjj9IAP95gEgBf0JAgggDv0JAgAgDioCEP0gASAOKgIg/SACIA4qAjD9IAP95gEgBf0JAhggDv0JAgQgDioCFP0gASAOKgIk/SACIA4qAjT9IAP95gH95AH95AH95AEiEf1f/QwAAAAAAECPQAAAAAAAQI9AIhL98gEiE/0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBP9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/REgDv0cAQJ/IBEgEf0NCAkKCwwNDg8AAAAAAAAAAP1fIBL98gEiEf0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9HAICfyAR/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAyESIBQhDwsgAyAVaiABIBZBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmogEf0bA2oiDjYCACAOIAogCiAOShshCiAOIA0gDSAOSBshDSACQQFqIgIgC0cNAAsMAwsCfyAFKgIIu/0UIAUqAhi7/SIB/QwAAAAAAECPQAAAAAAAQI9A/fIBIhH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIQ4CfyAR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyECAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQIgAv0RIA79HAEgBf0cAiESIAwhBQNAIAMgBUECdCICaiABIAAgAmooAgBBBHRq/QAAACAS/bUBIhH9GwAgEf0bAWogEf0bAmoiAjYCACACIAogAiAKSBshCiACIA0gAiANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEBA0AgAyABQQJ0IgVqAn8gAiAAIAVqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAFBAWoiASALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIRcgBSoCGCEYIAUqAgghGUH4////ByEKQYiAgIB4IQ0gDCEFA0ACfyAXIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCAZIAIqAgCUIBggAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIUaigCAEECdCIVaigCACIORwRAIAX9CQI4IAggDkEGdGoiD/0JAgwgDyoCHP0gASAPKgIs/SACIA8qAjz9IAP95gEgBf0JAiggD/0JAgggDyoCGP0gASAPKgIo/SACIA8qAjj9IAP95gEgBf0JAgggD/0JAgAgDyoCEP0gASAPKgIg/SACIA8qAjD9IAP95gEgBf0JAhggD/0JAgQgDyoCFP0gASAPKgIk/SACIA8qAjT9IAP95gH95AH95AH95AEhESAOIQ8LIAMgFGoCfyAR/R8DIAEgFUECdCIOQQxyaioCAJQgEf0fAiABIA5BCHJqKgIAlCAR/R8AIAEgDmoqAgCUIBH9HwEgASAOQQRyaioCAJSSkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSACQQFqIgIgC0cNAAsMAQtBiICAgHghDUH4////ByEKCyALIAxLBEAgCUEBa7MgDbIgCrKTlSEXIAwhDQNAAn8gFyADIA1BAnRqIgEoAgAgCmuylCIYi0MAAABPXQRAIBioDAELQYCAgIB4CyEOIAEgDjYCACAEIA5BAnRqIgEgASgCAEEBajYCACANQQFqIg0gC0cNAAsLIAlBAk8EQCAEKAIAIQ1BASEKA0AgBCAKQQJ0aiIBIAEoAgAgDWoiDTYCACAKQQFqIgogCUcNAAsLIAxBAEoEQCAMIQoDQCAGIApBAWsiAUECdCICaiAAIAJqKAIANgIAIApBAUshAiABIQogAg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCwsEAEEACw==",zZ="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACEgEDZW52Bm1lbW9yeQIDAICABAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=",RSt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQrrDwICAAvlDwQBfAN7B30DfyALIAprIQwCQAJAIA4EQCANBEBB+P///wchCkGIgICAeCENIAsgDE0NAyAMIQUDQCADIAVBAnQiAWogAiAAIAFqKAIAQQJ0aigCACIBNgIAIAEgCiABIApIGyEKIAEgDSABIA1KGyENIAVBAWoiBSALRw0ACwwDCyAPBEAgCyAMTQ0CQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIcaigCACIdQQJ0aigCACIbRwRAAn8gBf0JAjggCCAbQQZ0aiIO/QkCDCAOKgIc/SABIA4qAiz9IAIgDioCPP0gA/3mASAF/QkCKCAO/QkCCCAOKgIY/SABIA4qAij9IAIgDioCOP0gA/3mASAF/QkCCCAO/QkCACAOKgIQ/SABIA4qAiD9IAIgDioCMP0gA/3mASAF/QkCGCAO/QkCBCAOKgIU/SABIA4qAiT9IAIgDioCNP0gA/3mAf3kAf3kAf3kASIR/V/9DAAAAAAAQI9AAAAAAABAj0AiEv3yASIT/SEBIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOAn8gE/0hACIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAv9ESAO/RwBAn8gESAR/Q0ICQoLDA0ODwABAgMAAQID/V8gEv3yASIR/SEAIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4C/0cAgJ/IBH9IQEiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgL/RwDIRIgGyEPCyADIBxqIAEgHUEEdGr9AAAAIBL9tQEiEf0bACAR/RsBaiAR/RsCaiAR/RsDaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAgi7/RQgBSoCGLv9IgH9DAAAAAAAQI9AAAAAAABAj0D98gEiEf0hASIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDgJ/IBH9IQAiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLAn8gBSoCKLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEFQfj///8HIQpBiICAgHghDSALIAxNDQL9ESAO/RwBIAX9HAIhEiAMIQUDQCADIAVBAnQiAmogASAAIAJqKAIAQQR0av0AAAAgEv21ASIR/RsAIBH9GwFqIBH9GwJqIgI2AgAgAiAKIAIgCkgbIQogAiANIAIgDUobIQ0gBUEBaiIFIAtHDQALDAILIA0EQEH4////ByEKQYiAgIB4IQ0gCyAMTQ0CIAwhBQNAIAMgBUECdCIBagJ/IAIgACABaigCAEECdGoqAgC7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAsiDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgD0UEQCALIAxNDQEgBSoCKCEUIAUqAhghFSAFKgIIIRZB+P///wchCkGIgICAeCENIAwhBQNAAn8gFCABIAAgBUECdCIHaigCAEEEdGoiAioCCJQgFiACKgIAlCAVIAIqAgSUkpK7RAAAAAAAALBAoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshDiADIAdqIA42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gBUEBaiIFIAtHDQALDAILIAsgDE0NAEF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiG2ooAgBBAnQiHGooAgAiDkcEQCAFKgI4IhQgCCAOQQZ0aiIPKgI8lCAFKgIoIhUgDyoCOJQgBSoCCCIWIA8qAjCUIAUqAhgiFyAPKgI0lJKSkiEYIBQgDyoCLJQgFSAPKgIolCAWIA8qAiCUIBcgDyoCJJSSkpIhGSAUIA8qAhyUIBUgDyoCGJQgFiAPKgIQlCAXIA8qAhSUkpKSIRogFCAPKgIMlCAVIA8qAgiUIBYgDyoCAJQgFyAPKgIElJKSkiEUIA4hDwsgAyAbagJ/IBggASAcQQJ0aiIOKgIMlCAZIA4qAgiUIBQgDioCAJQgGiAOKgIElJKSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAJBAWoiAiALRw0ACwwBC0GIgICAeCENQfj///8HIQoLIAsgDEsEQCAJQQFrsyANsiAKspOVIRQgDCENA0ACfyAUIAMgDUECdGoiASgCACAKa7KUIhWLQwAAAE9dBEAgFagMAQtBgICAgHgLIQ4gASAONgIAIAQgDkECdGoiASABKAIAQQFqNgIAIA1BAWoiDSALRw0ACwsgCUECTwRAIAQoAgAhDUEBIQoDQCAEIApBAnRqIgEgASgCACANaiINNgIAIApBAWoiCiAJRw0ACwsgDEEASgRAIAwhCgNAIAYgCkEBayIBQQJ0IgJqIAAgAmooAgA2AgAgCkEBSyABIQoNAAsLIAsgDEoEQCALIQoDQCAGIAsgBCADIApBAWsiCkECdCIBaigCAEECdGoiAigCACIFa0ECdGogACABaigCADYCACACIAVBAWs2AgAgCiAMSg0ACwsL",PSt="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAEXAmAAAGAQf39/f39/f39/f39/f39/fwACDwEDZW52Bm1lbW9yeQIAAAMDAgABBz4DEV9fd2FzbV9jYWxsX2N0b3JzAAAYX193YXNtX2FwcGx5X2RhdGFfcmVsb2NzAAALc29ydEluZGV4ZXMAAQqiDwICAAucDwMBfAd9Bn8gCyAKayEMAkACQCAOBEAgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQMgDCEFA0AgAyAFQQJ0IgFqIAIgACABaigCAEECdGooAgAiATYCACABIAogASAKSBshCiABIA0gASANShshDSAFQQFqIgUgC0cNAAsMAwsgDwRAIAsgDE0NAkF/IQ9B+P///wchCkGIgICAeCENIAwhAgNAIA8gByAAIAJBAnQiGmooAgBBAnQiG2ooAgAiDkcEQAJ/IAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRgCfyARIA8qAiyUIBIgDyoCKJQgEyAPKgIglCAUIA8qAiSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRkCfyARIA8qAhyUIBIgDyoCGJQgEyAPKgIQlCAUIA8qAhSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIRwCfyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSu0QAAAAAAECPQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIR0gDiEPCyADIBpqIAEgG0ECdGoiDigCBCAcbCAOKAIAIB1saiAOKAIIIBlsaiAOKAIMIBhsaiIONgIAIA4gCiAKIA5KGyEKIA4gDSANIA5IGyENIAJBAWoiAiALRw0ACwwDCwJ/IAUqAii7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshAgJ/IAUqAhi7RAAAAAAAQI9AoiIQmUQAAAAAAADgQWMEQCAQqgwBC0GAgICAeAshByALIAxNAn8gBSoCCLtEAAAAAABAj0CiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEPQfj///8HIQpBiICAgHghDQ0CIAwhBQNAIAMgBUECdCIIaiABIAAgCGooAgBBBHRqIggoAgQgB2wgCCgCACAPbGogCCgCCCACbGoiCDYCACAIIAogCCAKSBshCiAIIA0gCCANShshDSAFQQFqIgUgC0cNAAsMAgsgDQRAQfj///8HIQpBiICAgHghDSALIAxNDQIgDCEFA0AgAyAFQQJ0IgFqAn8gAiAAIAFqKAIAQQJ0aioCALtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyIONgIAIAogDiAKIA5IGyEKIA0gDiANIA5KGyENIAVBAWoiBSALRw0ACwwCCyAPRQRAIAsgDE0NASAFKgIoIREgBSoCGCESIAUqAgghE0H4////ByEKQYiAgIB4IQ0gDCEFA0ACfyARIAEgACAFQQJ0IgdqKAIAQQR0aiICKgIIlCATIAIqAgCUIBIgAioCBJSSkrtEAAAAAAAAsECiIhCZRAAAAAAAAOBBYwRAIBCqDAELQYCAgIB4CyEOIAMgB2ogDjYCACAKIA4gCiAOSBshCiANIA4gDSAOShshDSAFQQFqIgUgC0cNAAsMAgsgCyAMTQ0AQX8hD0H4////ByEKQYiAgIB4IQ0gDCECA0AgDyAHIAAgAkECdCIYaigCAEECdCIZaigCACIORwRAIAUqAjgiESAIIA5BBnRqIg8qAjyUIAUqAigiEiAPKgI4lCAFKgIIIhMgDyoCMJQgBSoCGCIUIA8qAjSUkpKSIRUgESAPKgIslCASIA8qAiiUIBMgDyoCIJQgFCAPKgIklJKSkiEWIBEgDyoCHJQgEiAPKgIYlCATIA8qAhCUIBQgDyoCFJSSkpIhFyARIA8qAgyUIBIgDyoCCJQgEyAPKgIAlCAUIA8qAgSUkpKSIREgDiEPCyADIBhqAn8gFSABIBlBAnRqIg4qAgyUIBYgDioCCJQgESAOKgIAlCAXIA4qAgSUkpKSu0QAAAAAAACwQKIiEJlEAAAAAAAA4EFjBEAgEKoMAQtBgICAgHgLIg42AgAgCiAOIAogDkgbIQogDSAOIA0gDkobIQ0gAkEBaiICIAtHDQALDAELQYiAgIB4IQ1B+P///wchCgsgCyAMSwRAIAlBAWuzIA2yIAqyk5UhESAMIQ0DQAJ/IBEgAyANQQJ0aiIBKAIAIAprspQiEotDAAAAT10EQCASqAwBC0GAgICAeAshDiABIA42AgAgBCAOQQJ0aiIBIAEoAgBBAWo2AgAgDUEBaiINIAtHDQALCyAJQQJPBEAgBCgCACENQQEhCgNAIAQgCkECdGoiASABKAIAIA1qIg02AgAgCkEBaiIKIAlHDQALCyAMQQBKBEAgDCEKA0AgBiAKQQFrIgFBAnQiAmogACACaigCADYCACAKQQFLIAEhCg0ACwsgCyAMSgRAIAshCgNAIAYgCyAEIAMgCkEBayIKQQJ0IgFqKAIAQQJ0aiICKAIAIgVrQQJ0aiAAIAFqKAIANgIAIAIgBUEBazYCACAKIAxKDQALCws=";function kSt(n){let e,t,i,r,s,a,o,l,u,c,d,f,h,p,m,g,v,_,y,b;function x(w,A,T,C,E,I,k){const O=performance.now();if(!i&&(new Uint32Array(t,o,E.byteLength/b.BytesPerInt).set(E),new Float32Array(t,c,k.byteLength/b.BytesPerFloat).set(k),C)){let H;r?H=new Int32Array(t,d,I.byteLength/b.BytesPerInt):H=new Float32Array(t,d,I.byteLength/b.BytesPerFloat),H.set(I)}g||(g=new Uint32Array(_)),new Float32Array(t,m,16).set(T),new Uint32Array(t,h,_).set(g),e.exports.sortIndexes(o,p,d,f,h,m,l,u,c,_,w,A,a,C,r,s);const U={sortDone:!0,splatSortCount:w,splatRenderCount:A,sortTime:0};if(!i){const L=new Uint32Array(t,l,A);(!v||v.length<A)&&(v=new Uint32Array(A)),v.set(L),U.sortedIndexes=v}const z=performance.now();U.sortTime=z-O,n.postMessage(U)}n.onmessage=w=>{if(w.data.centers)centers=w.data.centers,sceneIndexes=w.data.sceneIndexes,r?new Int32Array(t,p+w.data.range.from*b.BytesPerInt*4,w.data.range.count*4).set(new Int32Array(centers)):new Float32Array(t,p+w.data.range.from*b.BytesPerFloat*4,w.data.range.count*4).set(new Float32Array(centers)),s&&new Uint32Array(t,u+w.data.range.from*4,w.data.range.count).set(new Uint32Array(sceneIndexes)),y=w.data.range.from+w.data.range.count;else if(w.data.sort){const A=Math.min(w.data.sort.splatRenderCount||0,y),T=Math.min(w.data.sort.splatSortCount||0,y),C=w.data.sort.usePrecomputedDistances;let E,I,k;i||(E=w.data.sort.indexesToSort,k=w.data.sort.transforms,C&&(I=w.data.sort.precomputedDistances)),x(T,A,w.data.sort.modelViewProj,C,E,I,k)}else if(w.data.init){b=w.data.init.Constants,a=w.data.init.splatCount,i=w.data.init.useSharedMemory,r=w.data.init.integerBasedSort,s=w.data.init.dynamicMode,_=w.data.init.distanceMapRange,y=0;const A=r?b.BytesPerInt*4:b.BytesPerFloat*4,T=new Uint8Array(w.data.init.sorterWasmBytes),C=16*b.BytesPerFloat,E=a*b.BytesPerInt,I=a*A,k=C,O=r?a*b.BytesPerInt:a*b.BytesPerFloat,U=a*b.BytesPerInt,z=a*b.BytesPerInt,L=r?_*b.BytesPerInt*2:_*b.BytesPerFloat*2,G=s?a*b.BytesPerInt:0,H=s?b.MaxScenes*C:0,F=b.MemoryPageSize*32,X=E+I+k+O+U+L+z+G+H+F,te=Math.floor(X/b.MemoryPageSize)+1,re={module:{},env:{memory:new WebAssembly.Memory({initial:te,maximum:te,shared:!0})}};WebAssembly.compile(T).then(ie=>WebAssembly.instantiate(ie,re)).then(ie=>{e=ie,o=0,p=o+E,m=p+I,d=m+k,f=d+O,h=f+U,l=h+L,u=l+z,c=u+G,t=re.env.memory.buffer,i?n.postMessage({sortSetupPhase1Complete:!0,indexesToSortBuffer:t,indexesToSortOffset:o,sortedIndexesBuffer:t,sortedIndexesOffset:l,precomputedDistancesBuffer:t,precomputedDistancesOffset:d,transformsBuffer:t,transformsOffset:c}):n.postMessage({sortSetupPhase1Complete:!0})})}}}function LSt(n,e,t,i,r,s=lr.DefaultSplatSortDistanceMapPrecision){const a=new Worker(URL.createObjectURL(new Blob(["(",kSt.toString(),")(self)"],{type:"application/javascript"})));let o=DSt;const l=bz()?vpe():null;!t&&!e?(o=zZ,l&&l.major<=16&&l.minor<4&&(o=PSt)):t?e||l&&l.major<=16&&l.minor<4&&(o=RSt):o=zZ;const u=atob(o),c=new Uint8Array(u.length);for(let d=0;d<u.length;d++)c[d]=u.charCodeAt(d);return a.postMessage({init:{sorterWasmBytes:c.buffer,splatCount:n,useSharedMemory:e,integerBasedSort:i,dynamicMode:r,distanceMapRange:1<<s,Constants:{BytesPerFloat:lr.BytesPerFloat,BytesPerInt:lr.BytesPerInt,MemoryPageSize:lr.MemoryPageSize,MaxScenes:lr.MaxScenes}}}),a}const jy={None:0,VR:1,AR:2};class nb{static createButton(e,t={}){const i=document.createElement("button");function r(){let u=null;async function c(h){h.addEventListener("end",d),await e.xr.setSession(h),i.textContent="EXIT VR",u=h}function d(){u.removeEventListener("end",d),i.textContent="ENTER VR",u=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="ENTER VR";const f={...t,optionalFeatures:["local-floor","bounded-floor","layers",...t.optionalFeatures||[]]};i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){u===null?navigator.xr.requestSession("immersive-vr",f).then(c):(u.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(c).catch(h=>{console.warn(h)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-vr",f).then(c).catch(h=>{console.warn(h)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="VR NOT SUPPORTED"}function o(u){s(),console.warn("Exception when trying to call xr.isSessionSupported",u),i.textContent="VR NOT ALLOWED"}function l(u){u.style.position="absolute",u.style.bottom="20px",u.style.padding="12px 6px",u.style.border="1px solid #fff",u.style.borderRadius="4px",u.style.background="rgba(0,0,0,0.1)",u.style.color="#fff",u.style.font="normal 13px sans-serif",u.style.textAlign="center",u.style.opacity="0.5",u.style.outline="none",u.style.zIndex="999"}if("xr"in navigator)return i.id="VRButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-vr").then(function(u){u?r():a(),u&&nb.xrSessionIsGranted&&i.click()}).catch(o),i;{const u=document.createElement("a");return window.isSecureContext===!1?(u.href=document.location.href.replace(/^http:/,"https:"),u.innerHTML="WEBXR NEEDS HTTPS"):(u.href="https://immersiveweb.dev/",u.innerHTML="WEBXR NOT AVAILABLE"),u.style.left="calc(50% - 90px)",u.style.width="180px",u.style.textDecoration="none",l(u),u}}static registerSessionGrantedListener(){if(typeof navigator<"u"&&"xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",()=>{nb.xrSessionIsGranted=!0})}}}nb.xrSessionIsGranted=!1;nb.registerSessionGrantedListener();class OSt{static createButton(e,t={}){const i=document.createElement("button");function r(){if(t.domOverlay===void 0){const f=document.createElement("div");f.style.display="none",document.body.appendChild(f);const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttribute("width",38),h.setAttribute("height",38),h.style.position="absolute",h.style.right="20px",h.style.top="20px",h.addEventListener("click",function(){u.end()}),f.appendChild(h);const p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),p.setAttribute("stroke","#fff"),p.setAttribute("stroke-width",2),h.appendChild(p),t.optionalFeatures===void 0&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:f}}let u=null;async function c(f){f.addEventListener("end",d),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(f),i.textContent="STOP AR",t.domOverlay.root.style.display="",u=f}function d(){u.removeEventListener("end",d),i.textContent="START AR",t.domOverlay.root.style.display="none",u=null}i.style.display="",i.style.cursor="pointer",i.style.left="calc(50% - 50px)",i.style.width="100px",i.textContent="START AR",i.onmouseenter=function(){i.style.opacity="1.0"},i.onmouseleave=function(){i.style.opacity="0.5"},i.onclick=function(){u===null?navigator.xr.requestSession("immersive-ar",t).then(c):(u.end(),navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(c).catch(f=>{console.warn(f)}))},navigator.xr.offerSession!==void 0&&navigator.xr.offerSession("immersive-ar",t).then(c).catch(f=>{console.warn(f)})}function s(){i.style.display="",i.style.cursor="auto",i.style.left="calc(50% - 75px)",i.style.width="150px",i.onmouseenter=null,i.onmouseleave=null,i.onclick=null}function a(){s(),i.textContent="AR NOT SUPPORTED"}function o(u){s(),console.warn("Exception when trying to call xr.isSessionSupported",u),i.textContent="AR NOT ALLOWED"}function l(u){u.style.position="absolute",u.style.bottom="20px",u.style.padding="12px 6px",u.style.border="1px solid #fff",u.style.borderRadius="4px",u.style.background="rgba(0,0,0,0.1)",u.style.color="#fff",u.style.font="normal 13px sans-serif",u.style.textAlign="center",u.style.opacity="0.5",u.style.outline="none",u.style.zIndex="999"}if("xr"in navigator)return i.id="ARButton",i.style.display="none",l(i),navigator.xr.isSessionSupported("immersive-ar").then(function(u){u?r():a()}).catch(o),i;{const u=document.createElement("a");return window.isSecureContext===!1?(u.href=document.location.href.replace(/^http:/,"https:"),u.innerHTML="WEBXR NEEDS HTTPS"):(u.href="https://immersiveweb.dev/",u.innerHTML="WEBXR NOT AVAILABLE"),u.style.left="calc(50% - 90px)",u.style.width="180px",u.style.textDecoration="none",l(u),u}}}const BL={Always:0,OnChange:1,Never:2},NSt=50,BSt=.75,FSt=15e5,USt=10,zSt=2.5,HSt=60,Tp=class Tp{constructor(e={}){Cn(this,"onKeyDown",function(){const e=new ft,t=new Pi,i=new Pi;return function(r){switch(e.set(0,0,-1),e.transformDirection(this.camera.matrixWorld),t.makeRotationAxis(e,Math.PI/128),i.makeRotationAxis(e,-Math.PI/128),r.code){case"KeyG":this.focalAdjustment+=.02,this.forceRenderNextFrame();break;case"KeyF":this.focalAdjustment-=.02,this.forceRenderNextFrame();break;case"ArrowLeft":this.camera.up.transformDirection(t);break;case"ArrowRight":this.camera.up.transformDirection(i);break;case"KeyC":this.showMeshCursor=!this.showMeshCursor;break;case"KeyU":this.showControlPlane=!this.showControlPlane;break;case"KeyI":this.showInfo=!this.showInfo,this.showInfo?this.infoPanel.show():this.infoPanel.hide();break;case"KeyO":this.usingExternalCamera||this.setOrthographicMode(!this.camera.isOrthographicCamera);break;case"KeyP":this.usingExternalCamera||this.splatMesh.setPointCloudModeEnabled(!this.splatMesh.getPointCloudModeEnabled());break;case"Equal":this.usingExternalCamera||this.splatMesh.setSplatScale(this.splatMesh.getSplatScale()+.05);break;case"Minus":this.usingExternalCamera||this.splatMesh.setSplatScale(Math.max(this.splatMesh.getSplatScale()-.05,0));break}}}());Cn(this,"onMouseUp",function(){const e=new oi;return function(t){e.copy(this.mousePosition).sub(this.mouseDownPosition),Gy()-this.mouseDownTime<.5&&e.length()<2&&this.onMouseClick(t)}}());Cn(this,"checkForFocalPointChange",function(){const e=new oi,t=new ft,i=[];return function(){if(!this.transitioningCameraTarget&&(this.getRenderDimensions(e),i.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,e),this.raycaster.intersectSplatMesh(this.splatMesh,i),i.length>0)){const s=i[0].origin;t.copy(s).sub(this.camera.position),t.length()>BSt&&(this.previousCameraTarget.copy(this.controls.target),this.nextCameraTarget.copy(s),this.transitioningCameraTarget=!0,this.transitioningCameraTargetStartTime=Gy())}}}());Cn(this,"updateSplatMesh",function(){const e=new oi;return function(){if(!this.splatMesh)return;if(this.splatMesh.getSplatCount()>0){this.splatMesh.updateVisibleRegionFadeDistance(this.sceneRevealMode),this.splatMesh.updateTransforms(),this.getRenderDimensions(e);const i=this.camera.projectionMatrix.elements[0]*.5*this.devicePixelRatio*e.x,r=this.camera.projectionMatrix.elements[5]*.5*this.devicePixelRatio*e.y,s=this.camera.isOrthographicCamera?1/this.devicePixelRatio:1,a=this.focalAdjustment*s,o=1/a;this.adjustForWebXRStereo(e),this.splatMesh.updateUniforms(e,i*a,r*a,this.camera.isOrthographicCamera,this.camera.zoom||1,o)}}}());Cn(this,"addSplatBuffers",function(){return function(e,t=[],i=!0,r=!0,s=!0,a=!1,o=!1,l=!0){if(this.isDisposingOrDisposed())return Promise.resolve();let u=null;const c=()=>{u!==null&&(this.loadingSpinner.removeTask(u),u=null)};return this.splatRenderReady=!1,new Promise(d=>{r&&(u=this.loadingSpinner.addTask("Processing splats...")),zc(()=>{if(this.isDisposingOrDisposed())d();else{const f=this.addSplatBuffersToMesh(e,t,i,s,a,l),h=this.splatMesh.getMaxSplatCount();this.sortWorker&&this.sortWorker.maxSplatCount!==h&&this.disposeSortWorker(),this.gpuAcceleratedSort||this.preSortMessages.push({centers:f.centers.buffer,sceneIndexes:f.sceneIndexes.buffer,range:{from:f.from,to:f.to,count:f.count}}),(!this.sortWorker&&h>0?this.setupSortWorker(this.splatMesh):Promise.resolve()).then(()=>{this.isDisposingOrDisposed()||this.runSplatSort(!0,!0).then(m=>{!this.sortWorker||!m?(this.splatRenderReady=!0,c(),d()):(o?this.splatRenderReady=!0:this.runAfterNextSort.push(()=>{this.splatRenderReady=!0}),this.runAfterNextSort.push(()=>{c(),d()}))})})}},!0)})}}());Cn(this,"addSplatBuffersToMesh",function(){let e;return function(t,i,r=!0,s=!1,a=!1,o=!0){if(this.isDisposingOrDisposed())return;let l=[],u=[];a||(l=this.splatMesh.scenes.map(h=>h.splatBuffer)||[],u=this.splatMesh.sceneOptions?this.splatMesh.sceneOptions.map(h=>h):[]),l.push(...t),u.push(...i),this.renderer&&this.splatMesh.setRenderer(this.renderer);const c=h=>{if(this.isDisposingOrDisposed())return;const p=this.splatMesh.getSplatCount();s&&p>=FSt&&!h&&!e&&(this.loadingSpinner.setMinimized(!0,!0),e=this.loadingSpinner.addTask("Optimizing data structures..."))},d=h=>{this.isDisposingOrDisposed()||h&&e&&(this.loadingSpinner.removeTask(e),e=null)},f=this.splatMesh.build(l,u,!0,r,c,d,o);return r&&this.freeIntermediateSplatData&&this.splatMesh.freeIntermediateSplatData(),f}}());Cn(this,"shouldRender",function(){let e=0;const t=new ft,i=new bs,r=1e-4;return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return!1;let s=!1,a=!1;if(this.camera){const o=this.camera.position,l=this.camera.quaternion;a=Math.abs(o.x-t.x)>r||Math.abs(o.y-t.y)>r||Math.abs(o.z-t.z)>r||Math.abs(l.x-i.x)>r||Math.abs(l.y-i.y)>r||Math.abs(l.z-i.z)>r||Math.abs(l.w-i.w)>r}return s=this.renderMode!==BL.Never&&(e===0||this.splatMesh.visibleRegionChanging||a||this.renderMode===BL.Always||this.dynamicMode===!0||this.renderNextFrame),this.camera&&(t.copy(this.camera.position),i.copy(this.camera.quaternion)),e++,s}}());Cn(this,"render",function(){return function(){if(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())return;const e=i=>{for(let r of i.children)if(r.visible)return!0;return!1},t=this.renderer.autoClear;e(this.threeScene)&&(this.renderer.render(this.threeScene,this.camera),this.renderer.autoClear=!1),this.renderer.render(this.splatMesh,this.camera),this.renderer.autoClear=!1,this.sceneHelper.getFocusMarkerOpacity()>0&&this.renderer.render(this.sceneHelper.focusMarker,this.camera),this.showControlPlane&&this.renderer.render(this.sceneHelper.controlPlane,this.camera),this.renderer.autoClear=t}}());Cn(this,"updateFPS",function(){let e=Gy(),t=0;return function(){if(this.consecutiveRenderFrames>HSt){const i=Gy();i-e>=1?(this.currentFPS=t,t=0,e=i):t++}else this.currentFPS=null}}());Cn(this,"updateForRendererSizeChanges",function(){const e=new oi,t=new oi;let i;return function(){this.usingExternalCamera||(this.renderer.getSize(t),(i===void 0||i!==this.camera.isOrthographicCamera||t.x!==e.x||t.y!==e.y)&&(this.camera.isOrthographicCamera?(this.camera.left=-t.x/2,this.camera.right=t.x/2,this.camera.top=t.y/2,this.camera.bottom=-t.y/2):this.camera.aspect=t.x/t.y,this.camera.updateProjectionMatrix(),e.copy(t),i=this.camera.isOrthographicCamera))}}());Cn(this,"timingSensitiveUpdates",function(){let e;return function(){const t=Gy();e||(e=t);const i=t-e;this.updateCameraTransition(t),this.updateFocusMarker(i),e=t}}());Cn(this,"updateCameraTransition",function(){let e=new ft,t=new ft,i=new ft;return function(r){if(this.transitioningCameraTarget){t.copy(this.previousCameraTarget).sub(this.camera.position).normalize(),i.copy(this.nextCameraTarget).sub(this.camera.position).normalize();const s=Math.acos(t.dot(i)),o=(s/(Math.PI/3)*.65+.3)/s*(r-this.transitioningCameraTargetStartTime);e.copy(this.previousCameraTarget).lerp(this.nextCameraTarget,o),this.camera.lookAt(e),this.controls.target.copy(e),o>=1&&(this.transitioningCameraTarget=!1)}}}());Cn(this,"updateFocusMarker",function(){const e=new oi;let t=!1;return function(i){if(this.getRenderDimensions(e),this.transitioningCameraTarget){this.sceneHelper.setFocusMarkerVisibility(!0);const r=Math.max(this.sceneHelper.getFocusMarkerOpacity(),0);let s=Math.min(r+USt*i,1);this.sceneHelper.setFocusMarkerOpacity(s),this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e),t=!0,this.forceRenderNextFrame()}else{let r;if(t?r=1:r=Math.min(this.sceneHelper.getFocusMarkerOpacity(),1),r>0){this.sceneHelper.updateFocusMarker(this.nextCameraTarget,this.camera,e);let s=Math.max(r-zSt*i,0);this.sceneHelper.setFocusMarkerOpacity(s),s===0&&this.sceneHelper.setFocusMarkerVisibility(!1)}r>0&&this.forceRenderNextFrame(),t=!1}}}());Cn(this,"updateMeshCursor",function(){const e=[],t=new oi;return function(){this.showMeshCursor?(this.forceRenderNextFrame(),this.getRenderDimensions(t),e.length=0,this.raycaster.setFromCameraAndScreenPosition(this.camera,this.mousePosition,t),this.raycaster.intersectSplatMesh(this.splatMesh,e),e.length>0?(this.sceneHelper.setMeshCursorVisibility(!0),this.sceneHelper.positionAndOrientMeshCursor(e[0].origin,this.camera)):this.sceneHelper.setMeshCursorVisibility(!1)):(this.sceneHelper.getMeschCursorVisibility()&&this.forceRenderNextFrame(),this.sceneHelper.setMeshCursorVisibility(!1))}}());Cn(this,"updateInfoPanel",function(){const e=new oi;return function(){if(!this.showInfo)return;const t=this.splatMesh.getSplatCount();this.getRenderDimensions(e);const i=this.controls?this.controls.target:null,r=this.showMeshCursor?this.sceneHelper.meshCursor.position:null,s=t>0?this.splatRenderCount/t*100:0;this.infoPanel.update(e,this.camera.position,i,this.camera.up,this.camera.isOrthographicCamera,r,this.currentFPS||"N/A",t,this.splatRenderCount,s,this.lastSortTime,this.focalAdjustment,this.splatMesh.getSplatScale(),this.splatMesh.getPointCloudModeEnabled())}}());Cn(this,"runSplatSort",function(){const e=new Pi,t=[],i=new ft(0,0,-1),r=new ft(0,0,-1),s=new ft,a=new ft,o=[],l=[{angleThreshold:.55,sortFractions:[.125,.33333,.75]},{angleThreshold:.65,sortFractions:[.33333,.66667]},{angleThreshold:.8,sortFractions:[.5]}];return function(u=!1,c=!1){if(!this.initialized)return Promise.resolve(!1);if(this.sortRunning)return Promise.resolve(!0);if(this.splatMesh.getSplatCount()<=0)return this.splatRenderCount=0,Promise.resolve(!1);let d=0,f=0,h=!1,p=!1;if(r.set(0,0,-1).applyQuaternion(this.camera.quaternion),d=r.dot(i),f=a.copy(this.camera.position).sub(s).length(),!u&&!this.splatMesh.dynamicMode&&o.length===0&&(d<=.99&&(h=!0),f>=1&&(p=!0),!h&&!p))return Promise.resolve(!1);this.sortRunning=!0;let{splatRenderCount:m,shouldSortAll:g}=this.gatherSceneNodesForSort();g=g||c,this.splatRenderCount=m,e.copy(this.camera.matrixWorld).invert();const v=this.perspectiveCamera||this.camera;e.premultiply(v.projectionMatrix),this.splatMesh.dynamicMode||e.multiply(this.splatMesh.matrixWorld);let _=Promise.resolve(!0);return this.gpuAcceleratedSort&&(o.length<=1||o.length%2===0)&&(_=this.splatMesh.computeDistancesOnGPU(e,this.sortWorkerPrecomputedDistances)),_.then(()=>{if(o.length===0)if(this.splatMesh.dynamicMode||g)o.push(this.splatRenderCount);else{for(let x of l)if(d<x.angleThreshold){for(let w of x.sortFractions)o.push(Math.floor(this.splatRenderCount*w));break}o.push(this.splatRenderCount)}let y=Math.min(o.shift(),this.splatRenderCount);this.splatSortCount=y,t[0]=this.camera.position.x,t[1]=this.camera.position.y,t[2]=this.camera.position.z;const b={modelViewProj:e.elements,cameraPosition:t,splatRenderCount:this.splatRenderCount,splatSortCount:y,usePrecomputedDistances:this.gpuAcceleratedSort};return this.splatMesh.dynamicMode&&this.splatMesh.fillTransformsArray(this.sortWorkerTransforms),this.sharedMemoryForWorkers||(b.indexesToSort=this.sortWorkerIndexesToSort,b.transforms=this.sortWorkerTransforms,this.gpuAcceleratedSort&&(b.precomputedDistances=this.sortWorkerPrecomputedDistances)),this.sortPromise=new Promise(x=>{this.sortPromiseResolver=x}),this.preSortMessages.length>0&&(this.preSortMessages.forEach(x=>{this.sortWorker.postMessage(x)}),this.preSortMessages=[]),this.sortWorker.postMessage({sort:b}),o.length===0&&(s.copy(this.camera.position),i.copy(r)),!0}),_}}());Cn(this,"gatherSceneNodesForSort",function(){const e=[];let t=null;const i=new ft,r=new ft,s=new ft,a=new Pi,o=new Pi,l=new Pi,u=new ft,c=new ft(0,0,-1),d=new ft,f=h=>d.copy(h.max).sub(h.min).length();return function(h=!1){this.getRenderDimensions(u);const p=u.y/2/Math.tan(this.camera.fov/2*Zhe.DEG2RAD),m=Math.atan(u.x/2/p),g=Math.atan(u.y/2/p),v=Math.cos(m),_=Math.cos(g),y=this.splatMesh.getSplatTree();if(y){o.copy(this.camera.matrixWorld).invert(),this.splatMesh.dynamicMode||o.multiply(this.splatMesh.matrixWorld);let b=0,x=0;for(let A=0;A<y.subTrees.length;A++){const T=y.subTrees[A];a.copy(o),this.splatMesh.dynamicMode&&(this.splatMesh.getSceneTransform(A,l),a.multiply(l));const C=T.nodesWithIndexes.length;for(let E=0;E<C;E++){const I=T.nodesWithIndexes[E];if(!I.data||!I.data.indexes||I.data.indexes.length===0)continue;s.copy(I.center).applyMatrix4(a);const k=s.length();s.normalize(),i.copy(s).setX(0).normalize(),r.copy(s).setY(0).normalize();const O=c.dot(r),U=c.dot(i),z=f(I),L=U<_-.6,G=O<v-.6;!h&&(G||L)&&k>z||(x+=I.data.indexes.length,e[b]=I,I.data.distanceToNode=k,b++)}}e.length=b,e.sort((A,T)=>A.data.distanceToNode<T.data.distanceToNode?-1:1);let w=x*lr.BytesPerInt;for(let A=0;A<b;A++){const T=e[A],C=T.data.indexes.length,E=C*lr.BytesPerInt;new Uint32Array(this.sortWorkerIndexesToSort.buffer,w-E,C).set(T.data.indexes),w-=E}return{splatRenderCount:x,shouldSortAll:!1}}else{const b=this.splatMesh.getSplatCount();if(!t||t.length!==b){t=new Uint32Array(b);for(let x=0;x<b;x++)t[x]=x}return this.sortWorkerIndexesToSort.set(t),{splatRenderCount:b,shouldSortAll:!0}}}}());if(e.cameraUp||(e.cameraUp=[0,1,0]),this.cameraUp=new ft().fromArray(e.cameraUp),e.initialCameraPosition||(e.initialCameraPosition=[0,10,15]),this.initialCameraPosition=new ft().fromArray(e.initialCameraPosition),e.initialCameraLookAt||(e.initialCameraLookAt=[0,0,0]),this.initialCameraLookAt=new ft().fromArray(e.initialCameraLookAt),this.dropInMode=e.dropInMode||!1,(e.selfDrivenMode===void 0||e.selfDrivenMode===null)&&(e.selfDrivenMode=!0),this.selfDrivenMode=e.selfDrivenMode&&!this.dropInMode,this.selfDrivenUpdateFunc=this.selfDrivenUpdate.bind(this),e.useBuiltInControls===void 0&&(e.useBuiltInControls=!0),this.useBuiltInControls=e.useBuiltInControls,this.rootElement=e.rootElement,this.ignoreDevicePixelRatio=e.ignoreDevicePixelRatio||!1,this.devicePixelRatio=this.ignoreDevicePixelRatio?1:window.devicePixelRatio||1,this.halfPrecisionCovariancesOnGPU=e.halfPrecisionCovariancesOnGPU||!1,this.threeScene=e.threeScene,this.renderer=e.renderer,this.camera=e.camera,this.gpuAcceleratedSort=e.gpuAcceleratedSort||!1,(e.integerBasedSort===void 0||e.integerBasedSort===null)&&(e.integerBasedSort=!0),this.integerBasedSort=e.integerBasedSort,(e.sharedMemoryForWorkers===void 0||e.sharedMemoryForWorkers===null)&&(e.sharedMemoryForWorkers=!0),this.sharedMemoryForWorkers=e.sharedMemoryForWorkers,this.dynamicScene=!!e.dynamicScene,this.antialiased=e.antialiased||!1,this.kernel2DSize=e.kernel2DSize===void 0?.3:e.kernel2DSize,this.webXRMode=e.webXRMode||jy.None,this.webXRMode!==jy.None&&(this.gpuAcceleratedSort=!1),this.webXRActive=!1,this.webXRSessionInit=e.webXRSessionInit||{},this.renderMode=e.renderMode||BL.Always,this.sceneRevealMode=e.sceneRevealMode||P2.Default,this.focalAdjustment=e.focalAdjustment||1,this.maxScreenSpaceSplatSize=e.maxScreenSpaceSplatSize||1024,this.logLevel=e.logLevel||t_.None,this.sphericalHarmonicsDegree=e.sphericalHarmonicsDegree||0,this.enableOptionalEffects=e.enableOptionalEffects||!1,(e.enableSIMDInSort===void 0||e.enableSIMDInSort===null)&&(e.enableSIMDInSort=!0),this.enableSIMDInSort=e.enableSIMDInSort,(e.inMemoryCompressionLevel===void 0||e.inMemoryCompressionLevel===null)&&(e.inMemoryCompressionLevel=0),this.inMemoryCompressionLevel=e.inMemoryCompressionLevel,(e.optimizeSplatData===void 0||e.optimizeSplatData===null)&&(e.optimizeSplatData=!0),this.optimizeSplatData=e.optimizeSplatData,(e.freeIntermediateSplatData===void 0||e.freeIntermediateSplatData===null)&&(e.freeIntermediateSplatData=!1),this.freeIntermediateSplatData=e.freeIntermediateSplatData,bz()){const i=vpe();i.major<17&&(this.enableSIMDInSort=!1),i.major<16&&(this.sharedMemoryForWorkers=!1)}(e.splatRenderMode===void 0||e.splatRenderMode===null)&&(e.splatRenderMode=Ff.ThreeD),this.splatRenderMode=e.splatRenderMode,this.sceneFadeInRateMultiplier=e.sceneFadeInRateMultiplier||1,this.splatSortDistanceMapPrecision=e.splatSortDistanceMapPrecision||lr.DefaultSplatSortDistanceMapPrecision;const t=this.integerBasedSort?20:24;this.splatSortDistanceMapPrecision=Ya(this.splatSortDistanceMapPrecision,10,t),this.onSplatMeshChangedCallback=null,this.createSplatMesh(),this.controls=null,this.perspectiveControls=null,this.orthographicControls=null,this.orthographicCamera=null,this.perspectiveCamera=null,this.showMeshCursor=!1,this.showControlPlane=!1,this.showInfo=!1,this.sceneHelper=null,this.sortWorker=null,this.sortRunning=!1,this.splatRenderCount=0,this.splatSortCount=0,this.lastSplatSortCount=0,this.sortWorkerIndexesToSort=null,this.sortWorkerSortedIndexes=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.preSortMessages=[],this.runAfterNextSort=[],this.selfDrivenModeRunning=!1,this.splatRenderReady=!1,this.raycaster=new hSt,this.infoPanel=null,this.startInOrthographicMode=!1,this.currentFPS=0,this.lastSortTime=0,this.consecutiveRenderFrames=0,this.previousCameraTarget=new ft,this.nextCameraTarget=new ft,this.mousePosition=new oi,this.mouseDownPosition=new oi,this.mouseDownTime=null,this.resizeObserver=null,this.mouseMoveListener=null,this.mouseDownListener=null,this.mouseUpListener=null,this.keyDownListener=null,this.sortPromise=null,this.sortPromiseResolver=null,this.splatSceneDownloadPromises={},this.splatSceneDownloadAndBuildPromise=null,this.splatSceneRemovalPromise=null,this.loadingSpinner=new aB(null,this.rootElement||document.body),this.loadingSpinner.hide(),this.loadingProgressBar=new oSt(this.rootElement||document.body),this.loadingProgressBar.hide(),this.infoPanel=new lSt(this.rootElement||document.body),this.infoPanel.hide(),this.usingExternalCamera=!!(this.dropInMode||this.camera),this.usingExternalRenderer=!!(this.dropInMode||this.renderer),this.initialized=!1,this.disposing=!1,this.disposed=!1,this.disposePromise=null,this.dropInMode||this.init()}createSplatMesh(){this.splatMesh=new Va(this.splatRenderMode,this.dynamicScene,this.enableOptionalEffects,this.halfPrecisionCovariancesOnGPU,this.devicePixelRatio,this.gpuAcceleratedSort,this.integerBasedSort,this.antialiased,this.maxScreenSpaceSplatSize,this.logLevel,this.sphericalHarmonicsDegree,this.sceneFadeInRateMultiplier,this.kernel2DSize),this.splatMesh.frustumCulled=!1,this.onSplatMeshChangedCallback&&this.onSplatMeshChangedCallback()}init(){this.initialized||(this.rootElement||(this.usingExternalRenderer?this.rootElement=this.renderer.domElement||document.body:(this.rootElement=document.createElement("div"),this.rootElement.style.width="100%",this.rootElement.style.height="100%",this.rootElement.style.position="absolute",document.body.appendChild(this.rootElement))),this.setupCamera(),this.setupRenderer(),this.setupWebXR(this.webXRSessionInit),this.setupControls(),this.setupEventHandlers(),this.threeScene=this.threeScene||new Igt,this.sceneHelper=new D2(this.threeScene),this.sceneHelper.setupMeshCursor(),this.sceneHelper.setupFocusMarker(),this.sceneHelper.setupControlPlane(),this.loadingProgressBar.setContainer(this.rootElement),this.loadingSpinner.setContainer(this.rootElement),this.infoPanel.setContainer(this.rootElement),this.initialized=!0)}setupCamera(){if(!this.usingExternalCamera){const e=new oi;this.getRenderDimensions(e),this.perspectiveCamera=new Hu(NSt,e.x/e.y,.1,1e3),this.orthographicCamera=new gz(e.x/-2,e.x/2,e.y/2,e.y/-2,.1,1e3),this.camera=this.startInOrthographicMode?this.orthographicCamera:this.perspectiveCamera,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt)}}setupRenderer(){if(!this.usingExternalRenderer){const e=new oi;this.getRenderDimensions(e),this.renderer=new ybt({antialias:!1,precision:"highp"}),this.renderer.setPixelRatio(this.devicePixelRatio),this.renderer.autoClear=!0,this.renderer.setClearColor(new Ir(0),0),this.renderer.setSize(e.x,e.y),this.resizeObserver=new ResizeObserver(()=>{this.getRenderDimensions(e),this.renderer.setSize(e.x,e.y),this.forceRenderNextFrame()}),this.resizeObserver.observe(this.rootElement),this.rootElement.appendChild(this.renderer.domElement)}}setupWebXR(e){this.webXRMode&&(this.webXRMode===jy.VR?this.rootElement.appendChild(nb.createButton(this.renderer,e)):this.webXRMode===jy.AR&&this.rootElement.appendChild(OSt.createButton(this.renderer,e)),this.renderer.xr.addEventListener("sessionstart",t=>{this.webXRActive=!0}),this.renderer.xr.addEventListener("sessionend",t=>{this.webXRActive=!1}),this.renderer.xr.enabled=!0,this.camera.position.copy(this.initialCameraPosition),this.camera.up.copy(this.cameraUp).normalize(),this.camera.lookAt(this.initialCameraLookAt))}setupControls(){if(this.useBuiltInControls&&this.webXRMode===jy.None){this.usingExternalCamera?this.camera.isOrthographicCamera?this.orthographicControls=new uM(this.camera,this.renderer.domElement):this.perspectiveControls=new uM(this.camera,this.renderer.domElement):(this.perspectiveControls=new uM(this.perspectiveCamera,this.renderer.domElement),this.orthographicControls=new uM(this.orthographicCamera,this.renderer.domElement));for(let e of[this.orthographicControls,this.perspectiveControls])e&&(e.listenToKeyEvents(window),e.rotateSpeed=.5,e.maxPolarAngle=Math.PI*.75,e.minPolarAngle=.1,e.enableDamping=!0,e.dampingFactor=.05,e.target.copy(this.initialCameraLookAt),e.update());this.controls=this.camera.isOrthographicCamera?this.orthographicControls:this.perspectiveControls,this.controls.update()}}setupEventHandlers(){this.useBuiltInControls&&this.webXRMode===jy.None&&(this.mouseMoveListener=this.onMouseMove.bind(this),this.renderer.domElement.addEventListener("pointermove",this.mouseMoveListener,!1),this.mouseDownListener=this.onMouseDown.bind(this),this.renderer.domElement.addEventListener("pointerdown",this.mouseDownListener,!1),this.mouseUpListener=this.onMouseUp.bind(this),this.renderer.domElement.addEventListener("pointerup",this.mouseUpListener,!1),this.keyDownListener=this.onKeyDown.bind(this),window.addEventListener("keydown",this.keyDownListener,!1))}removeEventHandlers(){this.useBuiltInControls&&(this.renderer.domElement.removeEventListener("pointermove",this.mouseMoveListener),this.mouseMoveListener=null,this.renderer.domElement.removeEventListener("pointerdown",this.mouseDownListener),this.mouseDownListener=null,this.renderer.domElement.removeEventListener("pointerup",this.mouseUpListener),this.mouseUpListener=null,window.removeEventListener("keydown",this.keyDownListener),this.keyDownListener=null)}setRenderMode(e){this.renderMode=e}setActiveSphericalHarmonicsDegrees(e){this.splatMesh.material.uniforms.sphericalHarmonicsDegree.value=e,this.splatMesh.material.uniformsNeedUpdate=!0}onSplatMeshChanged(e){this.onSplatMeshChangedCallback=e}onMouseMove(e){this.mousePosition.set(e.offsetX,e.offsetY)}onMouseDown(){this.mouseDownPosition.copy(this.mousePosition),this.mouseDownTime=Gy()}onMouseClick(e){this.mousePosition.set(e.offsetX,e.offsetY),this.checkForFocalPointChange()}getRenderDimensions(e){this.rootElement?(e.x=this.rootElement.offsetWidth,e.y=this.rootElement.offsetHeight):this.renderer.getSize(e)}setOrthographicMode(e){if(e===this.camera.isOrthographicCamera)return;const t=this.camera,i=e?this.orthographicCamera:this.perspectiveCamera;if(i.position.copy(t.position),i.up.copy(t.up),i.rotation.copy(t.rotation),i.quaternion.copy(t.quaternion),i.matrix.copy(t.matrix),this.camera=i,this.controls){const r=o=>{o.saveState(),o.reset()},s=this.controls,a=e?this.orthographicControls:this.perspectiveControls;r(a),r(s),a.target.copy(s.target),e?Tp.setCameraZoomFromPosition(i,t,s):Tp.setCameraPositionFromZoom(i,t,a),this.controls=a,this.camera.lookAt(this.controls.target)}}adjustForWebXRStereo(e){if(this.camera&&this.webXRActive){const i=this.renderer.xr.getCamera().projectionMatrix.elements[0],r=this.camera.projectionMatrix.elements[0];e.x*=r/i}}isLoadingOrUnloading(){return Object.keys(this.splatSceneDownloadPromises).length>0||this.splatSceneDownloadAndBuildPromise!==null||this.splatSceneRemovalPromise!==null}isDisposingOrDisposed(){return this.disposing||this.disposed}addSplatSceneDownloadPromise(e){this.splatSceneDownloadPromises[e.id]=e}removeSplatSceneDownloadPromise(e){delete this.splatSceneDownloadPromises[e.id]}setSplatSceneDownloadAndBuildPromise(e){this.splatSceneDownloadAndBuildPromise=e}clearSplatSceneDownloadAndBuildPromise(){this.splatSceneDownloadAndBuildPromise=null}addSplatScene(e,t={}){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");t.progressiveLoad&&this.splatMesh.scenes&&this.splatMesh.scenes.length>0&&(console.log('addSplatScene(): "progressiveLoad" option ignore because there are multiple splat scenes'),t.progressiveLoad=!1);const i=t.format!==void 0&&t.format!==null?t.format:RZ(e),r=Tp.isProgressivelyLoadable(i)&&t.progressiveLoad,s=t.showLoadingUI!==void 0&&t.showLoadingUI!==null?t.showLoadingUI:!0;let a=null;s&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=()=>{this.loadingProgressBar.hide(),this.loadingSpinner.removeAllTasks()},l=(m,g,v)=>{if(s)if(v===ca.Downloading)if(m==100)this.loadingSpinner.setMessageForTask(a,"Download complete!");else if(r)this.loadingSpinner.setMessageForTask(a,"Downloading splats...");else{const _=g?`: ${g}`:"...";this.loadingSpinner.setMessageForTask(a,`Downloading${_}`)}else v===ca.Processing&&this.loadingSpinner.setMessageForTask(a,"Processing splats...")};let u=!1,c=0;const d=(m,g)=>{s&&((m&&r||g&&!r)&&(this.loadingSpinner.removeTask(a),!g&&!u&&this.loadingProgressBar.show()),r&&(g?(u=!0,this.loadingProgressBar.hide()):this.loadingProgressBar.setProgress(c)))},f=(m,g,v)=>{c=m,l(m,g,v),t.onProgress&&t.onProgress(m,g,v)},h=(m,g,v)=>{!r&&t.onProgress&&t.onProgress(0,"0%",ca.Processing);const _={rotation:t.rotation||t.orientation,position:t.position,scale:t.scale,splatAlphaRemovalThreshold:t.splatAlphaRemovalThreshold};return this.addSplatBuffers([m],[_],v,g&&s,s,r,r).then(()=>{!r&&t.onProgress&&t.onProgress(100,"100%",ca.Processing),d(g,v)})};return(r?this.downloadAndBuildSingleSplatSceneProgressiveLoad.bind(this):this.downloadAndBuildSingleSplatSceneStandardLoad.bind(this))(e,i,t.splatAlphaRemovalThreshold,h.bind(this),f,o.bind(this),t.headers)}downloadAndBuildSingleSplatSceneStandardLoad(e,t,i,r,s,a,o){const l=this.downloadSplatSceneToSplatBuffer(e,i,s,!1,void 0,t,o),u=IL(l.abortHandler);return l.then(c=>(this.removeSplatSceneDownloadPromise(l),r(c,!0,!0).then(()=>{u.resolve(),this.clearSplatSceneDownloadAndBuildPromise()}))).catch(c=>{a&&a(),this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(l);const d=c instanceof h3?c:new Error(`Viewer::addSplatScene -> Could not load file ${e}`);u.reject(d)}),this.addSplatSceneDownloadPromise(l),this.setSplatSceneDownloadAndBuildPromise(u.promise),u.promise}downloadAndBuildSingleSplatSceneProgressiveLoad(e,t,i,r,s,a,o){let l=0,u=!1;const c=[],d=()=>{if(c.length>0&&!u&&!this.isDisposingOrDisposed()){u=!0;const g=c.shift();r(g.splatBuffer,g.firstBuild,g.finalBuild).then(()=>{u=!1,g.firstBuild?p.resolve():g.finalBuild&&(m.resolve(),this.clearSplatSceneDownloadAndBuildPromise()),c.length>0&&zc(()=>d())})}},f=(g,v)=>{this.isDisposingOrDisposed()||(v||c.length===0||g.getSplatCount()>c[0].splatBuffer.getSplatCount())&&(c.push({splatBuffer:g,firstBuild:l===0,finalBuild:v}),l++,d())},h=this.downloadSplatSceneToSplatBuffer(e,i,s,!0,f,t,o),p=IL(h.abortHandler),m=IL();return this.addSplatSceneDownloadPromise(h),this.setSplatSceneDownloadAndBuildPromise(m.promise),h.then(()=>{this.removeSplatSceneDownloadPromise(h)}).catch(g=>{this.clearSplatSceneDownloadAndBuildPromise(),this.removeSplatSceneDownloadPromise(h);const v=g instanceof h3?g:new Error("Viewer::addSplatScene -> Could not load one or more scenes");p.reject(v),a&&a(v)}),p.promise}addSplatScenes(e,t=!0,i=void 0){if(this.isLoadingOrUnloading())throw new Error("Cannot add splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot add splat scene after dispose() is called.");const r=e.length,s=[];let a;t&&(this.loadingSpinner.removeAllTasks(),a=this.loadingSpinner.addTask("Downloading..."));const o=(d,f,h,p)=>{s[d]=f;let m=0;for(let g=0;g<r;g++)m+=s[g]||0;m=m/r,h=`${m.toFixed(2)}%`,t&&p===ca.Downloading&&this.loadingSpinner.setMessageForTask(a,m==100?"Download complete!":`Downloading: ${h}`),i&&i(m,h,p)},l=[],u=[];for(let d=0;d<e.length;d++){const f=e[d],h=f.format!==void 0&&f.format!==null?f.format:RZ(f.path),p=this.downloadSplatSceneToSplatBuffer(f.path,f.splatAlphaRemovalThreshold,o.bind(this,d),!1,void 0,h,f.headers);l.push(p),u.push(p.promise)}const c=new rT((d,f)=>{Promise.all(u).then(h=>{t&&this.loadingSpinner.removeTask(a),i&&i(0,"0%",ca.Processing),this.addSplatBuffers(h,e,!0,t,t,!1,!1).then(()=>{i&&i(100,"100%",ca.Processing),this.clearSplatSceneDownloadAndBuildPromise(),d()})}).catch(h=>{t&&this.loadingSpinner.removeTask(a),this.clearSplatSceneDownloadAndBuildPromise();const p=h instanceof h3?h:new Error("Viewer::addSplatScenes -> Could not load one or more splat scenes.");f(p)}).finally(()=>{this.removeSplatSceneDownloadPromise(c)})},d=>{for(let f of l)f.abort(d)});return this.addSplatSceneDownloadPromise(c),this.setSplatSceneDownloadAndBuildPromise(c),c}downloadSplatSceneToSplatBuffer(e,t=1,i=void 0,r=!1,s=void 0,a,o){const l=r?!1:this.optimizeSplatData;try{if(a===Bf.Splat)return Pz.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,o);if(a===Bf.KSplat)return sB.loadFromURL(e,i,r,s,o);if(a===Bf.Ply)return Rz.loadFromURL(e,i,r,s,t,this.inMemoryCompressionLevel,l,this.sphericalHarmonicsDegree,o)}catch(u){throw u instanceof Dz?new Error("File type or server does not support progressive loading."):u}throw new Error(`Viewer::downloadSplatSceneToSplatBuffer -> File format not supported: ${e}`)}static isProgressivelyLoadable(e){return e===Bf.Splat||e===Bf.KSplat||e===Bf.Ply}setupSortWorker(e){if(!this.isDisposingOrDisposed())return new Promise(t=>{const i=this.integerBasedSort?Int32Array:Float32Array,r=e.getSplatCount(),s=e.getMaxSplatCount();this.sortWorker=LSt(s,this.sharedMemoryForWorkers,this.enableSIMDInSort,this.integerBasedSort,this.splatMesh.dynamicMode,this.splatSortDistanceMapPrecision),this.sortWorker.onmessage=a=>{if(a.data.sortDone){if(this.sortRunning=!1,this.sharedMemoryForWorkers)this.splatMesh.updateRenderIndexes(this.sortWorkerSortedIndexes,a.data.splatRenderCount);else{const o=new Uint32Array(a.data.sortedIndexes.buffer,0,a.data.splatRenderCount);this.splatMesh.updateRenderIndexes(o,a.data.splatRenderCount)}this.lastSplatSortCount=this.splatSortCount,this.lastSortTime=a.data.sortTime,this.sortPromiseResolver(),this.sortPromiseResolver=null,this.forceRenderNextFrame(),this.runAfterNextSort.length>0&&(this.runAfterNextSort.forEach(o=>{o()}),this.runAfterNextSort.length=0)}else if(a.data.sortCanceled)this.sortRunning=!1;else if(a.data.sortSetupPhase1Complete){this.logLevel>=t_.Info&&console.log("Sorting web worker WASM setup complete."),this.sharedMemoryForWorkers?(this.sortWorkerSortedIndexes=new Uint32Array(a.data.sortedIndexesBuffer,a.data.sortedIndexesOffset,s),this.sortWorkerIndexesToSort=new Uint32Array(a.data.indexesToSortBuffer,a.data.indexesToSortOffset,s),this.sortWorkerPrecomputedDistances=new i(a.data.precomputedDistancesBuffer,a.data.precomputedDistancesOffset,s),this.sortWorkerTransforms=new Float32Array(a.data.transformsBuffer,a.data.transformsOffset,lr.MaxScenes*16)):(this.sortWorkerIndexesToSort=new Uint32Array(s),this.sortWorkerPrecomputedDistances=new i(s),this.sortWorkerTransforms=new Float32Array(lr.MaxScenes*16));for(let o=0;o<r;o++)this.sortWorkerIndexesToSort[o]=o;if(this.sortWorker.maxSplatCount=s,this.logLevel>=t_.Info){console.log("Sorting web worker ready.");const o=this.splatMesh.getSplatDataTextures(),l=o.covariances.size,u=o.centerColors.size;console.log("Covariances texture size: "+l.x+" x "+l.y),console.log("Centers/colors texture size: "+u.x+" x "+u.y)}t()}}})}disposeSortWorker(){this.sortWorker&&this.sortWorker.terminate(),this.sortWorker=null,this.sortPromise=null,this.sortPromiseResolver&&(this.sortPromiseResolver(),this.sortPromiseResolver=null),this.preSortMessages=[],this.sortRunning=!1}removeSplatScene(e,t=!0){return this.removeSplatScenes([e],t)}removeSplatScenes(e,t=!0){if(this.isLoadingOrUnloading())throw new Error("Cannot remove splat scene while another load or unload is already in progress.");if(this.isDisposingOrDisposed())throw new Error("Cannot remove splat scene after dispose() is called.");let i;return this.splatSceneRemovalPromise=new Promise((r,s)=>{let a;t&&(this.loadingSpinner.removeAllTasks(),this.loadingSpinner.show(),a=this.loadingSpinner.addTask("Removing splat scene..."));const o=()=>{t&&(this.loadingSpinner.hide(),this.loadingSpinner.removeTask(a))},l=c=>{o(),this.splatSceneRemovalPromise=null,c?s(c):r()},u=()=>this.isDisposingOrDisposed()?(l(),!0):!1;i=this.sortPromise||Promise.resolve(),i.then(()=>{if(u())return;const c=[],d=[],f=[];for(let h=0;h<this.splatMesh.scenes.length;h++){let p=!1;for(let m of e)if(m===h){p=!0;break}if(!p){const m=this.splatMesh.scenes[h];c.push(m.splatBuffer),d.push(this.splatMesh.sceneOptions[h]),f.push({position:m.position.clone(),quaternion:m.quaternion.clone(),scale:m.scale.clone()})}}this.disposeSortWorker(),this.splatMesh.dispose(),this.sceneRevealMode=P2.Instant,this.createSplatMesh(),this.addSplatBuffers(c,d,!0,!1,!0).then(()=>{u()||(o(),this.splatMesh.scenes.forEach((h,p)=>{h.position.copy(f[p].position),h.quaternion.copy(f[p].quaternion),h.scale.copy(f[p].scale)}),this.splatMesh.updateTransforms(),this.splatRenderReady=!1,this.runSplatSort(!0).then(()=>{if(u()){this.splatRenderReady=!0;return}i=this.sortPromise||Promise.resolve(),i.then(()=>{this.splatRenderReady=!0,l()})}))}).catch(h=>{l(h)})})}),this.splatSceneRemovalPromise}start(){if(this.selfDrivenMode)this.webXRMode?this.renderer.setAnimationLoop(this.selfDrivenUpdateFunc):this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc),this.selfDrivenModeRunning=!0;else throw new Error("Cannot start viewer unless it is in self driven mode.")}stop(){this.selfDrivenMode&&this.selfDrivenModeRunning&&(this.webXRMode?this.renderer.setAnimationLoop(null):cancelAnimationFrame(this.requestFrameId),this.selfDrivenModeRunning=!1)}async dispose(){if(this.isDisposingOrDisposed())return this.disposePromise;let e=[],t=[];for(let i in this.splatSceneDownloadPromises)if(this.splatSceneDownloadPromises.hasOwnProperty(i)){const r=this.splatSceneDownloadPromises[i];t.push(r),e.push(r.promise)}return this.sortPromise&&e.push(this.sortPromise),this.disposing=!0,this.disposePromise=Promise.all(e).finally(()=>{this.stop(),this.orthographicControls&&(this.orthographicControls.dispose(),this.orthographicControls=null),this.perspectiveControls&&(this.perspectiveControls.dispose(),this.perspectiveControls=null),this.controls=null,this.splatMesh&&(this.splatMesh.dispose(),this.splatMesh=null),this.sceneHelper&&(this.sceneHelper.dispose(),this.sceneHelper=null),this.resizeObserver&&(this.resizeObserver.unobserve(this.rootElement),this.resizeObserver=null),this.disposeSortWorker(),this.removeEventHandlers(),this.loadingSpinner.removeAllTasks(),this.loadingSpinner.setContainer(null),this.loadingProgressBar.hide(),this.loadingProgressBar.setContainer(null),this.infoPanel.setContainer(null),this.camera=null,this.threeScene=null,this.splatRenderReady=!1,this.initialized=!1,this.renderer&&(this.usingExternalRenderer||(this.rootElement.removeChild(this.renderer.domElement),this.renderer.dispose()),this.renderer=null),this.usingExternalRenderer||document.body.removeChild(this.rootElement),this.sortWorkerSortedIndexes=null,this.sortWorkerIndexesToSort=null,this.sortWorkerPrecomputedDistances=null,this.sortWorkerTransforms=null,this.disposed=!0,this.disposing=!1,this.disposePromise=null}),t.forEach(i=>{i.abort("Scene disposed")}),this.disposePromise}selfDrivenUpdate(){this.selfDrivenMode&&!this.webXRMode&&(this.requestFrameId=requestAnimationFrame(this.selfDrivenUpdateFunc)),this.update(),this.shouldRender()?(this.render(),this.consecutiveRenderFrames++):this.consecutiveRenderFrames=0,this.renderNextFrame=!1}forceRenderNextFrame(){this.renderNextFrame=!0}update(e,t){this.dropInMode&&this.updateForDropInMode(e,t),!(!this.initialized||!this.splatRenderReady||this.isDisposingOrDisposed())&&(this.controls&&(this.controls.update(),this.camera.isOrthographicCamera&&!this.usingExternalCamera&&Tp.setCameraPositionFromZoom(this.camera,this.camera,this.controls)),this.runSplatSort(),this.updateForRendererSizeChanges(),this.updateSplatMesh(),this.updateMeshCursor(),this.updateFPS(),this.timingSensitiveUpdates(),this.updateInfoPanel(),this.updateControlPlane())}updateForDropInMode(e,t){this.renderer=e,this.splatMesh&&this.splatMesh.setRenderer(this.renderer),this.camera=t,this.controls&&(this.controls.object=t),this.init()}updateControlPlane(){this.showControlPlane?(this.sceneHelper.setControlPlaneVisibility(!0),this.sceneHelper.positionAndOrientControlPlane(this.controls.target,this.camera.up)):this.sceneHelper.setControlPlaneVisibility(!1)}getSplatMesh(){return this.splatMesh}getSplatScene(e){return this.splatMesh.getScene(e)}getSceneCount(){return this.splatMesh.getSceneCount()}isMobile(){return navigator.userAgent.includes("Mobi")}};Cn(Tp,"setCameraPositionFromZoom",function(){const e=new ft;return function(t,i,r){const s=1/(i.zoom*.001);e.copy(r.target).sub(t.position).normalize().multiplyScalar(s).negate(),t.position.copy(r.target).add(e)}}()),Cn(Tp,"setCameraZoomFromPosition",function(){const e=new ft;return function(t,i,r){const s=e.copy(r.target).sub(i.position).length();t.zoom=1/(s*.001)}}());let lB=Tp;const Lz=n=>(cc("data-v-1897a8b2"),n=n(),dc(),n),VSt=Lz(()=>Te("h1",{class:"section-title"},"3DGS Model",-1)),$St=Lz(()=>Te("p",null,[An(" Thanks to "),Te("a",{href:"https://github.com/mkkellogg/GaussianSplats3D",target:"_blank"},"GaussianSplats3D"),An(", we can visualize 3DGS models here. ")],-1)),GSt=Lz(()=>Te("div",{id:"gs"},null,-1)),WSt=Ne({__name:"GaussianSplats3D",setup(n){return Ln(()=>{const e=document.getElementById("gs");if(e){const t=new lB({rootElement:e,cameraUp:[0,-1,0],initialCameraPosition:[-2.13,-.5,-4.63],initialCameraLookAt:[-.08,.89,-1.36],sharedMemoryForWorkers:!1});t.addSplatScene("./3dgs/cotton-mirror.splat",{splatAlphaRemovalThreshold:5,showLoadingUI:!0,position:[0,1,-1],rotation:[0,0,0,1],scale:[.18,.18,.18]}).then(()=>{t.start()})}}),(e,t)=>{const i=Ht("el-divider"),r=Ht("el-row"),s=Ht("el-col");return j(),_e("div",null,[he(i),he(r,{justify:"center"},{default:Ae(()=>[VSt]),_:1}),he(r,{justify:"center"},{default:Ae(()=>[he(s,{xs:24,sm:20,md:16,lg:12,xl:12},{default:Ae(()=>[$St,he(r,{justify:"center"},{default:Ae(()=>[he(s,{xs:20,sm:24},{default:Ae(()=>[GSt]),_:1})]),_:1})]),_:1})]),_:1})])}}}),qSt=Fa(WSt,[["__scopeId","data-v-1897a8b2"]]),jSt={components:{Title:K9e,Abstract:J9e,BibTeX:aUe,Carousel:Oze,Video:Jje,ImageSlider:cKe,ImageSliderInner:bKe,Echart:Ust,Collapse:Qst,Table:$st,SeletionForComparison:lat,Comment:hat,Latex:xat,Model3D:X0t,GaussianSplats3D:qSt}};function KSt(n,e,t,i,r,s){const a=Ht("Title"),o=Ht("Carousel"),l=Ht("Video"),u=Ht("Abstract"),c=Ht("Latex"),d=Ht("Table"),f=Ht("Collapse"),h=Ht("Echart"),p=Ht("Model3D"),m=Ht("GaussianSplats3D"),g=Ht("SeletionForComparison"),v=Ht("ImageSliderInner"),_=Ht("ImageSlider"),y=Ht("BibTeX"),b=Ht("Comment");return j(),_e(an,null,[he(a),he(o),he(l),he(u),he(c),he(d),he(f),he(h),he(p),he(m),he(g),he(v),he(_),he(y),he(b)],64)}const XSt=Fa(jSt,[["render",KSt]]),Cpe=n=>(cc("data-v-4858f2ee"),n=n(),dc(),n),YSt={class:"bg"},QSt={class:"footer"},ZSt=["href"],JSt=Cpe(()=>Te("br",null,null,-1)),ext=["href"],txt=["href"],nxt=["href"],ixt=Cpe(()=>Te("br",null,null,-1)),rxt=["href"],sxt=Ne({__name:"Footer",setup(n){const e={Nerfies:"https://github.com/nerfies/nerfies.github.io",Vue:"https://cn.vuejs.org/",Vite:"https://cn.vitejs.dev/",ElementPlus:"https://element-plus.org/zh-CN/",template:"https://github.com/JunyaoHu/academic-project-page-template-vue"};return(t,i)=>{const r=Ht("el-row"),s=Ht("el-watermark");return j(),_e("div",YSt,[he(s,{content:["JunyaoHu","Academic Project","Page Template"],gap:["60","0"],"z-index":0},{default:Ae(()=>[he(r,{justify:"center"},{default:Ae(()=>[Te("p",QSt,[An(" This template is inspired by "),Te("a",{href:e.Nerfies},"Nerfies",8,ZSt),An(","),JSt,An(" powered by "),Te("a",{href:e.Vue},"Vue",8,ext),An(", "),Te("a",{href:e.Vite},"Vite",8,txt),An(", and "),Te("a",{href:e.ElementPlus},"Element Plus",8,nxt),An("."),ixt,An(" You can fork🛠️ / star✨/ PR📃 from "),Te("a",{href:e.template},"here",8,rxt),An(". ")])]),_:1})]),_:1})])}}}),axt=Fa(sxt,[["__scopeId","data-v-4858f2ee"]]),oxt={components:{Header:P9e,Main:XSt,Footer:axt}};function lxt(n,e,t,i,r,s){const a=Ht("Header"),o=Ht("el-header"),l=Ht("Main"),u=Ht("el-main"),c=Ht("Footer"),d=Ht("el-footer"),f=Ht("el-container"),h=Ht("el-backtop");return j(),_e("div",null,[he(f,null,{default:Ae(()=>[he(o,null,{default:Ae(()=>[he(a)]),_:1}),he(u,null,{default:Ae(()=>[he(l)]),_:1}),he(d,null,{default:Ae(()=>[he(c)]),_:1})]),_:1}),he(h,{right:40,bottom:80})])}const uxt=Fa(oxt,[["render",lxt]]),Ape=KJ(uxt);Ape.use(C9e);Ape.mount("#app")});export default cxt();
